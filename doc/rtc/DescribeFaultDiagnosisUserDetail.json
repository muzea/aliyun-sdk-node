{"summary":"调用DescribeFaultDiagnosisUserDetail获取异常诊断的用户详情。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{},"parameters":[{"name":"AppId","in":"query","schema":{"title":"APP ID。","description":"APP ID。","type":"string","required":true,"example":"0rbd****\n"}},{"name":"ChannelId","in":"query","schema":{"title":"频道ID","description":"频道ID","type":"string","required":true,"example":"311"}},{"name":"CreatedTs","in":"query","schema":{"title":"频道创建时间，使用UNIX时间戳表示，单位：秒。","description":"频道创建时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","required":true,"example":"1615892596"}},{"name":"UserId","in":"query","schema":{"title":"用户ID","description":"用户ID","type":"string","required":true,"example":"c906531af5f9****"}},{"name":"FaultType","in":"query","schema":{"title":"异常类型 JOIN_SLOW：进频道慢 AUDIO_STUCK：音频卡顿 VIDEO_STUCK：视频卡顿 VIDEO_VAGUE：视频模糊 HIGH_DELAY：通话延迟高 FIRST_FRAME_SLOW：接收首屏慢","description":"异常类型。取值：\n- **JOIN_SLOW**：进频道慢 。\n- **AUDIO_STUCK**：音频卡顿。\n- **VIDEO_STUCK**：视频卡顿。\n- **VIDEO_VAGUE**：视频模糊。\n- **HIGH_DELAY**：通话延迟高 。\n- **FIRST_FRAME_SLOW**：接收首屏慢。","type":"string","required":true,"example":"JOIN_SLOW"}},{"name":"QueryCallUserInfo","in":"query","schema":{"title":"是否查询通话用户信息，为空默认是false","description":"是否查询通话用户信息，为空默认是false。","type":"boolean","required":false,"example":"true"}}],"responses":{"200":{"schema":{"type":"object","properties":{"CallInfo":{"title":"通信基本信息，QueryCallUserInfo=false是返回。","description":"通信基本信息，QueryCallUserInfo=false时返回。","type":"object","properties":{"AppId":{"title":"App ID。","description":"App ID。","type":"string","example":"testappid"},"ChannelId":{"title":"频道ID。","description":"频道ID。","type":"string","example":"311"},"CallStatus":{"title":"通信状态。取值：IN：进行中。OUT：已结束。","description":"通信状态。取值：\n- **IN**：进行中。\n- **OUT**：已结束。","type":"string","example":"IN"},"CreatedTs":{"title":"创建通信时间，使用UNIX时间戳表示，单位：秒。","description":"创建通信时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620957905"},"DestroyedTs":{"title":"释放通信时间，使用UNIX时间戳表示，单位：秒。","description":"释放通信时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620958150"},"Duration":{"title":"通信持续时长，单位：秒。","description":"通信持续时长，单位：秒。","type":"integer","format":"int64","example":"100"}}},"UserDetail":{"title":"诊断用户详细信，QueryCallUserInfo=false是返回息","description":"诊断用户详细信，QueryCallUserInfo=false时返回。","type":"object","properties":{"UserId":{"title":"用户ID。","description":"用户ID。","type":"string","example":"testuserid"},"Location":{"title":"地理位置信息，例如：北京市-北京市","description":"地理位置信息，例如：北京市-北京市。","type":"string","example":"浙江省-杭州市"},"OnlinePeriods":{"title":"在线时段信息。","description":"在线时段信息。","type":"array","items":{"type":"object","properties":{"JoinTs":{"title":"加入通话时间，使用UNIX时间戳表示，单位：秒。","description":"加入通话时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620957919"},"LeaveTs":{"title":"离开通话时间，使用UNIX时间戳表示，单位：秒。","description":"离开通话时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620958150"}}}},"CreatedTs":{"title":"创建通话时间，使用UNIX时间戳表示，单位：秒。","description":"创建通话时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620957919\n"},"DestroyedTs":{"title":"释放通话时间，使用UNIX时间戳表示，单位：秒。通话未结束时值为0。","description":"释放通话时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1620958150"},"OnlineDuration":{"title":"在线时长，单位：秒。","description":"在线时长，单位：秒。","type":"integer","format":"int64","example":"231"},"Duration":{"title":"通话时长，首次进入到最后离开，单位：秒。","description":"通话时长，首次进入到最后离开，单位：秒。","type":"integer","format":"int64","example":"231"},"SdkVersion":{"title":"SDK版本，如1.0.0、1.1.1等","description":"SDK版本，如1.0.0、1.1.1等。","type":"string","example":"1.0.0"},"Os":{"title":"平台类型：若用户客户端为WEB则是浏览器类型，若客户端为NATIVE则是操作系统类型","description":"平台类型：若用户客户端为WEB则是浏览器类型，若客户端为NATIVE则是操作系统类型。","type":"string","example":"iOS"},"Network":{"title":"网络类型，如WiFi，4G等","description":"网络类型，如WiFi，4G等。","type":"string","example":"4G"}}},"FaultMetricData":{"title":"异常指标","description":"异常指标。","type":"object","properties":{"Nodes":{"title":"指标坐标点列表","description":"指标坐标点列表。","type":"array","items":{"type":"object","properties":{"X":{"title":"x轴坐标值，秒级时间戳，单位时间为分钟","description":"指标趋势图中x轴横坐标，单位时间为1分钟。","type":"string","example":"1620957900"},"Y":{"title":"y轴坐标值，异常指标的值","description":"指标趋势图中y轴纵坐标。","type":"string","example":"0.4540"}}}}}},"FactorList":{"title":"影响因素列表，空表示影响因素未知","description":"影响因素列表，空表示影响因素未知。","type":"array","items":{"type":"object","properties":{"FactorId":{"title":"影响因素ID： 1：发布端网络差 2：订阅端网络差 3：发布端设备性能差 4：发布端关闭摄像头 5：发布端切到后台运行","description":"影响因素ID，详情请参见下文中的影响因素ID取值。","type":"string","example":"1"},"FaultSource":{"title":"异常来源 LOCAL：本端 REMOTE：远端","description":"异常来源 LOCAL：本端 REMOTE：远端。","type":"string","example":"LOCAL"},"RelatedMetricDatas":{"title":"关联的指标，坐标数据，当FaultType为AUDIO_STUCK、VIDEO_STUCK、VIDEO_VAGUE、HIGH_DELAY时返回","description":"关联的指标，坐标数据，当FaultType为AUDIO_STUCK、VIDEO_STUCK、VIDEO_VAGUE、HIGH_DELAY时返回。","type":"array","items":{"type":"object","properties":{"Role":{"title":"来源角色： SENDER：发布端，即上行 RECEIVER：订阅端，即下行","description":"来源角色。取值：\n- **SENDER**：发布端。\n- **RECEIVER**：订阅端。","type":"string","example":"SENDER"},"UserId":{"title":"数据来自对应发布端的用户ID","description":"数据来自对应发布端的用户ID。","type":"string","example":"testuserid2"},"Type":{"title":"指标类型，参照端到端指标接口的指标类型","description":"指标类型，参照端到端指标接口的指标类型。","type":"string","example":"AUDIO_STUCK"},"Nodes":{"title":"坐标数据列表","description":"指标趋势图坐标点列表。","type":"array","items":{"description":"指标趋势图坐标点详情。","type":"object","properties":{"X":{"title":"X坐标值，秒级时间戳","description":"指标趋势图中x轴横坐标。","type":"string","example":"1615892596"},"Y":{"title":"Y坐标值，指标值","description":"指标趋势图中y轴纵坐标。","type":"string","example":"20"},"Ext":{"title":"扩展数据","description":"扩展数据。","type":"object"}}}}}}},"RelatedEventDatas":{"title":"关联的事件，按时间分组，当FaultType为AUDIO_STUCK、VIDEO_STUCK、VIDEO_VAGUE、HIGH_DELAY时返回","description":"关联的事件，按时间分组，当FaultType为AUDIO_STUCK、VIDEO_STUCK、VIDEO_VAGUE、HIGH_DELAY时返回坐标数据。","type":"array","items":{"description":"关联的事件详情。","type":"object","properties":{"UserId":{"title":"用户ID","description":"用户ID","type":"string","example":"0a497933****"},"Role":{"title":"来源角色： SENDER：发布端，即上行 RECEIVER：订阅端，即下行","description":"来源角色。取值：\n- **SENDER**：发布端。\n- **RECEIVER**：订阅端。","type":"string","example":"SENDER"},"EventDataItems":{"title":"事件数据列表","description":"事件数据列表。","type":"array","items":{"type":"object","properties":{"Ts":{"title":"第一个事件发生的时间，使用UNIX时间戳表示，单位：秒。","description":"第一个事件发生的时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1614936817"},"EventList":{"title":"事件列表。","description":"事件列表。","type":"array","items":{"type":"object","properties":{"EventName":{"title":"事件名称。","description":"事件名称。","type":"string","example":"开始发布"},"EventType":{"title":"事件类型，取值：USER：用户事件。SYSTEM：系统事件。","description":"事件类型。取值：\n- **USER**：用户事件。\n- **SYSTEM**：系统事件。","type":"string","example":"USER"},"Ts":{"title":"事件发生的时间，使用UNIX时间戳表示，单位：秒。","description":"事件发生的时间，使用UNIX时间戳表示，单位：秒。","type":"integer","format":"int64","example":"1614936817"}}}}}}}}}}}}},"NetworkOperators":{"title":"网络运营商列表","description":"网络运营商列表","type":"array","items":{"description":"网络运营商。","type":"string","example":"移动"}},"RequestId":{"title":"请求ID。","description":"请求ID。","type":"string","example":"231470C1-ACFB-4C9F-844F-4CFE1E3804C5"}}}}},"errorCodes":{"400":[{"errorCode":"ApiParamError","errorMessage":"API %s."}],"403":[{"errorCode":"BizCreatedTsError","errorMessage":"A business CreatedTs error occurred."},{"errorCode":"BizAppError","errorMessage":"A business application permission error occurred."},{"errorCode":"BizUidError","errorMessage":"A business UID error occurred."}],"500":[{"errorCode":"ServerInternalError","errorMessage":"An internal error occurred."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"CallInfo\\\": {\\n    \\\"AppId\\\": \\\"testappid\\\",\\n    \\\"ChannelId\\\": \\\"311\\\",\\n    \\\"CallStatus\\\": \\\"IN\\\",\\n    \\\"CreatedTs\\\": 1620957905,\\n    \\\"DestroyedTs\\\": 1620958150,\\n    \\\"Duration\\\": 100\\n  },\\n  \\\"UserDetail\\\": {\\n    \\\"UserId\\\": \\\"testuserid\\\",\\n    \\\"Location\\\": \\\"浙江省-杭州市\\\",\\n    \\\"OnlinePeriods\\\": [\\n      {\\n        \\\"JoinTs\\\": 1620957919,\\n        \\\"LeaveTs\\\": 1620958150\\n      }\\n    ],\\n    \\\"CreatedTs\\\": 1620957919,\\n    \\\"DestroyedTs\\\": 1620958150,\\n    \\\"OnlineDuration\\\": 231,\\n    \\\"Duration\\\": 231,\\n    \\\"SdkVersion\\\": \\\"1.0.0\\\",\\n    \\\"Os\\\": \\\"iOS\\\",\\n    \\\"Network\\\": \\\"4G\\\"\\n  },\\n  \\\"FaultMetricData\\\": {\\n    \\\"Nodes\\\": [\\n      {\\n        \\\"X\\\": \\\"1620957900\\\",\\n        \\\"Y\\\": \\\"0.4540\\\"\\n      }\\n    ]\\n  },\\n  \\\"FactorList\\\": [\\n    {\\n      \\\"FactorId\\\": \\\"1\\\",\\n      \\\"FaultSource\\\": \\\"LOCAL\\\",\\n      \\\"RelatedMetricDatas\\\": [\\n        {\\n          \\\"Role\\\": \\\"SENDER\\\",\\n          \\\"UserId\\\": \\\"testuserid2\\\",\\n          \\\"Type\\\": \\\"AUDIO_STUCK\\\",\\n          \\\"Nodes\\\": [\\n            {\\n              \\\"X\\\": \\\"1615892596\\\",\\n              \\\"Y\\\": \\\"20\\\",\\n              \\\"Ext\\\": {\\n                \\\"test\\\": \\\"test\\\",\\n                \\\"test2\\\": 1\\n              }\\n            }\\n          ]\\n        }\\n      ],\\n      \\\"RelatedEventDatas\\\": [\\n        {\\n          \\\"UserId\\\": \\\"0a497933****\\\",\\n          \\\"Role\\\": \\\"SENDER\\\",\\n          \\\"EventDataItems\\\": [\\n            {\\n              \\\"Ts\\\": 1614936817,\\n              \\\"EventList\\\": [\\n                {\\n                  \\\"EventName\\\": \\\"开始发布\\\",\\n                  \\\"EventType\\\": \\\"USER\\\",\\n                  \\\"Ts\\\": 1614936817\\n                }\\n              ]\\n            }\\n          ]\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"NetworkOperators\\\": [\\n    \\\"移动\\\"\\n  ],\\n  \\\"RequestId\\\": \\\"231470C1-ACFB-4C9F-844F-4CFE1E3804C5\\\"\\n}\",\"type\":\"json\"}]","title":"获取异常诊断的用户详情","description":"### 使用说明\n本接口用于获取异常诊断的概览数据。使用该接口时，支持查询最近48小时的数据。\n### QPS限制\n本接口的单用户QPS限制为5次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。"}