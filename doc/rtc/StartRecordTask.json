{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"parameters":[{"name":"SubSpecUsers","in":"query","style":"repeatList","schema":{"description":"指定该任务订阅的用户列表。","type":"array","items":{"description":"指定该任务订阅的用户列表，默认订阅频道内全部用户，N表示的是数组的下标，取值范围：**1～16**。\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"userID"},"required":false,"example":"userID","maxItems":64}},{"name":"SubSpecAudioUsers","in":"query","style":"repeatList","schema":{"description":"指定订阅房间里有哪些用户音频流。","type":"array","items":{"description":"指定订阅房间里有哪些用户音频流（输入allStream表示混所有人音频流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"audioUserID"},"required":false,"example":"1","maxItems":64}},{"name":"SubSpecShareScreenUsers","in":"query","style":"repeatList","schema":{"description":"指定订阅房间里有哪些用户屏幕共享流。","type":"array","items":{"description":"指定订阅房间里有哪些用户屏幕共享流（输入allStream表示混所有人屏幕共享流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"videoUserID"},"required":false,"example":"1","maxItems":64}},{"name":"SubSpecCameraUsers","in":"query","style":"repeatList","schema":{"description":"指定订阅房间里有哪些用户摄像头流。","type":"array","items":{"description":"指定订阅房间里有哪些用户摄像头流（输入allStream表示混所有人摄像头流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"cameraUserID"},"required":false,"example":"1","maxItems":64}},{"name":"UnsubSpecAudioUsers","in":"query","style":"repeatList","schema":{"description":"指定非订阅房间里有哪些用户音频流。","type":"array","items":{"description":"指定非订阅房间里有哪些用户音频流（输入allStream表示混所有人音频流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"audioUserID2"},"required":false,"example":"1","maxItems":64}},{"name":"UnsubSpecShareScreenUsers","in":"query","style":"repeatList","schema":{"description":"指定非订阅房间里有哪些用户屏幕共享流。","type":"array","items":{"description":"指定非订阅房间里有哪些用户屏幕共享流（输入allStream表示混所有人屏幕共享流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"videoUserID2"},"required":false,"example":"1","maxItems":64}},{"name":"UnsubSpecCameraUsers","in":"query","style":"repeatList","schema":{"description":"指定非订阅房间里有哪些用户摄像头流。","type":"array","items":{"description":"指定非订阅房间里有哪些用户摄像头流（输入allStream表示混所有人摄像头流）。N表示的是数组的下标，取值范围：1～16。\n\n> N需要从1开始并从小到大，不能中断，要连续。","type":"string","required":false,"example":"cameraUserID2"},"required":false,"example":"1","maxItems":64}},{"name":"UserPanes","in":"query","style":"repeatList","schema":{"description":"布局参数列表。","type":"array","items":{"description":"布局参数，窗格图片暂不支持透明度配置。","type":"object","properties":{"Images":{"description":"当前布局的图片框位列表。","type":"array","items":{"description":"当前布局的图片框位。","type":"object","properties":{"Width":{"description":"窗格宽，归一化百分比。","type":"number","format":"float","required":false,"example":"0.2456"},"Height":{"description":"窗格高，归一化百分比。","type":"number","format":"float","required":false,"example":"0.2456"},"Y":{"description":"坐标Y，归一化百分比。","type":"number","format":"float","required":false,"example":"0.7576"},"Url":{"description":"图片的HTTP或HTTPS地址。","type":"string","required":false,"example":"https://www.example.com/image.jpg"},"Display":{"description":"图片显示，取值：\n\n- **0**（None）：不显示。\n- **1**（Always）：总是显示。\n- **2**（Backup）：当前用户无视频流时显示。","type":"integer","format":"int32","required":false,"example":"1"},"ZOrder":{"description":"叠放顺序，0为最底层，1层在0层之上，以此类推。","type":"integer","format":"int32","required":false,"example":"0"},"X":{"description":"坐标X，归一化百分比。","type":"number","format":"float","required":false,"example":"0.7576"}},"required":false},"required":false,"maxItems":1},"UserId":{"description":"对应布局框格的用户ID。N的取值：**1~16**。","type":"string","required":false,"example":"TestId"},"Texts":{"description":"当前布局的文字框位列表。","type":"array","items":{"description":"当前布局的文字框位，最多支持16个文本。","type":"object","properties":{"FontType":{"description":"字体类型。取值：\n\n- **0**（默认）：NOTO_SERIF_CJKSC_REGULAR。\n- **1**：ALIBABA_PUHUITI_REGULAR。\n- **2**：ALIBABA_PUHUITI_BOLD。\n- **3**：ALIBABA_PUHUITI_Heavy。\n- **4**：ALIBABA_PUHUITI_LIGHT。\n- **5**：ALIBABA_PUHUITI_MEDIUM。","type":"integer","format":"int32","required":false,"example":"0"},"FontColor":{"description":"文字颜色（RGB）。计算公式为R+G×256+B×65536，R（红）、G（绿）、B（蓝）的取值：**0~255**。","type":"integer","format":"int32","required":false,"example":"1"},"Y":{"description":"坐标Y，归一化百分比。","type":"number","format":"float","required":false,"example":"0.7576"},"Text":{"description":"文本内容。","type":"string","required":false,"example":"text"},"ZOrder":{"description":"叠放顺序，0为最底层，1层在0层之上，以此类推。","type":"integer","format":"int32","required":false,"example":"0"},"X":{"description":"坐标X，归一化百分比。","type":"number","format":"float","required":false,"example":"0.7576"},"FontSize":{"description":"字体大小。字体合理范围**(0, 72]**。","type":"integer","format":"int32","required":false,"example":"1"}},"required":false},"required":false,"maxItems":16},"SourceType":{"description":"对应布局的用户视频输入。取值：\n\n- **camera**（默认）：视频流。\n- **shareScreen**：共享屏幕流。","type":"string","required":false,"example":"camera"},"PaneId":{"description":"窗格ID，取值：**0**~**15**。\n\n> - 当指定的PaneId用户找不到的话，会默认显示其他的流，流的确定是根据用户加入频道的顺序。\n- 如果某个UserPanes相关的参数为必选，则其他相关参数都为必选，反之都为非必选。","type":"integer","format":"int32","required":false,"example":"2"}},"required":false},"required":false,"maxItems":16}},{"name":"LayoutIds","in":"query","style":"repeatList","schema":{"description":"布局ID组。","type":"array","items":{"description":"布局ID数据，您可在一次任务中指定多个布局，系统会根据当时频道中的人数进行切换。数组下标取值范围：**1**～**16**，相当于一个旁路任务中最多可以同时设置16种布局。详情请参见[布局](~~109587~~)。\n> - 数组下标需要从1开始并从小到大，不能中断，要连续。\n- 设置的布局窗格数不能相同。例：官网上的布局ID 2和3 的不能同时设置，他们两个的窗格数相同都是2。","type":"integer","format":"int64","required":false,"example":"1"},"required":false,"example":"1111","maxItems":64}},{"name":"AppId","in":"query","schema":{"description":"应用ID。通过控制台创建和查询，仅支持传单个ID。","type":"string","required":true,"docRequired":true,"example":"yourAppId"}},{"name":"ChannelId","in":"query","schema":{"description":"频道ID。仅支持传单个ID。","type":"string","required":true,"docRequired":true,"example":"yourChannelId"}},{"name":"TaskId","in":"query","schema":{"description":"任务ID。仅支持传单个ID，需保证唯一。由1~55位大小写字母、数字、下划线、短划线（-）组成。","type":"string","required":true,"docRequired":true,"example":"yourTaskId"}},{"name":"TaskProfile","in":"query","schema":{"description":"任务计费配置，根据您的不同设置，进行收费。请参见下文中的TaskProfile枚举值。\n\n> - 编码选项MediaEncode的分辨率需要小于等于TaskProfile的分辨率。\n- 布局最大窗格数需要小于等于TaskProfile的输入路数。","type":"string","required":false,"example":"4IN_1080P"}},{"name":"MediaEncode","in":"query","schema":{"description":"编码选项，请参见下文中的MediaEncode枚举值。","type":"integer","format":"int32","required":false,"example":"20"}},{"name":"TemplateId","in":"query","schema":{"description":"配置模板ID。获取模板ID，请参见[AddRecordTemplate](~~193625~~)。","type":"string","required":true,"docRequired":true,"example":"76dasgb****"}},{"name":"SourceType","in":"query","schema":{"description":"单流录制模式下视频源，取值：\n\n- **camera**：摄像头。\n- **shareScreen**：屏幕共享。\n\n> 如果视频源为shareScreen，且仅推摄像头流，则录制摄像头流；如果同时推屏幕共享流，则录制屏幕共享流。","type":"string","required":false,"example":"camera"}},{"name":"StreamType","in":"query","schema":{"description":"单流录制模式，取值：\n\n- **0**（默认值）：录制原始流。\n- **1**：仅录制音频流。\n","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"MixMode","in":"query","schema":{"description":"录制模式，取值：\n\n- **0**：单流录制，不允许中间修改任务参数（不允许调用UpdateRecordTask接口修改任务参数）。\n- **1**（默认值）：合流录制，支持多画面合流输出。\n\n> - 单流录制模式下有效参数：StreamType、SourceType。\n- 合流录制模式下有效参数：TaskProfile、MediaEncode、LayoutIds、BackgroundColor、SubSpecUsers、CropMode、UserPanes、Backgrounds、Watermarks、ClockWidgets。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"CropMode","in":"query","schema":{"description":"视频的裁剪方式。取值：\n\n- **1**：保持比例裁剪。\n- **2**：保持比例留边（默认值）。","type":"integer","format":"int64","required":false,"example":"1"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"760bad53276431c499e30dc36f6b****"}}}}},"errorCodes":{"200":[{"errorCode":"TaskExisted","errorMessage":"the task is existed"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"760bad53276431c499e30dc36f6b****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<StartRecordTaskResponse>\\r\\n<RequestId>760bad53276431c499e30dc36f6b****</RequestId>\\r\\n</StartRecordTaskResponse>\",\"errorExample\":\"\"}]","title":"录制视频任务","summary":"调用StartRecordTask录制视频任务。","description":"# 使用说明\n\n- 调用本接口前，您必须已经调用[AddRecordTemplate](~~193625~~)添加录制配置模板。\n<props=\"china\">- 默认最多同时启动100个录制任务，超出后新的录制任务将不可用，如果有特殊需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)。</props>\n<props=\"intl\">- 默认最多同时启动100个录制任务，超出后新的录制任务将不可用，如果有特殊需求，请[提交工单](https://workorder-intl.console.aliyun.com/#/ticket/createIndex)。</props>\n\n# QPS限制\n本接口的单用户QPS限制为500次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~341645~~)。","requestParamsDescription":"**MediaEncode枚举值：**\n\n| ID | 宽 | 高 | 码流（kps） | 帧率（fps） \n| ----------- | ----- | ------ | ----------- | --- \n| 0           | 0     | 0      | 64          | 0   \n| 1           | 640   | 360    | 500         | 15  \n| 54         | 360   | 640    | 500         | 30  \n| 53         | 360   | 640    | 500         | 15  \n| 52         | 640   | 360    | 500         | 30  \n| 10          | 960   | 540    | 700         | 24  \n| 20          | 1280  | 720    | 1024        | 25  \n| 22          | 720   | 1280   | 1024        | 30  \n| 23          | 800   | 600    | 1024        | 30  \n| 30          | 1920  | 1080   | 2048        | 30 \n| 31          | 1080  | 1920   | 2048        | 30  \n| 24          | 750   | 780    | 1024        | 30  \n| 25          | 750   | 540    | 700         | 30  \n| 26          | 720   | 1280   | 2048        | 30  \n| 27          | 1280  | 720    | 2048        | 30  \n| 28          | 1280  | 720    | 3096        | 30  \n| 32          | 1024  | 768    | 1024        | 24  \n| 33          | 1280  | 960    | 1024        | 24  \n| 34          | 1024  | 768    | 2048        | 24  \n| 35          | 1280  | 960    | 2048        | 24  \n| 36          | 1280  | 720    | 1024        | 24  \n| 37          | 1280  | 720    | 2048        | 24  \n| 38          | 540   | 960    | 750         | 15  \n| 39          | 540   | 960    | 1500        | 30  \n| 40          | 1280  | 720    | 1200        | 15  \n| 41          | 720   | 1280   | 1200        | 15  \n| 42          | 720   | 1280   | 1500        | 15  \n| 43          | 540   | 960   | 1200        | 15  \n\n\n**TaskProfile枚举值：**\n\n> Mixed_Audio（纯音频）不限制最大输入路数，其余规格根据第一个数字判断支持最大输入路数，例如：4IN_720P代表支持最大输入路数为4。\n\n| - | 1080P | 720P | 360P | Audio \n| ----- | ------- | ----- | ------ | ------ \n| 1IN | 1IN_1080P | 1IN_720P | 1IN_360P | 无\n| 2IN | 2IN_1080P | 2IN_720P | 2IN_360P | 无 \n| 4IN | 4IN_1080P | 4IN_720P | 4IN_360P | 无\n| 9IN | 9IN_1080P | 9IN_720P | 9IN_360P | 无\n| 12IN | 12IN_1080P | 12IN_720P | 12IN_360P | 无\n| 16IN | 16IN_1080P | 16IN_720P | 16IN_360P | 无\n| Mixed| 无 | 无 | 无 | Mixed_Audio\n","responseParamsDescription":"**录制结果回调**\n录制产生的结果文件写入到用户MNS队列或者将结果文件通过JSON格式以HTTP POST方式回调，参数定义如下所示：\n| 参数名称 | 类型 | 说明\n| ----- | ------- | -----\n| AppId | String | 应用ID。\n| ChannelId | String | 频道ID。\n| TaskId | String | 录制任务ID。\n| Event | String | 事件类型，目前仅支持FileCreated事件。\n| MsgId | String | 消息ID。\n| StartTime | String | 录制开始时间。\n| StopTime | String | 录制结束时间。\n| Url | String | 录制到OSS的文件HTTP地址。\n\n示例说明：\n\n```\n{\n    \"AppId\": \"9q****\",\n    \"ChannelId\": \"record-004\",\n    \"Duration\": 1792.257,\n    \"Event\": \"FileCreated\",\n    \"MsgId\": \"83eaaf62-19e8-45df-929b-79f4753b****\",\n    \"StartTime\": \"2020-09-02T10:23:54Z\",\n    \"StopTime\": \"2020-09-02T10:53:46Z\",\n    \"TaskId\": \"task-005\",\n    \"Url\": \"http://rtc-record.****.aliyuncs.com/record/0902-1/9q****/record-004_task-005/2020-09-02-18-23-56_2020-09-02-18-53-56.m3u8\"\n}\n```","extraInfo":"## 特殊错误码\n\n|错误代码|描述|HTTP状态码|语义|\n|-----|-------|---|----------|\n| InternalError | The request processing has failed due to some unknown error, exception or failure. | 500 | 内部错误。 |\n| TaskExisted | task is already existed | 200 | 任务已存在。 |\n| InvalidLayoutID.Malformed | The specified layout ID is malformed | 400 | 参数LayoutId错误。 |\n| InvalidMediaEncode.Malformed | The specifed MediaEncode is malformed  | 400 | 参数MediaEncode错误。|\n| InvalidBackgroundColor.Malformed | The specifed background color is malformed | 400 | 参数BackgroundColor错误。 |\n| InternalError | The request processing has failed due to some unknown error, exception or failure. | 500 | 内部错误。 |\n"}