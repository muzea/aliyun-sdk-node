{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"ChannelIds","in":"query","style":"repeatList","schema":{"description":"精确匹配的频道ID列表。","type":"array","items":{"description":"精确匹配的频道ID。\n\n> ChannelIds和ChannelIdPrefixes参数只能二选一输入或者都不输入，如果都不输入，则表示进行应用ID维度的自动旁路单路转推。","type":"string","required":false,"example":"12333"},"required":false,"maxItems":64}},{"name":"ChannelIdPrefixes","in":"query","style":"repeatList","schema":{"description":"模糊匹配频道ID的前缀列表。","type":"array","items":{"description":"模糊匹配频道ID的前缀。\n> ChannelIds和ChannelIdPrefixes参数只能二选一输入或者都不输入，如果都不输入，则表示进行应用ID维度的自动旁路单路转推。","type":"string","required":false,"example":"12"},"required":false,"maxItems":64}},{"name":"AppId","in":"query","schema":{"description":"应用ID，可通过控制台创建和查询。","type":"string","required":true,"docRequired":true,"example":"eo85****"}},{"name":"PlayDomain","in":"query","schema":{"description":"自动旁路的播流域名。自动旁路任务对应播流地址为rtmp://${domain}/${app}/${stream}。\n\n- domain: 您的直播播流域名。\n- app: live。\n- stream: urlencode(${AppId}_${ChannelId}_${UserId}_${SourceType})，其中SourceType为输入源类型。\n\n","type":"string","required":true,"docRequired":true,"example":"rtmp://${domain}/${app}/${stream}"}},{"name":"RuleName","in":"query","schema":{"description":"旁路规则名称。","type":"string","required":false,"example":"testRule"}},{"name":"CallBack","in":"query","schema":{"description":"开启和结束旁路的回调地址。回调内容请参见下文中的CallBack回调示例。","type":"string","required":false,"example":"http://example.com/callback"}},{"name":"MediaEncode","in":"query","schema":{"description":"编码选项，请参见下文中的MediaEncode枚举值。","type":"integer","format":"int32","required":false,"example":"20"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RuleId":{"description":"旁路规则ID。","type":"integer","format":"int64","example":"12"},"RequestId":{"description":"请求ID。","type":"string","example":"760bad53276431c499e30dc36f6b26be"}}}}},"errorCodes":{"400":[{"errorCode":"ErrorAPIInvalidAppID","errorMessage":"The AppID API request is invalid: %s"},{"errorCode":"ErrorAPIQueryRow","errorMessage":"The QueryRow request is invalid: %s"}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error, exception or failure.%s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RuleId\\\": 12,\\n  \\\"RequestId\\\": \\\"760bad53276431c499e30dc36f6b26be\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateAutoLiveStreamRuleResponse>\\n    <RuleId>12</RuleId>\\n    <RequestId>760bad53276431c499e30dc36f6b26be</RequestId>\\n</CreateAutoLiveStreamRuleResponse>\",\"errorExample\":\"\"}]","title":"创建自动旁路单路转推规则","summary":"调用CreateAutoLiveStreamRule创建自动旁路单路转推规则。","description":"# 使用说明\n本接口用于创建旁路规则。\n# QPS限制\n本接口的单用户QPS限制为1000次/分钟。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~341645~~)。","requestParamsDescription":"### CallBack回调示例\n\n```\n{\n    \"RequestId\": \"udie-jfieu89-34jfi-7jjifk\",\n    \"AppId\": \"pdtkb2qy\",\n    \"ChannelId\": \"0122\",\n    \"TaskId\": \"AL-1f43957a8e58fedef9b568b9c9ebddc0-1613618364\",\n    \"UserId\": \"2d0069089df36b22\",\n    \"SourceType\": \"camera\",\n    \"RuleId\": 40,\n    \"Event\": \"StartAutoLiveStreamTask\",\n    \"Description\": \"success\"\n}\n```\n| 参数 | 类型 | 是否必填 | 描述\n| ----------- | ----- | ------ | -----------\n| RequestId | String | 是 | 请求ID。 \n| AppId| String | 是 | 应用ID。 \n| ChannelId| String | 是 | 频道ID。 \n| TaskId| String | 是 | 任务ID，生成规则为AL-MD5(rtmp://${domain}/${app}/${stream})。\n| UserId| String | 是 | 用户ID。\n| SourceType| String | 是 | 输入源类型，取值：<br>- camera：摄像头视频流。<br>- shareScreen：共享视频流。\n| RuleId| Long| 是 | 旁路规则ID。 \n| Event| String | 是 | 事件类型，取值：<br>- StartAutoLiveStreamTask：开启自动旁路单路转推任务。<br>- StopAutoLiveStreamTask：停止自动旁路单路转推任务。\n| Description| String | 是 | 事件描述。 \n\n### MediaEncode枚举值\n| ID | 宽 | 高 | 码流（Kps） | 帧率（FPS） \n| ----------- | ----- | ------ | ----------- | --- \n| 0           | 0     | 0      | 64          | 0   \n| 1           | 640   | 360    | 500         | 15  \n| 54         | 360   | 640    | 500         | 30  \n| 53         | 360   | 640    | 500         | 15  \n| 52         | 640   | 360    | 500         | 30  \n| 10          | 960   | 540    | 700         | 24  \n| 20          | 1280  | 720    | 1024        | 25  \n| 22          | 720   | 1280   | 1024        | 30  \n| 23          | 800   | 600    | 1024        | 30  \n| 30          | 1920  | 1080   | 2048        | 30 \n| 31          | 1080  | 1920   | 2048        | 30  \n| 24          | 750   | 780    | 1024        | 30  \n| 25          | 750   | 540    | 700         | 30  \n| 26          | 720   | 1280   | 2048        | 30  \n| 27          | 1280  | 720    | 2048        | 30  \n| 28          | 1280  | 720    | 3096        | 30  \n| 32          | 1024  | 768    | 1024        | 24  \n| 33          | 1280  | 960    | 1024        | 24  \n| 34          | 1024  | 768    | 2048        | 24  \n| 35          | 1280  | 960    | 2048        | 24  \n| 36          | 1280  | 720    | 1024        | 24  \n| 37          | 1280  | 720    | 2048        | 24  \n| 38          | 540   | 960    | 750         | 15  \n| 39          | 540   | 960    | 1500        | 30  \n| 40          | 1280  | 720    | 1200        | 15  \n| 41          | 720   | 1280   | 1200        | 15  \n| 42          | 720   | 1280   | 1500        | 15  \n| 43          | 540   | 960   | 1200        | 15  \n"}