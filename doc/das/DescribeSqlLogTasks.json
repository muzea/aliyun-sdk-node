{"summary":"调用DescribeSqlLogTasks接口，查询数据库实例DAS企业版的离线任务。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list","riskType":"none","chargeType":"free","abilityTreeCode":"199696","abilityTreeNodes":["FEATUREhdmFT57I0"]},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"数据库实例ID。","type":"string","required":false,"example":"r-bp1nti25tc7bq5****"}},{"name":"NodeId","in":"formData","schema":{"description":"节点ID。\n>该参数仅适用于集群版实例，可以选择查询指定节点离线任务。若不传该参数，默认返回主节点离线任务。","type":"string","required":false,"example":"pi-bp1o58x3ib7e6****"}},{"name":"Filters","in":"formData","style":"repeatList","schema":{"description":"查询筛选条件列表。","type":"array","items":{"description":"查询筛选条件。","type":"object","properties":{"Key":{"title":"过滤参数","description":"过滤参数。\n\n> 支持的过滤参数及其取值请参考**请求参数补充说明**。","type":"string","required":false,"example":"keyWords"},"Value":{"description":"过滤参数的值。","type":"string","required":false,"example":"select\n"}},"required":false},"required":false,"maxItems":100}},{"name":"StartTime","in":"formData","schema":{"description":"查询开始时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","required":false,"example":"1596177993000"}},{"name":"EndTime","in":"formData","schema":{"description":"查询结束时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","required":false,"example":"1608888296000"}},{"name":"PageNo","in":"formData","schema":{"description":"分页查询的页码，从1开始，默认为1。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PageSize","in":"formData","schema":{"description":"每页最大记录数，默认值为10。","type":"integer","format":"int32","required":false,"example":"10"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"},"Data":{"title":"ListResult<SqlLogTask>","description":"返回数据。","type":"object","properties":{"List":{"description":"返回信息列表。","type":"array","items":{"description":"返回信息列表。","type":"object","properties":{"TaskId":{"description":"任务ID。","type":"string","example":"9a4f5c4494dbd6713185d87a97aa53e8"},"InstanceId":{"title":"实例标识","description":"数据库实例ID。","type":"string","example":"r-bp1nti25tc7bq5****\n"},"Name":{"title":"任务别名","description":"任务名称。","type":"string","example":"SQL审计导出1"},"Start":{"title":"查询开始时间","description":"任务开始时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1683859555482"},"End":{"title":"查询结束时间","description":"任务结束时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1705975320000"},"Status":{"title":"任务状态","description":"任务状态。\n\n- **INIT**：待调度 。\n- **RUNNING**：运行中。\n- **FAILED**：失败。\n- **CANCELED**：已取消。\n- **COMPLETED**：完成。\n\n> 当任务处于**COMPLETED**时，可以查看离线任务的结果。","type":"string","example":"RUNNING"},"LogCount":{"title":"日志总数","description":"日志总数。","type":"integer","format":"int64","example":"99999"},"Progress":{"title":"任务进度","description":"任务进度。","type":"integer","format":"int32","example":"100"},"ScanFileSize":{"title":"扫描的文件量","description":"扫描的文件数量。","type":"integer","format":"int64","example":"3000"},"Expire":{"title":"任务是否过期","description":"任务是否过期。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false"},"CreateTime":{"title":"任务创建时间","description":"任务创建时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1681363254423"},"AnalysisTaskFinishTime":{"title":"分析任务完成时间","description":"分析任务完成时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1712751923000"},"AnalysisTaskStatus":{"description":"分析任务状态。\n\n> 系统内部参数，用户无需关注。","type":"string","example":"SCAN_ANALYZE_COMPLETED"},"Result":{"title":"oss链接或其他信息","description":"任务类型为**Export**时的链接地址。","type":"string","example":"https://das-sqllog-download-cn-shanghai.oss-cn-shanghai.aliyuncs.com/la"},"TaskType":{"description":"任务类型。\n\n- **Export**：导出任务。\n- **Query**：查询任务。","type":"string","example":"Export"},"Filters":{"description":"查询筛选条件列表。","type":"array","items":{"description":"查询筛选条件。","type":"object","properties":{"Key":{"description":"过滤参数。\n\n> 支持的过滤参数及其取值请参考**请求参数补充说明**。","type":"string","example":"keyWords\n"},"Value":{"description":"过滤参数的值。","type":"string","example":"select\n"}}}}}}},"Total":{"description":"任务数量。","type":"integer","format":"int64","example":"40"},"PageNo":{"description":"页码。","type":"integer","format":"int64","example":"1"},"PageSize":{"description":"每页数量。","type":"integer","format":"int64","example":"10"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"Data\\\": {\\n    \\\"List\\\": [\\n      {\\n        \\\"TaskId\\\": \\\"9a4f5c4494dbd6713185d87a97aa53e8\\\",\\n        \\\"InstanceId\\\": \\\"r-bp1nti25tc7bq5****\\\\n\\\",\\n        \\\"Name\\\": \\\"SQL审计导出1\\\",\\n        \\\"Start\\\": 1683859555482,\\n        \\\"End\\\": 1705975320000,\\n        \\\"Status\\\": \\\"RUNNING\\\",\\n        \\\"LogCount\\\": 99999,\\n        \\\"Progress\\\": 100,\\n        \\\"ScanFileSize\\\": 3000,\\n        \\\"Expire\\\": false,\\n        \\\"CreateTime\\\": 1681363254423,\\n        \\\"AnalysisTaskFinishTime\\\": 1712751923000,\\n        \\\"AnalysisTaskStatus\\\": \\\"SCAN_ANALYZE_COMPLETED\\\",\\n        \\\"Result\\\": \\\"https://das-sqllog-download-cn-shanghai.oss-cn-shanghai.aliyuncs.com/la\\\",\\n        \\\"TaskType\\\": \\\"Export\\\",\\n        \\\"Filters\\\": [\\n          {\\n            \\\"Key\\\": \\\"keyWords\\\\n\\\",\\n            \\\"Value\\\": \\\"select\\\\n\\\"\\n          }\\n        ]\\n      }\\n    ],\\n    \\\"Total\\\": 40,\\n    \\\"PageNo\\\": 1,\\n    \\\"PageSize\\\": 10\\n  }\\n}\",\"type\":\"json\"}]","title":"查询DAS企业版离线任务","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。","requestParamsDescription":"**Key**支持的参数和取值：\n\n- **KeyWords**：关键字，多个关键字间使用空格隔开。\n- **LogicalOperator**：关键字间的逻辑操作，取值为and或or。\n- **AccountName**：用户名。\n- **dbName**：数据库名称。\n- **HostAddress**：客户端IP地址。\n- **MaxConsume**：最大耗时，单位毫秒。\n- **MinConsume**：最小耗时，单位毫秒。\n- **MaxScanRows**：最大扫描行。\n- **MinScanRows**：最小扫描行。\n- **SqlType**：SQL类型，取值select、update、insert或delete。\n- **State**：执行结果，取值0（成功）或1（失败）。\n- **ThreadId**：线程ID。\n- **SortKey**：排序列名称，取值ScanRows（扫描行数）、UpdateRows（更新行数）、Consume（耗时）、ExecuteTime（执行时间）、ReturnRows（返回行数）、LockTime（锁等待时间）、Frows（PolarDB-X 2.0计算节点的拉取行数）、Scnt（PolarDB-X 2.0计算节点的DN请求数）、CpuTime（CPU执行时间）、PhysicalRead（物理读）。\n- **SortMethod**：排序方式，取值DESC（降序）、ASC（升序）。默认为DESC。\n- **TraceId**：PolarDB-X 2.0实例的跟踪ID。\n- **MinRows**：最小更新行数。\n- **MaxRows**：最大更新行数。\n- **MinScnt**：PolarDB-X 2.0计算节点（CN）的DN最小请求数。\n- **MaxScnt**：PolarDB-X 2.0计算节点（CN）的DN最大请求数。\n- **TrxId**：事务ID。\n- **Fail**：错误码。\n- **SqlId**：SQL ID。\n- **JobId**：对于开通企业版V0和V1的数据库实例，需要通过异步任务ID进一步查询返回结果。"}