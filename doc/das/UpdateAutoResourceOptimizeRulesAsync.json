{"summary":"调用UpdateAutoResourceOptimizeRulesAsync接口，采用异步方式，批量设置指定数据库实例空间碎片自动回收功能的配置参数。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","systemTags":{"operationType":"none","riskType":"none","chargeType":"free"},"parameters":[{"name":"ConsoleContext","in":"query","schema":{"description":"备用参数。","type":"string","required":false,"example":"None"}},{"name":"InstanceIds","in":"query","schema":{"description":"数据库实例ID。\n\n> 数据格式为JSONArray，例如`['实例ID1','实例ID2']`，实例ID间用英文逗号（,）分隔。\n\n","type":"string","required":true,"example":"['rm-2ze8g2am97624****','rm-2ze9xrhze0709****']"}},{"name":"TableSpaceSize","in":"query","schema":{"description":"触发空间碎片自动回收单个物理表的最小空间，取值范围：**5**~**100**，单位为GB。","type":"number","format":"double","required":true,"example":"10"}},{"name":"TableFragmentationRatio","in":"query","schema":{"description":"触发空间碎片自动回收单个物理表的碎片率，取值范围：**0.10**~**0.99**。","type":"number","format":"double","required":true,"example":"0.2"}},{"name":"ResultId","in":"query","schema":{"description":"异步请求的ID。\n> 异步调用后不会立即返回完整结果，首先需要调用该接口获取**ResultId**，然后使用返回数据的**ResultId**，重新发起调用，直到**isFinish**取值为**true**时，返回完整结果。即获取一次完整数据，至少需要调用该接口两次。","type":"string","required":false,"example":"async__507044db6c4eadfa2dab9b084e80****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。","type":"object","properties":{"Fail":{"description":"请求是否失败：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"false"},"ConfigResponse":{"description":"批量设置的返回数据。\n> 异步请求完成时（即isFinish取值为**true**时）才会返回该数据。","type":"object","properties":{"TotalInstanceCount":{"description":"总数据库实例数量。","type":"integer","format":"int64","example":"2"},"ConfigSuccessInstanceCount":{"description":"设置成功的数据库实例数量。","type":"integer","format":"int64","example":"1"},"ConfigFailInstanceCount":{"description":"设置失败的数据库实例数量。","type":"integer","format":"int64","example":"1"},"ConfigSuccessInstanceList":{"description":"设置成功的数据库实例列表。","type":"array","items":{"type":"object","properties":{"ConfigSuccess":{"description":"设置是否成功：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"true"},"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze8g2am97624****"}}}},"ConfigFailInstanceList":{"description":"设置失败的数据库实例列表。","type":"array","items":{"type":"object","properties":{"ConfigSuccess":{"description":"设置是否成功：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"false"},"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze9xrhze0709****"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"Only Support DAS Pro High-availability Edition RDS MySQL 5.6, 5.7, 8.0 instance, and CPU cores >= 4, innodb_file_per_table=ON"}}}}}},"ResultId":{"description":"异步请求的ID。","type":"string","example":"async__20ee808e72257f16a4fe024057ca****"},"IsFinish":{"description":"异步请求是否执行完成：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"true"},"State":{"description":"异步请求的执行状态：\n\n- **RUNNING**：正在运行。\n\n- **SUCCESS**：成功。\n\n- **FAIL**：失败。","type":"string","example":"SUCCESS"},"Complete":{"description":"异步请求是否执行完成：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"true"},"Timestamp":{"description":"执行时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1645668213000"}}},"RequestId":{"description":"请求ID。","type":"string","example":"9CB97BC4-6479-55D0-B9D0-EA925AFE****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"Fail\\\": false,\\n    \\\"ConfigResponse\\\": {\\n      \\\"TotalInstanceCount\\\": 2,\\n      \\\"ConfigSuccessInstanceCount\\\": 1,\\n      \\\"ConfigFailInstanceCount\\\": 1,\\n      \\\"ConfigSuccessInstanceList\\\": [\\n        {\\n          \\\"ConfigSuccess\\\": true,\\n          \\\"InstanceId\\\": \\\"rm-2ze8g2am97624****\\\"\\n        }\\n      ],\\n      \\\"ConfigFailInstanceList\\\": [\\n        {\\n          \\\"ConfigSuccess\\\": false,\\n          \\\"InstanceId\\\": \\\"rm-2ze9xrhze0709****\\\",\\n          \\\"ErrorMessage\\\": \\\"Only Support DAS Pro High-availability Edition RDS MySQL 5.6, 5.7, 8.0 instance, and CPU cores >= 4, innodb_file_per_table=ON\\\"\\n        }\\n      ]\\n    },\\n    \\\"ResultId\\\": \\\"async__20ee808e72257f16a4fe024057ca****\\\",\\n    \\\"IsFinish\\\": true,\\n    \\\"State\\\": \\\"SUCCESS\\\",\\n    \\\"Complete\\\": true,\\n    \\\"Timestamp\\\": 1645668213000\\n  },\\n  \\\"RequestId\\\": \\\"9CB97BC4-6479-55D0-B9D0-EA925AFE****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateAutoResourceOptimizeRulesAsyncResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <Fail>false</Fail>\\n        <ConfigResponse>\\n            <TotalInstanceCount>2</TotalInstanceCount>\\n            <ConfigSuccessInstanceCount>1</ConfigSuccessInstanceCount>\\n            <ConfigFailInstanceCount>1</ConfigFailInstanceCount>\\n            <ConfigSuccessInstanceList>\\n                <ConfigSuccess>true</ConfigSuccess>\\n                <InstanceId>rm-2ze8g2am97624****</InstanceId>\\n            </ConfigSuccessInstanceList>\\n            <ConfigFailInstanceList>\\n                <ConfigSuccess>false</ConfigSuccess>\\n                <InstanceId>rm-2ze9xrhze0709****</InstanceId>\\n                <ErrorMessage>Only Support DAS Pro High-availability Edition RDS MySQL 5.6, 5.7, 8.0 instance, and CPU cores &gt;= 4, innodb_file_per_table=ON</ErrorMessage>\\n            </ConfigFailInstanceList>\\n        </ConfigResponse>\\n        <ResultId>async__20ee808e72257f16a4fe024057ca****</ResultId>\\n        <IsFinish>true</IsFinish>\\n        <State>SUCCESS</State>\\n        <Complete>true</Complete>\\n        <Timestamp>1645668213000</Timestamp>\\n    </Data>\\n    <RequestId>9CB97BC4-6479-55D0-B9D0-EA925AFE****</RequestId>\\n    <Success>true</Success>\\n</UpdateAutoResourceOptimizeRulesAsyncResponse>\",\"errorExample\":\"\"}]","title":"设置空间碎片自动回收功能的配置参数","description":"> 异步调用后不会立即返回完整结果，首先需要调用该接口获取**ResultId**，然后使用返回数据的**ResultId**，重新发起调用，直到**isFinish**取值为**true**时，返回完整结果。即获取一次完整数据，至少需要调用该接口两次。\n\n使用该接口需满足以下前提条件：\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n\n- 数据库实例类型为RDS MySQL高可用系列。\n\n- 数据库实例已开启DAS企业版，您可以调用[DescribeInstanceDasPro](~~413866~~)查询。\n\n- 数据库实例的CPU规格不小于4核，且**innodb_file_per_table**参数值为**ON**。"}