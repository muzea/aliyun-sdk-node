{"summary":"调用GetInstanceInspections接口，获取数据库实例巡检评分的结果。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"24190","abilityTreeNodes":["FEATUREhdmB8MM4L"]},"parameters":[{"name":"Engine","in":"query","schema":{"description":"数据库引擎，取值：\n\n- **MySQL**\n- **Redis**\n- **PolarDBMySQL**\n","type":"string","required":true,"docRequired":true,"example":"MySQL"}},{"name":"StartTime","in":"query","schema":{"description":"任务开始时间，格式为Unix时间戳，单位为毫秒。","type":"string","required":true,"docRequired":true,"example":"1655416825000"}},{"name":"EndTime","in":"query","schema":{"description":"任务结束时间，格式为Unix时间戳，单位为毫秒。\n>任务结束时间需晚于任务开始时间。","type":"string","required":true,"docRequired":true,"example":"1655427625000"}},{"name":"PageNo","in":"query","schema":{"description":"页码，取值大于0且不超过Integer数据类型的最大值，默认值为1。","type":"string","required":true,"docRequired":true,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页最大记录数，默认值为10。","type":"string","required":true,"docRequired":true,"example":"10"}},{"name":"InstanceArea","in":"query","schema":{"description":"实例所属的数据库产品，取值：\n\n* **RDS**：云实例。\n* **ECS**：ECS自建实例。\n* **IDC**：非公有云自建实例。\n\n> IDC为用户数据中心。","type":"string","required":true,"docRequired":true,"example":"RDS"}},{"name":"SearchMap","in":"query","schema":{"description":"过滤条件，可以按照如下条件进行过滤：\n\n- 以单个实例ID为过滤条件时，输入格式为：{\"InstanceId\":\"实例ID\"}。\n- 以多个实例ID为过滤条件时，输入格式为：{\"InstanceIds\":\\[\"实例ID1\",\"实例ID2\"\\]}，其中实例ID间以英文逗号（,）分隔。\n- 以实例所在地域为过滤条件时，输入格式为：{\"region\":\"实例所在地域\"}。","type":"string","required":false,"example":"{\"InstanceId\":\"rm-bp10usoc1erj7****\"}"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-aek2eil6npi****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"请求返回消息。\n>请求成功时该参数返回Successful，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Data":{"description":"详细信息。","type":"object","properties":{"List":{"description":"详细信息列表。","type":"array","items":{"type":"object","properties":{"EndTime":{"description":"任务结束时间，格式为Unix时间戳，单位为毫秒。\n>任务结束时间需晚于任务开始时间。","type":"integer","format":"int64","example":"1608888296001"},"StartTime":{"description":"任务开始时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1608888296000"},"Data":{"description":"返回的数据。","type":"object","example":"\"data\": { \"hasDeadLock\": false, \"exceptionTableMap\": {}, \"bigTransactionCount\": 0, \"cpu\": 4, \"isRds\": true, \"rdsEnable\": true, \"enable\": false, \"activeSessions\": [], \"bigTransactionList\": [], \"bigSessionList\": [ { \"blockDuration\": 0, \"active\": false, \"Time\": 0, \"db\": \"\" },"},"Instance":{"description":"实例信息。","type":"object","properties":{"VpcId":{"description":"实例的VPC ID。","type":"string","example":"vpc-bp1knt7m55z9exoo7****"},"Uuid":{"description":"实例的唯一标识符号。","type":"string","example":"hdm_3063db6792965c080a4bcb6e6304****"},"InstanceArea":{"description":"实例所属的数据库产品，取值：\n\n- **RDS**：云实例。\n- **ECS**：ECS自建实例。\n- **IDC**：非公有云自建实例。\n> IDC为用户数据中心。","type":"string","example":"RDS"},"InstanceClass":{"description":"实例的规格。","type":"string","example":"rds.mysql.s2.xlarge"},"Region":{"description":"实例所属的地域ID。","type":"string","example":"cn-hangzhou"},"AccountId":{"description":"账号ID，您可在阿里云**账号管理**的**安全设置**页面获取登录账号的ID。","type":"string","example":"108398049688****"},"NetworkType":{"description":"实例的网络类型。","type":"string","example":"VPC"},"Engine":{"description":"数据库引擎，取值：\n\n- **MySQL**\n- **Redis**\n- **PolarDBMySQL**","type":"string","example":"MySQL"},"InstanceId":{"description":"实例ID。","type":"string","example":"rm-bp10usoc1erj7****"},"NodeId":{"description":"实例的节点ID。","type":"string","example":"rm-bp10usoc1erj7****"},"EngineVersion":{"description":"数据库引擎的版本号。","type":"string","example":"8.0"},"InstanceAlias":{"description":"实例名称","type":"string","example":"test-01"},"Cpu":{"description":"CPU规格，例如返回8时代表CPU规格为8核。","type":"string","example":"8"},"Memory":{"description":"数据库内存，单位为MB。","type":"integer","format":"int32","example":"32768"},"Storage":{"description":"存储空间，单位为GB。","type":"integer","format":"int32","example":"150"},"Category":{"description":"实例的访问模式，取值：\n- **standard**：标准访问模式。\n- **safe**：数据库代理模式。","type":"string","example":"standard"}}},"ScoreMap":{"description":"扣分详情。","type":"object"},"GmtCreate":{"description":"任务的创建时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1603247192000"},"Score":{"description":"巡检得分。","type":"integer","format":"int32","example":"100"},"AutoFunction":{"description":"自治功能开启情况。","type":"object","properties":{"EventSubscription":{"description":"事件订阅：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"0"},"AutoIndex":{"description":"自动索引创建和删除：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"2"},"AutoLimitedSql":{"description":"自动限流：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"2"},"AutoResourceOptimize":{"description":"空间碎片自动回收：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"0"},"AutoScale":{"description":"自动弹性伸缩：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"0"}}},"EnableDasPro":{"description":"DAS企业版：\n\n- **0**：关闭。\n- **1**：开启。\n- **2**：不支持。","type":"integer","format":"int32","example":"0"},"State":{"description":"巡检任务状态：\n\n- **0**：等待执行。\n- **1**：正在执行。\n- **2**：巡检完成。","type":"integer","format":"int32","example":"2"},"TaskType":{"description":"巡检任务发起类型：\n\n- **0**：自动。\n- **1**：手动。","type":"integer","format":"int32","example":"0"}}}},"PageNo":{"description":"页码，取值大于0且不超过Integer数据类型的最大值，默认值为1。","type":"integer","format":"int64","example":"1"},"PageSize":{"description":"每页最大记录数，默认值为10。","type":"integer","format":"int64","example":"10"},"Total":{"description":"总记录数。","type":"integer","format":"int64","example":"4"}}},"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Data\\\": {\\n    \\\"List\\\": [\\n      {\\n        \\\"EndTime\\\": 1608888296001,\\n        \\\"StartTime\\\": 1608888296000,\\n        \\\"Data\\\": {\\n          \\\"test\\\": \\\"test\\\",\\n          \\\"test2\\\": 1\\n        },\\n        \\\"Instance\\\": {\\n          \\\"VpcId\\\": \\\"vpc-bp1knt7m55z9exoo7****\\\",\\n          \\\"Uuid\\\": \\\"hdm_3063db6792965c080a4bcb6e6304****\\\",\\n          \\\"InstanceArea\\\": \\\"RDS\\\",\\n          \\\"InstanceClass\\\": \\\"rds.mysql.s2.xlarge\\\",\\n          \\\"Region\\\": \\\"cn-hangzhou\\\",\\n          \\\"AccountId\\\": \\\"108398049688****\\\",\\n          \\\"NetworkType\\\": \\\"VPC\\\",\\n          \\\"Engine\\\": \\\"MySQL\\\",\\n          \\\"InstanceId\\\": \\\"rm-bp10usoc1erj7****\\\",\\n          \\\"NodeId\\\": \\\"rm-bp10usoc1erj7****\\\",\\n          \\\"EngineVersion\\\": \\\"8.0\\\",\\n          \\\"InstanceAlias\\\": \\\"test-01\\\",\\n          \\\"Cpu\\\": \\\"8\\\",\\n          \\\"Memory\\\": 32768,\\n          \\\"Storage\\\": 150,\\n          \\\"Category\\\": \\\"standard\\\"\\n        },\\n        \\\"ScoreMap\\\": {\\n          \\\"test\\\": \\\"test\\\",\\n          \\\"test2\\\": 1\\n        },\\n        \\\"GmtCreate\\\": 1603247192000,\\n        \\\"Score\\\": 100,\\n        \\\"AutoFunction\\\": {\\n          \\\"EventSubscription\\\": 0,\\n          \\\"AutoIndex\\\": 2,\\n          \\\"AutoLimitedSql\\\": 2,\\n          \\\"AutoResourceOptimize\\\": 0,\\n          \\\"AutoScale\\\": 0\\n        },\\n        \\\"EnableDasPro\\\": 0,\\n        \\\"State\\\": 2,\\n        \\\"TaskType\\\": 0\\n      }\\n    ],\\n    \\\"PageNo\\\": 1,\\n    \\\"PageSize\\\": 10,\\n    \\\"Total\\\": 4\\n  },\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetInstanceInspectionsResponse>\\n    <Message>Successful</Message>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Data>\\n        <List>\\n            <EndTime>1608888296001</EndTime>\\n            <StartTime>1608888296000</StartTime>\\n            <Instance>\\n                <VpcId>vpc-bp1knt7m55z9exoo7****</VpcId>\\n                <Uuid>hdm_3063db6792965c080a4bcb6e6304****</Uuid>\\n                <InstanceArea>RDS</InstanceArea>\\n                <InstanceClass>rds.mysql.s2.xlarge</InstanceClass>\\n                <Region>cn-hangzhou</Region>\\n                <AccountId>108398049688****</AccountId>\\n                <NetworkType>VPC</NetworkType>\\n                <Engine>MySQL</Engine>\\n                <InstanceId>rm-bp10usoc1erj7****</InstanceId>\\n                <NodeId>rm-bp10usoc1erj7****</NodeId>\\n                <EngineVersion>8.0</EngineVersion>\\n                <InstanceAlias>test-01</InstanceAlias>\\n                <Cpu>8</Cpu>\\n                <Memory>32768</Memory>\\n                <Storage>150</Storage>\\n                <Category>standard</Category>\\n            </Instance>\\n            <GmtCreate>1603247192000</GmtCreate>\\n            <Score>100</Score>\\n            <AutoFunction>\\n                <EventSubscription>0</EventSubscription>\\n                <AutoIndex>2</AutoIndex>\\n                <AutoLimitedSql>2</AutoLimitedSql>\\n                <AutoResourceOptimize>0</AutoResourceOptimize>\\n                <AutoScale>0</AutoScale>\\n            </AutoFunction>\\n            <EnableDasPro>0</EnableDasPro>\\n            <State>2</State>\\n            <TaskType>0</TaskType>\\n        </List>\\n        <PageNo>1</PageNo>\\n        <PageSize>10</PageSize>\\n        <Total>4</Total>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</GetInstanceInspectionsResponse>\",\"errorExample\":\"\"}]","title":"获取数据库实例巡检评分结果","description":"DAS支持巡检评分功能，可以对目标实例进行定期巡检并给出健康评分，帮助您清楚地了解数据库运行情况，更多信息，请参见[巡检评分](~~205659~~)。\n\n使用该接口需满足以下前提条件：\n\n- 本接口只适用于RDS MySQL、ECS上的MySQL自建库、IDC MySQL自建库、云数据库Redis、PolarDB MySQL版。\n- 在使用阿里云SDK时，需要保证aliyun-sdk-core的版本大于4.3.3，建议使用最新版本。\n- 使用DAS的SDK的版本为1.0.3或以上。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}