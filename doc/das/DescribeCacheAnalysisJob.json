{"summary":"调用DescribeCacheAnalysisJob接口，查询缓存分析任务详情。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"23813","abilityTreeNodes":["FEATUREhdmJC65CS"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"r-bp18ff4a195d****"}},{"name":"JobId","in":"query","schema":{"description":"缓存分析任务ID，您可通过调用[CreateCacheAnalysisJob](~~180982~~)接口获取返回参数的JobId。","type":"string","required":true,"example":"sf79-sd99-sa37-****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Data":{"description":"详细信息列表。","type":"object","properties":{"TaskState":{"description":"缓存分析任务的状态：\n\n- **BACKUP**：备份中。\n- **ANALYZING**：分析中。\n- **FINISHED**：分析完成。\n- **FAILED**：出现错误。","type":"string","example":"BACKUP"},"JobId":{"description":"缓存分析任务ID。","type":"string","example":"sf79-sd99-sa37-****"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"BigKeys":{"type":"object","properties":{"KeyInfo":{"description":"大Key详细信息，根据Key占用字节数降序排列。","type":"array","items":{"type":"object","properties":{"Type":{"description":"Redis数据结构类型。","type":"string","example":"hash"},"Db":{"description":"数据库名称。","type":"integer","format":"int32","example":"0"},"ExpirationTimeMillis":{"description":"Key过期时间，格式为 Unix 时间戳，单位为毫秒（ms），0表示不过期。","type":"integer","format":"int64","example":"1596256542547"},"Key":{"description":"Key的名称。","type":"string","example":"task_x****"},"Encoding":{"description":"Key内部数据类型。","type":"string","example":"hashtable"},"Bytes":{"description":"Key占用字节数。","type":"integer","format":"int64","example":"12345"},"NodeId":{"description":"实例的数据节点ID。","type":"string","example":"r-x****-db-0"},"Count":{"description":"Key的元素个数。","type":"integer","format":"int64","example":"127"}}}}}},"KeyPrefixes":{"type":"object","properties":{"Prefix":{"description":"Key前缀列表。","type":"array","items":{"type":"object","properties":{"KeyNum":{"description":"该前缀Key的数量。","type":"integer","format":"int64","example":"123"},"Type":{"description":"Redis数据结构类型。","type":"string","example":"hash"},"Bytes":{"description":"Key占用字节数。","type":"integer","format":"int64","example":"12345"},"Prefix":{"description":"Key的前缀。","type":"string","example":"task_"},"Count":{"description":"Key的元素个数。","type":"integer","format":"int64","example":"127"}}}}}},"BigKeysOfNum":{"type":"object","properties":{"KeyInfo":{"description":"大Key详细信息，根据Key数量降序排列。","type":"array","items":{"type":"object","properties":{"Type":{"description":"Redis数据结构类型。","type":"string","example":"hash"},"Db":{"description":"数据库名称。","type":"integer","format":"int32","example":"0"},"ExpirationTimeMillis":{"description":"Key过期时间，格式为 Unix 时间戳，单位为毫秒（ms），0表示不过期。","type":"integer","format":"int64","example":"1596256542547"},"Key":{"description":"Key的名称。","type":"string","example":"task_x****"},"Encoding":{"description":"Key内部数据类型。","type":"string","example":"hashtable"},"Bytes":{"description":"Key占用字节数。","type":"integer","format":"int64","example":"12345"},"NodeId":{"description":"实例的数据节点ID。","type":"string","example":"r-x****-db-0"},"Count":{"description":"Key的元素个数。","type":"integer","format":"int64","example":"127"}}}}}},"UnexBigKeysOfBytes":{"type":"object","properties":{"KeyInfo":{"description":"永不过期Key的详细信息，根据Key占用字节数降序排列。","type":"array","items":{"type":"object","properties":{"Type":{"description":"Redis数据结构类型。","type":"string","example":"hash"},"Db":{"description":"数据库名称。","type":"integer","format":"int32","example":"0"},"ExpirationTimeMillis":{"description":"Key过期时间，格式为 Unix 时间戳，单位为毫秒（ms），0表示不过期。","type":"integer","format":"int64","example":"1596256542547"},"Key":{"description":"Key的名称。","type":"string","example":"task_x****"},"Encoding":{"description":"Key内部数据类型。","type":"string","example":"hashtable"},"Bytes":{"description":"Key占用字节数。","type":"integer","format":"int64","example":"12345"},"NodeId":{"description":"实例的数据节点ID","type":"string","example":"r-x****-db-0"},"Count":{"description":"Key的元素个数。","type":"integer","format":"int64","example":"127"}}}}}},"UnexBigKeysOfNum":{"type":"object","properties":{"KeyInfo":{"description":"永不过期Key的详细信息，根据Key数量降序排列。","type":"array","items":{"type":"object","properties":{"Type":{"description":"Redis数据结构类型。","type":"string","example":"hash"},"Db":{"description":"数据库名称。","type":"integer","format":"int32","example":"0"},"ExpirationTimeMillis":{"description":"Key过期时间，格式为 Unix 时间戳，单位为毫秒（ms），0表示不过期。","type":"integer","format":"int64","example":"1596256542547"},"Key":{"description":"Key的名称。","type":"string","example":"task_x****"},"Encoding":{"description":"Key内部数据类型。","type":"string","example":"hashtable"},"Bytes":{"description":"Key占用字节数。","type":"integer","format":"int64","example":"12345"},"NodeId":{"description":"实例的数据节点ID。","type":"string","example":"r-x****-db-0"},"Count":{"description":"Key的元素个数。","type":"integer","format":"int64","example":"127"}}}}}},"InstanceId":{"description":"实例ID。","type":"string","example":"r-bp18ff4a195d****"},"NodeId":{"description":"实例的数据节点ID。","type":"string","example":"r-x****-db-0"},"ExpiryKeysLevelCount":{"type":"object","properties":{"ExpiryLevel":{"description":"按过期时间分类的Key统计信息。","type":"array","items":{"description":"按过期时间分类的Key统计信息。","type":"object","properties":{"AnalysisTs":{"description":"分析完成的时间，格式为 Unix 时间戳，单位为毫秒（ms）。","type":"integer","format":"int64","example":"1717469347000"},"Level":{"description":"过期时间级别。取值：\n\n- **0**：不过期。\n- **1**：已过期。\n- **2**：过期0~1小时。\n- **3**：过期1~3小时。\n- **4**：过期3~12小时。\n- **5**：过期12~24小时。\n- **6**：过期1~2天。\n- **7**：过期3~7天。\n- **8**：过期超过7天。","type":"integer","format":"int32","example":"0"},"TotalBytes":{"description":"按过期时间分类统计的Key占用的字节数。","type":"integer","format":"int64","example":"8064"},"TotalKeys":{"description":"按过期时间分类统计的Key总数。","type":"integer","format":"int64","example":"62"}}}}}}}},"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Data\\\": {\\n    \\\"TaskState\\\": \\\"BACKUP\\\",\\n    \\\"JobId\\\": \\\"sf79-sd99-sa37-****\\\",\\n    \\\"Message\\\": \\\"Successful\\\",\\n    \\\"BigKeys\\\": {\\n      \\\"KeyInfo\\\": [\\n        {\\n          \\\"Type\\\": \\\"hash\\\",\\n          \\\"Db\\\": 0,\\n          \\\"ExpirationTimeMillis\\\": 1596256542547,\\n          \\\"Key\\\": \\\"task_x****\\\",\\n          \\\"Encoding\\\": \\\"hashtable\\\",\\n          \\\"Bytes\\\": 12345,\\n          \\\"NodeId\\\": \\\"r-x****-db-0\\\",\\n          \\\"Count\\\": 127\\n        }\\n      ]\\n    },\\n    \\\"KeyPrefixes\\\": {\\n      \\\"Prefix\\\": [\\n        {\\n          \\\"KeyNum\\\": 123,\\n          \\\"Type\\\": \\\"hash\\\",\\n          \\\"Bytes\\\": 12345,\\n          \\\"Prefix\\\": \\\"task_\\\",\\n          \\\"Count\\\": 127\\n        }\\n      ]\\n    },\\n    \\\"BigKeysOfNum\\\": {\\n      \\\"KeyInfo\\\": [\\n        {\\n          \\\"Type\\\": \\\"hash\\\",\\n          \\\"Db\\\": 0,\\n          \\\"ExpirationTimeMillis\\\": 1596256542547,\\n          \\\"Key\\\": \\\"task_x****\\\",\\n          \\\"Encoding\\\": \\\"hashtable\\\",\\n          \\\"Bytes\\\": 12345,\\n          \\\"NodeId\\\": \\\"r-x****-db-0\\\",\\n          \\\"Count\\\": 127\\n        }\\n      ]\\n    },\\n    \\\"UnexBigKeysOfBytes\\\": {\\n      \\\"KeyInfo\\\": [\\n        {\\n          \\\"Type\\\": \\\"hash\\\",\\n          \\\"Db\\\": 0,\\n          \\\"ExpirationTimeMillis\\\": 1596256542547,\\n          \\\"Key\\\": \\\"task_x****\\\",\\n          \\\"Encoding\\\": \\\"hashtable\\\",\\n          \\\"Bytes\\\": 12345,\\n          \\\"NodeId\\\": \\\"r-x****-db-0\\\",\\n          \\\"Count\\\": 127\\n        }\\n      ]\\n    },\\n    \\\"UnexBigKeysOfNum\\\": {\\n      \\\"KeyInfo\\\": [\\n        {\\n          \\\"Type\\\": \\\"hash\\\",\\n          \\\"Db\\\": 0,\\n          \\\"ExpirationTimeMillis\\\": 1596256542547,\\n          \\\"Key\\\": \\\"task_x****\\\",\\n          \\\"Encoding\\\": \\\"hashtable\\\",\\n          \\\"Bytes\\\": 12345,\\n          \\\"NodeId\\\": \\\"r-x****-db-0\\\",\\n          \\\"Count\\\": 127\\n        }\\n      ]\\n    },\\n    \\\"InstanceId\\\": \\\"r-bp18ff4a195d****\\\",\\n    \\\"NodeId\\\": \\\"r-x****-db-0\\\",\\n    \\\"ExpiryKeysLevelCount\\\": {\\n      \\\"ExpiryLevel\\\": [\\n        {\\n          \\\"AnalysisTs\\\": 1717469347000,\\n          \\\"Level\\\": 0,\\n          \\\"TotalBytes\\\": 8064,\\n          \\\"TotalKeys\\\": 62\\n        }\\n      ]\\n    }\\n  },\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeCacheAnalysisJobResponse>\\n    <Message>Successful</Message>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Data>\\n        <TaskState>BACKUP</TaskState>\\n        <JobId>sf79-sd99-sa37-****</JobId>\\n        <Message>Successful</Message>\\n        <BigKeys>\\n            <Type>hash</Type>\\n            <Db>0</Db>\\n            <ExpirationTimeMillis>1596256542547</ExpirationTimeMillis>\\n            <Key>task_x****</Key>\\n            <Encoding>hashtable</Encoding>\\n            <Bytes>12345</Bytes>\\n            <NodeId>r-x****-db-0</NodeId>\\n            <Count>127</Count>\\n        </BigKeys>\\n        <KeyPrefixes>\\n            <KeyNum>123</KeyNum>\\n            <Type>hash</Type>\\n            <Bytes>12345</Bytes>\\n            <Prefix>task_</Prefix>\\n            <Count>127</Count>\\n        </KeyPrefixes>\\n        <BigKeysOfNum>\\n            <Type>hash</Type>\\n            <Db>0</Db>\\n            <ExpirationTimeMillis>1596256542547</ExpirationTimeMillis>\\n            <Key>task_x****</Key>\\n            <Encoding>hashtable</Encoding>\\n            <Bytes>12345</Bytes>\\n            <NodeId>r-x****-db-0</NodeId>\\n            <Count>127</Count>\\n        </BigKeysOfNum>\\n        <UnexBigKeysOfBytes>\\n            <Type>hash</Type>\\n            <Db>0</Db>\\n            <ExpirationTimeMillis>1596256542547</ExpirationTimeMillis>\\n            <Key>task_x****</Key>\\n            <Encoding>hashtable</Encoding>\\n            <Bytes>12345</Bytes>\\n            <NodeId>r-x****-db-0</NodeId>\\n            <Count>127</Count>\\n        </UnexBigKeysOfBytes>\\n        <UnexBigKeysOfNum>\\n            <Type>hash</Type>\\n            <Db>0</Db>\\n            <ExpirationTimeMillis>1596256542547</ExpirationTimeMillis>\\n            <Key>task_x****</Key>\\n            <Encoding>hashtable</Encoding>\\n            <Bytes>12345</Bytes>\\n            <NodeId>r-x****-db-0</NodeId>\\n            <Count>127</Count>\\n        </UnexBigKeysOfNum>\\n        <InstanceId>r-bp18ff4a195d****</InstanceId>\\n        <NodeId>r-x****-db-0</NodeId>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</DescribeCacheAnalysisJobResponse>\",\"errorExample\":\"\"}]","title":"查询缓存分析任务详情","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 本接口只适用于Redis引擎。\n\n> 调用本接口可查询实例缓存分析任务中排名前500的Key信息。"}