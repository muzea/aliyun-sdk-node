{"summary":"调用DescribeSqlLogTask接口，查询DAS企业版离线任务详情。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","riskType":"none","chargeType":"free","abilityTreeCode":"213185","abilityTreeNodes":["FEATUREhdmFT57I0"]},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"数据库实例ID。","type":"string","required":false,"example":"r-bp1nti25tc7bq5****\n"}},{"name":"TaskId","in":"formData","schema":{"description":"任务ID。","type":"string","required":false,"example":"a4f5c4494dbd6713185d87a97aa53e8\n"}},{"name":"PageNo","in":"formData","schema":{"description":"分页查询的页码，从1开始，默认为1。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PageSize","in":"formData","schema":{"description":"分页查询每页最大记录数，默认为10。","type":"integer","format":"int32","required":false,"example":"10"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。\n\n","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"},"Data":{"title":"SqlLogTaskDetail","description":"返回数据。","type":"object","properties":{"Name":{"title":"任务名","description":"任务名称。","type":"string","example":"SQL审计导出1\n"},"TaskId":{"title":"任务ID","description":"任务ID。","type":"string","example":"9a4f5c4494dbd6713185d87a97aa53e8\n"},"TaskType":{"title":"任务类型","description":"任务类型。\n\n- **Export**：导出任务。\n- **Query**：查询任务。","type":"string","example":"Query"},"CreateTime":{"title":"任务创建时间","description":"任务创建时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1681363254423\n"},"Status":{"title":"任务状态","description":"任务状态。\n- **INIT**：待调度 。\n- **RUNNING**：运行中。\n- **FAILED**：失败。\n- **CANCELED**：已取消。\n- **COMPLETED**：完成。\n> 当任务处于**COMPLETED**时，可以查看离线任务的结果。","type":"string","example":"COMPLETED"},"Expire":{"description":"任务是否过期。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false\n"},"Start":{"title":"查询开始时间","description":"查询开始时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1596177993000\n"},"End":{"title":"查询结束时间","description":"查询结束时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1608888296000\n"},"Filters":{"title":"过滤条件","description":"过滤条件。","type":"array","items":{"description":"查询筛选条件。","type":"object","properties":{"Key":{"title":"过滤参数","description":"过滤参数的名称。\n>支持的过滤参数及其取值请参考**返回参数补充说明**。","type":"string","example":"keyWords\n"},"Value":{"title":"过滤值","description":"过滤参数的值。","type":"any","example":"select"}}}},"Total":{"title":"总条数","description":"任务总数。","type":"integer","format":"int64","example":"1"},"Queries":{"title":"明细列表","description":"离线查询任务结果。","type":"array","items":{"description":"离线查询任务结果。","type":"object","properties":{"Vip":{"description":"查询链接的endpoint解析地址。","type":"string","example":"10.146.XX.XX"},"NodeId":{"description":"子节点ID。","type":"string","example":"pi-bp1o58x3ib7e6****\n"},"SqlText":{"description":"SQL语句详情。","type":"string","example":"SELECT @@session.transaction_read_only"},"SqlType":{"description":"选择SQL的类型。取值：\n- **SELECT**\n- **UPDATE**\n- **DELETE**","type":"string","example":"SELECT"},"State":{"description":"执行结果。\n\n- **0**：执行成功。\n- **1**：执行失败。","type":"string","example":"0"},"DBName":{"description":"数据库名称。","type":"string","example":"testdb01"},"SqlId":{"description":"SQL ID。","type":"string","example":"a4111670e80596c5bf42cf5154438a91"},"ExecuteTime":{"title":"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'","description":"执行时间，格式为UTC时间：`yyyy-MM-ddTHH:mm:ssZ`。","type":"string","example":"2023-12-07T02:15:32Z"},"OriginTime":{"title":"ts unix","description":"执行时间戳，格式为Unix时间，单位为毫秒。","type":"integer","format":"int64","example":"1701886532000\n"},"AccountName":{"description":"数据库账号。","type":"string","example":"testname\n"},"HostAddress":{"description":"客户端IP地址。","type":"string","example":"11.197.XX.XX\n"},"Consume":{"description":"执行耗时，单位毫秒。","type":"integer","format":"int64","example":"58"},"LockTime":{"description":"锁等待时间，单位毫秒。","type":"integer","format":"int64","example":"0"},"UpdateRows":{"description":"更新行数。","type":"integer","format":"int64","example":"0"},"ScanRows":{"description":"扫描行数。","type":"integer","format":"int64","example":"0"},"ReturnRows":{"description":"返回行数。","type":"integer","format":"int64","example":"0"},"LogicRead":{"description":"逻辑读。","type":"integer","format":"int64","example":"0"},"PhysicSyncRead":{"description":"物理同步读。","type":"integer","format":"int64","example":"0"},"PhysicAsyncRead":{"description":"物理异步读。","type":"integer","format":"int64","example":"0"},"ThreadId":{"description":"线程ID。","type":"integer","format":"int64","example":"None"},"TrxId":{"description":"事务ID。","type":"string","example":"200000\n"},"Ext":{"description":"扩展信息字段，备用参数。","type":"string","example":"None"},"Scnt":{"title":"polarx cn节点，dn请求总数","description":"PolarDB-X 2.0计算节点（CN）的DN请求数。","type":"integer","format":"int64","example":"10\n"},"Rows":{"title":"polarx cn节点,总更新/返回行数","description":"PolarDB-X 2.0数据库实例计算节点总更新或返回的行数。","type":"integer","format":"int64","example":"10"},"Frows":{"title":"polarx cn节点,拉取行数","description":"PolarDB-X 2.0计算节点（CN）的拉取行数。","type":"integer","format":"int64","example":"10"},"TraceId":{"description":"PolarDB-X 2.0的跟踪ID，即SQL在数据节点的执行ID。","type":"string","example":"14c93b7c7bf00000 "},"UseImciEngine":{"description":"PolarDB MySQL版实例是否使用列存索引。\n\n- **true**：是。\n- **false**：否。","type":"string","example":"true\n"},"ParallelDegree":{"description":"PolarDB MySQL版实例的并行排队时间，单位为毫秒。","type":"string","example":"10\n"},"ParallelQueueTime":{"description":"PolarDB MySQL版实例的并行度。","type":"string","example":"2"},"PhysicRead":{"description":"物理读。","type":"integer","format":"int64","example":"0"},"CpuTime":{"description":"CPU执行时间，单位为微秒。","type":"integer","format":"int64","example":"100\n"},"Writes":{"description":"RDS SQL Server引擎的写入数。","type":"integer","format":"int64","example":"10"},"Collection":{"type":"string"}}}},"Export":{"title":"导出地址","description":"导出任务的下载地址。","type":"string","example":"\"https://das-sqllog-download-cn-hongkong.oss-cn-hongkong.aliyuncs.com/****\""}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"Data\\\": {\\n    \\\"Name\\\": \\\"SQL审计导出1\\\\n\\\",\\n    \\\"TaskId\\\": \\\"9a4f5c4494dbd6713185d87a97aa53e8\\\\n\\\",\\n    \\\"TaskType\\\": \\\"Query\\\",\\n    \\\"CreateTime\\\": 1681363254423,\\n    \\\"Status\\\": \\\"COMPLETED\\\",\\n    \\\"Expire\\\": true,\\n    \\\"Start\\\": 1596177993000,\\n    \\\"End\\\": 1608888296000,\\n    \\\"Filters\\\": [\\n      {\\n        \\\"Key\\\": \\\"keyWords\\\\n\\\",\\n        \\\"Value\\\": \\\"select\\\"\\n      }\\n    ],\\n    \\\"Total\\\": 1,\\n    \\\"Queries\\\": [\\n      {\\n        \\\"Vip\\\": \\\"10.146.XX.XX\\\",\\n        \\\"NodeId\\\": \\\"pi-bp1o58x3ib7e6****\\\\n\\\",\\n        \\\"SqlText\\\": \\\"SELECT @@session.transaction_read_only\\\",\\n        \\\"SqlType\\\": \\\"SELECT\\\",\\n        \\\"State\\\": \\\"0\\\",\\n        \\\"DBName\\\": \\\"testdb01\\\",\\n        \\\"SqlId\\\": \\\"a4111670e80596c5bf42cf5154438a91\\\",\\n        \\\"ExecuteTime\\\": \\\"2023-12-07T02:15:32Z\\\",\\n        \\\"OriginTime\\\": 1701886532000,\\n        \\\"AccountName\\\": \\\"testname\\\\n\\\",\\n        \\\"HostAddress\\\": \\\"11.197.XX.XX\\\\n\\\",\\n        \\\"Consume\\\": 58,\\n        \\\"LockTime\\\": 0,\\n        \\\"UpdateRows\\\": 0,\\n        \\\"ScanRows\\\": 0,\\n        \\\"ReturnRows\\\": 0,\\n        \\\"LogicRead\\\": 0,\\n        \\\"PhysicSyncRead\\\": 0,\\n        \\\"PhysicAsyncRead\\\": 0,\\n        \\\"ThreadId\\\": 0,\\n        \\\"TrxId\\\": \\\"200000\\\\n\\\",\\n        \\\"Ext\\\": \\\"None\\\",\\n        \\\"Scnt\\\": 10,\\n        \\\"Rows\\\": 10,\\n        \\\"Frows\\\": 10,\\n        \\\"TraceId\\\": \\\"14c93b7c7bf00000 \\\",\\n        \\\"UseImciEngine\\\": \\\"true\\\\n\\\",\\n        \\\"ParallelDegree\\\": \\\"10\\\\n\\\",\\n        \\\"ParallelQueueTime\\\": \\\"2\\\",\\n        \\\"PhysicRead\\\": 0,\\n        \\\"CpuTime\\\": 100,\\n        \\\"Writes\\\": 10,\\n        \\\"Collection\\\": \\\"\\\"\\n      }\\n    ],\\n    \\\"Export\\\": \\\"\\\\\\\"https://das-sqllog-download-cn-hongkong.oss-cn-hongkong.aliyuncs.com/****\\\\\\\"\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"查询DAS企业版离线任务详情","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。","responseParamsDescription":"**Key**支持的参数和取值：\n\n- **KeyWords**：关键字，多个关键字间使用空格隔开。\n- **LogicalOperator**：关键字间的逻辑操作，取值为and或or。\n- **AccountName**：用户名。\n- **dbName**：数据库名称。\n- **HostAddress**：客户端IP地址。\n- **MaxConsume**：最大耗时，单位毫秒。\n- **MinConsume**：最小耗时，单位毫秒。\n- **MaxScanRows**：最大扫描行。\n- **MinScanRows**：最小扫描行。\n- **SqlType**：SQL类型，取值select、update、insert或delete。\n- **State**：执行结果，取值0（成功）或1（失败）。\n- **ThreadId**：线程ID。\n- **SortKey**：排序列名称，取值ScanRows（扫描行数）、UpdateRows（更新行数）、Consume（耗时）、ExecuteTime（执行时间）、ReturnRows（返回行数）、LockTime（锁等待时间）、Frows（PolarDB-X 2.0计算节点的拉取行数）、Scnt（PolarDB-X 2.0计算节点的DN请求数）、CpuTime（CPU执行时间）、PhysicalRead（物理读）。\n- **SortMethod**：排序方式，取值DESC（降序）、ASC（升序）。默认为DESC。\n- **TraceId**：PolarDB-X 2.0实例的跟踪ID。\n- **MinRows**：最小更新行数。\n- **MaxRows**：最大更新行数。\n- **MinScnt**：PolarDB-X 2.0计算节点（CN）的DN最小请求数。\n- **MaxScnt**：PolarDB-X 2.0计算节点（CN）的DN最大请求数。\n- **TrxId**：事务ID。\n- **Fail**：错误码。\n- **SqlId**：SQL ID。\n- **JobId**：对于开通企业版V0和V1的数据库实例，需要通过异步任务ID进一步查询返回结果。"}