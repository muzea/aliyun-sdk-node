{"summary":"调用CreateSqlLogTask接口，创建DAS企业版的离线任务。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free","abilityTreeCode":"199695","abilityTreeNodes":["FEATUREhdmFT57I0"]},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"数据库实例ID。","type":"string","required":false,"example":"pc-2ze8g2am97624****"}},{"name":"NodeId","in":"formData","schema":{"description":"节点ID。\n>该参数仅适用于集群版实例，可以选择查询指定节点离线任务。若不传该参数，默认返回主节点离线任务。","type":"string","required":false,"example":"pi-uf6k5f6g3912i****"}},{"name":"Type","in":"formData","schema":{"description":"任务类型\n\n- **Export**：导出任务。\n- **Query**：查询任务。\n- **Insight**：分析任务。","type":"string","required":false,"example":"Export"}},{"name":"Name","in":"formData","schema":{"description":"任务名称。","type":"string","required":false,"example":"SQL审计导出1\n"}},{"name":"Filters","in":"query","style":"repeatList","schema":{"description":"筛选条件列表。","type":"array","items":{"description":"筛选条件。","type":"object","properties":{"Key":{"title":"过滤参数","description":"过滤参数的名称。\n\n> 支持的过滤参数及其取值请参考**请求参数补充说明**。","type":"string","required":false,"example":"KeyWords"},"Value":{"description":"过滤参数的数值。","type":"string","required":false,"example":"select"}},"required":false},"required":false,"maxItems":100}},{"name":"StartTime","in":"formData","schema":{"description":"任务的开始时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","required":false,"example":"1596177993000\n"}},{"name":"EndTime","in":"formData","schema":{"description":"任务结束时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","required":false,"example":"1608888296000\n"}},{"name":"Role","in":"query","schema":{"description":"PolarDB-X 2.0数据库实例节点信息。\n\n- **polarx_cn**：计算节点。\n\n- **polarx_dn**：数据节点。","type":"string","required":false,"example":"polarx_cn"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"83D9D59B-057A-54A9-BFF9-CF2B42F05645"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"},"Data":{"title":"SqlLogTask","description":"返回数据。","type":"object","properties":{"TaskId":{"description":"任务ID。","type":"string","example":"54f8041743ca3a9ac5cb9342d050527c"},"InstanceId":{"title":"实例标识","description":"数据库实例ID。","type":"string","example":"pc-2ze8g2am97624****"},"Name":{"title":"任务别名","description":"任务名称。","type":"string","example":"Export_test"},"Start":{"title":"查询开始时间","description":"开始时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1596177993000"},"End":{"title":"查询结束时间","description":"j结束时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1608888296000\n"},"Status":{"title":"任务状态","description":"任务状态。\n- **INIT**：待调度。\n- **RUNNING**：运行中。\n- **FAILED**：失败。\n- **CANCELED**：已取消。\n- **COMPLETED**：完成。\n\n> 当任务处于**COMPLETED**时，可以查看任务的结果。","type":"string","example":"COMPLETED"},"CreateTime":{"title":"任务创建时间","description":"任务创建时间，格式为unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1681363254423\n"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"83D9D59B-057A-54A9-BFF9-CF2B42F05645\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"Data\\\": {\\n    \\\"TaskId\\\": \\\"54f8041743ca3a9ac5cb9342d050527c\\\",\\n    \\\"InstanceId\\\": \\\"pc-2ze8g2am97624****\\\",\\n    \\\"Name\\\": \\\"Export_test\\\",\\n    \\\"Start\\\": 1596177993000,\\n    \\\"End\\\": 1608888296000,\\n    \\\"Status\\\": \\\"COMPLETED\\\",\\n    \\\"CreateTime\\\": 1681363254423\\n  }\\n}\",\"type\":\"json\"}]","title":"（废弃）创建DAS企业版离线任务","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 仅开通了DAS企业版 V2和V3的数据库实例支持创建离线任务。DAS企业版各个版本支持的数据库和地域请参见[DAS产品系列及支持的功能](~~156204~~)。","requestParamsDescription":"**Key**支持的参数和取值：\n\n- **KeyWords**：关键字，多个关键字间使用空格隔开。\n- **LogicalOperator**：关键字间的逻辑操作，取值为and或or。\n- **AccountName**：用户名。\n- **dbName**：数据库名称。\n- **HostAddress**：客户端IP地址。\n- **MaxConsume**：最大耗时，单位毫秒。\n- **MinConsume**：最小耗时，单位毫秒。\n- **MaxScanRows**：最大扫描行。\n- **MinScanRows**：最小扫描行。\n- **SqlType**：SQL类型，取值select、update、insert或delete。\n- **State**：执行结果，取值0（成功）或1（失败）。\n- **ThreadId**：线程ID。\n- **SortKey**：排序列名称，取值ScanRows（扫描行数）、UpdateRows（更新行数）、Consume（耗时）、ExecuteTime（执行时间）、ReturnRows（返回行数）、LockTime（锁等待时间）、Frows（PolarDB-X 2.0计算节点的拉取行数）、Scnt（PolarDB-X 2.0计算节点的DN请求数）、CpuTime（CPU执行时间）、PhysicalRead（物理读）。\n- **SortMethod**：排序方式，取值DESC（降序）、ASC（升序）。默认为DESC。\n- **TraceId**：PolarDB-X 2.0实例的跟踪ID。\n- **MinRows**：最小更新行数。\n- **MaxRows**：最大更新行数。\n- **MinScnt**：PolarDB-X 2.0计算节点（CN）的DN最小请求数。\n- **MaxScnt**：PolarDB-X 2.0计算节点（CN）的DN最大请求数。\n- **TrxId**：事务ID。\n- **Fail**：错误码。\n- **SqlId**：SQL ID。\n- **JobId**：对于开通企业版V0和V1的数据库实例，需要通过异步任务ID进一步查询返回结果。"}