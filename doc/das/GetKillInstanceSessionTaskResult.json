{"summary":"调用GetKillInstanceSessionTaskResult接口，获取结束会话任务的结果。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"rm-2ze1jdv45i7l6****"}},{"name":"NodeId","in":"query","schema":{"description":"节点ID。\n\n> 对于PolarDB MySQL版实例，需要提供节点ID。","type":"string","required":false,"example":"pi-8vbkfj5a756um****"}},{"name":"TaskId","in":"query","schema":{"description":"<props=\"china\">任务ID，调用[CreateKillInstanceSessionTask](~~609246~~)接口时返回的任务ID。</props>\n\n<props=\"intl\">任务ID，调用[CreateKillInstanceSessionTask](~~609246~~)接口时返回的任务ID。</props>\n","type":"string","required":true,"example":"f77d535b45405bd462b21caa3ee8****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回Successful，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。","type":"object","properties":{"TaskId":{"description":"任务ID。","type":"string","example":"f77d535b45405bd462b21caa3ee8****"},"UserId":{"description":"阿里云主账号ID。","type":"string","example":"164882191396****"},"InstanceId":{"description":"实例ID。","type":"string","example":"rm-2ze1jdv45i7l6****"},"NodeId":{"description":"节点ID。\n\n> PolarDB MySQL版实例的结束会话任务才会返回该数据。","type":"string","example":"pi-bp1h12rv501cv****"},"TaskState":{"description":"结束会话任务的状态：\n\n- **RUNNING**：正在运行。\n- **SUCCESS**：成功。\n- **FAILURE**：失败。\n- **ERROR**：其他错误。","type":"string","example":"SUCCESS"},"Sessions":{"description":"需要结束的会话ID列表。\n\n> 结束全部会话时，实例或节点上的所有会话ID列表。","type":"array","items":{"description":"会话ID。","type":"integer","format":"int64","example":"[\n152,\n112,\n106,\n146,\n8357323,\n5697053,\n8357518,\n8357519,\n14964383\n]"}},"KillSuccessCount":{"description":"结束成功的会话数量。","type":"integer","format":"int64","example":"100"},"KillFailCount":{"description":"结束失败的会话数量。","type":"integer","format":"int64","example":"0"},"IgnoredUserSessionCount":{"description":"指定的不会被结束的会话数量，包含忽略列表中账号的会话、阿里云内部运维账号的会话和**Binlog Dump**会话。","type":"integer","format":"int64","example":"9"},"Result":{"description":"结束会话的详情列表。","type":"array","items":{"description":"结束会话的详情。","type":"object","properties":{"Id":{"description":"会话ID。","type":"integer","format":"int64","example":"8357518"},"User":{"description":"数据库账号。","type":"string","example":"testUser"},"Host":{"description":"发起该会话主机的IP地址和端口。","type":"string","example":"100.104.XX.XX:23428"},"Db":{"description":"数据库名。","type":"string","example":"dbTest"},"Command":{"description":"会话执行的命令类型。","type":"string","example":"Sleep"},"Time":{"description":"执行时间，单位为秒（s）。","type":"integer","format":"int64","example":"1"},"State":{"description":"会话状态。","type":"string","example":"Sending data"},"Info":{"description":"会话执行的SQL语句。","type":"string","example":"SELECT sleep(60)"},"Active":{"description":"是否是活跃会话。\n\n> 活跃会话判断逻辑： 命令是Query或者Execute，以及未结束事务中的会话。","type":"boolean","example":"true"},"TaskId":{"description":"结束该会话的子任务ID。","type":"string","example":"task_d9e94107-6116-4ac3-b874-81466aff****"},"Reason":{"description":"结束该会话时的结果描述。\n- **SESSION_KILLED**：结束会话成功。\n- **SESSION_EXPIRED**：会话已过期。\n- **SESSION\\_NO\\_PERMISSION**：用于结束会话的账号权限不足。\n- **SESSION\\_ACCOUNT\\_ERROR**：用于结束会话的账号或密码错误。\n- **SESSION\\_IGNORED\\_USER**：不需要结束的账号的会话。\n- **SESSION\\_INTERNAL\\_USER\\_OR\\_COMMAND**：阿里云运维账号的会话或者命令。\n- **SESSION\\_KILL\\_TASK\\_TIMEOUT**：结束会话超时。\n- **SESSION\\_OTHER\\_ERROR**：其他错误。","type":"string","example":"SESSION_KILLED"}}}}}},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"TaskId\\\": \\\"f77d535b45405bd462b21caa3ee8****\\\",\\n    \\\"UserId\\\": \\\"164882191396****\\\",\\n    \\\"InstanceId\\\": \\\"rm-2ze1jdv45i7l6****\\\",\\n    \\\"NodeId\\\": \\\"pi-bp1h12rv501cv****\\\",\\n    \\\"TaskState\\\": \\\"SUCCESS\\\",\\n    \\\"Sessions\\\": [\\n      0\\n    ],\\n    \\\"KillSuccessCount\\\": 100,\\n    \\\"KillFailCount\\\": 0,\\n    \\\"IgnoredUserSessionCount\\\": 9,\\n    \\\"Result\\\": [\\n      {\\n        \\\"Id\\\": 8357518,\\n        \\\"User\\\": \\\"testUser\\\",\\n        \\\"Host\\\": \\\"100.104.XX.XX:23428\\\",\\n        \\\"Db\\\": \\\"dbTest\\\",\\n        \\\"Command\\\": \\\"Sleep\\\",\\n        \\\"Time\\\": 1,\\n        \\\"State\\\": \\\"Sending data\\\",\\n        \\\"Info\\\": \\\"SELECT sleep(60)\\\",\\n        \\\"Active\\\": true,\\n        \\\"TaskId\\\": \\\"task_d9e94107-6116-4ac3-b874-81466aff****\\\",\\n        \\\"Reason\\\": \\\"SESSION_KILLED\\\"\\n      }\\n    ]\\n  },\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetKillInstanceSessionTaskResultResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <TaskId>f77d535b45405bd462b21caa3ee8****</TaskId>\\n        <UserId>164882191396****</UserId>\\n        <InstanceId>rm-2ze1jdv45i7l6****</InstanceId>\\n        <TaskState>SUCCESS</TaskState>\\n        <KillSuccessCount>100</KillSuccessCount>\\n        <KillFailCount>0</KillFailCount>\\n        <IgnoredUserSessionCount>9</IgnoredUserSessionCount>\\n        <Result>\\n            <Id>8357518</Id>\\n            <User>testUser</User>\\n            <Host>100.104.XX.XX:23428</Host>\\n            <Db>dbTest</Db>\\n            <Command>Sleep</Command>\\n            <Time>1</Time>\\n            <State>Sending data</State>\\n            <Info>SELECT sleep(60)</Info>\\n            <Active>true</Active>\\n            <TaskId>task_d9e94107-6116-4ac3-b874-81466aff****</TaskId>\\n            <Reason>SESSION_KILLED</Reason>\\n        </Result>\\n    </Data>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Success>true</Success>\\n</GetKillInstanceSessionTaskResultResponse>\",\"errorExample\":\"\"}]","title":"获取结束会话任务的结果","description":"- 本接口只适用于RDS MySQL和PolarDB MySQL版实例。\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}