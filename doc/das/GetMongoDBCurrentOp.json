{"summary":"调用GetMongoDBCurrentOp接口，获取MongoDB实例当前会话。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"riskType":"none","chargeType":"free"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"dds-uf6079bda570****"}},{"name":"NodeId","in":"query","schema":{"description":"节点ID。\n\n> 不提供节点ID时，默认获取Primary节点会话。","type":"string","required":false,"example":"23302531"}},{"name":"Role","in":"query","schema":{"description":"预留参数，可不传递。","type":"string","required":false,"example":"None"}},{"name":"FilterDoc","in":"query","schema":{"description":"采用`db.currentOp()`命令在获取会话时进行过滤，命令详情请参考MongoDB的[db.currentOp()](https://docs.mongodb.com/manual/reference/method/db.currentOp/)命令。","type":"string","required":false,"example":"{ \"active\" : true }"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"详细信息。","type":"object","properties":{"Timestamp":{"description":"获取数据库会话数据的时间，格式为Unix时间戳，单位为毫秒（ms）。","type":"integer","format":"int64","example":"1692029584428"},"SessionList":{"description":"会话列表。","type":"array","items":{"description":"会话。","type":"object","properties":{"OpId":{"description":"操作ID。","type":"string","example":"14508"},"Active":{"description":"是否是活跃的操作：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"true"},"Command":{"description":"包含与此操作关联的完整命令对象的文档。","type":"string","example":"\"command\" : {\n  \"find\" : \"items\",\n  \"filter\" : {\n    \"sku\" : 1403978\n  },\n  ...\n  \"$db\" : \"test\"\n}"},"Op":{"description":"操作类型。","type":"string","example":"update"},"SecsRunning":{"description":"操作持续时间，单位为秒（s）。","type":"integer","format":"int64","example":"5"},"PlanSummary":{"description":"执行计划描述。","type":"string","example":"None"},"Host":{"description":"主机。","type":"string","example":"a79****.cloud.et15:3328"},"Client":{"description":"客户端的地址。","type":"string","example":"219.143.XX.XX:52324"},"Desc":{"description":"连接描述。","type":"string","example":"conn1013858"},"Ns":{"description":"命名空间。","type":"string","example":"admin.cmd"},"ConnectionId":{"description":"连接ID。","type":"integer","format":"int64","example":"66378736"},"Driver":{"description":"MongoDB驱动。","type":"string","example":"mongo-java-driver|legacy@3.11.2"},"OsType":{"description":"系统类型。","type":"string","example":"Linux"},"OsName":{"description":"系统名。","type":"string","example":"Linux"},"OsArch":{"description":"系统架构。","type":"string","example":"AMD64"},"Platform":{"description":"平台。","type":"string","example":"Java/Alibaba/1.8.0_152-b5"},"KillPending":{"description":"该操作是否被标记为终止：\n\n- **true**：是。\n\n- **false**：否。","type":"boolean","example":"true"},"Shard":{"description":"分片节点ID。\n\n> 分片集群实例时返回该参数。","type":"string","example":"d-bp1689995b78****"}}}},"SessionStat":{"description":"会话统计数据。","type":"object","properties":{"ActiveCount":{"description":"活跃会话数。","type":"integer","format":"int64","example":"0"},"TotalCount":{"description":"会话总数。","type":"integer","format":"int64","example":"11"},"LongestSecsRunning":{"description":"会话执行最长耗时，单位为秒（s）。","type":"integer","format":"int64","example":"0"},"ClientStats":{"description":"客户端地址的统计数据。","type":"object","additionalProperties":{"type":"object","properties":{"ActiveCount":{"type":"integer","format":"int64","description":"活跃数。","example":"0"},"TotalCount":{"type":"integer","format":"int64","description":"总数。","example":"11"}},"description":"客户端地址维度。"}},"DbStats":{"description":"命名空间统计数据。","type":"object","additionalProperties":{"type":"object","properties":{"ActiveCount":{"type":"integer","format":"int64","description":"活跃数。","example":"0"},"TotalCount":{"type":"integer","format":"int64","example":"11","description":"总数。"}},"description":"命名空间维度。"}}}}}},"RequestId":{"description":"请求ID。","type":"string","example":"FC6C0929-29E1-59FD-8DFE-70D9D41E****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"Timestamp\\\": 1692029584428,\\n    \\\"SessionList\\\": [\\n      {\\n        \\\"OpId\\\": \\\"14508\\\",\\n        \\\"Active\\\": true,\\n        \\\"Command\\\": \\\"\\\\\\\"command\\\\\\\" : {\\\\n  \\\\\\\"find\\\\\\\" : \\\\\\\"items\\\\\\\",\\\\n  \\\\\\\"filter\\\\\\\" : {\\\\n    \\\\\\\"sku\\\\\\\" : 1403978\\\\n  },\\\\n  ...\\\\n  \\\\\\\"$db\\\\\\\" : \\\\\\\"test\\\\\\\"\\\\n}\\\",\\n        \\\"Op\\\": \\\"update\\\",\\n        \\\"SecsRunning\\\": 5,\\n        \\\"PlanSummary\\\": \\\"None\\\",\\n        \\\"Host\\\": \\\"a79****.cloud.et15:3328\\\",\\n        \\\"Client\\\": \\\"219.143.XX.XX:52324\\\",\\n        \\\"Desc\\\": \\\"conn1013858\\\",\\n        \\\"Ns\\\": \\\"admin.cmd\\\",\\n        \\\"ConnectionId\\\": 66378736,\\n        \\\"Driver\\\": \\\"mongo-java-driver|legacy@3.11.2\\\",\\n        \\\"OsType\\\": \\\"Linux\\\",\\n        \\\"OsName\\\": \\\"Linux\\\",\\n        \\\"OsArch\\\": \\\"AMD64\\\",\\n        \\\"Platform\\\": \\\"Java/Alibaba/1.8.0_152-b5\\\",\\n        \\\"KillPending\\\": true,\\n        \\\"Shard\\\": \\\"d-bp1689995b78****\\\"\\n      }\\n    ],\\n    \\\"SessionStat\\\": {\\n      \\\"ActiveCount\\\": 0,\\n      \\\"TotalCount\\\": 11,\\n      \\\"LongestSecsRunning\\\": 0,\\n      \\\"ClientStats\\\": {\\n        \\\"key\\\": {\\n          \\\"ActiveCount\\\": 0,\\n          \\\"TotalCount\\\": 11\\n        }\\n      },\\n      \\\"DbStats\\\": {\\n        \\\"key\\\": {\\n          \\\"ActiveCount\\\": 0,\\n          \\\"TotalCount\\\": 11\\n        }\\n      }\\n    }\\n  },\\n  \\\"RequestId\\\": \\\"FC6C0929-29E1-59FD-8DFE-70D9D41E****\\\",\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"获取MongoDB实例当前会话","description":"- 本接口只适用于MongoDB实例。\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。","responseParamsDescription":"可参考MongoDB命令currentOp返回数据。"}