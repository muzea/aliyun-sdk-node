{"summary":"获取指定数据库实例的自动SQL限流规则。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"none","riskType":"none","chargeType":"free"},"parameters":[{"name":"ConsoleContext","in":"query","schema":{"description":"备用参数。","type":"string","required":false,"example":"None"}},{"name":"InstanceIds","in":"query","schema":{"description":"数据库实例ID。\n\n- 数据格式为JSONArray，例如`['实例ID1','实例ID2']`，实例ID间用英文逗号（,）分隔。\n- 不输入数据库实例ID时，默认返回当前账号曾经开启过自动SQL限流功能的全部数据库实例信息，包括：\n    - 正在使用该功能的数据库实例。\n    - 已关闭该功能的数据库实例（不包含已经释放的数据库实例）。","type":"string","required":false,"example":"['rm-2ze8g2am97624****','rm-2vc54m2a6pd6p****','rm-2ze9xrhze0709****']"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。","type":"object","properties":{"TotalAutoThrottleRulesCount":{"description":"所有开启过自动SQL限流功能的数据库数量。","type":"integer","format":"int64","example":"3"},"EnableAutoThrottleCount":{"description":"正在使用自动SQL限流功能的数据库实例数量。","type":"integer","format":"int64","example":"1"},"TurnOffAutoThrottleCount":{"description":"曾经开启并且当前已关闭自动SQL限流功能的数据库实例数量。","type":"integer","format":"int64","example":"1"},"NeverEnableAutoThrottleOrReleasedInstanceCount":{"description":"从未开启过自动SQL限流或者实例不存在的数据库实例数量。\n> 实例不存在：数据库实例已经释放或者传入的数据库实例ID存在错误。","type":"integer","format":"int64","example":"1"},"EnableAutoThrottleList":{"description":"正在使用自动SQL限流功能的数据库实例信息列表。","type":"array","items":{"type":"object","properties":{"AbnormalDuration":{"description":"触发自动限SQL流规则的异常的持续时间阈值，单位：分钟。","type":"number","format":"double","example":"2"},"CpuUsage":{"description":"CPU利用率阈值。","type":"number","format":"double","example":"70"},"CpuSessionRelation":{"description":"CPU利用率阈值和活跃会话数阈值的逻辑关系：\n\n- **AND**：且。\n- **OR**：或。","type":"string","example":"AND"},"ActiveSessions":{"description":"活跃会话数量阈值。","type":"integer","format":"int64","example":"32"},"MaxThrottleTime":{"description":"最大限流时长，单位：分钟。","type":"number","format":"double","example":"10"},"AllowThrottleStartTime":{"description":"可限流时间段的开始时间（UTC时间）。","type":"string","example":"00:00Z"},"AllowThrottleEndTime":{"description":"可限流时间段的结束时间（UTC时间）。","type":"string","example":"23:59Z"},"Visible":{"description":"自动SQL限流规则是否开启：\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"AutoKillSession":{"description":"是否同时KILL执行中的异常SQL：\n> 异常SQL：与需要限流的SQL模板相同。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze8g2am97624****"},"UserId":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。","type":"string","example":"140692647406****"}}}},"TurnOffAutoThrottleList":{"description":"曾经开启并且当前已关闭自动SQL限流功能的数据库实例信息列表。","type":"array","items":{"type":"object","properties":{"AbnormalDuration":{"description":"触发自动限流规则的持续时间阈值，单位：分钟。","type":"number","format":"double","example":"2"},"CpuUsage":{"description":"CPU利用率阈值。","type":"number","format":"double","example":"80"},"AllowThrottleEndTime":{"description":"可限流时间段的结束时间（UTC时间）。","type":"string","example":"23:59Z"},"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze9xrhze0709****"},"Visible":{"description":"自动SQL限流规则是否开启：\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false"},"CpuSessionRelation":{"description":"CPU利用率阈值和活跃会话数阈值的关系：\n- **AND**：且。\n- **OR**：或。","type":"string","example":"OR"},"AutoKillSession":{"description":"是否同时KILL执行中的异常SQL：\n> 异常SQL：与需要限流的SQL模板相同。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"ActiveSessions":{"description":"活跃会话数阈值。","type":"integer","format":"int64","example":"64"},"MaxThrottleTime":{"description":"最大限流时长，单位：分钟。","type":"number","format":"double","example":"10"},"UserId":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。","type":"string","example":"140692647406****"},"AllowThrottleStartTime":{"description":"可限流时间段的开始时间（UTC时间）。","type":"string","example":"00:00Z"}}}},"NeverEnableAutoThrottleOrReleasedInstanceIdList":{"description":"从未开启过自动SQL限流或者实例不存在的数据库实例数量。\n> 实例不存在：数据库实例已经释放或者传入的数据库实例ID存在错误。","type":"array","items":{"description":"数据库实例ID。","type":"string","example":"rm-2vc54m2a6pd6p****"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"7172BECE-588A-5961-8126-C216E16B****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"TotalAutoThrottleRulesCount\\\": 3,\\n    \\\"EnableAutoThrottleCount\\\": 1,\\n    \\\"TurnOffAutoThrottleCount\\\": 1,\\n    \\\"NeverEnableAutoThrottleOrReleasedInstanceCount\\\": 1,\\n    \\\"EnableAutoThrottleList\\\": [\\n      {\\n        \\\"AbnormalDuration\\\": 2,\\n        \\\"CpuUsage\\\": 70,\\n        \\\"CpuSessionRelation\\\": \\\"AND\\\",\\n        \\\"ActiveSessions\\\": 32,\\n        \\\"MaxThrottleTime\\\": 10,\\n        \\\"AllowThrottleStartTime\\\": \\\"00:00Z\\\",\\n        \\\"AllowThrottleEndTime\\\": \\\"23:59Z\\\",\\n        \\\"Visible\\\": true,\\n        \\\"AutoKillSession\\\": true,\\n        \\\"InstanceId\\\": \\\"rm-2ze8g2am97624****\\\",\\n        \\\"UserId\\\": \\\"140692647406****\\\"\\n      }\\n    ],\\n    \\\"TurnOffAutoThrottleList\\\": [\\n      {\\n        \\\"AbnormalDuration\\\": 2,\\n        \\\"CpuUsage\\\": 80,\\n        \\\"AllowThrottleEndTime\\\": \\\"23:59Z\\\",\\n        \\\"InstanceId\\\": \\\"rm-2ze9xrhze0709****\\\",\\n        \\\"Visible\\\": false,\\n        \\\"CpuSessionRelation\\\": \\\"OR\\\",\\n        \\\"AutoKillSession\\\": true,\\n        \\\"ActiveSessions\\\": 64,\\n        \\\"MaxThrottleTime\\\": 10,\\n        \\\"UserId\\\": \\\"140692647406****\\\",\\n        \\\"AllowThrottleStartTime\\\": \\\"00:00Z\\\"\\n      }\\n    ],\\n    \\\"NeverEnableAutoThrottleOrReleasedInstanceIdList\\\": [\\n      \\\"rm-2vc54m2a6pd6p****\\\"\\n    ]\\n  },\\n  \\\"RequestId\\\": \\\"7172BECE-588A-5961-8126-C216E16B****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetAutoThrottleRulesResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <TotalAutoThrottleRulesCount>3</TotalAutoThrottleRulesCount>\\n        <EnableAutoThrottleCount>1</EnableAutoThrottleCount>\\n        <TurnOffAutoThrottleCount>1</TurnOffAutoThrottleCount>\\n        <NeverEnableAutoThrottleOrReleasedInstanceCount>1</NeverEnableAutoThrottleOrReleasedInstanceCount>\\n        <EnableAutoThrottleList>\\n            <AbnormalDuration>2</AbnormalDuration>\\n            <CpuUsage>70</CpuUsage>\\n            <CpuSessionRelation>AND</CpuSessionRelation>\\n            <ActiveSessions>32</ActiveSessions>\\n            <MaxThrottleTime>10</MaxThrottleTime>\\n            <AllowThrottleStartTime>00:00Z</AllowThrottleStartTime>\\n            <AllowThrottleEndTime>23:59Z</AllowThrottleEndTime>\\n            <Visible>true</Visible>\\n            <AutoKillSession>true</AutoKillSession>\\n            <InstanceId>rm-2ze8g2am97624****</InstanceId>\\n            <UserId>140692647406****</UserId>\\n        </EnableAutoThrottleList>\\n        <TurnOffAutoThrottleList>\\n            <AbnormalDuration>2</AbnormalDuration>\\n            <CpuUsage>80</CpuUsage>\\n            <AllowThrottleEndTime>23:59Z</AllowThrottleEndTime>\\n            <InstanceId>rm-2ze9xrhze0709****</InstanceId>\\n            <Visible>false</Visible>\\n            <CpuSessionRelation>OR</CpuSessionRelation>\\n            <AutoKillSession>true</AutoKillSession>\\n            <ActiveSessions>64</ActiveSessions>\\n            <MaxThrottleTime>10</MaxThrottleTime>\\n            <UserId>140692647406****</UserId>\\n            <AllowThrottleStartTime>00:00Z</AllowThrottleStartTime>\\n        </TurnOffAutoThrottleList>\\n        <NeverEnableAutoThrottleOrReleasedInstanceIdList>rm-2vc54m2a6pd6p****</NeverEnableAutoThrottleOrReleasedInstanceIdList>\\n    </Data>\\n    <RequestId>7172BECE-588A-5961-8126-C216E16B****</RequestId>\\n    <Success>true</Success>\\n</GetAutoThrottleRulesResponse>\",\"errorExample\":\"\"}]","title":"获取自动SQL限流规则","description":"使用该接口需满足以下前提条件：\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 目标数据库实例为：\n    - RDS MySQL 5.6、5.7、 8.0高可用系列、三节点企业系列。\n    - PolarDB MySQL版 5.6集群版、5.7集群版、 8.0集群版、8.0高压缩引擎（X-Engine）。"}