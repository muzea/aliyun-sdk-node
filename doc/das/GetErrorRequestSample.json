{"methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"rm-2ze8g2am97624****"}},{"name":"NodeId","in":"query","schema":{"description":"节点ID。\n> 对于PolarDB MySQL版实例，需要提供节点ID。","type":"string","required":false,"example":"pi-bp179lg03445l****"}},{"name":"SqlId","in":"query","schema":{"description":"SQL ID，您可以调用[GetAsyncErrorRequestListByCode](~~410746~~)接口查询实例中产生MySQL错误码的SQL ID。","type":"string","required":false,"example":"2cd4432556c3dab9d825ba363637****"}},{"name":"Start","in":"query","schema":{"description":"查询开始时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询开始时间需在数据库实例SQL洞察存储时长范围内，最大不能早于当前时间90天。\n","type":"integer","format":"int64","required":false,"example":"1642556990714"}},{"name":"End","in":"query","schema":{"description":"查询结束时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询结束时间需晚于查询开始时间，且查询开始时间和查询结束时间的间隔不能超过1天。","type":"integer","format":"int64","required":false,"example":"1642566830000"}},{"name":"DbName","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"testdb01"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。","type":"array","items":{"type":"object","properties":{"sqlId":{"description":"SQL ID。","type":"string","example":"2cd4432556c3dab9d825ba363637****"},"database":{"description":"数据库名。","type":"string","example":"dbgateway"},"originHost":{"description":"执行SQL的客户端IP地址。","type":"string","example":"172.16.1****"},"tables":{"description":"表数据。","type":"array","items":{"description":"表名。","type":"string","example":"meter_****"}},"instanceId":{"description":"实例ID。","type":"string","example":"rm-2ze8g2am97624****"},"errorCode":{"description":"错误码。","type":"string","example":"1062"},"user":{"description":"数据库用户名。","type":"string","example":"dbgat****"},"sql":{"description":"SQL语句。","type":"string","example":"insert into meter_****"},"timestamp":{"description":"执行时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1644476100435"}}},"example":"[         {             \"sqlId\": \"2cd4432556c3dab9d825ba363637****\",             \"database\": \"dbgateway\",             \"originHost\": \"172.16.1****\",             \"tables\": [                 \"meter_****\"             ],             \"instanceId\": \"rm-2ze8g2am97624****\",             \"errorCode\": \"1062\",             \"user\": \"dbgat****\",             \"sql\": \"insert into meter_****\\n        ( \\n        ****\\n     )\\n        values (now(), now(), 'bbbc8624-5e19-455a-9714-8466f688****', '2022-02-10 14:00:00', '{\\\"endTime\\\":\\\"2022-02-10 14:00:00\\\",\\\"endTimestamp\\\":1644472800,\\\"startTime\\\":\\\"2022-02-10 13:00:00\\\",\\\"startTimestamp\\\":1644469200}', null, null)\",             \"timestamp\": 1644476100435         }]"},"RequestId":{"description":"请求的ID。","type":"string","example":"7172BECE-588A-5961-8126-C216E16B****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": [\\n    {\\n      \\\"sqlId\\\": \\\"2cd4432556c3dab9d825ba363637****\\\",\\n      \\\"database\\\": \\\"dbgateway\\\",\\n      \\\"originHost\\\": \\\"172.16.1****\\\",\\n      \\\"tables\\\": [\\n        \\\"meter_****\\\"\\n      ],\\n      \\\"instanceId\\\": \\\"rm-2ze8g2am97624****\\\",\\n      \\\"errorCode\\\": \\\"1062\\\",\\n      \\\"user\\\": \\\"dbgat****\\\",\\n      \\\"sql\\\": \\\"insert into meter_****\\\",\\n      \\\"timestamp\\\": 1644476100435\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"7172BECE-588A-5961-8126-C216E16B****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetErrorRequestSampleResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <sqlId>2cd4432556c3dab9d825ba363637****</sqlId>\\n        <database>dbgateway</database>\\n        <originHost>172.16.1****</originHost>\\n        <tables>meter_****</tables>\\n        <instanceId>rm-2ze8g2am97624****</instanceId>\\n        <errorCode>1062</errorCode>\\n        <user>dbgat****</user>\\n        <sql>insert into meter_****</sql>\\n        <timestamp>1644476100435</timestamp>\\n    </Data>\\n    <RequestId>7172BECE-588A-5961-8126-C216E16B****</RequestId>\\n    <Success>true</Success>\\n</GetErrorRequestSampleResponse>\",\"errorExample\":\"\"}]","title":"查询执行错误的SQL样本数据","summary":"调用GetErrorRequestSample接口，异步查询数据库实例SQL洞察结果中执行错误的SQL样本数据，最多返回指定时间范围内20条数据。","description":"> 异步调用后不会立即返回完整结果，当返回数据中**isFinish**取值为**false**时，请等待1s后重新发起调用，直到**isFinish**取值为**true**时，返回完整结果。\n\n\n- 目前仅支持RDS MySQL和PolarDB MySQL版实例，请确保在使用该接口前，该实例已经开启DAS企业版，具体请参见[购买DAS企业版](~~163298~~)。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}