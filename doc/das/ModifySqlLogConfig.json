{"summary":"调用ModifySqlLogConfig接口，为数据库实例开启或配置DAS企业版。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","riskType":"none","chargeType":"free","abilityTreeCode":"198880","abilityTreeNodes":["FEATUREhdmFT57I0","FEATUREhdmPGXCEW"]},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"数据库实例ID。","type":"string","required":true,"example":"rr-2ze770smbq3tp****"}},{"name":"Enable","in":"formData","schema":{"description":"是否开启DAS企业版：\n\n- **true**：是。\n- **false**：否。\n> 开通企业版时必须配置，默认开启当前支持的最新版本。","type":"boolean","required":false,"example":"true"}},{"name":"RequestEnable","in":"formData","schema":{"description":"是否开启SQL洞察。\n- **true**：是。\n- **false**：否。\n\n> 仅支持开通企业版 V3时，需要配置该参数。","type":"boolean","required":false,"example":"true"}},{"name":"Retention","in":"formData","schema":{"description":"数据总存储时长，单位为天，取值为：\n\n-  7\n- 30\n- 180\n- 365\n\n> 开通DAS企业版 V3时，该参数取值必须大于等于30。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"HotRetention","in":"formData","schema":{"description":"数据热存储时长，单位为天，取值为[1, 7]范围内的整数。\n\n> 仅支持开通企业版 V3时，需要配置该参数。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"Filters","in":"query","style":"repeatList","schema":{"description":"预留参数。","type":"array","items":{"description":"预留参数。","type":"object","properties":{"Key":{"description":"预留参数。","type":"string","required":false,"example":"None"},"Value":{"description":"预留参数。","type":"string","required":false,"example":"None"}},"required":false},"required":false,"maxItems":100}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n>  请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"03C88D8E-1541-518E-8BFF-BEC6589B6334"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功\n- **false**：执行失败","type":"string","example":"false"},"Data":{"title":"SqlLogConfig","description":"返回数据。","type":"object","properties":{"SqlLogVisibleTime":{"description":"DAS企业版开启的时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1683712800000"},"RequestStopTime":{"description":"DAS企业版V1到期时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1715335200000"},"CollectorVersion":{"description":"采集器版本。\n- **MYSQL_V0**：MySQL V0版。\n- **MYSQL_V1**：MySQL V1版。\n- **MYSQL_V2**：MySQL V2版。\n- **MYSQL_V3**：MySQL V3版。\n- **PG_V1**：PostgreSQL V1版。\n- **rdspg_v1**：RDS PostgreSQL V1版。\n- **polarpg_v1**：PolarDB PostgreSQL版 V1版。","type":"string","example":"MYSQL_V3"},"SupportVersion":{"title":"当前实例支持的数据库版本(不落库)","description":"当前支持的最新DAS企业版版本。\n\n- **SQL_LOG_V0**：企业版 V0。\n- **SQL_LOG_V1**：企业版 V1。\n- **SQL_LOG_V2**：企业版 V2。\n- **SQL_LOG_V3**：企业版 V3。\n- **SQL_LOG_NOT_ENABLE**：未开启企业版。\n- **SQL_LOG_NOT_SUPPORT**： 不支持企业版。","type":"string","example":"SQL_LOG_V3"},"ColdRetention":{"title":"冷数据存储周期(不落库),通过 retention - hotRetention 计算","description":"数据冷存储时长，单位为天，由` Retention - HotRetention` 计算获得。","type":"integer","format":"int32","example":"23"},"SqlLogEnable":{"description":"是否开启了DAS企业版。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"Retention":{"description":"数据总存储时长，单位为天。","type":"integer","format":"int32","example":"30"},"HotRetention":{"description":"数据热存储时长，单位为天。","type":"integer","format":"int32","example":"7"},"RequestEnable":{"description":"是否开启SQL洞察。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false"},"Version":{"title":"当前审计日志的版本","description":"当前开启的DAS企业版版本。\n\n- **SQL_LOG_V0**：企业版 V0。\n- **SQL_LOG_V1**：企业版 V1。\n- **SQL_LOG_V2**：企业版 V2。\n- **SQL_LOG_V3**：企业版 V3。\n- **SQL_LOG_NOT_ENABLE**：未开启企业版。\n- **SQL_LOG_NOT_SUPPORT**： 不支持企业版。","type":"string","example":"SQL_LOG_V3"},"RequestStartTime":{"description":"SQL洞察开启时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1683712800000"},"HotEnable":{"description":"是否开启数据热存储。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"HotStartTime":{"description":"数据热存储开始时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1683712800000"},"ColdEnable":{"description":"是否开启数据冷存储。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"ColdStartTime":{"description":"数据冷存储开始时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1683712800000"},"SqlLogState":{"description":"数据迁移状态。\n\n- **FINISH**： 历史数据迁移完成。\n- **RUNNING**： 历史数据迁移中。\n- **FAILURE**： 历史数据迁移失败。","type":"string","example":"FINISH"},"LogFilter":{"description":"预留参数。","type":"string","example":"None"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"03C88D8E-1541-518E-8BFF-BEC6589B6334\\\",\\n  \\\"Success\\\": \\\"false\\\",\\n  \\\"Data\\\": {\\n    \\\"SqlLogVisibleTime\\\": 1683712800000,\\n    \\\"RequestStopTime\\\": 1715335200000,\\n    \\\"CollectorVersion\\\": \\\"MYSQL_V3\\\",\\n    \\\"SupportVersion\\\": \\\"SQL_LOG_V3\\\",\\n    \\\"ColdRetention\\\": 23,\\n    \\\"SqlLogEnable\\\": true,\\n    \\\"Retention\\\": 30,\\n    \\\"HotRetention\\\": 7,\\n    \\\"RequestEnable\\\": false,\\n    \\\"Version\\\": \\\"SQL_LOG_V3\\\",\\n    \\\"RequestStartTime\\\": 1683712800000,\\n    \\\"HotEnable\\\": true,\\n    \\\"HotStartTime\\\": 1683712800000,\\n    \\\"ColdEnable\\\": true,\\n    \\\"ColdStartTime\\\": 1683712800000,\\n    \\\"SqlLogState\\\": \\\"FINISH\\\",\\n    \\\"LogFilter\\\": \\\"None\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"开启或配置DAS企业版","description":"使用该接口需满足以下前提条件：\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 使用该接口默认开启当前支持的最新版本。DAS企业版各个版本支持的数据库和地域请参见[DAS产品系列及支持的功能](~~156204~~)。","requestParamsDescription":"DAS企业版当前存在V0、V1、V2、V3四个版本，默认开通当前支持的最新版本。\n\n- 对于仅支持开启企业版 V0的数控实例，仅需传入参数**Enable**和**Retention**。\n- 对于支持开启企业版 V1的数据库实例，仅需传入参数**Enable**和**Retention**，系统自动开启SQL洞察功能（即**RequestEnable**默认配置为**true**）。\n- 对于支持开启企业版 V2的数据库实例，仅需传入参数**Enable**和**Retention**，系统自动开启SQL洞察功能（即**RequestEnable**默认配置为**true**），且数据热存储时长（**HotRetention**）固定为7天，数据冷存储时长为`Retention - 7`天。"}