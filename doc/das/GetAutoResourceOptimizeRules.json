{"summary":"获取指定数据库实例的空间碎片自动回收规则。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"none","riskType":"none","chargeType":"free"},"parameters":[{"name":"ConsoleContext","in":"query","schema":{"description":"备用参数。","type":"string","required":false,"example":"None"}},{"name":"InstanceIds","in":"query","schema":{"description":"数据库实例ID。\n\n- 数据格式为JSONArray，例如`['实例ID1','实例ID2']`，实例ID间用英文逗号（,）分隔。\n- 不输入数据库实例ID时，默认返回当前账号曾经开启过空间碎片自动回收功能的全部数据库实例信息，包括：\n    - 正在使用该功能的数据库实例。\n    - 已关闭该功能的数据库实例（包含已经关闭了DAS企业版数据库实例，但不包含已经释放的数据库实例）。","type":"string","required":false,"example":"['rm-2ze8g2am97624****','rm-2vc54m2a6pd6p****','rm-2ze9xrhze0709****','rm-2ze8g2am97627****']"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"integer","format":"int64","example":"200"},"Message":{"description":"请求返回消息。\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。\n\n","type":"object","properties":{"TotalAutoResourceOptimizeRulesCount":{"description":"所有开启过空间碎片自动回收功能的数据库实例数量。","type":"integer","format":"int64","example":"3"},"EnableAutoResourceOptimizeCount":{"description":"正在使用空间碎片自动回收功能的数据库实例数量。","type":"integer","format":"int64","example":"1"},"TurnOffAutoResourceOptimizeCount":{"description":"曾经开启并且当前已关闭空间碎片自动回收功能的数据库实例数量。\n","type":"integer","format":"int64","example":"1"},"HasEnableRuleButNotDasProCount":{"description":"已开启并且未关闭空间碎片自动回收功能，但已不再使用DAS企业版的数据库实例数量。","type":"integer","format":"int64","example":"1"},"EnableAutoResourceOptimizeList":{"description":"正在使用空间碎片自动回收功能的数据库实例信息列表。","type":"array","items":{"type":"object","properties":{"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze8g2am97624****"},"AutoDefragment":{"description":"是否开启了自动空间碎片回收功能。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"TableSpaceSize":{"description":"触发空间碎片自动回收单个物理表的最小空间，单位为GB。","type":"number","format":"double","example":"10"},"DasProOn":{"description":"是否开启了DAS企业版。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"TableFragmentationRatio":{"description":"触发空间碎片自动回收单个物理表的碎片率。","type":"number","format":"double","example":"0.2"},"UserId":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。","type":"string","example":"140692647406****"}}}},"TurnOffAutoResourceOptimizeList":{"description":"曾经开启并且当前已关闭空间碎片自动回收功能的数据库实例信息列表。","type":"array","items":{"type":"object","properties":{"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2vc54m2a6pd6p****"},"AutoDefragment":{"description":"是否开启了自动空间碎片回收功能。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false"},"TableSpaceSize":{"description":"触发空间碎片自动回收单个物理表的最小空间，单位为GB。","type":"number","format":"double","example":"10"},"DasProOn":{"description":"是否开启了DAS企业版。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"TableFragmentationRatio":{"description":"触发空间碎片自动回收单个物理表的碎片率。","type":"number","format":"double","example":"0.2"},"UserId":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。","type":"string","example":"140692647406****"}}}},"HasEnableRuleButNotDasProList":{"description":"已开启并且未关闭空间碎片自动回收功能，但已不再使用DAS企业版的数据库实例列表。\n> 此类数据库实例不会执行空间碎片自动回收，直至再次为数据库实例开启DAS企业版。","type":"array","items":{"type":"object","properties":{"InstanceId":{"description":"数据库实例ID。","type":"string","example":"rm-2ze9xrhze0709****"},"AutoDefragment":{"description":"是否开启了自动空间碎片回收功能。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"TableSpaceSize":{"description":"触发空间碎片自动回收单个物理表的最小空间，单位为GB。","type":"number","format":"double","example":"10"},"DasProOn":{"description":"是否开启了DAS企业版。\n- **true**：是。\n- **false**：否。","type":"boolean","example":"false"},"TableFragmentationRatio":{"description":"触发空间碎片自动回收单个物理表的碎片率。","type":"number","format":"double","example":"0.2"},"UserId":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。","type":"string","example":"140692647406****"}}}},"NeverEnableAutoResourceOptimizeOrReleasedInstanceCount":{"description":"从未开启过空间碎片自动回收或者实例不存在的数据库实例数量。\n> 实例不存在：数据库实例已经释放或者传入的数据库实例ID存在错误。","type":"integer","format":"int64","example":"1"},"NeverEnableAutoResourceOptimizeOrReleasedInstanceIdList":{"description":"从未开启过空间碎片自动回收或者实例不存在的数据库实例信息列表。","type":"array","items":{"description":"数据库实例ID。","type":"string","example":"rm-2ze8g2am97624****"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"TotalAutoResourceOptimizeRulesCount\\\": 3,\\n    \\\"EnableAutoResourceOptimizeCount\\\": 1,\\n    \\\"TurnOffAutoResourceOptimizeCount\\\": 1,\\n    \\\"HasEnableRuleButNotDasProCount\\\": 1,\\n    \\\"EnableAutoResourceOptimizeList\\\": [\\n      {\\n        \\\"InstanceId\\\": \\\"rm-2ze8g2am97624****\\\",\\n        \\\"AutoDefragment\\\": true,\\n        \\\"TableSpaceSize\\\": 10,\\n        \\\"DasProOn\\\": true,\\n        \\\"TableFragmentationRatio\\\": 0.2,\\n        \\\"UserId\\\": \\\"140692647406****\\\"\\n      }\\n    ],\\n    \\\"TurnOffAutoResourceOptimizeList\\\": [\\n      {\\n        \\\"InstanceId\\\": \\\"rm-2vc54m2a6pd6p****\\\",\\n        \\\"AutoDefragment\\\": false,\\n        \\\"TableSpaceSize\\\": 10,\\n        \\\"DasProOn\\\": true,\\n        \\\"TableFragmentationRatio\\\": 0.2,\\n        \\\"UserId\\\": \\\"140692647406****\\\"\\n      }\\n    ],\\n    \\\"HasEnableRuleButNotDasProList\\\": [\\n      {\\n        \\\"InstanceId\\\": \\\"rm-2ze9xrhze0709****\\\",\\n        \\\"AutoDefragment\\\": true,\\n        \\\"TableSpaceSize\\\": 10,\\n        \\\"DasProOn\\\": false,\\n        \\\"TableFragmentationRatio\\\": 0.2,\\n        \\\"UserId\\\": \\\"140692647406****\\\"\\n      }\\n    ],\\n    \\\"NeverEnableAutoResourceOptimizeOrReleasedInstanceCount\\\": 1,\\n    \\\"NeverEnableAutoResourceOptimizeOrReleasedInstanceIdList\\\": [\\n      \\\"rm-2ze8g2am97624****\\\"\\n    ]\\n  },\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetAutoResourceOptimizeRulesResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <TotalAutoResourceOptimizeRulesCount>3</TotalAutoResourceOptimizeRulesCount>\\n        <EnableAutoResourceOptimizeCount>1</EnableAutoResourceOptimizeCount>\\n        <TurnOffAutoResourceOptimizeCount>1</TurnOffAutoResourceOptimizeCount>\\n        <HasEnableRuleButNotDasProCount>1</HasEnableRuleButNotDasProCount>\\n        <EnableAutoResourceOptimizeList>\\n            <InstanceId>rm-2ze8g2am97624****</InstanceId>\\n            <AutoDefragment>true</AutoDefragment>\\n            <TableSpaceSize>10</TableSpaceSize>\\n            <DasProOn>true</DasProOn>\\n            <TableFragmentationRatio>0.2</TableFragmentationRatio>\\n            <UserId>140692647406****</UserId>\\n        </EnableAutoResourceOptimizeList>\\n        <TurnOffAutoResourceOptimizeList>\\n            <InstanceId>rm-2vc54m2a6pd6p****</InstanceId>\\n            <AutoDefragment>false</AutoDefragment>\\n            <TableSpaceSize>10</TableSpaceSize>\\n            <DasProOn>true</DasProOn>\\n            <TableFragmentationRatio>0.2</TableFragmentationRatio>\\n            <UserId>140692647406****</UserId>\\n        </TurnOffAutoResourceOptimizeList>\\n        <HasEnableRuleButNotDasProList>\\n            <InstanceId>rm-2ze9xrhze0709****</InstanceId>\\n            <AutoDefragment>true</AutoDefragment>\\n            <TableSpaceSize>10</TableSpaceSize>\\n            <DasProOn>false</DasProOn>\\n            <TableFragmentationRatio>0.2</TableFragmentationRatio>\\n            <UserId>140692647406****</UserId>\\n        </HasEnableRuleButNotDasProList>\\n        <NeverEnableAutoResourceOptimizeOrReleasedInstanceCount>1</NeverEnableAutoResourceOptimizeOrReleasedInstanceCount>\\n        <NeverEnableAutoResourceOptimizeOrReleasedInstanceIdList>rm-2ze8g2am97624****</NeverEnableAutoResourceOptimizeOrReleasedInstanceIdList>\\n    </Data>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Success>true</Success>\\n</GetAutoResourceOptimizeRulesResponse>\",\"errorExample\":\"\"}]","title":"获取空间碎片自动回收规则","description":"使用该接口需满足以下前提条件：\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n\n- 实例类型为RDS MySQL高可用系列。\n\n- 数据库实例的CPU规格不小于4核，且**innodb_file_per_table**参数值为**ON**。"}