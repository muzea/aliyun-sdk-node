{"summary":"调用GetSqlOptimizeAdvice接口，查询DAS自动SQL优化产生的诊断建议。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"ConsoleContext","in":"query","schema":{"description":"备用参数。","type":"string","required":false,"example":"None"}},{"name":"Engine","in":"query","schema":{"description":"数据库引擎，取值：\n\n- **MySQL**：RDS MySQL。\n- **PolarDBMySQL**：PolarDB MySQL版。\n","type":"string","required":false,"example":"MySQL"}},{"name":"InstanceIds","in":"query","schema":{"description":"实例ID。\n>仅支持RDS MySQL、PolarDB MySQL版实例。","type":"string","required":false,"example":"rm-2ze1jdv45i7l6****"}},{"name":"StartDt","in":"query","schema":{"description":"查询开始日期，格式：<i>yyyyMMdd</i>（UTC时间）。\n\n- 为空时，默认为当前日期的前一天。\n- 只能查询当前日期前一天及之前的数据。","type":"string","required":false,"example":"20210916"}},{"name":"EndDt","in":"query","schema":{"description":"查询结束日期，格式：<i>yyyyMMdd</i>（UTC时间）。\n\n- 为空时，默认为当前日期的前一天。\n- 只能查询当前日期前一天及之前的数据，查询开始日期和查询结束日期的间隔不能超过30天。","type":"string","required":false,"example":"20210917"}},{"name":"Region","in":"query","schema":{"description":"实例所属地域，取值：\n\n- **cn-china**：中国内地。\n- **cn-hongkong**：中国香港。\n- **ap-southeast-1**：新加坡。\n\n此参数只有在请求参数**InstanceIds**为空时有效。如果请求参数**InstanceIds**为空时，按照**Region**参数设置的地域获取数据，系统默认实例所属地域为**cn-china**；如果请求参数**InstanceIds**不为空时，即使设置了**Region**参数，也以**InstanceIds**所传入的第一个实例所在地域为准获取数据。\n\n> 在中国内地各地域创建的实例，传入此参数时，都为**cn-china**。","type":"string","required":false,"example":"cn-china"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回Successful，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"详细信息列表，包括信息总数、错误码等。","type":"object","properties":{"Status":{"description":"任务运行状态：\n\n- **INIT**：初始化。\n- **RUNNING**：运行中。\n- **FINISH**：完成。\n- **FAILED**：失败。","type":"string","example":"FINISH"},"StatusCode":{"description":"任务状态码说明：\n\n- **NO_DATA**：没有数据。\n- **INTERNAL_ERROR**：内部错误。\n- **SUCCESS**：成功。","type":"string","example":"SUCCESS"},"DownloadUrl":{"description":"文件下载的链接。","type":"string","example":"https://das-sql-optimize.oss-cn-shanghai.aliyuncs.com/adb/oss_sql_optimize_advice/1083*******"},"CreateTime":{"description":"任务创建时间，格式为Unix时间戳，单位为毫秒。","type":"string","example":"1632303861000"},"ExpireTime":{"description":"文件过期时间，格式为Unix时间戳，单位为毫秒。\n>任务创建3天后，文件过期。","type":"string","example":"1632563061000"},"TaskId":{"description":"任务ID。","type":"string","example":"2021091710461519216****"}}},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"Status\\\": \\\"FINISH\\\",\\n    \\\"StatusCode\\\": \\\"SUCCESS\\\",\\n    \\\"DownloadUrl\\\": \\\"https://das-sql-optimize.oss-cn-shanghai.aliyuncs.com/adb/oss_sql_optimize_advice/1083*******\\\",\\n    \\\"CreateTime\\\": \\\"1632303861000\\\",\\n    \\\"ExpireTime\\\": \\\"1632563061000\\\",\\n    \\\"TaskId\\\": \\\"2021091710461519216****\\\"\\n  },\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetSqlOptimizeAdviceResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <Status>FINISH</Status>\\n        <StatusCode>SUCCESS</StatusCode>\\n        <DownloadUrl>https://das-sql-optimize.oss-cn-shanghai.aliyuncs.com/adb/oss_sql_optimize_advice/1083*******</DownloadUrl>\\n        <CreateTime>1632303861000</CreateTime>\\n        <ExpireTime>1632563061000</ExpireTime>\\n        <TaskId>2021091710461519216****</TaskId>\\n    </Data>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Success>true</Success>\\n</GetSqlOptimizeAdviceResponse>\",\"errorExample\":\"\"}]","title":"查询自动SQL优化产生的诊断建议","description":"SQL诊断功能提供实例诊断建议，您可通过诊断建议优化实例的索引，详情请参见[自动SQL优化](~~167895~~)。\n\n> 调用本接口只能查询由DAS自动SQL优化功能产生的诊断建议。\n\n使用该接口需满足以下前提条件：\n\n- 数据库引擎为RDS MySQL和PolarDB MySQL版。\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}