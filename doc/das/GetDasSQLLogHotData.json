{"summary":"调用GetDasSQLLogHotDat接口，查询数据库实例7天内DAS企业版 V2或企业版 V3的热存储数据明细。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"178715","abilityTreeNodes":["FEATUREhdmFT57I0"]},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"数据库实例ID。","type":"string","required":true,"example":"rm-2ze1jdv45i7l6****"}},{"name":"Start","in":"formData","schema":{"description":"查询开始时间，格式为Unix时间戳，单位为毫秒。\n\n> 只能查询开启DAS企业版 V2或企业版 V3后的数据，查询开始时间最大不能早于当前时间7天。","type":"integer","format":"int64","required":true,"example":"1684734297000"}},{"name":"End","in":"formData","schema":{"description":"查询结束时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询结束时间需晚于查询开始时间，且查询开始时间和查询结束时间的间隔不能超过1天。","type":"integer","format":"int64","required":true,"example":"1684820697000"}},{"name":"QueryKeyword","in":"formData","schema":{"description":"关键字。\n\n> 查询的关键字至少包含4个字符，不支持模糊查询；支持多个关键字组合查询，关键字间以空格分隔。","type":"string","required":false,"enumValueTitles":{},"example":"test"}},{"name":"AccountName","in":"formData","schema":{"description":"数据库账号。\n\n> 支持多个数据库账号组合查询，数据库账号间以空格分隔，例如：`user1 user2 user3`。","type":"string","required":false,"example":"testuser"}},{"name":"DBName","in":"formData","schema":{"description":"数据库名。\n\n> 支持多个数据库名组合查询，数据库名间以空格分隔，例如：`DB1 DB2 DB3`。","type":"string","required":false,"example":"testDB"}},{"name":"HostAddress","in":"formData","schema":{"description":"客户端IP地址。\n\n> 支持多个客户端IP地址组合查询，客户端IP地址间以空格分隔，例如：`IP1 IP2 IP3`。","type":"string","required":false,"example":"47.100.XX.XX"}},{"name":"LogicalOperator","in":"formData","schema":{"description":"多个关键字的逻辑关系。\n\n- **or**：或。\n- **and**：与。","type":"string","required":false,"example":"or"}},{"name":"MaxLatancy","in":"formData","schema":{"description":"最大执行耗时 ，单位为微秒。查询执行耗时小于该参数值的SQL语句。","type":"integer","format":"int64","required":false,"example":"100"}},{"name":"MaxScanRows","in":"formData","schema":{"description":"最大扫描行数 ，查询扫描行数小于该参数值的SQL语句。","type":"integer","format":"int64","required":false,"example":"10000"}},{"name":"MinLatancy","in":"formData","schema":{"description":"最小执行耗时 ，单位为微秒。查询执行耗时大于等于该参数值的SQL语句。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"MinScanRows","in":"formData","schema":{"description":"最小扫描行数 ，查询扫描行数大于等于该参数值的SQL语句。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"SqlType","in":"formData","schema":{"description":"SQL语句的类型。取值：\n- **SELECT**\n- **UPDATE**\n- **DELETE**","type":"string","required":false,"example":"SELECT"}},{"name":"State","in":"formData","schema":{"description":"执行结果，输入**0**时表示查询执行成功的SQL，您也可以输入具体的错误码，查询对应的SQL。","type":"string","required":false,"example":"0"}},{"name":"ThreadID","in":"formData","schema":{"description":"线程ID。\n\n> 支持多个线程ID组合查询，线程ID间以空格分隔，例如：`线程ID1 线程ID2 线程ID3`。","type":"string","required":false,"example":"657"}},{"name":"PageNumbers","in":"formData","schema":{"description":"分页查询的页码，从1开始，默认为1。","type":"integer","format":"int64","required":false,"example":"2"}},{"name":"MaxRecordsPerPage","in":"formData","schema":{"description":"分页查询每页最大记录数。取值范围：5～100。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"SortKey","in":"formData","schema":{"description":"排序依据。\n\n- **SCAN\\_ROWS**：扫描行数。\n- **UPDATE\\_ROWS**：更新行数。\n- **CONSUME**：耗时。\n- **ORIGIN\\_TIME**：执行时间。","type":"string","required":false,"example":"SCAN_ROWS"}},{"name":"SortMethod","in":"formData","schema":{"description":"排序方式。\n- **ase**：正序。\n- **desc**：倒序。","type":"string","required":false,"example":"ase"}},{"name":"ChildDBInstanceIDs","in":"formData","schema":{"description":"节点ID。\n\n> 对于PolarDB MySQL版实例，需要提供节点ID。","type":"string","required":false,"example":"pi-bp179lg03445l****"}},{"name":"Role","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"string","required":false,"example":"None"}},{"name":"TraceId","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"string","required":false,"example":"None"}},{"name":"MinRows","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"integer","format":"int64","required":false,"example":"None"}},{"name":"MaxRows","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"integer","format":"int64","required":false,"example":"None"}},{"name":"MinSpillCnt","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"integer","format":"int64","required":false,"example":"None"}},{"name":"MaxSpillCnt","in":"formData","schema":{"description":"预留参数，暂不支持。","type":"integer","format":"int64","required":false,"example":"None"}},{"name":"TransactionId","in":"formData","schema":{"description":"事务ID。","type":"string","required":false,"example":"0"}},{"name":"Fail","in":"formData","schema":{"description":"SQL执行错误码，您可以调用[GetAsyncErrorRequestStatByCode](~~409804~~)获取错误码。","type":"string","required":false,"example":"1064"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID，阿里云为该请求生成的标识符。","type":"string","example":"0A74B755-98B7-59DB-8724-1321B394****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"},"Data":{"title":"ListResult<Map<String, Object>>","description":"返回数据。","type":"object","properties":{"List":{"description":"返回信息列表。","type":"array","items":{"description":"返回SQL洞察和审计数据。","type":"object","properties":{"Latancy":{"description":"执行耗时，单位微秒。","type":"integer","format":"int64","example":"10000"},"Ext":{"description":"扩展信息字段，备用参数。","type":"string","example":"None"},"ExecuteTime":{"description":"执行时间，格式为UTC时间：`yyyy-MM-ddTHH:mm:ssZ`。","type":"string","example":"2023-05-23 T12:11:20Z"},"OriginTime":{"description":"执行时间，格式为UTC时间：`yyyy-MM-ddTHH:mm:ss.SSSZ`。","type":"string","example":"2023-05-23 T12:11:20.999Z"},"HostAddress":{"description":"客户端IP地址。","type":"string","example":"47.100.XX.XX"},"UpdateRows":{"description":"更新行数。","type":"integer","format":"int64","example":"30"},"LogicRead":{"description":"逻辑读。","type":"integer","format":"int64","example":"12"},"SQLText":{"description":"SQL语句详情。","type":"string","example":"select 1"},"LockTime":{"description":"锁等待时间，单位微秒。","type":"integer","format":"int64","example":"1"},"ScanRows":{"description":"扫描行数。","type":"integer","format":"int64","example":"29"},"ThreadID":{"description":"线程ID。","type":"integer","format":"int64","example":"657"},"State":{"description":"状态。返回**0**时表示执行成功，否则返回错误码。","type":"string","example":"0"},"DBName":{"description":"数据库名称。","type":"string","example":"testDB"},"SqlType":{"description":"SQL的类型。取值：\n- **SELECT**\n- **UPDATE**\n- **DELETE**","type":"string","example":"SELECT"},"AccountName":{"description":"数据库账号。","type":"string","example":"testuser"},"PhysicSyncRead":{"description":"物理同步读。","type":"integer","format":"int64","example":"0"},"PhysicAsyncRead":{"description":"物理异步读。","type":"integer","format":"int64","example":"0"},"TransactionId":{"description":"开启的事务ID。","type":"string","example":"0"},"ReturnRows":{"description":"返回行数。","type":"integer","format":"int64","example":"1"}}}},"Total":{"description":"返回总记录数。","type":"integer","format":"int64","example":"20"},"PageNo":{"description":"分页页码。","type":"integer","format":"int64","example":"2"},"PageSize":{"description":"每页数量。","type":"integer","format":"int64","example":"10"},"Extra":{"description":"备用参数。","type":"any","example":"None"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"0A74B755-98B7-59DB-8724-1321B394****\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"Data\\\": {\\n    \\\"List\\\": [\\n      {\\n        \\\"Latancy\\\": 10000,\\n        \\\"Ext\\\": \\\"None\\\",\\n        \\\"ExecuteTime\\\": \\\"2023-05-23 T12:11:20Z\\\",\\n        \\\"OriginTime\\\": \\\"2023-05-23 T12:11:20.999Z\\\",\\n        \\\"HostAddress\\\": \\\"47.100.XX.XX\\\",\\n        \\\"UpdateRows\\\": 30,\\n        \\\"LogicRead\\\": 12,\\n        \\\"SQLText\\\": \\\"select 1\\\",\\n        \\\"LockTime\\\": 1,\\n        \\\"ScanRows\\\": 29,\\n        \\\"ThreadID\\\": 657,\\n        \\\"State\\\": \\\"0\\\",\\n        \\\"DBName\\\": \\\"testDB\\\",\\n        \\\"SqlType\\\": \\\"SELECT\\\",\\n        \\\"AccountName\\\": \\\"testuser\\\",\\n        \\\"PhysicSyncRead\\\": 0,\\n        \\\"PhysicAsyncRead\\\": 0,\\n        \\\"TransactionId\\\": \\\"0\\\",\\n        \\\"ReturnRows\\\": 1\\n      }\\n    ],\\n    \\\"Total\\\": 20,\\n    \\\"PageNo\\\": 2,\\n    \\\"PageSize\\\": 10,\\n    \\\"Extra\\\": \\\"None\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetDasSQLLogHotDataResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <RequestId>0A74B755-98B7-59DB-8724-1321B394****</RequestId>\\n    <Success>true</Success>\\n    <Data>\\n        <List>\\n            <Latancy>10000</Latancy>\\n            <Ext>None</Ext>\\n            <ExecuteTime>2023-05-23 T12:11:20Z</ExecuteTime>\\n            <OriginTime>2023-05-23 T12:11:20.999Z</OriginTime>\\n            <HostAddress>47.100.XX.XX</HostAddress>\\n            <UpdateRows>30</UpdateRows>\\n            <LogicRead>12</LogicRead>\\n            <SQLText>select 1</SQLText>\\n            <LockTime>1</LockTime>\\n            <ScanRows>29</ScanRows>\\n            <ThreadID>657</ThreadID>\\n            <State>0</State>\\n            <DBName>testDB</DBName>\\n            <SqlType>SELECT</SqlType>\\n            <AccountName>testuser</AccountName>\\n            <PhysicSyncRead>0</PhysicSyncRead>\\n            <PhysicAsyncRead>0</PhysicAsyncRead>\\n            <TransactionId>0</TransactionId>\\n            <ReturnRows>1</ReturnRows>\\n        </List>\\n        <Total>20</Total>\\n        <PageNo>2</PageNo>\\n        <PageSize>10</PageSize>\\n        <Extra>None</Extra>\\n    </Data>\\n</GetDasSQLLogHotDataResponse>\",\"errorExample\":\"\"}]","title":"查询DAS企业版（V2或V3）热存储数据明细","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 目标数据库实例为上海地域的RDS MySQL或PolarDB MySQL版。\n\n> 只能查询开启DAS企业版 V2或企业版 V3后的数据，查询开始时间最大不能早于当前时间7天，且查询开始时间和查询结束时间的间隔不能超过1天。"}