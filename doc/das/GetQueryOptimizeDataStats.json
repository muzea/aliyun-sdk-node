{"summary":"调用GetQueryOptimizeDataStats接口，获取查询治理模板数据。","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"Engine","in":"query","schema":{"description":"数据库引擎，取值：\n\n- **MySQL**\n- **PolarDBMySQL**\n- **PostgreSQL**","type":"string","required":true,"example":"MySQL"}},{"name":"InstanceIds","in":"query","schema":{"description":"实例ID，多个实例ID用逗号分隔。","type":"string","required":false,"example":"rm-2ze8g2am97624****"}},{"name":"TagNames","in":"query","schema":{"description":"备用参数。","type":"string","required":false,"example":"None"}},{"name":"Keywords","in":"query","schema":{"description":"SQL文本关键词，多个关键词以空格分隔。","type":"string","required":false,"example":"select update"}},{"name":"LogicalOperator","in":"query","schema":{"description":"多个SQL文本关键词的逻辑关系。\n\n- **or**：或。\n- **and**：与。","type":"string","required":false,"example":"or"}},{"name":"Rules","in":"query","schema":{"description":"需要过滤的规则，多个规则以逗号分隔。具体信息请参见[查询治理](~~290038~~)。","type":"string","required":false,"example":"DAS_NOT_IMPORTANT"}},{"name":"DbNames","in":"query","schema":{"description":"需要查询的数据库名。","type":"string","required":false,"example":"testdb01"}},{"name":"Time","in":"query","schema":{"description":"查询数据的日期，格式为Unix时间戳，单位为毫秒。","type":"string","required":true,"example":"1642953600000"}},{"name":"PageSize","in":"query","schema":{"description":"分页查询每页最大记录数，默认为10。","type":"string","required":false,"example":"10"}},{"name":"PageNo","in":"query","schema":{"description":"分页查询的页码，从1开始，默认为1。","type":"string","required":false,"example":"1"}},{"name":"OrderBy","in":"query","schema":{"description":"排序字段，默认为**count**。\n\n- **count**：执行次数。\n- **maxQueryTime**：最大执行时间。\n- **avgQueryTime**：平均执行时间。\n- **maxLockTime**：最大锁等待时间。\n- **avgLockTime**：平均锁等待时间。\n- **maxRowsExamined**：最大扫描行数。\n- **avgRowsExamined**：平均扫描行数。\n- **maxRowsSent**：最大返回行数。\n- **avgRowsSent**：平均返回行数。","type":"string","required":false,"example":"count"}},{"name":"Asc","in":"query","schema":{"description":"是否升序排序，默认为**true**。\n\n- **true**：是。\n- **false**：否。","type":"string","required":false,"example":"true"}},{"name":"OnlyOptimizedSql","in":"query","schema":{"description":"是否只查询待优化的SQL，默认为**false**。\n\n- **true**：是。\n- **false**：否。","type":"string","required":false,"example":"false"}},{"name":"SqlIds","in":"query","schema":{"description":"SQL模板ID，您可调用[GetQueryOptimizeExecErrorStats](~~405235~~)接口查询SQL模板ID。","type":"string","required":false,"example":"2e8147b5ca2dfc640dfd5e43d96a****"}},{"name":"Region","in":"query","schema":{"description":"实例所属地域，取值：\n\n- **cn-china**：中国内地。\n- **cn-hongkong**：中国香港。\n- **ap-southeast-1**：新加坡。\n\n此参数只有在请求参数**InstanceIds**为空时有效。如果请求参数**InstanceIds**为空时，按照**Region**参数设置的地域获取数据，系统默认实例所属地域为**cn-china**；如果请求参数**InstanceIds**不为空时，即使设置了**Region**参数，也以**InstanceIds**所传入的第一个实例所在地域为准获取数据。\n\n> 在中国内地各地域创建的实例，传入此参数时，都为**cn-china**。","type":"string","required":false,"example":"cn-china"}},{"name":"User","in":"query","schema":{"description":"需要查询的数据库账号。","type":"string","required":false,"example":"testUser"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。","type":"string","example":"Successful"},"Data":{"description":"详细信息列表。","type":"object","properties":{"Total":{"description":"总数据量。","type":"integer","format":"int64","example":"10"},"PageNo":{"description":"备用参数。","type":"integer","format":"int32","example":"None"},"PageSize":{"description":"备用参数。","type":"integer","format":"int32","example":"None"},"Extra":{"description":"备用参数。","type":"string","example":"None"},"List":{"description":"模板数据列表。","type":"array","items":{"description":"模板数据列表。","type":"object","properties":{"InstanceId":{"description":"实例ID。","type":"string","example":"rm-2ze8g2am97624****"},"Dbname":{"description":"SQL所属数据库名。","type":"string","example":"testdb01"},"SqlId":{"description":"SQL模板ID。","type":"string","example":"2e8147b5ca2dfc640dfd5e43d96a****"},"SqlType":{"description":"SQL类别。","type":"string","example":"INSERT"},"Psql":{"description":"SQL模板。","type":"string","example":"select 1"},"SqlSample":{"description":"SQL模板下执行最慢的SQL样本。","type":"string","example":"select 2"},"Count":{"description":"SQL执行次数。","type":"integer","format":"int32","example":"100"},"MaxQueryTime":{"description":"最大查询时间，单位为秒。","type":"number","format":"double","example":"1.1"},"AvgQueryTime":{"description":"平均查询时间，单位为秒。","type":"number","format":"double","example":"1.1"},"MaxLockTime":{"description":"最大锁等待时间，单位为秒。","type":"number","format":"double","example":"0.1"},"AvgLockTime":{"description":"平均锁等待时间，单位为秒。","type":"number","format":"double","example":"0.1"},"MaxRowsExamined":{"description":"最大扫描行数。","type":"integer","format":"int64","example":"100000"},"AvgRowsExamined":{"description":"平均扫描行数。","type":"number","format":"double","example":"100.1"},"MaxRowsSent":{"description":"最大返回行数。","type":"integer","format":"int64","example":"10000"},"AvgRowsSent":{"description":"平均返回行数。","type":"number","format":"double","example":"100.1"},"MaxRowsAffected":{"description":"最大影响行数。\n\n> 取值为-1说明暂未采集到该字段。","type":"integer","format":"int64","example":"10000"},"AvgRowsAffected":{"description":"平均影响行数。\n\n> 取值为-1说明暂未采集到该字段。","type":"number","format":"double","example":"100.1"},"RuleList":{"description":"规则列表。","type":"array","items":{"type":"object","properties":{"Name":{"description":"规则名，具体信息请参见[查询治理](~~290038~~)。","type":"string","example":"DAS_NOT_IMPORTANT"},"Type":{"description":"规则类别：\n\n- **Predefined**：系统预定义。\n- **UserDefined**：用户自定义。","type":"string","example":"Predefined"}}}},"User":{"description":"数据库账号。","type":"string","example":"testUser"}}}}}},"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"Total\\\": 10,\\n    \\\"PageNo\\\": 0,\\n    \\\"PageSize\\\": 0,\\n    \\\"Extra\\\": \\\"None\\\",\\n    \\\"List\\\": [\\n      {\\n        \\\"InstanceId\\\": \\\"rm-2ze8g2am97624****\\\",\\n        \\\"Dbname\\\": \\\"testdb01\\\",\\n        \\\"SqlId\\\": \\\"2e8147b5ca2dfc640dfd5e43d96a****\\\",\\n        \\\"SqlType\\\": \\\"INSERT\\\",\\n        \\\"Psql\\\": \\\"select 1\\\",\\n        \\\"SqlSample\\\": \\\"select 2\\\",\\n        \\\"Count\\\": 100,\\n        \\\"MaxQueryTime\\\": 1.1,\\n        \\\"AvgQueryTime\\\": 1.1,\\n        \\\"MaxLockTime\\\": 0.1,\\n        \\\"AvgLockTime\\\": 0.1,\\n        \\\"MaxRowsExamined\\\": 100000,\\n        \\\"AvgRowsExamined\\\": 100.1,\\n        \\\"MaxRowsSent\\\": 10000,\\n        \\\"AvgRowsSent\\\": 100.1,\\n        \\\"MaxRowsAffected\\\": 10000,\\n        \\\"AvgRowsAffected\\\": 100.1,\\n        \\\"RuleList\\\": [\\n          {\\n            \\\"Name\\\": \\\"DAS_NOT_IMPORTANT\\\",\\n            \\\"Type\\\": \\\"Predefined\\\"\\n          }\\n        ],\\n        \\\"User\\\": \\\"testUser\\\"\\n      }\\n    ]\\n  },\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetQueryOptimizeDataStatsResponse>\\n    <Code>200</Code>\\n    <Message>Successful</Message>\\n    <Data>\\n        <Total>10</Total>\\n        <Extra>None</Extra>\\n        <List>\\n            <InstanceId>rm-2ze8g2am97624****</InstanceId>\\n            <Dbname>testdb01</Dbname>\\n            <SqlId>2e8147b5ca2dfc640dfd5e43d96a****</SqlId>\\n            <SqlType>INSERT</SqlType>\\n            <Psql>select 1</Psql>\\n            <SqlSample>select 2</SqlSample>\\n            <Count>100</Count>\\n            <MaxQueryTime>1.1</MaxQueryTime>\\n            <AvgQueryTime>1.1</AvgQueryTime>\\n            <MaxLockTime>0.1</MaxLockTime>\\n            <AvgLockTime>0.1</AvgLockTime>\\n            <MaxRowsExamined>100000</MaxRowsExamined>\\n            <AvgRowsExamined>100.1</AvgRowsExamined>\\n            <MaxRowsSent>10000</MaxRowsSent>\\n            <AvgRowsSent>100.1</AvgRowsSent>\\n            <MaxRowsAffected>10000</MaxRowsAffected>\\n            <AvgRowsAffected>100.1</AvgRowsAffected>\\n            <RuleList>\\n                <Name>DAS_NOT_IMPORTANT</Name>\\n                <Type>Predefined</Type>\\n            </RuleList>\\n        </List>\\n    </Data>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Success>true</Success>\\n</GetQueryOptimizeDataStatsResponse>\",\"errorExample\":\"\"}]","title":"获取查询治理模板数据","description":"- 在使用阿里云SDK时，需要保证aliyun-sdk-core的版本大于2.1.8，建议使用最新版本。\n- 使用DAS的SDK的版本为2.1.8或以上。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 本接口适用的数据库引擎为：\n    - RDS MySQL\n    - PolarDB MySQL版\n    - RDS PostgreSQL"}