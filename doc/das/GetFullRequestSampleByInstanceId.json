{"methods":["post"],"schemes":["https","http"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"UserId","in":"formData","schema":{"description":"用户ID，即创建数据库实例的阿里云主账号ID。\n\n> 非必填，输入目标数据库实例ID后，在调用API接口时，系统会自动获取用户ID。","type":"string","required":false,"example":"196278346919****"}},{"name":"InstanceId","in":"formData","schema":{"description":"实例ID。\n\n","type":"string","required":true,"example":"rm-2ze8g2am97624****"}},{"name":"SqlId","in":"formData","schema":{"description":"SQL ID。","type":"string","required":true,"example":"651b56fe9418d48edb8fdf0980ec****"}},{"name":"Start","in":"formData","schema":{"description":"查询开始时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询开始时间需要在数据库实例SQL洞察存储时长范围内，最大不能早于当前时间90天。","type":"integer","format":"int64","required":true,"example":"1660097421000"}},{"name":"End","in":"formData","schema":{"description":"查询结束时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询结束时间需晚于查询开始时间，且查询开始时间和查询结束时间的间隔不能小于1小时。","type":"integer","format":"int64","required":true,"example":"1660104621000"}},{"name":"Role","in":"query","schema":{"description":"PolarDB-X 2.0数据库实例节点信息。\n\n- **polarx_cn**：计算节点。\n- **polarx_en**：数据节点。","type":"string","required":false,"example":"polarx_cn"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"请求返回消息。\n\n> 请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。\n\n","type":"string","example":"0A74B755-98B7-59DB-8724-1321B394****"},"Data":{"description":"返回数据","type":"array","items":{"type":"object","properties":{"Timestamp":{"description":"执行SQL的时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1660100753556"},"SqlId":{"description":"SQL ID。","type":"string","example":"651b56fe9418d48edb8fdf0980ec****"},"Sql":{"description":"SQL样本。","type":"string","example":"select * from testdb01 where ****"},"Database":{"description":"数据库名。","type":"string","example":"dbtest"},"Rt":{"description":"执行耗时，单位为秒。","type":"number","format":"double","example":"0.409789"},"User":{"description":"执行SQL的用户名称。","type":"string","example":"testuser"},"LockWaitTime":{"description":"锁等待时长，单位为秒。","type":"number","format":"double","example":"0.0137"},"LogicalRead":{"description":"逻辑读。","type":"number","format":"double","example":"165848"},"PhysicalSyncRead":{"description":"物理同步读取。","type":"number","format":"double","example":"0"},"PhysicalAsyncRead":{"description":"物理异步读取。","type":"number","format":"double","example":"0"},"RowsExamined":{"title":"扫描行数","description":"总扫描行数。\n> 目前支持该字段的数据库：RDS MySQL、RDS PostgreSQL、PolarDB MySQL版。","type":"integer","format":"int64","example":"2048576"},"RowsReturned":{"description":"返回行数。","type":"integer","format":"int64","example":"14"},"OriginHost":{"description":"访问来源。","type":"string","example":"172.17.XX.XX"},"ScanRows":{"title":"扫描行数, RDS MySQL DescribeTemplateSqlDetail","description":"扫描行数。","type":"integer","format":"int64","example":"0"},"UpdateRows":{"title":"更新行数, RDS MySQL DescribeTemplateSqlDetail","description":"更新行数。","type":"integer","format":"int64","example":"0"},"SqlType":{"description":"SQL语句的类型，取值包括：**SELECT**、**INSERT**、**UPDATE**、**DELETE**、**LOGIN**、**LOGOUT**、**MERGE**、**ALTER**、**CREATEINDEX**、**DROPINDEX**、**CREATE**、**DROP**、**SET**、**DESC**、**REPLACE**、**CALL**、**BEGIN**、**DESCRIBE**、**ROLLBACK**、**FLUSH**、**USE**、**SHOW**、**START**、**COMMIT**和**RENAME**。","type":"string","example":"SELECT"},"Scnt":{"title":"polarx cn节点，dn请求总数","description":"PolarDB-X 2.0计算节点（CN）的DN请求数。","type":"integer","format":"int64","example":"0"},"Rows":{"title":"polarx cn节点,总更新/返回行数","description":"PolarDB-X 2.0计算节点（CN）的更新/返回行数。","type":"integer","format":"int64","example":"0"},"Frows":{"title":"polarx cn节点,拉取行数","description":"PolarDB-X 2.0计算节点（CN）的拉取行数。","type":"integer","format":"int64","example":"0"}}}},"Code":{"description":"返回的状态码。\n","type":"integer","format":"int64","example":"200"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"0A74B755-98B7-59DB-8724-1321B394****\\\",\\n  \\\"Data\\\": [\\n    {\\n      \\\"Timestamp\\\": 1660100753556,\\n      \\\"SqlId\\\": \\\"651b56fe9418d48edb8fdf0980ec****\\\",\\n      \\\"Sql\\\": \\\"select * from testdb01 where ****\\\",\\n      \\\"Database\\\": \\\"dbtest\\\",\\n      \\\"Rt\\\": 0.409789,\\n      \\\"User\\\": \\\"testuser\\\",\\n      \\\"LockWaitTime\\\": 0.0137,\\n      \\\"LogicalRead\\\": 165848,\\n      \\\"PhysicalSyncRead\\\": 0,\\n      \\\"PhysicalAsyncRead\\\": 0,\\n      \\\"RowsExamined\\\": 2048576,\\n      \\\"RowsReturned\\\": 14,\\n      \\\"OriginHost\\\": \\\"172.17.XX.XX\\\",\\n      \\\"ScanRows\\\": 0,\\n      \\\"UpdateRows\\\": 0,\\n      \\\"SqlType\\\": \\\"SELECT\\\",\\n      \\\"Scnt\\\": 0,\\n      \\\"Rows\\\": 0,\\n      \\\"Frows\\\": 0\\n    }\\n  ],\\n  \\\"Code\\\": 200,\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetFullRequestSampleByInstanceIdResponse>\\n    <Message>Successful</Message>\\n    <RequestId>0A74B755-98B7-59DB-8724-1321B394****</RequestId>\\n    <Data>\\n        <Timestamp>1660100753556</Timestamp>\\n        <SqlId>651b56fe9418d48edb8fdf0980ec****</SqlId>\\n        <Sql>select * from testdb01 where ****</Sql>\\n        <Database>dbtest</Database>\\n        <Rt>0.409789</Rt>\\n        <User>testuser</User>\\n        <LockWaitTime>0.0137</LockWaitTime>\\n        <LogicalRead>165848</LogicalRead>\\n        <PhysicalSyncRead>0</PhysicalSyncRead>\\n        <PhysicalAsyncRead>0</PhysicalAsyncRead>\\n        <RowsExamined>2048576</RowsExamined>\\n        <RowsReturned>14</RowsReturned>\\n        <OriginHost>172.17.XX.XX</OriginHost>\\n        <ScanRows>0</ScanRows>\\n        <UpdateRows>0</UpdateRows>\\n        <SqlType>SELECT</SqlType>\\n        <Scnt>0</Scnt>\\n        <Rows>0</Rows>\\n        <Frows>0</Frows>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</GetFullRequestSampleByInstanceIdResponse>\",\"errorExample\":\"\"}]","title":"按照SQL ID查询SQL样本数据","summary":"调用GetFullRequestSampleByInstanceId接口，按照SQL ID查询数据库实例SQL洞察结果中的SQL样本数据，最大返回20条样本数据。","description":"SQL洞察功能可对SQL进行健康情况诊断、性能问题排查，详情请参见[SQL洞察](~~204096~~)。\n\n- 支持的数据库引擎请参见[SQL洞察](~~204096~~)。\n- 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}