{"summary":"调用GetDeadLockDetailList接口，查询RDS SQL Server实例的死锁详情列表。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"list"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"数据库实例ID。","type":"string","required":true,"example":"rm-2ze2016723b32****"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，格式为Unix时间戳，单位为毫秒。","type":"string","required":true,"example":"1701755730292"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，格式为Unix时间戳，单位为毫秒。","type":"string","required":true,"example":"1702360530292"}},{"name":"PageNo","in":"query","schema":{"description":"页码，取值大于0且不超过Integer数据类型的最大值，默认值为1。","type":"string","required":false,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页最大记录数，默认值为10。","type":"string","required":false,"example":"5"}},{"name":"DbNameList","in":"query","schema":{"description":"数据库名。传入多个数据库时，各个数据库名称间使用英文逗号（,）进行分隔。","type":"string","required":false,"example":"testdb1,testdb2\n"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"返回的数据。","type":"object","properties":{"List":{"description":"详细信息列表。","type":"array","items":{"description":"返回信息列表。","type":"object","properties":{"BatchId":{"description":"采集的时间，格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1702301170701"},"BlockProcessList":{"description":"阻塞列表。即主动造成锁定的会话信息。","type":"array","items":{"type":"object","properties":{"ClientApp":{"description":"当前事务所使用的客户端名称。","type":"string","example":"Microsoft SQL Server Management Studio - Query"},"HostName":{"description":"主机名。","type":"string","example":"sd7402****"},"LastTranStarted":{"description":"事务开启的时间。格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1702301152000"},"LockMode":{"description":"锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"U"},"LogUsed":{"description":"会话已经生成的日志大小。单位：字节（Byte）。","type":"integer","format":"int64","example":"352"},"LoginName":{"description":"用户登录名。","type":"string","example":"sd7402****\\\\Administrator"},"ObjectOwned":{"description":"已经被锁住的对象。","type":"string","example":"testdb1.dbo.test2"},"ObjectRequested":{"description":"当前事务请求加锁的对象。","type":"string","example":"testdb1.dbo.test1"},"OwnMode":{"description":"会话当前持有的锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"X"},"Spid":{"description":"开启事务的会话ID。","type":"integer","format":"int64","example":"61"},"SqlText":{"description":"SQL语句详情。","type":"string","example":"update test1 set col1 =9"},"Status":{"description":"当前事务的状态。","type":"string","example":"suspended"},"Victim":{"description":"是否是死锁的受害者：\n\n- **0**：不是。\n- **1**：是。","type":"integer","format":"int64","example":"0"},"WaitMode":{"description":"会话当前正在等待的锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"U"},"WaitResource":{"description":"当前事务等待中的资源。","type":"string","example":"RID: 5:1:312:0"},"WaitResourceDescription":{"description":"当前事务等待中的资源详情。","type":"string","example":"RID:school:school.mdf:312:0"},"DatabaseName":{"description":"数据库名称。","type":"string","example":"testdb1"}}}},"ClientApp":{"description":"客户端名称。","type":"string","example":"Microsoft SQL Server Management Studio - Query"},"HostName":{"description":"主机名。","type":"string","example":"sd7402****"},"LastTranStarted":{"description":"事务开启的时间。格式为Unix时间戳，单位为毫秒。","type":"integer","format":"int64","example":"1702301141000"},"LockMode":{"description":"锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"U"},"LogUsed":{"description":"会话已经生成的日志大小。单位：字节（Byte）。","type":"integer","format":"int64","example":"352"},"LoginName":{"description":"用户登录名。","type":"string","example":"sd7402****\\\\Administrator"},"ObjectRequested":{"description":"当前事务请求加锁的对象。","type":"string","example":"testdb1.dbo.test2"},"ObjectOwned":{"description":"已经被锁住的对象。","type":"string","example":"testdb1.dbo.test1"},"OwnMode":{"description":"会话当前持有的锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"X"},"Spid":{"description":"开启事务的会话ID。","type":"integer","format":"int64","example":"56"},"SqlText":{"description":"SQL语句详情。","type":"string","example":"update test2 set col1 =88"},"Status":{"description":"当前事务的状态。","type":"string","example":"suspended"},"Victim":{"description":"是否是死锁的受害者：\n\n- **0**：不是。\n- **1**：是。","type":"integer","format":"int64","example":"1\n"},"WaitMode":{"description":"会话当前正在等待的锁模式。更多信息，请参见[锁模式](~~2362804~~)。","type":"string","example":"U"},"WaitResource":{"description":"当前事务等待中的资源。","type":"string","example":"RID: 5:1:376:0"},"WaitResourceDescription":{"description":"当前事务等待中的资源详情。","type":"string","example":"RID:school:school.mdf:376:0"},"DatabaseName":{"description":"数据库的名称。","type":"string","example":"testdb1"}}}},"PageNo":{"description":"当前页码。","type":"integer","format":"int64","example":"1"},"PageSize":{"description":"每页记录数。","type":"integer","format":"int64","example":"10"},"Total":{"description":"返回总记录数。","type":"integer","format":"int64","example":"2"}}},"RequestId":{"description":"请求ID。\n\n","type":"string","example":"840F51F7-9C01-538D-94F6-AE712905****"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"List\\\": [\\n      {\\n        \\\"BatchId\\\": 1702301170701,\\n        \\\"BlockProcessList\\\": [\\n          {\\n            \\\"ClientApp\\\": \\\"Microsoft SQL Server Management Studio - Query\\\",\\n            \\\"HostName\\\": \\\"sd7402****\\\",\\n            \\\"LastTranStarted\\\": 1702301152000,\\n            \\\"LockMode\\\": \\\"U\\\",\\n            \\\"LogUsed\\\": 352,\\n            \\\"LoginName\\\": \\\"sd7402****\\\\\\\\\\\\\\\\Administrator\\\",\\n            \\\"ObjectOwned\\\": \\\"testdb1.dbo.test2\\\",\\n            \\\"ObjectRequested\\\": \\\"testdb1.dbo.test1\\\",\\n            \\\"OwnMode\\\": \\\"X\\\",\\n            \\\"Spid\\\": 61,\\n            \\\"SqlText\\\": \\\"update test1 set col1 =9\\\",\\n            \\\"Status\\\": \\\"suspended\\\",\\n            \\\"Victim\\\": 0,\\n            \\\"WaitMode\\\": \\\"U\\\",\\n            \\\"WaitResource\\\": \\\"RID: 5:1:312:0\\\",\\n            \\\"WaitResourceDescription\\\": \\\"RID:school:school.mdf:312:0\\\",\\n            \\\"DatabaseName\\\": \\\"testdb1\\\"\\n          }\\n        ],\\n        \\\"ClientApp\\\": \\\"Microsoft SQL Server Management Studio - Query\\\",\\n        \\\"HostName\\\": \\\"sd7402****\\\",\\n        \\\"LastTranStarted\\\": 1702301141000,\\n        \\\"LockMode\\\": \\\"U\\\",\\n        \\\"LogUsed\\\": 352,\\n        \\\"LoginName\\\": \\\"sd7402****\\\\\\\\\\\\\\\\Administrator\\\",\\n        \\\"ObjectRequested\\\": \\\"testdb1.dbo.test2\\\",\\n        \\\"ObjectOwned\\\": \\\"testdb1.dbo.test1\\\",\\n        \\\"OwnMode\\\": \\\"X\\\",\\n        \\\"Spid\\\": 56,\\n        \\\"SqlText\\\": \\\"update test2 set col1 =88\\\",\\n        \\\"Status\\\": \\\"suspended\\\",\\n        \\\"Victim\\\": 1,\\n        \\\"WaitMode\\\": \\\"U\\\",\\n        \\\"WaitResource\\\": \\\"RID: 5:1:376:0\\\",\\n        \\\"WaitResourceDescription\\\": \\\"RID:school:school.mdf:376:0\\\",\\n        \\\"DatabaseName\\\": \\\"testdb1\\\"\\n      }\\n    ],\\n    \\\"PageNo\\\": 1,\\n    \\\"PageSize\\\": 10,\\n    \\\"Total\\\": 2\\n  },\\n  \\\"RequestId\\\": \\\"840F51F7-9C01-538D-94F6-AE712905****\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"type\":\"json\"}]","title":"查询RDS SQL Server实例的死锁列表","description":"* 本接口仅适用于RDS SQL Server版实例。\n* 使用阿里云或DAS的SDK时，建议使用最新版本。\n* 在使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。"}