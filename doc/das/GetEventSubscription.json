{"summary":"调用GetEventSubscription接口，获取数据库实例的事件订阅设置。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"query","schema":{"title":"实例ID。","description":"实例ID。","type":"string","required":true,"example":"rm-2ze8g2am97624****\n"}}],"responses":{"200":{"headers":{},"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B6D17591-B48B-4D31-9CD6-9B9796B2****"},"Message":{"description":"请求返回消息。\n>请求成功时该参数返回**Successful**，请求失败时会返回请求异常信息（如错误码等）。","type":"string","example":"Successful"},"Data":{"description":"详细信息列表。","type":"object","properties":{"userId":{"title":"用户ID。","description":"用户ID。","type":"string","example":"1088760496****"},"instanceId":{"title":"实例ID。","description":"实例ID。","type":"string","example":"rm-2ze8g2am97624****"},"eventContext":{"title":"事件场景。","description":"支持的事件场景，当前仅支持**AllContext**，表示支持所有场景。","type":"string","example":"AllContext"},"lang":{"title":"语言","description":"事件通知的语言，当前仅支持**zh-CN**，表示事件通知为中文。","type":"string","example":"zh_CN"},"active":{"title":"是否开启。","description":"是否启用事件订阅：\n\n- **0**：关闭。\n- **1**：开启。","type":"integer","format":"int32","example":"1"},"minInterval":{"title":"通知最小间隔。","description":"通知最小间隔时间，单位秒（s）。","type":"string","example":"60"},"contactName":{"title":"告警订阅人。","description":"告警事件订阅人名称，多个名称间以英文逗号分隔。","type":"string","example":"默认联系人"},"contactGroupName":{"title":"告警订阅组","description":"告警事件订阅组名称，多个名称间以英文逗号分隔。","type":"string","example":"默认联系组"},"channelType":{"title":"通知方式。","description":"通知方式：\n\n- **hdm\\_alarm\\_sms**：手机短信。\n- **dingtalk**：钉钉机器人。\n- **hdm\\_alarm\\_sms\\_and\\_email**：手机短信+邮件。\n- **hdm\\_alarm\\_sms,dingtalk**：手机短信+钉钉机器人。","type":"string","example":"hdm_alarm_sms,dingtalk"},"level":{"title":"事件风险级别。","description":"事件风险级别，即触发哪种级别的事件后需要通知您：\n\n- **Notice**：通知。\n- **Optimization**：优化。\n- **Warn**：警告。\n- **Critical**：严重。","type":"string","example":"Optimization"},"contacts":{"title":"告警联系人信息。","description":"告警联系人列表。","type":"array","items":{"type":"object","properties":{"name":{"title":"告警联系人名称。","description":"告警联系人名称。","type":"string","example":"张先生"},"phone":{"title":"告警联系人电话","description":"告警联系人电话。","type":"string","example":"1390000****"},"email":{"title":"告警联系人邮箱。","description":"告警联系人邮箱。","type":"string","example":"a***@example.net"},"dingtalkHook":{"title":"告警联系人钉钉机器人webhook。","description":"钉钉机器人的Webhook地址。","type":"string","example":"https://oapi.dingtalk.com/robot/send?access_token=68fa29a9eaf3ba9994f54fxxxc1aa9879700308f90e9c23ebfb3663642c9****"},"groups":{"title":"告警联系人所属联系组列表。","description":"告警联系人所属的联系组列表。","type":"array","items":{"description":"告警联系人名称。","type":"string","example":"张先生"}},"isCmsReduplicated":{"title":"是否和云监控上的联系人重名。","description":"是否和云监控上的联系人姓名相同。\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"userId":{"title":"用户ID。","description":"用户ID。","type":"string","example":"1088760496****"}}}},"contactGroups":{"description":"告警联系组列表。","type":"array","items":{"type":"object","properties":{"name":{"title":"告警联系人组姓名。","description":"告警联系组名称。","type":"string","example":"张先生"},"description":{"title":"告警联系人组描述。","description":"告警联系组描述。","type":"string","example":"默认联系人"},"contacts":{"title":"告警联系人组内成员。","description":"告警联系组成员列表。","type":"string","example":"\"[\\\"张先生\\\",\\\"王女士\\\",\\\"李先生\\\"]\""},"userId":{"title":"用户ID。","description":"用户ID。","type":"string","example":"1088760496****"}}}},"eventSendGroup":{"title":"对应事件订阅的场景。","description":"支持发送的事件场景列表。","type":"array","items":{"description":"支持发送的事件场景，当前仅支持**AllContext**，表示支持所有场景。","type":"string","example":"AllContext"}},"id":{"title":"订阅关系序号。","description":"数据库主键ID。","type":"integer","format":"int64","example":"1"},"gmtCreate":{"title":"创建时间。","description":"开启事件订阅的时间，格式为Unix时间戳，单位为毫秒（ms）。","type":"integer","format":"int64","example":"1633071840000"},"gmtModified":{"title":"最后修改时间。","description":"最后修改事件订阅设置的时间，格式为Unix时间戳，单位为毫秒（ms）。","type":"integer","format":"int64","example":"1633071850000"}}},"Code":{"description":"返回的状态码。","type":"string","example":"200"},"Success":{"description":"请求是否执行成功：\n\n- **true**：执行成功。\n- **false**：执行失败。","type":"string","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The request parameters are invalid."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to do this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B6D17591-B48B-4D31-9CD6-9B9796B2****\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"Data\\\": {\\n    \\\"userId\\\": \\\"1088760496****\\\",\\n    \\\"instanceId\\\": \\\"rm-2ze8g2am97624****\\\",\\n    \\\"eventContext\\\": \\\"AllContext\\\",\\n    \\\"lang\\\": \\\"zh_CN\\\",\\n    \\\"active\\\": 1,\\n    \\\"minInterval\\\": \\\"60\\\",\\n    \\\"contactName\\\": \\\"默认联系人\\\",\\n    \\\"contactGroupName\\\": \\\"默认联系组\\\",\\n    \\\"channelType\\\": \\\"hdm_alarm_sms,dingtalk\\\",\\n    \\\"level\\\": \\\"Optimization\\\",\\n    \\\"contacts\\\": [\\n      {\\n        \\\"name\\\": \\\"张先生\\\",\\n        \\\"phone\\\": \\\"1390000****\\\",\\n        \\\"email\\\": \\\"a***@example.net\\\",\\n        \\\"dingtalkHook\\\": \\\"https://oapi.dingtalk.com/robot/send?access_token=68fa29a9eaf3ba9994f54fxxxc1aa9879700308f90e9c23ebfb3663642c9****\\\",\\n        \\\"groups\\\": [\\n          \\\"张先生\\\"\\n        ],\\n        \\\"isCmsReduplicated\\\": true,\\n        \\\"userId\\\": \\\"1088760496****\\\"\\n      }\\n    ],\\n    \\\"contactGroups\\\": [\\n      {\\n        \\\"name\\\": \\\"张先生\\\",\\n        \\\"description\\\": \\\"默认联系人\\\",\\n        \\\"contacts\\\": \\\"\\\\\\\"[\\\\\\\\\\\\\\\"张先生\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"王女士\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"李先生\\\\\\\\\\\\\\\"]\\\\\\\"\\\",\\n        \\\"userId\\\": \\\"1088760496****\\\"\\n      }\\n    ],\\n    \\\"eventSendGroup\\\": [\\n      \\\"AllContext\\\"\\n    ],\\n    \\\"id\\\": 1,\\n    \\\"gmtCreate\\\": 1633071840000,\\n    \\\"gmtModified\\\": 1633071850000\\n  },\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": \\\"true\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetEventSubscriptionResponse>\\n    <RequestId>B6D17591-B48B-4D31-9CD6-9B9796B2****</RequestId>\\n    <Message>Successful</Message>\\n    <Data>\\n        <userId>1088760496****</userId>\\n        <instanceId>rm-2ze8g2am97624****</instanceId>\\n        <eventContext>AllContext</eventContext>\\n        <lang>zh_CN</lang>\\n        <active>1</active>\\n        <minInterval>60</minInterval>\\n        <contactName>默认联系人</contactName>\\n        <contactGroupName>默认联系组</contactGroupName>\\n        <channelType>hdm_alarm_sms,dingtalk</channelType>\\n        <level>Optimization</level>\\n        <contacts>\\n            <name>张先生</name>\\n            <phone>1390000****</phone>\\n            <email>a***@example.net</email>\\n            <dingtalkHook>https://oapi.dingtalk.com/robot/send?access_token=68fa29a9eaf3ba9994f54fxxxc1aa9879700308f90e9c23ebfb3663642c9****</dingtalkHook>\\n            <groups>张先生</groups>\\n            <isCmsReduplicated>true</isCmsReduplicated>\\n            <userId>1088760496****</userId>\\n        </contacts>\\n        <contactGroups>\\n            <name>张先生</name>\\n            <description>默认联系人</description>\\n            <contacts>\\\"[\\\\\\\"张先生\\\\\\\",\\\\\\\"王女士\\\\\\\",\\\\\\\"李先生\\\\\\\"]\\\"</contacts>\\n            <userId>1088760496****</userId>\\n        </contactGroups>\\n        <eventSendGroup>AllContext</eventSendGroup>\\n        <id>1</id>\\n        <gmtCreate>1633071840000</gmtCreate>\\n        <gmtModified>1633071850000</gmtModified>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</GetEventSubscriptionResponse>\",\"errorExample\":\"\"}]","title":"获取事件订阅设置","description":"使用该接口需满足以下前提条件：\n\n- 使用阿里云或DAS的SDK时，建议使用最新版本。\n- 使用SDK调用DAS服务时，需要将地域指定为cn-shanghai。\n- 数据库实例已接入DAS。"}