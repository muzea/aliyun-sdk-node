{"path":"/v2/image/add","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"InstanceName","in":"formData","schema":{"description":"图搜实例名称。最多支持20个字符。\n如果已经购买图搜实例可登录[图像搜索管控台](https://imagesearch.console.aliyun.com/)查看。\n如果没有购买图搜实例可参考[开通服务](~~179178~~)和[创建实例](~~66569~~)。\n>这里的实例名称并非实例ID，使用时请区分。","type":"string","required":true,"example":"demoinstance1"}},{"name":"CategoryId","in":"formData","schema":{"description":"图片类目。具体请参考[类目参考](~~179184~~)。\n> - 对于商品搜索，若设置类目，则以设置的为准；若不设置类目，将由系统进行类目预测，预测的类目结果可在Response中获取 。\n<props=\"china\">\n- 对于布料、商标、通用、家具家居和工业五金搜索，不论是否设置类目，系统会将类目设置为88888888。\n</props>\n- 对于通用搜索，不论是否设置类目，系统会将类目设置为88888888。\n\n","type":"integer","format":"int32","required":false,"example":"88888888"}},{"name":"ProductId","in":"formData","schema":{"description":"商品ID，最多支持512个字符。\n\n>一个商品可以有多张图片。","type":"string","required":true,"example":"2092061_1"}},{"name":"PicName","in":"formData","schema":{"description":" 图片名称，最多支持512个字符。\n> - ProductId和PicName唯一确定一张图片。\n- 如果多次添加图片具有相同的ProductId和PicName，以最后一次添加为准，前面添加的图片将被覆盖。\n","type":"string","required":true,"example":"2092061_1.jpg"}},{"name":"PicContent","in":"formData","schema":{"description":"图片内容，Base64编码。\n\n - 图片大小要求不超过4 MB。\n - 图片格式：PNG、JPG、JPEG、BMP、GIF、WEBP、TIFF、PPM。\n - 传输等待时间不超过5秒。\n<props=\"china\">\n - 服务类型为商品图片搜索和通用图片搜索时，图片长和宽像素要求大于等于100且小于等于4096。\n - 服务类型为商标图片搜索时，图片长和宽像素要求大于等于200且小于4096。\n - 服务类型为布料图片搜索时，图片长和宽像素要求大于等于448且小于等于4096。\n</props>\n<props=\"intl\">\n - 服务类型为商品图片搜索和通用图片搜索时，图片长和宽像素要求大于等于100且小于等于4096。\n</props>\n - 图片中不能包含旋转信息。","type":"string","required":true,"example":"AAAANSUhEUgAAAPcAAAEVCAYAAAA8d3NuAAAAAXNSR0IArs......RK5CYII="}},{"name":"Crop","in":"formData","schema":{"description":"是否需要进行主体识别。默认true。\n - 为true时，由系统进行主体识别，以识别的主体进行搜索，主体识别结果可在Response中获取。\n- 为false时，则不进行主体识别，以整张图进行搜索。\n\n<props=\"china\">对于布料图片搜索，此参数会被忽略，系统会以整张图进行搜索。</props>\n\n\n","type":"boolean","required":false,"example":"true"}},{"name":"Region","in":"formData","schema":{"description":"图片的主体区域，格式为`x1,x2,y1,y2,` 其中`x1,y1` 是左上角的点，`x2,y2`是右下角的点。\n<props=\"china\">\n> - 若用户设置了Region，则不论Crop参数为何值，都将以用户输入Region进行搜索。\n- 对于布料图片搜索，此参数会被忽略，系统会以整张图进行搜索。\n</props>\n<props=\"intl\">\n> 对于布料图片搜索，此参数会被忽略，系统会以整张图进行搜索。\n</props>\n","type":"string","required":false,"example":"280,486,232,351"}},{"name":"CustomContent","in":"formData","schema":{"description":"用户自定义的内容，最多支持4096个字符。\n>查询时会返回该字段。例如可添加图片的描述等文本。","type":"string","required":false,"example":"{\\\"merchant_id\\\":\\\"46-718f-da04-4099b2f144ae\\\",\\\"category_ids\\\":[\\\"1234\\\"],\\\"image_index\\\":0,\\\"updated\\\":5678}"}},{"name":"IntAttr","in":"formData","schema":{"description":"整数类型属性，可用于查询时过滤，查询时会返回该字段。","type":"integer","format":"int32","required":false,"example":"22"}},{"name":"StrAttr","in":"formData","schema":{"description":"字符串类型属性，最多支持128个字符。可用于查询时过滤，查询时会返回该字段。","type":"string","required":false,"example":"ss"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"错误信息。","type":"string","example":"success"},"RequestId":{"description":"请求ID。","type":"string","example":"E0845DE6-52AF-4B50-9F15-51ED4044E6AB"},"Code":{"description":"错误码。\n\n- 0：成功。\n- 非0：失败。","type":"integer","format":"int32","example":"0"},"PicInfo":{"description":"类目预测、主体识别结果等信息。","type":"object","properties":{"Region":{"description":"主体识别结果。图片的主体区域，格式为`x1,x2,y1,y2`，其中`x1,y1`是左上角的点，`x2,y2`是右下角的点。若用户请求中指定了主体区域，则以请求中为准。","type":"string","example":"94,691,206,650"},"CategoryId":{"description":"类目预测结果。若用户请求中指定了类目，则以请求中为准。","type":"integer","format":"int32","example":"88888888"}}},"Success":{"description":"请求是否成功。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"BadRequest","errorMessage":"The request has invalid parameters."},{"errorCode":"InvalidInstance","errorMessage":"The specified instance name is invalid."},{"errorCode":"NoCaretSeperator","errorMessage":"The body content is missing the ^ separator."},{"errorCode":"EmptyMeta","errorMessage":"The body content has an empty meta field."},{"errorCode":"InvalidMetaItem","errorMessage":"The meta field is invalid."},{"errorCode":"NoPicList","errorMessage":"The body content is missing the pic_list parameter."},{"errorCode":"InvalidPicList","errorMessage":"The specified pic_list parameter is invalid."},{"errorCode":"NoSpecifiedPic","errorMessage":"The content of an image is not specified in the HTTP POST body."},{"errorCode":"NoSpecifiedSearchPic","errorMessage":"The search image is not specified."},{"errorCode":"InvalidCategory","errorMessage":"The specified category is invalid."},{"errorCode":"OverflowMaxResultNum","errorMessage":"The specified number of total results exceeds the maximum of 500."},{"errorCode":"OverflowMaxReturnNum","errorMessage":"The specified number of results for each request exceeds the maximum of 100."},{"errorCode":"InvalidStartParameter","errorMessage":"The specified parameter s is inavlid."},{"errorCode":"InvalidNumParameter","errorMessage":"The specified parameter n is invalid."},{"errorCode":"NoSpecifiedAddPic","errorMessage":"The image to insert is not specified."},{"errorCode":"NoSpecifiedItemId","errorMessage":"The item_id parameter is not specified."},{"errorCode":"InvalidIntAttr","errorMessage":"The specified int_attr field is invalid."},{"errorCode":"UnsupportedPicFormat","errorMessage":"The specified image format is invalid."},{"errorCode":"InvalidFilterClause","errorMessage":"The specified filtering condition is invalid."},{"errorCode":"InstanceOverQuota","errorMessage":"The number of items exceeds the limit."},{"errorCode":"IncorrectOrientation","errorMessage":"The image contains incorrect rotation flags in the meta data."},{"errorCode":"UnsupportedPicPixels","errorMessage":"The specified pixels is not supported."},{"errorCode":"SearchTimeout","errorMessage":"The request is timed out."},{"errorCode":"PicNotExist","errorMessage":"The search picture does not exist."},{"errorCode":"NoSpecifiedProductId","errorMessage":"The parameter ProductId no specified."},{"errorCode":"NoSpecifiedPicName","errorMessage":"The parameter PicName no specified."},{"errorCode":"NoSpecifiedPicContent","errorMessage":"The parameter PicContent no specified."},{"errorCode":"InvalidType","errorMessage":"The specified parameter Type is not valid."},{"errorCode":"InvalidProductId","errorMessage":"The specified parameter ProductId is not valid."},{"errorCode":"InvalidPicName","errorMessage":"The specified parameter PicName is not valid."},{"errorCode":"InvalidStrAttr","errorMessage":"The specified parameter StrAttr is not valid."},{"errorCode":"InvalidCustomContent","errorMessage":"The specified parameter CustomContent is not valid."},{"errorCode":"InvalidPicContent","errorMessage":"The specified parameter PicContent length greater than 4 * 1024 * 1024."},{"errorCode":"TimeoutForTransferImage","errorMessage":"Timeout after 5 seconds waiting for images transfer to complete."}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation."},{"errorCode":"DeniedRequest","errorMessage":"Your request was denied due to instance flow control."}],"409":[{"errorCode":"InstanceStatusError","errorMessage":"Your instance is unavailable."}],"500":[{"errorCode":"UnknownException","errorMessage":"An internal server error occurred."},{"errorCode":"NetworkException","errorMessage":"A network error occurred."},{"errorCode":"RequestTimeout","errorMessage":"​The request is timeout."},{"errorCode":"UnsupportedInstanceType","errorMessage":"The instance type is not supported."},{"errorCode":"UnsupportedOperationType","errorMessage":"The specified action is not supported."},{"errorCode":"ExtractFeatureTimeout","errorMessage":"The request was timed out while extracting features."},{"errorCode":"AccessEngineFailed","errorMessage":"An error occurred while accessing the search engine."},{"errorCode":"InternalOssError","errorMessage":"An internal OAS error occurred."},{"errorCode":"InternalSwiftError","errorMessage":"An internal SWIFT error occurred."},{"errorCode":"InternalTableStoreError","errorMessage":"An internal Table Store error occurred."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"RequestId\\\": \\\"E0845DE6-52AF-4B50-9F15-51ED4044E6AB\\\",\\n  \\\"Code\\\": 0,\\n  \\\"PicInfo\\\": {\\n    \\\"Region\\\": \\\"94,691,206,650\\\",\\n    \\\"CategoryId\\\": 88888888\\n  },\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"添加图片数据","summary":"本文为您介绍AddImage接口的语法及示例，用于向图像搜索实例中添加图片信息。","description":"### 使用说明\n本接口用于向图像搜索实例中添加图片信息。\n\n### QPS限制\n10W图片容量的实例默认的并发量为1，也就是每秒钟最多处理1个图片新增请求。\n\n其他图片容量的实例默认的并发量为5，也就是每秒钟最多处理5个图片新增请求。"}