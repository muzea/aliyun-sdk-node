{"summary":"更新网络型负载均衡服务器组的配置。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"141878","abilityTreeNodes":["FEATUREslb5H153T","FEATUREslbEP4JCD","FEATUREslbV8IUEO","FEATUREslb268B0A"]},"parameters":[{"name":"ServerGroupId","in":"formData","schema":{"title":"服务器组ID","description":"服务器组ID。","type":"string","required":true,"example":"sgp-atstuj3rtoptyui****"}},{"name":"ServerGroupName","in":"formData","schema":{"description":"修改后的服务器组名称。\n\n长度为2~128个字符，必须以大小写字母或中文开头，可包含数字、半角句号（.）、下划线（_）和短划线（-）。","type":"string","required":false,"example":"NLB_ServerGroup1"}},{"name":"ConnectionDrainEnabled","in":"formData","schema":{"title":"是否开启连接优雅中断","description":"是否开启连接优雅中断。取值：\n\n- **true**：开启。\n\n- **false**：不开启。","type":"boolean","required":false,"example":"false"}},{"name":"ConnectionDrainTimeout","in":"formData","schema":{"title":"连接优雅中断超时时间","description":"设置连接优雅中断超时时间。单位：秒。取值范围：**0**~**900**。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"Scheduler","in":"formData","schema":{"title":"调度类型","description":"调度算法。取值：\n\n- **Wrr**：加权轮询，权重值越高的后端服务器，被轮询到的概率也越高。\n\n- **Wlc**：加权最小连接数，除了根据每台后端服务器设定的权重值来进行轮询，同时还考虑后端服务器的实际负载（即连接数）。当权重值相同时，当前连接数越小的后端服务器被轮询到的概率也越高。\n\n- **rr**：轮询，按照访问顺序依次将外部请求分发到后端服务器。\n\n- **sch**：源IP哈希：相同的源地址会调度到相同的后端服务器。\n\n- **tch**：四元组哈希，基于四元组（源IP、目的IP、源端口和目的端口）的一致性哈希，相同的流会调度到相同的后端服务器。\n\n- **qch**：QUIC ID哈希，支持将同一个QUIC ID的请求哈希到同一台后端服务器上。\n\n> 仅后端协议为UDP时，支持选择QUIC ID哈希。","type":"string","required":false,"example":"Wrr"}},{"name":"PreserveClientIpEnabled","in":"formData","schema":{"description":"是否开启客户端地址保持功能。取值：\n\n- **true**：开启。\n\n- **false**：关闭。","type":"boolean","required":false,"example":"false"}},{"name":"HealthCheckConfig","in":"formData","style":"flat","schema":{"title":"健康检查配置","description":"健康检查相关配置。","type":"object","properties":{"HealthCheckEnabled":{"title":"是否开启健康检查","description":"是否开启健康检查，取值：\n\n- **true**：开启。\n\n- **false**：关闭。","type":"boolean","required":false,"example":"false"},"HealthCheckType":{"title":"健康检查协议类型","description":"健康检查协议。取值：**TCP**或**HTTP**。","type":"string","required":false,"example":"TCP"},"HealthCheckConnectPort":{"title":"健康检查使用的端口","description":"健康检查的后端服务器的端口。取值范围：**0**~**65535**。**0**表示使用后端服务器的端口进行健康检查。","type":"integer","format":"int32","required":false,"example":"0"},"HealthyThreshold":{"title":"健康检查连续成功多少次后，将后端服务器的健康检查状态由fail判定为success","description":"健康检查连续成功多少次后，将后端服务器的健康检查状态由**失败**判定为**成功**。取值范围：**2**~**10**。","type":"integer","format":"int32","required":false,"example":"3"},"UnhealthyThreshold":{"title":"健康检查连续失败多少次后，将后端服务器的健康检查状态由success判定为fail","description":"健康检查连续失败多少次后，将后端服务器的健康检查状态由**成功**判定为**失败**。取值范围：**2**~**10**。","type":"integer","format":"int32","required":false,"example":"3"},"HealthCheckConnectTimeout":{"title":"健康检查响应的最大超时时间","description":"健康检查响应的最大超时时间。单位：秒。取值范围：**1**~**300**。","type":"integer","format":"int32","required":false,"example":"100"},"HealthCheckInterval":{"title":"健康检查时间间隔","description":"健康检查的时间间隔。单位：秒。\n\n取值范围：**1**~**50**。","type":"integer","format":"int32","required":false,"example":"5"},"HealthCheckDomain":{"title":"健康检查的域名","description":"用于健康检查的域名。取值：\n- **$SERVER_IP**：使用后端服务器内网IP。\n- **domain**：指定特定域名。长度限制1~80个字符，只能使用小写字母、数字、短划线（-）、半角句号（.）。\n\n> 仅**HealthCheckType**为**HTTP**时，该参数生效。","type":"string","required":false,"example":"$SERVER_IP"},"HealthCheckUrl":{"title":"健康检查的url","description":"健康检查路径。\n\n长度为1~80个字符，只能使用字母、数字、字符`-/.%?#&=`以及扩展字符`_;~!（)*[]@$^:',+`。 必须以正斜线（/）开头。\n> 仅**HealthCheckType**为**HTTP**时，该参数生效。","type":"string","required":false,"example":"/test/index.html"},"HealthCheckHttpCode":{"title":"状态码，多个状态码用逗号分隔","description":"健康状态返回码，多个状态码用半角逗号（,）分隔。\n取值：**http\\_2xx**（默认值）、**http\\_3xx**、**http\\_4xx**和**http\\_5xx**。\n> 仅**HealthCheckType**为**HTTP**时，该参数生效。","type":"array","items":{"description":"健康状态返回码，多个状态码用半角逗号（,）分隔。\n取值：**http\\_2xx**（默认值）、**http\\_3xx**、**http\\_4xx**和**http\\_5xx**。\n> 仅**HealthCheckType**为**HTTP**时，该参数生效。","type":"string","required":false,"example":"http_2xx"},"required":false},"HttpCheckMethod":{"description":"健康检查方法，取值：**GET**或**HEAD**。\n> 仅**HealthCheckType**为**HTTP**时，该参数生效。","type":"string","required":false,"example":"GET","enum":[]},"HealthCheckReq":{"type":"string","required":false},"HealthCheckExp":{"type":"string","required":false}},"required":false}},{"name":"RegionId","in":"formData","schema":{"description":"网络型负载均衡实例所在的地域ID。 \n\n您可以通过调用[DescribeRegions](~~443657~~)接口获取地域ID。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"DryRun","in":"formData","schema":{"description":"是否只预检此次请求。取值：\n- **true**：发送检查请求，不会更新服务器组信息。检查项包括是否填写了必需参数、请求格式、业务限制。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。\n- **false**（默认值）：发送正常请求，通过检查后返回HTTP 2xx状态码并直接进行操作。","type":"boolean","required":false,"example":"false","default":" false"}},{"name":"ClientToken","in":"formData","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}}],"responses":{"200":{"schema":{"title":"RpcResponse<UpdateServerGroupAttributeResponse>","description":"更新服务器组配置。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"54B48E3D-DF70-471B-AA93-08E683A1B45"},"ServerGroupId":{"description":"服务器组ID。","type":"string","example":"sgp-atstuj3rtoptyui****"},"JobId":{"description":"异步任务ID。","type":"string","example":"72dcd26b-f12d-4c27-b3af-18f6aed5****"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalParam.%s","errorMessage":"The param of %s is illegal."},{"errorCode":"SystemBusy","errorMessage":"System is busy, please try again later."},{"errorCode":"IllegalParam.healthCheckDomain","errorMessage":"The parameter of healthCheckConfig.healthCheckDomain is illegal."},{"errorCode":"IlleagalParam.healthCheckUrl","errorMessage":"The parameter of healthCheckUrl in healthCheckConfig is illegal."},{"errorCode":"OperationDenied.UidNotAllowQuic29","errorMessage":"The operation is not allowed because of uid not allow quic29 version."},{"errorCode":"IllegalParam","errorMessage":"The param of %s is illegal."},{"errorCode":"DryRunOperation","errorMessage":"Request validation has been passed with DryRun flag set."},{"errorCode":"IllegalParam.ServerGroupName","errorMessage":"The param of ServerGroupName is illegal."},{"errorCode":"IllegalParam.PreserveClientIpSwitch","errorMessage":"The server group associated with the tcpssl listener does not support enabling PreserveClientIp."}],"403":[{"errorCode":"Forbidden.NoPermission","errorMessage":"Authentication is failed for NoPermission."}],"404":[{"errorCode":"ResourceNotFound.serverGroup","errorMessage":"The specified resource of serverGroup is not found."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"54B48E3D-DF70-471B-AA93-08E683A1B45\\\",\\n  \\\"ServerGroupId\\\": \\\"sgp-atstuj3rtoptyui****\\\",\\n  \\\"JobId\\\": \\\"72dcd26b-f12d-4c27-b3af-18f6aed5****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateServerGroupAttributeResponse>\\n    <RequestId>54B48E3D-DF70-471B-AA93-08E683A1B45</RequestId>\\n    <ServerGroupId>sgp-atstuj3rtoptyui****</ServerGroupId>\\n    <JobId>72dcd26b-f12d-4c27-b3af-18f6aed5****</JobId>\\n</UpdateServerGroupAttributeResponse>\",\"errorExample\":\"\"}]","title":"更新服务器组配置"}