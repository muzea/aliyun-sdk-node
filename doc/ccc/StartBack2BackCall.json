{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]},{"BearerToken":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"docRequired":true,"example":"ccc-test"}},{"name":"Caller","in":"query","schema":{"description":"主叫号码。","type":"string","required":true,"docRequired":true,"example":"1391814****"}},{"name":"Callee","in":"query","schema":{"description":"被叫号码。","type":"string","required":true,"docRequired":true,"example":"1372168****"}},{"name":"TimeoutSeconds","in":"query","schema":{"description":"双呼超时时间，呼叫在经过该参数指定的时间仍然未接通的情况下，则主动挂断，非必填，默认30，单位秒。","type":"integer","format":"int32","required":false,"maximum":"3600","minimum":"0","example":"30"}},{"name":"Broker","in":"query","schema":{"description":"中间号码，需要是实例下可用的外呼号码，双呼时会使用该号码先后呼叫主叫和被叫。","type":"string","required":true,"docRequired":true,"example":"0102157****"}},{"name":"AdditionalBroker","in":"query","schema":{"description":"附加中间号码，如果该参数存在，则呼叫主叫时使用中间号码，呼叫被叫时使用该参数指定的号码，非必填， 默认空。","type":"string","required":false,"example":"0102156****"}},{"name":"Tags","in":"query","schema":{"description":"随路数据，不能超过128字节，主要用于扩展需求，普通客户无需关心。","type":"string","required":false,"example":"无"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"响应码。","type":"string","example":"OK"},"HttpStatusCode":{"description":"HTTP状态码。","type":"integer","format":"int32","example":"200"},"Message":{"description":"响应信息。","type":"string","example":"无"},"RequestId":{"description":"请求ID。","type":"string","example":"26A34338-5CD9-4C95-A7A6-5BDCE76C6B94"},"Params":{"description":"响应参数列表。","type":"array","items":{"description":"响应参数。","type":"string","example":"无"}},"Data":{"description":"数据。","type":"object","properties":{"CallContext":{"description":"话务上下文环境。","type":"object","properties":{"CallType":{"description":"通话类型。","type":"string","enumValueTitles":{"INBOUND":"呼入","BARGE":"强插","CONSULTANT":"咨询","CONFERENCE":"会议","MONITOR":"监听","INTERNAL":"内部通话","OUTBOUND":"呼出","INTERCEPT":"强拆","BACK2BACK":"双呼","PREDICTIVE":"预测式外呼","COACH":"辅导"},"example":"BACK2BACK"},"InstanceId":{"description":"实例ID。","type":"string","example":"ccc-test"},"JobId":{"description":"通话ID。","type":"string","example":"job-1034159089076****"},"ChannelContexts":{"description":"话务通道列表。","type":"array","items":{"description":"话务通道。","type":"object","properties":{"ReleaseInitiator":{"description":"话务通道的挂断方，表示该话务通道是谁首先发起的挂断。","type":"string","example":"无"},"ChannelState":{"description":"话务通道的状态。","type":"string","enumValueTitles":{"CREATED":"已创建","ANSWERED":"已接通","RELEASED":"已挂断","RETIRED":"已失效","EARLY_MEDIA":"早媒体阶段","NONE":"初始状态","RINGING":"振铃中"},"example":"NONE"},"Destination":{"description":"话务通道的被叫方。","type":"string","example":"1372168****"},"UserId":{"description":"话务通道关联的坐席ID，如果是客户的话务通道，该字段为空。","type":"string","example":"无"},"ChannelFlags":{"description":"话务通道标志。","type":"string","enumValueTitles":{"COACHING":"COACHING","MONITORING":"MONITORING","MONITORED":"MONITORED","COACHED":"COACHED","HOLD":"HOLD","MUTED":"MUTED"},"example":"MONITORING"},"Timestamp":{"description":"话务通道最近一次状态变化的时间戳，格式是Unix时间戳，单位毫秒。","type":"integer","format":"int64","example":"1618217874062"},"ReleaseReason":{"description":"话务通道的挂断原因，表示当前话务通道为什么会被挂断，取值来自SIP协议中定义的响应码，请客户参考SIP协议分析挂断原因。","type":"string","example":"无"},"CallType":{"description":"话务通道的通话类型。","type":"string","enumValueTitles":{"INBOUND":"INBOUND","BARGE":"BARGE","CONSULTANT":"CONSULTANT","CONFERENCE":"CONFERENCE","MONITOR":"MONITOR","INTERNAL":"INTERNAL","OUTBOUND":"OUTBOUND","INTERCEPT":"INTERCEPT","BACK2BACK":"BACK2BACK","PREDICTIVE":"PREDICTIVE","COACH":"COACH"},"example":"BACK2BACK"},"JobId":{"description":"通话ID。","type":"string","example":"job-1034159089076****"},"ChannelId":{"description":"话务通道ID。","type":"string","example":"ch:user:1390501****->8032****:1609138902226:job-653821410368****"},"Originator":{"description":"话务通道的主叫方","type":"string","example":"0102157****"},"UserExtension":{"description":"话务通道关联的坐席的分机号。","type":"string","example":"8001****"}}}}}},"UserContext":{"description":"坐席上下文环境。","type":"object","properties":{"Extension":{"description":"坐席分机号。","type":"string","example":"8020****"},"Heartbeat":{"description":"上次收到坐席心跳的时间，格式为Unix时间戳，单位毫秒。","type":"integer","format":"int64","example":"1618217872911"},"WorkMode":{"description":"工作模式。","type":"string","enumValueTitles":{"ON_SITE":"场内模式","OFF_SITE":"场外模式","OFFICE_PHONE":"办公电话模式"},"example":"ON_SITE"},"DeviceId":{"description":"设备ID，浏览器WebRTC软电话或实体话机设备的标识ID，同一时间只允许一种设备注册。","type":"string","example":"ACC-YUNBS-1.0.10-****"},"UserId":{"description":"坐席ID。","type":"string","example":"agent@ccc-test"},"Reserved":{"description":"坐席最近一次被预定的时间，被预定意味着马上将有来电分配给该坐席，格式为Unix时间戳，单位毫秒。","type":"integer","format":"int64","example":"1618217794599"},"BreakCode":{"description":"小休状态码，分为系统定义的和客户定义的两种，系统定义的小休吗包括：Warm-up （坐席上线后置闲前的临时小休状态）、RingingTimeout（坐席振铃超时导致的小休）、RejectCall（坐席拒接导致的小休）。客户自定义状态码没有限制，客户可以根据业务需要自行定义。","type":"string","enumValueTitles":{"RingingTimeout":"坐席振铃超时导致的小休","RejectCall":"坐席拒接导致的小休","Warm-up":"坐席上线后置闲前的临时小休状态"},"example":"Warm-up"},"InstanceId":{"description":"实例ID。","type":"string","example":"ccc-test"},"OutboundScenario":{"description":"坐席是否处于仅外呼模式。","type":"boolean","example":"false"},"DeviceState":{"description":"设备状态。","type":"string","enumValueTitles":{"UNREGISTERED":"未注册","ONLINE":"在线","OFFLINE":"离线"},"example":"无"},"Mobile":{"description":"坐席的个人电话号码。","type":"string","example":"1324730****"},"JobId":{"description":"通话ID。","type":"string","example":"job-1034159089076****"},"UserState":{"description":"座席状态。","type":"string","enumValueTitles":{"READY":"空闲","WORKING":"话后处理中","DIALING":"拨号中","BREAK":"小休","OFFLINE":"离线","TALKING":"通话中","RINGING":"振铃中"},"example":"OFFLINE"},"SignedSkillGroupIdList":{"description":"坐席签入的技能组ID列表。","type":"array","items":{"description":"技能组ID。","type":"string","example":"skillgroup1@ccc-test"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"Parameter.Blank","errorMessage":"The parameter %s may not be null or blank."}],"404":[{"errorCode":"NotExists.InstanceId","errorMessage":"The specified instance %s does not exist."},{"errorCode":"NotExists.Number","errorMessage":"The specified number %s does not exist in instance %s."}],"500":[{"errorCode":"InternalService.CTI","errorMessage":"An internal CTI service error occurred. %s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"OK\\\",\\n  \\\"HttpStatusCode\\\": 200,\\n  \\\"Message\\\": \\\"无\\\",\\n  \\\"RequestId\\\": \\\"26A34338-5CD9-4C95-A7A6-5BDCE76C6B94\\\",\\n  \\\"Params\\\": [\\n    \\\"无\\\"\\n  ],\\n  \\\"Data\\\": {\\n    \\\"CallContext\\\": {\\n      \\\"CallType\\\": \\\"BACK2BACK\\\",\\n      \\\"InstanceId\\\": \\\"ccc-test\\\",\\n      \\\"JobId\\\": \\\"job-1034159089076****\\\",\\n      \\\"ChannelContexts\\\": [\\n        {\\n          \\\"ReleaseInitiator\\\": \\\"无\\\",\\n          \\\"ChannelState\\\": \\\"NONE\\\",\\n          \\\"Destination\\\": \\\"1372168****\\\",\\n          \\\"UserId\\\": \\\"无\\\",\\n          \\\"ChannelFlags\\\": \\\"MONITORING\\\",\\n          \\\"Timestamp\\\": 1618217874062,\\n          \\\"ReleaseReason\\\": \\\"无\\\",\\n          \\\"CallType\\\": \\\"BACK2BACK\\\",\\n          \\\"JobId\\\": \\\"job-1034159089076****\\\",\\n          \\\"ChannelId\\\": \\\"ch:user:1390501****->8032****:1609138902226:job-653821410368****\\\",\\n          \\\"Originator\\\": \\\"0102157****\\\",\\n          \\\"UserExtension\\\": \\\"8001****\\\"\\n        }\\n      ]\\n    },\\n    \\\"UserContext\\\": {\\n      \\\"Extension\\\": \\\"8020****\\\",\\n      \\\"Heartbeat\\\": 1618217872911,\\n      \\\"WorkMode\\\": \\\"ON_SITE\\\",\\n      \\\"DeviceId\\\": \\\"ACC-YUNBS-1.0.10-****\\\",\\n      \\\"UserId\\\": \\\"agent@ccc-test\\\",\\n      \\\"Reserved\\\": 1618217794599,\\n      \\\"BreakCode\\\": \\\"Warm-up\\\",\\n      \\\"InstanceId\\\": \\\"ccc-test\\\",\\n      \\\"OutboundScenario\\\": false,\\n      \\\"DeviceState\\\": \\\"无\\\",\\n      \\\"Mobile\\\": \\\"1324730****\\\",\\n      \\\"JobId\\\": \\\"job-1034159089076****\\\",\\n      \\\"UserState\\\": \\\"OFFLINE\\\",\\n      \\\"SignedSkillGroupIdList\\\": [\\n        \\\"skillgroup1@ccc-test\\\"\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<RequestId>26A34338-5CD9-4C95-A7A6-5BDCE76C6B94</RequestId>\\n<Message>无</Message>\\n<HttpStatusCode>200</HttpStatusCode>\\n<Params>无</Params>\\n<Data>\\n    <CallContext>\\n        <InstanceId>ccc-test</InstanceId>\\n        <CallType>BACK2BACK</CallType>\\n        <JobId>job-103415908907622400</JobId>\\n        <ChannelContexts>\\n            <Destination>1014</Destination>\\n            <ChannelState>NONE</ChannelState>\\n            <ReleaseReason>无</ReleaseReason>\\n            <ReleaseInitiator>无</ReleaseInitiator>\\n            <Originator>010xxxx2157</Originator>\\n            <ChannelFlags>[]</ChannelFlags>\\n            <UserId>无</UserId>\\n            <UserExtension>80011474</UserExtension>\\n            <CallType>BACK2BACK</CallType>\\n            <AssociatedData>无</AssociatedData>\\n            <ChannelId>ch:user:1318888888-&gt;80011474:1609225718294:job-65700074013925376</ChannelId>\\n            <Timestamp>1618217874062</Timestamp>\\n            <JobId>job-103415908907622400</JobId>\\n        </ChannelContexts>\\n    </CallContext>\\n    <UserContext>\\n        <UserState>OFFLINE</UserState>\\n        <InstanceId>ccc-test</InstanceId>\\n        <DeviceId>ACC-YUNBS-1.0.10-bsd87c04aaa8f7000176ad354b1c</DeviceId>\\n        <BreakCode>Warm-up</BreakCode>\\n        <OutboundScenario>false</OutboundScenario>\\n        <Uri>无</Uri>\\n        <Mobile>86-132xxxx4730</Mobile>\\n        <Extension>80202301</Extension>\\n        <DeviceState>无</DeviceState>\\n        <UserId>user-test@ccc-test</UserId>\\n        <Heartbeat>1618217872911</Heartbeat>\\n        <WorkMode>ON_SITE</WorkMode>\\n        <JobId>job-103415908907622400</JobId>\\n        <Reserved>1618217794599</Reserved>\\n        <SignedSkillGroupIdList>[\\\"skg-default@ccc-test\\\"]</SignedSkillGroupIdList>\\n    </UserContext>\\n</Data>\\n<Code>OK</Code>\",\"errorExample\":\"\"}]","title":"发起双呼","summary":"调用StartBack2BackCall发起双呼。","description":"双呼和传统的双方通话不同，主叫并不直接呼叫对方，而是通过一个背靠背代理（Back to Back Agent），背靠背代理首先呼叫主叫方，接通后，再呼叫被叫方，然后把二者拉进一个会场。在这种方式下，由于每个呼叫的所有消息流经背靠背代理，因此服务提供商可以据此提供增值服务，比如计时、录音、隐藏真实号码等等。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}