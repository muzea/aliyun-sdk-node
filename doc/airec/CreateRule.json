{"path":"/v2/openapi/instances/{instanceId}/rules","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"18668","abilityTreeNodes":["FEATUREairecJZYTIA"]},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例ID。","type":"string","required":true,"docRequired":true,"example":"airec-cn-****\n"}}],"responses":{"200":{"schema":{"description":"返回结果详情。","type":"object","properties":{"result":{"description":"返回结果详情。","type":"object","properties":{"ruleId":{"description":"规则ID。","type":"string","example":"98493A14-D619-4E88-9F8D-108939817F9F"},"gmtModified":{"description":"最后修改时间。","type":"string","example":"2020-04-27T06:38:28.000Z"},"status":{"description":"规则状态：\n\n- **DRAFT**：草稿状态\n\n\n- **EFFECTIVE**：生效状态\n\n- **PUBLISHING**：发布中状态\n\n- **INEFFECTIVE**：已失效状态\n\n- **FAILED**：未生效状态","type":"string","example":"EFFECTIVE"},"gmtCreate":{"description":"创建时间。","type":"string","example":"2020-04-27T06:38:28.000Z"}}},"code":{"description":"错误码。","type":"string","example":"InternalServerError"},"requestId":{"description":"请求ID。","type":"string","example":"8F81A922-6C81-46D6-B78C-CC35E16B1691"},"message":{"description":"错误详情。","type":"string","example":"An internal server error occurred"}}}},"5XX":{"schema":{"type":"object","properties":{"requestId":{"type":"string"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"result\\\": {\\n    \\\"ruleId\\\": \\\"98493A14-D619-4E88-9F8D-108939817F9F\\\",\\n    \\\"gmtModified\\\": \\\"2020-04-27T06:38:28.000Z\\\",\\n    \\\"status\\\": \\\"EFFECTIVE\\\",\\n    \\\"gmtCreate\\\": \\\"2020-04-27T06:38:28.000Z\\\"\\n  },\\n  \\\"code\\\": \\\"InternalServerError\\\",\\n  \\\"requestId\\\": \\\"8F81A922-6C81-46D6-B78C-CC35E16B1691\\\",\\n  \\\"message\\\": \\\"An internal server error occurred\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<0>\\n    <Result>\\n        <Status>DRAFT</Status>\\n        <GmtCreate>2020-04-27T06:38:28.000Z</GmtCreate>\\n        <GmtModified>2020-04-27T06:38:28.000Z</GmtModified>\\n        <RuleId>98493A14-D619-4E88-9F8D-108939817F9F</RuleId>\\n        <RuleMeta>\\n            <RuleMetaType>SELECTION</RuleMetaType>\\n            <SceneId>123</SceneId>\\n            <PubState>PUBLISHING</PubState>\\n            <SelectionParams>\\n                <SelectType>QUERY_ITEM_TYPE</SelectType>\\n                <SelectionOperation>OPERATOR_EQUAL</SelectionOperation>\\n                <SelectValue>atrical,image</SelectValue>\\n            </SelectionParams>\\n        </RuleMeta>\\n    </Result>\\n    <RequestId>76E2C51D-A2D7-4775-9FD8-2AB84B2A0CEF</RequestId>\\n</0>\\n<1>\\n    <Result>\\n        <Status>DRAFT</Status>\\n        <GmtCreate>2020-04-27T03:17:21.000Z</GmtCreate>\\n        <GmtModified>2020-04-27T03:17:21.000Z</GmtModified>\\n        <RuleId>123456789001122</RuleId>\\n        <RuleMeta>\\n            <RuleMetaType>OPERATION</RuleMetaType>\\n            <SceneId>123</SceneId>\\n            <PubState>PUBLISHING</PubState>\\n            <OperationParams>\\n                <OperationType>MIX</OperationType>\\n                <Settings>\\n                    <Name>image</Name>\\n                    <Value>10</Value>\\n                </Settings>\\n            </OperationParams>\\n            <OperationParams>\\n                <OperationType>DIVERSIFY</OperationType>\\n                <CategoryIndex>1</CategoryIndex>\\n                <Window>2</Window>\\n                <Status>true</Status>\\n                <DiversifyType>TYPE_SHOP</DiversifyType>\\n            </OperationParams>\\n            <OperationParams>\\n                <OperationType>EXPOSURE</OperationType>\\n                <ExposureSettings>\\n                    <DurationSeconds>12340</DurationSeconds>\\n                    <Status>true</Status>\\n                    <ExposureType>TYPE_EXPOSE</ExposureType>\\n                    <ScenarioBased>true</ScenarioBased>\\n                </ExposureSettings>\\n                <ExposureSettings>\\n                    <DurationSeconds>12340000</DurationSeconds>\\n                    <Status>true</Status>\\n                    <ExposureType>TYPE_CLICK</ExposureType>\\n                    <ScenarioBased>true</ScenarioBased>\\n                </ExposureSettings>\\n            </OperationParams>\\n        </RuleMeta>\\n    </Result>\\n    <RequestId>76E2C51D-A2D7-4775-9FD8-2AB84B2A0CEF</RequestId>\\n</1>\",\"errorExample\":\"\"}]","title":"创建规则","summary":"创建推荐策略运营规则。","requestParamsDescription":"请求的body：\n| 参数 | 类型 | 是否必需 | 描述 |\n| --- | --- | --- | --- |\n| type | String | 是 | 规则类型<br />**SelectionRule：**选品规则<br />**OperationRule：**运营规则<br />**TopRule：** 置顶规则<br />**FixedPositionRule：**定坑规则 |\n| ruleMeta | Map | 是 | 规则的具体信息 |\n| └sceneId | String | 是 | 场景ID<br />如要修改全局运营规则，填global |\n| selectionParams | List | 是 | 选品规则参数 |\n| └selectType | Enum | 是 | **QUERY_ITEM_TYPE： **物品类型<br />**QUERY_CATEGORY：**物品类目<br />**QUERY_PUB_TIME ：**发布时间<br />**QUERY_CHANNEL：** 渠道 |\n| └selectionOperation | Enum | 是 | **OPERATOR_HIGHER：**大于等于<br />**OPERATOR_LOWER：**小于等于<br />**_QUERY_VALUE_IN：** 包括_ |\n| └selectValue | String | 是 | 具体选择的选品规则（Json格式传递） |\n| operationParams |  |  |  |\n| └modifyOperationType | List | 是 | [\"DIVERSIFY\",\"EXPOSURE\"] 添加需要修改的 key |\n| └instanceDiversifyEnable | boolean | 是 | 是否使用实例级别的多样性规则 |\n| └instanceMixEnable | boolean | <br /> | 是否使用实例级别的混排规则 |\n| └operationType | Enum | 是 | MIX 排序<br />**DIVERSIFY：** 多样性<br />**EXPOSURE：**曝光 （只有全局规则支持曝光类型） |\n|    └settings | MixSetting | 是 |  |\n|       └name | String | 是 | 混排类型 |\n|       └value | int | 是 | 混排类型所占百分比 |\n|   └diversifyType | Enum | 是 | **TYPE_SHOP：** 店铺打散<br />**TYPE_AUTHOR ：**作者打散<br />**TYPE_CATEGORY：**类目打散<br />**TYPE_ITEM_TYPE：** 物品类型打散 |\n|      └categoryIndex | int | 是 | 层级，没有填0 |\n|      └window | int | 是 | 窗口 |\n|      └status | boolean | 是 | 打散是否开启，**true**：开启，**false**：关闭|\n|  └instanceExposureEnable | boolean | 是 | 是否使用实例级别的曝光配置，<br />默认true |\n|   └exposureSettings | List | 是 | 曝光配置列表 |\n|       └durationSeconds | Long | 是 | 曝光时间（秒级时间戳） |\n|       └exposureType | String | 是 | 曝光类型：<br />**TYPE_EXPOSE**：曝光<br />**TYPE_CLICK**：点击<br />**TYPE_LOOP**：循环 |\n|       └status | boolean | 是 | 曝光是否开启，**true**：开启，**false**：关闭|\n|       └scenarioBased | boolean | 是 | 是否基于场景，**true**：是，**false**：否，基于实例|\n|   └mtOrderSettings | MtOrderSetting | 是 | 相关度规则配置列表 |\n|  └index | int | 是 | 该值为标识顺序以及符号，<br />例如：a=b=c：111，a=b>c：112，a>b>c：123 |\n|  └value | String | 是 | 相关度规则，**TITLE**，**TAG**，**CHANNEL**，**AUTHOR** |\n|   └settings | NewItemSetting | 是 | 新品定义规则配置 |\n|       └selectType | String | 是 | QUERY_PUB_TIME，固定字符串 |\n|       └selectionOperation | String | 是 | OPERATOR_LOWER，固定字符串 |\n|       └selectValue | int | 是 | 新品定义的时间，秒级别时间戳|\n|   └settings | SimilaritySetting |  | 标题相似度规则 |\n|       └windowSize | int |  | 重复个数，标题相似度这个规则不需要修改 |\n|       └repeatLimit | int |  | 时间窗口 ，标题相似度这个规则不需要修改|\n|       └type | String |  | title，固定字符串 |\n|       └status | boolean |  | 标题相似度规则是否开启，**true**：是，**false**：否|\n| topParams | List | 是 | 置顶规则物品列表 |\n| └itemId | String | 是 | 物品ID|\n| └itemType | String | 是 | 物品类型 |\n| └title | String | 是 | 标题 |\n| └categoryPath | String | 是 | 类目 |\n| └channel | String | 是 | 渠道（内容/新闻） |\n| └author | String | 是 | 作者（内容/新闻） |\n| └brandId | String | 是 | 品牌（电商） |\n| └shopId | String | 是 | 店铺（电商） |\n| fixedPositionParams | List<Fixed> | 是 | 定坑规则列表 |\n| └positions | List<Long> | 是 | 位置列表，格式为[坑位ID1,坑位ID2] |\n| └selectType | String | 是 | 选品类型，固定值为QUERY_ITEM_ID_AND_TYPE |\n| └selectionOperation | String | 是 | 选品规则，固定值为QUERY_VALUE_IN |\n| └selectValue | String | 是 | 选品物品，格式为1:item;2:item |"}