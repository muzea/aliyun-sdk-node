{"summary":"从因无RAM权限导致的请求被拒绝访问的响应体中解码无权限诊断信息。","methods":["get","post"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"EncodedDiagnosticMessage","in":"query","schema":{"description":"API请求因无权限被拒绝访问时，请求响应体中返回的编码的诊断信息。","type":"string","required":false,"example":"AQEAAAAAZBgxr0U1MjA1NTM1LUM4BBktMzE5RS1CODgxLUU1QTI0RDNFQTM1****"}}],"responses":{"200":{"headers":{},"schema":{"title":"Schema of Response","description":"返回结果。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"D2331703-AADF-5564-BA9B-26CD51A33BA0"},"DecodedDiagnosticMessage":{"description":"解码的诊断信息。","type":"object","properties":{"ExplicitDeny":{"description":"是否是显式拒绝。","type":"boolean","enumValueTitles":{"true":"是显示拒绝","false":"不是显示拒绝"},"example":"true"},"NoPermissionPolicyType":{"description":"产生无权限的策略类型。","type":"string","enumValueTitles":{"AssumeRolePolicy":"角色信任策略","ControlPolicy":"管控策略","AccountLevelIdentityBasedPolicy":"基于身份策略（账号级）","ResourceGroupLevelIdentityBasedPolicy":"基于身份策略（资源组级）","SessionPolicy":"会话策略"},"example":"AccountLevelIdentityBasedPolicy"},"AuthAction":{"description":"用户请求中用于鉴权的操作信息。","type":"string","example":"ram:DecodeDiagnosticMessage"},"AuthResource":{"description":"用户请求中用于鉴权的资源信息。","type":"string","example":"*"},"AuthPrincipal":{"description":"用户请求中用于鉴权的主体信息。","type":"object","properties":{"AuthPrincipalType":{"description":"用户请求中用于鉴权的身份类型。","type":"string","enumValueTitles":{"SubUser":"RAM用户","AssumedRoleUser":"RAM角色","Federated":"SSO联合身份"},"example":"SubUser"},"AuthPrincipalOwnerId":{"description":"用户请求中用于鉴权的身份所属的阿里云账号UID信息。","type":"string","example":"196813200012****"},"AuthPrincipalDisplayName":{"description":"用户请求中用于鉴权的身份标识。具体如下：\n\n- RAM用户：提供的是RAM用户的UID信息。\n- RAM角色：提供的是角色名称和角色会话名称（例如：RoleName:RoleSessionName）。\n- SSO联合身份：提供的是身份提供商类型和身份提供商名称（例如：saml-provider/AzureAD）。","type":"string","example":"28877424437521****"}}},"AuthConditions":{"description":"用户请求中用于鉴权的条件列表。","type":"array","items":{"description":"鉴权条件。","type":"object","properties":{"ConditionKey":{"description":"鉴权条件Key。","type":"string","example":"acs:SourceIp"},"ConditionValues":{"description":"鉴权条件Key对应的值列表。","type":"array","items":{"description":"鉴权条件Key对应的条件值。","type":"string","example":"172.16.215.218"}}}}},"MatchedPolicies":{"description":"鉴权命中的策略列表。","type":"array","items":{"description":"鉴权命中的策略。","type":"object","properties":{"Effect":{"description":"策略效果。","type":"string","enumValueTitles":{"Deny":"拒绝","Allow":"允许"},"example":"Deny"},"PolicyIdentifier":{"description":"策略名称信息。具体如下：\n- 管控策略：管控策略ID。\n- RAM权限策略：权限策略名称。","type":"string","example":"MyPolicyName"},"PolicyType":{"description":"策略类型。","type":"string","enumValueTitles":{"Custom":"自定义策略","System":"系统策略"},"example":"Custom"},"PolicyVersion":{"description":"策略版本号。\n> 仅自定义策略有版本号。","type":"string","example":"v1"},"AttachedEntityType":{"description":"策略授权的实体类型。","type":"string","enumValueTitles":{"RamUser":"RAM用户","RamRole":"RAM角色","ResourceDirectoryTarget":"资源目录实体","RamGroup":"RAM用户组"},"example":"RamUser"},"AttachedScope":{"description":"策略授权范围。","type":"string","enumValueTitles":{"Account":"阿里云账号","Folder":"资源目录资源夹","ResourceGroup":"资源组"},"example":"Account"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"NotSupport","errorMessage":"This method can only be invoked by customer, sub user and assumed role user."},{"errorCode":"EncodedMessageExpire","errorMessage":"The EncodedDiagnosticMessage is expired."}],"403":[{"errorCode":"NoPermission","errorMessage":"You do not have the required permissions."}],"404":[{"errorCode":"SearchInaccurate","errorMessage":"The search result is inaccurate, please retry later."},{"errorCode":"EntityNotExist","errorMessage":"The specific DecodedDiagnosticMessage cannot be found."}],"429":[{"errorCode":"TooManyRequests","errorMessage":"Too many search requests at same time, please retry later."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"D2331703-AADF-5564-BA9B-26CD51A33BA0\\\",\\n  \\\"DecodedDiagnosticMessage\\\": {\\n    \\\"ExplicitDeny\\\": true,\\n    \\\"NoPermissionPolicyType\\\": \\\"AccountLevelIdentityBasedPolicy\\\",\\n    \\\"AuthAction\\\": \\\"ram:DecodeDiagnosticMessage\\\",\\n    \\\"AuthResource\\\": \\\"*\\\",\\n    \\\"AuthPrincipal\\\": {\\n      \\\"AuthPrincipalType\\\": \\\"SubUser\\\",\\n      \\\"AuthPrincipalOwnerId\\\": \\\"196813200012****\\\",\\n      \\\"AuthPrincipalDisplayName\\\": \\\"28877424437521****\\\"\\n    },\\n    \\\"AuthConditions\\\": [\\n      {\\n        \\\"ConditionKey\\\": \\\"acs:SourceIp\\\",\\n        \\\"ConditionValues\\\": [\\n          \\\"172.16.215.218\\\"\\n        ]\\n      }\\n    ],\\n    \\\"MatchedPolicies\\\": [\\n      {\\n        \\\"Effect\\\": \\\"Deny\\\",\\n        \\\"PolicyIdentifier\\\": \\\"MyPolicyName\\\",\\n        \\\"PolicyType\\\": \\\"Custom\\\",\\n        \\\"PolicyVersion\\\": \\\"v1\\\",\\n        \\\"AttachedEntityType\\\": \\\"RamUser\\\",\\n        \\\"AttachedScope\\\": \\\"Account\\\"\\n      }\\n    ]\\n  }\\n}\",\"type\":\"json\"}]","title":"解码无权限诊断信息"}