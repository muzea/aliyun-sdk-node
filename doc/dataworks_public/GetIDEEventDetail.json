{"summary":"根据DataWorks开放消息的消息ID，查询触发扩展点事件时的扩展点数据快照。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"101710","abilityTreeNodes":["FEATUREdide8FM783"]},"parameters":[{"name":"MessageId","in":"formData","schema":{"description":"DataWorks开放消息的消息ID。当触发扩展点事件后，您可以从接收到的事件消息中获取消息ID。\n\n<props=\"china\">消息格式，可参考[消息格式](~~215367~~)。</props>\n","type":"string","required":true,"example":"8abcb91f-d266-4073-b907-2ed670378ed1"}},{"name":"ProjectId","in":"formData","schema":{"description":"DataWorks工作空间的ID，您可以通过解析DataWorks开放消息获取空间ID。","type":"integer","format":"int64","required":true,"example":"10000"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回结果。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求的唯一标识，用于后续错误排查使用。","type":"string","example":"8abcb91f-d266-4073-b907-2ed670378ed1"},"EventDetail":{"description":"触发扩展点事件时的数据快照。\n\n不同类型的消息事件，数据快照的有效字段存在差异，具体请参考各消息事件的字段说明。","type":"object","properties":{"FileExecutionCommand":{"description":"文件代码执行时的快照，当Message类型为IDE_FILE_EXECUTE_BEFORE时有效。","type":"object","properties":{"FileId":{"description":"文件的ID。","type":"integer","format":"int64","example":"1234123"},"DataSourceName":{"description":"文件关联的数据源唯一标识。","type":"string","example":"odps_source"},"Content":{"description":"生成本次文件版本的文件代码。","type":"string","example":"SHOW TABLES;"},"FileType":{"description":"文件类型。不同文件类型其代码不同，常用的代码及其表示的类型包括6（Shell）、10（ODPS SQL）、11（ODPS MR）、23（数据集成）、24（ODPS Script）、99（虚拟节点）、221（PyODPS 2）、225（ODPS Spark）、227（EMR Hive）、228（EMR Spark）、229（EMR Spark SQL）、230（EMR MR）、239（OSS对象检查）、257（EMR Shell）、258（EMR Spark Shell）、259（EMR Presto）、260（EMR Impala）、900（实时同步）、1089（跨租户节点）、1091（Hologres开发）、1093（Hologres SQL）、1100（赋值节点）、1221（PyODPS 3）。","type":"integer","format":"int64","example":"10"}}},"DeletedFile":{"description":"删除文件时的快照信息，当Message类型为IDE_FILE_DELETE_BEFORE时有效。","type":"object","properties":{"Owner":{"description":"文件责任人。","type":"string","example":"7384234****"},"FileType":{"description":"文件类型。不同文件类型其代码不同，常用的代码及其表示的类型包括6（Shell）、10（ODPS SQL）、11（ODPS MR）、23（数据集成）、24（ODPS Script）、99（虚拟节点）、221（PyODPS 2）、225（ODPS Spark）、227（EMR Hive）、228（EMR Spark）、229（EMR Spark SQL）、230（EMR MR）、239（OSS对象检查）、257（EMR Shell）、258（EMR Spark Shell）、259（EMR Presto）、260（EMR Impala）、900（实时同步）、1089（跨租户节点）、1091（Hologres开发）、1093（Hologres SQL）、1100（赋值节点）、1221（PyODPS 3）。","type":"integer","format":"int64","example":"10"},"CurrentVersion":{"description":"当前文件的最新版本。","type":"integer","format":"int64","example":"1"},"BusinessId":{"description":"文件所属的业务流程ID。","type":"integer","format":"int64","example":"74328"},"FileName":{"description":"文件名称。","type":"string","example":"hello_dataworks.sql"},"DataSourceName":{"description":"文件关联的数据源唯一标识。","type":"string","example":"odps_source"},"UseType":{"description":"文件所属的功能模块。取值如下：\n- NORMAL：数据开发\n- MANUAL：手动任务\n- MANUAL_BIZ：手动业务流程\n- SKIP：数据开发的空跑调度\n- ADHOCQUERY：临时查询\n- COMPONENT：组件管理","type":"string","example":"NORMAL"},"FolderId":{"description":"文件所属的文件夹ID，您可以调用[GetFolder](~~173952~~)接口，通过文件夹ID查询文件详情。","type":"string","example":"aldurie78l2falure"},"ParentFileId":{"description":"文件所属的循环节点或遍历节点的节点ID。","type":"integer","format":"int64","example":"1234122"},"Content":{"description":"生成本次文件版本的文件代码。","type":"string","example":"SHOW TABLES;"},"NodeId":{"description":"调度节点的ID。","type":"integer","format":"int64","example":"421429"},"FileId":{"description":"文件的ID。","type":"integer","format":"int64","example":"1234123"}}},"CommittedFile":{"description":"文件提交和发布时的快照。\n\n仅当Message类型为IDE_FILE_SUBMIT_BEFORE或IDE_FILE_DEPLOY_BEFORE时有效。","type":"object","properties":{"FileId":{"description":"文件的ID。","type":"integer","format":"int64","example":"1234123"},"Content":{"description":"生成本次文件版本的文件代码。","type":"string","example":"SHOW TABLES;"},"Committor":{"description":"生成本次文件版本的阿里云用户ID。","type":"string","example":"7384234****"},"FileType":{"description":"文件类型。不同文件类型其代码不同，常用的代码及其表示的类型包括6（Shell）、10（ODPS SQL）、11（ODPS MR）、23（数据集成）、24（ODPS Script）、99（虚拟节点）、221（PyODPS 2）、225（ODPS Spark）、227（EMR Hive）、228（EMR Spark）、229（EMR Spark SQL）、230（EMR MR）、239（OSS对象检查）、257（EMR Shell）、258（EMR Spark Shell）、259（EMR Presto）、260（EMR Impala）、900（实时同步）、1089（跨租户节点）、1091（Hologres开发）、1093（Hologres SQL）、1100（赋值节点）、1221（PyODPS 3）。","type":"integer","format":"int64","example":"10"},"ChangeType":{"description":"本次文件版本的变更类型，包括CREATE、UPDATE和DELETE。","type":"string","example":"UPDATE"},"FileName":{"description":"文件名称。","type":"string","example":"hello_dataworks.sql"},"NodeId":{"description":"调度节点的ID。","type":"integer","format":"int64","example":"421429"},"Comment":{"description":"本次文件版本的说明。","type":"string","example":"第二次版本提交"},"UseType":{"description":"文件所属的功能模块。取值如下：\n- NORMAL：数据开发\n- MANUAL：手动任务\n- MANUAL_BIZ：手动业务流程\n- SKIP：数据开发的空跑调度\n- ADHOCQUERY：临时查询\n- COMPONENT：组件管理","type":"string","example":"NORMAL"},"FilePropertyContent":{"description":"文件的更多属性。","type":"object","properties":{"DataSourceName":{"description":"文件关联的数据源唯一标识。","type":"string","example":"odps_source"},"ParentFileId":{"description":"文件所属的循环节点或遍历节点的节点ID。","type":"integer","format":"int64","example":"1234122"},"BusinessId":{"description":"文件所属的业务流程ID。","type":"integer","format":"int64","example":"74328"},"CurrentVersion":{"description":"当前文件的最新版本。","type":"integer","format":"int64","example":"1"},"Owner":{"description":"文件责任人。","type":"string","example":"7384234****"},"FolderId":{"description":"文件所属的文件夹ID，您可以调用[GetFolder](~~173952~~)接口，通过文件夹ID查询文件详情。","type":"string","example":"aldurie78l2falure"}}},"NodeConfiguration":{"description":"文件的调度属性配置。","type":"object","properties":{"RerunMode":{"description":"重跑属性。取值如下：\n- ALL_ALLOWED：运行成功或失败后皆可重跑。\n- FAILURE_ALLOWED：运行成功后不可重跑，运行失败后可以重跑。\n- ALL_DENIED：运行成功或失败皆不可重跑。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>时间属性>重跑属性”配置内容对应。","type":"string","example":"ALL_ALLOWED"},"SchedulerType":{"description":"调度的类型，取值如下：\n- NORMAL：正常调度任务。\n- MANUAL：手动任务，不会被日常调度，对应手动业务流程下的节点。\n- PAUSE：暂停任务。\n- SKIP：空跑任务，被日常调度，但启动调度时直接被置为成功。","type":"string","example":"NORMAL"},"ParaValue":{"description":"调度参数。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>参数”对应。您可以参考[调度参数](~~137548~~)配置。","type":"string","example":"a=x b=y"},"CycleType":{"description":"调度周期的类型，包括NOT_DAY（分钟、小时）和DAY（日、周、月）。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>时间属性>调度周期”对应。","type":"string","example":"DAY"},"DependentNodeIdList":{"description":"当DependentType参数配置为USER_DEFINE时，用于设置当前文件具体依赖的节点ID。依赖多个节点时，使用英文逗号（,）分隔。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>调度依赖>跨周期依赖（原上一周期）”，依赖项选择”其他节点“时配置的内容对应。","type":"string","example":"5,10,15,20"},"ResourceGroupId":{"description":"文件发布成任务后，任务执行时使用的资源组。您可以调用[ListResourceGroups](~~173913~~)获取工作空间可用的资源组列表。","type":"integer","format":"int64","example":"375827434852437"},"AutoRerunTimes":{"description":"自动重跑次数。","type":"integer","format":"int64","example":"3"},"AutoRerunIntervalMillis":{"description":"自动重跑间隔毫秒数。","type":"integer","format":"int64","example":"120000"},"CronExpress":{"description":"调度Cron表达式。","type":"string","example":"00 05 00 * * ?"},"InputList":{"description":"文件依赖的上游文件输出。","type":"array","items":{"description":"依赖的上游文件输出信息。","type":"object","properties":{"Input":{"description":"文件依赖的上游文件的输出名称。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>调度依赖>依赖上游节点“的”上游节点输出名”对应。","type":"string","example":"dw_project_root"},"ParseType":{"description":"配置文件依赖的方式，取值如下：\n- MANUAL：手动配置。\n- AUTO：自动解析。","type":"string","example":"MANUAL"}}}},"OutputList":{"description":"文件的输出。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>调度依赖>本节点输出名称“对应。","type":"array","items":{"description":"文件的输出信息。","type":"object","properties":{"RefTableName":{"description":"文件的输出表名。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>调度依赖>本节点输出名称“的“输出表名”对应。","type":"string","example":"ods_user_info_d"},"Output":{"description":"文件的输出名称。\n\n该参数与[DataWorks控制台](https://workbench.data.aliyun.com/console)中，数据开发任务的“调度配置>调度依赖>本节点输出名称“的“输出名”对应。","type":"string","example":"dw_project.002_out"}}}},"DependentType":{"description":"依赖上一周期的方式。取值如下：\n- SELF：依赖项选择本节点。\n- CHILD：依赖项选择一级子节点。\n- USER_DEFINE：依赖项选择其他节点。\n- NONE：未选择依赖项，即不会依赖上一周期。\n","type":"string","example":"USER_DEFINE"}}}}},"TableModel":{"description":"表提交和发布时的快照，当Message类型为IDE_TABLE_SUBMIT_BEFORE和IDE_TABLE_DEPLOY_BEFORE时有效。","type":"object","properties":{"Env":{"description":"表所属环境。取值如下：\n- DEV：开发环境。\n- PROD：生产环境。","type":"string","example":"DEV"},"LifeCycle":{"description":"表的生命周期。单位为天。","type":"integer","format":"int64","example":"7"},"TableName":{"description":"表名称。","type":"string","example":"tb_hello"},"DataSourceName":{"description":"表所属数据源的唯一标识。","type":"string","example":"odps_source"},"Columns":{"description":"字段列表。","type":"array","items":{"description":"字段信息。","type":"object","properties":{"ColumnName":{"description":"字段名称。","type":"string","example":"ID"},"ColumnType":{"description":"字段类型。","type":"string","example":"BIGINT"},"IsPartitionColumn":{"description":"是否为分区字段，取值如下：\n- true：是分区字段。\n- false：非分区字段。","type":"boolean","example":"false"},"Comment":{"description":"字段备注。","type":"string","example":"ID"}}}},"Comment":{"description":"表的备注信息。","type":"string","example":"新建的一张表。"},"Location":{"description":"外部表的Location信息。","type":"string","example":"hdfs://path/to/object"}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InternalError.UserId.Missing","errorMessage":"An internal system error occurred. Try again later."}],"403":[{"errorCode":"Forbidden.Access","errorMessage":"Access is forbidden. Please first activate DataWorks Enterprise Edition or Flagship Edition."}],"429":[{"errorCode":"Throttling.Api","errorMessage":"The request for this resource has exceeded your available limit."},{"errorCode":"Throttling.System","errorMessage":"The DataWorks system is busy. Try again later."},{"errorCode":"Throttling.User","errorMessage":"Your request is too frequent. Try again later."}],"500":[{"errorCode":"InternalError.System","errorMessage":"An internal system error occurred. Try again later."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"8abcb91f-d266-4073-b907-2ed670378ed1\\\",\\n  \\\"EventDetail\\\": {\\n    \\\"FileExecutionCommand\\\": {\\n      \\\"FileId\\\": 1234123,\\n      \\\"DataSourceName\\\": \\\"odps_source\\\",\\n      \\\"Content\\\": \\\"SHOW TABLES;\\\",\\n      \\\"FileType\\\": 10\\n    },\\n    \\\"DeletedFile\\\": {\\n      \\\"Owner\\\": \\\"7384234****\\\",\\n      \\\"FileType\\\": 10,\\n      \\\"CurrentVersion\\\": 1,\\n      \\\"BusinessId\\\": 74328,\\n      \\\"FileName\\\": \\\"hello_dataworks.sql\\\",\\n      \\\"DataSourceName\\\": \\\"odps_source\\\",\\n      \\\"UseType\\\": \\\"NORMAL\\\",\\n      \\\"FolderId\\\": \\\"aldurie78l2falure\\\",\\n      \\\"ParentFileId\\\": 1234122,\\n      \\\"Content\\\": \\\"SHOW TABLES;\\\",\\n      \\\"NodeId\\\": 421429,\\n      \\\"FileId\\\": 1234123\\n    },\\n    \\\"CommittedFile\\\": {\\n      \\\"FileId\\\": 1234123,\\n      \\\"Content\\\": \\\"SHOW TABLES;\\\",\\n      \\\"Committor\\\": \\\"7384234****\\\",\\n      \\\"FileType\\\": 10,\\n      \\\"ChangeType\\\": \\\"UPDATE\\\",\\n      \\\"FileName\\\": \\\"hello_dataworks.sql\\\",\\n      \\\"NodeId\\\": 421429,\\n      \\\"Comment\\\": \\\"第二次版本提交\\\",\\n      \\\"UseType\\\": \\\"NORMAL\\\",\\n      \\\"FilePropertyContent\\\": {\\n        \\\"DataSourceName\\\": \\\"odps_source\\\",\\n        \\\"ParentFileId\\\": 1234122,\\n        \\\"BusinessId\\\": 74328,\\n        \\\"CurrentVersion\\\": 1,\\n        \\\"Owner\\\": \\\"7384234****\\\",\\n        \\\"FolderId\\\": \\\"aldurie78l2falure\\\"\\n      },\\n      \\\"NodeConfiguration\\\": {\\n        \\\"RerunMode\\\": \\\"ALL_ALLOWED\\\",\\n        \\\"SchedulerType\\\": \\\"NORMAL\\\",\\n        \\\"ParaValue\\\": \\\"a=x b=y\\\",\\n        \\\"CycleType\\\": \\\"DAY\\\",\\n        \\\"DependentNodeIdList\\\": \\\"5,10,15,20\\\",\\n        \\\"ResourceGroupId\\\": 375827434852437,\\n        \\\"AutoRerunTimes\\\": 3,\\n        \\\"AutoRerunIntervalMillis\\\": 120000,\\n        \\\"CronExpress\\\": \\\"00 05 00 * * ?\\\",\\n        \\\"InputList\\\": [\\n          {\\n            \\\"Input\\\": \\\"dw_project_root\\\",\\n            \\\"ParseType\\\": \\\"MANUAL\\\"\\n          }\\n        ],\\n        \\\"OutputList\\\": [\\n          {\\n            \\\"RefTableName\\\": \\\"ods_user_info_d\\\",\\n            \\\"Output\\\": \\\"dw_project.002_out\\\"\\n          }\\n        ],\\n        \\\"DependentType\\\": \\\"USER_DEFINE\\\"\\n      }\\n    },\\n    \\\"TableModel\\\": {\\n      \\\"Env\\\": \\\"DEV\\\",\\n      \\\"LifeCycle\\\": 7,\\n      \\\"TableName\\\": \\\"tb_hello\\\",\\n      \\\"DataSourceName\\\": \\\"odps_source\\\",\\n      \\\"Columns\\\": [\\n        {\\n          \\\"ColumnName\\\": \\\"ID\\\",\\n          \\\"ColumnType\\\": \\\"BIGINT\\\",\\n          \\\"IsPartitionColumn\\\": false,\\n          \\\"Comment\\\": \\\"ID\\\"\\n        }\\n      ],\\n      \\\"Comment\\\": \\\"新建的一张表。\\\",\\n      \\\"Location\\\": \\\"hdfs://path/to/object\\\"\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetIDEEventDetailResponse>\\n    <RequestId>8abcb91f-d266-4073-b907-2ed670378ed1</RequestId>\\n    <EventDetail>\\n        <FileExecutionCommand>\\n            <FileId>1234123</FileId>\\n            <DataSourceName>odps_source</DataSourceName>\\n            <Content>SHOW TABLES;</Content>\\n            <FileType>10</FileType>\\n        </FileExecutionCommand>\\n        <DeletedFile>\\n            <Owner>7384234****</Owner>\\n            <FileType>10</FileType>\\n            <CurrentVersion>1</CurrentVersion>\\n            <BusinessId>74328</BusinessId>\\n            <FileName>hello_dataworks.sql</FileName>\\n            <DataSourceName>odps_source</DataSourceName>\\n            <UseType>NORMAL</UseType>\\n            <FolderId>aldurie78l2falure</FolderId>\\n            <ParentFileId>1234122</ParentFileId>\\n            <Content>SHOW TABLES;</Content>\\n            <NodeId>421429</NodeId>\\n            <FileId>1234123</FileId>\\n        </DeletedFile>\\n        <CommittedFile>\\n            <FileId>1234123</FileId>\\n            <Content>SHOW TABLES;</Content>\\n            <Committor>7384234****</Committor>\\n            <FileType>10</FileType>\\n            <ChangeType>UPDATE</ChangeType>\\n            <FileName>hello_dataworks.sql</FileName>\\n            <NodeId>421429</NodeId>\\n            <Comment>第二次版本提交</Comment>\\n            <UseType>NORMAL</UseType>\\n            <FilePropertyContent>\\n                <DataSourceName>odps_source</DataSourceName>\\n                <ParentFileId>1234122</ParentFileId>\\n                <BusinessId>74328</BusinessId>\\n                <CurrentVersion>1</CurrentVersion>\\n                <Owner>7384234****</Owner>\\n                <FolderId>aldurie78l2falure</FolderId>\\n            </FilePropertyContent>\\n            <NodeConfiguration>\\n                <RerunMode>ALL_ALLOWED</RerunMode>\\n                <SchedulerType>NORMAL</SchedulerType>\\n                <ParaValue>a=x b=y</ParaValue>\\n                <CycleType>DAY</CycleType>\\n                <DependentNodeIdList>5,10,15,20</DependentNodeIdList>\\n                <ResourceGroupId>375827434852437</ResourceGroupId>\\n                <AutoRerunTimes>3</AutoRerunTimes>\\n                <AutoRerunIntervalMillis>120000</AutoRerunIntervalMillis>\\n                <CronExpress>00 05 00 * * ?</CronExpress>\\n                <InputList>\\n                    <Input>dw_project_root</Input>\\n                    <ParseType>MANUAL</ParseType>\\n                </InputList>\\n                <OutputList>\\n                    <RefTableName>ods_user_info_d</RefTableName>\\n                    <Output>dw_project.002_out</Output>\\n                </OutputList>\\n                <DependentType>USER_DEFINE</DependentType>\\n            </NodeConfiguration>\\n        </CommittedFile>\\n        <TableModel>\\n            <Env>DEV</Env>\\n            <LifeCycle>7</LifeCycle>\\n            <TableName>tb_hello</TableName>\\n            <DataSourceName>odps_source</DataSourceName>\\n            <Columns>\\n                <ColumnName>ID</ColumnName>\\n                <ColumnType>BIGINT</ColumnType>\\n                <IsPartitionColumn>false</IsPartitionColumn>\\n                <Comment>ID</Comment>\\n            </Columns>\\n            <Comment>新建的一张表。</Comment>\\n            <Location>hdfs://path/to/object</Location>\\n        </TableModel>\\n    </EventDetail>\\n</GetIDEEventDetailResponse>\",\"errorExample\":\"\"}]","title":"查询触发扩展点事件时的数据快照","description":"\n","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}