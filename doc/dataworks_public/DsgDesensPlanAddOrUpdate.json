{"summary":"调用DsgDesensPlanAddOrUpdate接口新建或编辑数据脱敏规则。","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"list","abilityTreeCode":"219759","abilityTreeNodes":["FEATUREdideRZM9W6"]},"parameters":[{"name":"DesensRules","in":"query","style":"json","schema":{"description":"需要新增或编辑的脱敏规则集合。","type":"array","items":{"description":"脱敏规则信息。","type":"object","properties":{"Id":{"description":"脱敏规则ID。您可调用[DsgDesensPlanQueryList](~~2786578~~)接口查询。","type":"integer","format":"int32","required":false,"example":"123"},"DataType":{"description":"敏感字段类型。","type":"string","required":true,"example":"phone"},"RuleName":{"description":"脱敏规则名称。","type":"string","required":true,"example":"phone_hash"},"Status":{"description":"脱敏规则的生效状态。取值如下：\n- 0：失效。\n- 1：生效。","type":"integer","format":"int32","required":false,"example":"1"},"SceneIds":{"description":"二级脱敏场景。","type":"array","items":{"description":"二级脱敏场景ID。此处输入的二级脱敏场景需要未配置DataType参数指定的敏感字段类型脱敏规则。您可调用[DsgSceneQuerySceneListByName](~~2786322~~)查询脱敏场景ID。","type":"integer","format":"int32","required":false,"example":"123"},"required":true},"Owner":{"description":"脱敏规则的负责人。","type":"string","required":true,"example":"test_user"},"CheckWatermark":{"description":"是否添加水印。取值如下：\n- true：是\n- false：否","type":"boolean","required":false,"example":"true"},"DesensPlan":{"description":"脱敏规则。","type":"object","properties":{"DesensPlanType":{"description":"脱敏规则中配置的脱敏方式。取值如下：\n- 哈希：hash\n- 假名：mapping\n- 掩盖：mask\n- 字符替换：charreplacement\n- 区间变换：intervalselect\n- 取整：decimalpoint\n- 置空：emptydesens","type":"string","required":true,"example":"hash"},"ExtParam":{"description":"脱敏规则参数。","type":"object","required":false,"additionalProperties":{"type":"any","description":"脱敏规则参数配置，根据您要配置的脱敏规则添加不同参数，具体内容请参见下文示例。","example":"{           \"algo\": \"MD5\", \"salt\":6         }"}}},"required":true}},"required":false},"required":true}}],"responses":{"200":{"schema":{"title":"OpenApiResultModel<Boolean>","description":"OpenApiResultModel<Boolean>","type":"object","properties":{"Success":{"description":"调用是否成功。取值如下：\ntrue：调用成功。\nfalse：调用失败。","type":"boolean","example":"true"},"ErrorCode":{"description":"错误码。","type":"string","example":"1029030003"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"param error"},"HttpStatusCode":{"description":"HTTP状态码。","type":"integer","format":"int32","example":"400"},"Data":{"description":"新增或编辑的执行结果。","type":"boolean","example":"true"},"RequestId":{"description":"请求的ID。用于定位日志，排查问题。","type":"string","example":"102400001"}}}}},"errorCodes":{"400":[{"errorCode":"PARAMS.ERROR","errorMessage":"param error."},{"errorCode":"DESENSPLAN.DATATYPE.ERROR","errorMessage":"Sensitive type already has a desensitization rule."},{"errorCode":"DESENSPLAN.DATATYPENOTEXIST.ERROR","errorMessage":"Sensitive type not exist."},{"errorCode":"DESENSPLAN.ID.ERROR","errorMessage":"Desensitization rule ID does not exist."},{"errorCode":"DESENSPLAN.PAGESIZE.ERROR","errorMessage":"Page size is too large, maximum of 100."},{"errorCode":"DESENSPLAN.PARAM.ERROR","errorMessage":"Desensitization rule parameter error."},{"errorCode":"DESENSPLAN.SCENECODE.ERROR","errorMessage":"Scene code does not exist."},{"errorCode":"DESENSPLAN.SCENEID.ERROR","errorMessage":"Scene ID does not exist."},{"errorCode":"DESENSPLAN.SCENEIDLEVEL.ERROR","errorMessage":"The scene is not a secondary scene."},{"errorCode":"DESENSPLAN.SIZE.ERROR","errorMessage":"The number of desens plan exceeds the limit."}],"403":[{"errorCode":"PERMISSION.DENIED.ERROR","errorMessage":"Permission denied"}],"500":[{"errorCode":"UNKNOWN.ERROR","errorMessage":"unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Success\\\": true,\\n  \\\"ErrorCode\\\": \\\"1029030003\\\",\\n  \\\"ErrorMessage\\\": \\\"param error\\\",\\n  \\\"HttpStatusCode\\\": 400,\\n  \\\"Data\\\": true,\\n  \\\"RequestId\\\": \\\"102400001\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DsgDesensPlanAddOrUpdateResponse>\\n    <Success>true</Success>\\n    <ErrorCode>1029030003</ErrorCode>\\n    <ErrorMessage>param error</ErrorMessage>\\n    <HttpStatusCode>400</HttpStatusCode>\\n    <Data>true</Data>\\n    <RequestId>102400001</RequestId>\\n</DsgDesensPlanAddOrUpdateResponse>\",\"errorExample\":\"\"}]","title":"新建或编辑数据脱敏规则","requestParamsDescription":"ExtParam为动态参数，对于不同脱敏规则配置不同，参考示例如下：\n\n```\n哈希：\n{\n    \"algo\": \"MD5\",\n    \"salt\": 6\n}\n假名：\n{\n    \"charset\": \"Aa\",\n    \"salt\": 6\n}\n掩盖：\n{\n    \"before\": 3,\n    \"after\": 4\n}\n自定义掩盖：\n{\n    \"separatorList\": [\n        {\n            \"desens\": true,\n            \"left\": 3\n        },\n        {\n            \"desens\": false,\n            \"left\": 6\n        },\n        {\n            \"desens\": true,\n            \"left\": -99\n        }\n    ]\n}\n样本值字符替换：\n{\n    \"library\": \"test_library\",\n    \"position\": 3\n}\n固定值字符替换：\n{\n    \"replace\": \"repData\",\n    \"position\": 3\n}\n随机字符替换：\n{\n    \"replace\": \"repData\"\n}\n自定义字符替换：\n{\n    \"separatorList\": [\n        {\n            \"desensParam\": {\n                \"replace\": \"repData\"\n            },\n            \"left\": 3\n        },\n        {\n            \"desensParam\": {\n                \"library\": \"test_library\"\n            },\n            \"left\": 6\n        },\n        {\n            \"desensParam\": {\n            },\n            \"left\": 99\n        }\n    ]\n}\n区间变换：\n{\n    \"intervalselects\": [\n        {\n            \"desens\": \"1\",\n            \"interval\": [\n                \"1\",\n                \"100\"\n            ]\n        }\n    ]\n}\n取整：\n{\n\"point\":3\n}\n置空：\n{}\n```\n\n具体支持的脱敏方式及相关规则，可参考[DsgQueryDefaultTemplates](~~2786306~~)接口查询。"}