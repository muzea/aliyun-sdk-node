{"methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","systemTags":{"operationType":"update"},"parameters":[{"name":"DomainName","in":"query","schema":{"description":"加速域名，多个域名用英文逗号（,）分隔。\n","type":"string","required":true,"example":"example.com"}},{"name":"Functions","in":"query","schema":{"description":"功能列表，格式如下：\n\n- functionName（功能名称，必填）：可配置功能请参见[功能列表](~~410622~~)，多个参数之间用半角逗号（,）分隔。\n\n- argName（参数名称，必填）：functionName的配置项（可配置多个配置项）。\n\n- argValue（参数值，必填）：functionName的配置项的取值。\n\n- parentid（规则条件ID，非必填）：通过配置[域名配置功能参数](~~410622~~)中的功能函数condition（规则引擎），可以创建出规则条件（规则条件可以通过识别用户请求中携带的各种参数来匹配和过滤用户请求），每一个规则条件被创建以后都会生成一个对应的[configid](~~410558~~)，configid可以被当作ParentId参数被其他功能函数引用，这样规则条件就可以与功能配置一起组合形成更灵活的配置。\n\nparentId为 -1：表示删除该配置里面已有的规则条件。\n\n  ```\n \"functionArgs\": [{\n     \"argName\": \"功能参数A\", \n     \"argValue\": \"功能参数A对应的值\"\n    }, \n  {\n    \"argName\": \"功能参数B\", \n    \"argValue\": \"功能参数B对应的值\"\n     }], \n```\n\n \"functionName\": \"功能名称\",\n \"parentId\": 选填项，对应引用规则条件的configid\n}]\n\n不使用parentId的情况下，配置示例如下： 使用函数origin_request_header添加回源HTTP请求头的时候引用了configid=222728944812032的规则条件，请求参数如下：\n\n ```\n \"functionArgs\": [{\n            \"argName\": \"header_operation_type\",\n            \"argValue\": \"add\"\n        }, {\n            \"argName\": \"header_name\",\n            \"argValue\": \"Accept-Encoding\"\n        }, {\n            \"argName\": \"header_value\",\n            \"argValue\": \"gzip\"\n        }, {\n            \"argName\": \"duplicate\",\n            \"argValue\": \"off\"\n        }],\n        \"functionName\": \"origin_request_header\"\n}]\n\n```\n\n使用parentId的情况下，配置示例如下： 使用函数origin_request_header添加回源HTTP请求头的时候引用了configid=222728944812032的规则条件，请求参数如下：\n\n```\n        \"functionArgs\": [{\n            \"argName\": \"header_operation_type\",\n            \"argValue\": \"add\"\n        }, {\n            \"argName\": \"header_name\",\n            \"argValue\": \"Accept-Encoding\"\n        }, {\n            \"argName\": \"header_value\",\n            \"argValue\": \"gzip\"\n        }, {\n            \"argName\": \"duplicate\",\n            \"argValue\": \"off\"\n        }],\n        \"functionName\": \"origin_request_header\",\n        \"parentId\": 222728944812032\n}]\n```\n\n对一个已经使用了parentId的功能配置删除对parentId的引用，配置示例如下： 函数origin_request_header添加回源HTTP请求头的时候已经引用了configid=222728944812032的规则条件，现在要删掉对规则条件的引用，请求参数如下：\n\n```\n        \"functionArgs\": [{\n            \"argName\": \"header_operation_type\",\n            \"argValue\": \"add\"\n        }, {\n            \"argName\": \"header_name\",\n            \"argValue\": \"Accept-Encoding\"\n        }, {\n            \"argName\": \"header_value\",\n            \"argValue\": \"gzip\"\n        }, {\n            \"argName\": \"duplicate\",\n            \"argValue\": \"off\"\n        }],\n        \"functionName\": \"origin_request_header\",\n        \"parentId\": -1\n}]\n```","type":"string","required":true,"example":"\t\n[{\"functionArgs\": [{\"argName\": \"key\",\"argValue\": \"Content-Encoding\"},{\"argName\": \"value\",\"argValue\": \"gzip\"}],\"functionName\": \"set_resp_header\"} ]"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"04F0F334-1335-436C-A1D7-6C044FE73368"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidFunctionName.ValueNotSupported","errorMessage":"%s"},{"errorCode":"InvalidArgName.ValueNotSupported","errorMessage":"%s"},{"errorCode":"InvalidArgValue.Malformed","errorMessage":"%s"},{"errorCode":"InvalidRule.Malformed","errorMessage":"%s"},{"errorCode":"ConfigurationConflicts","errorMessage":"The staging environment has a configuration in effect. You cannot modify the production environment configuration."},{"errorCode":"GrayConfigExist","errorMessage":"A canary configuration already exists under the domain."},{"errorCode":"InvalidDomain.BelongToConfigGroup","errorMessage":"The domain is bound to a configuration group. Modify the domain in the configuration group."},{"errorCode":"EdgeScriptCountExceedLimit","errorMessage":"The number of rules exceeds the default limit."},{"errorCode":"EdgeScripOptionsHasInnerConfig","errorMessage":"The extension has a background configuration or a parameter of this configuration is invalid. For more information, submit a ticket."},{"errorCode":"EdgeScriptGrammarNotSupport","errorMessage":"A background customization rule exists or a parameter of this configuration is invalid. For more information, submit a ticket."},{"errorCode":"EdgeScriptNotSupportJs","errorMessage":"JavaScript rules are not supported. For more information, submit a ticket."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"04F0F334-1335-436C-A1D7-6C044FE73368\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SetDcdnDomainStagingConfigResponse>\\r\\n<RequestId>04F0F334-1335-436C-A1D7-6C044FE73368</RequestId>\\r\\n</SetDcdnDomainStagingConfigResponse>\",\"errorExample\":\"\"}]","title":"设置或修改域名配置（灰度）","summary":"调用SetDcdnDomainStagingConfig设置或修改域名配置（灰度）。","description":"> 单用户调用频率：30次/秒。","requestParamsDescription":"某些功能可以设置多条记录，例如：edge_function，当需要更新其中某条记录时，可通过该条记录的ConfigId（Long类型）来指定要修改的配置项。格式如下：\n```\n[{\"functionArgs\":[{\"argName\":\"enable\",\"argValue\":\"on\"},{\"argName\":\"pri\",\"argValue\":\"1\"},{\"argName\":\"rule\",\"argValue\":\"yyy\"}],\"ConfigId\":123456,\"functionName\":\"edge_function\"}]\n```\n\n**功能说明**\n所有参数值均按照字符串类型处理。\n| 功能名称  | 参数 |\n| --- | --- |\n| edge_function：边缘函数  | 必填参数：<br />rule：DSL规则。<br />pri：优先级。<br />enable：本条规则是否生效，取值：on或off。<br /> 可选参数：<br />name：规则名称。<br />pos：规则执行位置。DCDN域名仅支持head，不支持foot。<br />brk：命中本条规则后，当前执行位置剩余规则均跳过。<br />option：option管控。<br />grammar：grammar管控。可选值：空、es2、js。<br />jsmode：js域名白单管控。可选值：redirect、bypass。<br /> |"}