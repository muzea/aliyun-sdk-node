{"summary":"本文为您介绍车辆拥堵检测DetectVehicleICongestion的语法及示例。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ImageURL","in":"formData","schema":{"title":"A short description of struct","description":"图像URL地址。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。","type":"string","required":true,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/objectdet/DetectVehicleICongestion/DetectVehicleICongestion1.jpg","maxItems":1,"minItems":20,"isFileTransferUrl":true}},{"name":"RoadRegions","in":"formData","style":"json","schema":{"description":"多个区域。格式为[RoadRegion\\_1, RoadRegion\\_2, ..., RoadRegion\\_N]。","type":"array","items":{"type":"object","properties":{"RoadRegion":{"description":"任意四边形的四个顶点的坐标X和Y，格式为`[x1,y1,x2,y2,x3,y3,x4,y4]`。","type":"array","items":{"type":"object","properties":{"Point":{"description":"四边形的顶点坐标。","type":"object","properties":{"X":{"description":"坐标点的X值。","type":"integer","format":"int64","required":true,"example":"400"},"Y":{"description":"坐标点的Y值。","type":"integer","format":"int64","required":true,"example":"400"}},"required":true}},"required":false},"required":true}},"required":false},"required":true}},{"name":"PreRegionIntersectFeatures","in":"formData","style":"json","schema":{"description":"前一帧画面与各个指定区域相交集的车辆检测框对应的车辆特征。","type":"array","items":{"type":"object","properties":{"Features":{"description":"特征为Base64编码的字符串。","type":"array","items":{"description":"Base64编码的字符串。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。","type":"string","required":false,"example":"AEAMQQAAAA****ABhC"},"required":false}},"required":false},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"4FC381BB-04F2-50F4-B54B-593042BCF3C6"},"Data":{"description":"返回的结果数据内容。","type":"object","properties":{"Elements":{"description":"车辆检测框的集合。","type":"array","items":{"type":"object","properties":{"Boxes":{"description":"检测框坐标，格式为`[left, top, right, bottom]`。","type":"array","items":{"type":"object","properties":{"Left":{"description":"矩形区域的左上角横轴坐标。","type":"integer","format":"int64","example":"341"},"Top":{"description":"矩形区域的左上角纵轴坐标。","type":"integer","format":"int64","example":"434"},"Right":{"description":"矩形区域的右下角横轴坐标。","type":"integer","format":"int64","example":"589"},"Bottom":{"description":"矩形区域的右下角纵轴坐标。","type":"integer","format":"int64","example":"576"}}}},"Score":{"description":"检测框的置信度，范围为`[0,1]`。","type":"number","format":"float","example":"0.962890625"},"TypeName":{"description":"检测框对应的物体。取值仅为`vehicle`。","type":"string","example":"vehicle"},"Id":{"description":"检测框ID。","type":"integer","format":"int64","example":"1"}}}},"RegionIntersectFeatures":{"description":"与各个指定区域相交集的车辆检测框对应的车辆特征。","type":"array","items":{"type":"object","properties":{"Features":{"description":"特征为Base64编码的字符串。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。","type":"array","items":{"description":"此Base64编码用于匹配两帧之间的车辆是否为同一车辆。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。","type":"string","example":"AEAMQQAAAA****ABhC"}}}}},"RegionIntersectMatched":{"description":"判断当前帧的RegionIntersectFeatures与PreRegionIntersectFeatures中哪一个特征是匹配的。","type":"array","items":{"description":"1","type":"object","properties":{"Ids":{"description":"输出匹配的特征IDx。","type":"array","items":{"description":"当两帧之间的两个车辆是匹配时，说明该车辆在两帧之间的时间内存在滞留或拥堵现象。\n\n > **-1**代表没有匹配的特征，如果匹配将显示对应检测框ID。例如，车辆检测框ID为`[1,2,3]`，RegionIntersectMatched显示为`[-1,-1,-1]`，则表示三个区域均没有匹配，RegionIntersectMatched显示为`[-1,2,3]`，则表示区域1未匹配，区域2和3匹配。","type":"integer","format":"int64","example":"[-1,-1,-1]"}}}}},"RegionIntersects":{"description":"与各个指定区域相交集的车辆检测框对应的车辆特征。\n\n例如，返回结果为[ {\"Ids\":[1,3]}, {\"Ids\":[2,4]} ]，其中{\"Ids\":[1,3]}是与区域1相交集的车辆检测框的ID， {\"Ids\":[2,4]}是与区域2相交集的车辆检测框的ID。当车辆出现在给定区域内，说明存在车辆占道的情况。\n\n除了**RegionIntersects**里包含的ID的检测框外，其它的检测框为区域外的检测框。","type":"array","items":{"description":"1","type":"object","properties":{"Ids":{"description":"与各个指定区域相交集的车辆检测框的多个ID。","type":"array","items":{"description":"与各个指定区域相交集的车辆检测框的多个ID。\n\n例如，{\"Ids\":[1,3]}是与相应区域相交集的车辆检测框的IDs。","type":"integer","format":"int64","example":"[1,2,3]"}}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"ParameterError","errorMessage":"The parameter is invalid. Please check again."}],"403":[{"errorCode":"AuthFailed","errorMessage":"An error occurred while performing authorization. Please check your RAM configuration."}],"408":[{"errorCode":"Timeout","errorMessage":"The request has timed out."}],"503":[{"errorCode":"ServiceUnavailable","errorMessage":"The service is unavailable."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"4FC381BB-04F2-50F4-B54B-593042BCF3C6\\\",\\n  \\\"Data\\\": {\\n    \\\"Elements\\\": [\\n      {\\n        \\\"Boxes\\\": [\\n          {\\n            \\\"Left\\\": 341,\\n            \\\"Top\\\": 434,\\n            \\\"Right\\\": 589,\\n            \\\"Bottom\\\": 576\\n          }\\n        ],\\n        \\\"Score\\\": 0.962890625,\\n        \\\"TypeName\\\": \\\"vehicle\\\",\\n        \\\"Id\\\": 1\\n      }\\n    ],\\n    \\\"RegionIntersectFeatures\\\": [\\n      {\\n        \\\"Features\\\": [\\n          \\\"AEAMQQAAAA****ABhC\\\"\\n        ]\\n      }\\n    ],\\n    \\\"RegionIntersectMatched\\\": [\\n      {\\n        \\\"Ids\\\": [\\n          0\\n        ]\\n      }\\n    ],\\n    \\\"RegionIntersects\\\": [\\n      {\\n        \\\"Ids\\\": [\\n          0\\n        ]\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DetectVehicleICongestionResponse>\\n    <RequestId>4FC381BB-04F2-50F4-B54B-593042BCF3C6</RequestId>\\n    <Data>\\n        <RegionIntersectFeatures>\\n            <Features>AOAQQQBA****FRD</Features>\\n            <Features>AEAMQQAA****KRC</Features>\\n            <Features>AEAMQQAA****BhC</Features>\\n        </RegionIntersectFeatures>\\n        <RegionIntersects>\\n            <Ids>1</Ids>\\n            <Ids>2</Ids>\\n            <Ids>3</Ids>\\n        </RegionIntersects>\\n        <Elements>\\n            <Score>0.962890625</Score>\\n            <TypeName>vehicle</TypeName>\\n            <Id>0</Id>\\n            <Boxes>\\n                <Left>341</Left>\\n                <Top>434</Top>\\n                <Right>589</Right>\\n                <Bottom>576</Bottom>\\n            </Boxes>\\n        </Elements>\\n        <Elements>\\n            <Score>0.9619140625</Score>\\n            <TypeName>vehicle</TypeName>\\n            <Id>1</Id>\\n            <Boxes>\\n                <Left>304</Left>\\n                <Top>228</Top>\\n                <Right>525</Right>\\n                <Bottom>440</Bottom>\\n            </Boxes>\\n        </Elements>\\n        <Elements>\\n            <Score>0.83203125</Score>\\n            <TypeName>vehicle</TypeName>\\n            <Id>2</Id>\\n            <Boxes>\\n                <Left>0</Left>\\n                <Top>24</Top>\\n                <Right>68</Right>\\n                <Bottom>106</Bottom>\\n            </Boxes>\\n        </Elements>\\n        <Elements>\\n            <Score>0.53125</Score>\\n            <TypeName>vehicle</TypeName>\\n            <Id>3</Id>\\n            <Boxes>\\n                <Left>0</Left>\\n                <Top>0</Top>\\n                <Right>58</Right>\\n                <Bottom>38</Bottom>\\n            </Boxes>\\n        </Elements>\\n        <RegionIntersectMatched>\\n            <Ids>-1</Ids>\\n            <Ids>-1</Ids>\\n            <Ids>-1</Ids>\\n        </RegionIntersectMatched>\\n    </Data>\\n</DetectVehicleICongestionResponse>\",\"errorExample\":\"\"}]","title":"检测车辆拥堵","description":"## 功能描述\n车辆拥堵检测能力根据图片中的车辆，判断是否发生拥堵。\n\n> - 您可以进入[在线咨询](https://www.aliyun.com/core/online-consult?from=aZgW6LJHr2)获取在线人工帮助。\n- 当前能力可在视觉智能开放平台有完整的免费产品体验，您可以单击[立即试用](https://vision.aliyun.com/experience/detail?&tagName=objectdet&children=DetectVehicleICongestion)对该能力进行更直观试用以及在线购买。\n- 阿里云视觉智能开放平台视觉AI能力API接入、接口使用或问题咨询等，请通过钉钉群（23109592）加入阿里云视觉智能开放平台咨询群联系我们。\n\n## 应用场景\n\n- 停车场拥堵检测：通过停车场摄像头间隔时间内捕捉的两张图像，检测车辆以及相对位置，判断是否发生拥堵。\n- 道路拥堵检测：通过道路监控间隔时间内捕捉的前后图像，检测车辆以及相对位置，判断是否发生拥堵。\n\n## 特色优势\n检测数据量少：无需较大数据量的视频，仅通过检测两张图片，即可判断是否发生拥堵。\n\n## 接入指引\n1. 注册阿里云账号：打开[阿里云官网](https://www.aliyun.com)，在阿里云官网右上角，单击**立即注册**，按照操作提示完成账号注册。\n2. 开通能力：请确保您已开通[目标检测服务](https://vision.aliyun.com/objectdet)，若未开通服务请[立即开通](https://common-buy.aliyun.com/?commodityCode=viapi_objectdet_public_cn#/open)。\n3. 创建AccessKey：请确保您已[创建AccessKey](~~175144~~)，如果您使用的是子账号AccessKey，您需要给子账号赋予AliyunVIAPIFullAccess权限，具体操作，请参见[RAM授权](~~145025~~)。\n4. 在线调试（可选）：您可以通过[OpenAPI Explorer](https://next.api.aliyun.com/api/objectdet/2019-12-30/DetectVehicleICongestion?lang=JAVA&sdkStyle=dara&params=%7B%22ImageURL%22%3A%22http%3A%2F%2Fviapi-test.oss-cn-shanghai.aliyuncs.com%2Fviapi-3.0domepic%2Fobjectdet%2FDetectVehicleICongestion%2FDetectVehicleICongestion1.jpg%22%2C%22%20RoadRegion%22%3A%22%5B100%2C125%2C830%2C125%2C100%2C425%2C830%2C425%5D%22%2C%22RoadRegions%22%3A%5B%7B%22RoadRegion%22%3A%5B%7B%22Point%22%3A%7B%22X%22%3A100%2C%22Y%22%3A125%7D%7D%2C%7B%22Point%22%3A%7B%22X%22%3A830%2C%22Y%22%3A125%7D%7D%2C%7B%22Point%22%3A%7B%22X%22%3A100%2C%22Y%22%3A425%7D%7D%2C%7B%22Point%22%3A%7B%22X%22%3A830%2C%22Y%22%3A425%7D%7D%5D%7D%5D%7D&tab=DEMO)在线调试能力，查看完整的调用示例代码及SDK依赖信息，也可以下载完整的工程。\n\n5. 开发接入步骤：\n- 在[SDK总览](~~145033~~)中选择您要接入使用的SDK语言。\n- 在对应语言的SDK文档中找到AI类目为目标检测（objectdet）类目的SDK包进行安装。\n- 参考文档中提供的示例代码进行适当修改后调用。\n\n6. 客户端直接调用：该能力常用的客户端调用方式包括以下几种。\n- [Web前端直接调用](~~467779~~)\n- [小程序场景下直接调用](~~467780~~)\n- [Android端直接调用](~~467781~~)\n- [iOS端直接调用](~~467782~~)\n\n## 输入限制\n\n- 图像格式：JPEG、JPG、PNG、BMP。\n- 图像大小：不超过500 KB。\n- 图像分辨率：大于20×20像素，小于800×800像素，长宽比小于等于2。\n- URL地址中不能包含中文字符。","responseParamsDescription":"## SDK参考\n阿里云视觉AI目标检测类目下的车辆拥堵检测能力推荐使用SDK调用，支持多种编程语言，调用时请选择AI类目为目标检测（objectdet）的SDK包，文件参数通过SDK调用可支持本地文件及任意URL，具体可参见[SDK总览](~~145033~~)。","extraInfo":"## 错误码\n关于车辆拥堵检测的错误码，详情请参见[常见错误码](~~146760~~)。\n\n## 安全声明\n- 请确保上传的图片或文件来源符合相应的法律法规。\n- 通过体验调试上传的临时文件有效期为1小时，在24小时后会被系统自动清理删除。"}