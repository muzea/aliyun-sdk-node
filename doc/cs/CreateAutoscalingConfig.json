{"summary":"您可以创建自动弹性伸缩配置，让系统能够按照配置的伸缩规则自动增加或减少计算资源，满足您的集群工作负载的需求。创建过程中，您可以指定扩缩容的度量指标和阈值、扩容顺序、静默时间等。","path":"/cluster/{ClusterId}/autoscale/config/","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ClusterId","in":"path","schema":{"title":"集群ID","description":"集群ID。","type":"string","required":true,"docRequired":true,"example":"cdde1f21ae22e483ebcb068a6eb7f****"}},{"name":"body","in":"body","style":"json","schema":{"title":"请求体数据","description":"请求体数据。","type":"object","properties":{"cool_down_duration":{"title":"静默时间，扩容出的节点，在静默时间过后，方可进入缩容判断","description":"缩容触发时延，节点缩容时需要连续满足触发时延所设定的时间，才能进行缩容。单位：分钟。","type":"string","required":false,"example":"10m"},"unneeded_duration":{"title":"缩容触发时延，节点缩容时需要连续满足触发时延所设定的时间，方可进行缩容","description":"静默时间。扩容出的节点，在静默时间过后，才能进入缩容判断。单位：分钟。","type":"string","required":false,"example":"10m"},"utilization_threshold":{"title":"缩容阈值，节点上 Request 的资源与总资源量的比值","description":"缩容阈值，节点上Request的资源与总资源量的比值。","type":"string","required":false,"example":"0.5"},"gpu_utilization_threshold":{"title":"GPU缩容阈值，节点上 Request 的资源与总资源量的比值","description":"GPU缩容阈值，节点上Request的资源与总资源量的比值。","type":"string","required":false,"example":"0.5"},"scan_interval":{"title":"弹性灵敏度，判断伸缩的间隔时间","description":"弹性灵敏度，判断伸缩的间隔时间。单位：s。","type":"string","required":false,"example":"30s"},"scale_down_enabled":{"title":"是否允许缩容","description":"是否允许进行节点缩容。取值：\n- `true`：允许缩容。\n- `false`：禁止缩容。","type":"boolean","required":false,"example":"true"},"expander":{"title":"节点池扩容顺序策略","description":"节点池扩容顺序策略。取值：\n- `least-waste` ：默认策略。如果可扩容节点池有多个，从中选择一个资源浪费最少的节点池进行扩容。\n- `random`：随机策略。如果可扩容节点池有多个，从中任意选择一个节点池进行扩容。\n- `priority `：优先级策略。如果可扩容节点池有多个，会按照您自定义的伸缩组顺序，选择优先级高的节点池进行扩容。\n优先级的配置存储在kube-system命名空间下ConfigMap的`cluster-autoscaler-priority-expander`中。当自动伸缩进行扩容时，实时读取此配置，将可扩容的伸缩组ID与配置中伸缩组ID进行匹配，在匹配上的伸缩组中选取优先级最大值的伸缩组作为扩容对象。","type":"string","required":false,"example":"least-waste"},"skip_nodes_with_system_pods":{"title":"为true则cluster autoscaler将不会缩容有kube-system命名空间下pods（除了DaemonSet 或 mirror pods）的节点","description":"cluster autoscaler是否缩容有kube-system命名空间下的Pods（除了DaemonSet或mirror Pods）的节点。\n- `true`：不会缩容。\n- `false`：缩容。","type":"boolean","required":false,"example":"true"},"skip_nodes_with_local_storage":{"title":"为true则cluster autoscaler将不会缩容有local storage（如EmptyDir 或 HostPath）的pods的节点","description":"cluster autoscaler是否缩容有local storage（如EmptyDir 或 HostPath）的pods的节点\n- `true`：不会缩容。\n- `false`：缩容。","type":"boolean","required":false,"example":"false"},"daemonset_eviction_for_nodes":{"title":"为true则在缩容时驱逐节点上的DaemonSet pods","description":"缩容时是否驱逐节点上的DaemonSet pods\n- `true`：驱逐。\n- `false`：不会驱逐。","type":"boolean","required":false,"example":"false"},"max_graceful_termination_sec":{"title":"CA缩容节点时等待节点上pod终止的最长时间（单位：秒）","description":"cluster autoscaler缩容节点时等待节点上pod终止的最长时间。单位：s。","type":"integer","format":"int32","required":false,"example":"14400s"},"min_replica_count":{"title":"考虑缩容时pod应该有的最小副本数","description":"考虑缩容时Pod应该有的最小副本数。","type":"integer","format":"int32","required":false,"example":"0"},"recycle_node_deletion_enabled":{"title":"极速模式节点缩容成功后是否删除其对应的K8s node对象","description":"极速模式节点缩容成功后，是否删除其对应的K8s Node对象。","type":"boolean","required":false,"example":"false"},"scale_up_from_zero":{"title":"集群ready节点数为0时，CA是否扩容","description":"集群Ready节点数为0时，CA是否扩容。","type":"boolean","required":false,"example":"true"}},"required":false}}],"responses":{"200":{}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"创建弹性伸缩配置"}