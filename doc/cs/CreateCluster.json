{"summary":"您可以通过OpenAPI创建ACK集群，包含ACK托管集群、ACK专有集群、ACK Serverless集群，ACK Edge集群以及注册集群。创建集群时，您将完成集群信息、集群组件以及ACK相关云资源的配置。","path":"/clusters","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"411","abilityTreeNodes":["FEATUREcskJEIDU7"]},"parameters":[{"name":"body","in":"body","style":"json","schema":{"title":"请求体参数","description":"请求体参数。","type":"object","properties":{"name":{"title":"集群名称。","description":"集群名称。\n\n命名规则：由数字、汉字、英文字符或短划线（-）组成，长度范围1~63个字符，且不能以短划线（-）开头。","type":"string","required":true,"example":"cluster-demo"},"region_id":{"title":"地域ID","description":"集群所在的地域ID。\n\n","type":"string","required":true,"example":"cn-beijing"},"cluster_type":{"title":"集群类型","description":"- `Kubernetes`: ACK专有集群。\n- `ManagedKubernetes`：ACK托管类的集群，包括ACK托管集群（ACK集群Pro版、ACK集群基础版）、ACK Serverless集群（Pro版、基础版）、ACK Edge集群（Pro版、基础版）、ACK灵骏集群（Pro版）。\n- `ExternalKubernetes`：注册集群。","type":"string","required":true,"example":"Kubernetes"},"cluster_spec":{"title":"托管版集群类型","description":"当您选择`cluster_type`为`ManagedKubernetes`并配置`profile`后，您可以进一步指定集群的规格。\n\n- `ack.pro.small`：集群Pro版。\n- `ack.standard`：集群基础版（取值为空时默认选择）。","type":"string","required":false,"example":"ack.pro.small"},"kubernetes_version":{"title":"集群版本","description":"集群版本，与Kubernetes社区基线版本保持一致。建议选择最新版本，若不指定，默认使用最新版本。\n\n目前您可以在ACK控制台创建两种最新版本的集群。您可以通过API创建其他Kubernetes版本集群。关于ACK支持的Kubernetes版本，请参见[Kubernetes版本发布概览](~~185269~~)。","type":"string","required":false,"example":"1.16.9-aliyun.1"},"runtime":{"description":"集群内容器运行时，默认采用Docker运行时，同时还支持Containerd和安全沙箱容器运行时。\n\n更多有关容器引擎的选择，请参见[如何选择Docker运行时与安全沙箱运行时](~~160313~~)。","required":false,"$ref":"#/components/schemas/runtime"},"vpcid":{"title":"集群专有网络ID。","description":"集群使用的专有网络，创建集群时必须为集群提供。","type":"string","required":true,"example":"vpc-2zeik9h3ahvv2zz95****"},"pod_vswitch_ids":{"title":"创建Terway网络类型的集群时，需要为pod指定单独的虚拟交换机","description":"Pod虚拟交换机列表，您需要为每一个节点虚拟交换机指定至少一个相同可用区的Pod虚拟交换机并且不能跟节点`vswitch`重复，建议选择网段掩码不大于19的虚拟交换机。\n\n> 当集群采用Terway网络类型时，必须为集群指定`pod_vswitch_ids`。","type":"array","items":{"description":"Pod虚拟交换机列表，您需要为每一个节点虚拟交换机指定至少一个相同可用区的Pod虚拟交换机并且不能跟节点`vswitch`重复，建议选择网段掩码不大于19的虚拟交换机。\n\n> 当集群采用Terway网络类型时，必须为集群指定`pod_vswitch_ids`。","type":"string","required":false,"example":"vsw-2ze97jwri7cei0mpw****"},"required":false},"container_cidr":{"title":"POD网络网段","description":"Pod网络地址段，必须是有效的私有网段，即以下网段及其子网：10.0.0.0/8、172.16-31.0.0/12-16、192.168.0.0/16。不能与VPC及VPC内已有Kubernetes集群使用的网段重复，创建成功后不能修改。\n\n有关集群网络规划，请参见[VPC下 Kubernetes的网络地址段规划](~~86500~~)。\n\n> 当创建Flannel网络类型的集群时，该字段为必填。","type":"string","required":false,"example":"172.20.0.0/16"},"service_cidr":{"title":"服务网络网段","description":"Service网络地址段，可选范围：10.0.0.0/16-24，172.16-31.0.0/16-24，192.168.0.0/16-24\n不能与VPC网段10.1.0.0/21及VPC内已有Kubernetes集群使用的网段重复，创建成功后不能修改。\n\n默认使用172.19.0.0/20网段。","type":"string","required":true,"example":"172.21.0.0/20"},"security_group_id":{"title":"安全组ID，和is_enterprise_security_group二选一","description":"使用已有安全组创建集群时需要指定安全组ID，和`is_enterprise_security_group`二选一，集群节点自动加入到此安全组。","type":"string","required":false,"example":"sg-bp1bdue0qc1g7k****"},"is_enterprise_security_group":{"title":"自动创建企业安全组","description":"自动创建企业级安全组，当`security_group_id`为空的时生效。\n\n> 使用普通安全组时，集群内节点与Terway Pod数量之和不能超过2000。所以创建Terway网络类型集群时，建议使用企业安全组。\n\n- `true`：创建并使用企业级安全组。\n- `false`：不使用企业级安全组。\n\n默认值：`true`。","type":"boolean","required":false,"example":"true"},"snat_entry":{"title":"若您集群内的节点、应用等需要访问公网，勾选该项后我们将为您创建 NAT 网关并自动配置 SNAT 规则","description":"为专有网络配置SNAT。取值：\n\n- `true`：将为您创建NAT网关并自动配置SNAT规则，若您集群内的节点、应用等需要访问公网需要设置为`true`。\n- `false`：不为您创建NAT网关及SNAT规则。这种模式下，集群内节点及应用将不能访问公网。\n\n> 如果创建集群时未开启，后续业务需要访问公网，可手动开启。更多信息，请参见[手动开启](~~178480~~)。\n\n默认值：`true`。","type":"boolean","required":false,"example":"true"},"endpoint_public_access":{"title":"使用EIP暴露apiServer","description":"是否开启公网访问。通过EIP暴露API Server，实现集群公网访问。\n\n- `true`：开启公网访问。\n- `false`：不开启公网访问。选择不开放时，则无法通过外网访问集群API Server。\n\n默认值：`false`。","type":"boolean","required":false,"example":"true"},"ssh_flags":{"title":"允许公网ssh登录","description":"是否开放公网SSH登录。用登录\"专有版集群\"的Master节点，托管版集群中该参数不生效。\n- `true`：开放。\n- `false`：不开放。\n\n默认值：`false`。","type":"boolean","required":false,"example":"true"},"timezone":{"title":"时区","description":"集群使用的时区。","type":"string","required":false,"example":"Asia/Shanghai"},"node_cidr_mask":{"title":"节点IP数量","description":"节点IP数量，通过指定网络的CIDR来确定IP的数量，只对于Flannel网络类型集群生效。\n\n默认值：`26`。","type":"string","required":false,"example":"25"},"user_ca":{"title":"自定义集群CA","description":"自定义集群CA。","type":"string","required":false,"example":"-----BEGIN CERTIFICATE-----****"},"user_data":{"title":"节点自定义数据","description":"自定义节点数据。","type":"string","required":false,"example":"IyEvdXNyL2Jpbi9iYXNoCmVjaG8gIkhlbGxvIEFD****"},"cluster_domain":{"title":"集群本地域名","description":"集群本地域名。\n\n命名规则：域名由小数点（.）分隔的一个或多个部分构成，每个部分最长为63个字符，可以使用小写字母、数字和短划线（-），且首尾必须为小写字母或数字。","type":"string","required":false,"example":"cluster.local"},"node_name_mode":{"title":"自定义节点名称","description":"自定义节点名称。\n\n节点名称由三部分组成：前缀+节点IP地址子串+后缀：\n\n- 前缀和后缀均可由英文句号（.）分隔的一个或多个部分构成，每个部分可以使用小写字母、数字和短划线（-），且首尾必须为小写字母和数字。\n- IP地址段长度指截取节点IP地址末尾的位数，取值范围\\[5,12\\]。\n\n例如，节点IP地址为：192.168.0.55，指定前缀为aliyun.com，IP地址段长度为5，后缀为test，则节点名称为aliyun.com00055test。","type":"string","required":false,"example":"aliyun.com00055test"},"custom_san":{"title":"自定义证书SAN","description":"自定义证书SAN，多个IP或域名以英文逗号（,）分隔。","type":"string","required":false,"example":"cs.aliyun.com"},"encryption_provider_key":{"title":"Secret落盘加密","description":"KMS密钥ID，使用该密钥对数据盘进行加密。更多详情，请参见[密钥管理服务](~~28935~~)。\n\n> 该功能只在专业托管版集群（ACK Pro版集群）中生效。\n\n","type":"string","required":false,"example":"0fe64791-55eb-4fc7-84c5-c6c7cdca****"},"service_account_issuer":{"title":"serviceaccount token中的签发身份，即token payload中的iss字段。","description":"ServiceAccount是Pod和集群`apiserver`通讯的访问凭证。而`service-account-issuer`是`serviceaccount token`中的签发身份，即`token payload`中的`iss`字段。\n\n关于`ServiceAccount`更多详情，请参见[部署服务账户令牌卷投影](~~160384~~)。","type":"string","required":false,"example":"kubernetes.default.svc"},"api_audiences":{"title":"合法的请求token身份，用于apiserver服务端认证请求token是否合法。","description":"ServiceAccount是Pod和集群`apiserver`通讯的访问凭证，而`api-audiences`是合法的请求`token`身份，用于`apiserver`服务端认证请求`token`是否合法。支持配置多个`audience`，通过英文半角逗号（,）分割。\n\n关于`ServiceAccount`更多详情，请参见[部署服务账户令牌卷投影](~~160384~~)。","type":"string","required":false,"example":"kubernetes.default.svc"},"image_id":{"title":"自定义镜像","description":"节点自定义镜像，默认使用系统镜像。当选择自定义镜像时，将取代默认系统镜像。请参见[自定义镜像](~~146647~~)。","type":"string","required":false,"example":"m-bp16z7xko3vvv8gt****"},"rds_instances":{"title":"RDS白名单","description":"RDS实例列表，选择您想想要添加白名单的RDS实例。 建议前往RDS加入容器Pod网段与Node网段，设置RDS实例会由于实例非运行的状态导致无法弹出。","type":"array","items":{"description":"RDS实例列表，选择您想想要添加白名单的RDS实例。 建议前往RDS加入容器Pod网段与Node网段，设置RDS实例会由于实例非运行的状态导致无法弹出。","type":"string","required":false,"example":"rm-2zev748xi27xc****"},"required":false},"tags":{"title":"集群标签","description":"节点标签。标签定义规则：\n\n- 标签由区分大小写的键值对组成，您最多可以设置20个标签。\n- 标签键不可以重复，最长为64个字符；标签值可以为空，最长为128个字符。标签键和标签值都不能以“aliyun”、“acs:”、“https://”或“http://”开头。详情请参见[Labels and Selectors](https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set)。","type":"array","items":{"description":"节点标签。标签定义规则：\n\n- 标签由区分大小写的键值对组成，您最多可以设置20个标签。\n- 标签键不可以重复，最长为64个字符；标签值可以为空，最长为128个字符。标签键和标签值都不能以“aliyun”、“acs:”、“https://”或“http://”开头。详情请参见[Labels and Selectors](https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#syntax-and-character-set)。","required":false,"$ref":"#/components/schemas/tag"},"required":false},"addons":{"title":"集群组件配置","description":"集群组件列表，创建集群时通过`addons`指定想要安装的集群组件。\n\n**网络组件**：必选，包含Flannel和Terway两种网络类型，创建集群时二选一：\n\n- Flannel网络：\\[{\"name\":\"flannel\",\"config\":\"\"}\\]。\n- Terway网络：\\[{\"name\": \"terway-eniip\",\"config\": \"\"}\\] 。\n\n**存储组件**：可选，仅支持`csi`类型：\n\n`csi`：\\[{\"name\":\"csi-plugin\",\"config\": \"\"},{\"name\": \"csi-provisioner\",\"config\": \"\"}\\]。\n\n**日志组件**：可选。推荐开启，如果不开启日志服务时，将无法使用集群审计功能。\n\n- 使用已有`SLS Project`：\\[{\"name\": \"logtail-ds\",\"config\": \"{\\\"IngressDashboardEnabled\\\":\\\"true\\\",\\\"sls_project_name\\\":\\\"your_sls_project_name\\\"}\"}\\] 。\n- 创建新的`SLS Project`：\\[{\"name\": \"logtail-ds\",\"config\": \"{\\\"IngressDashboardEnabled\\\":\\\"true\\\"}\"}\\] 。\n\n**Ingress组件**：可选，ACK专有版集群默认安装Ingress组件`nginx-ingress-controller`。\n\n- 安装Ingress并且开启公网：\\[{\"name\":\"nginx-ingress-controller\",\"config\":\"{\\\"IngressSlbNetworkType\\\":\\\"internet\\\"}\"}\\] 。\n- 禁止默认安装Ingress：\\[{\"name\": \"nginx-ingress-controller\",\"config\": \"\",\"disabled\": true}\\] 。\n\n**事件中心**：可选，默认开启。\n\n事件中心提供对Kubernetes事件的存储、查询、告警等能力。Kubernetes事件中心关联的Logstore在90天内免费。关于免费策略的更多信息，请参见[创建并使用Kubernetes事件中心](~~150476~~)。\n\n开启事件中心示例：\\[{\"name\":\"ack-node-problem-detector\",\"config\":\"{\\\"sls_project_name\\\":\\\"your_sls_project_name\\\"}\"}\\]。","type":"array","items":{"description":"集群组件列表，创建集群时通过`addons`指定想要安装的集群组件。","required":false,"$ref":"#/components/schemas/addon"},"required":false},"taints":{"title":"节点污点信息","description":"节点污点信息。污点和容忍度（Toleration）相互配合，可以用来避免Pod被分配到不合适的节点上。更多信息，请参见[taint-and-toleration](https://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration/)。","type":"array","items":{"description":"节点污点信息。污点和容忍度（Toleration）相互配合，可以用来避免Pod被分配到不合适的节点上。更多信息，请参见[taint-and-toleration](https://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration/)。","required":false,"$ref":"#/components/schemas/taint"},"required":false},"cloud_monitor_flags":{"title":"为ECS安装云监控","description":"集群是否安装云监控插件。取值：\n\n- `true`：安装云监控插件。\n- `false`：不安装云监控插件。\n\n默认值：`false`。\n\n","type":"boolean","required":false,"example":"true"},"platform":{"title":"操作系统发行版","description":"操作系统发行版。取值：\n\n- CentOS\n- AliyunLinux\n- QbootAliyunLinux\n- Qboot\n- Windows\n- WindowsCore\n\n默认值：`CentOS`。","type":"string","required":false,"example":"CentOS"},"os_type":{"title":"操作系统平台类型","description":"操作系统平台类型。取值：\n- Windows\n- Linux\n\n默认值：`Linux`。","type":"string","required":false,"example":"Linux"},"soc_enabled":{"title":"等保安全加固","description":"等保加固。更多信息，请参见[ACK等保加固使用说明](~~196148~~)。\n\n取值：\n- `true`：开启等保加固。\n- `false`：不开启等保加固。\n\n默认值：`false`。","type":"boolean","required":false,"example":"false"},"security_hardening_os":{"title":"是否开启阿里云OS安全加固。","description":"阿里云OS安全加固。取值：\n\n- `true`：开启阿里云OS安全加固。\n- `false`：不开启阿里云OS安全加固。\n\n默认值：`false`。","type":"boolean","required":false,"example":"false"},"cis_enabled":{"title":"【已废弃】请使用security_hardening_os参数代替","description":"【已废弃】请使用参数security_hardening_os替代。","type":"boolean","deprecated":true,"required":false,"example":"false"},"cpu_policy":{"title":"CPU策略","description":"节点CPU管理策略。当集群版本在1.12.6及以上时支持以下两种策略：\n\n- `static`：允许为节点上具有某些资源特征Pod增强其CPU亲和性和独占性。\n- `none`：表示启用现有的默认CPU亲和性方案。\n\n默认值：`none`。","type":"string","required":false,"example":"none"},"proxy_mode":{"title":"Proxy代理模式，ipvs|iptables","description":"kube-proxy代理模式\n\n- `iptables`: 成熟稳定的kube-proxy代理模式，Kubernetes Service的服务发现和负载均衡使用iptables规则配置，但是性能一般，受规模影响较大，适用于集群存在少量的Service。\n- `ipvs`：高性能的kube-proxy代理模式，Kubernetes Service的服务发现和负载均衡使用Linux IPVS模块进行配置，适用于集群存在大量的Service，对负载均衡有高性能要求的场景。\n\n默认值：`ipvs`。","type":"string","required":false,"example":"ipvs"},"node_port_range":{"title":"节点服务端口范围","description":"节点服务端口，可选端口范围：\\[30000,65535\\]。\n\n默认值：`30000-32767`。","type":"string","required":false,"example":"30000~32767\t"},"master_vswitch_ids":{"title":"集群Master节点使用的虚拟交换机","description":"Master节点交换机ID列表，交换机个数取值范围为\\[1,3\\]。为确保集群的高可用性，推荐您选择3个交换机，且分布在不同的可用区。\n\n指定的实例规格数量需要和`master_count`保持一致，和`master_vswitch_ids`中的元素一一对应。","type":"array","items":{"description":"Master节点交换机ID列表，交换机个数取值范围为\\[1,3\\]。为确保集群的高可用性，推荐您选择3个交换机，且分布在不同的可用区。\n\n指定的实例规格数量需要和`master_count`保持一致，和`master_vswitch_ids`中的元素一一对应。","type":"string","required":false,"example":"vsw-2ze3ds0mdip0hdz8i****"},"required":false},"key_pair":{"title":"密钥对名称，和login_password二选一。","description":"密钥对名称，和`login_password`二选一。","type":"string","required":false,"example":"secrity-key"},"login_password":{"title":"SSH登录密码。密码规则为8~30 个字符，且至少同时包含三项（大小写字母、数字和特殊符号），和key_pair二选一。","description":"SSH登录密码，和`key_pair `二选一。密码规则为8~30个字符，且至少同时包含三项（大小写字母、数字和特殊符号）。","type":"string","required":false,"example":"Hello@1234"},"master_count":{"title":"集群Master节点数量","description":"Master节点数量，可选值`3`或`5`。\n\n默认值：`3`。","type":"integer","format":"int64","required":false,"example":"3"},"master_instance_types":{"title":"集群Master节点类型","description":"Master节点实例类型。更多信息，请参见[实例规格族](~~25378~~)。","type":"array","items":{"description":"Master节点实例类型。指定的实例规格数量需要和`master_count`保持一致，和`master_instance_types`中的元素一一对应。更多信息，请参见[实例规格族](~~25378~~)。","type":"string","required":false,"example":"ecs.n4.xlarge"},"required":false},"master_system_disk_category":{"title":"集群Master节点系统盘类型","description":"Master节点系统盘类型，取值：\n\n- `cloud_efficiency`：高效云盘。\n- `cloud_ssd`：SSD云盘。\n- `cloud_essd`：ESSD云盘。\n\n默认值：`cloud_ssd`。不同可用区，默认值可能会有所差异。","type":"string","required":false,"example":"cloud_ssd"},"master_system_disk_size":{"title":"集群Master节点系统盘大小，至少40","description":"Master节点系统盘类型，取值范围\\[40,500\\]，单位：GiB。\n\n默认值：`120`。","type":"integer","format":"int64","required":false,"example":"120"},"master_system_disk_performance_level":{"title":"Master节点系统盘磁盘性能，只针对ESSD磁盘生效","description":"集群Master节点系统盘磁盘性能等级， 仅对ESSD磁盘生效。磁盘性能等级和磁盘大小有关，更多信息，请参见[ESSD云盘](~~122389~~)。","type":"string","required":false,"example":"PL1"},"master_system_disk_snapshot_policy_id":{"title":"集群Master节点自动快照备份策略","description":"Master节点系统盘采用的自动快照策略ID。","type":"string","required":false,"example":"sp-2zej1nogjvovnz4z****"},"master_instance_charge_type":{"title":"集群Master节点付费类型","description":"Master节点付费类型，取值：\n\n- `PrePaid`：包年包月。\n- `PostPaid`：按量付费。\n\n默认值：`PostPaid`。","type":"string","required":false,"example":"PrePaid"},"master_period_unit":{"title":"集群Master节点包年包月周期","description":"Master节点付费周期，当付费类型为`PrePaid`的时候必须指定周期。\n\n取值：`Month`，当前仅支持以月为周期。","type":"string","required":false,"example":"Month"},"master_period":{"title":"集群Master节点包年包月时长","description":"Master节点包年包月时长，当`master_instance_charge_type`取值为`PrePaid`时才生效且为必选值。\n\n取值范围：{1, 2, 3, 6, 12, 24, 36, 48, 60}。\n\n默认值：1。\n\n","type":"integer","format":"int64","required":false,"example":"1"},"master_auto_renew":{"title":"集群Master节点是否自动续费","description":"Master节点是否开启自动续费，当`master_instance_charge_type`取值为`PrePaid`时才生效，可选值为：\n\n- `true`：自动续费。\n- `false`：不自动续费。\n\n默认值：`true`。","type":"boolean","required":false,"example":"true"},"master_auto_renew_period":{"title":"集群Master节点自动续费时长","description":"Master节点自动续费周期，当选择包年包月付费类型时才生效，且为必选值。\n\n取值范围：{1, 2, 3, 6, 12}。\n\n默认值：1。","type":"integer","format":"int64","required":false,"example":"1"},"num_of_nodes":{"title":"集群Worker节点数量","description":"Worker节点数。范围是\\[0，100\\]。","type":"integer","format":"int64","deprecated":true,"required":false,"example":"3"},"vswitch_ids":{"title":"集群节点所在虚拟交换机。","description":"集群节点所在虚拟交换机，当创建零节点的托管版集群时，该字段必填。","type":"array","items":{"description":"集群节点所在虚拟交换机，当创建零节点的托管版集群时，该字段必填。","type":"string","required":false,"example":"vsw-2ze3ds0mdip0hdz8i****"},"required":true},"worker_vswitch_ids":{"title":"集群Worker节点所在虚拟交换机","description":"集群节点使用的虚拟交换机列表，一个节点对应一个值。\n\n当创建零节点的托管版集群时，字段`worker_vswitch_ids `非必填，但是需要提供`vswitch_ids`。","type":"array","items":{"description":"Worker节点虚拟交换机列表，取值范围：\\[1,20\\]。为保证高可用性，建议选择不同可用区的虚拟交换机。\n\n当创建零节点的托管版集群时，字段`worker_vswitch_ids `非必填，但是需要提供`vswitch_ids`。","type":"string","required":false,"example":"vsw-2ze3ds0mdip0hdz8i****"},"deprecated":true,"required":false},"worker_instance_types":{"title":"集群Worker节点类型","description":"Worker节点实例配置。","type":"array","items":{"description":"Worker节点实例规格，至少要指定一个实例规格。更多信息，请参见[实例规格族](~~25378~~)。\n\n> 实例规格优先级随着在数据中的位置增大依次降低。当无法根据优先级较高的实例规格创建出实例时，会自动选择下一优先级的实例规格来创建实例。","type":"string","required":false,"example":"ecs.n4.large"},"deprecated":true,"required":false},"worker_system_disk_category":{"title":"集群Worker节点系统盘类型","description":"Worker节点系统盘类型。更多信息，请参见[块存储概述](~~63136~~)。\n\n取值：\n\n- `cloud_efficiency`：高效云盘。\n- `cloud_ssd`：SSD云盘。\n\n\n默认值：`cloud_ssd`。","type":"string","deprecated":true,"required":false,"example":"cloud_efficiency"},"worker_system_disk_size":{"title":"集群Worker节点系统盘大小","description":"Worker节点系统盘大小，单位为GiB。\n\n取值范围：\\[40,500\\]。\n\n该参数的取值必须大于或者等于max{40, ImageSize}。\n\n默认值：`120`。","type":"integer","format":"int64","deprecated":true,"required":false,"example":"120"},"worker_system_disk_snapshot_policy_id":{"title":"集群Worker节点系统盘快照备份策略","description":"Worker节点系统盘采用的自动快照策略ID。","type":"string","deprecated":true,"required":false,"example":"sp-2zej1nogjvovnz4z****"},"worker_system_disk_performance_level":{"title":"集群Worker节点磁盘性能，只对ESSD类型磁盘生效","description":"当系统盘为ESSD云盘时，可设置ESSD云盘的性能级别PL（Performance Level）。更多信息，请参见[ESSD云盘](~~122389~~)。\n\n取值：\n\n- PL0\n- PL1\n- PL2\n- PL3","type":"string","deprecated":true,"required":false,"example":"PL1"},"worker_data_disks":{"title":"集群Worker节点数据盘配置","description":"Worker节点数据盘类型、大小等配置的组合。","type":"array","items":{"description":"数据盘配置集合。","type":"object","properties":{"category":{"title":"集群Worker节点数据盘类型","description":"数据盘类型。","type":"string","required":true,"example":"cloud_essd"},"encrypted":{"title":"集群Worker节点数据盘是否加密","description":"是否对数据盘加密。取值：\n\n- `true`：对数据盘加密。\n- `false`：不对数据盘加密。\n\n默认值：`false`。","type":"string","required":false,"example":"true"},"size":{"title":"集群Worker节点数据盘大小","description":"数据盘大小，取值范围：40～32767。单位：GiB。","type":"string","required":true,"example":"120"},"performance_level":{"title":"集群Worker节点数据盘磁盘性能等级，仅对ESSD磁盘生效","description":"节点数据盘磁盘性能等级，仅对ESSD磁盘生效。磁盘性能等级和磁盘大小有关。更多信息，请参见[ESSD云盘](~~122389~~)。","type":"string","required":false,"example":"PL1"}},"required":false},"deprecated":true,"required":false},"worker_instance_charge_type":{"title":"集群Worker节点付费类型","description":"Worker节点付费类型，取值：\n\n- `PrePaid`：包年包月。\n- `PostPaid`：按量付费。\n\n默认值：按量付费。","type":"string","deprecated":true,"required":false,"example":"PrePaid"},"worker_period_unit":{"title":"集群Worker节点包年包月周期","description":"Wroker节点付费周期，当付费类型为`PrePaid`的时候需要指定周期。\n\n取值：`Month`，当前只支持以月为周期。","type":"string","deprecated":true,"required":false,"example":"Month"},"worker_period":{"title":"集群Worker节点包年包月时长","description":"Worker节点包年包月时长，当`worker_instance_charge_type`取值为`PrePaid`时才生效且为必选值。\n\n取值范围：{1, 2, 3, 6, 12, 24, 36, 48, 60}。\n\n默认值：1。","type":"integer","format":"int64","deprecated":true,"required":false,"example":"1"},"worker_auto_renew":{"title":"集群Worker节点到期是否自动续费","description":"Worker节点是否开启自动续费，当`worker_instance_charge_type`取值为`PrePaid`时才生效，取值：\n\n- `true`：自动续费。\n- `false`：不自动续费。\n\n默认值：`true`。","type":"boolean","deprecated":true,"required":false,"example":"true"},"worker_auto_renew_period":{"title":"集群Worker节点自动续费时长","description":"Worker节点自动续费周期，当选择包年包月付费类型时才生效，且为必选值。\n\n取值范围：{1, 2, 3, 6, 12}。","type":"integer","format":"int64","deprecated":true,"required":false,"example":"1"},"instances":{"title":"使用已有节点创建集群时，已有实例列表","description":"使用已经节点创建集群时，需要指定ECS实例列表，该实例会作为Worker节点加入集群。\n\n> 使用已有实例创建集群时，该字段必填。","type":"array","items":{"description":"使用已经节点创建集群时，需要指定ECS实例列表，该实例会作为Worker节点加入集群。\n\n> 使用已有实例创建集群时，该字段必填。","type":"string","required":false,"example":"i-2ze4zxnm36vq00xn****"},"required":false},"format_disk":{"title":"使用已有节点创建集群时，是否格式化已有实例的磁盘","description":"使用已有实例创建集群时，是否对实例进行数据盘挂载，取值：\n\n- `true`：将容器和镜像存储在数据盘，数据盘内原有数据将丢失，请注意备份数据。\n\n- `false`：不将容器和镜像存储在数据盘。\n\n默认值：`false`。\n\n数据盘挂载规则：\n\n- 如果ECS已挂载数据盘，且最后一块数据盘的文件系统未初始化，系统会自动将该数据盘格式化为ext4，用来存放内容/var/lib/docker、/var/lib/kubelet。\n- 如果ECS未挂载数据盘，则不会挂载新的数据盘。","type":"boolean","required":false,"example":"false"},"keep_instance_name":{"title":"使用已有节点创建集群时，是否保留实例名称。","description":"使用已有实例创建集群时，是否保留实例名称。\n\n- `true`：保留。\n- `false`：不保留，会用系统规则进行替换。\n\n默认值：`true`。","type":"boolean","required":false,"example":"true"},"service_discovery_types":{"title":"创建ASK集群时，服务发现类型","description":"集群内服务发现类型，用于在`ASK`集群中指定服务发现方式。\n\n- `CoreDNS`：使用Kubernetes原生标准服务发现组件CoreDNS，需要在集群部署一组容器用于DNS解析。默认采用两个0.25 Core 512 MiB规格的ECI实例。\n- `PrivateZone`：使用阿里云PrivateZone产品提供服务发现能力，需要开启PrivateZone服务。\n\n默认值：不开启。","type":"array","items":{"description":"集群内服务发现类型，用于在`ASK`集群中指定服务发现方式。\n\n- `CoreDNS`：使用Kubernetes原生标准服务发现组件CoreDNS，需要在集群部署一组容器用于DNS解析。默认采用两个0.25 Core 512 MiB规格的ECI实例。\n- `PrivateZone`：使用阿里云PrivateZone产品提供服务发现能力，需要开启PrivateZone服务。\n\n默认值：不开启。","type":"string","required":false,"example":"PrivateZone"},"required":false},"nat_gateway":{"title":"使用自动创建专有网络创建ASK集群时，是否在vpc中创建Nat网关并配置SNAT规则。","description":"创建ASK集群时，是否在VPC中创建NAT网关并配置SNAT规则。取值：\n\n- `true`：将为您创建NAT网关并自动配置SNAT规则，集群VPC将具备公网访问能力。\n- `false`：不为您创建NAT网关及SNAT规则。集群VPC将不具备公网访问能力。\n\n默认值：`false`。","type":"boolean","required":false,"example":"true"},"zone_id":{"title":"使用自动创建专有网络创建ASK集群时，需要指定专有网络的可用区","description":"集群所属地域的可用区ID。此参数为ASK集群特有参数。\n\n当创建ASK集群时，如果未指定`vpc_id`和`vswitch_ids`，必须为集群指定`zone_id`，用于自动在该可用区创建VPC网络资源。\n\n","type":"string","required":false,"example":"cn-beiji****"},"profile":{"title":"面向场景时的集群类型。  Default：非边缘场景集群。 Edge：边缘场景集群。","description":"当您选择`cluster_type`为`ManagedKubernetes`时，即ACK托管类的集群时，您可以进一步指定集群的子类型。\n- `Default`：ACK托管集群，包括ACK集群Pro版和ACK集群基础版。\n- `Edge`：ACK Edge集群，包括ACK Edge集群Pro版和ACK Edge集群基础版。\n- `Serverless`：ACK Serverless集群，包括ACK Serverless集群Pro版和ACK Serverless集群基础版。\n- `Lingjun`：ACK灵骏集群，提供Pro版。","type":"string","required":false,"example":"Default"},"logging_type":{"title":"ASK 集群开启日志服务","description":"集群开启日志服务，只针对ACK Serverless集群生效，且取值必须是`SLS`。","type":"string","required":false,"example":"SLS"},"controlplane_log_ttl":{"title":"控制平面日志","description":"控制平面组件日志保存天数。","type":"string","required":false,"example":"30"},"controlplane_log_project":{"title":"使用已有log project时，需要指定log project","description":"控制平面组件日志服务Project，可以使用已有Project用于日志存储，也可以使用系统自动创建Project用户日志存储。如果选择自动创建日志服务Project将会自动创建一个名称为`k8s-log-{ClusterID}`的日志服务Project。","type":"string","required":false,"example":"k8s-log-xxx"},"controlplane_log_components":{"title":"需要采集日志的组件","description":"组件名称列表，指定那些控制平面的组件日志需要被收集。\n\n默认采集apiserver、kcm、scheduler组件的日志。","type":"array","items":{"description":"组件名称列表，指定那些控制平面的组件日志需要被收集。\n\n默认采集apiserver、kcm、scheduler组件的日志。","type":"string","required":false,"example":"[\"apiserver\",\"kcm\",\"scheduler\"]"},"required":false},"deletion_protection":{"title":"集群删除保护","description":"集群删除保护，防止通过控制台或API误删除集群。取值：\n\n- `true`：启用集群删除保护，将不能通过控制台或API删除集群。\n- `false`：不启用集群删除保护，则能通过控制台或API删除集群。\n\n默认值：`false`。","type":"boolean","required":false,"example":"true"},"disable_rollback":{"title":"该参数已废弃，集群创建失败时默认不会进行回滚操作，您需要自行清理失败的集群。","description":"集群创建失败是否回滚。取值：\n\n- `true`：当集群创建失败时，进行回滚操作。\n- `false`：当集群创建失败时，不进行回滚操作。\n\n\n默认值：`true`。","type":"boolean","deprecated":true,"required":false,"example":"true"},"timeout_mins":{"title":"集群创建超时时间","description":"集群创建超时时间，单位分钟。\n\n默认值：`60`。","type":"integer","format":"int64","required":false,"example":"60"},"image_type":{"title":"操作系统镜像类型","description":"操作系统发行版类型，推荐使用该字段指定节点操作系统。取值：\n\n- CentOS\n- AliyunLinux\n- AliyunLinux Qboot\n- AliyunLinuxUEFI\n- AliyunLinux3\n- Windows\n- WindowsCore\n- AliyunLinux3Arm64\n- ContainerOS\n\n默认值：`CentOS`。","type":"string","required":false,"example":"AliyunLinux"},"load_balancer_spec":{"title":"负载均衡规格","description":"负载均衡规格，取值：\n- slb.s1.small\n- slb.s2.small\n- slb.s2.medium\n- slb.s3.small\n- slb.s3.medium\n- slb.s3.large\n\n默认值：`slb.s2.small`。","type":"string","required":false,"example":"slb.s2.small"},"enable_rrsa":{"title":"启用 RRSA 功能","description":"是否启用RRSA功能。","type":"boolean","required":false,"example":"true"},"resource_group_id":{"title":"集群所属资源组ID","description":"集群所属资源组ID，实现不同资源的隔离。","type":"string","required":false,"example":"rg-acfm3mkrure****"},"charge_type":{"title":"付费类型。","description":"集群付费类型，如下资源的计费方式属于包年包月计费类型：\n\n节点池的节点（ECS）。\n\nAPI Server的私网SLB实例。\n\n取值：\n\nPrePaid：包年包月。\n\nPostPaid：按量付费。\n\n默认值：PostPaid。","type":"string","required":false,"example":"PostPaid"},"period_unit":{"title":"包年包月时间单位。","description":"付费周期，当付费类型为PrePaid的时候，需要指定周期。\n\n取值：Month，当前仅支持以月为周期。","type":"string","required":false,"example":"Month"},"period":{"title":"包年包月时间。","description":"购买时长。包年包月时长，当charge_type取值为PrePaid时才生效，且为必选值。\n\n取值范围：{1, 2, 3, 6, 12, 24, 36, 48, 60}。\n\n默认值：1。","type":"integer","format":"int64","required":false,"example":"1"},"ip_stack":{"title":"集群的IP协议栈，可取值：\n- ipv4：创建仅支持IPv4协议栈的集群；\n- dual：创建支持IPv4/IPv6双栈的集群。","description":"集群ip_stack。","type":"string","required":false,"example":"可选值：\nipv4（单栈）\ndual（双栈），默认值为ipv4。","default":"ipv4","enum":["ipv4","dual"]},"access_control_list":{"description":"注册集群 API Server SLB 访问控制列表。","type":"array","items":{"description":"注册集群 API Server SLB 访问控制列表。","type":"string","required":false,"example":"192.168.1.0/24\n"},"required":false},"nodepools":{"description":"节点池列表。","type":"array","items":{"description":"节点池配置。","required":false,"$ref":"#/components/schemas/nodepool"},"required":false}},"required":false,"example":"cluster-demo"}}],"responses":{"200":{"schema":{"title":"返回体数据。","description":"返回体。","type":"object","properties":{"cluster_id":{"title":"集群ID。","description":"集群ID。","type":"string","example":"cb95aa626a47740afbf6aa099b650****"},"request_id":{"title":"请求ID。","description":"请求ID。","type":"string","example":"687C5BAA-D103-4993-884B-C35E4314A1E1"},"task_id":{"title":"任务ID。","description":"任务ID。","type":"string","example":"T-5a54309c80282e39ea****"}}}},"5XX":{}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"cluster_id\\\": \\\"cb95aa626a47740afbf6aa099b650****\\\",\\n  \\\"request_id\\\": \\\"687C5BAA-D103-4993-884B-C35E4314A1E1\\\",\\n  \\\"task_id\\\": \\\"T-5a54309c80282e39ea****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<cluster_id>cb95aa626a47740afbf6aa099b650****</cluster_id>\\n<task_id>T-5a54309c80282e39ea00002f</task_id>\\n<request_id>687C5BAA-D103-4993-884B-C35E4314A1E1</request_id>\",\"errorExample\":\"\"}]","title":"创建集群","description":"本文仅提供创建ACK集群的全量参数配置，关于如何通过OpenAPI创建不同类型ACK集群的具体操作，请参见如下文档操作：\n- [通过OpenAPI创建Kubernetes托管版集群](~~90776~~)\n- [通过OpenAPI创建Kubernetes专有版集群](~~197620~~)\n- [通过OpenAPI创建ACK Serverless集群](~~144246~~)\n- [通过OpenAPI创建ACK Edge集群](~~128204~~)\n- [通过OpenAPI创建基础托管版安全沙箱Kubernetes集群](~~196321~~)\n- [通过OpenAPI创建专有版安全沙箱Kubernetes集群](~~140623~~)"}