{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"需要查询的实例的ID。","type":"string","required":true,"docRequired":true,"example":"r-bp1zxszhcgatnx****"}},{"name":"NodeId","in":"query","schema":{"description":"实例中的节点ID。传入本参数可查询指定节点的监控信息。\n\n> * 当Redis实例的架构为读写分离或集群架构时，本参数才可用。\n> * 您可以调用[DescribeLogicInstanceTopology](~~94665~~)接口查询节点ID。","type":"string","required":false,"example":"r-bp1zxszhcgatnx****-db-0"}},{"name":"AccountName","in":"query","schema":{"description":"账号名称，默认（不填任何值）为查询所有账号。","type":"string","required":false,"example":"demo"}},{"name":"DatabaseName","in":"query","schema":{"description":"Redis中的Database，默认（不填任何值）为查询所有DB，取值为0 ~ 255，示例0表示DB 0。","type":"string","required":false,"example":"0"}},{"name":"QueryKeywords","in":"query","schema":{"description":"根据指定的命令查询审计日志，默认查询所有执行过的命令。\n\n> 只能传入单个关键词。","type":"string","required":false,"example":"maxclients"}},{"name":"HostAddress","in":"query","schema":{"description":"客户端IP，默认（不填任何值）为查询所有地址。","type":"string","required":false,"example":"127.0.0.1"}},{"name":"PageSize","in":"query","schema":{"description":"每页显示的最大记录数。","type":"integer","format":"int32","required":false,"example":"30","default":"30","enum":["30","50","100"]}},{"name":"PageNumber","in":"query","schema":{"description":"当前显示的页码。","type":"integer","format":"int32","required":false,"example":"1","default":"1"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","required":true,"docRequired":true,"example":"2019-03-24T12:10:00Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，必须晚于查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n> 由于审计日志的条目数较多，一般查询的时间范围建议在10分钟以内，最长不超过1天。","type":"string","required":true,"docRequired":true,"example":"2019-03-25T12:10:00Z"}}],"responses":{"200":{"schema":{"type":"object","properties":{"EndTime":{"description":"查询结束时间。","type":"string","example":"2019-03-25T12:10:00Z"},"StartTime":{"description":"查询开始时间。","type":"string","example":"2019-03-24T12:10:00Z"},"RequestId":{"description":"请求ID。","type":"string","example":"9F5EB478-824E-4AC4-8D2B-58F31A02****"},"InstanceName":{"description":"实例名称。","type":"string","example":"r-bp1zxszhcgatnx****"},"TotalRecordCount":{"description":"总记录数。","type":"integer","format":"int32","example":"22222"},"PageNumber":{"description":"当前显示的页码。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"每页显示的最大记录数。","type":"integer","format":"int32","example":"30"},"Items":{"type":"object","properties":{"SQL":{"description":"由审计日志组成的集合。","type":"array","items":{"type":"object","properties":{"HostAddress":{"description":"客户端地址。","type":"string","example":"127.0.0.1"},"SQLText":{"description":"命令记录。","type":"string","example":"CONFIG GET maxmemory"},"DatabaseName":{"description":"数据库名称。","type":"string","example":"demo"},"SQLType":{"description":"命令类型。","type":"string","example":"non_read_write"},"ExecuteTime":{"description":"执行时间。","type":"string","example":"2019-03-25T03:22:08Z"},"TotalExecutionTimes":{"description":"执行消耗时间。","type":"string","example":"0"},"NodeId":{"description":"节点ID。\n> 实例为集群或读写分离架构时，本参数才会返回具体的节点ID。","type":"string","example":"r-bp1zxszhcgatnx****-db-0"},"AccountName":{"description":"账号名称。","type":"string","example":"demo"},"IPAddress":{"description":"IP地址。","type":"string","example":"192.16.100.***"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"IncorrectDBInstance.NotSupported","errorMessage":"This instance do not support log audit."},{"errorCode":"InvalidEndTime.Invalid","errorMessage":"pecified end time is before this service active time."},{"errorCode":"InvalidStartTime.Malformed","errorMessage":"The Specified parameter StartTime is not valid."},{"errorCode":"InvalidEndTime.Malformed","errorMessage":"The Specified parameter EndTime is not valid."},{"errorCode":"InvalidPageSize.Malformed","errorMessage":"The specified  parameter PageSize is not valid."},{"errorCode":"InvalidPageNumbers.Malformed","errorMessage":"Specified page number is not valid."},{"errorCode":"InvalidQueryTime.Format","errorMessage":"Specified query time is not valid."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"EndTime\\\": \\\"2019-03-25T12:10:00Z\\\",\\n  \\\"StartTime\\\": \\\"2019-03-24T12:10:00Z\\\",\\n  \\\"RequestId\\\": \\\"9F5EB478-824E-4AC4-8D2B-58F31A02****\\\",\\n  \\\"InstanceName\\\": \\\"r-bp1zxszhcgatnx****\\\",\\n  \\\"TotalRecordCount\\\": 22222,\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 30,\\n  \\\"Items\\\": {\\n    \\\"SQL\\\": [\\n      {\\n        \\\"HostAddress\\\": \\\"127.0.0.1\\\",\\n        \\\"SQLText\\\": \\\"CONFIG GET maxmemory\\\",\\n        \\\"DatabaseName\\\": \\\"demo\\\",\\n        \\\"SQLType\\\": \\\"non_read_write\\\",\\n        \\\"ExecuteTime\\\": \\\"2019-03-25T03:22:08Z\\\",\\n        \\\"TotalExecutionTimes\\\": \\\"0\\\",\\n        \\\"NodeId\\\": \\\"r-bp1zxszhcgatnx****-db-0\\\",\\n        \\\"AccountName\\\": \\\"demo\\\",\\n        \\\"IPAddress\\\": \\\"192.16.100.***\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeAuditRecordsResponse>\\r\\n\\t<Items>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:08Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET band-width</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:08Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET maxmemory</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:08Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET maxclients</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:08Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET qps</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:03Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET qps</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:03Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET maxclients</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t\\t<SQL>\\r\\n\\t\\t\\t<TotalExecutionTimes>0</TotalExecutionTimes>\\r\\n\\t\\t\\t<DatabaseName>0</DatabaseName>\\r\\n\\t\\t\\t<HostAddress>127.0.0.1</HostAddress>\\r\\n\\t\\t\\t<ExecuteTime>2019-03-25T03:22:03Z</ExecuteTime>\\r\\n\\t\\t\\t<SQLText>CONFIG GET maxmemory</SQLText>\\r\\n\\t\\t\\t<AccountName>0</AccountName>\\r\\n\\t\\t\\t<SQLType>non_read_write</SQLType>\\r\\n\\t\\t</SQL>\\r\\n\\t</Items>\\r\\n\\t<TotalRecordCount>36559</TotalRecordCount>\\r\\n\\t<PageNumber>1</PageNumber>\\r\\n\\t<PageSize>30</PageSize>\\r\\n\\t<RequestId>9F5EB478-824E-4AC4-8D2B-58F31A02****</RequestId>\\r\\n\\t<EndTime>2019-03-25T12:10:00Z</EndTime>\\r\\n\\t<StartTime>2019-03-24T12:10:00Z</StartTime>\\r\\n\\t<InstanceName>r-bp1zxszhcgatnx****</InstanceName>\\r\\n</DescribeAuditRecordsResponse>\",\"errorExample\":\"\"}]","title":"查询Redis实例的审计日志","summary":"查询Redis实例的审计日志。","description":"调用本接口时，Redis 实例必须已开启审计日志开关，详情请参见[ModifyAuditLogConfig](~~130206~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}