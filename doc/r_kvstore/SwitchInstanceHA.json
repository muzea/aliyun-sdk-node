{"summary":"执行主从切换（即切换节点角色），可应用于容灾演练、多可用区场景下的应用就近连接等需求。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID，可调用[DescribeInstances](~~60933~~)获取。\n","type":"string","required":true,"docRequired":true,"example":"r-bp1zxszhcgatnx****"}},{"name":"NodeId","in":"query","schema":{"description":"数据分片节点ID，您可以调用[DescribeRoleZoneInfo](~~190794~~)获取CustinsId参数，多个数据分片节点ID之间使用英文逗号（,）分隔，如需指定所有节点请输入`all`。\n> 当Redis实例为集群或读写分离架构时，本参数才可用，且必填。\n","type":"string","required":false,"example":"56****19,56****20"}},{"name":"SwitchMode","in":"query","schema":{"description":"执行时间，取值：\n* **0**：立即执行，默认值。\n* **1**：在可维护时间段执行。\n\n> 您可以调用[ModifyInstanceMaintainTime](~~61000~~)修改Redis实例的可维护时间段。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"SwitchType","in":"query","schema":{"description":"切换模式，取值：\n* **AvailablePriority**：可用性优先，不考虑主从延迟，立即执行主从切换，可能会丢失少量数据。\n* **ReliabilityPriority**：可靠性优先，确保主从同步无延迟时才执行主从切换，不会丢失数据。该模式在写入量较大且持续存在同步延迟的场景下，可能会造成主从切换失败。\n\n> 您需要根据业务场景对数据、服务等方面的需求进行衡量，然后选取切换模式。","type":"string","required":false,"docRequired":true,"enumValueTitles":{"AvailablePriority":"AvailablePriority","ReliabilityPriority":"ReliabilityPriority"},"example":"AvailablePriority","default":"ReliabilityPriority","enum":["AvailablePriority","ReliabilityPriority","DataConsistency"]}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"5D622714-AEDD-4609-9167-F5DDD3D1****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"5D622714-AEDD-4609-9167-F5DDD3D1****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SwitchInstanceHAResponse>\\n    <RequestId>5D622714-AEDD-4609-9167-F5DDD3D1****</RequestId>\\n</SwitchInstanceHAResponse>\",\"errorExample\":\"\"}]","title":"切换实例HA","description":"> 关于多可用区场景下的应用就近连接的详细说明，请参见[场景示例](~~164222~~)。\n\n调用本接口时，实例类型为高可用或双副本。\n\n调用本接口将产生下述影响：\n* 触发节点角色切换后，执行切换的数据节点将出现秒级的只读状态和连接闪断，请确保您的应用具备重连机制。\n* 实例处于切换中状态时，您将无法执行实例级别的操作（例如变更配置、迁移可用区等）。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}