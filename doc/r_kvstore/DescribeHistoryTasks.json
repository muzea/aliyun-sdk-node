{"summary":"查看任务中心的任务列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"RegionId","in":"query","allowEmptyValue":false,"schema":{"description":"待处理事件所属的地域ID，可调用[DescribeRegions](~~61012~~)查询。","type":"string","required":false,"docRequired":true,"example":"cn-beijing"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：10~100。默认值：10。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"10","example":"10","default":"10"}},{"name":"PageNumber","in":"query","schema":{"description":"查询结果的页码。取值范围：正整数。 默认值：1。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1","default":"1"}},{"name":"InstanceType","in":"query","schema":{"description":"当前固定为Instance。","type":"string","required":false,"example":"Instance"}},{"name":"Status","in":"query","schema":{"description":"任务状态，用于选择对应状态的任务：\n- **Scheduled**：等待执行\n- **Running**：执行中\n- **Succeed**：执行成功\n- **Failed**：执行失败\n- **Cancelling**：正在终止\n- **Canceled**：已终止\n- **Waiting**：等待预设时间\n> 默认为空，表示全选，如需选择多个状态请用英文逗号（,）分隔。","type":"string","required":false,"example":"Scheduled"}},{"name":"InstanceId","in":"query","schema":{"description":"实例ID，用于查询对应实例的任务，默认为空，表示不限制。如需查询多个实例请用英文逗号（,）分隔，最多支持30个。","type":"string","required":false,"example":"r-uf62br2491p5l****\n"}},{"name":"TaskId","in":"query","schema":{"description":"任务ID，用于查询已知ID的任务默认为空，表示不限制。如需查询多个请用英文逗号（,）分隔，最多支持30个。","type":"string","required":false,"example":"t-83br18hloy3faf****\n"}},{"name":"TaskType","in":"query","schema":{"description":"任务类型，用于查询特定类型任务情况，默认为空，表示不限制，取值如下：\n- **ModifyInsSpec**：规格变更或迁移\n- **DeleteInsNode**：删除分片\n- **AddInsNode**：增加分片\n- **HaSwitch**：实例主备切换\n- **RestartIns**：重启实例\n- **CreateIns**：创建实例\n- **ModifyInsConfig**：配置变更\n> 如需查询多个请用英文逗号（,）分隔。","type":"string","required":false,"example":"ModifyInsSpec"}},{"name":"FromStartTime","in":"query","schema":{"description":"查询任务的最早开始时间，格式为yyyy-MM-ddTHH:mm:ssZ（UTC时间），最早支持查询30天前的数据。","type":"string","required":true,"docRequired":true,"example":"2022-01-02T11:31:03Z"}},{"name":"ToStartTime","in":"query","schema":{"description":"查询任务的最晚开始时间，格式为yyyy-MM-ddTHH:mm:ssZ（UTC时间），需晚于任务的最早开始时间。","type":"string","required":true,"docRequired":true,"example":"2022-02-02T11:31:03Z"}},{"name":"FromExecTime","in":"query","schema":{"description":"任务执行耗时的最小值。用于筛选任务执行耗时大于此时间的任务，单位秒。默认0，表示不限制。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"ToExecTime","in":"query","schema":{"description":"任务执行耗时的最大值。用于筛选任务执行耗时不小于此时间的任务，单位秒。默认0，表示不限制。","type":"integer","format":"int32","required":false,"example":"0"}}],"responses":{"200":{"schema":{"type":"object","properties":{"PageNumber":{"description":"当前显示的页码。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"5D622714-AEDD-4609-9167-F5DDD3D1****"},"PageSize":{"description":"每页显示的最大记录数。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"不考虑分页因素，满足查询条件的总任务数。","type":"integer","format":"int32","example":"5"},"Items":{"description":"任务对象列表。","type":"array","items":{"description":"任务对象，格式是词典。","type":"object","properties":{"Status":{"description":"任务状态。\n- **Scheduled**：等待执行\n- **Running**：执行中\n- **Succeed**：执行成功\n- **Failed**：执行失败\n- **Cancelling**：正在终止\n- **Canceled**：已终止\n- **Waiting**：等待预设时间","type":"integer","format":"int32","example":"Running"},"TaskId":{"description":"任务ID。","type":"string","example":"t-83br18hloy3faf****"},"CurrentStepName":{"description":"当前执行的步骤名，如果为空代表任务未开始。","type":"string","example":"exec_task"},"StartTime":{"description":"任务开始时间，格式为yyyy-MM-ddTHH:mm:ssZ（UTC时间）。","type":"string","example":"2022-02-03T11:31:03Z"},"EndTime":{"description":"任务结束时间，格式为yyyy-MM-ddTHH:mm:ssZ（UTC时间）。","type":"string","example":"2022-02-03T12:06:17Z"},"TaskType":{"description":"任务类型。\n- **ModifyInsSpec**：规格变更或迁移\n- **DeleteInsNode**：删除分片\n- **AddInsNode**：增加分片\n- **HaSwitch**：实例主备切换\n- **RestartIns**：重启实例\n- **CreateIns**：创建实例\n- **ModifyInsConfig**：配置变更","type":"string","example":"ModifyInsSpec"},"RemainTime":{"description":"预估剩余执行时间，单位秒，0表示已执行完成。","type":"integer","format":"int32","example":"1000"},"Progress":{"description":"当前进度，范围为[0,100]。","type":"number","format":"float","example":"79.0"},"RegionId":{"description":"地域ID。","type":"string","example":"cn-shanghai"},"InstanceType":{"description":"实例类型，固定为Instance。","type":"string","example":"Instance"},"InstanceId":{"description":"实例ID。","type":"string","example":"r-bp1zxszhcgatnx****"},"InstanceName":{"description":"实例名称。","type":"string","example":"dba-tair-test-qcloud"},"DbType":{"description":"DB类型，固定为redis。","type":"string","example":"redis"},"Product":{"description":"产品，固定为kvstore。","type":"string","example":"kvstore"},"TaskDetail":{"description":"任务详情，不同taskType对应不同的输出。","type":"string","example":"{\\\"callerUid\\\":\\\"test\\\"}"},"ReasonCode":{"description":"当前任务发起的原因。","type":"string","example":"小版本升级"},"ActionInfo":{"description":"允许的操作信息，具体使用时是根据currentStepName+status在此信息中匹配操作Action，如果未匹配到Action，代表任务当前状态不支持操作，示例：\n\n```\n{\"steps\": [\n    {\n      \"step_name\": \"exec_task\", // 步骤名, 与currentStepName匹配\n      \"action_info\": {    // 步骤支持的操作\n        \"Waiting\": [      // 状态，与status匹配\n          \"modifySwitchTime\" // 操作Action，可能多个，即代表支持多个操作\n        ]\n      }\n    },\n    {\n      \"step_name\": \"init_task\", // 步骤名\n      \"action_info\": {    // 步骤支持的操作\n        \"Running\": [      // 状态\n          \"cancel\",       // 操作\n          \"pause\"\n        ]\n      }\n    }\n  ]\n}\n```\n\n系统可能支持的操作： \n* **retry**：重试\n* **cancel**：取消\n* **modifySwitchTime**：修改切换时间或恢复时间","type":"string","example":"{\"steps\":[{\"action_info\":{\"Waiting\":[\"modifySwitchTime\"]},\"step_name\":\"exec_task\"}]}"},"Uid":{"description":"资源所属的用户ID。","type":"string","example":"141345906006****"},"CallerSource":{"description":"请求用户ID，callerSource为User时代表用户UID。","type":"string","example":"141345906006****"},"CallerUid":{"description":"请求来源。 \n* **System**：系统自动\n* **User**：用户","type":"string","example":"User"}}}}}}}},"errorCodes":{"400":[{"errorCode":"Param.Invalid","errorMessage":"Param invalid"},{"errorCode":"Param.Invalid.TimeEndBeforeStart","errorMessage":"Param invalid. End time before start time"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"PageNumber\\\": 1,\\n  \\\"RequestId\\\": \\\"5D622714-AEDD-4609-9167-F5DDD3D1****\\\",\\n  \\\"PageSize\\\": 10,\\n  \\\"TotalCount\\\": 5,\\n  \\\"Items\\\": [\\n    {\\n      \\\"Status\\\": 0,\\n      \\\"TaskId\\\": \\\"t-83br18hloy3faf****\\\",\\n      \\\"CurrentStepName\\\": \\\"exec_task\\\",\\n      \\\"StartTime\\\": \\\"2022-02-03T11:31:03Z\\\",\\n      \\\"EndTime\\\": \\\"2022-02-03T12:06:17Z\\\",\\n      \\\"TaskType\\\": \\\"ModifyInsSpec\\\",\\n      \\\"RemainTime\\\": 1000,\\n      \\\"Progress\\\": 79,\\n      \\\"RegionId\\\": \\\"cn-shanghai\\\",\\n      \\\"InstanceType\\\": \\\"Instance\\\",\\n      \\\"InstanceId\\\": \\\"r-bp1zxszhcgatnx****\\\",\\n      \\\"InstanceName\\\": \\\"dba-tair-test-qcloud\\\",\\n      \\\"DbType\\\": \\\"redis\\\",\\n      \\\"Product\\\": \\\"kvstore\\\",\\n      \\\"TaskDetail\\\": \\\"{\\\\\\\\\\\\\\\"callerUid\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"test\\\\\\\\\\\\\\\"}\\\",\\n      \\\"ReasonCode\\\": \\\"小版本升级\\\",\\n      \\\"ActionInfo\\\": \\\"{\\\\\\\"steps\\\\\\\":[{\\\\\\\"action_info\\\\\\\":{\\\\\\\"Waiting\\\\\\\":[\\\\\\\"modifySwitchTime\\\\\\\"]},\\\\\\\"step_name\\\\\\\":\\\\\\\"exec_task\\\\\\\"}]}\\\",\\n      \\\"Uid\\\": \\\"141345906006****\\\",\\n      \\\"CallerSource\\\": \\\"141345906006****\\\",\\n      \\\"CallerUid\\\": \\\"User\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询历史运维任务"}