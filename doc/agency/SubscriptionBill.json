{"summary":"阿里云生态伙伴多级账单订阅oss生成","methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"SubscribeBucket","in":"query","schema":{"title":"subscribeType","description":"账单存储oss bucket名称","type":"string","required":true,"example":"bill-bucket"}},{"name":"BucketOwnerId","in":"query","schema":{"title":"callerMainUid","description":"存储文件Oss归属的UID。\n\n如果是伙伴订阅，并需要推送到下级伙伴账号的OSS上时，需要此账号为伙伴账号的下级伙伴账号，并对下级伙伴账号授予[AliyunConsumeDump2OSSRole](https://ram.console.aliyun.com/?spm=api-workbench.API%20Document.0.0.68c71e0fhmTSJp#/role/authorize?request=%7B%22Requests%22:%20%7B%22request1%22:%20%7B%22RoleName%22:%20%22AliyunConsumeDump2OSSRole%22,%20%22TemplateId%22:%20%22Dump2OSSRole%22%7D%7D,%20%22ReturnUrl%22:%20%22https:%2F%2Fusercenter2.aliyun.com%22,%20%22Service%22:%20%22Consume%22%7D)权限 \n\n如果是伙伴订阅,且推送到伙伴账号的OSS时,需要伙伴账号进行授予[AliyunConsumeDump2OSSRole](https://ram.console.aliyun.com/?spm=api-workbench.API%20Document.0.0.68c71e0fhmTSJp#/role/authorize?request=%7B%22Requests%22:%20%7B%22request1%22:%20%7B%22RoleName%22:%20%22AliyunConsumeDump2OSSRole%22,%20%22TemplateId%22:%20%22Dump2OSSRole%22%7D%7D,%20%22ReturnUrl%22:%20%22https:%2F%2Fusercenter2.aliyun.com%22,%20%22Service%22:%20%22Consume%22%7D)权限。","type":"integer","format":"int64","required":true,"example":"5569414254138836"}},{"name":"SubscribeType","in":"query","schema":{"title":"popClientIP","description":"订阅类型 \nPartnerBillingItemDetailForBillingPeriod  计费项账单明细\nPartnerBillingItemDetailMonthly    计费项月账单\nPartnerInstanceDetailForBillingPeriod  实例账单明细\nPartnerInstanceDetailMonthly 实例月账单","type":"string","required":true,"example":"PartnerBillingItemDetailForBillingPeriod"}},{"name":"BeginBillingCycle","in":"query","schema":{"title":"subscribeBucket","description":"起始推送账单月份\n格式yyyy-MM\n\n订阅成功后，系统会自动推送起始账期到当前时间的数据。最多可推送最近六个月内数据(包含当前月)。超出则订阅无效","type":"string","required":true,"example":"2022-10"}},{"name":"BillFormat","in":"query","schema":{"description":"账单文件格式\n可选\ncsv\nparquet\n\n如果订阅多个文件类型,建议区分bucket订阅.避免文件覆盖","type":"string","required":true,"example":"csv"}},{"name":"SubscribeSegmentSize","in":"query","schema":{"description":"单个文件账单数据行数阈值，超过此阈值会自动拆分成多个文件，拆分后文件的命名规则为`uid_billType_billCycle_SquenceNo_fileNo`\n\n文件名称除fileNo信息不一致外其他信息全部一致,可视为同一账期,同一类型文件.因拆分导致的多个文件.","type":"integer","format":"int32","required":false,"example":"100000"}}],"responses":{"200":{"schema":{"title":"result","description":"result","type":"object","properties":{"Message":{"title":"message","description":"提示信息","type":"string","example":"成功"},"RequestId":{"title":"requestId","description":"请求id","type":"string","example":"9C14ADFE-DF0A-54D4-8BD5-45D0839246B4"},"Data":{"description":"返回数据","type":"boolean","example":"true"},"Code":{"title":"code","description":"状态码","type":"string","enumValueTitles":{"1001":"订阅账单类型无效","1002":"订阅文件类型无效","1003":"开始推送日期无效","1004":"订阅失败","1005":"没有订阅权限","1006":"已存在订阅记录","1007":"无效的bucket"},"example":"200"},"Success":{"title":"success","description":"是否成功","type":"boolean","example":"true"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\"成功\\\",\\n  \\\"RequestId\\\": \\\"9C14ADFE-DF0A-54D4-8BD5-45D0839246B4\\\",\\n  \\\"Data\\\": true,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"订阅三级账单","description":"- 请确保调用者是国际阿里云总经销商伙伴。\n- 用户一次订阅一个类型的账单文件。\n- 订阅后次日开始每日推送上一日生成的账单文件，每月5号推送上月整账期的全量账单文件。\n- 按天生成的账单文件可能存在时延，延迟生成的账单会在生成次日推送，也可能会包含上一日之前延迟到上一日生成的账单。建议每个月初拉取上个月全量文件。\n- 需要给订阅用户授予[AliyunConsumeDump2OSSRole](https://ram.console.aliyun.com/?spm=api-workbench.API%20Document.0.0.68c71e0fhmTSJp#/role/authorize?request=%7B%22Requests%22:%20%7B%22request1%22:%20%7B%22RoleName%22:%20%22AliyunConsumeDump2OSSRole%22,%20%22TemplateId%22:%20%22Dump2OSSRole%22%7D%7D,%20%22ReturnUrl%22:%20%22https:%2F%2Fusercenter2.aliyun.com%22,%20%22Service%22:%20%22Consume%22%7D)权限。\n- 文件名\n\n```\n\nBillingItemDetailForBillingPeriod   (计费项账单明细)\n  \n每日推送文件名格式：UID_PartnerBillingItemDetail_YYYYMMDD_SquenceNo_fileNo，例如：169**_BillingItemDetail_20190310_0001_01。\n  \n下月初完整文件名格式：UID_PartnerBillingItemDetail_YYYYMM_SquenceNo_fileNo，例如：169**_BillingItemDetail_201903_0001_01。\n\nInstanceDetailForBillingPeriod  (实例账单明细)\n \n 每日推送文件名格式：UID_PartnerInstanceDetail_YYYYMMDD_SquenceNo_fileNo，例如：169**_InstanceDetail_20190310_0001_01。\n  \n下月初完整文件名格式：UID_PartnerInstanceDetail_YYYYMM_SquenceNo_fileNo，例如：169**_InstanceDetail_201903_1999-0001_01。\n\nBillingItemDetailMonthly   (计费项月账单)\n  \n每日推送文件名格式：UID_PartnerBillingItemDetailMonthly_YYYYMM_SquenceNo_fileNo，例如：169**_BillingItemDetailMonthly_201903_0001_01。此文件每日更新月初至当日的全量数据，直至次月5号。\n\nInstanceDetailMonthly  (实例月账单)\n  \n每日推送文件名格式：UID_PartnerInstanceDetailMonthly_YYYYMM_SquenceNo_fileNo，例如：169**_InstanceDetailMonthly_201903_0001_01。此文件每日更新月初至当日的全量数据，直至次月5号。\n\nfileNo只有在进行账单行数达到拆分阈值时,进行了文件的拆分.才会存在\n\n```\n**本内容只发布国际站**"}