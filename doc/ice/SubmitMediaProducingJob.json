{"summary":"将一个或多个视频、音频、图片、字幕素材合成为成品。可以通过时间线(Timeline)参数直接提交剪辑设置，也可以先创建云剪辑工程，使用工程ID提交剪辑任务。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"ProjectId","in":"query","schema":{"description":"剪辑工程ld。\n><notice>必须填写ProgectId、Timeline、TempalteId三个参数中的一个，剩余两个参数填写为空。></notice>","type":"string","required":false,"example":"xxxxxfb2101cb318xxxxx"}},{"name":"Timeline","in":"formData","schema":{"description":"云剪辑任务时间线。具体结构定义，请参见[Timeline配置说明](https://help.aliyun.com/document_detail/198823.htm?spm=a2c4g.11186623.2.5.92447a40M5rR1I#topic-2024662)。><notice>必须填写ProgectId、Timeline、TempalteId三个参数中的一个，剩余两个参数填写为空。></notice>","type":"string","required":false,"example":"{\"VideoTracks\":[{\"VideoTrackClips\":[{\"MediaId\":\"****4d7cf14dc7b83b0e801c****\"},{\"MediaId\":\"****4d7cf14dc7b83b0e801c****\"}]}]}"}},{"name":"TemplateId","in":"query","schema":{"description":"模板Id，用于快速低门槛的构建时间线。><notice>必须填写ProgectId、Timeline、TempalteId三个参数中的一个，剩余两个参数填写为空。\n当TemplateId不为空时，ClipsParam不能为空。></notice>","type":"string","required":false,"example":"****96e8864746a0b6f3****"}},{"name":"ClipsParam","in":"query","schema":{"description":"模板对应的素材参数，Json格式，当TemplateId不为空时，ClipsParam不能为空。具体格式见 [普通模板创建及使用](https://help.aliyun.com/document_detail/328557.html)、[高级模板创建及使用](https://help.aliyun.com/document_detail/291418.html)。","type":"string","required":false,"example":"见模板使用文档"}},{"name":"ProjectMetadata","in":"query","schema":{"description":"剪辑工程的元数据信息，Json格式。具体结构定义参见[ProjectMetadata](https://help.aliyun.com/document_detail/357745.html#title-yvp-81k-wff)。","type":"string","required":false,"example":"{\"Description\":\"剪辑视频描述\",\"Title\":\"剪辑标题测试\"}"}},{"name":"OutputMediaTarget","in":"query","schema":{"description":"输出成品的目标类型。取值：\n\n- oss-object（客户在阿里云oss bucket下的oss object）\n\n- vod-media（阿里云vod的媒资）","type":"string","required":false,"example":"oss-object"}},{"name":"OutputMediaConfig","in":"query","schema":{"description":"输出成品的目标配置，Json格式。可以设置输出成品的在OSS 上的URL，或者VOD Bucket 中的存储位置。\n\n输出到OSS时，输出目标的 MediaURL 必填；输出到VOD 时，StorageLocation 和 FileName 两个参数必填。\n\n[OutputMediaConfig 参数示例](https://help.aliyun.com/document_detail/357745.html#title-4j6-ve7-g31)。","type":"string","required":true,"example":"{\"MediaURL\":\"https://example-bucket.oss-cn-shanghai.aliyuncs.com/example.mp4\"}"}},{"name":"UserData","in":"query","schema":{"description":"自定义设置，Json格式，长度限制为512字节。支持[自定义回调地址配置](~~451631~~)。","type":"string","required":false,"example":"{\"NotifyAddress\":\"http://xx.xx.xxx\"}或{\"NotifyAddress\":\"https://xx.xx.xxx\"}或{\"NotifyAddress\":\"ice-callback-demo\"}"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。","type":"string","required":false,"example":"****12e8864746a0a398****"}},{"name":"Source","in":"query","schema":{"description":"剪辑合成请求来源，取值范围：\n\n- OpenAPI：API 直接请求。\n\n- AliyunConsole：请求来自于阿里云控制台。\n\n- WebSDK：请求来自于集成了WebSDK的前端页面。","type":"string","required":false,"example":"OPENAPI"}},{"name":"EditingProduceConfig","in":"query","schema":{"description":"剪辑合成参数， [参数详情](https://help.aliyun.com/document_detail/357745.html#title-10z-t9u-n69)。\n\n- AutoRegisterInputVodMedia：是否需要将您时间线中的VOD媒资自动注册至IMS，默认为true。\n\n- OutputWebmTransparentChannel: 是否需要输出视频带透明通道，默认为false。\n\n- CoverConfig: 自定义封面图参数。\n- 等......","type":"string","required":false,"example":"{\n      \"AutoRegisterInputVodMedia\": \"true\",\n      \"OutputWebmTransparentChannel\": \"true\"\n}"}},{"name":"MediaMetadata","in":"query","schema":{"description":"合成视频的元数据，JSON格式。具体结构定义，请参见[MediaMetadata](https://help.aliyun.com/document_detail/357745.html?spm=a2c4g.445712.0.0.49a716dbA8hgdz#97ff26d0e3c28)。","type":"string","required":false,"example":"{\n      \"Title\":\"test-title\",\n      \"Tags\":\"test-tags1,tags2\"\n}"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"****36-3C1E-4417-BDB2-1E034F****"},"ProjectId":{"title":"剪辑工程Id","description":"剪辑工程ID。","type":"string","example":"****b4549d46c88681030f6e****"},"JobId":{"title":"合成作业Id","description":"合成作业ID。","type":"string","example":"****d80e4e4044975745c14b****"},"MediaId":{"title":"合成ICE媒资Id","description":"合成媒资ID。","type":"string","example":"****c469e944b5a856828dc2****"},"VodMediaId":{"title":"vod媒资id","description":"如果视频输出的位置为vod时，返回vod媒资id。","type":"string","example":"****d8s4h75ci975745c14b****"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter","errorMessage":"The specified parameter \\ is not valid."}],"404":[{"errorCode":"ProjectNotFound","errorMessage":"The specified project not found"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"****36-3C1E-4417-BDB2-1E034F****\\\",\\n  \\\"ProjectId\\\": \\\"****b4549d46c88681030f6e****\\\",\\n  \\\"JobId\\\": \\\"****d80e4e4044975745c14b****\\\",\\n  \\\"MediaId\\\": \\\"****c469e944b5a856828dc2****\\\",\\n  \\\"VodMediaId\\\": \\\"****d8s4h75ci975745c14b****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SubmitMediaProducingJobResponse>\\n    <RequestId>****36-3C1E-4417-BDB2-1E034F****</RequestId>\\n    <ProjectId>****b4549d46c88681030f6e****</ProjectId>\\n    <JobId>****d80e4e4044975745c14b****</JobId>\\n    <MediaId>****c469e944b5a856828dc2****</MediaId>\\n</SubmitMediaProducingJobResponse>\",\"errorExample\":\"\"}]","title":"提交剪辑合成作业","description":"- 该接口返回合成任务的提交结果，不保证接口返回时视频已合成完毕。合成任务将进入后台排队，异步执行。    \n- 云剪辑时间线中引用的素材，既可以是素材库中的媒资，也可以直接引用OSS文件，暂不支持外部地址或CDN地址。当素材为OSS文件时，MediaUrl仅支持OSS地址格式，如：https://your-bucket.oss-region-name.aliyuncs.com/your-object.ext。    \n-  视频合成完成后，会自动注册媒资，此时媒资还是分析中状态，当媒资分析完成后，可以根据MediaId获取成片时长及分辨率信息。\n## 使用限制\n- 本接口流控值为 30 qps\n- 视频轨、图片轨、字幕轨的轨道数每种均限制最多100个。    \n- 素材个数无限制，素材文件总大小不能超过1 TB。  \n- 输入或输出OSS Bucket所在Region，必须和使用IMS的Region保持一致。   \n- 当输出为视频时，成片分辨率有以下限制：\n    - 宽高都不能小于128 px。\n    - 宽高都不能大于4096 px。\n    - 短边不能大于2160 px。","requestParamsDescription":"## **OutputMediaConfig 参数示例**\n**示例：输出到 OSS**\n```\n{\n  \"MediaURL\":\"https://my-test-bucket.oss-cn-shanghai.aliyuncs.com/test/xxxxxtest001xxxxx.mp4\",\n  \"Bitrate\": 2000,  \n  \"Width\": 800,  \n  \"Height\": 680\n}\n```\n当输出到 OSS 时，MediaURL 必填。OutputMediaTarget 参数默认值为 \"oss-object\", 表示输出到 OSS。 其他参数可以选填，其中 Bitrate 用来设置输出成品的码率，通常码率越高越清晰，最大可以设置到 5000。 Width, Height 用来设置成品的分辨率。\n\nOSS URL 的路径格式： https://bucketname.oss-region-name.aliyuncs.com/xxx/yyy.ext\n\nbucketname 是 OSS Bucket 的名称。\n\noss-region-name.aliyuncs.com 是 OSS 文件的外网 Endpoint，比如上海，北京，杭州的分别是：\n```\noss-cn-shanghai.aliyuncs.com\noss-cn-hangzhou.aliyuncs.com \noss-cn-beijing.aliyuncs.com\n```\n**示例：输出到vod**\n```\n{ \n  \"StorageLocation\": \"outin-*xxxxxx7d2a3811eb83da00163exxxxxx.oss-cn-shanghai.aliyuncs.com\",  \n  \"FileName\": \"output.mp4\",  \n  \"Bitrate\": 2000,  \n  \"Width\": 800,  \n  \"Height\": 680\n}\n```\n当输出到 VOD 时， StorageLocation 和 FileName 两个参数必填。OutputMediaTarget 参数设置为 \"vod-media\", 表示输出到点播 VOD 的存储Bucket。点播VOD可以使用的存储位置可以在 VOD 里面上传媒资后，在媒资的存储地址中看到。\n\n**OutputMediaConfig 结构中的参数说明**\n\n|属性名|类型|描述|\n|:---|:---|:---|\n|MediaURL|String|输出的媒资的 URL （当 OutputMediaTarget 的目标为 oss-object 时， 指定 OSS 文件的 HTTP URL 路径）, 如：http://xxx-bucket-name.oss-cn-shanghai.aliyuncs.com/OSS 跟调用的服务所在区域相同。|\n|StorageLocation|String|当 OutputMediaTarget 的目标为 vod-media 时， 指定 storage location 来存储媒资到 VOD;storage location 是 VOD 中的文件存储位置， 不包含 http:// 的前缀， 如：outin-xxxxxx.oss-cn-shanghai.aliyuncs.com。|\n|FileName|String|当 OutputMediaTarget 的目标为 vod-media 时，指定 fileName（包含文件后缀，不含路径）作为输出文件名。|\n|Width|Integer|输出成品的宽。可以不填，默认值是多个素材的最大宽。|\n|Height|Integer|输出成品的高。可以不填，默认值是多个素材的最大高。|\n|Bitrate|Integer|输出成品的码率，单位为Kbps。可以不填，默认值是多个素材的最高码率。|\n|VodTemplateGroupId|String|合成成片输出到vod，指定vod转码模板组。如不需要VOD转码，请填写 \"VOD\\_NO_TRANSCODE\"。|"}