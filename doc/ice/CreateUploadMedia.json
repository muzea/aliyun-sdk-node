{"summary":"获取媒资上传地址和凭证，并创建媒资信息。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"AppId","in":"query","schema":{"description":"应用ID。默认取值：app-1000000。","type":"string","required":false,"example":"app-1000000"}},{"name":"EntityId","in":"query","schema":{"description":"实体 ID。可调用CreateEntity接口创建实体，自定义动态元数据结构。","type":"string","required":false,"example":"9e177cac2fb44f8b8c67b199fcc7bffd"}},{"name":"FileInfo","in":"query","schema":{"description":"文件信息，JSON类型，包含参数字段：\n- Type（必填）：文件类型，取值video、image、audio、text、other。\n- Name（必填）：文件名，不带扩展名。\n- Size（选填）：文件大小。\n- Ext（必填）：文件扩展名。","type":"string","required":false,"example":"{\\\"Type\\\":\\\"video\\\",\\\"Name\\\":\\\"test\\\",\\\"Size\\\":108078336,\\\"Ext\\\":\\\"mp4\\\"}"}},{"name":"UserData","in":"query","schema":{"description":"自定义设置。为JSON字符串，支持消息回调等设置。","type":"string","required":false,"example":"{\"MessageCallback\":{\"CallbackURL\":\"http://example.aliyundoc.com\"},\"Extend\":{\"localId\":\"*****\",\"test\":\"www\"}}"}},{"name":"UploadTargetConfig","in":"query","schema":{"description":"目标存储地址。\n\nStorageType 取值：仅支持oss。\n\nStorageLocation 仅支持VOD点播存储，不支持用户自有OSS存储。","type":"string","required":false,"example":"{\\\"StorageType\\\":\\\"oss\\\",\\\"StorageLocation\\\":\\\"outin-***.oss-cn-shanghai.aliyuncs.com\\\"}"}},{"name":"MediaMetaData","in":"query","schema":{"description":"上传媒资的元数据，JSON格式。\n\nTitle  标题（必填）：\n- 长度不超过128个字符。\n- UTF-8编码。\n\nDescription  描述（选填）：\n- 长度不超过1024个字符。\n- UTF-8编码。\n\nCateId 分类ID（选填）。\n\nTags 标签（选填）。\n\nBusinessType  业务类型（必填），取值：\n- Type = video ，取值：\nopening： 片头/开场；ending： 片尾\n- Type =  image ，取值：\n  default：默认；\n  cover：封面\n- Type = text ，取值：\n  subtitles：字幕；\n  font：字体；\n- Type=material ，取值：\n  watermark：水印；\n- general 通用；\nCoverURL 封面（选填）。\n\nDynamicMetaData 动态元数据，类型为字符串。","type":"string","required":false,"example":"{\\\"Title\\\": \\\"UploadTest\\\", \\\"Description\\\": \\\"UploadImageTest\\\", \\\"Tags\\\": \\\"tag1,tag2\\\",\\\"BusinessType\\\":\\\"cover\\\"}"}},{"name":"PostProcessConfig","in":"query","schema":{"description":"Type = video  || audio  有上传后处理动作。\n\nProcessType取值：Workflow。","type":"string","required":false,"example":"{\\\"ProcessType\\\":\\\"Workflow\\\",\\\"ProcessID\\\":\\\"74ba870f1a4873a3ba238e0bf6fa9***\\\"}"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"title":"RequestId","description":"请求ID。","type":"string","example":"4E84BE44-58A7-****-****-FBEBEA16EF94"},"MediaId":{"description":"媒资ID。","type":"string","example":"****20b48fb04483915d4f2cd8ac****"},"MediaURL":{"description":"媒资地址。\n> 如果配置了CDN域名则返回CDN地址，否则为OSS地址。说明如果返回的MediaURL在浏览器无法访问（403），是因为您开启了点播域名的鉴权功能。可关闭URL鉴权或自助生成鉴权签名。\n","type":"string","example":"https://xxq-live-playback.oss-cn-shanghai.aliyuncs.com/capture/5d96d2b4-111b-4e5d-a0e5-20f44405bb55.mp4"},"FileURL":{"description":"文件OSS地址（不带鉴权）。","type":"string","example":"http://outin-***.oss-cn-north-2-gov-1.aliyuncs.com/sv/40360f05-181f63c3110-0004-cd8e-27f-de3c9.mp4"},"UploadAddress":{"description":"上传地址。\n>接口返回的上传地址是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAddress。","type":"string","example":"eyJTZWN1cml0a2VuIjoiQ0FJU3p3TjF****"},"UploadAuth":{"description":"上传凭证。\n\n> 接口返回的上传凭证是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAuth。","type":"string","example":"eyJFbmRwb2ludCI6Imm****"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"4E84BE44-58A7-****-****-FBEBEA16EF94\\\",\\n  \\\"MediaId\\\": \\\"****20b48fb04483915d4f2cd8ac****\\\",\\n  \\\"MediaURL\\\": \\\"https://xxq-live-playback.oss-cn-shanghai.aliyuncs.com/capture/5d96d2b4-111b-4e5d-a0e5-20f44405bb55.mp4\\\",\\n  \\\"FileURL\\\": \\\"http://outin-***.oss-cn-north-2-gov-1.aliyuncs.com/sv/40360f05-181f63c3110-0004-cd8e-27f-de3c9.mp4\\\",\\n  \\\"UploadAddress\\\": \\\"eyJTZWN1cml0a2VuIjoiQ0FJU3p3TjF****\\\",\\n  \\\"UploadAuth\\\": \\\"eyJFbmRwb2ludCI6Imm****\\\"\\n}\",\"type\":\"json\"}]","title":"获取媒资上传地址和凭证","description":"- 此接口既支持获取音视频的上传地址和凭证，同时也支持获取图片和辅助媒资的上传地址和凭证。\n- 获取上传地址和凭证为智能媒体服务的核心基础，是每个上传操作的必经过程。\n- 如果视频上传凭证失效（默认有效期为3000秒），请调用刷新视频上传凭证接口重新获取上传凭证。\n- 上传后，可通过配置回调，接收上传事件通知或调用GetMediaInfo接口根据返回的媒资状态来判断是否上传成功。\n- 本接口返回的MediaId参数，可以用于媒资生命周期管理或媒体处理。\n- 本接口仅支持上传至VOD点播存储，不支持上传至用户自有OSS存储。使用自有OSS存储的用户，可以先通过[OSS SDK](https://help.aliyun.com/document_detail/52834.html?spm=a2c4g.31815.0.0.3bc2796cc4Aouh)上传文件至OSS，再调用[RegisterMediaInfo](https://help.aliyun.com/document_detail/441152.html?spm=a2c4g.444822.0.0.41e7796cMLYax8)接口将OSS文件注册至媒资库。\n- 本接口目前仅支持华东2（上海）、华北2（北京）、华南1（深圳）地域。"}