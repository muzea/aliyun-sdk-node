{"summary":"本文介绍生成专区（aigen）类目下的交互式涂抹分割InteractiveScribbleSegmentation的语法及示例。","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"none"},"parameters":[{"name":"ImageUrl","in":"formData","schema":{"description":"输入的图像URL。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。输入限制如下：\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过10 MB。\n- 输入图像：大于等于32x32像素，小于等于4096x4096像素。\n- URL地址中不能包含中文字符。","type":"string","required":true,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/aigen/xxx01.png","isFileTransferUrl":true}},{"name":"MaskImageUrl","in":"formData","schema":{"description":"输入的Mask URL。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。输入限制如下：\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过5 MB。\n- 输入图像：大于等于32x32像素，并与输入原图分辨率保持一致。","type":"string","required":false,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/aigen/xxx02.png","isFileTransferUrl":true}},{"name":"PosScribbleImageUrl","in":"formData","schema":{"description":"正向涂抹轨迹图像URL。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。输入限制如下：\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过5 MB。\n- 输入图像：大于等于32x32像素，小于等于4096x4096像素，并与输入原图分辨率保持一致。","type":"string","required":false,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/aigen/xxx03.png","isFileTransferUrl":true}},{"name":"NegScribbleImageUrl","in":"formData","schema":{"description":"负向涂抹轨迹图像URL。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。输入限制如下：\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过5 MB。\n- 输入图像：大于等于32x32像素，小于等于4096x4096像素，并与输入原图分辨率保持一致。","type":"string","required":false,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/aigen/xxx04.png","isFileTransferUrl":true}},{"name":"IntegratedMaskUrl","in":"formData","schema":{"description":"整合的Mask URL。将初始mask、正向划线记录、负向划线记录分别放在rgb图像的三个通道，合成一个图片，减少传输的图片数量，从而节省上传下载时间。输入限制如下：\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过5 MB。\n- 输入图像：大于等于32x32像素，小于等于4096x4096像素，并与输入原图分辨率保持一致。\n","type":"string","required":false,"example":"http://viapi-test.oss-cn-shanghai.aliyuncs.com/viapi-3.0domepic/aigen/xxx05.png","isFileTransferUrl":true}},{"name":"ReturnForm","in":"formData","schema":{"description":"输出图像形式。取值范围如下：\n\n- rgb_alpha（默认）：返回四通道PNG图，即透明底图。\n- only_alpha：返回单通道mask。\n- white_background：返回白底图。","type":"string","required":false,"example":"only_alpha"}},{"name":"ReturnFormat","in":"formData","schema":{"description":"输出图像格式。支持JPG、PNG，默认为PNG。","type":"string","required":false,"example":"PNG"}},{"name":"EdgeFeathering","in":"formData","schema":{"description":"是否做边缘羽化。默认值为true。","type":"string","required":false,"example":"true"}},{"name":"PostprocessOption","in":"formData","schema":{"description":"选择mask精细化模型。取值范围如下：\n\n- edgerefine：稳定但精细度稍微差一点。\n- maskrefine（默认）：精细度高但不够稳定。","type":"string","required":false,"example":"edgerefine"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"7574ee8f-38a3-4b1e-9280-11c33ab46e51"},"Data":{"description":"返回的结果数据内容。","type":"object","properties":{"ResultUrl":{"description":"输出图片的URL，格式由请求参数确定。\n> 该URL地址为临时地址，有效期为30分钟，过期后将无法访问。若需要长时间或者永久保存文件，请在30分钟内访问URL地址，下载文件转存到自己的OSS或者其他存储空间。","type":"string","example":"https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/viapi-video/person_image_cartoonizer/2023-10-25/55798d04-0957-4ab1-accc-0e4d2d01a039/20231025092636774205_styleanime_n2vedxruht.jpg?Expires=1698283596&OSSAccessKeyId=LTAI4FoLmvQ9urWXgSR****&Signature=ut2kn46Lz%2FRwqJ9jWJ0RBDut12****"}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"7574ee8f-38a3-4b1e-9280-11c33ab46e51\\\",\\n  \\\"Data\\\": {\\n    \\\"ResultUrl\\\": \\\"https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/viapi-video/person_image_cartoonizer/2023-10-25/55798d04-0957-4ab1-accc-0e4d2d01a039/20231025092636774205_styleanime_n2vedxruht.jpg?Expires=1698283596&OSSAccessKeyId=LTAI4FoLmvQ9urWXgSR****&Signature=ut2kn46Lz%2FRwqJ9jWJ0RBDut12****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<InteractiveScribbleSegmentationResponse>\\n    <RequestId>7574ee8f-38a3-4b1e-9280-11c33ab46e51</RequestId>\\n    <Data>\\n        <ResultUrl>https://dashscope-result-sh.oss-cn-shanghai.aliyuncs.com/viapi-video/person_image_cartoonizer/2023-10-25/55798d04-0957-4ab1-accc-0e4d2d01a039/20231025092636774205_styleanime_n2vedxruht.jpg?Expires=1698283596&amp;OSSAccessKeyId=LTAI4FoLmvQ9urWXgSR****&amp;Signature=ut2kn46Lz%2FRwqJ9jWJ0RBDut12****</ResultUrl>\\n    </Data>\\n    <Message>-</Message>\\n</InteractiveScribbleSegmentationResponse>\",\"errorExample\":\"\"}]","title":"交互式涂抹分割","description":"## 功能描述\n交互式涂抹分割能力支持用户通过鼠标涂抹的方式选择目标元素，算法模型通过涂抹区域的位置和大小，自动对涂抹的目标进行分割。\n关于该接口功能的示例图如下：\n\n- 输入原图\n![](https://img.alicdn.com/imgextra/i4/O1CN01PqgYCG1QnCycLh5Ko_!!6000000002020-0-tps-750-500.jpg\" width=\"500)\n- 涂抹操作\n![](https://img.alicdn.com/imgextra/i1/O1CN015rzRd21zXe4SBvMD3_!!6000000006724-0-tps-353-233.jpg\" width=\"500)\n- 分割mask\n![](https://img.alicdn.com/imgextra/i3/O1CN0196ZJjz1C84mm1Wrjs_!!6000000000035-0-tps-750-500.jpg\" width=\"500)\n- 分割结果\n![](https://img.alicdn.com/imgextra/i4/O1CN01JduQb127WHowZOHkQ_!!6000000007804-2-tps-1000-667.png\" width=\"500)\n\n> - 您可以进入[在线咨询](https://www.aliyun.com/core/online-consult?from=aZgW6LJHr2)获取在线人工帮助。\n- 当前能力可在视觉智能开放平台有完整的免费产品体验，您可以单击[立即试用](https://vision.aliyun.com/experience/detail?tagName=aigen&children=InteractiveScribbleSegmentation)对该能力进行更直观试用以及在线购买。\n- 阿里云视觉智能开放平台视觉AI能力API接入、接口使用或问题咨询等，请通过钉钉群（23109592）加入阿里云视觉智能开放平台咨询群联系我们。\n\n## 应用场景\n图片编辑：可对图像中的任意涂抹元素进行选择并智能分离，实现图像后续的二次编辑。\n\n## 特色优势\n- 图片元素识别：根据涂抹区域的位置和大小，自动对涂抹目标进行识别和分割。\n- 自由开放选择：允许用户通过鼠标涂抹操作自由选择和排除所需的分割对象。\n- 适用多种场景：适用于人、动物、食物、物品、家居等各种抠图场景，使用范围广。\n\n## 接入指引\n1. 注册阿里云账号：打开[阿里云官网](https://www.aliyun.com)，在阿里云官网右上角，单击**立即注册**，按照操作提示完成账号注册。\n2. 开通能力：请确保您已开通创新专区服务，若未开通服务请[立即开通](https://common-buy.aliyun.com/?commodityCode=viapi_synthesis_public_cn)。\n3. 创建AccessKey：请确保您已[创建AccessKey](~~175144~~)，如果您使用的是子账号AccessKey，您需要给子账号赋予AliyunVIAPIFullAccess权限，具体操作，请参见[RAM授权](~~145025~~)。\n4. 在线调试（可选）：您可以通过[OpenAPI Explorer](https://next.api.aliyun.com/api/aigen/2024-01-11/InteractiveScribbleSegmentation)在线调试能力，查看完整的调用示例代码及SDK依赖信息，也可以下载完整的工程。\n5. 开发接入步骤：\n- 在[SDK总览](~~145033~~)中选择您要接入使用的SDK语言。\n- 在对应语言的SDK文档中找到AI类目为创新专区（aigen）的SDK包进行安装。\n- 参考文档中提供的示例代码进行适当修改后调用。\n\n6. 示例代码：该能力常用语言的示例代码，请参见[交互式涂抹分割示例代码](~~2699418~~)。\n7. 客户端直接调用：该能力常用的客户端调用方式包括以下几种。\n- [Web前端直接调用](~~467779~~)\n- [小程序场景下直接调用](~~467780~~)\n- [Android端直接调用](~~467781~~)\n- [iOS端直接调用](~~467782~~)\n\n## 输入限制\n\n- 图像格式：JPG、JPEG、PNG、BMP、WEBP。\n- 图像大小：不超过10 MB。\n- 输入图像：大于等于32x32像素，小于等于4096x4096像素。\n- URL地址中不能包含中文字符。\n\n## 计费说明\n交互式涂抹分割能力目前处于公测期，可免费调用。","responseParamsDescription":"## 参数可视化说明\n功能一：正向涂抹分割\n示例：输入原图、当前mask、正向涂抹记录，输出正向分割结果。\n![](https://img.alicdn.com/imgextra/i3/O1CN01ndnaA826l73mVmw9L_!!6000000007701-49-tps-750-556.webp\" width=\"700)<br>\n\n功能二：负向涂抹分割\n输入原图、当前mask、负向涂抹记录，输出负向分割结果。\n![](https://img.alicdn.com/imgextra/i2/O1CN01ECIzHk1Nj8duHq6UM_!!6000000001605-49-tps-750-561.webp\" width=\"700)\n\n## SDK参考\n阿里云视觉AI创新专区类目下的交互式涂抹分割能力推荐使用SDK调用，支持多种编程语言，调用时请选择AI类目为创新专区（aigen）的SDK包，文件参数通过SDK调用可支持本地文件及任意URL，具体可参见[SDK总览](~~145033~~)。\n\n## 示例代码\n该能力常用语言的示例代码，请参见[交互式涂抹分割示例代码](~~2699418~~)。","extraInfo":"## 错误码\n关于交互式涂抹分割的错误码，具体请参见[常见错误码](~~2699435~~)。\n\n## 安全声明\n- 请确保上传的图片或文件来源符合相应的法律法规。\n- 通过体验调试上传的临时文件有效期为1小时，在24小时后会被系统自动清理删除。"}