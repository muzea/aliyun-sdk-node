{"summary":"获取文件上传参数。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"HashKeyList","in":"query","style":"repeatList","schema":{"description":"文件标识。目前仅支持MD5。列表最多传入100个元素。\n> **HashKeyList** 和 **HashKeyContextList**不能同时为空。","type":"array","items":{"description":"文件标识。目前仅支持MD5。","type":"string","required":false,"example":"0a212417e65c26ff133cfff28f6c****"},"required":false,"example":"CreateFileDetectUploadUrl","maxItems":200}},{"name":"Type","in":"query","schema":{"description":"文件类型。取值：\n-  **0**：不确定的文件类型","type":"integer","format":"int32","required":true,"example":"0"}},{"name":"HashKeyContextList","in":"query","style":"repeatList","schema":{"description":"文件标识。目前仅支持MD5。列表最多传入100个元素。\n> **HashKeyList** 和 **HashKeyContextList**不能同时为空。","type":"array","items":{"description":"文件HASH。","type":"object","properties":{"HashKey":{"description":"文件HASH。","type":"string","required":false,"example":"30319dd5cee8f894766e479cac170da0"},"FileSize":{"description":"文件大小。如果文件大小超过限制，将不会返回上传参数。单位：字节。","type":"integer","format":"int32","required":false,"example":"2698557"}},"required":false},"required":false,"maxItems":200}}],"responses":{"200":{"schema":{"description":" ","type":"object","properties":{"RequestId":{"description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"09969D2C-4FAD-429E-BFBF-9A60DEF8BF6F"},"UploadUrlList":{"description":"文件上传需要的参数集合。","type":"array","items":{"description":"文件上传需要的参数。","type":"object","properties":{"PublicUrl":{"description":"文件上传地址的公网EndPoint。","type":"string","example":"http://example.com"},"InternalUrl":{"description":"文件上传地址的内网EndPoint。","type":"string","example":"http://example.com"},"Expire":{"description":"上传参数过期的时间戳，单位为毫秒。","type":"string","example":"1658562101370"},"Context":{"description":"上传签名信息。","type":"object","properties":{"AccessId":{"description":"文件存储位置的AccessKey。","type":"string","example":"LTAI4G1mgPbjvGQuiV1X****"},"Policy":{"description":"文件上传的限制Policy，如文件大小。","type":"string","example":"eyJleHBpcmF0aW9uIjoiMjAyMi0wNy0yM1QxMDo1ODoxMC****"},"Signature":{"description":"文件上传的签名。","type":"string","example":"wDhPgVdnY/bkKFYcYFl+4crl****"},"OssKey":{"description":"文件在OSS Bucket中的存储key。","type":"string","example":"1/2022/06/23/15/41/16559701077444693a0c6-33b2-4cc2-a99f-9f38b8b8****"}}},"FileExist":{"description":"文件是否存在。取值：\n\n- **true**：文件已存在，不需要上传。\n- **false**：文件不存在，需要上传。","type":"boolean","example":"false"},"HashKey":{"description":"文件标识。","type":"string","example":"0a212417e65c26ff133cfff28f6c****"},"Code":{"description":"结果代码，**200**表示成功，若为别的值则表示失败，调用方可根据此字段判断失败原因。","type":"string","example":"200"},"Message":{"description":"错误码的详细信息。","type":"string","example":"successful"}}}}}}}},"errorCodes":{"400":[{"errorCode":"RequestTooFrequently","errorMessage":"Request too frequently, please try again later"},{"errorCode":"InvalidApiDetectType","errorMessage":"Unsupported Api Detect Type."}],"403":[{"errorCode":"NoPermission","errorMessage":"caller has no permission"}],"500":[{"errorCode":"ServerError","errorMessage":"ServerError"},{"errorCode":"SystemBusy","errorMessage":"System busy, please try again later."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"09969D2C-4FAD-429E-BFBF-9A60DEF8BF6F\\\",\\n  \\\"UploadUrlList\\\": [\\n    {\\n      \\\"PublicUrl\\\": \\\"http://example.com\\\",\\n      \\\"InternalUrl\\\": \\\"http://example.com\\\",\\n      \\\"Expire\\\": \\\"1658562101370\\\",\\n      \\\"Context\\\": {\\n        \\\"AccessId\\\": \\\"LTAI4G1mgPbjvGQuiV1X****\\\",\\n        \\\"Policy\\\": \\\"eyJleHBpcmF0aW9uIjoiMjAyMi0wNy0yM1QxMDo1ODoxMC****\\\",\\n        \\\"Signature\\\": \\\"wDhPgVdnY/bkKFYcYFl+4crl****\\\",\\n        \\\"OssKey\\\": \\\"1/2022/06/23/15/41/16559701077444693a0c6-33b2-4cc2-a99f-9f38b8b8****\\\"\\n      },\\n      \\\"FileExist\\\": false,\\n      \\\"HashKey\\\": \\\"0a212417e65c26ff133cfff28f6c****\\\",\\n      \\\"Code\\\": \\\"200\\\",\\n      \\\"Message\\\": \\\"successful\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"获取文件上传参数","description":"通过此接口获取文件上传参数。如果返回参数中的FileExist的值为true，表示待检测文件在云端已存在，不需要再上传，可以直接推送检测。如果FileExist的值为false，需要用此接口返回的参数，通过表单上传的方式将文件上传至指定存储位置。\n\n表单上传服务由OSS产品提供，请参考[表单上传](~~84788~~)。\n\n文件检测相关接口均包含HashKey参数，表示文件唯一标识，目前仅支持文件完整内容的十六进制md5值，请在使用接口前计算该值。\n\n计算文件内容的十六进制md5值可以参考以下两个步骤：\n\n1.使用MD5算法对数据进行加密，生成128位的散列值。现有工具库包括Java的MessageDigest工具、Python的hashlib库等。\n\n2.将生成的散列值转换为16进制字符串形式。现有工具库包括Java的Codec工具、Python的hex函数等。"}