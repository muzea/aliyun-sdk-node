{"summary":"查询防勒索防护策略。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"list","riskType":"none","chargeType":"free","abilityTreeCode":"92004","abilityTreeNodes":["FEATUREsas7JO011"]},"parameters":[{"name":"Name","in":"query","schema":{"description":"要查询的防勒索防护策略的名称。","type":"string","required":false,"example":"SecurityStrategy-20200303"}},{"name":"MachineRemark","in":"query","schema":{"description":"要查询的防勒索策略防护的服务器的识别信息。可输入服务器的IP地址或实例ID。","type":"string","required":false,"example":"1.1.XX.XX"}},{"name":"Status","in":"query","schema":{"description":"\n\n防勒索防护策略的状态。\n\n- **enabled**：策略已手动启用。\n\n- **disabled**：策略已手动停用。策略停用后，正在运行的备份任务将停止。\n\n- **closed**：防勒索容量超出，系统停用策略。\n","type":"string","required":false,"example":"enabled"}},{"name":"PageSize","in":"query","schema":{"description":"设置分页查询时，每页包含的备份策略的数量。默认值为10，表示每页包含10个防护策略。","type":"integer","format":"int32","required":true,"example":"10"}},{"name":"CurrentPage","in":"query","schema":{"description":"设置从返回结果的第几页开始显示。默认值为1，表示从第1页开始显示。","type":"integer","format":"int32","required":true,"example":"1"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"BE120DAB-F4E7-4C53-ADC3-A97578ABF384"},"PageInfo":{"description":"分页信息。","type":"object","properties":{"CurrentPage":{"description":"返回数据当前页的页码。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"分页查询时，每页包含的备份策略的数量。默认值为10，表示每页包含10个备份策略。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"返回数据中备份策略的总数量。","type":"integer","format":"int32","example":"30"},"Count":{"description":"分页查询时，当前页显示的数据条数。","type":"integer","format":"int32","example":"3"}}},"Policies":{"description":"防护策略的详情。","type":"array","items":{"type":"object","properties":{"ClientErrorCount":{"description":"防勒索客户端的报错数量。","type":"integer","format":"int32","example":"2"},"Status":{"description":"防勒索防护策略的状态。\n\n- **enabled**：策略已手动启用。\n\n- **disabled**：策略已手动停用。策略停用后，正在运行的备份任务将停止。\n\n- **closed**：防勒索容量超出，系统停用策略。\n","type":"string","example":"enabled"},"PolicyVersion":{"description":"防护策略的版本。取值：\n\n- 1.0.0。\n- 2.0.0。","type":"string","example":"2.0.0"},"Policy":{"description":"防勒索防护策略的内容。该参数为JSON格式，字段说明如下：\n\n- **IsDefault**：防护策略的类型。取值：\n    - **1**：推荐策略\n    - **0**：自定义策略\n- **Include**：要防护的文件类型。防护全部文件类型时，该参数设置为[]。\n- **Source**：要防护的服务器目录。需要防护全部目录时，该参数设置为[]。\n- **ExcludeSystemPath**：设置是否排除指定目录。要排除该参数设置为**true**，不排除则无需设置该参数。\n- **Exclude**：设置指定的防护目录地址。不设置指定防护目录地址时，该参数设置为[]。\n- **Schedule**：设置数据备份任务的执行时间和执行间隔。建议指定在业务低峰期非整点。设置示例如下：\n    - 例1：I|1583216092|P21D表示数据备份开始时间为2020-03-03 14:14:52，备份策略执行间隔为3周。\n    - 例2：I|1583216092|PT24H表示数据备份开始时间为2020-03-03 14:14:52，备份策略执行间隔为24小时。\n- **Retention**：设置备份数据保留时间，单位为天。7表示1周，365表示1年，-1表示永久。\n-  **SpeedLimiter**：设置备份网络带宽限制。例如：0:24:30720表示0~24时备份网络带宽限制为30 MByte/s。\n- **UseVss**：是否启用VSS（Windows）功能。取值：\n    -  **true**：启用\n    -  **false**：不启用\n\n> VSS（Windows）功能仅为Windows系统开启，开启后会有效降低因进程占用导致的个别文件备份失败的问题，建议开启。启用该功能后，将不支持exFAT和FAT32磁盘格式的文件备份\n","type":"string","example":"{\"Exclude\":[\"/bin/\",\"/usr/bin/\",\"/sbin/\",\"/boot/\",\"/proc/\",\"/sys/\",\"/srv/\",\"/lib/\",\"/selinux/\",\"/usr/sbin/\",\"/run/\",\"/lib32/\",\"/lib64/\",\"/lost+found/\",\"/var/lib/kubelet/\",\"/var/lib/ntp/proc\",\"/var/lib/container\",\"Windows\\\\\",\"Python27\\\\\",\"Program Files (x86)\\\\\",\"Program Files\\\\\",\"Boot\\\\\",\"$RECYCLE.BIN\",\"System Volume Information\\\\\",\"Users\\\\Administrator\\\\NTUSER.DAT*\",\"ProgramData\\\\\",\"pagefile.sys\",\"Users\\\\Default\\\\NTUSER.DAT*\",\"Users\\\\Administrator\\\\ntuser.*\"],\"ExcludeSystemPath\":true,\"Include\":[],\"IsDefault\":1,\"Retention\":7,\"Schedule\":\"I|1630689360|PT24H\",\"Source\":[],\"SpeedLimiter\":\"\",\"UseVss\":true}"},"UpgradeStatus":{"description":"策略的升级状态。取值：\n\n- **NotUpgraded**：未升级\n- **Upgrading**：升级中\n- **UpgradeFailed**：升级失败\n- **UpgradeSuccess**：升级成功","type":"string","example":"Upgrading"},"ServiceErrorCount":{"description":"数据备份异常的服务器的数量。","type":"integer","format":"int32","example":"2"},"PolicyRegionId":{"description":"非阿里云服务器中安装防勒索客户端时选择的备份服务地域ID。","type":"string","example":"ch-hangzhou"},"ClientStatus":{"description":"防勒索客户端的状态。取值：\n\n- **running**：状态正常\n\n- **exception**：状态异常","type":"string","example":"running"},"Name":{"description":"防勒索防护策略的名称。","type":"string","example":"SecurityStrategy-20200303"},"HealthClientCount":{"description":"状态为“正常”的客户端的数量。","type":"integer","format":"int32","example":"2"},"Id":{"description":"防勒索防护策略的ID。","type":"integer","format":"int64","example":"11"},"ClientErrorUuidList":{"description":"客户端状态**异常**UUID列表。","type":"array","items":{"description":"客户端状态**异常**UUID列表。","type":"string","example":"[\"3bb30859-b3b5-4f28-868f-b0892c98****\",\"3bb30859-b3b5-4f28-868f-b0892c98****\"]"}},"RemarkedUuidList":{"description":"请求参数MachineRemark检索后返回的服务器的UUID列表。","type":"array","items":{"description":"请求参数MachineRemark检索后返回的服务器的UUID列表。","type":"string","example":"[\"3bb30859-b3b5-4f28-868f-b0892c98****\",\"3bb30859-b3b5-4f28-868f-b0892c98****\"]"}},"UuidList":{"description":"防勒索防护策略防护的服务器的UUID列表。","type":"array","items":{"description":"防勒索防护策略防护的服务器的UUID列表。","type":"string","example":"[\"3bb30859-b3b5-4f28-868f-b0892c98****\",\"3bb30859-b3b5-4f28-868f-b0892c98****\"]"}},"ServiceErrorUuidList":{"description":"数据备份异常的服务器的UUID列表。","type":"array","items":{"description":"数据备份异常的服务器的UUID列表。","type":"string","example":"[\"3bb30859-b3b5-4f28-868f-b0892c98****\",\"3bb30859-b3b5-4f28-868f-b0892c98****\"]"}},"HealthClientUuidList":{"description":"状态为**健康**的客户端的UUID列表。","type":"array","items":{"description":"状态为**健康**的客户端的UUID列表。","type":"string","example":"[\"3bb30859-b3b5-4f28-868f-b0892c98****\",\"3bb30859-b3b5-4f28-868f-b0892c98****\"]"}},"ServerType":{"description":"服务器类型。取值：\n\n- **OUT_CLOUD**：非阿里云服务器\n- **ALIYUN**：阿里云服务器\n- **TRIPARTITE**：轻量级应用服务器","type":"string","example":"OUT_CLOUD"},"LastStatusSyncTime":{"description":"防勒索防护策略状态最新更新时间，单位毫秒。","type":"integer","format":"int64","example":"1719488535027"},"PreStatus":{"description":"防勒索防护策略的上一次状态。\n\n- **enabled**：策略已手动启用。\n\n- **disabled**：策略已手动停用。策略停用后，正在运行的备份任务将停止。\n\n- **closed**：防勒索容量超出，系统停用策略。","type":"string","example":"disabled"}}}}}}}},"errorCodes":{"403":[{"errorCode":"NoPermission","errorMessage":"caller has no permission"}],"500":[{"errorCode":"ServerError","errorMessage":"ServerError"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"BE120DAB-F4E7-4C53-ADC3-A97578ABF384\\\",\\n  \\\"PageInfo\\\": {\\n    \\\"CurrentPage\\\": 1,\\n    \\\"PageSize\\\": 10,\\n    \\\"TotalCount\\\": 30,\\n    \\\"Count\\\": 3\\n  },\\n  \\\"Policies\\\": [\\n    {\\n      \\\"ClientErrorCount\\\": 2,\\n      \\\"Status\\\": \\\"enabled\\\",\\n      \\\"PolicyVersion\\\": \\\"2.0.0\\\",\\n      \\\"Policy\\\": \\\"{\\\\\\\"Exclude\\\\\\\":[\\\\\\\"/bin/\\\\\\\",\\\\\\\"/usr/bin/\\\\\\\",\\\\\\\"/sbin/\\\\\\\",\\\\\\\"/boot/\\\\\\\",\\\\\\\"/proc/\\\\\\\",\\\\\\\"/sys/\\\\\\\",\\\\\\\"/srv/\\\\\\\",\\\\\\\"/lib/\\\\\\\",\\\\\\\"/selinux/\\\\\\\",\\\\\\\"/usr/sbin/\\\\\\\",\\\\\\\"/run/\\\\\\\",\\\\\\\"/lib32/\\\\\\\",\\\\\\\"/lib64/\\\\\\\",\\\\\\\"/lost+found/\\\\\\\",\\\\\\\"/var/lib/kubelet/\\\\\\\",\\\\\\\"/var/lib/ntp/proc\\\\\\\",\\\\\\\"/var/lib/container\\\\\\\",\\\\\\\"Windows\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"Python27\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"Program Files (x86)\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"Program Files\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"Boot\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"$RECYCLE.BIN\\\\\\\",\\\\\\\"System Volume Information\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"Users\\\\\\\\\\\\\\\\Administrator\\\\\\\\\\\\\\\\NTUSER.DAT*\\\\\\\",\\\\\\\"ProgramData\\\\\\\\\\\\\\\\\\\\\\\",\\\\\\\"pagefile.sys\\\\\\\",\\\\\\\"Users\\\\\\\\\\\\\\\\Default\\\\\\\\\\\\\\\\NTUSER.DAT*\\\\\\\",\\\\\\\"Users\\\\\\\\\\\\\\\\Administrator\\\\\\\\\\\\\\\\ntuser.*\\\\\\\"],\\\\\\\"ExcludeSystemPath\\\\\\\":true,\\\\\\\"Include\\\\\\\":[],\\\\\\\"IsDefault\\\\\\\":1,\\\\\\\"Retention\\\\\\\":7,\\\\\\\"Schedule\\\\\\\":\\\\\\\"I|1630689360|PT24H\\\\\\\",\\\\\\\"Source\\\\\\\":[],\\\\\\\"SpeedLimiter\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"UseVss\\\\\\\":true}\\\",\\n      \\\"UpgradeStatus\\\": \\\"Upgrading\\\",\\n      \\\"ServiceErrorCount\\\": 2,\\n      \\\"PolicyRegionId\\\": \\\"ch-hangzhou\\\",\\n      \\\"ClientStatus\\\": \\\"running\\\",\\n      \\\"Name\\\": \\\"SecurityStrategy-20200303\\\",\\n      \\\"HealthClientCount\\\": 2,\\n      \\\"Id\\\": 11,\\n      \\\"ClientErrorUuidList\\\": [\\n        \\\"[\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\",\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\"]\\\"\\n      ],\\n      \\\"RemarkedUuidList\\\": [\\n        \\\"[\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\",\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\"]\\\"\\n      ],\\n      \\\"UuidList\\\": [\\n        \\\"[\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\",\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\"]\\\"\\n      ],\\n      \\\"ServiceErrorUuidList\\\": [\\n        \\\"[\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\",\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\"]\\\"\\n      ],\\n      \\\"HealthClientUuidList\\\": [\\n        \\\"[\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\",\\\\\\\"3bb30859-b3b5-4f28-868f-b0892c98****\\\\\\\"]\\\"\\n      ],\\n      \\\"ServerType\\\": \\\"OUT_CLOUD\\\",\\n      \\\"LastStatusSyncTime\\\": 1719488535027,\\n      \\\"PreStatus\\\": \\\"disabled\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询备份策略列表"}