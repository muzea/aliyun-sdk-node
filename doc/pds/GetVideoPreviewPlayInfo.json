{"summary":"获取视频播放信息。","path":"/v2/file/get_video_preview_play_info","methods":["post"],"schemes":["https"],"tags":["api"],"security":[{"BearerToken":[]},{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"systemTags":{},"parameters":[{"name":"domain_id","in":"host","schema":{"type":"string","required":true}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数。","type":"object","properties":{"share_id":{"description":"分享id。\n如果通过分享操作文件，请携带`x-share-token` header鉴权并传递此字段，此时`drive_id`无效。否则请使用`aksk`或者`access_token`方式鉴权，并传递`drive_id`字段。\n`share_id`和`drive_id`两者必须有一个字段赋值。","type":"string","required":false,"example":"7JQX1FswpQ8"},"drive_id":{"description":"空间id","type":"string","required":false,"example":"1"},"file_id":{"description":"文件id","type":"string","required":true,"example":"9520943DC264"},"category":{"description":"所属分类。\n需要开通对应的转码功能，枚举如下：\n- live_transcoding（live边转边播）\n- quick_video（quick边转边播）\n- offline_audio（离线音频转码）\n- offline_video（离线视频转码）","type":"string","required":true,"enumValueTitles":{"live_transcoding":"在线视频边转边播"},"example":"live_transcoding"},"template_id":{"description":"清晰度模板id。\n填空表示取所有可用清晰度模板","type":"string","required":false,"example":"264_480p"},"get_without_url":{"description":"是否不获取播放url。\n如果填true，只会获取转码元信息，并不会触发ts转码，返回的信息中没有播放url。否则会返回播放url，如果此template_id的视频还未转码，后台将触发器转码。\n转码会产生对应的增值服务费用","type":"boolean","required":false,"example":"true"},"url_expire_sec":{"description":"url超时时间，单位：秒。\n默认15分钟，最大4小时。","type":"integer","format":"int64","required":false,"example":"3600"},"get_master_url":{"description":"是否获取 master m3u8 的 url，仅在 category = quick_video 时有效","type":"boolean","required":false,"example":"false"}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"domain_id":{"description":"域id","type":"string","example":"bj1"},"share_id":{"title":"Id of the request","description":"分享id","type":"string","example":"7JQX1FswpQ8"},"drive_id":{"description":"空间id","type":"string","example":"1"},"file_id":{"description":"文件id","type":"string","example":"fileid1"},"video_preview_play_info":{"description":"播放信息","$ref":"#/components/schemas/VideoPreviewPlayInfo"},"code":{"description":"错误码","type":"string","example":"VideoPreviewWaitAndRetry"},"message":{"description":"错误信息","type":"string","example":"media is transcoding, please wait and retry."},"master_url":{"description":"master m3u8 的 url","type":"string","example":"https://pds-xxx-valueadd.oss-xxx.aliyuncs.com/qv/xxx/master.m3u8"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"domain_id\\\": \\\"bj1\\\",\\n  \\\"share_id\\\": \\\"7JQX1FswpQ8\\\",\\n  \\\"drive_id\\\": \\\"1\\\",\\n  \\\"file_id\\\": \\\"fileid1\\\",\\n  \\\"video_preview_play_info\\\": {\\n    \\\"category\\\": \\\"live_transcoding\\\",\\n    \\\"meta\\\": {\\n      \\\"duration\\\": 0,\\n      \\\"width\\\": 0,\\n      \\\"height\\\": 0\\n    },\\n    \\\"live_transcoding_task_list\\\": [\\n      {\\n        \\\"template_id\\\": \\\"\\\",\\n        \\\"status\\\": \\\"\\\",\\n        \\\"url\\\": \\\"\\\",\\n        \\\"keep_original_resolution\\\": true\\n      }\\n    ],\\n    \\\"quick_video_list\\\": [\\n      {\\n        \\\"template_id\\\": \\\"\\\",\\n        \\\"status\\\": \\\"\\\",\\n        \\\"url\\\": \\\"\\\"\\n      }\\n    ],\\n    \\\"offline_video_transcoding_list\\\": [\\n      {\\n        \\\"template_id\\\": \\\"\\\",\\n        \\\"status\\\": \\\"\\\",\\n        \\\"keep_original_resolution\\\": true,\\n        \\\"url\\\": \\\"\\\"\\n      }\\n    ]\\n  },\\n  \\\"code\\\": \\\"VideoPreviewWaitAndRetry\\\",\\n  \\\"message\\\": \\\"media is transcoding, please wait and retry.\\\",\\n  \\\"master_url\\\": \\\"https://pds-xxx-valueadd.oss-xxx.aliyuncs.com/qv/xxx/master.m3u8\\\"\\n}\",\"type\":\"json\"}]","title":"获取视频播放信息","description":"<props=\"china\">详细请参考最佳实践文档：[在线预览视频](~~427477~~)。</props>"}