{"summary":"创建文件或文件夹。","path":"/v2/file/create","methods":["post"],"schemes":["https"],"tags":["api"],"security":[{"AK":[]},{"BearerToken":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"domain_id","in":"host","schema":{"type":"string","required":true}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数。","type":"object","properties":{"name":{"title":"文件或文件夹名称","description":"文件名称，按照 utf8 编码最长 1024 字节，不能以 / 结尾","type":"string","required":true,"example":"a.txt","maxLength":1024,"minLength":1},"type":{"title":"类型","description":"文件类型，可选值如下：\n\nfile：文件\nfolder：文件夹","type":"string","required":true,"example":"file","enum":["file","folder"]},"parent_file_id":{"title":"父文件夹id","description":"父目录id，上传到根目录时填写 root","type":"string","required":true,"example":"fileid1"},"drive_id":{"title":"用户空间id","description":"空间 id，除通过分享链接上传之外，必填","type":"string","required":false,"example":"1","pattern":"^[0-9]*$"},"share_id":{"title":"共享id","description":"分享 id，当通过分享链接上传时必填","type":"string","required":false,"example":"7JQX1FswpQ8"},"size":{"title":"文件大小","description":"文件大小，单位为 byte。","type":"integer","format":"int64","required":false,"example":"1024"},"content_type":{"title":"文件类型","description":"文件内容类型，默认值 application/oct-stream<props=\"china\">，常见的 content_type 可以参考 OSS [《如何设置Content-Type（MIME）？》](https://help.aliyun.com/document_detail/39522.htm?spm=a2c4g.11186623.0.0.5a0b7dbb1TPnWF#concept-5041)。</props>","type":"string","required":false,"example":"application/json"},"part_info_list":{"description":"分片信息列表，最多 10000 个分片，当不填时，默认返回 1 个分片","type":"array","items":{"description":"分片信息","type":"object","properties":{"part_number":{"description":"分片序列号，从 1 开始","type":"integer","format":"int32","required":false,"example":"1"},"parallel_sha1_ctx":{"description":"该分片前所有数据的SHA1上下文，该字段只在多分片并发上传的模式下有效","type":"object","properties":{"h":{"description":"该分片前所有数据的SHA1上下文的第1-5个32位变量，该字段只在多分片并发上传的模式下有效","type":"array","items":{"description":"该分片前所有数据的SHA1上下文的第1-5个32位变量","type":"integer","format":"int64","required":false,"example":"1"},"required":false},"part_offset":{"description":"到上一个数据块为止的总长度，字节，需要为64的倍数，该字段只在多分片并发上传的模式下有效","type":"integer","format":"int64","required":false,"example":"10240"}},"required":false},"content_md5":{"description":"分片的 MD5, 需要在上传分片时校验分片的MD5时填写。","type":"string","deprecated":false,"required":false,"example":"ASKJDJSKDJJSJDJS"}},"required":false},"required":false},"user_tags":{"title":"用户打标","description":"用户自定义 tag，最多 1000 个 tag","type":"array","items":{"description":"用户自定义 tag","required":false,"$ref":"#/components/schemas/UserTag"},"required":false},"hidden":{"description":"是否隐藏，默认不隐藏","type":"boolean","required":false,"example":"false","default":"false"},"description":{"title":"描述信息","description":"文件描述信息，最长 1024 字符，默认为空","type":"string","required":false,"example":"团队文件","maxLength":1024},"content_hash":{"title":"内容hash","description":"文件内容 hash 值，需要根据 content_hash_name 指定的算法计算","type":"string","required":false,"example":"7C4A8D09CA3762AF61E59520943DC26494F8941B"},"content_hash_name":{"title":"内容hash算法名","description":"文件内容hash算法名，当前只支持 sha1","type":"string","required":false,"example":"sha1","enum":["sha1"]},"pre_hash":{"description":"使用预秒传功能时填写，为文件前1KB sha1值，当远端没有匹配上时，客户端无需再计算文件完整 sha1 去尝试秒传。","type":"string","required":false,"example":"7C4A8D09CA3762AF61E59520943DC26494F89411"},"check_name_mode":{"title":"重命名模式","description":"同名文件处理模式，可选值如下：\n\nignore：允许同名文件；\n\nauto_rename：当发现同名文件是，云端自动重命名，默认为追加当前时间点，如 xxx _20060102_150405；\n\nrefuse：当云端存在同名文件时，拒绝创建新文件，返回客户端已存在同名文件的详细信息。\n\n默认为 ignore","type":"string","required":false,"enumValueTitles":{"refuse":"refuse","auto_rename":"auto_rename","ignore":"ignore"},"example":"ignore","enum":["ignore","auto_rename","refuse"]},"file_id":{"title":"文件id","description":"文件id，覆盖写时必填","type":"string","required":false,"example":"9520943DC264"},"local_created_at":{"title":"文件本地创建时间","description":"文件本地创建时间，默认为空，格式为：yyyy-MM-ddTHH:mm:ssZ，采用 UTC +0 时区","type":"string","required":false,"example":"2019-08-20T06:51:27.292Z"},"local_modified_at":{"title":"本地文件修改时间","description":"文件本地修改时间，默认为空，格式为：yyyy-MM-ddTHH:mm:ssZ，采用 UTC +0 时区","type":"string","required":false,"example":"2019-08-20T06:51:27.292Z"},"image_media_metadata":{"description":"客户端指定的图片信息","required":false,"$ref":"#/components/schemas/ImageMediaMetadata"},"video_media_metadata":{"description":"客户端指定的视频信息","required":false,"$ref":"#/components/schemas/VideoMediaMetadata"},"parallel_upload":{"description":"是否开启并行上传分片功能","type":"boolean","required":false,"example":"true","default":"false"}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回信息","type":"object","properties":{"parent_file_id":{"title":"父目录文件id","description":"父目录id","type":"string","example":"fileid5"},"part_info_list":{"title":"分段信息","description":"分段信息列表","type":"array","items":{"description":"分段信息","$ref":"#/components/schemas/UploadPartInfo"}},"upload_id":{"title":"上传id","description":"上传id","type":"string","example":"uploadid1"},"rapid_upload":{"title":"是否已经秒传","description":"是否已经秒传","type":"boolean","example":"true"},"type":{"description":"文件类型","type":"string","example":"file"},"file_id":{"title":"文件id","description":"文件id","type":"string","example":"fileid1"},"domain_id":{"title":"域id","description":"域id","type":"string","example":"bj1"},"drive_id":{"title":"空间id","description":"空间id","type":"string","example":"1"},"file_name":{"title":"文件名","description":"文件名","type":"string","example":"a.txt"},"status":{"title":"文件状态","description":"文件状态","type":"string","example":"uploading"},"exist":{"title":"文件是否存在","description":"文件是否存在","type":"boolean","example":"false"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"parent_file_id\\\": \\\"fileid5\\\",\\n  \\\"part_info_list\\\": [\\n    {\\n      \\\"part_number\\\": 1,\\n      \\\"part_size\\\": 1024,\\n      \\\"upload_url\\\": \\\"\\\",\\n      \\\"internal_upload_url\\\": \\\"\\\",\\n      \\\"etag\\\": \\\"0CC175B9C0F1B6A831C399E269772661\\\",\\n      \\\"parallel_sha1_ctx\\\": {\\n        \\\"h\\\": [\\n          0\\n        ],\\n        \\\"part_offset\\\": 0\\n      },\\n      \\\"upload_form_info\\\": {\\n        \\\"bucket_name\\\": \\\"\\\",\\n        \\\"oss_end_point\\\": \\\"\\\",\\n        \\\"object_key\\\": \\\"\\\",\\n        \\\"oss_access_key_id\\\": \\\"\\\",\\n        \\\"oss_security_token\\\": \\\"\\\",\\n        \\\"policy\\\": \\\"\\\",\\n        \\\"signature\\\": \\\"\\\",\\n        \\\"endpoint\\\": \\\"\\\",\\n        \\\"form_data\\\": {\\n          \\\"key\\\": \\\"\\\"\\n        }\\n      },\\n      \\\"internal_upload_form_info\\\": {\\n        \\\"bucket_name\\\": \\\"\\\",\\n        \\\"oss_end_point\\\": \\\"\\\",\\n        \\\"object_key\\\": \\\"\\\",\\n        \\\"oss_access_key_id\\\": \\\"\\\",\\n        \\\"oss_security_token\\\": \\\"\\\",\\n        \\\"policy\\\": \\\"\\\",\\n        \\\"signature\\\": \\\"\\\",\\n        \\\"endpoint\\\": \\\"\\\",\\n        \\\"form_data\\\": {\\n          \\\"key\\\": \\\"\\\"\\n        }\\n      },\\n      \\\"signature_info\\\": {\\n        \\\"auth_type\\\": \\\"\\\",\\n        \\\"signature\\\": \\\"\\\",\\n        \\\"sts_token\\\": \\\"\\\"\\n      },\\n      \\\"parallel_sha256_ctx\\\": {\\n        \\\"h\\\": [\\n          0\\n        ],\\n        \\\"part_offset\\\": 0\\n      }\\n    }\\n  ],\\n  \\\"upload_id\\\": \\\"uploadid1\\\",\\n  \\\"rapid_upload\\\": true,\\n  \\\"type\\\": \\\"file\\\",\\n  \\\"file_id\\\": \\\"fileid1\\\",\\n  \\\"domain_id\\\": \\\"bj1\\\",\\n  \\\"drive_id\\\": \\\"1\\\",\\n  \\\"file_name\\\": \\\"a.txt\\\",\\n  \\\"status\\\": \\\"uploading\\\",\\n  \\\"exist\\\": false\\n}\",\"type\":\"json\"}]","title":"创建文件或文件夹","description":"<props=\"china\">文件创建使用方法参考最佳实践：[文件上传](~~175888~~)。</props>"}