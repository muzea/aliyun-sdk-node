{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"73942","abilityTreeNodes":["FEATUREadsDAZVRM"]},"parameters":[{"name":"DBClusterId","in":"query","schema":{"description":"集群ID。\n> 您可以调用[DescribeDBClusters](~~129857~~)接口查看数仓版（3.0）集群的集群ID。","type":"string","required":true,"docRequired":true,"example":"am-bp198m028ih55****"}},{"name":"RegionId","in":"query","schema":{"title":"RegionId","description":"地域ID。\n>您可以调用[DescribeRegions](~~143074~~)接口查看可用地域的地域ID。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"AdviceDate","in":"query","schema":{"title":"AdviceDate","description":"建议的生成日期，格式为yyyyMMdd（UTC时间）。","type":"integer","format":"int64","required":true,"example":"20221124"}},{"name":"Lang","in":"query","schema":{"title":"Lang","description":"设置建议的显示语言，取值说明：\n- **zh**：简体中文（默认语言）。\n- **en**：英文。\n- **ja**：日文。\n- **zh-tw**：繁体中文。","type":"string","required":true,"example":"zh"}},{"name":"PageSize","in":"query","schema":{"title":"PageSize","description":"每页记录数，取值：\n- **30**（默认值）\n- **50**\n- **100**","type":"integer","format":"int64","required":true,"example":"30"}},{"name":"PageNumber","in":"query","schema":{"title":"PageNumber","description":"页码，取值为：大于0且不超过Integer数据类型的最大值，默认值为1。","type":"integer","format":"int64","required":true,"example":"1"}},{"name":"AdviceType","in":"query","schema":{"description":"建议的类型，取值说明：\n- **INDEX**：索引优化。\n- **TIERING**：冷热数据优化。","type":"string","required":false,"example":"Index"}},{"name":"Keyword","in":"query","schema":{"description":"查询关键字，支持根据表名模糊搜索。","type":"string","required":false,"example":"you_table_name"}},{"name":"SchemaTableName","in":"query","schema":{"description":"数据库名和表名的字符串拼接。","type":"string","required":false,"example":"tpch.lineitem"}},{"name":"Order","in":"query","schema":{"description":"将查询结果按指定字段进行排序。格式为JSON字符串，例如`[{\"Field\":\"TableSchema\",\"Type\":\"Asc\"}]`。其中：\n- `Field`表示排序字段。支持如下取值：\n    - `TableSchema`：表所属的数据库名。\n    - `TableName`：表名。\n    - `AccessCount`：表被访问的次数。\n- `Type`表示排序方式。支持如下取值：\n    - `Asc`：升序排序。\n    - `Desc`： 降序排序。\n\n> 若不设置参数，默认按照目标表所属的数据库升序排列。","type":"string","required":false,"example":"[{\\\"Field\\\":\\\"Benefit\\\",\\\"Type\\\":\\\"Desc\\\"}]"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回对象。","type":"object","properties":{"Items":{"title":"Items","description":"详情。","type":"array","items":{"description":"建议列表。","type":"object","properties":{"AdviceId":{"title":"AdviceId","description":"建议ID。","type":"string","example":"dcd04135-0925-4aed-a5a7-e7d92cb1****"},"AdviceDate":{"title":"AdviceDate","description":"建议生成的时间，格式：yyyyMMdd（UTC时间）。","type":"string","example":"20221124"},"AdviceType":{"title":"AdviceType","description":"建议的类型，取值说明：\n- **Index**：索引优化。\n- **Tiering**：冷热数据优化。","type":"string","example":"Index"},"SQL":{"title":"SQL","description":"应用建议的SQL语句。","type":"string","example":"alter table `schema1`.`table1` drop key col1_1_idx"},"Reason":{"title":"Reason","description":"生成优化建议的原因。","type":"string","example":"15天未使用，历史使用统计概率小于1%"},"Benefit":{"title":"Benefit","description":"建议的收益。","type":"string","example":"节省0.4 GB的存储空间。"},"TotalCount":{"title":"TotalCount","description":"返回的建议总数，取值为：大于等于0且不超过Integer数据类型的最大值，默认值为0。","type":"integer","format":"int64","example":"30"},"PageSize":{"title":"PageSize","description":"每页记录数，取值：\n- **30**（默认值）\n- **50**\n- **100**","type":"integer","format":"int64","example":"30"},"PageNumber":{"title":"PageNumber","description":"页码，取值为：大于0且不超过Integer数据类型的最大值，默认值为1。","type":"integer","format":"int64","example":"1"},"SchemaName":{"description":"数据库名。","type":"string","example":"adb_demo"},"TableName":{"description":"表名。","type":"string","example":"test_table"}}}},"PageNumber":{"title":"PageNumber","description":"页码，取值为：大于0且不超过Integer数据类型的最大值，默认值为1。","type":"integer","format":"int64","example":"1"},"PageSize":{"title":"PageSize","description":"每页记录数，取值：\n- **30**（默认值）\n- **50**\n- **100**","type":"integer","format":"int64","example":"30"},"RequestId":{"description":"请求ID。","type":"string","example":"96A55627-28E9-5E47-B8F6-D786BE551349"},"TotalCount":{"description":"返回的结果总数，取值为：大于等于0且不超过Integer数据类型的最大值，默认值为0。","type":"integer","format":"int64","example":"30"},"SchemaTableNames":{"description":"数据库名和表名的字符串拼接列表。","type":"array","items":{"description":"数据库名和表名的字符串拼接。","type":"string","example":"[\n  \"tpch.lineitem\",\n  \"tpch.partsupp\",\n  \"tpch.orders\"\n]"}}}}}},"errorCodes":{"400":[{"errorCode":"MissingParameter.PageSize","errorMessage":"The PageSize parameter is required."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Items\\\": [\\n    {\\n      \\\"AdviceId\\\": \\\"dcd04135-0925-4aed-a5a7-e7d92cb1****\\\",\\n      \\\"AdviceDate\\\": \\\"20221124\\\",\\n      \\\"AdviceType\\\": \\\"Index\\\",\\n      \\\"SQL\\\": \\\"alter table `schema1`.`table1` drop key col1_1_idx\\\",\\n      \\\"Reason\\\": \\\"15天未使用，历史使用统计概率小于1%\\\",\\n      \\\"Benefit\\\": \\\"节省0.4 GB的存储空间。\\\",\\n      \\\"TotalCount\\\": 30,\\n      \\\"PageSize\\\": 30,\\n      \\\"PageNumber\\\": 1,\\n      \\\"SchemaName\\\": \\\"adb_demo\\\",\\n      \\\"TableName\\\": \\\"test_table\\\"\\n    }\\n  ],\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 30,\\n  \\\"RequestId\\\": \\\"96A55627-28E9-5E47-B8F6-D786BE551349\\\",\\n  \\\"TotalCount\\\": 30,\\n  \\\"SchemaTableNames\\\": [\\n    \\\"[\\\\n  \\\\\\\"tpch.lineitem\\\\\\\",\\\\n  \\\\\\\"tpch.partsupp\\\\\\\",\\\\n  \\\\\\\"tpch.orders\\\\\\\"\\\\n]\\\"\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeAvailableAdvicesResponse>\\n    <Items>\\n        <AdviceId>dcd04135-0925-4aed-a5a7-e7d92cb1****</AdviceId>\\n        <AdviceDate>20221124</AdviceDate>\\n        <AdviceType>Index</AdviceType>\\n        <SQL>alter table `schema1`.`table1` drop key col1_1_idx</SQL>\\n        <Reason>15天未使用，历史使用统计概率小于1%</Reason>\\n        <Benefit>节省0.4GB空间</Benefit>\\n        <TotalCount>30</TotalCount>\\n        <PageSize>30</PageSize>\\n        <PageNumber>1</PageNumber>\\n    </Items>\\n    <PageNumber>1</PageNumber>\\n    <PageSize>30</PageSize>\\n    <RequestId>96A55627-28E9-5E47-B8F6-D786BE551349</RequestId>\\n    <TotalCount>30</TotalCount>\\n</DescribeAvailableAdvicesResponse>\",\"errorExample\":\"\"}]","title":"显示可用优化建议","summary":"用DescribeAvailableAdvices来显示可用优化建议。"}