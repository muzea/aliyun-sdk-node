{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"StartTime","in":"query","schema":{"description":"需要查询的日期，格式为<i>yyyy-MM-dd</i>（UTC时间）。\n> 仅支持查看30天内的数据。","type":"string","required":true,"docRequired":true,"example":"2021-08-30"}},{"name":"Order","in":"query","schema":{"description":"将查询结果按指定字段进行排序。格式为JSON字符串，例如`[{\"Field\":\"Pattern\",\"Type\":\"Asc\"}]`。其中：\n- `Field`表示排序字段。支持如下取值：\n    - `Pattern`：SQL Pattern。\n    - `AccessIP`：客户端IP。\n    - `User`：用户名。\n    - `QueryCount`：查询总数。\n    - `AvgPeakMemory`：平均峰值内存，单位：KB。\n    - `MaxPeakMemory`：最大峰值内存，单位：KB。\n    - `AvgCpuTime`：平均计算耗时，单位：ms。\n    - `MaxCpuTime`：最大计算耗时，单位：ms。\n    - `AvgStageCount`：平均Stage个数。\n    - `MaxStageCount`：最大Stage个数。\n    - `AvgTaskCount`：平均Task个数。\n    - `MaxTaskCount`：最大Task个数。\n    - `AvgScanSize`：平均扫描量，单位：KB。\n    - `MaxScanSize`：最大扫描量，单位：KB。\n\n- `Type`表示排序方式。支持如下取值：\n    - `Asc`：升序排序。\n    - `Desc`： 降序排序。\n\n> - 若不设置参数，默认按照`Pattern`字段升序排列。\n> - 若需要按照`AccessIP`字段排序，则`Type`参数必须设置为`accessip`；若需要按照`User`字段排序，则`Type`参数必须留空或设置为`user`。","type":"string","required":false,"docRequired":false,"example":"[{\"Field\":\"Pattern\",\"Type\":\"Asc\"}]"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值为大于0且不超过Integer数据类型的最大值。默认值为**1**。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"SqlPattern","in":"query","schema":{"description":"需要包含的SQL Pattern的关键字。\n> 若该参数不填，默认返回目标集群在`StartTime`参数所设日期内的所有SQL Pattern详情。","type":"string","required":false,"example":"SELECT"}},{"name":"Type","in":"query","schema":{"description":"按指定维度来聚合SQL Pattern。支持如下取值：\n - `user`：按用户维度聚合。\n - `accessip`：按访问IP来源聚合。\n\n> 若该参数不填，默认按照 `user`维度聚合。","type":"string","required":false,"example":"user"}},{"name":"DBClusterId","in":"query","schema":{"description":"集群ID。\n> 您可以调用[DescribeDBClusters](~~129857~~)接口查看目标地域下所有AnalyticDB MySQL集群的详情，包括集群ID。","type":"string","required":true,"docRequired":true,"example":"am-bp1r053byu48p****"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值为任意正整数。默认为**30**。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。\n> 您可以调用[DescribeRegions](~~143074~~)接口查看AnalyticDB MySQL版支持的地域和可用区信息，包括地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}}],"responses":{"200":{"headers":{},"schema":{"description":"详情。","type":"object","properties":{"PageSize":{"description":"本页记录数。","type":"integer","format":"int32","example":"30"},"PageNumber":{"description":"页数。","type":"integer","format":"int32","example":"1"},"TotalCount":{"description":"总记录数。","type":"integer","format":"int32","example":"1"},"Items":{"description":"SQL Pattern详情。","type":"array","items":{"description":"详情。","type":"object","properties":{"AvgStageCount":{"description":"平均Stage个数。","type":"string","example":"2"},"MaxCpuTime":{"description":"最大计算耗时，单位：ms。","type":"string","example":"17"},"AccessIP":{"description":"客户端IP。\n> 仅当`Type`参数设置为`accessip`时，支持返回该参数。","type":"string","example":"100.104.***.***"},"AvgScanSize":{"description":"平均扫描量，单位：KB。","type":"string","example":"0"},"MaxScanSize":{"description":"最大扫描量，单位：KB。","type":"string","example":"0"},"MaxPeakMemory":{"description":"最大峰值内存，单位：KB。","type":"string","example":"480096"},"AvgCpuTime":{"description":"平均计算耗时，单位：ms。","type":"string","example":"1.0625"},"User":{"description":"用户名。\n> 仅当`Type`参数留空或设置为`user`时，支持返回该参数。","type":"string","example":"test_acc"},"AvgPeakMemory":{"description":"平均峰值内存，单位：KB。","type":"string","example":"240048"},"MaxStageCount":{"description":"最大Stage个数。","type":"string","example":"2"},"MaxTaskCount":{"description":"最大Task个数。","type":"string","example":"2"},"InstanceName":{"description":"集群ID。","type":"string","example":"am-bp1r053byu48p****"},"QueryCount":{"description":"查询总数。","type":"string","example":"16"},"ReportDate":{"description":"查询日期。","type":"string","example":"2021-08-30"},"Pattern":{"description":"SQL Pattern。","type":"string","example":"SELECT table_name, table_schema AS schema_name, create_time, create_time AS last_ddl_time, table_comment AS description , ceil((data_length + index_length) / ? / ?) AS store_capacity , data_length AS data_bytes, index_length AS index_bytes, table_collation AS collation, auto_increment, table_rows AS num_rows , engine FROM information_schema.tables WHERE table_type != ? AND table_schema = ? AND table_name IN (?) ORDER BY 1"},"AvgTaskCount":{"description":"平均Task个数。","type":"string","example":"2"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"B6F2D1B4-2C9F-5622-B424-5E7965******"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageSize\\\": 30,\\n  \\\"PageNumber\\\": 1,\\n  \\\"TotalCount\\\": 1,\\n  \\\"Items\\\": [\\n    {\\n      \\\"AvgStageCount\\\": \\\"2\\\",\\n      \\\"MaxCpuTime\\\": \\\"17\\\",\\n      \\\"AccessIP\\\": \\\"100.104.***.***\\\",\\n      \\\"AvgScanSize\\\": \\\"0\\\",\\n      \\\"MaxScanSize\\\": \\\"0\\\",\\n      \\\"MaxPeakMemory\\\": \\\"480096\\\",\\n      \\\"AvgCpuTime\\\": \\\"1.0625\\\",\\n      \\\"User\\\": \\\"test_acc\\\",\\n      \\\"AvgPeakMemory\\\": \\\"240048\\\",\\n      \\\"MaxStageCount\\\": \\\"2\\\",\\n      \\\"MaxTaskCount\\\": \\\"2\\\",\\n      \\\"InstanceName\\\": \\\"am-bp1r053byu48p****\\\",\\n      \\\"QueryCount\\\": \\\"16\\\",\\n      \\\"ReportDate\\\": \\\"2021-08-30\\\",\\n      \\\"Pattern\\\": \\\"SELECT table_name, table_schema AS schema_name, create_time, create_time AS last_ddl_time, table_comment AS description , ceil((data_length + index_length) / ? / ?) AS store_capacity , data_length AS data_bytes, index_length AS index_bytes, table_collation AS collation, auto_increment, table_rows AS num_rows , engine FROM information_schema.tables WHERE table_type != ? AND table_schema = ? AND table_name IN (?) ORDER BY 1\\\",\\n      \\\"AvgTaskCount\\\": \\\"2\\\"\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"B6F2D1B4-2C9F-5622-B424-5E7965******\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSqlPatternResponse>\\n    <PageSize>30</PageSize>\\n    <PageNumber>1</PageNumber>\\n    <TotalCount>1</TotalCount>\\n    <Items>\\n        <AvgStageCount>2</AvgStageCount>\\n        <MaxCpuTime>17</MaxCpuTime>\\n        <AccessIP>100.104.***.***</AccessIP>\\n        <AvgScanSize>0</AvgScanSize>\\n        <MaxScanSize>0</MaxScanSize>\\n        <MaxPeakMemory>480096</MaxPeakMemory>\\n        <AvgCpuTime>1.0625</AvgCpuTime>\\n        <User>test_acc</User>\\n        <AvgPeakMemory>240048</AvgPeakMemory>\\n        <MaxStageCount>2</MaxStageCount>\\n        <MaxTaskCount>2</MaxTaskCount>\\n        <InstanceName>am-bp1r053byu48p****</InstanceName>\\n        <QueryCount>16</QueryCount>\\n        <ReportDate>2021-08-30</ReportDate>\\n        <Pattern>SELECT table_name, table_schema AS schema_name, create_time, create_time AS last_ddl_time, table_comment AS description , ceil((data_length + index_length) / ? / ?) AS store_capacity , data_length AS data_bytes, index_length AS index_bytes, table_collation AS collation, auto_increment, table_rows AS num_rows , engine FROM information_schema.tables WHERE table_type != ? AND table_schema = ? AND table_name IN (?) ORDER BY 1</Pattern>\\n        <AvgTaskCount>2</AvgTaskCount>\\n    </Items>\\n    <RequestId>B6F2D1B4-2C9F-5622-B424-5E7965******</RequestId>\\n</DescribeSqlPatternResponse>\",\"errorExample\":\"\"}]","title":"查询SQL模式","summary":"查看指定日期内AnalyticDB MySQL版集群下的SQL模板详情。"}