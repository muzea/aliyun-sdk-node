{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"209775","abilityTreeNodes":["FEATUREadsDAZVRM"]},"parameters":[{"name":"DBClusterId","in":"query","schema":{"description":"集群ID。\n\n> 您可以通过[DescribeDBClusters](~~129857~~)接口查看账号下AnalyticDB MySQL数仓版集群的集群ID。","type":"string","required":true,"docRequired":true,"example":"am-bp1u8c0mgfg58****"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。\n> 您可以调用[DescribeRegions](~~454314~~)接口查看指定AnalyticDB MySQL数仓版（3.0）集群的地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-beijing"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间。格式为<i>yyyy-MM-ddTHH:mm:ssZ</i>（UTC时间）。","type":"string","required":false,"docRequired":true,"example":"2021-09-30T00:10Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间。格式：<i>yyyy-MM-ddTHH:mm:ssZ</i>（UTC时间）。","type":"string","required":false,"docRequired":true,"example":"2023-05-15T07:15Z"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值范围如下：\n* **30**（默认值）。\n* **50**。\n* **100**。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"10","example":"20","default":"10"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值为大于0且不超过Integer数据类型最大值的正整数。默认值为**1**。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1"}},{"name":"Lang","in":"query","schema":{"description":"设置建议的显示语言，取值说明：\n- **zh（默认值）**：简体中文。\n- **en**：英文。\n- **ja**：日文。\n- **zh-tw**：繁体中文。","type":"string","required":false,"example":"zh"}},{"name":"Order","in":"query","schema":{"description":"将查询结果按指定字段进行排序。格式为JSON字符串，例如`[{\"Field\":\"TableSchema\",\"Type\":\"Asc\"}]`。其中：\n- `Field`表示排序字段。支持如下取值：\n    - `TableSchema`：表所属的数据库名。\n    - `TableName`：表名。\n    - `AccessCount`：表被访问的次数。\n- `Type`表示排序方式。支持如下取值：\n    - `Asc`：升序排序。\n    - `Desc`： 降序排序。\n\n> 若不设置参数，默认按照目标表所属的数据库升序排列。","type":"string","required":false,"example":"[{\"Field\":\"TableName\",\"Type\":\"Desc\"}]"}}],"responses":{"200":{"schema":{"type":"object","properties":{"TotalCount":{"description":"返回的结果总数，取值为：大于等于0且不超过Integer数据类型的最大值，默认值为0。","type":"string","example":"1"},"PageNumber":{"description":"页码，取值为：大于0且不超过Integer数据类型的最大值，默认值为1。","type":"integer","format":"int32","maximum":"2147483647","minimum":"1","example":"1","default":"1"},"PageSize":{"description":"每页记录数，取值：\n- **30**（默认值）\n- **50**\n- **100**","type":"integer","format":"int32","maximum":"100","minimum":"10","example":"10","default":"10"},"RequestId":{"description":"请求ID。","type":"string","example":"1AD222E9-E606-4A42-BF6D-8A4442913CEF"},"DBClusterId":{"description":"集群ID。\n> 您可以调用[DescribeDBClusters](~~129857~~)接口查看数仓版（3.0）集群的集群ID。","type":"string","example":"am-bp11q28kvl688****"},"Tables":{"description":"表列表。","type":"array","items":{"description":"检测结果列表","type":"object","properties":{"TableName":{"description":"表名。","type":"string","example":"test"},"SchemaName":{"description":"数据库名。","type":"string","example":"adb_demo"},"ColumnCount":{"description":"总列数。","type":"integer","format":"int32","example":"26"},"PrimaryKeyCount":{"description":"主键字段个数。","type":"integer","format":"int32","example":"1"},"PrimaryKeyColumns":{"description":"主键字段列表。","type":"string","example":"id,date"},"SpaceRatio":{"description":"表空间占比，单位：%。\n\n> 计算公式为：表空间占比 = (表总数据量 / 实例总数据量) * 100。","type":"number","format":"double","example":"20"},"TotalSize":{"description":"冷数据总量，单位：Byte。\n\n> 计算公式为：冷数据总量 = 表记录数据量 + 普通索引数据量 + 主键索引数据量 + 其他。","type":"integer","format":"int64","example":"1073741824"},"PrimaryKeyIndexSize":{"description":"主键索引数据量，单位：Byte。","type":"integer","format":"int64","example":"2345"}}}},"DetectionItems":{"description":"检测项及检测结果列表。","type":"array","items":{"description":"检测项及检测结果列表。","type":"object","properties":{"Name":{"description":"检测项名。","type":"string","example":"主键字段过多"},"Message":{"description":"检测结果。","type":"string","example":"检测到表存在主键过多的情况"},"Status":{"description":"检测结果状态程度。","type":"string","example":"NORMAL\nWARNING\nCRITICAL"}}}},"AccessDeniedDetail":{"description":"访问被拒绝详细信息。","type":"string","example":"{\n    \"PolicyType\": \"AccountLevelIdentityBasedPolicy\",\n    \"AuthPrincipalOwnerId\": \"1906102576997697\",\n    \"EncodedDiagnosticMessage\": \"AQIBIAAAAOPdwKY2QLOvgMEc7SkkoJfj1kvZwsaRqNYMh10Tv0wTe0fCzaCdrvgazfNb0EnJKETgXyhR+3BIQjx9WAqZryejBsp1Bl4qI5En/D9dEhcXAtKCxCmE2kZCiEzpy8BoEUt+bs0DmlaGWO5xkEpttypLIB4rUhDvZd+zwPg4EXk4KSSWSWsurxtqDkKEMshKlQFBTKvJcNqPqHV6lwR4INiAGjIvK1ngXxN1O+6ORRB6A8YvztEOGywOk81ZmuNk0YrNy+qk7+UVDTHeXKsy8h9e/ePY/LMidj0RCmDpo/YpCumd0UGe0qEPe2U+UJAm/+UHlnEFLVg6BP3yIB5D++MCy7mgWm8Kwyhk62IeYly4hQ+5IpXjkh1GQXuDgLVVPVpxEek9n30vnCUL4KsaMgfa7dgojb+3TM8xGsD2zVK5STJNrsXclscIJEqyNXd7CBYiRJVZi1HPO6drN9WW0chLpCSTgjO8n0bNanZaxXKumW9PSwV58UoSFASeMWfZK3TLngX+oq8nGmnTwcJosVjfF4RGzAnS1IXt0Q9N2WHDnpwyLBU/nOz7Hsy8IZ+h+OVjsBTXSM9688/vOF707a5mNzpETvQeGRcua3A5livcKAM2cML0yeUs/Zyj/+BGqtVa+wektspDHC/CECh6R5lxQjRmUdPawY8VDs2onmdLuEH8DdmYt+Yv/jBFBUMWOyAluzkPYcX5nuQKouCIUJUFTSbsJsuH5CTIh7Ls5rbmkj+T1qTVz8gnDR8LxwaqoMSna+elXgVyOOxXtMkenVntsmoC3p/4G7yTPL1hu8JyWGIIvZHZGGLXGEH7FeSuMV8buKxPGFWG3arG8e9LGvDdz5dgTien4y6G5AQ0o1iQdXDos5VWdH3u7k5PrsvdEOpvMi6uSd8a42na80FsYlgGlwM5upydcWUC5Un2HCkJpT1xgk2L6shdVTrK6bidRrqE784FhW9bBQePzGaxSupPENZya0VUctRt+7uq3QwIn4y5jzjgX0E0jgmqPrgiVDjBesMQZYfGPCGysWYWYzfoh+G6V7N2VVGtNnGUwNWzM0WJBPONAgxPv+AmixFRCQ==\",\n    \"AuthPrincipalType\": \"SubUser\",\n    \"AuthPrincipalDisplayName\": \"202515810214480629\",\n    \"NoPermissionType\": \"ImplicitDeny\",\n    \"AuthAction\": \"adb:DescribeExcessivePrimaryKeys\"\n  }"}}}}},"errorCodes":{"404":[{"errorCode":"InvalidDBCluster.NotFound","errorMessage":"The DBClusterId provided does not exist in our records."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"TotalCount\\\": \\\"1\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 10,\\n  \\\"RequestId\\\": \\\"1AD222E9-E606-4A42-BF6D-8A4442913CEF\\\",\\n  \\\"DBClusterId\\\": \\\"am-bp11q28kvl688****\\\",\\n  \\\"Tables\\\": [\\n    {\\n      \\\"TableName\\\": \\\"test\\\",\\n      \\\"SchemaName\\\": \\\"adb_demo\\\",\\n      \\\"ColumnCount\\\": 26,\\n      \\\"PrimaryKeyCount\\\": 1,\\n      \\\"PrimaryKeyColumns\\\": \\\"id,date\\\",\\n      \\\"SpaceRatio\\\": 20,\\n      \\\"TotalSize\\\": 1073741824,\\n      \\\"PrimaryKeyIndexSize\\\": 2345\\n    }\\n  ],\\n  \\\"DetectionItems\\\": [\\n    {\\n      \\\"Name\\\": \\\"主键字段过多\\\",\\n      \\\"Message\\\": \\\"检测到表存在主键过多的情况\\\",\\n      \\\"Status\\\": \\\"NORMAL\\\\nWARNING\\\\nCRITICAL\\\"\\n    }\\n  ],\\n  \\\"AccessDeniedDetail\\\": \\\"{\\\\n    \\\\\\\"PolicyType\\\\\\\": \\\\\\\"AccountLevelIdentityBasedPolicy\\\\\\\",\\\\n    \\\\\\\"AuthPrincipalOwnerId\\\\\\\": \\\\\\\"1906102576997697\\\\\\\",\\\\n    \\\\\\\"EncodedDiagnosticMessage\\\\\\\": \\\\\\\"AQIBIAAAAOPdwKY2QLOvgMEc7SkkoJfj1kvZwsaRqNYMh10Tv0wTe0fCzaCdrvgazfNb0EnJKETgXyhR+3BIQjx9WAqZryejBsp1Bl4qI5En/D9dEhcXAtKCxCmE2kZCiEzpy8BoEUt+bs0DmlaGWO5xkEpttypLIB4rUhDvZd+zwPg4EXk4KSSWSWsurxtqDkKEMshKlQFBTKvJcNqPqHV6lwR4INiAGjIvK1ngXxN1O+6ORRB6A8YvztEOGywOk81ZmuNk0YrNy+qk7+UVDTHeXKsy8h9e/ePY/LMidj0RCmDpo/YpCumd0UGe0qEPe2U+UJAm/+UHlnEFLVg6BP3yIB5D++MCy7mgWm8Kwyhk62IeYly4hQ+5IpXjkh1GQXuDgLVVPVpxEek9n30vnCUL4KsaMgfa7dgojb+3TM8xGsD2zVK5STJNrsXclscIJEqyNXd7CBYiRJVZi1HPO6drN9WW0chLpCSTgjO8n0bNanZaxXKumW9PSwV58UoSFASeMWfZK3TLngX+oq8nGmnTwcJosVjfF4RGzAnS1IXt0Q9N2WHDnpwyLBU/nOz7Hsy8IZ+h+OVjsBTXSM9688/vOF707a5mNzpETvQeGRcua3A5livcKAM2cML0yeUs/Zyj/+BGqtVa+wektspDHC/CECh6R5lxQjRmUdPawY8VDs2onmdLuEH8DdmYt+Yv/jBFBUMWOyAluzkPYcX5nuQKouCIUJUFTSbsJsuH5CTIh7Ls5rbmkj+T1qTVz8gnDR8LxwaqoMSna+elXgVyOOxXtMkenVntsmoC3p/4G7yTPL1hu8JyWGIIvZHZGGLXGEH7FeSuMV8buKxPGFWG3arG8e9LGvDdz5dgTien4y6G5AQ0o1iQdXDos5VWdH3u7k5PrsvdEOpvMi6uSd8a42na80FsYlgGlwM5upydcWUC5Un2HCkJpT1xgk2L6shdVTrK6bidRrqE784FhW9bBQePzGaxSupPENZya0VUctRt+7uq3QwIn4y5jzjgX0E0jgmqPrgiVDjBesMQZYfGPCGysWYWYzfoh+G6V7N2VVGtNnGUwNWzM0WJBPONAgxPv+AmixFRCQ==\\\\\\\",\\\\n    \\\\\\\"AuthPrincipalType\\\\\\\": \\\\\\\"SubUser\\\\\\\",\\\\n    \\\\\\\"AuthPrincipalDisplayName\\\\\\\": \\\\\\\"202515810214480629\\\\\\\",\\\\n    \\\\\\\"NoPermissionType\\\\\\\": \\\\\\\"ImplicitDeny\\\\\\\",\\\\n    \\\\\\\"AuthAction\\\\\\\": \\\\\\\"adb:DescribeExcessivePrimaryKeys\\\\\\\"\\\\n  }\\\"\\n}\",\"type\":\"json\"}]","title":"检测主键过多表","summary":"查看集群存在主键过多的表。"}