{"summary":"调用DescribeSQLPatterns接口查看指定日期内AnalyticDB MySQL版集群下的SQL Pattern列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBClusterId","in":"query","schema":{"description":"集群ID。\n> 您可以调用[DescribeDBClusters](~~129857~~)接口查看目标地域下所有AnalyticDB MySQL集群的详情，包括集群ID。","type":"string","required":true,"docRequired":true,"example":"am-bp1r053byu48p****"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间。格式：<i>yyyy-MM-ddTHH:mm:ssZ</i>（UTC时间）。\n\n> - 仅支持查看最近14天的数据。例如：当前时间为2021-11-22T12:00:00Z，最早可以查询到2021-11-09T12:00:00Z的数据。\n> - 查询开始时间和查询结束时间的间隔不能大于24小时。","type":"string","required":true,"docRequired":true,"example":"2021-09-30T00:10:00Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间。格式：<i>yyyy-MM-ddTHH:mm:ssZ</i>（UTC时间）。\n> 查询结束时间需晚于查询开始时间。","type":"string","required":true,"docRequired":true,"example":"2021-09-30T00:15:00Z"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。\n> 您可以调用[DescribeRegions](~~143074~~)接口查看AnalyticDB MySQL版支持的地域和可用区信息，包括地域ID。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"Keyword","in":"query","schema":{"description":"查询关键字。","type":"string","required":false,"example":"SELECT"}},{"name":"Order","in":"query","schema":{"description":"将查询结果按指定字段进行排序。格式为JSON字符串，例如`[{\"Field\":\"AverageQueryTime\",\"Type\":\"Asc\"}]`。其中：\n- `Field`表示排序字段。取值说明：\n    - `PatternCreationTime`：查询时间范围内，Pattern的最早提交时间。\n    - `AverageQueryTime`：查询时间范围内，Pattern的平均总耗时。\n    - `MaxQueryTime`：查询时间范围内，Pattern的最大总耗时。\n    - `AverageExecutionTime`: 查询时间范围内，Pattern的平均执行耗时。\n    - `MaxExecutionTime`: 查询时间范围内，Pattern的最大执行耗时。\n    - `AveragePeakMemory`: 查询时间范围内，Pattern的平均峰值内存。\n    - `MaxPeakMemory`: 查询时间范围内，Pattern的最大峰值内存。\n    - `AverageScanSize`: 查询时间范围内，Pattern的平均数据读取量。\n    - `MaxScanSize`: 查询时间范围内，Pattern的最大数据读取量。\n    - `QueryCount`: 查询时间范围内，Pattern的执行次数。\n    - `FailedCount`: 查询时间范围内，Pattern的失败次数。\n\n- `Type`表示排序方式。取值说明（取值不区分大小写）：\n    - `Asc`：升序排序。\n    - `Desc`： 降序排序。","type":"string","required":true,"example":"[{\"Field\":\"AverageQueryTime\",\"Type\":\"Asc\"}]"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值为大于0且不超过Integer数据类型的最大值。\n> 本参数不填写，默认为**1**。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值说明：\n- **30**\n- **50**\n- **100**\n\n> 本参数不填写，默认为**30**。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"Lang","in":"query","schema":{"description":"设置下载文件的文件标题以及部分错误信息的语言，取值说明：\n- **zh**：简体中文（默认语言）。\n- **en**：英文。\n- **ja**：日文。\n- **zh-tw**：繁体中文。","type":"string","required":false,"example":"zh"}}],"responses":{"200":{"schema":{"description":"列表信息。","type":"object","properties":{"PageNumber":{"description":"页数。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"本页记录数。","type":"integer","format":"int32","example":"30"},"TotalCount":{"description":"总记录数。","type":"integer","format":"int32","example":"1"},"PatternDetails":{"description":"SQL Pattern的详细信息。","type":"array","items":{"description":"列表。","type":"object","properties":{"SQLPattern":{"description":"SQL Pattern的具体语句。","type":"string","example":"SELECT * FROM KEPLER_META_NODE_STATIC_INFO WHERE elastic_node = ? OR (elastic_node = ? AND enable = ?)"},"PatternId":{"description":"SQL Pattern的ID。","type":"string","example":"5575924945138******"},"User":{"description":"提交Pattern相关的SQL数据库用户名。","type":"string","example":"reporter"},"AccessIp":{"description":"提交Pattern相关的SQL客户端IP地址。","type":"string","example":"192.168.xx.xx"},"Tables":{"description":"SQL Pattern扫描的列表。","type":"string","example":"tpch.orders"},"PatternCreationTime":{"description":"查询时间范围内，Pattern的最早提交时间。单位：毫秒。","type":"string","example":"2021-11-12 03:06:00"},"AverageQueryTime":{"description":"查询时间范围内，Pattern的平均总耗时。单位：毫秒。","type":"number","format":"double","example":"4"},"MaxQueryTime":{"description":"查询时间范围内，Pattern的最大总耗时。单位：毫秒。","type":"integer","format":"int64","example":"2341"},"AverageExecutionTime":{"description":"查询时间范围内，Pattern的平均执行时间。单位：毫秒。","type":"number","format":"double","example":"234.78"},"MaxExecutionTime":{"description":"查询时间范围内，Pattern的最大执行时间。单位：毫秒。","type":"integer","format":"int64","example":"2142"},"AveragePeakMemory":{"description":"查询时间范围内，Pattern的平均峰值内存。单位：Byte。","type":"number","format":"double","example":"234.22"},"MaxPeakMemory":{"description":"Pattern相关SQL的最大峰值内存。单位：Byte。","type":"integer","format":"int64","example":"234149"},"AverageScanSize":{"description":"查询时间范围内，Pattern的平均数据读取量。单位：Byte。","type":"number","format":"double","example":"234149.23"},"MaxScanSize":{"description":"Pattern相关SQL的最大数据读取量。单位：Byte。","type":"integer","format":"int64","example":"234149"},"QueryCount":{"description":"查询时间范围内，Pattern的执行次数。","type":"integer","format":"int64","example":"345"},"FailedCount":{"description":"查询时间范围内，Pattern的失败次数。","type":"integer","format":"int64","example":"234"},"Blockable":{"description":"能否拦截当前SQL Pattern的运行。取值说明：\n* **true**：支持拦截。\n* **false**：不支持拦截。\n> 目前AnalyticDB MySQL版仅支持Select和Insert相关语句的拦截。\n\n","type":"boolean","example":"true"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"6BE0EDD1-0DE6-3EB6-81BF-BFE4F2******"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 30,\\n  \\\"TotalCount\\\": 1,\\n  \\\"PatternDetails\\\": [\\n    {\\n      \\\"SQLPattern\\\": \\\"SELECT * FROM KEPLER_META_NODE_STATIC_INFO WHERE elastic_node = ? OR (elastic_node = ? AND enable = ?)\\\",\\n      \\\"PatternId\\\": \\\"5575924945138******\\\",\\n      \\\"User\\\": \\\"reporter\\\",\\n      \\\"AccessIp\\\": \\\"192.168.xx.xx\\\",\\n      \\\"Tables\\\": \\\"tpch.orders\\\",\\n      \\\"PatternCreationTime\\\": \\\"2021-11-12 03:06:00\\\",\\n      \\\"AverageQueryTime\\\": 4,\\n      \\\"MaxQueryTime\\\": 2341,\\n      \\\"AverageExecutionTime\\\": 234.78,\\n      \\\"MaxExecutionTime\\\": 2142,\\n      \\\"AveragePeakMemory\\\": 234.22,\\n      \\\"MaxPeakMemory\\\": 234149,\\n      \\\"AverageScanSize\\\": 234149.23,\\n      \\\"MaxScanSize\\\": 234149,\\n      \\\"QueryCount\\\": 345,\\n      \\\"FailedCount\\\": 234,\\n      \\\"Blockable\\\": true\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"6BE0EDD1-0DE6-3EB6-81BF-BFE4F2******\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSQLPatternsResponse>\\n    <PageNumber>1</PageNumber>\\n    <PageSize>30</PageSize>\\n    <TotalCount>1</TotalCount>\\n    <PatternDetails>\\n        <SQLPattern>SELECT * FROM KEPLER_META_NODE_STATIC_INFO WHERE elastic_node = ? OR (elastic_node = ? AND enable = ?)</SQLPattern>\\n        <PatternId>5575924945138******</PatternId>\\n        <User>reporter</User>\\n        <AccessIp>192.168.xx.xx</AccessIp>\\n        <Tables>tpch.orders</Tables>\\n        <PatternCreationTime>2021-11-12 03:06:00</PatternCreationTime>\\n        <AverageQueryTime>4</AverageQueryTime>\\n        <MaxQueryTime>2341</MaxQueryTime>\\n        <AverageExecutionTime>234.78</AverageExecutionTime>\\n        <MaxExecutionTime>2142</MaxExecutionTime>\\n        <AveragePeakMemory>234.22</AveragePeakMemory>\\n        <MaxPeakMemory>234149</MaxPeakMemory>\\n        <AverageScanSize>234149.23</AverageScanSize>\\n        <MaxScanSize>234149</MaxScanSize>\\n        <QueryCount>345</QueryCount>\\n        <FailedCount>234</FailedCount>\\n        <Blockable>true</Blockable>\\n    </PatternDetails>\\n    <RequestId>6BE0EDD1-0DE6-3EB6-81BF-BFE4F2******</RequestId>\\n</DescribeSQLPatternsResponse>\",\"errorExample\":\"\"}]","title":"查询SQL模式列表"}