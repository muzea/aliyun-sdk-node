{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"Title","in":"query","schema":{"description":"辅助媒资的标题。规则：\n\n- 长度不超过128个字节。\n- UTF8编码。","type":"string","required":false,"example":"测试"}},{"name":"BusinessType","in":"query","schema":{"description":"辅助媒资的类型。取值：\n\n- **watermark**：水印。\n- **subtitle**：字幕。\n- **material**：素材。","type":"string","required":true,"docRequired":true,"example":"watermark"}},{"name":"MediaExt","in":"query","schema":{"description":"待上传的辅助媒资源文件的扩展名。取值：\n\n- 水印：**png、gif、apng、mov**。\n- 字幕：**srt、ass、stl、ttml、vtt**。\n- 素材：**jpg、gif、png、mp4、mat、zip、apk**。","type":"string","required":false,"docRequired":true,"enumValueTitles":{"ass":"ass","jpg":"jpg","zip":"zip","mat":"mat","gif":"gif","apng":"apng","png":"png","ttml":"ttml","stl":"stl","mp4":"mp4","srt":"srt","mov":"mov","vtt":"vtt","apk":"apk"},"example":"png"}},{"name":"FileName","in":"query","schema":{"description":"待上传的辅助媒资的源文件地址。\n>可不带扩展名；若此处带了扩展名，且此处的扩展名与MediaExt中设置的扩展名不一致，以MediaExt为准。","type":"string","required":false,"example":"D:\\test.png"}},{"name":"FileSize","in":"query","schema":{"description":"文件大小。单位：字节。","type":"string","required":false,"example":"123"}},{"name":"Tags","in":"query","schema":{"description":"标签。规则：\n\n- 最多不超过16个标签。\n- 如需设置多个标签，请使用半角逗号（,）分隔。\n- 单个标签不超过32个字符或汉字。\n- UTF-8编码。","type":"string","required":false,"example":"tag1,tag2"}},{"name":"StorageLocation","in":"query","schema":{"description":"存储地址。可通过以下方式获取：\n\n登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **存储管理**查看存储地址。\n\n> 若不传此参数，则辅助媒资上传到默认的存储地址上；若传入此参数，则辅助媒资上传到该指定的存储地址上。","type":"string","required":false,"example":"out-****.oss-cn-shanghai.aliyuncs.com"}},{"name":"Description","in":"query","schema":{"description":"媒资描述。规则：\n\n- 长度不超过1024个字节。\n- UTF-8编码。","type":"string","required":false,"example":"uploadTest"}},{"name":"UserData","in":"query","schema":{"description":"自定义设置，为JSON字符串，支持消息回调、上传加速等设置。更多详情，请参见[UserData](~~86952#section-6fg-qll-v3w~~)。\n\n> - 此参数中消息回调的使用前提是需要在控制台配置HTTP回调地址和勾选对应的回调事件类型才能使用，否则回调设置不生效。控制台配置HTTP回调的操作，请参考[回调设置](~~86071~~)。\n> - 如需使用上传加速功能，请提交工单申请开通，更多信息，请参见[上传相关说明](~~55396~~)。关于如何提交工单，请参见[联系我们](~~464625~~)。","type":"string","required":false,"example":"{\"MessageCallback\":{\"CallbackURL\":\"http://example.aliyundoc.com\"},\"Extend\":{\"localId\":\"xxx\",\"test\":\"www\"}}"}},{"name":"CateIds","in":"query","schema":{"description":"分类ID。多个ID之间使用半角逗号（,）分隔。最多支持5个。可通过以下方式获取：\n- 登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **分类管理**查看分类ID。\n- 调用[AddCategory](~~AddCategory~~)接口创建分类时会返回。\n- 调用[GetCategories](~~GetCategories~~)接口查询分类时会返回。","type":"string","required":false,"example":"1298****,0813****"}},{"name":"AppId","in":"query","schema":{"description":"应用ID。默认取值：**app-1000000**。若已开通多应用体系，传入应用ID，可将辅助媒资上传到指定应用下。更多信息，请参见[多应用](~~113600~~)。","type":"string","required":false,"example":"app-****"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"FileURL":{"description":"辅助媒资文件的OSS地址（不带鉴权）。\n\n添加图片水印模板时，该地址可做为[AddWatermark](~~AddWatermark~~)接口的请求参数`FileUrl`。","type":"string","example":"https://****.oss-cn-shanghai.aliyuncs.com/watermark/****.mov"},"RequestId":{"description":"请求ID。","type":"string","example":"73254DE5-F260-4720-D06856B63C01****"},"UploadAddress":{"description":"上传地址。\n> 接口返回的上传地址是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAddress。","type":"string","example":"LWNuLXNoYW5naGFpLmFsaXl1b****"},"MediaId":{"description":"媒资ID。","type":"string","example":"97dc17a5abc3668489b84ce9****"},"MediaURL":{"description":"媒资的访问地址。\n\n如果配置了CDN域名则返回CDN地址，否则为OSS地址。\n\n> 如果返回的MediaURL在浏览器无法访问（403），是因为您开启了点播域名的鉴权功能。可关闭[URL鉴权](~~86090~~)或自助[生成鉴权签名](~~57007~~)。","type":"string","example":"http://example.aliyundoc.com/watermark/****.mov?auth_key=****"},"UploadAuth":{"description":"上传凭证。\n\n> 接口返回的上传凭证是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAuth。","type":"string","example":"UzFnUjFxNkZ0NUIZTaklyNWJoQ00zdHF****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"FileURL\\\": \\\"https://****.oss-cn-shanghai.aliyuncs.com/watermark/****.mov\\\",\\n  \\\"RequestId\\\": \\\"73254DE5-F260-4720-D06856B63C01****\\\",\\n  \\\"UploadAddress\\\": \\\"LWNuLXNoYW5naGFpLmFsaXl1b****\\\",\\n  \\\"MediaId\\\": \\\"97dc17a5abc3668489b84ce9****\\\",\\n  \\\"MediaURL\\\": \\\"http://example.aliyundoc.com/watermark/****.mov?auth_key=****\\\",\\n  \\\"UploadAuth\\\": \\\"UzFnUjFxNkZ0NUIZTaklyNWJoQ00zdHF****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateUploadAttachedMediaResponse>\\n    <FileURL>https://****.oss-cn-shanghai.aliyuncs.com/watermark/****.mov</FileURL>\\n    <RequestId>73254DE5-F260-4720-D06856B63C01****</RequestId>\\n    <UploadAddress>LWNuLXNoYW5naGFpLmFsaXl1b****</UploadAddress>\\n    <MediaId>97dc17a5abc3668489b84ce9****</MediaId>\\n    <MediaURL>http://example.aliyundoc.com/watermark/****.mov?auth_key=****</MediaURL>\\n    <UploadAuth>UzFnUjFxNkZ0NUI*****ZTaklyNWJoQ00zdHF</UploadAuth>\\n</CreateUploadAttachedMediaResponse>\",\"errorExample\":\"\"}]","title":"获取辅助媒资上传地址和凭证","summary":"上传地址和上传凭证均由点播服务下发，主要解决媒体上传过程中的授权和安全问题，防止恶意上传。同时，点播服务在下发上传地址和凭证时还会自动创建媒资信息，即媒资ID（MediaId），用于媒资生命周期管理或媒体处理。辅助媒资包括水印图片、字幕文件、其他素材，调用CreateUploadAttachedMedia获取辅助媒资上传地址和凭证，并创建辅助媒资信息。","description":"- **请确保在使用该接口前，已充分了解视频点播产品的收费方式和价格。媒资文件上传到视频点播中会产生存储费用，计费详情，请参见[媒资存储计费](~~188308#section_e97_xrp_mzz~~)。如果您已开通了存储传输加速，则上传媒资文件到视频点播时还将涉及上传加速费用，计费详情请参见[存储传输加速计费](~~188310#section_sta_zm2_tsv~~)。**\n- 本接口仅用于获取上传地址和凭证以及创建媒资基础信息，并非上传文件，通过接口上传的完整示例，请参见[通过视频点播API上传媒资文件](~~476208~~)。\n- 如果上传凭证失效（有效期3000秒），请重新调用此接口获取上传地址和凭证。\n- 可通过配置回调，接收[辅助媒资上传完成](~~103250~~)的事件通知来判断是否上传成功。\n- 获取上传地址和凭证为点播服务的核心基础，是每个上传操作的必经过程。点播服务提供多种不同的上传方式，每种方式对获取上传地址和凭证的要求不同，详细内容请参见[上传地址和凭证](~~55397~~)的使用说明。","requestParamsDescription":" "}