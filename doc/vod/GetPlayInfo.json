{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{},"parameters":[{"name":"VideoId","in":"query","schema":{"description":"音/视频ID，仅支持传入单个音/视频ID。可通过以下方式获取：\n- 通过控制台上传的音/视频，可登录[视频点播控制台](https://vod.console.aliyun.com)，选择**媒资库** > **音/视频**查看音/视频ID。\n- 通过[CreateUploadVideo](~~55407~~)接口上传音/视频时，音/视频ID为返回参数VideoId的值。\n- 音/视频上传后，可通过[SearchMedia](~~86044~~)接口查询音/视频ID，为请求后返回参数VideoId的值。","type":"string","required":true,"docRequired":true,"example":"93ab850b4f654b6e91d24d81d44****"}},{"name":"Formats","in":"query","schema":{"description":"媒体流格式。多个格式之间使用半角逗号（,）分隔。取值：\n\n- **mp4**\n- **m3u8**\n- **mp3**\n- **flv**\n- **mpd**\n\n\n> - 默认获取所有格式的流。\n> - mpd格式仅当转码模板中配置了`dash`封装格式时才会输出。更多详情，请参见[Container：封装格式](~~52839#title-7rr-3hj-gy5~~)。","type":"string","required":false,"example":"mp4,m3u8"}},{"name":"AuthTimeout","in":"query","schema":{"description":"设置播放地址的有效时间。单位：秒。\n\n- 当OutputType取值为**cdn**时：\n\n    - 只有开启了URL鉴权，播放地址才会定期失效，否则会永久有效。URL鉴权的开启及配置方法，请参见[URL鉴权](~~86090~~)。\n    - 最小值：**1**。\n    - 最大值：无限制。\n    - 默认值：未设置时，取值为URL鉴权中设置的默认有效时长。\n\n- 当OutputType取值为**oss**时：\n\n    - 只有存储权限为私有，播放地址才会定期失效，否则会永久有效。\n    - 最小值：**1**。\n    - 最大值：为降低源站安全风险，当音视频存储在点播系统Bucket上时，最大值为**2592000**（即30天），当音视频存储在OSS自有Bucket上时，最大值为**129600**（即36小时）。如果此处设置的最大值不能满足您的需求，您可以设置OutputType为**cdn**，通过设置URL鉴权来设置更长的有效期。\n    - 默认值：未设置时，取值为**3600**。","type":"integer","format":"int64","required":false,"example":"1800"}},{"name":"OutputType","in":"query","schema":{"description":"输出地址类型。取值：\n\n- **oss**：回源地址。\n- **cdn**（默认）：加速地址。","type":"string","required":false,"example":"cdn"}},{"name":"StreamType","in":"query","schema":{"description":"媒体流类型。多个类型之间用半角逗号（,）分隔。支持类型：\n\n- **video**：视频。\n- **audio**：音频。\n\n默认获取所有类型的流。","type":"string","required":false,"example":"video"}},{"name":"ReAuthInfo","in":"query","schema":{"description":"CDN二次鉴权参数，为JSON字符串。当开启了URL鉴权的A方式鉴权功能时，可通过该参数设置鉴权URL的`uid`和`rand`，请参见[鉴权方式A说明](~~2249352~~)。","type":"string","required":false,"example":"{\"uid\":\"12345\",\"rand\":\"abckljd\"}"}},{"name":"Definition","in":"query","schema":{"description":"视频流清晰度。多个清晰度之间用半角逗号（,）分隔。取值：\n\n- **FD**：流畅。\n- **LD**：标清。\n- **SD**：高清。\n- **HD**：超清\n- **OD**：原画。\n- **2K**：2K。\n- **4K**：4K。\n- **SQ**：普通音质。\n- **HQ**：高音质。\n- **AUTO**：自适应码率。\n\n> - 默认获取所有清晰度的流。\n> - AUTO格式仅当转码模板中配置了转码打包时才会有该清晰度输出，请参见[PackageSetting：转码打包设置](~~52839#title-4fk-cg8-gzx~~)。","type":"string","required":false,"example":"LD"}},{"name":"ResultType","in":"query","schema":{"description":"返回数据类型。取值：\n\n- **Single**（默认）：每种清晰度和格式只返回一路最新转码完成的流。\n- **Multiple**：每种清晰度和格式返回所有转码完成的流。","type":"string","required":false,"example":"Single"}},{"name":"PlayConfig","in":"query","schema":{"description":"播放自定义设置。为JSON字符串，支持指定域名播放设置。参数构造详情，请参见[PlayConfig](~~86952#section-9g7-s9b-v7z~~)。\n\n> - PlayConfig不设置或者其中`PlayDomain`不设置时，接口默认使用点播配置的默认域名；如果没有设置默认域名，则会根据域名的修改时间倒序查询，使用最新修改过的域名作为播放域名。为防止返回的不是想要的域名，建议设置默认播放域名（可登录[视频点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **存储管理** > **管理** > **回源到此存储地址的域名**设置默认播放域名）。\n> - 当PlayConfig中的`EncryptType`参数设置为`AliyunVoDEncryption`时，为了保障您的视频安全，默认不返回私有加密流播放地址，若需要返回私有加密流播放地址，需要同时设置`ResultType`参数为`Multiple`。","type":"string","required":false,"example":"{\"PlayDomain\":\"vod.test_domain\",\"XForwardedFor\":\"yqCD7Fp1uqChoVj/sl/p5Q==\",\"PreviewTime\":\"20\",\"MtsHlsUriToken\":\"yqCD7Fp1uqChoVjslp5Q\"}"}},{"name":"AdditionType","in":"query","schema":{"description":"获取弹幕蒙版数据URL地址，取值：**danmu**。\n\n> 仅当`outputType`取值为`cdn`时才会生效。","type":"string","required":false,"example":"danmu"}},{"name":"Trace","in":"query","schema":{"description":"用户自定义的数字水印信息。\n- 当`DigitalWatermarkType`取值为`TraceMark`时，通过传入本参数，可以为视频设置溯源水印的水印信息，并返回包含水印信息的视频流。仅支持传入英文字母、数字及中文字符，最多支持1024个字符。\n- 当`DigitalWatermarkType`取值为`CopyrightMark`时，`Trace`对应创建水印模板时所设置的**水印文字**。通过传入本参数，可以查询并返回指定水印文字的视频流。","type":"string","required":false,"example":"test mark"}},{"name":"DigitalWatermarkType","in":"query","schema":{"description":"数字水印类型。取值：\n\n- TraceMark：溯源水印。\n- CopyrightMark：版权水印。","type":"string","required":false,"example":"TraceMark"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F552E596-967D-5500-842F-17E6364****"},"VideoBase":{"description":"音/视频基本信息。","type":"object","properties":{"CreationTime":{"description":"音/视频创建时间。格式为：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2017-06-26T06:38:48Z"},"Status":{"description":"音/视频状态。各取值及描述，请参见[Status：音视频状态](~~52839#title-vqg-8cz-7p8~~)。","type":"string","example":"Normal"},"VideoId":{"description":"音/视频ID。","type":"string","example":"93ab850b4f654b6e91d24d81d44****"},"CoverURL":{"description":"音/视频封面地址。","type":"string","example":"http://example.aliyundoc.com/sample.jpg?auth_key=2333232-atb****"},"Duration":{"description":"音/视频时长。单位：秒。","type":"string","example":"3.1667"},"Title":{"description":"音/视频标题。","type":"string","example":"阿里云VOD"},"MediaType":{"description":"媒体文件类型，取值：\n\n- **video**：视频。\n- **audio**：纯音频。","type":"string","example":"video"},"DanMuURL":{"description":"弹幕蒙版数据的地址。","type":"string","example":"http://example.aliyundoc.com/****?auth_key=abdf2123-6783232****"},"StorageClass":{"description":"媒资存储类型。取值：\n\n- **Standard**：标准。\n- **IA**：媒资低频。\n- **Archive**：媒资归档。\n- **ColdArchive**：媒资冷归档。\n- **SourceIA**：源文件低频。\n- **SourceArchive**：源文件归档。\n- **SourceColdArchive**：源文件冷归档。\n- **Changing**：媒资存储类型变更中。\n- **SourceChanging**：源文件存储类型变更中。","type":"string","example":"Standard"}}},"PlayInfoList":{"type":"object","properties":{"PlayInfo":{"description":"音/视频播放信息（流信息）。","type":"array","items":{"description":"音/视频详细信息。","type":"object","properties":{"CreationTime":{"description":"创建时间。格式为：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2022-04-18T07:37:15Z"},"Status":{"description":"媒体流状态，取值：\n\n- **Normal**：正常状态，标记的是每种清晰度和格式的一路最新转码完成的流的状态。\n- **Invisible**：不可见状态，当每种清晰度和格式有多路重复的转码流时，除了最新的一路流会被标记为正常状态，其他流会被标记为不可见状态。","type":"string","example":"Normal"},"Specification":{"description":"音视频转码输出规格。各取值及描述，请参见[输出规格：Specification](~~124671#section-6bv-l0g-opq~~)。","type":"string","example":"H264.LD"},"NarrowBandType":{"description":"转码类型。取值：\n\n- **0**：普通转码。\n- **1.0**：窄带高清1.0转码。\n- **2.0**：窄带高清2.0转码。","type":"string","example":"0"},"Height":{"description":"媒体流高度。单位：px。","type":"integer","format":"int64","example":"640"},"Bitrate":{"description":"媒体流码率。单位：Kbps。","type":"string","example":"450.878"},"ModificationTime":{"description":"更新时间。格式为：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2022-04-20T06:32:19Z"},"WatermarkId":{"description":"当前媒体流关联的水印模板ID。","type":"string","example":"dgfn26457856****"},"Encrypt":{"description":"媒体流是否加密流，取值：\n\n- **0**：否。\n- **1**：是。","type":"integer","format":"int64","example":"1"},"Definition":{"description":"视频流清晰度定义。取值：\n\n- **FD**：流畅。\n- **LD**：标清。\n- **SD**：高清。\n- **HD**：超清\n- **OD**：原画。\n- **2K**：2K。\n- **4K**：4K。\n- **SQ**：普通音质。\n- **HQ**：高音质。\n- **AUTO**：自适应码率。","type":"string","example":"LD"},"EncryptType":{"description":"媒体流加密类型。取值：\n\n- **AliyunVoDEncryption**：阿里云视频加密。\n- **HLSEncryption**：HLS标准加密。\n\n> 如果加密类型为**AliyunVoDEncryption**，则只能使用阿里云播放器SDK才能正常播放。","type":"string","example":"AliyunVoDEncryption"},"StreamType":{"description":"媒体流类型。\n若媒体流为视频则取值：**video**，若是纯音频则取值：**audio**。","type":"string","example":"video"},"JobId":{"description":"媒体流转码的作业ID。作为媒体流的唯一标识。","type":"string","example":"80e9c6580e754a798c3c19c59b16****"},"Size":{"description":"媒体流大小。单位：Byte。","type":"integer","format":"int64","example":"418112"},"Width":{"description":"媒体流宽度。单位：px。","type":"integer","format":"int64","example":"360"},"Fps":{"description":"媒体流帧率。单位：帧/每秒。","type":"string","example":"25"},"Duration":{"description":"媒体流长度。单位：秒。","type":"string","example":"9.0464"},"PlayURL":{"description":"视频流的播放地址。","type":"string","example":"https://example.aliyundoc.com/d52ee123f331466aabf6ab32a93d****/a777f9e24e6e47a2a942467d5c38ea37-8ee8e04293c6657fdda282bc422704****.m3u8"},"Format":{"description":"媒体流格式。\n- 若媒体文件为视频则取值： **mp4**、 **m3u8**。\n-  若是纯音频则取值：**mp3**。","type":"string","example":"m3u8"},"HDRType":{"title":"视频流HDR类型","description":"媒体流HDR类型。取值：\n- HDR\n- HDR10\n- HLG\n- DolbyVision\n- HDRVivid\n- SDR+","type":"string","example":"HLG"},"BitDepth":{"title":"颜色位深","description":"颜色位深。取值为整数。","type":"integer","format":"int32","example":"8"},"JobType":{"description":"数字水印类型。取值：\n- **1**：溯源水印。\n- **2**：版权水印。","type":"integer","format":"int32","example":"2"},"JobExt":{"description":"版权水印的自定义水印信息。仅当`JobType`为`2`时返回该字段。","type":"string","example":"CopyrightMarkTest"}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F552E596-967D-5500-842F-17E6364****\\\",\\n  \\\"VideoBase\\\": {\\n    \\\"CreationTime\\\": \\\"2017-06-26T06:38:48Z\\\",\\n    \\\"Status\\\": \\\"Normal\\\",\\n    \\\"VideoId\\\": \\\"93ab850b4f654b6e91d24d81d44****\\\",\\n    \\\"CoverURL\\\": \\\"http://example.aliyundoc.com/sample.jpg?auth_key=2333232-atb****\\\",\\n    \\\"Duration\\\": \\\"3.1667\\\",\\n    \\\"Title\\\": \\\"阿里云VOD\\\",\\n    \\\"MediaType\\\": \\\"video\\\",\\n    \\\"DanMuURL\\\": \\\"http://example.aliyundoc.com/****?auth_key=abdf2123-6783232****\\\",\\n    \\\"StorageClass\\\": \\\"Standard\\\"\\n  },\\n  \\\"PlayInfoList\\\": {\\n    \\\"PlayInfo\\\": [\\n      {\\n        \\\"CreationTime\\\": \\\"2022-04-18T07:37:15Z\\\",\\n        \\\"Status\\\": \\\"Normal\\\",\\n        \\\"Specification\\\": \\\"H264.LD\\\",\\n        \\\"NarrowBandType\\\": \\\"0\\\",\\n        \\\"Height\\\": 640,\\n        \\\"Bitrate\\\": \\\"450.878\\\",\\n        \\\"ModificationTime\\\": \\\"2022-04-20T06:32:19Z\\\",\\n        \\\"WatermarkId\\\": \\\"dgfn26457856****\\\",\\n        \\\"Encrypt\\\": 1,\\n        \\\"Definition\\\": \\\"LD\\\",\\n        \\\"EncryptType\\\": \\\"AliyunVoDEncryption\\\",\\n        \\\"StreamType\\\": \\\"video\\\",\\n        \\\"JobId\\\": \\\"80e9c6580e754a798c3c19c59b16****\\\",\\n        \\\"Size\\\": 418112,\\n        \\\"Width\\\": 360,\\n        \\\"Fps\\\": \\\"25\\\",\\n        \\\"Duration\\\": \\\"9.0464\\\",\\n        \\\"PlayURL\\\": \\\"https://example.aliyundoc.com/d52ee123f331466aabf6ab32a93d****/a777f9e24e6e47a2a942467d5c38ea37-8ee8e04293c6657fdda282bc422704****.m3u8\\\",\\n        \\\"Format\\\": \\\"m3u8\\\",\\n        \\\"HDRType\\\": \\\"HLG\\\",\\n        \\\"BitDepth\\\": 8,\\n        \\\"JobType\\\": 2,\\n        \\\"JobExt\\\": \\\"CopyrightMarkTest\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetPlayInfoResponse>\\n    <VideoBase>\\n        <Status>Normal</Status>\\n        <VideoId>93ab850b4f654b6e91d24d81d44****</VideoId>\\n        <TranscodeMode>NoTranscode</TranscodeMode>\\n        <CreationTime>2022-04-18T07:37:15Z</CreationTime>\\n        <Title>阿里云VOD</Title>\\n        <MediaType>video</MediaType>\\n        <CoverURL>http://example.aliyundoc.com/sample.jpg?auth_key=2333232-atb****</CoverURL>\\n        <Duration>3.1667</Duration>\\n        <OutputType>cdn</OutputType>\\n    </VideoBase>\\n    <RequestId>F552E596-967D-5500-842F-17E6364****</RequestId>\\n    <PlayInfoList>\\n        <PlayInfo>\\n            <Status>Normal</Status>\\n            <StreamType>video</StreamType>\\n            <HDRType>HLG</HDRType>\\n            <Size>418112</Size>\\n            <Definition>LD</Definition>\\n            <Fps>25</Fps>\\n            <Specification>H264.LD</Specification>\\n            <ModificationTime>2022-04-20T06:32:19Z</ModificationTime>\\n            <Duration>9.0464</Duration>\\n            <Bitrate>450.878</Bitrate>\\n            <BitDepth>8</BitDepth>\\n            <Encrypt>0</Encrypt>\\n            <PreprocessStatus>UnPreprocess</PreprocessStatus>\\n            <Format>m3u8</Format>\\n            <NarrowBandType>0</NarrowBandType>\\n            <PlayURL>https://example.aliyundoc.com/d52ee123f331466aabf6ab32a93d****/a777f9e24e6e47a2a942467d5c38ea37-8ee8e04293c6657fdda282bc422704****.m3u8</PlayURL>\\n            <CreationTime>2022-04-20T06:32:14Z</CreationTime>\\n            <Height>640</Height>\\n            <Width>360</Width>\\n            <JobId>80e9c6580e754a798c3c19c59b16****</JobId>\\n        </PlayInfo>\\n    </PlayInfoList>\\n</GetPlayInfoResponse>\",\"errorExample\":\"\"}]","title":"获取音视频播放地址","summary":"调用GetPlayInfo通过音视频ID可获取音视频的播放地址。存储在视频点播中的音视频，获取其播放地址后，可使用阿里云播放器（适用于URL播放方式）或其他第三方播放器（系统原生播放器、开源播放器、自研播放器等）进行播放。","description":"- **请确保在使用该接口前，已充分了解视频点播产品的收费方式和价格。从点播的播放地址直接下载或播放视频将产生下行流量费用，未配置加速域名时请参见[存储流出流量计费](~~188308#section-rwh-e88-f7j~~)；已配置加速域名时请参见[加速服务计费](~~188308#section-c5t-oq9-15e~~)。如果您已开通了存储传输加速，则从点播的播放地址直接下载或播放视频还将涉及下载加速费用，计费详情请参见[存储传输加速计费](~~188310#section_sta_zm2_tsv~~)。**\n- 只有状态为正常（Status字段值为Normal）的视频才能正常播放。关于播放地址的播放说明及使用限制等更多信息，请参见[音视频播放](~~57290~~)。\n- 当视频播放异常时，您可以调用[GetMezzanineInfo](~~GetMezzanineInfo~~)接口查询视频源文件信息是否正确。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"## 接口错误码\n\n下表列举了本接口特有的错误码。\n| 错误代码       | 错误信息      | HTTP 状态码  | 说明   |\n| ------------- |------------   | ----- | ------ | \n| Forbidden.IllegalStatus\t|Status of the video is illegal. Current Status is %s.\t|403\t|视频状态无效，当前状态为%s。只有**Normal**状态的视频才能播放。|\n| InvalidVideo.NotFound\t|The video does not exist.\t|404|\t视频不存在。|\n| InvalidVideo.NoneStream\t|The video has no stream to play for the request parameter ‘Formats : mp4, Definition : LD, StreamType : video’.\t|404|\t根据您的筛选条件找不到可以播放的转码输出流，请检查您的[转码配置](~~86068~~)与筛选条件是否匹配。|\n| Forbidden.AliyunVoDEncryption\t|Currently only the AliyunVoDEncryption stream exists, you must use the Aliyun player to play or set the value of ResultType to Multiple.\t|403\t|当前仅存在阿里云视频加密的转码输出流，必须使用阿里云播放器进行播放或者设置请求参数**ResultType**值为**Multiple**。|\n"}