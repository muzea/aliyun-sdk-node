{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"CoverURL","in":"query","schema":{"description":"自定义视频封面的URL地址。","type":"string","required":false,"example":"https://example.aliyundoc.com/image/D22F553TEST****.jpeg"}},{"name":"Description","in":"query","schema":{"description":"上传完成后，在点播中展示的音/视频描述。\n\n- 长度不超过1024个字符。\n- UTF-8编码。","type":"string","required":false,"example":"UploadTest"}},{"name":"FileName","in":"query","schema":{"description":"待上传的音/视频源文件地址。\n\n- 必须带扩展名，且扩展名不区分大小写。\n- 支持的扩展名，请参见[上传概述](~~55396~~)。","type":"string","required":true,"docRequired":true,"example":"D:\\video_01.mp4"}},{"name":"FileSize","in":"query","schema":{"description":"待上传的音/视频源文件的大小。单位：字节。","type":"integer","format":"int64","required":false,"example":"123"}},{"name":"Title","in":"query","schema":{"description":"上传完成后，在点播中展示的音/视频标题。\n\n- 长度不超过128个字符。\n- UTF-8编码。","type":"string","required":true,"docRequired":true,"example":"UploadTest"}},{"name":"CateId","in":"query","schema":{"description":"分类ID。可通过以下方式获取：\n\n- 登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **分类管理**查看分类ID。\n- 通过[AddCategory](~~AddCategory~~)接口创建分类时，分类ID为返回参数CateId的值。\n- 通过[GetCategories](~~GetCategories~~)接口查询分类时，为请求后返回参数CateId的值。","type":"integer","format":"int64","required":false,"example":"100036****"}},{"name":"Tags","in":"query","schema":{"description":"音/视频标签。\n\n- 最多不超过16个标签。\n- 如需设置多个音/视频标签，请使用半角逗号（,）分隔。\n- 单个标签不超过32个字符或汉字。\n- UTF-8编码。","type":"string","required":false,"example":"tag1,tag2"}},{"name":"UserData","in":"query","schema":{"description":"自定义设置。为JSON字符串，支持消息回调、上传加速等设置。更多信息，请参见[UserData](~~86952~~)。\n\n> - 此参数中消息回调的使用前提是需要在控制台配置HTTP回调地址和勾选对应的回调事件类型才能使用，否则回调设置不生效。控制台配置HTTP回调的操作，请参考[回调设置](~~86071~~)。\n> - 如需使用上传加速功能，您需要[填写宜搭信息](https://yida.alibaba-inc.com/o/ticketapply)申请开通，更多信息，请参见[上传相关说明](~~55396~~)。","type":"string","required":false,"example":"{\"MessageCallback\":{\"CallbackURL\":\"http://example.aliyundoc.com\"},\"Extend\":{\"localId\":\"*****\",\"test\":\"www\"}}"}},{"name":"TemplateGroupId","in":"query","schema":{"description":"转码模板组ID。可通过以下方式获取：\n- 登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒体处理配置** > **转码模板组**查看转码模板组ID。\n- 通过[创建转码模板组](~~102665~~)接口创建转码模板组时，转码模板组ID为返回参数TranscodeTemplateGroupId的值。\n- 通过[查询转码配置列表](~~102669~~)接口查询转码模板组时，为请求后返回参数TranscodeTemplateGroupId的值。\n\n>- 如果同时传递了WorkflowId和TemplateGroupId，以WorkflowId为准。\n>- 若不传入本参数，则按默认的转码模板组进行转码；若传入了转码模板组ID时，则按指定的模板组进行转码。\n>- 若设置为系统内置的**不转码**模板组，则音视频上传后，仅有[视频上传完成 ](~~55630~~)的事件通知，没有[单个清晰度转码完成](~~55636~~)的事件通知。\n>- 为确保正常播放，当设置为系统内置的**不转码**模板组，则视音频上传完成后，仅以下格式支持不转码直接播放：MP4、FLV、MP3、M3U8、WEBM，其他格式仅支持存储（关注FileName的扩展名）；若使用阿里云播放器播放，则版本须为3.1.0或以上。","type":"string","required":false,"example":"405477f9e214d19ea2c7c854****"}},{"name":"WorkflowId","in":"query","schema":{"description":"工作流ID。可登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒体处理配置** > **工作流管理**查看工作流ID。\n\n> 如果同时传递了WorkflowId和TemplateGroupId，以WorkflowId为准。使用说明，请参见[工作流](~~115347~~)。","type":"string","required":false,"example":"613efff3887ec34af685714cc461****"}},{"name":"StorageLocation","in":"query","schema":{"description":"存储地址。可通过以下方式获取：\n登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **存储管理**查看存储地址。\n\n> 若不传此参数，则音视频文件上传到默认的存储地址上；若传入此参数，则音视频文件上传到该指定的存储地址上。","type":"string","required":false,"example":"out-****.oss-cn-shanghai.aliyuncs.com"}},{"name":"AppId","in":"query","schema":{"description":"应用ID。默认取值：**app-1000000**。更多信息，请参见[多应用](~~113600~~)。","type":"string","required":false,"example":"app-1000000"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"25818875-5F78-4AF6-04D5-D7393642****"},"UploadAddress":{"description":"上传地址。\n\n> 接口返回的上传地址是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAddress。","type":"string","example":"eyJTZWN1cml0a2VuIjoiQ0FJU3p3TjF****"},"VideoId":{"description":"音/视频ID。可作为媒资管理、媒体处理、媒体审核等接口的请求参数。","type":"string","example":"93ab850b4f6f54b6e91d24d81d44****"},"UploadAuth":{"description":"上传凭证。\n\n> 接口返回的上传凭证是Base64加密后的值。调用SDK或API完成媒资上传时需要对其进行Base64解码后再使用。仅OSS原生SDK或OSS API方式上传需要自行解析UploadAuth。","type":"string","example":"eyJFbmRwb2ludCI6Imm****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"25818875-5F78-4AF6-04D5-D7393642****\\\",\\n  \\\"UploadAddress\\\": \\\"eyJTZWN1cml0a2VuIjoiQ0FJU3p3TjF****\\\",\\n  \\\"VideoId\\\": \\\"93ab850b4f6f54b6e91d24d81d44****\\\",\\n  \\\"UploadAuth\\\": \\\"eyJFbmRwb2ludCI6Imm****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateUploadVideoResponse>\\n    <RequestId>25818875-5F78-4AF6-04D5-D7393642****</RequestId>\\n    <UploadAddress>eyJTZWN1cml0a2VuIjoiQ0FJU3p3TjF****</UploadAddress>\\n    <VideoId>93ab850b4f6f54b6e91d24d81d44****</VideoId>\\n    <UploadAuth>eyJFbmRwb2ludCI6Imm****</UploadAuth>\\n</CreateUploadVideoResponse>\",\"errorExample\":\"\"}]","title":"获取音视频上传地址和凭证","summary":"上传地址和上传凭证均由点播服务下发，主要解决媒体上传过程中的授权和安全问题，防止恶意上传。同时，点播服务在下发上传地址和凭证时还会自动创建媒资信息，即媒体ID（MediaId），也叫视频ID（VideoId）或图片ID（ImageId），用于媒资生命周期管理或媒体处理。调用CreateUploadVideo获取音视频上传地址和凭证，并创建音视频信息。","description":"- **请确保在使用该接口前，已充分了解视频点播产品的收费方式和价格。媒资文件上传到视频点播中会产生存储费用，计费详情，请参见[媒资存储计费](~~188308#section_e97_xrp_mzz~~)。如果您已开通了存储传输加速，则上传媒资文件到视频点播时还将涉及上传加速费用，计费详情请参见[存储传输加速计费](~~188310#section_sta_zm2_tsv~~)。**\n- 本接口既支持获取视频的上传地址和凭证，同时也支持获取音频的上传地址和凭证。具体操作，请参见[上传地址和凭证](~~55397~~)。\n- 本接口仅用于获取上传地址和凭证以及创建媒资基础信息，并非上传文件，通过接口上传的完整示例，请参见[通过视频点播API上传媒资文件](~~476208~~)。\n- 如果视频上传凭证失效（默认有效期为3000秒），请调用[RefreshUploadVideo](~~RefreshUploadVideo~~)接口重新获取上传凭证。\n- 上传后，可通过配置回调，接收[上传事件通知](~~55396~~)或调用[GetMezzanineInfo](~~59624~~)接口根据返回的文件状态来判断是否上传成功。\n- 本接口返回的VideoId参数，可以用于媒资生命周期管理或媒体处理。\n- 获取上传地址和凭证为点播服务的核心基础，是每个上传操作的必经过程。点播服务提供多种不同的上传方式，每种方式对获取上传地址和凭证的要求不同，详细内容请参见[上传地址和凭证](~~55397~~)的使用说明。","responseParamsDescription":"\n","extraInfo":"## 接口错误码\n\n下表列举了本接口特有的错误码。\n| 错误代码       | 错误信息      | HTTP 状态码  | 说明   |\n| ------------- |------------   | ----- | ------ |\n| InvalidFileName.Extension | The specified FileName’s extension is illegal. | 400 | 参数FileName的文件扩展名无效。点播支持的文件扩展名限制，请参见[上传概述](~~55396~~)。|\n| IllegalCharacters | The specified $Parameter contains illegal emoticon or special characters. |  400 |请求参数Parameter（如：Title、Description、Tags等）参数值中不能包含表情符。|\n| LengthExceededMax | The specified $Parameter length has exceeded $MaxLength bytes. | 400 |请求参数Parameter（如：Title、Description、Tags）参数值长度超过MaxLength限制。参数值长度限制请参考本文档中请求参数说明。|\n| TagsExceededMax  |  The specified Tags count has exceeded 16. |  400 | 设置的标签个数超过最多16个的限制。|\n| InvalidTemplateGroupId.NotFound |  The TemplateGroupId does not exist. | 404 | 指定的模板组ID不存在。|\n| InvalidStorage.NotFound  |  The StorageLocation does not exist. | 404 | 设置的存储地址不存在，登录[点播控制台](https://vod.console.aliyun.com)，选择**配置管理** > **媒资管理配置** > **存储管理** 查看确认。|\n| Forbidden.InitFailed |  Initialization of your account has failed while opening service.  |  403 | 服务开通时账号初始化失败。|\n| AddVideoFailed  |  Adding video has failed due to some unknown error. | 503 | 创建视频信息失败，请稍后重试。|\n"}