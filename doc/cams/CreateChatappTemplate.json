{"summary":"创建消息模板，模板审核通过后可以发送消息。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]},{"APP":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"129141","abilityTreeNodes":["FEATUREcamsDKDS4Q"]},"parameters":[{"name":"Category","in":"formData","schema":{"title":"模板分类","description":"Whatsapp模板分类：\n\n- **UTILITY**：交易相关。\n\n- **MARKETING**：营销性模板。\n\n- **AUTHENTICATION**：身份验证。\n\nViber模板分类：\n- **text**：纯文本\n\n- **image**：纯图片\n\n- **text_image_button**：文本 + 图片 + 按钮\n\n- **text_button**：文本 + 按钮\n\n- **document**：文件\n\n- **video**：视频\n\n- **text_video**：文本 + 视频\n\n- **text_video_button**：文本 + 视频 + 按钮\n\n- **text_image**：文本 + 图片","type":"string","required":true,"example":"UTILITY"}},{"name":"Components","in":"formData","style":"json","schema":{"description":"消息模板组件列表。\n\n> 在Category=AUTHENTICATION时，Components不允许出现Type=HEADER的节点，并且Type=BODY或FOOTER时，Text内容应该为空。","type":"array","items":{"description":"组件列表。","type":"object","properties":{"Type":{"title":"组件类型\n值：BODY、HEADER、FOOTER 和 BUTTONS","description":"组件类型。取值：\n\n- **BODY**\n\n- **HEADER**\n\n- **FOOTER**\n\n - **BUTTONS**\n\n- **CAROUSEL**\n\n- **LIMITED_TIME_OFFER**\n\n> - WhatsApp类型模板时，**BODY**组件的字符长度不超度是1024个字符。**HEADER**和**FOOTER**组件的字符长度不超过60个字符。\n> - Viber类型模板时，**FOOTER**，**CAROUSEL**，**LIMITED_TIME_OFFER** 类型无效。\n> - Viber类型模板中，图片、视频、文件都是放在**HEADER**中（终端将图片显示在文本之下）。","type":"string","required":true,"example":"BODY"},"Text":{"title":"所发送消息的文本","description":"发送消息的文本。\n\n> 在Category=AUTHENTICATION中，此属性值为空。","type":"string","required":false,"example":"hello whatsapp"},"Format":{"title":"格式\nTEXT-文本 IMGAGE-图片 DOCUMENT-文档 VIDEO-视频","description":"媒体资源类型。\n\n- **TEXT**：文本\n \n- **IMAGE**：图片\n\n- **DOCUMENT**：文档\n\n- **VIDEO**：视频","type":"string","required":false,"example":"TEXT"},"Url":{"title":"素材路径","description":"素材路径。\n\n> Viber类型时图片建议大小：800px * 800px。","type":"string","required":false,"example":"https://image.developer.aliyundoc.com"},"Caption":{"title":"描述，当Type为Header，且Format为IMGAGE/DOCUMENT/VIDEO 可以增加描述","description":"文件的描述。","type":"string","required":false,"example":"这是一个视频"},"FileName":{"title":"文件名称，当Type为Header，且Format为DOCUMENT时可以给文件指定名称","description":"文件的名称。","type":"string","required":false,"example":"快递视频"},"Buttons":{"title":"按钮","description":"按钮列表，仅适用于**BUTTONS**组件。\n\n> Whatsapp按钮数量说明\n> - Whatsapp在类型为MARKETING/UTILITY时，最多允许10个按钮\n> - PHONE_NUMBER类型的按钮只允许存在1个\n> - URL类型的按钮最多允许存在2个\n> - QUICK_REPLY按钮不允许和PHONE_NUMBER/URL按钮乱序出现","type":"array","items":{"title":"素材路径","description":"按钮定义。","type":"object","properties":{"Type":{"title":"按钮类型\nPHONE_NUMBER（电话）,URL（网页按钮）和QUICK_REPLY（快速回复）","description":"按钮类型。\n\n- **PHONE_NUMBER**：拨打电话按钮\n\n- **URL**：网页按钮\n\n- **QUICK_REPLY**：快速回复按钮\n\n- **COPY_CODE**：复制验证码、优惠码\n\n- **ONE_TAP**：AUTHENTICATION模板时回填按钮\n\n> - Whatsapp类型模板且Category为AUTHENTICATION时，按钮只允许存在一个，并且类型只能是COPY_CODE/ONE_TAP, 当类型选择COPY_CODE时，Text为必填。当类型选择ONE_TAP时，Text（在终端没有装目标应用时显示，表示采用复制验证码按钮的名称）必填，SignatureHash, PackageName, AutofillText属性必填。\n> - Viber类型的模板只允许一个Button且只能是URL类型。","type":"string","required":true,"example":"PHONE_NUMBER"},"Text":{"title":"所发送消息的文本","description":"按钮显示的名称。","type":"string","required":false,"example":"Call Me"},"PhoneNumber":{"title":"号码","description":"电话号码，仅按钮类型为**PHONE_NUMBER**时有效。","type":"string","required":false,"example":"+861368897****"},"Url":{"title":"点击按钮后将访问的网址","description":"点击链接按钮将访问的网址。","type":"string","required":false,"example":"https://example.com"},"UrlType":{"title":"网址类型 static-静态dynamic-动态","description":"网址类型。\n\n- **static**：静态\n\n- **dynamic**：动态","type":"string","required":false,"example":"static"},"SignatureHash":{"title":"Whatsapp模板，Category为Authentication，并且Button Type为ONE_TAP时必填，表示Whatsapp调起应用的签名Hash值","description":"Whatsapp模板，Category为AUTHENTICATION且Button Type为ONE_TAP时必填，表示Whatsapp调起应用的签名Hash值。","type":"string","deprecated":true,"required":false,"example":"wi299382"},"PackageName":{"title":"Whatsapp模板，Category为Authentication，并且Button Type为ONE_TAP时必填，表示Whatsapp调起应用的包名","description":"Whatsapp模板，Category为AUTHENTICATION且Button Type为ONE_TAP/ZERO_TAP时必填，表示Whatsapp调起应用的包名。","type":"string","deprecated":true,"required":false,"example":"com.demo"},"AutofillText":{"title":"Whatsapp模板，Category为Authentication，并且Button Type为ONE_TAP时必填，Whatsap Autofill操作的按钮文本","description":"Whatsapp模板，Category为AUTHENTICATION且Button Type为ONE_TAP/ZERO_TAP时必填，Whatsap Autofill操作的按钮文本。","type":"string","required":false,"example":"Autofill"},"IsOptOut":{"title":"Whatsapp模板，在Category为Marketing,并且Button type为QUICK_REPLY时有效，表示按钮为营销退订按钮，客户如果点击了此按钮，并且在chatapp平台上配置了发送控制操作，则后续Marketing消息则不会发送到客户","description":"Whatsapp模板，在Category为Marketing,并且Button type为QUICK_REPLY时有效，表示按钮为营销退订按钮，客户如果点击了此按钮，且在ChatApp已配置了发送控制操作，则后续Marketing消息则不会发送到客户。","type":"boolean","required":false,"example":"false"},"CouponCode":{"title":"优惠券码","description":"优惠码值，只支持字母+数字，可以传入变量如$(couponCode)，在发送时再传入优惠码","type":"string","required":false,"example":"120293"},"FlowId":{"title":"Flow id","description":"Flow ID。","type":"string","required":false,"example":"479884093605****"},"FlowAction":{"title":"flow 数据事件类型\n取值范围：NAVIGATE/DATA_EXCHANGE","description":"Flow数据事件类型。取值：\n\n- DATA_EXCHANGE：数据交换。\n\n- NAVIGATE：导航，","type":"string","required":false,"enumValueTitles":{},"example":"NAVIGATE"},"NavigateScreen":{"title":"跳转屏 \n在FlowAction=NAVIGATE时必填","description":"跳转屏，在FlowAction=NAVIGATE时必填。","type":"string","required":false,"example":"DETAILS"},"SupportedApps":{"title":"验证码ONE_TAP/ZERO_TAP支持的应用","description":"支持的APP列表。","type":"array","items":{"type":"object","properties":{"SignatureHash":{"title":"包签名hash","description":"WhatsApp模板，Category为AUTHENTICATION且Button Type为ONE_TAP/ZERO_TAP时必填，表示Whatsapp调起应用的签名Hash值。","type":"string","required":false,"example":"ieid83kdiek"},"PackageName":{"title":"包名","description":"WhatsApp模板，Category为AUTHENTICATION且Button Type为ONE_TAP/ZERO_TAP时必填，表示Whatsapp调起应用的包名。","type":"string","required":false,"example":"com.kuaidian.waimaistaff"}},"required":false},"required":false,"maxItems":5}},"required":false},"required":false},"ThumbUrl":{"title":"Viber带视频消息的缩略图","description":"Viber带视频消息的缩略图。","type":"string","required":false,"example":"https://cdn.multiplymall.mobiapp.cloud/yunmall/B-LM-LMALL202207130001/20220730/d712a057-a6af-4513-bbe6-7ee57ea60983.png?x-oss-process=image/resize,w_100"},"Duration":{"title":"Viber视频消息的视频时长，取值范围 0 - 600","description":"Viber视频消息的视频时长(秒)，取值范围为0~600。","type":"integer","format":"int32","required":false,"example":"120"},"FileType":{"title":"Viber文件消息的文件类型","description":"Viber文件消息的文件类型。","type":"string","required":false,"example":"docx"},"CodeExpirationMinutes":{"title":"Whatsapp Authentication模板验证码有效期（分钟），只在Whatsapp类型消息，Category为Authentication并且Component Type为Footer时有效（此信息显示在Footer位置）","description":"Whatsapp AUTHENTICATION模板验证码有效期（分钟），只在Whatsapp类型消息，Category为AUTHENTICATION并且Component Type为Footer时有效（此信息显示在Footer位置）。","type":"integer","format":"int32","required":false,"maximum":"90","minimum":"1","example":"5"},"AddSecretRecommendation":{"title":"Whatsapp类型模板，Category为Authentication，并且Component Type为Body时有效，表示在Body上面显示不要将验证码信息提供给其它人的提示信息","description":"Whatsapp类型模板，Category为AUTHENTICATION且Component Type为Body时有效，表示在Body上面显示不要将验证码信息提供给其它人的提示信息。","type":"boolean","required":false,"example":"true"},"HasExpiration":{"title":"LTO模板中，是否有过期时间","description":"优惠码是否存在过期时间，在type = LIMITED_TIME_OFFER时使用。","type":"boolean","required":false,"example":"true"},"Cards":{"description":"Carousel模板卡片列表。","type":"array","items":{"description":"Carousel模板卡片对象。","type":"object","properties":{"CardComponents":{"title":"Carousel模板卡片列表","description":"Carousel卡片中控件列表。","type":"array","items":{"description":"Carousel模板中卡片对象。","type":"object","properties":{"Type":{"title":"组件类型\n值：BODY、HEADER 和 BUTTONS","description":"组件类型。取值：\n\n- **BODY**\n\n- **HEADER**\n\n- **BUTTONS**","type":"string","required":true,"example":"BODY"},"Format":{"title":"Carousel模板中Header的类型，只支持IMAGE/VIDEO，所有卡片的Header必须一致\n格式\n IMGAGE-图片 VIDEO-视频","description":"媒体资源类型，在Type = HEADER时有效。\n\n- **IMAGE**：图片 \n\n- **VIDEO**：视频","type":"string","required":false,"example":"IMAGE"},"Text":{"title":"Carousel轮播卡片中Body的内容","description":"Carousel卡片中BODY的内容。","type":"string","required":false,"example":"Who is the very powerful team"},"Url":{"title":"Header，图片或视频的路径","description":"素材路径。","type":"string","required":false,"example":"https://alibaba.com/img.png"},"Buttons":{"title":"Carousel卡片中的按钮，所有卡片中的按钮类型、名称、顺序必须一致,每个卡片最多有2个按钮","description":"按钮列表，仅适用于BUTTONS组件。Carousel每个卡片最多只能有两个按钮。","type":"array","items":{"description":"按钮对象。","type":"object","properties":{"Text":{"title":"按钮内容","description":"按钮文本。","type":"string","required":false,"example":"Call me"},"Type":{"title":"Carousel模板的按钮类型\n取值：URL/PHONE_NUMBER/QUICK_REQLY","description":"按钮类型。\n\n- **PHONE_NUMBER**：拨打电话按钮\n\n- **URL**：网页按钮\n\n- **QUICK_REPLY**：快速回复按钮","type":"string","required":true,"example":"PHONE_NUMBER"},"Url":{"title":"点击按钮后将访问的网址","description":"点击按钮后将访问的网址。","type":"string","required":false,"example":"https://alibaba.com/xx"},"UrlType":{"title":"网址类型 static-静态dynamic-动态","description":"网址类型 \n\n- **static**: 静态\n\n- **dynamic**: 动态","type":"string","required":false,"example":"static"},"PhoneNumber":{"title":"号码","description":"电话号码。","type":"string","required":false,"example":"+86138007****"}},"required":false},"required":false}},"required":false},"required":true,"maxItems":10,"minItems":1}},"required":false},"required":false}},"required":false},"required":true}},{"name":"Name","in":"formData","schema":{"title":"模板名称","description":"模板名称。","type":"string","required":true,"example":"hello_whatsapp"}},{"name":"Language","in":"formData","schema":{"title":"语言","description":"模板语言。 详细语言代码，请参见[语言代码](~~463420~~)。","type":"string","required":true,"example":"en"}},{"name":"Example","in":"formData","style":"json","schema":{"title":"变量，KEY-VALUE结构","description":"创建模板的示例。","type":"object","required":false,"additionalProperties":{"type":"string","example":"{\"textVariable\":\"text\"}","description":"变量例子。通过把JSON结构转成String的方式传入。"},"enumValueTitles":{}}},{"name":"TemplateType","in":"formData","schema":{"title":"模板类型","description":"模板类型。\n\n- **WHATSAPP**\n\n- **VIBER**","type":"string","required":true,"example":"WHATSAPP"}},{"name":"CustWabaId","in":"formData","schema":{"title":"ISV客户WabaId, 后续会被弃用，请使用CustSpaceId","description":"ISV客户WabaId。\n\n> 过时的参数，请使用CustSpaceId。","type":"string","deprecated":true,"required":false,"example":"65921621816****"}},{"name":"IsvCode","in":"formData","schema":{"title":"Isv校验码，用于校验子帐号是否由ISV授权","description":"ISV校验码，用于校验子账号是否由ISV授权。","type":"string","required":false,"example":"skdi3kksloslikdkkdk"}},{"name":"CustSpaceId","in":"formData","schema":{"title":"ISV子客户的SpaceId","description":"ISV子客户的SpaceId。","type":"string","required":false,"example":"293483938849493"}},{"name":"AllowCategoryChange","in":"formData","schema":{"title":"是否允许facebook自动变更模板的目录（这样能提高模板的审核通过率）此属性只对TemplateType=WHATSAPP有效","description":"是否允许facebook自动变更模板的目录（这样能提高模板的审核通过率）此属性只对TemplateType=WHATSAPP有效。","type":"boolean","required":false,"example":"true"}},{"name":"MessageSendTtlSeconds","in":"formData","schema":{"title":"Whatsapp中Authentication模板消息发送时的有效期","description":"WhatsApp中Authentication模板消息发送时的有效期。\n\n> 此属性需要提前提供waba给阿里运营人员开白名单，不然会导致模板送审失败。","type":"integer","format":"int32","required":false,"maximum":"600","minimum":"60","example":"120"}}],"responses":{"200":{"schema":{"description":"返回数据。","type":"object","properties":{"RequestId":{"title":"请求ID","description":"请求ID。","type":"string","example":"90E63D28-E31D-1EB2-8939-A94866411B2D"},"Code":{"title":"返回结果 OK 为正常","description":"请求状态码。\n\n- 返回OK代表请求成功。\n\n- 其他错误码，请参见[错误码列表](https://www.alibabacloud.com/help/zh/cams/latest/api-error-codes)。","type":"string","example":"OK"},"Message":{"title":"提示信息，当返回异常时有值","description":"错误提示信息。","type":"string","example":"User not authorized to operate on the specified resource."},"Data":{"description":"返回数据。\n","type":"object","properties":{"TemplateCode":{"title":"模板Code","description":"模板Code。","type":"string","example":"SMS_232907****"},"TemplateName":{"title":"模板名称","description":"模板名称。","type":"string","example":"hello_whatsapp"}},"example":"{\"templateCode\": \"****4b5c79c9432497a075bdfca36bf5\"，\"templateName\": \"hello_whatsapp\"}"},"AccessDeniedDetail":{"description":"访问被拒绝详细信息。","type":"string","example":"无"}}}},"201":{}},"errorCodes":{"400":[{"errorCode":"Product.Unsubscript","errorMessage":"You have not subscribed to the specified product."},{"errorCode":"Ram.PermissionDeny","errorMessage":"You are not authorized to perform the operation."},{"errorCode":"System.LimitControl","errorMessage":"The system is under flow control."},{"errorCode":"Unknown.ResourceOwnerId","errorMessage":"The resource does not belong to the current user."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"90E63D28-E31D-1EB2-8939-A94866411B2D\\\",\\n  \\\"Code\\\": \\\"OK\\\",\\n  \\\"Message\\\": \\\"User not authorized to operate on the specified resource.\\\",\\n  \\\"Data\\\": {\\n    \\\"TemplateCode\\\": \\\"SMS_232907****\\\",\\n    \\\"TemplateName\\\": \\\"hello_whatsapp\\\"\\n  },\\n  \\\"AccessDeniedDetail\\\": \\\"无\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateChatappTemplateResponse>\\n    <RequestId>90E63D28-E31D-1EB2-8939-A9486641****</RequestId>\\n    <Code>OK</Code>\\n    <Message>无</Message>\\n    <Data>{\\\"templateCode\\\": \\\"****4b5c79c9432497a075bdfca36bf5\\\"，\\\"templateName\\\": \\\"hello_whatsapp\\\"}</Data>\\n</CreateChatappTemplateResponse>\",\"errorExample\":\"\"}]","title":"创建ChatApp模板","description":"### QPS限制\n本接口的单用户QPS限制为50次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。"}