{"summary":"发送ChatApp消息。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]},{"APP":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"130289","abilityTreeNodes":["FEATUREcamsU2M7I2"]},"parameters":[{"name":"ChannelType","in":"formData","schema":{"title":"通道类型 whatsapp/viber/line","description":"类型。取值：\n\n- **whatsapp**。\n\n- **viber**。\n\n- **line**（开发中）。","type":"string","required":true,"example":"whatsapp"}},{"name":"Type","in":"formData","schema":{"title":"消息大类\ntemplate--模板\nmessage--非模板","description":"消息类型。取值：\n\n- **template**：在控制台已被审核通过的消息模板，可以在任意时间发送。\n\n- **message**：任意格式的消息，Whatsapp类型消息时，时间限制为在收到用户最后一条消息后的24小时内可发送此类消息。Viber消息无此限制。","type":"string","required":true,"example":"template"}},{"name":"MessageType","in":"formData","schema":{"title":"消息类型","description":"当Type为**message**时，指定消息的详细类型。\n\n**Whatsapp消息类型：**\n- **text**，纯文本消息。\n\n- **image**，图片消息。\n\n- **video**，视频消息。\n\n- **audio**，音频消息。\n\n- **document**，文档消息。\n\n- **interactive** ，交互消息。\n\n- **contacts**，联系人消息。\n\n- **location**，位置消息。\n\n- **sticker**，贴纸消息。\n\n- **reaction**，心情消息。\n\n**Viber消息类型：**\n\n- **text**，文本消息。\n\n- **image**，图片消息。\n\n- **video**， 视频消息。\n\n- **document**， 文件消息。\n\n- **text_button**， 文本+按钮消息。\n\n- **text\\_image_button**， 文本+图片+按钮消息。\n\n- **text_video**， 文本+视频消息。\n\n- **text\\_video_button**， 文本+视频+按钮消息。\n\n- **text_image**， 文本+图片消息。\n\n\n> 详细字段说明，请参见[字段说明](~~454530~~)。","type":"string","required":false,"example":"text "}},{"name":"TemplateCode","in":"formData","schema":{"title":"模板编码","description":"模板Code。Type为**template**时此字段必填。","type":"string","required":false,"example":"744c4b5c79c9432497a075bdfca3****"}},{"name":"Language","in":"formData","schema":{"title":"语言","description":"模板语言。Type为**template**时此字段必填，详细语言代码列表，请参见[语言代码](~~463420~~)。","type":"string","required":false,"example":"en"}},{"name":"From","in":"formData","schema":{"title":"发送方","description":"消息发送方号码。\n\n> 当前支持WhatsApp账号且在控制台审核通过的号码。","type":"string","required":true,"example":"861360000****"}},{"name":"To","in":"formData","schema":{"title":"接收号码","description":"消息接收方号码。","type":"string","required":true,"example":"861390000****"}},{"name":"TemplateParams","in":"formData","style":"json","schema":{"description":"消息模板变量。","type":"object","required":false,"additionalProperties":{"type":"string","description":"消息模板变量对应的实际值，参数格式为JSON格式。如果模板中存在变量，该参数为必填项。","example":"{\"param1\":\"value1\",\"param2\":\"value2\"}"}}},{"name":"Content","in":"query","schema":{"title":"消息内容","description":"消息内容。\n\n**Whatsapp消息备注：**\n-  当**messageType**为**text**时，**text**字段为必填，**Caption**禁止填写。\n- 当**messageType**为**image**时，**Link**必填。\n- 当**messageType**为**video**时，**Link**必填。\n- 当**messageType**为**audio**时，**Link**必填，**Caption**字段无效。\n- 当**messageType**为**document**时，**Link**和**FileName**字段必填，**Caption**字段无效。\n- 当**messageType**为**interactive**时，**type**和**action**字段必填。\n- 当**messageType**为**contacts**时，**name**字段必填。\n- 当**messageType**为**location**时，**longitude**和**latitude**字段必填。\n- 当**messageType**为**sticker**时，**Link**字段必填，**Caption**和**FileName**字段无效。\n- 当**messageType**为**reaction**时，**messageId**和**emoji**字段必填。\n\n**Viber消息备注：**\n- 当**messageType**为**text**时，**text**字段必填。\n- 当**messageType**为**image**时，**link**字段必填。\n- 当**messageType**为**video**时，**link**, **thumbnail**, **fileSize**, **duration**字段必填。\n- 当**messageType**为**document**时，**link**, **fileName**, **fileType**字段为必填。\n- 当**messageType**为**text_button**时，**text**, **caption**, **action**字段为必填。\n- 当**messageType**为**text_image_button**时，**text**, **link**, **caption**, **action**字段为必填。\n- 当**messageType**为**text_video**时，**text**, **link**, **thumbnail**, **fileSize**, **duration**字段为必填。\n- 当**messageType**为**text_video_button**时，**text**, **link**, **thumbnail**, **fileSize**, **duration**, **caption**字段为必填，**action**字段不能为值。","type":"string","required":false,"example":"{\"text\": \"hello whatsapp\", \"link\": \"\", \"caption\": \"\", \"fileName\": \"\" }"}},{"name":"Payload","in":"query","style":"json","schema":{"description":"按钮的触发消息。","type":"array","items":{"description":"模板中按钮的触发消息。","type":"string","required":false,"example":"payloadtext1,payloadtext2,payloadtext3"},"required":false,"example":"payloadtext1,payloadtext2,payloadtext3"}},{"name":"CustWabaId","in":"formData","schema":{"title":"ISV客户wabaId","description":"ISV客户wabaId。\n\n> 过时的参数，请使用CustSpaceId。","type":"string","deprecated":true,"required":false,"example":"65921621816****"}},{"name":"FallBackId","in":"formData","schema":{"title":"回落策略ID","description":"失败回落策略ID。可以在控制台创建相关策略并查看。\n\n<props=\"china\">\n\n> 中国站此字段无效。\n</props>","type":"string","required":false,"example":"S_00****"}},{"name":"FallBackContent","in":"formData","schema":{"title":"回落内容","description":"失败回落消息内容。\n\n<props=\"china\">\n\n> 中国站此字段无效。\n</props>","type":"string","required":false,"example":"This is a fallback message."}},{"name":"IsvCode","in":"formData","schema":{"title":"Isv校验码，用于校验子帐号是否由ISV授权","description":"ISV校验码，用于校验子账号是否由ISV授权。","type":"string","required":false,"example":"skdi3kksloslikd****"}},{"name":"CustSpaceId","in":"formData","schema":{"title":"ISV子客户的SpaceId","description":"子账户空间ID。","type":"string","required":false,"example":"28251486512358****"}},{"name":"ContextMessageId","in":"formData","schema":{"title":"回复的消息ID","description":"回复的消息ID。","type":"string","required":false,"example":"61851ccb2f1365b16aee****"}},{"name":"TrackingData","in":"formData","schema":{"title":"viber消息跟踪数据值","description":"Viber消息跟踪数据值。","type":"string","required":false,"example":"tracking_id:12****"}},{"name":"Label","in":"formData","schema":{"title":"Viber消息类型，取值 pormotion/transation","description":"Viber消息类型。当ChannelType=viber时为必填，取值：\n\n- **pormotion**。\n- **transaction**。","type":"string","required":false,"example":"promotion"}},{"name":"Ttl","in":"formData","schema":{"title":"Viber消息发送超时时间，单位为秒，取值范围 30 - 1209600","description":"Viber消息发送超时时间，单位：秒，取值范围 30~1209600。","type":"integer","format":"int32","required":false,"example":"50","default":"120"}},{"name":"Tag","in":"formData","schema":{"title":"viber消息发送时tag信息","description":"Viber消息发送时tag信息。","type":"string","required":false,"example":"tag"}},{"name":"TaskId","in":"formData","schema":{"title":"任务ID，由客户传入，在状态报告时会返回","description":"任务ID。","type":"string","required":false,"example":"10000****"}},{"name":"FallBackDuration","in":"formData","schema":{"title":"消息在指定时间内未返回回执回落","description":"消息在指定时间内没有返回已到达回执时回落, 不填代表不根据此时间判断回落，仅**发送失败**和**有失败的状态报告**时才会回落。时间单位为秒，最小值为60，最大值43200。\n\n<props=\"china\">\n\n> 中国站此字段无效。\n</props>","type":"integer","format":"int32","required":false,"maximum":"43200","minimum":"10","example":"120"}},{"name":"ProductAction","in":"formData","style":"json","schema":{"title":"Whatsapp CATALOG/MPM 消息发送是商品信息","description":"Whatsapp CATALOG/MPM 消息发送是商品信息。","type":"object","properties":{"ThumbnailProductRetailerId":{"title":"商品RetailerId","description":"商品RetailerId。","type":"string","required":false,"example":"S238SK****"},"Sections":{"title":"商品列表（最多可以有10个分类，30个商品）","description":"商品列表（最多可以有10个分类，30个商品）。","type":"array","items":{"title":"商品分类","description":"商品分类。","type":"object","properties":{"Title":{"title":"分类名称","description":"分类名称。","type":"string","required":false,"example":"测试"},"ProductItems":{"title":"商品列表","description":"商品列表。","type":"array","items":{"title":"商品信息","description":"商品信息。","type":"object","properties":{"ProductRetailerId":{"title":"商品RetailerId","description":"商品RetailerId。","type":"string","required":false,"example":"9I39E****"}},"required":false},"required":false}},"required":false},"required":false}},"required":false}},{"name":"FallBackRule","in":"formData","schema":{"title":"回落规则","description":"回落规则。取值：\n- **undelivered**：消息不能发送到端时回落（在发送状态时模板、参数需要校验通过，模板被封、号码被封等不做校验）。参数值为空时默认使用此规则。\n- **sentFailed**：消息在校验模板、模板变量等参数时，校验不通过也会回落。只会强校验channelType, type, messageType, to, from(是否存在) 几个参数。\n\n<props=\"china\">\n\n> 中国站此字段无效。\n</props>","type":"string","required":false,"example":"undelivered","default":"undelivered"}},{"name":"FlowAction","in":"formData","style":"json","schema":{"title":"Flow发送数据","description":"Flow发送数据。","type":"object","properties":{"FlowToken":{"title":"flow token信息","description":"flow token信息。","type":"string","required":false,"example":"1122***"},"FlowActionData":{"title":"flow默认参数","description":"flow默认参数。","type":"object","required":false,"additionalProperties":{"type":"string","example":"{\"name\":\"test\"}","description":"flow默认参数。"}}},"required":false}},{"name":"TemplateName","in":"formData","schema":{"title":"模板名称","description":"模板名称。","type":"string","required":false,"example":"test_name"}}],"responses":{"200":{"schema":{"description":"返回数据。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"90E63D28-E31D-1EB2-8939-A94866411B2O"},"Code":{"description":"请求状态码。\n\n- 返回OK代表请求成功。\n\n- 其他错误码，请参见[错误码列表](~~196974~~)。","type":"string","example":"OK"},"Message":{"description":"错误提示信息。","type":"string","example":"User not authorized to operate on the specified resource."},"MessageId":{"title":"消息ID","description":"消息ID。","type":"string","example":"61851ccb2f1365b16aee****"}}}},"201":{}},"errorCodes":{"400":[{"errorCode":"Product.Unsubscript","errorMessage":"You have not subscribed to the specified product."},{"errorCode":"Ram.PermissionDeny","errorMessage":"You are not authorized to perform the operation."},{"errorCode":"System.LimitControl","errorMessage":"The system is under flow control."},{"errorCode":"Unknown.ResourceOwnerId","errorMessage":"The resource does not belong to the current user."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"90E63D28-E31D-1EB2-8939-A94866411B2O\\\",\\n  \\\"Code\\\": \\\"OK\\\",\\n  \\\"Message\\\": \\\"User not authorized to operate on the specified resource.\\\",\\n  \\\"MessageId\\\": \\\"61851ccb2f1365b16aee****\\\"\\n}\",\"type\":\"json\"}]","title":"发送ChatApp消息","description":"本接口的单用户QPS限制为250次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。"}