{"summary":"调用UpdateNamespaceScopeSidecarConfig更新命名空间级别的Sidecar配置。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"114945","abilityTreeNodes":["FEATUREservicemeshB27TWZ"]},"parameters":[{"name":"ServiceMeshId","in":"formData","schema":{"description":"ASM实例ID。","type":"string","required":true,"docRequired":true,"example":"ca04bc38979214bf2882be79d39b4****"}},{"name":"Namespace","in":"formData","schema":{"description":"命名空间。","type":"string","required":false,"example":"default"}},{"name":"IncludeIPRanges","in":"formData","schema":{"description":"拦截对外访问的地址范围`global.proxy.includelPRanges`。","type":"string","required":false,"example":"*"}},{"name":"ExcludeIPRanges","in":"formData","schema":{"description":"不拦截对外访问的地址范围`global.proxy.excludelPRanges`。","type":"string","required":false,"example":"172.16.0.0/12"}},{"name":"IncludeInboundPorts","in":"formData","schema":{"description":"经过Sidecar代理的入口流量端口。","type":"string","required":false,"example":"83"}},{"name":"ExcludeOutboundPorts","in":"formData","schema":{"description":"免于经过Sidecar代理的出口流量端口。","type":"string","required":false,"example":"81"}},{"name":"ExcludeInboundPorts","in":"formData","schema":{"description":"免于经过Sidecar代理的入口流量端口。","type":"string","required":false,"example":"82"}},{"name":"IncludeOutboundPorts","in":"formData","schema":{"description":"经过Sidecar代理的出口流量端口。","type":"string","required":false,"example":"84"}},{"name":"TerminationDrainDuration","in":"formData","schema":{"description":"Sidecar代理终止等待时间。","type":"string","required":false,"example":"6s"}},{"name":"ProxyInitCPUResourceLimit","in":"formData","schema":{"description":"Sidecar代理初始化容器CPU资源限制。","type":"string","required":false,"example":"2000 m"}},{"name":"ProxyInitMemoryResourceLimit","in":"formData","schema":{"description":"Sidecar代理初始化容器内存资源限制。","type":"string","required":false,"example":"50 Mi"}},{"name":"ProxyInitCPUResourceRequest","in":"formData","schema":{"description":"Sidecar代理初始化容器CPU资源最低申请额度。","type":"string","required":false,"example":"60 m"}},{"name":"ProxyInitMemoryResourceRequest","in":"formData","schema":{"description":"Sidecar代理初始化容器内存资源最低申请额度。","type":"string","required":false,"example":"30 Mi"}},{"name":"SidecarProxyCPUResourceLimit","in":"formData","schema":{"description":"Sidecar代理容器CPU资源限制。","type":"string","required":false,"example":"2000 m"}},{"name":"SidecarProxyMemoryResourceLimit","in":"formData","schema":{"description":"Sidecar代理容器内存资源限制。","type":"string","required":false,"example":"50 Mi"}},{"name":"SidecarProxyCPUResourceRequest","in":"formData","schema":{"description":"Sidecar代理容器CPU资源最低申请额度。","type":"string","required":false,"example":"60 m"}},{"name":"SidecarProxyMemoryResourceRequest","in":"formData","schema":{"description":"Sidecar代理容器内存资源最低申请额度。","type":"string","required":false,"example":"30 Mi"}},{"name":"Lifecycle","in":"formData","schema":{"description":"Sidecar Proxy生命周期设置。","type":"string","required":false,"example":"{\"postStart\":{\"exec\":{\"command\":[\"pilot-agent\",\"wait\"]}},\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"sleep 15\"]}}}"}},{"name":"IstioDNSProxyEnabled","in":"formData","schema":{"description":"是否启用DNS代理功能，取值：\n\n- `true`：启用DNS代理功能。\n\n- `false`：不启用DNS代理功能。\n","type":"boolean","required":false,"example":"true"}},{"name":"PostStart","in":"formData","schema":{"description":"istio-proxy启动后执行参数。","type":"string","required":false,"example":"{\"exec\":{\"command\":[\"pilot-agent\",\"wait\"]}}"}},{"name":"PreStop","in":"formData","schema":{"description":"istio-proxy终止前执行参数。","type":"string","required":false,"example":"{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"sleep 15\"]}}"}},{"name":"Concurrency","in":"formData","schema":{"description":"istio-proxy并发度设置。","type":"integer","format":"int32","required":false,"example":"2"}},{"name":"ProxyStatsMatcher","in":"formData","schema":{"description":"用于Envoy监控统计的指标，使用JSON格式表示。","type":"string","required":false,"example":"{ \"inclusionPrefixes\": [ \"cluster.outbound\", \"cluster_manager\", \"listener_manager\", \"server\", \"cluster.xds-grpc\" ], \"inclusionRegexps\": [ \"listener.*.downstream_cx_total\", \"listener.*.downstream_cx_active\" ] }"}},{"name":"HoldApplicationUntilProxyStarts","in":"formData","schema":{"description":"应用程序启动前是否等待istio-proxy启动完成，取值：\n\n- `true`：应用程序启动前等待istio-proxy启动完成。\n\n- `false`：应用程序启动前不等待istio-proxy启动完成。","type":"boolean","required":false,"example":"true"}},{"name":"LogLevel","in":"formData","schema":{"description":"日志等级，取值：`info`、`debug`、`tracing`、`error`。","type":"string","required":false,"example":"info"}},{"name":"Tracing","in":"formData","schema":{"description":"自定义的链路追踪配置，需要将链路追踪配置序列化为JSON字符串后传入。链路追踪配置中包含以下字段：\n\n- `sampling`：Double类型，链路追踪的采样率。\n\n- `custom_tags`：Map类型，其中键为自定义链路追踪标签的键，String类型；值为自定义链路追踪标签的取值，JSON对象类型，可以选择填入以下字段之一。\n\n    -  `literal`：链路追踪标签值将取固定值，JSON对象类型，其中必须包含`value`字段，指定固定的字面量值，例如`{\"value\":\"test\"}`。\n    - `header`：链路追踪标签值将取指定的请求头，JSON对象类型，其中必须包含`name`字段和`defaultValue`字段，指定请求头的名称和取不到时的默认值，例如`{\"name\":\"test\",\"defaultValue\":\"test\"}`。\n    - `environment`：链路追踪标签值将取指定的环境变量，JSON对象类型，其中必须包含`name`字段和`defaultValue`字段，指定环境变量的名称和取不到时的默认值，例如`{\"name\":\"test\",\"defaultValue\":\"test\"}`。\n\n","type":"string","required":false,"example":"{\"sampling\":99.8,\"custom_tags\":{\"test\":{\"literal\":{\"value\":\"testnamespace\"}}}}"}},{"name":"InterceptionMode","in":"formData","schema":{"description":"Sidecar对入向流量的拦截策略，取值如下：\n- `REDIRECT`：默认的拦截策略，Sidecar将使用重定向方式拦截入向流量。\n- `TPROXY`：透明代理拦截策略，Sidecar将以透明代理的方式拦截入向流量。","type":"string","required":false,"example":"TPROXY"}},{"name":"ProxyMetadata","in":"formData","schema":{"description":"在Sidecar代理中额外添加的环境变量，以JSON对象的形式表示。JSON对象中的键和值分别代表添加至Sidecar代理环境变量的键和值。","type":"string","required":false,"example":"{\"EXIT_ON_ZERO_ACTIVE_CONNECTIONS\":\"true\"}"}},{"name":"ProxyInitAckSloCPUResourceLimit","in":"formData","schema":{"description":"Sidecar代理初始化容器CPU资源限制（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器CPU资源限制。单位为千分之一核。","type":"string","required":false,"example":"2000"}},{"name":"ProxyInitAckSloMemoryResourceLimit","in":"formData","schema":{"description":"Sidecar代理初始化容器内存资源限制（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器内存资源限制。","type":"string","required":false,"example":"2048Mi"}},{"name":"ProxyInitAckSloCPUResourceRequest","in":"formData","schema":{"description":"Sidecar代理初始化容器CPU资源最低申请额度（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器CPU资源最低申请额度。单位为千分之一核。","type":"string","required":false,"example":"100"}},{"name":"ProxyInitAckSloMemoryResourceRequest","in":"formData","schema":{"description":"Sidecar代理初始化容器内存资源最低申请额度（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器内存资源最低申请额度。","type":"string","required":false,"example":"128Mi"}},{"name":"SidecarProxyAckSloCPUResourceLimit","in":"formData","schema":{"description":"Sidecar代理容器CPU资源限制（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器CPU资源限制。单位为千分之一核。","type":"string","required":false,"example":"2000"}},{"name":"SidecarProxyAckSloMemoryResourceLimit","in":"formData","schema":{"description":"Sidecar代理容器内存资源限制（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器内存资源限制。","type":"string","required":false,"example":"2048Mi"}},{"name":"SidecarProxyAckSloCPUResourceRequest","in":"formData","schema":{"description":"Sidecar代理容器CPU资源最低申请额度（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器CPU资源最低申请额度。单位为千分之一核。","type":"string","required":false,"example":"100"}},{"name":"SidecarProxyAckSloMemoryResourceRequest","in":"formData","schema":{"description":"Sidecar代理容器内存资源最低申请额度（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器内存资源最低申请额度。","type":"string","required":false,"example":"128Mi"}},{"name":"Privileged","in":"formData","schema":{"description":"是否在Sidecar代理容器的安全上下文中为Sidecar代理容器设定为特权，取值：\n\n- `true`：Sidecar代理容器具有特权。\n\n- `false`：Sidecar代理容器没有特权。","type":"boolean","required":false,"example":"false"}},{"name":"EnableCoreDump","in":"formData","schema":{"description":"是否为Sidecar代理容器启用Core Dump（程序崩溃时转储内存状态），取值：\n\n- `true`：为Sidecar代理容器启用Core Dump。\n\n- `false`：不为Sidecar代理容器启用Core Dump。","type":"boolean","required":false,"example":"false"}},{"name":"ReadinessInitialDelaySeconds","in":"formData","schema":{"description":"在开始进行Sidecar代理容器的就绪性检查前等待的时间（单位：秒）。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"ReadinessPeriodSeconds","in":"formData","schema":{"description":"对Sidecar代理容器进行就绪性检查时，两次检查之间的时间间隔（单位：秒）。","type":"integer","format":"int32","required":false,"example":"2"}},{"name":"ReadinessFailureThreshold","in":"formData","schema":{"description":"判断Sidecar代理容器不就绪时所需的就绪性检查失败次数阈值。","type":"integer","format":"int32","required":false,"example":"5"}},{"name":"SMCEnabled","in":"formData","schema":{"description":"是否启用 SMC-R优化（SMC-R优化可优化跨节点通信性能，依赖Alibaba Cloud Linux 3以及节点 eRDMA 网络设备）","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"description":"响应体。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"31d3a0f0-07ed-4f6e-9004-1804498c****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"31d3a0f0-07ed-4f6e-9004-1804498c****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateNamespaceScopeSidecarConfigResponse>\\n    <RequestId>31d3a0f0-07ed-4f6e-9004-1804498c****</RequestId>\\n</UpdateNamespaceScopeSidecarConfigResponse>\",\"errorExample\":\"\"}]","title":"更新Sidecar配置"}