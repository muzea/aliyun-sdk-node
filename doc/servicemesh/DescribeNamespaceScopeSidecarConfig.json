{"summary":"调用DescribeNamespaceScopeSidecarConfig查询命名空间级别的Sidecar配置设置。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"114962","abilityTreeNodes":["FEATUREservicemeshB27TWZ"]},"parameters":[{"name":"ServiceMeshId","in":"formData","schema":{"description":"ASM实例ID。","type":"string","required":true,"docRequired":true,"example":"c7120e75a202d4fd8acb028a86b6a****"}},{"name":"Namespace","in":"formData","schema":{"description":"命名空间。","type":"string","required":false,"example":"default"}}],"responses":{"200":{"schema":{"description":"响应体。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"31d3a0f0-07ed-4f6e-9004-1804498c****"},"ConfigPatches":{"description":"命名空间级别配置内容。","type":"object","properties":{"TerminationDrainDuration":{"description":"Sidecar代理终止等待时间。","type":"string","example":"6s"},"SidecarProxyInitResourceLimit":{"description":"Sidecar代理初始化容器资源限制。","type":"object","properties":{"ResourceCPULimit":{"description":"CPU资源限制。","type":"string","example":"2000 m"},"ResourceMemoryLimit":{"description":"内存资源限制。","type":"string","example":"50 Mi"}}},"SidecarProxyInitResourceRequest":{"description":"Sidecar代理初始化容器资源最低申请额度。","type":"object","properties":{"ResourceCPURequest":{"description":"CPU资源最低要求。","type":"string","example":"60 m"},"ResourceMemoryRequest":{"description":"内存资源最低要求。","type":"string","example":"30 Mi"}}},"SidecarProxyResourceLimit":{"description":"Sidecar代理容器资源限制。","type":"object","properties":{"ResourceCPULimit":{"description":"CPU资源限制。","type":"string","example":"2000 m"},"ResourceMemoryLimit":{"description":"内存资源限制。","type":"string","example":"50 Mi"}}},"SidecarProxyResourceRequest":{"description":"Sidecar代理容器资源最低申请额度。","type":"object","properties":{"ResourceCPURequest":{"description":"CPU资源最低要求。","type":"string","example":"60 m"},"ResourceMemoryRequest":{"description":"内存资源限制。","type":"string","example":"30 Mi"}}},"ExcludeOutboundPorts":{"description":"免于经过Sidecar代理的出口流量端口。","type":"string","example":"81"},"ExcludeOutboundIPRanges":{"description":"免于经过Sidecar代理的出口流量IP地址。","type":"string","example":"192.168.1.3/31"},"IncludeOutboundIPRanges":{"description":"经过Sidecar代理的出口流量IP地址。","type":"string","example":"192.168.1.4/31"},"ExcludeInboundPorts":{"description":"免于经过Sidecar代理的入口流量端口。","type":"string","example":"82"},"IncludeInboundPorts":{"description":"经过Sidecar代理的入口流量端口。","type":"string","example":"83"},"IncludeOutboundPorts":{"description":"经过Sidecar代理的出口流量端口。","type":"string","example":"84"},"IstioDNSProxyEnabled":{"description":"是否启用DNS代理功能，取值：\n\n- `true`：启用DNS代理功能。\n\n- `false`：不启用DNS代理功能。","type":"boolean","example":"true"},"LifecycleStr":{"description":"Sidecar代理生命周期JSON字符串。","type":"string","example":"{\"postStart\":{\"exec\":{\"command\":[\"pilot-agent\",\"wait\"]}},\"preStop\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"sleep 15\"]}}}"},"Concurrency":{"description":"istio-proxy并发度设置。","type":"integer","format":"int32","example":"2"},"LogLevel":{"description":"日志等级，取值：`info`、`debug`、`trace`、`error`。","type":"string","example":"info"},"HoldApplicationUntilProxyStarts":{"description":"应用程序启动前是否等待istio-proxy启动完成，取值：\n\n- `true`：应用程序启动前等待istio-proxy启动完成。\n\n- `false`：应用程序启动前不等待istio-proxy启动完成。","type":"boolean","example":"true"},"ProxyStatsMatcher":{"description":"用于Envoy监控统计的指标。","type":"object","properties":{"InclusionPrefixes":{"description":"Envoy监控统计的指标前缀列表。","type":"array","items":{"description":"Envoy监控统计的指标前缀。","type":"string","example":"server"}},"InclusionSuffixes":{"description":"Envoy监控统计的指标后缀列表。","type":"array","items":{"description":"Envoy监控统计的指标后缀。","type":"string","example":"cluster.outbound"}},"InclusionRegexps":{"description":"Envoy监控统计的指标正则表达式列表。","type":"array","items":{"description":"Envoy监控统计的指标正则表达式。","type":"string","example":"listener.*.downstream_cx_total"}}}},"Tracing":{"description":"自定义的链路追踪配置。","type":"object","properties":{"Sampling":{"description":"链路追踪的采样率。","type":"number","format":"double","example":"99.8"},"CustomTags":{"description":"链路追踪上报的自定义标签。其中键为自定义链路追踪标签的键，String类型；值为自定义链路追踪标签的取值，JSON对象类型，可以选择填入以下字段之一。\n\n - ` literal`：链路追踪标签值将取固定值，JSON对象类型，其中必须包含`value`字段，指定固定的字面量值，例如`{\"value\":\"test\"}`。\n    \n- `header`：链路追踪标签值将取指定的请求头，JSON对象类型，其中必须包含`name`字段和`defaultValue`字段，指定请求头的名称和取不到时的默认值，例如`{\"name\":\"test\",\"defaultValue\":\"test\"}`。\n\n- `environment`：链路追踪标签值将取指定的环境变量，JSON对象类型，其中必须包含`name`字段和`defaultValue`字段，指定环境变量的名称和取不到时的默认值，例如`{\"name\":\"test\",\"defaultValue\":\"test\"}`。","type":"object","example":"{\"test\":{\"literal\":{\"value\":\"test\"}}}"},"MaxPathTagLength":{"description":"链路追踪标签最大长度限制。","type":"integer","format":"int32","example":"10"}}},"InterceptionMode":{"description":"Sidecar对入向流量的拦截策略，取值如下：\n- `REDIRECT`：默认的拦截策略，Sidecar将使用重定向方式拦截入向流量。\n\n- ` TPROXY`：透明代理拦截策略，Sidecar将以透明代理的方式拦截入向流量。\n\n","type":"string","example":"TPROXY"},"ProxyMetadata":{"description":"在Sidecar代理中额外添加的环境变量，对象中的键和值分别代表添加至Sidecar代理环境变量的键和值。","type":"object","additionalProperties":{"type":"string","example":"\"true\"","description":"在Sidecar代理中额外添加的环境变量值。"}},"SidecarProxyInitAckSloResource":{"description":"Sidecar代理初始化容器资源设置（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器资源。","type":"object","properties":{"Requests":{"description":"Sidecar代理初始化容器资源最低申请额度设置（ACK动态超卖资源形式）。当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器资源最低申请额度。\n对象中可能包含两种键，对应两种类型的资源：\n\n- `kubernetes.io/batch-cpu`：ACK超卖类型CPU资源，单位为千分之一核。\n\n- `kubernetes.io/batch-memory`：ACK超卖类型内存资源。","type":"object","additionalProperties":{"type":"string","example":"128Mi","description":"Sidecar代理初始化容器资源最低申请额度值。"}},"Limits":{"description":"Sidecar代理初始化容器资源限制设置（ACK动态超卖资源形式）。当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理初始化容器资源限制。\n对象中可能包含两种键，对应两种类型的资源：\n- `kubernetes.io/batch-cpu`：ACK超卖类型CPU资源，单位为千分之一核。\n\n- `kubernetes.io/batch-memory`：ACK超卖类型内存资源。","type":"object","additionalProperties":{"type":"string","example":"2048Mi","description":"Sidecar代理初始化容器资源限制值。"}}}},"SidecarProxyAckSloResource":{"description":"Sidecar代理容器资源设置（ACK动态超卖资源形式），当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器资源。","type":"object","properties":{"Requests":{"description":"Sidecar代理容器资源最低申请额度设置（ACK动态超卖资源形式）。当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器资源最低申请额度。\n对象中可能包含两种键，对应两种类型的资源：\n\n- `kubernetes.io/batch-cpu`：ACK超卖类型CPU资源，单位为千分之一核。\n\n- `kubernetes.io/batch-memory`：ACK超卖类型内存资源。","type":"object","additionalProperties":{"type":"string","example":"128Mi","description":"Sidecar代理容器资源最低申请额度值。"}},"Limits":{"description":"Sidecar代理容器资源限制设置（ACK动态超卖资源形式）。当Pod带有ACK动态资源超卖标签`labelkoordinator.sh/qosClass`时，使用此值设定Sidecar代理容器资源限制。\n对象中可能包含两种键，对应两种类型的资源：\n\n- `kubernetes.io/batch-cpu`：ACK超卖类型CPU资源，单位为千分之一核。\n\n- `kubernetes.io/batch-memory`：ACK超卖类型内存资源。","type":"object","additionalProperties":{"type":"string","description":"Sidecar代理容器资源限制值。","example":"2048Mi"}}}},"Privileged":{"description":"是否在Sidecar代理容器的安全上下文中为Sidecar代理容器设定为特权，取值：\n\n- `true`：Sidecar代理容器具有特权。\n\n- `false`：Sidecar代理容器没有特权。","type":"boolean","example":"false"},"EnableCoreDump":{"description":"是否为Sidecar代理容器启用Core Dump（程序崩溃时转储内存状态），取值：\n\n- `true`：为Sidecar代理容器启用Core Dump。\n\n- `false`：不为Sidecar代理容器启用Core Dump。","type":"boolean","example":"false"},"ReadinessInitialDelaySeconds":{"description":"在开始进行Sidecar代理容器的就绪性检查前等待的时间（单位：秒）。","type":"integer","format":"int32","example":"2"},"ReadinessPeriodSeconds":{"description":"对Sidecar代理容器进行就绪性检查时，两次检查之间的时间间隔（单位：秒）。","type":"integer","format":"int32","example":"3"},"ReadinessFailureThreshold":{"description":"判断Sidecar代理容器不就绪时所需的就绪性检查失败次数阈值。","type":"integer","format":"int32","example":"5"},"SMCConfiguration":{"description":"SMC-R优化相关配置。","type":"object","properties":{"Enabled":{"description":"是否启用 SMC-R优化（ SMC-R可以优化跨节点通信性能，依赖Alibaba Cloud Linux 3以及节点 eRDMA 网络设备）","type":"boolean","example":"true"}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"31d3a0f0-07ed-4f6e-9004-1804498c****\\\",\\n  \\\"ConfigPatches\\\": {\\n    \\\"TerminationDrainDuration\\\": \\\"6s\\\",\\n    \\\"SidecarProxyInitResourceLimit\\\": {\\n      \\\"ResourceCPULimit\\\": \\\"2000 m\\\",\\n      \\\"ResourceMemoryLimit\\\": \\\"50 Mi\\\"\\n    },\\n    \\\"SidecarProxyInitResourceRequest\\\": {\\n      \\\"ResourceCPURequest\\\": \\\"60 m\\\",\\n      \\\"ResourceMemoryRequest\\\": \\\"30 Mi\\\"\\n    },\\n    \\\"SidecarProxyResourceLimit\\\": {\\n      \\\"ResourceCPULimit\\\": \\\"2000 m\\\",\\n      \\\"ResourceMemoryLimit\\\": \\\"50 Mi\\\"\\n    },\\n    \\\"SidecarProxyResourceRequest\\\": {\\n      \\\"ResourceCPURequest\\\": \\\"60 m\\\",\\n      \\\"ResourceMemoryRequest\\\": \\\"30 Mi\\\"\\n    },\\n    \\\"ExcludeOutboundPorts\\\": \\\"81\\\",\\n    \\\"ExcludeOutboundIPRanges\\\": \\\"192.168.1.3/31\\\",\\n    \\\"IncludeOutboundIPRanges\\\": \\\"192.168.1.4/31\\\",\\n    \\\"ExcludeInboundPorts\\\": \\\"82\\\",\\n    \\\"IncludeInboundPorts\\\": \\\"83\\\",\\n    \\\"IncludeOutboundPorts\\\": \\\"84\\\",\\n    \\\"IstioDNSProxyEnabled\\\": true,\\n    \\\"LifecycleStr\\\": \\\"{\\\\\\\"postStart\\\\\\\":{\\\\\\\"exec\\\\\\\":{\\\\\\\"command\\\\\\\":[\\\\\\\"pilot-agent\\\\\\\",\\\\\\\"wait\\\\\\\"]}},\\\\\\\"preStop\\\\\\\":{\\\\\\\"exec\\\\\\\":{\\\\\\\"command\\\\\\\":[\\\\\\\"/bin/sh\\\\\\\",\\\\\\\"-c\\\\\\\",\\\\\\\"sleep 15\\\\\\\"]}}}\\\",\\n    \\\"Concurrency\\\": 2,\\n    \\\"LogLevel\\\": \\\"info\\\",\\n    \\\"HoldApplicationUntilProxyStarts\\\": true,\\n    \\\"ProxyStatsMatcher\\\": {\\n      \\\"InclusionPrefixes\\\": [\\n        \\\"server\\\"\\n      ],\\n      \\\"InclusionSuffixes\\\": [\\n        \\\"cluster.outbound\\\"\\n      ],\\n      \\\"InclusionRegexps\\\": [\\n        \\\"listener.*.downstream_cx_total\\\"\\n      ]\\n    },\\n    \\\"Tracing\\\": {\\n      \\\"Sampling\\\": 99.8,\\n      \\\"CustomTags\\\": {\\n        \\\"test\\\": {\\n          \\\"literal\\\": {\\n            \\\"value\\\": \\\"test\\\"\\n          }\\n        }\\n      },\\n      \\\"MaxPathTagLength\\\": 10\\n    },\\n    \\\"InterceptionMode\\\": \\\"TPROXY\\\",\\n    \\\"ProxyMetadata\\\": {\\n      \\\"key\\\": \\\"\\\\\\\"true\\\\\\\"\\\"\\n    },\\n    \\\"SidecarProxyInitAckSloResource\\\": {\\n      \\\"Requests\\\": {\\n        \\\"key\\\": \\\"128Mi\\\"\\n      },\\n      \\\"Limits\\\": {\\n        \\\"key\\\": \\\"2048Mi\\\"\\n      }\\n    },\\n    \\\"SidecarProxyAckSloResource\\\": {\\n      \\\"Requests\\\": {\\n        \\\"key\\\": \\\"128Mi\\\"\\n      },\\n      \\\"Limits\\\": {\\n        \\\"key\\\": \\\"2048Mi\\\"\\n      }\\n    },\\n    \\\"Privileged\\\": false,\\n    \\\"EnableCoreDump\\\": false,\\n    \\\"ReadinessInitialDelaySeconds\\\": 2,\\n    \\\"ReadinessPeriodSeconds\\\": 3,\\n    \\\"ReadinessFailureThreshold\\\": 5,\\n    \\\"SMCConfiguration\\\": {\\n      \\\"Enabled\\\": true\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeNamespaceScopeSidecarConfigResponse>\\n    <RequestId>31d3a0f0-07ed-4f6e-9004-1804498c****</RequestId>\\n    <ConfigPatches>\\n        <TerminationDrainDuration>6s</TerminationDrainDuration>\\n        <SidecarProxyInitResourceLimit>\\n            <ResourceCPULimit>2000 m</ResourceCPULimit>\\n            <ResourceMemoryLimit>50 Mi</ResourceMemoryLimit>\\n        </SidecarProxyInitResourceLimit>\\n        <SidecarProxyInitResourceRequest>\\n            <ResourceCPURequest>60 m</ResourceCPURequest>\\n            <ResourceMemoryRequest>30 Mi</ResourceMemoryRequest>\\n        </SidecarProxyInitResourceRequest>\\n        <SidecarProxyResourceLimit>\\n            <ResourceCPULimit>2000 m</ResourceCPULimit>\\n            <ResourceMemoryLimit>50 Mi</ResourceMemoryLimit>\\n        </SidecarProxyResourceLimit>\\n        <SidecarProxyResourceRequest>\\n            <ResourceCPURequest>60 m</ResourceCPURequest>\\n            <ResourceMemoryRequest>30 Mi</ResourceMemoryRequest>\\n        </SidecarProxyResourceRequest>\\n        <ExcludeOutboundPorts>81</ExcludeOutboundPorts>\\n        <ExcludeOutboundIPRanges>192.168.1.3/31</ExcludeOutboundIPRanges>\\n        <IncludeOutboundIPRanges>192.168.1.4/31</IncludeOutboundIPRanges>\\n        <ExcludeInboundPorts>82</ExcludeInboundPorts>\\n        <IncludeInboundPorts>83</IncludeInboundPorts>\\n        <IncludeOutboundPorts>84</IncludeOutboundPorts>\\n        <IstioDNSProxyEnabled>true</IstioDNSProxyEnabled>\\n        <LifecycleStr>{\\\"postStart\\\":{\\\"exec\\\":{\\\"command\\\":[\\\"pilot-agent\\\",\\\"wait\\\"]}},\\\"preStop\\\":{\\\"exec\\\":{\\\"command\\\":[\\\"/bin/sh\\\",\\\"-c\\\",\\\"sleep 15\\\"]}}}</LifecycleStr>\\n        <Concurrency>2</Concurrency>\\n        <LogLevel>info</LogLevel>\\n        <HoldApplicationUntilProxyStarts>true</HoldApplicationUntilProxyStarts>\\n        <ProxyStatsMatcher>\\n            <InclusionPrefixes>server</InclusionPrefixes>\\n            <InclusionSuffixes>cluster.outbound</InclusionSuffixes>\\n            <InclusionRegexps>listener.*.downstream_cx_total</InclusionRegexps>\\n        </ProxyStatsMatcher>\\n        <Tracing>\\n            <Sampling>99.8</Sampling>\\n            <MaxPathTagLength>10</MaxPathTagLength>\\n        </Tracing>\\n        <InterceptionMode>TPROXY</InterceptionMode>\\n    </ConfigPatches>\\n</DescribeNamespaceScopeSidecarConfigResponse>\",\"errorExample\":\"\"}]","title":"查询Sidecar配置"}