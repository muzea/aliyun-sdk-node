{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"DBName","in":"query","schema":{"description":"目标数据库名称。","type":"string","required":true,"docRequired":true,"example":"testDB"}},{"name":"BackupMode","in":"query","schema":{"description":"迁移上云任务类型，取值：\n* **FULL**：通过全量备份文件去执行还原操作。\n* **UPDF**：通过增量文件或者日志文件去还原增量部分的数据。","type":"string","required":true,"docRequired":true,"example":"FULL","enum":["FULL","DIFF","UPDF","0","1","2"]}},{"name":"IsOnlineDB","in":"query","schema":{"description":"是否将还原后的数据库带上线，便于用户访问，取值：\n\n* **True**：将数据库带上线。\n* **False**：不将数据库带上线。\n\n>目前SQL Server 2008 R2版本该值恒定为**True**。","type":"string","required":true,"docRequired":true,"example":"True"}},{"name":"CheckDBMode","in":"query","schema":{"description":"打开数据库后一致性检查方法，取值：\n* **SyncExecuteDBCheck**：同步执行DB检查。\n* **AsyncExecuteDBCheck**：异步执行DB检查。\n\n默认值为**AsyncExecuteDBCheck**（兼容SQL Server 2008 R2）。\n> 当**IsOnlineDB**=**True**时，该值有效。","type":"string","required":false,"example":"AsyncExecuteDBCheck","default":"0"}},{"name":"OssObjectPositions","in":"query","schema":{"description":"OSS的组成部分。取值由3段组成，用英文冒号（:）分隔： \n* OSS Endpoint地址：oss-ap-southeast-1.aliyuncs.com。\n* OSS Bucket名字：rdsmssqlsingapore。\n* OSS上的备份文件Key：autotest_2008R2_TestMigration_FULL.bak。\n\n> * 该参数对于SQL Server 2008 R2版本实例是可选参数。\n> * 该参数对于SQL Server 2008 R2以上版本实例是必传参数。","type":"string","required":false,"example":"oss-ap-southeast-1.aliyuncs.com:rdsmssqlsingapore:autotest_2008R2_TestMigration_FULL.bak"}},{"name":"OSSUrls","in":"query","schema":{"description":"备份文件所在OSS共享URL地址（Encode编码后的URL）。\n\n有多个地址时，先使用“|”隔开，再编码后传入参数。\n\n> SQL Server 2008 R2必须传入该参数。","type":"string","required":false,"example":"check_cdn_oss.sh www.******.mobi "}},{"name":"MigrateTaskId","in":"query","schema":{"description":"迁移任务ID：\n\n* **BackupMode**=**FULL**时，该值为空。（兼容SQL Server 2008 R2）。\n* **BackupMode**=**UPDF**时，该值为对应FULL任务的ID。\n\n> * **IsOnlineDB**=**True**时，**BackupMode**必须取值为**FULL**。\n> * **IsOnlineDB**=**False**时，**BackupMode**必须为**UPDF**。","type":"string","required":false,"example":"无"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"866F5EB8-4650-4061-87F0-379F6F968BCE"},"DBName":{"description":"数据库名称。","type":"string","example":"test02"},"BackupMode":{"description":"迁移上云任务类型，取值为：\n* **FULL**：通过全量备份文件去执行还原操作。\n* **UPDF**：通过增量文件或者日志文件去还原增量部分的数据。\n","type":"string","example":"FULL"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"rm-uf6wjk5****"},"MigrateTaskId":{"description":"迁移任务ID。","type":"string","example":"564563****"},"TaskId":{"description":"任务ID。","type":"string","example":"545****"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidFile","errorMessage":"The operation does not support this kind of file"},{"errorCode":"InvalidInstanceType","errorMessage":"The DB instance type does not support this operation."},{"errorCode":"InvalidInstanceLockMode","errorMessage":"The DB instance lock mode does not support this operation."},{"errorCode":"InvalidDBName","errorMessage":"The instance does not have the specified DB name."},{"errorCode":"InvalidDBType","errorMessage":"The DB type does not support this operation."},{"errorCode":"InvalidDBState","errorMessage":"The DB state does not support this operation."},{"errorCode":"ExceedUploadTime","errorMessage":"Exceeding the daily upload times of this DB."},{"errorCode":"InvalidOSSURL","errorMessage":"The Specified OSS URL is not valid"},{"errorCode":"ExceedDiskSize","errorMessage":"The file size exceeding the disk size"},{"errorCode":"EntityNotExist.Role","errorMessage":"The role not exists"},{"errorCode":"DatabaseMustOnline","errorMessage":"Database must be taken online when task type is 0 or 1."},{"errorCode":"InvalideStatus","errorMessage":"Parent migrate task status is invalid."},{"errorCode":"InvalidOssObjectStorageClassType","errorMessage":"The specified OSS bucket storage type is invalid."},{"errorCode":"EngineNotSupported","errorMessage":"Engine specified cannot be supported the operation."},{"errorCode":"EngineVersionNotSupported","errorMessage":"EngineVersion specified cannot be replicate with the source DB Instance."},{"errorCode":"BakFileSizeExceeded","errorMessage":"Exceeding the allowed backup file size."},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."},{"errorCode":"InsufficientAvailableQuota","errorMessage":"Your account quota limit is less than 0, please recharge before trying to purchase."},{"errorCode":"CommodityServiceCalling.Exception","errorMessage":"Failed to call commodity service."},{"errorCode":"RegionDissolvedEOM","errorMessage":"Dear customer, Alibaba Cloud plans to optimize and adjust the current region. Cloud services in this region will cease operations. You are currently unable to operate new purchase orders. Thank you for your understanding and support."},{"errorCode":"Commodity.InvalidComponent","errorMessage":"The module you purchased is not legal, please buy it again."},{"errorCode":"RegionEndTimeDissolvedIndia","errorMessage":"Cloud services in the India (Mumbai) region will be discontinued. Set the validity date to July 15, 2024 or earlier than July 15, 2024."},{"errorCode":"RegionEndTimeDissolvedAustralia","errorMessage":"Cloud services in the Australia (Sydney) region will be discontinued. Set the validity date to September 30, 2024 or earlier than September 30, 2024."},{"errorCode":"Price.CommoditySys","errorMessage":"Commodity system call exception."},{"errorCode":"Pay.InsufficientBalance","errorMessage":"Insufficient available balance."},{"errorCode":"Order.PeriodInvalid","errorMessage":"There is a problem with the period you selected, please choose again."},{"errorCode":"pay.noCreditCard","errorMessage":"Account not bound to credit card."},{"errorCode":"Order.InstHasUnpaidOrder","errorMessage":"There is an unpaid order for the service you have purchased. Please pay or void it before placing the order."},{"errorCode":"noAvailablePaymentMethod","errorMessage":"No payment method is specified for your account. We recommend that you add a payment method."},{"errorCode":"BasicInfoUncompleted","errorMessage":"Your information is incomplete. Complete your information before the operation."},{"errorCode":"Risk.RiskControlRejection","errorMessage":"Your account is abnormal, please contact customer service for details."},{"errorCode":"Api.NotSupport","errorMessage":"Specified api is not supported."},{"errorCode":"ContainForbiddenLabelError","errorMessage":"There is a label that prohibits placing orders. Please contact your distributor for assistance."},{"errorCode":"InvalidDBInstanceId.NotFound","errorMessage":"The DBInstanceId provided does not exist in records."},{"errorCode":"InvalidInstanceLevel.DiskType","errorMessage":"Specified instance level not support request disk type"},{"errorCode":"InvalidParam","errorMessage":"Sepcified wal level Parameter is invalid. There are still logical slots in instance, so it can not be set as replica."},{"errorCode":"KmsApiError","errorMessage":"User secret key invalid."},{"errorCode":"System.SaleValidateFailed","errorMessage":"Sales expression validation system error."},{"errorCode":"Abs.InvalidAccount.NotFound","errorMessage":"account  is not found."}],"403":[{"errorCode":"InvalidInstanceState","errorMessage":"The DB instance state does not support this operation."},{"errorCode":"InvalidOssObjectPositions.Format","errorMessage":"The specified params OssObjectPositions is not valid."},{"errorCode":"OrderStatus.UnPaid","errorMessage":"The specified db instance has unpaid order."},{"errorCode":"InvalidReduceDiskSize","errorMessage":"The storage capacity after the scale-down must be larger than the used amount."},{"errorCode":"CloudSSDNotSupport","errorMessage":"Cloud ssd does not support this operation, please upgrade to essd."},{"errorCode":"InvalidUserOperatorPermission","errorMessage":"The user permission does not support this operation."},{"errorCode":"InvalidVswitchId","errorMessage":"Specified conn vswitch id is not valid."}],"404":[{"errorCode":"BakFilesNeeded","errorMessage":"Backup file does not supply."},{"errorCode":"InvalidClusterKms","errorMessage":"The current instance does not authorized to access the Key Management Service."}],"500":[{"errorCode":"ExternalFailure","errorMessage":"The request processing has failed due to external service failure."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"866F5EB8-4650-4061-87F0-379F6F968BCE\\\",\\n  \\\"DBName\\\": \\\"test02\\\",\\n  \\\"BackupMode\\\": \\\"FULL\\\",\\n  \\\"DBInstanceId\\\": \\\"rm-uf6wjk5****\\\",\\n  \\\"MigrateTaskId\\\": \\\"564563****\\\",\\n  \\\"TaskId\\\": \\\"545****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\\r\\n<CreateMigrateTaskResponse>\\r\\n\\t<MigrateTaskId>135847</MigrateTaskId>\\r\\n\\t<DBInstanceId>rm-bp178grbxxxxxxx</DBInstanceId>\\r\\n\\t<RequestId>5F2B3757-BD56-40B3-B5F2-FCDD9FA0E2E2</RequestId>\\r\\n\\t<BackupMode>UPDF</BackupMode>\\r\\n\\t<TaskId>128301751</TaskId>\\r\\n\\t<DBName>test02</DBName>\\r\\n</CreateMigrateTaskResponse>\\r\\n\\t\",\"errorExample\":\"\"}]","title":"创建上云迁移任务","summary":"该接口用于将OSS上的备份文件还原到RDS SQL Server实例，实现数据上云。","description":"### 适用引擎\nRDS SQL Server\n\n### 使用限制\n不支持跨阿里云账号迁移数据。例如，不支持将主账号A中OSS上的备份文件迁移至主账号B中的RDS SQL Server实例中。\n\n> 必要时，您可以先将源账号A下的OSS数据迁移到目标账号B下的OSS存储空间，确保OSS数据和RDS SQL Server实例在同一阿里云主账号下时，再使用本文接口创建迁移任务。相关操作，请参见[使用在线迁移服务跨账号迁移OSS数据](~~342762~~)。\n\n### 相关功能文档\n><notice>使用该接口前，请仔细阅读功能文档，确保完全了解使用接口的**前提条件**、**准备工作**及使用后造成的影响后，再进行操作。></notice>\n[SQL Server实例级别迁移上云](~~100019~~)","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}