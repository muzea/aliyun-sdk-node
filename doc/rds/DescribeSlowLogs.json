{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始日期，格式：<i>yyyy-MM-dd</i>Z（UTC时间）。\n","type":"string","required":true,"docRequired":true,"example":"2011-05-01Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束日期，不能小于查询开始日期，与查询开始日期间隔不超过31天。格式：<i>yyyy-MM-dd</i>Z（UTC时间）。\n\n> 当查询结束日期与查询开始日期相同时，默认从查询开始日期的08:00开始，最多查询24小时的慢日志统计情况。","type":"string","required":true,"docRequired":true,"example":"2011-05-30Z"}},{"name":"DBName","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"RDS_MySQL"}},{"name":"SortKey","in":"query","schema":{"description":"排序依据，取值：\n* **TotalExecutionCounts**：总执行次数最多\n* **TotalQueryTimes**：总执行时间最多\n* **TotalLogicalReads**：总逻辑读最多\n* **TotalPhysicalReads**：总物理读最多\n\n>仅SQL Server 2008 R2实例支持本参数。","type":"string","required":false,"example":"TotalExecutionCounts"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：**30**~**100**。默认值：**30**。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"30","example":"30","default":"30"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值：大于0且不超过Integer的最大值。\n\n默认值：**1**。","type":"integer","format":"int32","required":false,"maximum":"65535","minimum":"1","example":"1","default":"1"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"EndTime":{"description":"查询结束日期。","type":"string","example":"2011-05-30Z"},"StartTime":{"description":"查询开始日期。","type":"string","example":"2011-05-01Z"},"RequestId":{"description":"请求ID。","type":"string","example":"2553A660-E4EB-4AF4-A402-8AFF70A49143"},"PageRecordCount":{"description":"本页SQL语句个数。","type":"integer","format":"int32","example":"10"},"TotalRecordCount":{"description":"总记录数。","type":"integer","format":"int32","example":"5"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"rm-uf6wjk5****"},"PageNumber":{"description":"页码。","type":"integer","format":"int32","example":"1"},"Engine":{"description":"数据库类型。","type":"string","example":"MySQL"},"Items":{"type":"object","properties":{"SQLSlowLog":{"description":"慢日志信息列表。","type":"array","items":{"description":"慢日志信息详情。","type":"object","properties":{"MaxLastRowsAffectedCounts":{"description":"最后一次受影响的行数（最大值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"ReturnMaxRowCount":{"description":"返回的SQL行数（最大值）。","type":"integer","format":"int64","example":"1"},"SQLText":{"description":"SQL语句。","type":"string","example":"select id,name from tb_table"},"SQLServerMaxCpuTime":{"description":"CPU查询时间（最大值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"CreateTime":{"description":"数据生成日期。","type":"string","example":"2011-05-30Z"},"AvgLastRowsAffectedCounts":{"description":"最后一次受影响的行数（平均值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MinLastRowsAffectedCounts":{"description":"最后一次受影响的行数（最小值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"ParseTotalRowCounts":{"description":"解析的SQL行数（总值）。","type":"integer","format":"int64","example":"1"},"TotalLockTimes":{"description":"锁定时长（总值），单位：秒。","type":"integer","format":"int64","example":"0"},"MySQLTotalExecutionCounts":{"description":"MySQL执行次数（总值）。","type":"integer","format":"int64","example":"1"},"SQLServerMinCpuTime":{"description":"CPU查询时间（最小值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SQLHASH":{"description":"慢日志统计里的SQL语句唯一标识符，可用于获取该SQL语句的慢日志明细。","type":"string","example":"U2FsdGVk****"},"MinIOWriteCounts":{"description":"I/O写次数（最小值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"ParseMaxRowCount":{"description":"解析的SQL行数（最大值）。","type":"integer","format":"int64","example":"1"},"MaxLogicalReadCounts":{"description":"逻辑读次数（最大值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MySQLTotalExecutionTimes":{"description":"MySQL执行时长（总值），单位：秒。","type":"integer","format":"int64","example":"1"},"SQLServerTotalExecutionCounts":{"description":"SQL Server执行次数（总值）。","type":"integer","format":"int64","example":"1"},"ReturnTotalRowCounts":{"description":"返回的SQL行数（总值）。","type":"integer","format":"int64","example":"1"},"MaxLockTime":{"description":"锁定时长（最大值），单位：秒。","type":"integer","format":"int64","example":"0"},"MaxLockTimeMS":{"description":"锁定时长（最大值），单位：毫秒。","type":"integer","format":"int64","example":"1000"},"DBName":{"description":"数据库名称。","type":"string","example":"RDS_MySQL"},"MinRowsAffectedCounts":{"description":"受影响的行数（最小值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"TotalLogicalReadCounts":{"description":"逻辑读次数（总值）。","type":"integer","format":"int64","example":"1"},"TotalPhysicalReadCounts":{"description":"物理读次数（总值）。","type":"integer","format":"int64","example":"1"},"ReportTime":{"description":"数据报表生成日期。","type":"string","example":"2011-05-30Z"},"MaxPhysicalReadCounts":{"description":"物理读次数（最大值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SQLServerTotalCpuTime":{"description":"CPU查询时间（总值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"TotalIOWriteCounts":{"description":"I/O写次数（总值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MaxRowsAffectedCounts":{"description":"受影响的行数（最大值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"AvgIOWriteCounts":{"description":"I/O写次数（平均值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MinPhysicalReadCounts":{"description":"物理读次数（最小值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SlowLogId":{"description":"慢查询汇总标识ID。","type":"integer","format":"int64","example":"26584213"},"MaxExecutionTime":{"description":"执行时长（最大值），单位：秒。","type":"integer","format":"int64","example":"60"},"MaxExecutionTimeMS":{"description":"执行时长（最大值），单位：毫秒。","type":"integer","format":"int64","example":"60000"},"AvgExecutionTime":{"description":"执行时间（平均值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"1"},"SQLServerAvgExecutionTime":{"description":"执行时间（平均值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MaxIOWriteCounts":{"description":"I/O写次数（最大值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SQLServerAvgCpuTime":{"description":"CPU查询时间（平均值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"TotalLastRowsAffectedCounts":{"description":"最后一次受影响的行数（总值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"AvgLogicalReadCounts":{"description":"逻辑读次数（平均值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SQLServerMinExecutionTime":{"description":"执行时间（最小值），单位：秒。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"SQLIdStr":{"description":"对应的是慢日志统计模版SQL的ID，现已废弃，请使用**SQLHASH**。","type":"string","example":"521584"},"SQLServerTotalExecutionTimes":{"description":"SQL Server执行时长（总值），单位：毫秒。","type":"integer","format":"int64","example":"1000"},"AvgRowsAffectedCounts":{"description":"受影响的行数（平均值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"TotalRowsAffectedCounts":{"description":"影响的行数（总值）。","type":"integer","format":"int64","example":"0"},"AvgPhysicalReadCounts":{"description":"物理读次数（平均值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"},"MinLogicalReadCounts":{"description":"逻辑读次数（最小值）。\n>仅SQL Server实例支持返回该参数。","type":"integer","format":"int64","example":"0"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidSearchTimeRange","errorMessage":"search time range cannot be longer than a month."},{"errorCode":"IO.Exception","errorMessage":"IO exception, retry later."},{"errorCode":"SortKey.ValueNotSupported","errorMessage":"SortKey.ValueNotSupported"},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"EndTime\\\": \\\"2011-05-30Z\\\",\\n  \\\"StartTime\\\": \\\"2011-05-01Z\\\",\\n  \\\"RequestId\\\": \\\"2553A660-E4EB-4AF4-A402-8AFF70A49143\\\",\\n  \\\"PageRecordCount\\\": 10,\\n  \\\"TotalRecordCount\\\": 5,\\n  \\\"DBInstanceId\\\": \\\"rm-uf6wjk5****\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"Engine\\\": \\\"MySQL\\\",\\n  \\\"Items\\\": {\\n    \\\"SQLSlowLog\\\": [\\n      {\\n        \\\"MaxLastRowsAffectedCounts\\\": 0,\\n        \\\"ReturnMaxRowCount\\\": 1,\\n        \\\"SQLText\\\": \\\"select id,name from tb_table\\\",\\n        \\\"SQLServerMaxCpuTime\\\": 0,\\n        \\\"CreateTime\\\": \\\"2011-05-30Z\\\",\\n        \\\"AvgLastRowsAffectedCounts\\\": 0,\\n        \\\"MinLastRowsAffectedCounts\\\": 0,\\n        \\\"ParseTotalRowCounts\\\": 1,\\n        \\\"TotalLockTimes\\\": 0,\\n        \\\"MySQLTotalExecutionCounts\\\": 1,\\n        \\\"SQLServerMinCpuTime\\\": 0,\\n        \\\"SQLHASH\\\": \\\"U2FsdGVk****\\\",\\n        \\\"MinIOWriteCounts\\\": 0,\\n        \\\"ParseMaxRowCount\\\": 1,\\n        \\\"MaxLogicalReadCounts\\\": 0,\\n        \\\"MySQLTotalExecutionTimes\\\": 1,\\n        \\\"SQLServerTotalExecutionCounts\\\": 1,\\n        \\\"ReturnTotalRowCounts\\\": 1,\\n        \\\"MaxLockTime\\\": 0,\\n        \\\"MaxLockTimeMS\\\": 1000,\\n        \\\"DBName\\\": \\\"RDS_MySQL\\\",\\n        \\\"MinRowsAffectedCounts\\\": 0,\\n        \\\"TotalLogicalReadCounts\\\": 1,\\n        \\\"TotalPhysicalReadCounts\\\": 1,\\n        \\\"ReportTime\\\": \\\"2011-05-30Z\\\",\\n        \\\"MaxPhysicalReadCounts\\\": 0,\\n        \\\"SQLServerTotalCpuTime\\\": 0,\\n        \\\"TotalIOWriteCounts\\\": 0,\\n        \\\"MaxRowsAffectedCounts\\\": 0,\\n        \\\"AvgIOWriteCounts\\\": 0,\\n        \\\"MinPhysicalReadCounts\\\": 0,\\n        \\\"SlowLogId\\\": 26584213,\\n        \\\"MaxExecutionTime\\\": 60,\\n        \\\"MaxExecutionTimeMS\\\": 60000,\\n        \\\"AvgExecutionTime\\\": 1,\\n        \\\"SQLServerAvgExecutionTime\\\": 0,\\n        \\\"MaxIOWriteCounts\\\": 0,\\n        \\\"SQLServerAvgCpuTime\\\": 0,\\n        \\\"TotalLastRowsAffectedCounts\\\": 0,\\n        \\\"AvgLogicalReadCounts\\\": 0,\\n        \\\"SQLServerMinExecutionTime\\\": 0,\\n        \\\"SQLIdStr\\\": \\\"521584\\\",\\n        \\\"SQLServerTotalExecutionTimes\\\": 1000,\\n        \\\"AvgRowsAffectedCounts\\\": 0,\\n        \\\"TotalRowsAffectedCounts\\\": 0,\\n        \\\"AvgPhysicalReadCounts\\\": 0,\\n        \\\"MinLogicalReadCounts\\\": 0\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSlowLogsResponse>\\n    <EndTime>2011-05-30Z</EndTime>\\n    <StartTime>2011-05-30Z</StartTime>\\n    <RequestId>2553A660-E4EB-4AF4-A402-8AFF70A49143</RequestId>\\n    <PageRecordCount>10</PageRecordCount>\\n    <TotalRecordCount>5</TotalRecordCount>\\n    <DBInstanceId>rm-uf6wjk5xxxxxxx</DBInstanceId>\\n    <PageNumber>1</PageNumber>\\n    <Engine>MySQL</Engine>\\n    <Items>\\n        <MaxLastRowsAffectedCounts>0</MaxLastRowsAffectedCounts>\\n        <ReturnMaxRowCount>1</ReturnMaxRowCount>\\n        <SQLText>select id,name from tb_table</SQLText>\\n        <SQLServerMaxCpuTime>0</SQLServerMaxCpuTime>\\n        <CreateTime>2011-05-30Z</CreateTime>\\n        <AvgLastRowsAffectedCounts>0</AvgLastRowsAffectedCounts>\\n        <MinLastRowsAffectedCounts>0</MinLastRowsAffectedCounts>\\n        <ParseTotalRowCounts>1</ParseTotalRowCounts>\\n        <TotalLockTimes>0</TotalLockTimes>\\n        <MySQLTotalExecutionCounts>1</MySQLTotalExecutionCounts>\\n        <SQLServerMinCpuTime>0</SQLServerMinCpuTime>\\n        <SQLHASH>U2FsdGVkxxxx</SQLHASH>\\n        <MinIOWriteCounts>0</MinIOWriteCounts>\\n        <ParseMaxRowCount>1</ParseMaxRowCount>\\n        <MaxLogicalReadCounts>0</MaxLogicalReadCounts>\\n        <MySQLTotalExecutionTimes>1</MySQLTotalExecutionTimes>\\n        <SQLServerTotalExecutionCounts>1</SQLServerTotalExecutionCounts>\\n        <ReturnTotalRowCounts>1</ReturnTotalRowCounts>\\n        <MaxLockTime>0</MaxLockTime>\\n        <DBName>RDS_MySQL</DBName>\\n        <MinRowsAffectedCounts>0</MinRowsAffectedCounts>\\n        <TotalLogicalReadCounts>1</TotalLogicalReadCounts>\\n        <TotalPhysicalReadCounts>1</TotalPhysicalReadCounts>\\n        <ReportTime>2011-05-30Z</ReportTime>\\n        <MaxPhysicalReadCounts>0</MaxPhysicalReadCounts>\\n        <SQLServerTotalCpuTime>0</SQLServerTotalCpuTime>\\n        <TotalIOWriteCounts>0</TotalIOWriteCounts>\\n        <MaxRowsAffectedCounts>0</MaxRowsAffectedCounts>\\n        <AvgIOWriteCounts>0</AvgIOWriteCounts>\\n        <MinPhysicalReadCounts>0</MinPhysicalReadCounts>\\n        <SlowLogId>26584213</SlowLogId>\\n        <MaxExecutionTime>60</MaxExecutionTime>\\n        <AvgExecutionTime>1</AvgExecutionTime>\\n        <SQLServerAvgExecutionTime>0</SQLServerAvgExecutionTime>\\n        <MaxIOWriteCounts>0</MaxIOWriteCounts>\\n        <SQLServerAvgCpuTime>0</SQLServerAvgCpuTime>\\n        <TotalLastRowsAffectedCounts>0</TotalLastRowsAffectedCounts>\\n        <AvgLogicalReadCounts>0</AvgLogicalReadCounts>\\n        <SQLServerMinExecutionTime>0</SQLServerMinExecutionTime>\\n        <SQLIdStr>521584</SQLIdStr>\\n        <SQLServerTotalExecutionTimes>1000</SQLServerTotalExecutionTimes>\\n        <AvgRowsAffectedCounts>0</AvgRowsAffectedCounts>\\n        <TotalRowsAffectedCounts>0</TotalRowsAffectedCounts>\\n        <AvgPhysicalReadCounts>0</AvgPhysicalReadCounts>\\n        <MinLogicalReadCounts>0</MinLogicalReadCounts>\\n    </Items>\\n</DescribeSlowLogsResponse>\",\"errorExample\":\"\"}]","title":"查看慢日志统计情况","summary":"该接口用于查询慢日志统计情况。","description":"### 适用引擎\n\n- RDS MySQL\n  > MySQL 5.7基础版暂不支持。\n- RDS SQL Server\n  > 仅支持SQL Server 2008 R2版本。\n- RDS MariaDB\n\n### 注意事项\n- 慢日志统计非实时采集，可能会有6~8小时的延迟。\n- 如果返回结果为空，请检查StartTime和EndTime配置是否符合UTC格式要求，如果满足，则表示该时间段内无慢日志。\n- 2023年12月13日起，由于慢SQL的模板化算法优化，调用本接口时，**SQLHash**字段的值将发生变更。详情请参见[【通知】慢SQL的模板化算法优化](~~2637024~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}