{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"用于保证请求的幂等性，防止重复提交请求。由客户端生成该参数值，要保证在不同请求间唯一，最大值不超过64个ASCII字符，且该参数值中不能包含非ASCII字符。","type":"string","required":false,"example":"ETnLKlblzczshOTUbOCz****"}},{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"SQLId","in":"query","schema":{"description":"备用参数。","type":"integer","format":"int64","required":false,"example":"None"}},{"name":"QueryKeywords","in":"query","schema":{"description":"用于查询的关键字。\n\n- 通过API生成审计文件时（请求参数**Form**取值为**File**），不支持通过关键字筛选。\n\n- 多个关键字以空格分隔，不超过10个关键字；各个关键字之间的逻辑关系为**and**。\n\n- 如果SQL语句中的字段名使用了反引号（\\`），以该字段名作为查询的关键字时，也需要输入反引号。例如，字段名为\\`id\\`，则输入\\`id\\`，而不是id。\n\n> 输入关键字后，系统会以**Database**、**User**和**QueryKeywords**同时进行关键字匹配，三个请求参数之间的逻辑关系为**or**。","type":"string","required":false,"example":"table_name"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，可查询当前日期7天内的数据。格式：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n>当开通了DAS企业版 V3，使用其提供的SQL洞察和审计功能时，可查询数据热存储时长内的数据。通过[DescribeSqlLogConfig](~~2778837~~)可以查询开通的企业版信息。","type":"string","required":true,"docRequired":true,"example":"2011-06-01T15:00:00Z"}},{"name":"Database","in":"query","schema":{"description":"数据库名称。默认为所有数据库，也可以输入数据库名称查询，一次只能输入一个。","type":"string","required":false,"example":"Database"}},{"name":"User","in":"query","schema":{"description":"用户名称。默认为所有用户，也可以输入用户名称查询，一次只能输入一个。","type":"string","required":false,"example":"user"}},{"name":"Form","in":"query","schema":{"description":"触发审计文件的生成或者返回SQL记录列表，取值：\n* **File**：若传入这个值，则触发审计文件的生成，只返回公共参数，需再调用DescribeSQLLogFiles接口获取文件的最终下载地址。\n* **Stream**：默认值，返回SQL记录列表。\n\n> 取值为**File**时，只支持MySQL（本地盘）和SQL Server实例，且最多记录100万条日志。","type":"string","required":false,"example":"Stream","default":"Stream"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，大于查询开始时间，与查询开始时间间隔小于等于7天。格式：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n>当开通了DAS企业版 V3，使用其提供的SQL洞察和审计功能时，可查询数据热存储时长内的数据。通过[DescribeSqlLogConfig](~~2778837~~)可以查询开通的企业版信息。","type":"string","required":true,"docRequired":true,"example":"2011-06-11T15:00:00Z"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：**30**~**100**。默认值：**30**。","type":"integer","format":"int32","required":false,"maximum":"200","minimum":"30","example":"30","default":"100"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值：大于0且不超过Integer的最大值。\n\n默认值：**1**。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1","default":"1"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"08A3B71B-FE08-4B03-974F-CC7EA6DB1828"},"PageNumber":{"description":"页码。","type":"integer","format":"int32","example":"1"},"PageRecordCount":{"description":"本页SQL审计日志个数。","type":"integer","format":"int32","example":"30"},"TotalRecordCount":{"description":"总记录数。","type":"integer","format":"int64","example":"100"},"Items":{"type":"object","properties":{"SQLRecord":{"description":"SQL审计日志列表。","type":"array","items":{"description":"SQL审计日志详情。","type":"object","properties":{"HostAddress":{"description":"连接数据库的客户端IP地址。","type":"string","example":"192.168.XX.XX"},"SQLText":{"description":"SQL语句。","type":"string","example":"update test.zxb set id=0 limit 1"},"ReturnRowCounts":{"description":"返回记录数。","type":"integer","format":"int64","example":"30"},"DBName":{"description":"数据库名称。","type":"string","example":"testDB"},"ExecuteTime":{"description":"执行时间。格式：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2011-06-11T15:00:23Z"},"ThreadID":{"description":"线程ID。","type":"string","example":"1025865428"},"TotalExecutionTimes":{"description":"执行耗时，单位：微秒。","type":"integer","format":"int64","example":"600"},"AccountName":{"description":"执行操作的账号名称。","type":"string","example":"accounttest"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidDBInstanceId.NotFound","errorMessage":"The DBInstanceId provided does not exist in records."},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."},{"errorCode":"InsufficientAvailableQuota","errorMessage":"Your account quota limit is less than 0, please recharge before trying to purchase."},{"errorCode":"CommodityServiceCalling.Exception","errorMessage":"Failed to call commodity service."},{"errorCode":"RegionDissolvedEOM","errorMessage":"Dear customer, Alibaba Cloud plans to optimize and adjust the current region. Cloud services in this region will cease operations. You are currently unable to operate new purchase orders. Thank you for your understanding and support."},{"errorCode":"Commodity.InvalidComponent","errorMessage":"The module you purchased is not legal, please buy it again."},{"errorCode":"RegionEndTimeDissolvedIndia","errorMessage":"Cloud services in the India (Mumbai) region will be discontinued. Set the validity date to July 15, 2024 or earlier than July 15, 2024."},{"errorCode":"RegionEndTimeDissolvedAustralia","errorMessage":"Cloud services in the Australia (Sydney) region will be discontinued. Set the validity date to September 30, 2024 or earlier than September 30, 2024."},{"errorCode":"Price.CommoditySys","errorMessage":"Commodity system call exception."},{"errorCode":"Pay.InsufficientBalance","errorMessage":"Insufficient available balance."},{"errorCode":"Order.PeriodInvalid","errorMessage":"There is a problem with the period you selected, please choose again."},{"errorCode":"pay.noCreditCard","errorMessage":"Account not bound to credit card."},{"errorCode":"Order.InstHasUnpaidOrder","errorMessage":"There is an unpaid order for the service you have purchased. Please pay or void it before placing the order."},{"errorCode":"noAvailablePaymentMethod","errorMessage":"No payment method is specified for your account. We recommend that you add a payment method."},{"errorCode":"BasicInfoUncompleted","errorMessage":"Your information is incomplete. Complete your information before the operation."},{"errorCode":"Risk.RiskControlRejection","errorMessage":"Your account is abnormal, please contact customer service for details."},{"errorCode":"System.SaleValidateFailed","errorMessage":"Sales expression validation system error."},{"errorCode":"ContainForbiddenLabelError","errorMessage":"There is a label that prohibits placing orders. Please contact your distributor for assistance."}],"403":[{"errorCode":"OrderStatus.UnPaid","errorMessage":"The specified db instance has unpaid order."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"08A3B71B-FE08-4B03-974F-CC7EA6DB1828\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageRecordCount\\\": 30,\\n  \\\"TotalRecordCount\\\": 100,\\n  \\\"Items\\\": {\\n    \\\"SQLRecord\\\": [\\n      {\\n        \\\"HostAddress\\\": \\\"192.168.XX.XX\\\",\\n        \\\"SQLText\\\": \\\"update test.zxb set id=0 limit 1\\\",\\n        \\\"ReturnRowCounts\\\": 30,\\n        \\\"DBName\\\": \\\"testDB\\\",\\n        \\\"ExecuteTime\\\": \\\"2011-06-11T15:00:23Z\\\",\\n        \\\"ThreadID\\\": \\\"1025865428\\\",\\n        \\\"TotalExecutionTimes\\\": 600,\\n        \\\"AccountName\\\": \\\"accounttest\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"7463B73D-35CC-4D19-A010-6B8D65D242EF\\\",\\n    \\\"HostId\\\": \\\"rds.aliyuncs.com\\\",\\n    \\\"Code\\\": \\\"UnsupportedOperation\\\",\\n    \\\"Message\\\": \\\"The specified action is not supported.\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\\n<DescribeSQLLogRecordsResponse>\\n\\t<PageNumber>1</PageNumber>\\n\\t<TotalRecordCounts>1</TotalRecordCounts>\\n\\t<ItemsCounts>1</ItemsCounts>\\n\\t<SQLItems>\\n\\t\\t<SQLItem>\\n\\t\\t\\t<DBName>test</DBName>\\n\\t\\t\\t<AccountName>accounttest</AccountName>\\n\\t\\t\\t<HostAddress>192.168.0.121</HostAddress>\\n\\t\\t\\t<SQLText>update test.zxb set id=0 limit 1</SQLText>\\n\\t\\t\\t<TotalExecutionTimes>12</TotalExecutionTimes>\\n\\t\\t\\t<ReturnRowCounts>34</ReturnRowCounts>\\n\\t\\t\\t<ExecuteTime>2011-06-11T15:00:23Z</ExecuteTime>\\n\\t\\t</SQLItem>\\n\\t</SQLItems>\\n\\t<RequestId>08A3B71B-FE08-4B03-974F-CC7EA6DB1828</RequestId>\\n</DescribeSQLLogRecordsResponse>\\n\\t\\n\",\"errorExample\":\"\"}]","title":"查询实例的SQL审计日志","summary":"该接口用于查询RDS实例的SQL洞察（SQL审计）日志。","description":"### 适用引擎\n\n- RDS MySQL\n- RDS PostgreSQL\n- RDS SQL Server\n\n### 注意事项\n- 本API无论调用成功或失败，单用户（主账号包括RAM账号）每分钟最多调用1000次。\n- 本API不支持查询MySQL实例SQL洞察试用版的SQL洞察日志。\n- 本API生成审计文件时（请求参数**Form**取值为**File**），最多记录100万条日志，且不支持通过关键字筛选日志。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}