{"summary":"该接口用于查询RDS PostgreSQL迁移上云任务详情。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceName","in":"query","schema":{"description":"目标实例ID。可调用DescribeDBInstances接口查询。","type":"string","required":true,"docRequired":true,"example":"pgm-bp102g323jd4****"}},{"name":"TaskId","in":"query","schema":{"description":"任务ID。调用CreateCloudMigrationTask接口创建RDS PostgreSQL迁移上云任务时响应消息中获取。","type":"integer","format":"int64","required":false,"example":"440437220"}},{"name":"TaskName","in":"query","schema":{"description":"任务名称。调用CreateCloudMigrationTask接口创建RDS PostgreSQL迁移上云任务时响应消息中获取。","type":"string","required":false,"example":"362c6c7a-4d20-4eac-898c-1495ceab374c"}},{"name":"SourceIpAddress","in":"query","schema":{"description":"自建PostgreSQL数据库的内网IP。\n\n- ECS自建PostgreSQL数据库一键上云场景，配置ECS实例的私网IP。获取方法请参见[查看IP地址](~~273914~~)。\n- IDC自建PostgreSQL数据库一键上云场景，配置为IDC的内网IP。","type":"string","required":false,"example":"172.16.XX.XX"}},{"name":"SourcePort","in":"query","schema":{"description":"自建PostgreSQL数据库的端口。可通过netstat -a | grep PGSQL命令查看。","type":"integer","format":"int64","required":false,"example":"5432"}},{"name":"PageNumber","in":"query","schema":{"description":"页数。","type":"integer","format":"int64","required":true,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页最大记录数。","type":"integer","format":"int64","required":true,"example":"10"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"TotalSize":{"description":"查询结果统计。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"1B983C48-9793-5EAA-8F7F-00EAEC517675"},"Items":{"description":"迁移上云任务信息列表。","type":"array","items":{"description":"迁移上云任务信息详情。","type":"object","properties":{"GmtCreated":{"description":"任务创建时间。","type":"string","example":"2022-02-25T08:53:13Z"},"GmtModified":{"description":"任务修改时间。","type":"string","example":"2022-03-01T06:39:51Z"},"TaskId":{"description":"任务ID。","type":"integer","format":"int64","example":"440437220"},"TaskName":{"description":"任务名称。","type":"string","example":"362c6c7a-4d20-4eac-898c-1495ceab374c"},"MigrateStage":{"description":"迁移阶段。\n\n- **precheck**：预检查\n- **basebackup**：全量备份\n- **startup**：链路搭建\n- **increment**：增量同步\n- **switch**：上云切换\n- **success**：上云完成","type":"string","example":"switch"},"SourceCategory":{"description":"自建PostgreSQL的类型。\n\n- **idcOnVpc**：线下IDC自建PostgreSQL（IDC与VPC打通）\n- **ecsOnVpc**：阿里云ECS自建PostgreSQL","type":"string","example":"ecsonvpc"},"SourceIpAddress":{"description":"自建PostgreSQL数据库的内网IP。","type":"string","example":"172.16.XX.XX"},"SourcePort":{"description":"自建PostgreSQL数据库的端口。","type":"integer","format":"int64","example":"5432"},"SourceAccount":{"description":"用户名。","type":"string","example":"migratetest"},"SourcePassword":{"description":"密码。","type":"string","example":"123456"},"TargetEip":{"description":"预留参数，查询结果为空。","type":"string","example":"null"},"TargetInstanceName":{"description":"目标实例ID。","type":"string","example":"pgm-bp102g323jd4****"},"ReplicationState":{"description":"复制状态。\n\n- **unstarted**：未启动\n- **catchup**：追平中\n- **streaming**：流式传输\n- **disconnect**：断开连接\n- **finish**：完成","type":"string","example":"streaming"},"ReplicationInfo":{"description":"复制链路信息。","type":"string","example":"{\\\"Status\\\":\\\"streaming\\\",\\\"ReceiveStartLsn\\\":\\\"0/3000000\\\",\\\"ReceivedTli\\\":\\\"1\\\",\\\"LatestEndTime\\\":\\\"2022-02-25 17:03:59.3344+08\\\",\\\"Synced\\\":\\\"true\\\",\\\"IsSlave\\\":\\\"true\\\",\\\"ReplayTimestamp\\\":\\\"null\\\",\\\"LastMsgSendTime\\\":\\\"2022-03-01 14:42:57.967537+08\\\",\\\"Conninfo\\\":\\\"user=migratetest password=******** channel_binding=prefer dbname=replication host=172.16.254.203 port=5432 application_name=rds_db_instance fallback_application_name=walreceiver sslmode=prefer sslcompression=1 sslsni=1 ssl_min_protocol_version=TLSv1.2 gssencmode=prefer krbsrvname=postgres target_session_attrs=any\\\",\\\"LastMsgReceiptTime\\\":\\\"2022-03-01 14:42:57.96727+08\\\",\\\"LatestEndLsn\\\":\\\"0/3000148\\\",\\\"ReceivedLsn\\\":\\\"0/3000148\\\",\\\"ReplayLsn\\\":\\\"0/3000148\\\",\\\"ReceiveStartTli\\\":\\\"1\\\",\\\"ReplayLag\\\":\\\"0\\\"}"},"Detail":{"description":"迁移详情。","type":"string","example":"[Check rds empty]\\nCheck rds databases: success\\n[Check source connectivity]\\nCheck ip connectable: success\\nCheck port connectable: success\\nCheck database connectable: success\\nCheck account replication privilege: success\\nCheck account createrole privilege: success\\nCheck account monitor privilege: success\\n[Check source version]\\nCheck major version consistent: success\\n[Check source glibc version]\\nCheck source glibc version compatible: warning(warning:source glibc version is not compatible with rds pg)\\n[Check disk size]\\nCheck disk size enough: success\\n[Check wal keep size]\\nCheck wal keep size large enough: success\\n[Check spec params]\\nCheck if spec params too large: success\\n[Start RDS instance]\\n2022-02-25 17:00:29 --- Start RDS instance as slave for data replication\\n[Synchronize data]\\n2022-02-25 17:01:05 --- Synchronize data from source to RDS by streaming replication \\n"},"SwitchTime":{"description":"切换时间。","type":"string","example":"2022-03-01T06:40:51Z"}}}},"PageNumber":{"description":"页数。","type":"integer","format":"int64","example":"1"},"PageSize":{"description":"每页最大记录数。","type":"integer","format":"int64","example":"10"}}}}},"errorCodes":{"400":[{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."}],"404":[{"errorCode":"InvalidDBInstanceName.NotFound","errorMessage":"The database instance does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TotalSize\\\": 1,\\n  \\\"RequestId\\\": \\\"1B983C48-9793-5EAA-8F7F-00EAEC517675\\\",\\n  \\\"Items\\\": [\\n    {\\n      \\\"GmtCreated\\\": \\\"2022-02-25T08:53:13Z\\\",\\n      \\\"GmtModified\\\": \\\"2022-03-01T06:39:51Z\\\",\\n      \\\"TaskId\\\": 440437220,\\n      \\\"TaskName\\\": \\\"362c6c7a-4d20-4eac-898c-1495ceab374c\\\",\\n      \\\"MigrateStage\\\": \\\"switch\\\",\\n      \\\"SourceCategory\\\": \\\"ecsonvpc\\\",\\n      \\\"SourceIpAddress\\\": \\\"172.16.XX.XX\\\",\\n      \\\"SourcePort\\\": 5432,\\n      \\\"SourceAccount\\\": \\\"migratetest\\\",\\n      \\\"SourcePassword\\\": \\\"123456\\\",\\n      \\\"TargetEip\\\": \\\"null\\\",\\n      \\\"TargetInstanceName\\\": \\\"pgm-bp102g323jd4****\\\",\\n      \\\"ReplicationState\\\": \\\"streaming\\\",\\n      \\\"ReplicationInfo\\\": \\\"{\\\\\\\\\\\\\\\"Status\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"streaming\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReceiveStartLsn\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0/3000000\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReceivedTli\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"1\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"LatestEndTime\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"2022-02-25 17:03:59.3344+08\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Synced\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"true\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"IsSlave\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"true\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReplayTimestamp\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"null\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"LastMsgSendTime\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"2022-03-01 14:42:57.967537+08\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Conninfo\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"user=migratetest password=******** channel_binding=prefer dbname=replication host=172.16.254.203 port=5432 application_name=rds_db_instance fallback_application_name=walreceiver sslmode=prefer sslcompression=1 sslsni=1 ssl_min_protocol_version=TLSv1.2 gssencmode=prefer krbsrvname=postgres target_session_attrs=any\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"LastMsgReceiptTime\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"2022-03-01 14:42:57.96727+08\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"LatestEndLsn\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0/3000148\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReceivedLsn\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0/3000148\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReplayLsn\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0/3000148\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReceiveStartTli\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"1\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ReplayLag\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0\\\\\\\\\\\\\\\"}\\\",\\n      \\\"Detail\\\": \\\"[Check rds empty]\\\\\\\\nCheck rds databases: success\\\\\\\\n[Check source connectivity]\\\\\\\\nCheck ip connectable: success\\\\\\\\nCheck port connectable: success\\\\\\\\nCheck database connectable: success\\\\\\\\nCheck account replication privilege: success\\\\\\\\nCheck account createrole privilege: success\\\\\\\\nCheck account monitor privilege: success\\\\\\\\n[Check source version]\\\\\\\\nCheck major version consistent: success\\\\\\\\n[Check source glibc version]\\\\\\\\nCheck source glibc version compatible: warning(warning:source glibc version is not compatible with rds pg)\\\\\\\\n[Check disk size]\\\\\\\\nCheck disk size enough: success\\\\\\\\n[Check wal keep size]\\\\\\\\nCheck wal keep size large enough: success\\\\\\\\n[Check spec params]\\\\\\\\nCheck if spec params too large: success\\\\\\\\n[Start RDS instance]\\\\\\\\n2022-02-25 17:00:29 --- Start RDS instance as slave for data replication\\\\\\\\n[Synchronize data]\\\\\\\\n2022-02-25 17:01:05 --- Synchronize data from source to RDS by streaming replication \\\\\\\\n\\\",\\n      \\\"SwitchTime\\\": \\\"2022-03-01T06:40:51Z\\\"\\n    }\\n  ],\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 10\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeCloudMigrationResultResponse>\\n    <TotalSize>1</TotalSize>\\n    <RequestId>1B983C48-9793-5EAA-8F7F-00EAEC517675</RequestId>\\n    <Items>\\n        <GmtCreated>2022-02-25T08:53:13Z</GmtCreated>\\n        <GmtModified>2022-03-01T06:39:51Z</GmtModified>\\n        <TaskId>440437220</TaskId>\\n        <TaskName>362c6c7a-4d20-4eac-898c-1495ceab374c</TaskName>\\n        <MigrateStage>increment</MigrateStage>\\n        <SourceCategory>ecsonvpc</SourceCategory>\\n        <SourceIpAddress>172.16.XX.XX</SourceIpAddress>\\n        <SourcePort>5432</SourcePort>\\n        <SourceAccount>migratetest</SourceAccount>\\n        <SourcePassword>123456</SourcePassword>\\n        <TargetEip>null</TargetEip>\\n        <TargetInstanceName>pgm-bp102g323jd4****</TargetInstanceName>\\n        <ReplicationState>streaming</ReplicationState>\\n        <ReplicationInfo>{\\\\\\\"Status\\\\\\\":\\\\\\\"streaming\\\\\\\",\\\\\\\"ReceiveStartLsn\\\\\\\":\\\\\\\"0/3000000\\\\\\\",\\\\\\\"ReceivedTli\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"LatestEndTime\\\\\\\":\\\\\\\"2022-02-25 17:03:59.3344+08\\\\\\\",\\\\\\\"Synced\\\\\\\":\\\\\\\"true\\\\\\\",\\\\\\\"IsSlave\\\\\\\":\\\\\\\"true\\\\\\\",\\\\\\\"ReplayTimestamp\\\\\\\":\\\\\\\"null\\\\\\\",\\\\\\\"LastMsgSendTime\\\\\\\":\\\\\\\"2022-03-01 14:42:57.967537+08\\\\\\\",\\\\\\\"Conninfo\\\\\\\":\\\\\\\"user=migratetest password=******** channel_binding=prefer dbname=replication host=172.16.254.203 port=5432 application_name=rds_db_instance fallback_application_name=walreceiver sslmode=prefer sslcompression=1 sslsni=1 ssl_min_protocol_version=TLSv1.2 gssencmode=prefer krbsrvname=postgres target_session_attrs=any\\\\\\\",\\\\\\\"LastMsgReceiptTime\\\\\\\":\\\\\\\"2022-03-01 14:42:57.96727+08\\\\\\\",\\\\\\\"LatestEndLsn\\\\\\\":\\\\\\\"0/3000148\\\\\\\",\\\\\\\"ReceivedLsn\\\\\\\":\\\\\\\"0/3000148\\\\\\\",\\\\\\\"ReplayLsn\\\\\\\":\\\\\\\"0/3000148\\\\\\\",\\\\\\\"ReceiveStartTli\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"ReplayLag\\\\\\\":\\\\\\\"0\\\\\\\"}</ReplicationInfo>\\n        <Detail>[Check rds empty]\\\\nCheck rds databases: success\\\\n[Check source connectivity]\\\\nCheck ip connectable: success\\\\nCheck port connectable: success\\\\nCheck database connectable: success\\\\nCheck account replication privilege: success\\\\nCheck account createrole privilege: success\\\\nCheck account monitor privilege: success\\\\n[Check source version]\\\\nCheck major version consistent: success\\\\n[Check source glibc version]\\\\nCheck source glibc version compatible: warning(warning:source glibc version is not compatible with rds pg)\\\\n[Check disk size]\\\\nCheck disk size enough: success\\\\n[Check wal keep size]\\\\nCheck wal keep size large enough: success\\\\n[Check spec params]\\\\nCheck if spec params too large: success\\\\n[Start RDS instance]\\\\n2022-02-25 17:00:29 --- Start RDS instance as slave for data replication\\\\n[Synchronize data]\\\\n2022-02-25 17:01:05 --- Synchronize data from source to RDS by streaming replication \\\\n</Detail>\\n        <SwitchTime>2022-03-01T06:40:51Z</SwitchTime>\\n    </Items>\\n    <PageNumber>1</PageNumber>\\n    <PageSize>10</PageSize>\\n</DescribeCloudMigrationResultResponse>\",\"errorExample\":\"\"}]","title":"查询RDS PostgreSQL迁移上云任务详情","description":"### 适用引擎\n\n- RDS PostgreSQL"}