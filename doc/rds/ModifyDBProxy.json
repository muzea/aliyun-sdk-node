{"summary":"该接口用于开启或者修改RDS实例的数据库代理实例功能。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"ConfigDBProxyService","in":"query","schema":{"description":"开启或关闭数据库代理，取值：\n\n* **Startup**：开启代理服务\n* **Shutdown**：关闭代理服务\n* **Modify**：修改代理服务","type":"string","required":true,"docRequired":true,"example":"Startup"}},{"name":"DBProxyInstanceNum","in":"query","schema":{"description":"开通代理实例数量，取值：**1**~**16**。默认值：**1**。\n\n>更多的代理实例能处理更多的请求，您可以根据监控数据了解代理实例的负载，然后设置合理的代理实例数量。","type":"string","required":false,"example":"1"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID，可调用DescribeRegions获取。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"InstanceNetworkType","in":"query","schema":{"description":"实例的网络类型。当前仅支持VPC网络，取值：**VPC**。\n\n> RDS MySQL云盘版或RDS PostgreSQL开启数据库代理时，该参数必选。\n","type":"string","required":false,"example":"VPC"}},{"name":"VPCId","in":"query","schema":{"description":"实例所属VPC ID。可调用DescribeDBInstanceAttribute接口查询。\n\n> RDS MySQL云盘版或RDS PostgreSQL开启数据库代理时，该参数必选。","type":"string","required":false,"example":"vpc-****"}},{"name":"VSwitchId","in":"query","schema":{"description":"实例所属虚拟交换机ID。可调用DescribeDBInstanceAttribute接口查询。\n\n> RDS MySQL云盘版或RDS PostgreSQL开启数据库代理时，该参数必选。","type":"string","required":false,"example":"vsw-****"}},{"name":"DBProxyEngineType","in":"query","schema":{"description":"废弃参数，无需配置。","type":"string","required":false,"example":"normal"}},{"name":"DBProxyInstanceType","in":"query","schema":{"description":"数据库代理实例类型，取值：\n- **common**：通用型代理\n- **exclusive**：独享型代理（默认值）","type":"string","required":false,"example":"exclusive"}},{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-acfmy****"}},{"name":"PersistentConnectionStatus","in":"query","schema":{"description":"是否开启连接保持。取值：\n- **Enabled**：开启连接保持\n- **Disabled**：关闭连接保持\n\n> - 仅RDS MySQL支持此参数。\n> - 修改连接保持状态时，**ConfigDBProxyService**取值为**Modify**。","type":"string","required":false,"example":"Disabled"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"FC452BB1-EED8-4278-95C7-0324B3710DF1"}}}}},"errorCodes":{"400":[{"errorCode":"MaxscaleAlreadyExist","errorMessage":"The Maxscale is already existed."},{"errorCode":"MaxscaleNotSupport","errorMessage":"Maxscale not supported"},{"errorCode":"NetWork.NotFound","errorMessage":"NetWork.NotFound"},{"errorCode":"InvalidVpcParameter","errorMessage":"Either VPC ID or vSwitch ID is incorrect. Please check again."},{"errorCode":"MaxscaleInternalError","errorMessage":"Database proxy status is CLASS_CHANGING."},{"errorCode":"InvalidDBInstanceName","errorMessage":"Specified parameter DBInstanceName is not valid."},{"errorCode":"InvalidOptimizationCategory.Format","errorMessage":"Specified optimization category is not valid."},{"errorCode":"MinorVersionNotSupport","errorMessage":"The current database minor version does not support the operation."},{"errorCode":"InvalidParameters.Format","errorMessage":"Specified parameter is not valid"},{"errorCode":"InvalidTunnelId","errorMessage":"Specified conn tunnel is not valid."},{"errorCode":"InvalidRegion.Format","errorMessage":"Specified Region is not valid."}],"403":[{"errorCode":"InvalidConnVPCId","errorMessage":"Specified conn vpc id is not valid."},{"errorCode":"IncorrectDBInstanceType","errorMessage":"The database instance type does not support the operation."},{"errorCode":"IncorrectDBInstanceEngine","errorMessage":"Current DB Instance engine does not support this operation."},{"errorCode":"IncorrectKindCode","errorMessage":"Current custins kindCode does not support this operation."},{"errorCode":"IncorrectDBInstanceState","errorMessage":"Current DB instance state does not support this operation."},{"errorCode":"InvalidVswitchId","errorMessage":"Specified conn vswitch id is not valid."}],"404":[{"errorCode":"MaxscaleCreating","errorMessage":"The relative maxscale instance is being created or deleted."},{"errorCode":"Maxscale.NotFound","errorMessage":"The relative maxscale instance is not found."},{"errorCode":"InvalidVSwitchId.NotFound","errorMessage":"The specified VSwitch is invalid."},{"errorCode":"InvalidParam","errorMessage":"The parameter is invalid."},{"errorCode":"InsufficientResourceCapacity","errorMessage":"The target availability zone does not have sufficient resources."},{"errorCode":"InvalidDBInstance.NotFound","errorMessage":"The specified instance does not exist or is not supported."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"FC452BB1-EED8-4278-95C7-0324B3710DF1\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ModifyDBProxyResponse>\\r\\n  <RequestId>FC452BB1-EED8-4278-95C7-0324B3710DF1</RequestId>\\r\\n</ModifyDBProxyResponse>\",\"errorExample\":\"\"}]","title":"开通或修改数据库代理实例功能","description":"### 适用引擎\n\n- RDS MySQL\n- RDS PostgreSQL\n\n> 云数据库RDS MySQL集群系列于2023年10月17日起逐步在各个单元赠送代理数量为1的数据库独享代理服务，详情请参见[【优惠】RDS MySQL集群版赠送代理数量为1的数据库独享代理服务](~~2555466~~)。\n\n### 相关功能文档\n><notice>使用该接口前，请仔细阅读功能文档，确保完全了解使用接口的前提条件及使用后造成的影响后，再进行操作。></notice>\n\n- [RDS MySQL开通数据库代理](~~197456~~)\n- [RDS PostgreSQL开通数据库代理](~~418272~~)","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}