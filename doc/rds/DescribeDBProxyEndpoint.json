{"summary":"该接口用于查询RDS实例数据库代理的连接地址信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-bp1ja4f56s7us****"}},{"name":"DBProxyEndpointId","in":"query","schema":{"description":"代理终端名称。可调用DescribeDBProxy接口查询。","type":"string","required":false,"example":"keaxncrjluwu0gue****"}},{"name":"DBProxyConnectString","in":"query","schema":{"description":"代理连接地址。可调用DescribeDBProxy接口查询。","type":"string","required":false,"example":"testproxy****.rwlb.rds.aliyuncs.com"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。可调用DescribeRegions获取。","type":"string","required":false,"docRequired":true,"example":"cn-hangzhou"}},{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-bp1ja4f56s7us****"}},{"name":"DBProxyEngineType","in":"query","schema":{"description":"预留参数，无需配置。","type":"string","required":false,"example":"normal"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"DBProxyConnectStringNetType":{"description":"代理连接地址的网络类型，取值：\n\n* **InnerString**：内网地址。\n* **OuterString**：外网地址。","type":"string","example":"InnerString"},"DBProxyFeatures":{"description":"代理终端的设置信息，格式为JSON，包含下述参数：\n* **TransactionReadSqlRouteOptimizeStatus**：事务拆分设置，取值为**0**（关闭）或**1**（开启）。\n* **ConnectionPersist**：连接池设置：取值为**0**（关闭）、**1**（会话级连接池）或**2**（事务级连接池）。\n* **ReadWriteSpliting**：读写分离设置，取值为**0**（关闭）或**1**（开启）。\n* **PinPreparedStmt**：仅RDS PostgrSQL可见，内部参数。\n> RDS PostgreSQL仅支持修改**ReadWriteSpliting**，**TransactionReadSqlRouteOptimizeStatus**和**PinPreparedStmt**默认为1。","type":"string","example":"TransactionReadSqlRouteOptimizeStatus:1;ConnectionPersist:0;ReadWriteSpliting:1"},"RequestId":{"description":"请求ID。","type":"string","example":"847BA085-B377-4BFA-8267-F82345ECE1D2"},"ReadOnlyInstanceWeight":{"description":"读权重分配信息，即传入主实例和只读实例的读请求权重，格式为JSON，包含下述参数：\n* **DBInstanceId**：实例ID。\n* **DBInstanceType**：实例类型，取值为**Master**（主实例）或**ReadOnly**（只读实例）。\n* **NodeID**：集群系列中主实例主节点和备节点的节点ID。\n* **NodeType**：集群系列中的节点类型，取值为**Primary**（主实例-主节点）或**Secondary**（主实例-备节点）。\n* **Weight**：读请求权重，以**100**递增，最大值为**10000**。","type":"string","example":"[{\\\"Availability\\\":\\\"Available\\\",\\\"DBInstanceId\\\":\\\"rm-2z****\\\"，\\\"DBInstanceType\\\":\\\"Master\\\",\\\"NodeId\\\":\\\"rn-t2****\\\",\\\"NodeType\\\":\\\"Primary\\\",\\\"Weight\\\":0}, {\\\"Availability\\\":\\\"Available\\\",\\\"DBInstanceId\\\":\\\"rm-2z****\\\"，\\\"DBInstanceType\\\":\\\"Master\\\",\\\"NodeId\\\":\\\"rn-z9****\\\",\\\"NodeType\\\":\\\"Secondary\\\",\\\"Weight\\\":400}, {\\\"Availability\\\":\\\"Available\\\",,\\\"DBInstanceId\\\":\\\"rm-2z****\\\"，\\\"DBInstanceType\\\":\\\"Master\\\",\\\"NodeId\\\":\\\"rn-1c****\\\",\\\"NodeType\\\":\\\"Secondary\\\",\\\"Weight\\\":400}]]"},"ReadOnlyInstanceDistributionType":{"description":"读权重分配模式，详情请参见[读权重分配](~~96076~~)。取值：\n\n* **Standard**：按规格权重自动分配。\n* **Custom**：自定义分配权重。","type":"string","example":"Standard"},"ReadOnlyInstanceMaxDelayTime":{"description":"读写分离的延迟阈值，当只读实例延迟时间超过该阈值时，读取流量不发往该实例，单位：秒。","type":"string","example":"30"},"DbProxyEndpointReadWriteMode":{"description":"代理终端的读写类型，取值：\n* **ReadWrite**：读写模式。\n* **ReadOnly**：只读模式。","type":"string","example":"ReadWrite"},"DbProxyEndpointAliases":{"description":"代理终端的备注信息。","type":"string","example":"proxyterminal-test"},"DBProxyEndpointId":{"description":"代理连接地址ID。","type":"string","example":"keaxncrjluwu0gue****"},"DBProxyConnectStringPort":{"description":"代理连接地址端口。","type":"string","example":"3306"},"DBProxyConnectString":{"description":"代理连接地址。","type":"string","example":"testproxy****.rwlb.rds.aliyuncs.com"},"DBProxyEngineType":{"description":"内部参数，无需关注。","type":"string","example":"normal"},"EndpointConnectItems":{"type":"object","properties":{"EndpointConnectItems":{"description":"代理连接地址的详细信息列表。","type":"array","items":{"description":"代理连接地址的详细信息","type":"object","properties":{"DbProxyEndpointPort":{"description":"服务端口，默认为**3306**。","type":"string","example":"3306"},"DbProxyEndpointConnectString":{"description":"代理连接地址。","type":"string","example":"testproxy****.rwlb.rds.aliyuncs.com"},"DbProxyEndpointNetType":{"description":"网络类型，取值：\n* **0**：公网\n* **1**：经典网络\n* **2**：专有网络\n","type":"string","example":"2"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"MaxscaleNotSupport","errorMessage":"Current custins can not support Maxscale."},{"errorCode":"InvalidEndPoint.Format","errorMessage":"The specified EndPoint is not valid."},{"errorCode":"InvalidDBInstanceName","errorMessage":"Specified parameter DBInstanceName is not valid."},{"errorCode":"Endpoint.NotFound","errorMessage":"The specified EndPoint is not valid."},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is invalid."}],"403":[{"errorCode":"IncorrectKindCode","errorMessage":"The current KindCode of the custins does not support the operation."},{"errorCode":"IncorrectDBInstanceType","errorMessage":"The current database instance type does not support the operation."},{"errorCode":"IncorrectDBInstanceEngine","errorMessage":"Current DB Instance engine does not support this operation."}],"404":[{"errorCode":"Endpoint.NotFound","errorMessage":"Specified endpoint is not found."},{"errorCode":"Maxscale.NotFound","errorMessage":"The relative maxscale instance is not found."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"DBProxyConnectStringNetType\\\": \\\"InnerString\\\",\\n  \\\"DBProxyFeatures\\\": \\\"TransactionReadSqlRouteOptimizeStatus:1;ConnectionPersist:0;ReadWriteSpliting:1\\\",\\n  \\\"RequestId\\\": \\\"847BA085-B377-4BFA-8267-F82345ECE1D2\\\",\\n  \\\"ReadOnlyInstanceWeight\\\": \\\"[{\\\\\\\\\\\\\\\"Availability\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Available\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"DBInstanceId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rm-2z****\\\\\\\\\\\\\\\"，\\\\\\\\\\\\\\\"DBInstanceType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Master\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rn-t2****\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Primary\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Weight\\\\\\\\\\\\\\\":0}, {\\\\\\\\\\\\\\\"Availability\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Available\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"DBInstanceId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rm-2z****\\\\\\\\\\\\\\\"，\\\\\\\\\\\\\\\"DBInstanceType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Master\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rn-z9****\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Secondary\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Weight\\\\\\\\\\\\\\\":400}, {\\\\\\\\\\\\\\\"Availability\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Available\\\\\\\\\\\\\\\",,\\\\\\\\\\\\\\\"DBInstanceId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rm-2z****\\\\\\\\\\\\\\\"，\\\\\\\\\\\\\\\"DBInstanceType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Master\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rn-1c****\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"NodeType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"Secondary\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Weight\\\\\\\\\\\\\\\":400}]]\\\",\\n  \\\"ReadOnlyInstanceDistributionType\\\": \\\"Standard\\\",\\n  \\\"ReadOnlyInstanceMaxDelayTime\\\": \\\"30\\\",\\n  \\\"DbProxyEndpointReadWriteMode\\\": \\\"ReadWrite\\\",\\n  \\\"DbProxyEndpointAliases\\\": \\\"proxyterminal-test\\\",\\n  \\\"DBProxyEndpointId\\\": \\\"keaxncrjluwu0gue****\\\",\\n  \\\"DBProxyConnectStringPort\\\": \\\"3306\\\",\\n  \\\"DBProxyConnectString\\\": \\\"testproxy****.rwlb.rds.aliyuncs.com\\\",\\n  \\\"DBProxyEngineType\\\": \\\"normal\\\",\\n  \\\"EndpointConnectItems\\\": {\\n    \\\"EndpointConnectItems\\\": [\\n      {\\n        \\\"DbProxyEndpointPort\\\": \\\"3306\\\",\\n        \\\"DbProxyEndpointConnectString\\\": \\\"testproxy****.rwlb.rds.aliyuncs.com\\\",\\n        \\\"DbProxyEndpointNetType\\\": \\\"2\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeDBProxyEndpointResponse>\\n    <DBProxyConnectStringNetType>InnerString</DBProxyConnectStringNetType>\\n    <DBProxyFeatures>TransactionReadSqlRouteOptimizeStatus:1;ConnectionPersist:0;ReadWriteSpliting:1</DBProxyFeatures>\\n    <RequestId>847BA085-B377-4BFA-8267-F82345ECE1D2</RequestId>\\n    <ReadOnlyInstanceWeight>[{\\\\\\\"Availability\\\\\\\":\\\\\\\"Available\\\\\\\",\\\\\\\"DBInstanceId\\\\\\\":\\\\\\\"rr-bp****\\\\\\\",\\\\\\\"DBInstanceType\\\\\\\":\\\\\\\"ReadOnly\\\\\\\",\\\\\\\"NodeId\\\\\\\":\\\\\\\"rr-bp****\\\\\\\",\\\\\\\"NodeType\\\\\\\":\\\\\\\"ReadOnly\\\\\\\",\\\\\\\"Weight\\\\\\\":400}, {\\\\\\\"Availability\\\\\\\":\\\\\\\"Available\\\\\\\",\\\\\\\"DBInstanceId\\\\\\\":\\\\\\\"rm-2z****\\\\\\\"，\\\\\\\"DBInstanceType\\\\\\\":\\\\\\\"Master\\\\\\\",\\\\\\\"NodeId\\\\\\\":\\\\\\\"rm-2z****-instance-2\\\\\\\",\\\\\\\"NodeType\\\\\\\":\\\\\\\"Secondary\\\\\\\",\\\\\\\"Weight\\\\\\\":400}, {\\\\\\\"Availability\\\\\\\":\\\\\\\"Available\\\\\\\",\\\\\\\"DBInstanceId\\\\\\\":\\\\\\\"rm-2z****\\\\\\\"，\\\\\\\"DBInstanceType\\\\\\\":\\\\\\\"Master\\\\\\\",\\\\\\\"NodeId\\\\\\\":\\\\\\\"rm-2z****-instance-3\\\\\\\",\\\\\\\"NodeType\\\\\\\":\\\\\\\"Secondary\\\\\\\",\\\\\\\"Weight\\\\\\\":400}, {\\\\\\\"Availability\\\\\\\":\\\\\\\"Available\\\\\\\",,\\\\\\\"DBInstanceId\\\\\\\":\\\\\\\"rm-2z****\\\\\\\"，\\\\\\\"DBInstanceType\\\\\\\":\\\\\\\"Master\\\\\\\",\\\\\\\"NodeId\\\\\\\":\\\\\\\"rm-2z****-instance-1\\\\\\\",\\\\\\\"NodeType\\\\\\\":\\\\\\\"Primary\\\\\\\",\\\\\\\"Weight\\\\\\\":0}]]</ReadOnlyInstanceWeight>\\n    <ReadOnlyInstanceDistributionType>Standard</ReadOnlyInstanceDistributionType>\\n    <ReadOnlyInstanceMaxDelayTime>30</ReadOnlyInstanceMaxDelayTime>\\n    <DbProxyEndpointReadWriteMode>ReadWrite</DbProxyEndpointReadWriteMode>\\n    <DbProxyEndpointAliases>proxyterminal-test</DbProxyEndpointAliases>\\n    <DBProxyEndpointId>keaxncrjluwu0gue****</DBProxyEndpointId>\\n    <DBProxyConnectStringPort>3306</DBProxyConnectStringPort>\\n    <DBProxyConnectString>testproxy****.rwlb.rds.aliyuncs.com</DBProxyConnectString>\\n    <DBProxyEngineType>normal</DBProxyEngineType>\\n    <EndpointConnectItems>\\n        <DbProxyEndpointPort>3306</DbProxyEndpointPort>\\n        <DbProxyEndpointConnectString>testproxy****.rwlb.rds.aliyuncs.com</DbProxyEndpointConnectString>\\n        <DbProxyEndpointNetType>2</DbProxyEndpointNetType>\\n    </EndpointConnectItems>\\n</DescribeDBProxyEndpointResponse>\",\"errorExample\":\"\"}]","title":"查询数据库代理的连接地址信息","description":"### 适用引擎\n\n- RDS MySQL\n- RDS PostgreSQL","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}