{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances获取。","type":"string","required":true,"docRequired":true,"example":"rm-uf6wjk5****"}},{"name":"SQLHASH","in":"query","schema":{"description":"慢日志统计里的SQL语句唯一标识符，可用于获取该SQL语句的慢日志明细。","type":"string","required":false,"example":"U2FsdGVk****"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，最大不能早于当前时间30天。格式：<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":true,"docRequired":true,"example":"2020-06-17T16:00Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，需要晚于查询开始时间。格式：<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":true,"docRequired":true,"example":"2020-06-18T16:00Z"}},{"name":"DBName","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"testdb"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：**30**~**100**。\n\n> 默认值：**30**。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"30","example":"30","default":"30"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值：大于0且不超过Integer的最大值。\n\n> 默认值：**1**。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1","default":"1"}},{"name":"NodeId","in":"query","schema":{"description":"节点ID。\n><notice>该参数仅适用于集群版实例，可以选择查询指定节点日志。若不传该参数，默认返回主节点日志。></notice>","type":"string","required":false,"example":"rn-p1fm78s90x5****"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"PageRecordCount":{"description":"本页SQL语句个数。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"4DBB1BB0-E5D8-4D41-B1C9-142364DB****"},"TotalRecordCount":{"description":"总记录数。","type":"integer","format":"int32","example":"1"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"rm-uf6wjk5****"},"Engine":{"description":"数据库类型。","type":"string","example":"MySQL"},"PageNumber":{"description":"页码。","type":"integer","format":"int32","example":"1"},"Items":{"type":"object","properties":{"SQLSlowRecord":{"description":"慢日志明细列表。","type":"array","items":{"description":"慢日志明细详情。","type":"object","properties":{"HostAddress":{"description":"连接数据库的客户端名称及地址。","type":"string","example":"****[****] @  [1XX.XX.XX.XX]"},"RowsAffectedCount":{"description":"影响行数。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"34"},"QueryTimes":{"description":"执行时长。单位：秒（s）。\n\n> 对于SQL Server，该参数的单位为毫秒（ms）。","type":"integer","format":"int64","example":"2"},"SQLText":{"description":"SQL命令详情。","type":"string","example":"select sleep(2)"},"CpuTime":{"description":"CPU处理时长。单位：毫秒（ms）。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"0.002"},"QueryTimeMS":{"description":"执行时长。单位：毫秒（ms）。\n\n> 对于SQL Server，该参数的单位为微秒（μs）。","type":"integer","format":"int64","example":"2001"},"ApplicationName":{"description":"连接的应用名称。\n>仅SQL Server实例支持。","type":"string","example":"example"},"LockTimes":{"description":"锁定时长。单位：秒（s）。","type":"integer","format":"int64","example":"0"},"ExecutionStartTime":{"description":"执行开始时间。格式：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2020-06-18T01:40:44Z"},"LogicalIORead":{"description":"逻辑读次数。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"383"},"WriteIOCount":{"description":"I/O写入次数。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"22"},"PhysicalIORead":{"description":"物理读次数。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"200"},"ReturnRowCounts":{"description":"返回行数。","type":"integer","format":"int64","example":"1"},"ParseRowCounts":{"description":"解析行数。","type":"integer","format":"int64","example":"1"},"DBName":{"description":"数据库名称。","type":"string","example":"testDB"},"ClientHostName":{"description":"客户端主机名。\n>仅SQL Server实例支持。","type":"string","example":"example"},"UserName":{"description":"用户名。\n>仅SQL Server实例支持。","type":"string","example":"user"},"LastRowsAffectedCount":{"description":"最后一条语句的影响行数。\n>仅SQL Server实例支持。","type":"integer","format":"int64","example":"2"},"SQLHash":{"description":"慢日志明细里的SQL语句唯一标识符。","type":"string","example":"U2FsdGVk****"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidSearchTimeRange","errorMessage":"search time range cannot be longer than a month."},{"errorCode":"IO.Exception","errorMessage":"IO exception, retry later."},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageRecordCount\\\": 1,\\n  \\\"RequestId\\\": \\\"4DBB1BB0-E5D8-4D41-B1C9-142364DB****\\\",\\n  \\\"TotalRecordCount\\\": 1,\\n  \\\"DBInstanceId\\\": \\\"rm-uf6wjk5****\\\",\\n  \\\"Engine\\\": \\\"MySQL\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"Items\\\": {\\n    \\\"SQLSlowRecord\\\": [\\n      {\\n        \\\"HostAddress\\\": \\\"****[****] @  [1XX.XX.XX.XX]\\\",\\n        \\\"RowsAffectedCount\\\": 34,\\n        \\\"QueryTimes\\\": 2,\\n        \\\"SQLText\\\": \\\"select sleep(2)\\\",\\n        \\\"CpuTime\\\": 0.002,\\n        \\\"QueryTimeMS\\\": 2001,\\n        \\\"ApplicationName\\\": \\\"example\\\",\\n        \\\"LockTimes\\\": 0,\\n        \\\"ExecutionStartTime\\\": \\\"2020-06-18T01:40:44Z\\\",\\n        \\\"LogicalIORead\\\": 383,\\n        \\\"WriteIOCount\\\": 22,\\n        \\\"PhysicalIORead\\\": 200,\\n        \\\"ReturnRowCounts\\\": 1,\\n        \\\"ParseRowCounts\\\": 1,\\n        \\\"DBName\\\": \\\"testDB\\\",\\n        \\\"ClientHostName\\\": \\\"example\\\",\\n        \\\"UserName\\\": \\\"user\\\",\\n        \\\"LastRowsAffectedCount\\\": 2,\\n        \\\"SQLHash\\\": \\\"U2FsdGVk****\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSlowLogRecordsResponse>\\n    <PageRecordCount>1</PageRecordCount>\\n    <RequestId>4DBB1BB0-E5D8-4D41-B1C9-142364DB****</RequestId>\\n    <TotalRecordCount>1</TotalRecordCount>\\n    <DBInstanceId>rm-uf6wjk5*******</DBInstanceId>\\n    <Engine>MySQL</Engine>\\n    <PageNumber>1</PageNumber>\\n    <Items>\\n        <HostAddress>xxx[xxx] @  [1xx.xxx.xxx.xx]</HostAddress>\\n        <RowsAffectedCount>34</RowsAffectedCount>\\n        <QueryTimes>2</QueryTimes>\\n        <SQLText>select sleep(2)</SQLText>\\n        <QueryTimeMS>2001</QueryTimeMS>\\n        <ApplicationName>example</ApplicationName>\\n        <LockTimes>0</LockTimes>\\n        <ExecutionStartTime>2020-06-18T01:40:44Z</ExecutionStartTime>\\n        <LogicalIORead>383</LogicalIORead>\\n        <WriteIOCount>22</WriteIOCount>\\n        <PhysicalIORead>200</PhysicalIORead>\\n        <ReturnRowCounts>1</ReturnRowCounts>\\n        <ParseRowCounts>1</ParseRowCounts>\\n        <DBName>testDB</DBName>\\n        <ClientHostName>example</ClientHostName>\\n        <UserName>user</UserName>\\n        <LastRowsAffectedCount>2</LastRowsAffectedCount>\\n        <SQLHash>U2FsdGVk****</SQLHash>\\n    </Items>\\n</DescribeSlowLogRecordsResponse>\",\"errorExample\":\"\"}]","title":"查看慢日志明细","summary":"该接口用于查看实例的慢日志明细。","description":"### 适用引擎\n\n- RDS MySQL\n- RDS PostgreSQL\n- RDS SQL Server\n- RDS MariaDB\n\n### 注意事项\n\n- 本接口的返回参数每分钟更新一次。\n- 2023年12月13日起，由于慢SQL的模板化算法优化，调用本接口时，SQLHash字段的值将发生变更。详情请参见[【通知】慢SQL的模板化算法优化](~~2637024~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}