{"summary":"该接口用于修改RDS SQL Server数据库属性。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update","riskType":"high","chargeType":"paid"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"rm-t4nnu1my39q******"}},{"name":"DBName","in":"query","schema":{"description":"数据库名。\n\n> 不支持填入多个数据库名称。","type":"string","required":true,"example":"testDB"}},{"name":"DatabasePropertyName","in":"query","schema":{"description":"期望修改的数据库属性。\n\n- **修改数据库属性功能**：填写目标数据库的属性名称。\n- **数据归档OSS功能**：填写目标数据库的状态。传入`covert_online_db_to_cold_storage`表示将在线库转为冷存库，传入`convert_cold_storage_db_to_online`表示将冷存库转为在线库。","type":"string","required":true,"example":"compatibility_level"}},{"name":"DatabasePropertyValue","in":"query","schema":{"description":"期望修改的数据库属性值。\n- **修改数据库属性功能**：填写目标数据库的属性值。\n- **数据归档OSS功能**：填写**1**，将目标库转为冷存或在线状态。","type":"string","required":true,"example":"150"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回参数详情。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F5C79A20-E931-5389-BC04-DEBA2D3ABD8D"},"Message":{"description":"返回信息。","type":"string","example":"successful"},"Code":{"description":"Code编码。","type":"string","example":"200"}}}}},"errorCodes":{"400":[{"errorCode":"%s","errorMessage":"DB Operation Failed:%s."},{"errorCode":"InvalidDatabasePropertyValue","errorMessage":"Specified value for the database property is not valid."},{"errorCode":"InvalidDatabaseProperty","errorMessage":"Specified name for the database property is not valid."},{"errorCode":"DatabasePropertyModificationFail","errorMessage":"Database property modification failed, possibly due to high workload on the database or inability to obtain an exclusive lock. Please attempt to modify the property during periods of low workload."},{"errorCode":"InvalidDatabaseVersion","errorMessage":"Specified database property is not compatible with the SQL Server major version."},{"errorCode":"InvalidDBInstanceEngineType.Format","errorMessage":"the DB instance engine type does not support this operation."},{"errorCode":"UserAlreadyExistInDb","errorMessage":"The current login already has a mapped user with the same name in the specific database. please try removing the existing user and retrying."},{"errorCode":"InvalidDiskType","errorMessage":"Current disk type does not support this operation."},{"errorCode":"CurrentInsHasColdDB","errorMessage":"The current instance has cold storage db."},{"errorCode":"CurrentInsHasColdStorage","errorMessage":"Current instance has cold storage."},{"errorCode":"ColdDBHasSameNameWithOnlineDB","errorMessage":"The instance has cold db and online db with the same name."},{"errorCode":"DiskSpaceInsufficientForColdOperation","errorMessage":"Insufficient disk space to bring db online."},{"errorCode":"InvalidRestoreTimeSpecified","errorMessage":"Unable to restore to the specified time, because the database is in cold storage at this time. Please choose a valid restore point."},{"errorCode":"InvalidRestoreDB","errorMessage":"Unable to restore, because the database is in cold storage now. Please skip this database."},{"errorCode":"CurrentDBIsInColdStorage","errorMessage":"current db is cold db."},{"errorCode":"ColdDBNumExceedsLimit","errorMessage":"the number of cold db exceeds the limit."},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."},{"errorCode":"InsufficientAvailableQuota","errorMessage":"Your account quota limit is less than 0, please recharge before trying to purchase."},{"errorCode":"CommodityServiceCalling.Exception","errorMessage":"Failed to call commodity service."},{"errorCode":"RegionDissolvedEOM","errorMessage":"Dear customer, Alibaba Cloud plans to optimize and adjust the current region. Cloud services in this region will cease operations. You are currently unable to operate new purchase orders. Thank you for your understanding and support."},{"errorCode":"Commodity.InvalidComponent","errorMessage":"The module you purchased is not legal, please buy it again."},{"errorCode":"RegionEndTimeDissolvedIndia","errorMessage":"Cloud services in the India (Mumbai) region will be discontinued. Set the validity date to July 15, 2024 or earlier than July 15, 2024."},{"errorCode":"RegionEndTimeDissolvedAustralia","errorMessage":"Cloud services in the Australia (Sydney) region will be discontinued. Set the validity date to September 30, 2024 or earlier than September 30, 2024."},{"errorCode":"Price.CommoditySys","errorMessage":"Commodity system call exception."},{"errorCode":"Pay.InsufficientBalance","errorMessage":"Insufficient available balance."},{"errorCode":"Order.PeriodInvalid","errorMessage":"There is a problem with the period you selected, please choose again."},{"errorCode":"pay.noCreditCard","errorMessage":"Account not bound to credit card."},{"errorCode":"Order.InstHasUnpaidOrder","errorMessage":"There is an unpaid order for the service you have purchased. Please pay or void it before placing the order."},{"errorCode":"noAvailablePaymentMethod","errorMessage":"No payment method is specified for your account. We recommend that you add a payment method."},{"errorCode":"BasicInfoUncompleted","errorMessage":"Your information is incomplete. Complete your information before the operation."},{"errorCode":"Risk.RiskControlRejection","errorMessage":"Your account is abnormal, please contact customer service for details."},{"errorCode":"Api.NotSupport","errorMessage":"Specified api is not supported."},{"errorCode":"ContainForbiddenLabelError","errorMessage":"There is a label that prohibits placing orders. Please contact your distributor for assistance."},{"errorCode":"InvalidDBInstanceId.NotFound","errorMessage":"The DBInstanceId provided does not exist in records."},{"errorCode":"InvalidInstanceLevel.DiskType","errorMessage":"Specified instance level not support request disk type"},{"errorCode":"InvalidParam","errorMessage":"Sepcified wal level Parameter is invalid. There are still logical slots in instance, so it can not be set as replica."},{"errorCode":"KmsApiError","errorMessage":"User secret key invalid."},{"errorCode":"System.SaleValidateFailed","errorMessage":"Sales expression validation system error."},{"errorCode":"Abs.InvalidAccount.NotFound","errorMessage":"account  is not found."}],"403":[{"errorCode":"InvalidDB.NotFound","errorMessage":"Specified db does not exist or DB status does not support."},{"errorCode":"IncorrectDBInstanceState","errorMessage":"Current DB instance state does not support this operation."},{"errorCode":"OrderStatus.UnPaid","errorMessage":"The specified db instance has unpaid order."},{"errorCode":"InvalidReduceDiskSize","errorMessage":"The storage capacity after the scale-down must be larger than the used amount."},{"errorCode":"CloudSSDNotSupport","errorMessage":"Cloud ssd does not support this operation, please upgrade to essd."},{"errorCode":"InvalidUserOperatorPermission","errorMessage":"The user permission does not support this operation."},{"errorCode":"InvalidVswitchId","errorMessage":"Specified conn vswitch id is not valid."}],"404":[{"errorCode":"InvalidClusterKms","errorMessage":"The current instance does not authorized to access the Key Management Service."}],"409":[{"errorCode":"ConflictingDatabaseOperation","errorMessage":"There is already some operation on the database and the current operation should wait till it is done."}],"500":[{"errorCode":"ExternalFailure","errorMessage":"The request processing has failed due to external service failure."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F5C79A20-E931-5389-BC04-DEBA2D3ABD8D\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"Code\\\": \\\"200\\\"\\n}\",\"type\":\"json\"}]","title":"修改数据库属性","description":"### 适用引擎\n- RDS SQL Server\n\n### 相关功能文档\n当前该接口支持的功能为[修改SQL Server数据库属性](~~2401398~~)、[通用云盘数据归档OSS](~~2767189~~)，且通过API使用数据归档OSS功能前，请先在控制台开启数据归档功能。\n><notice>使用该接口前，请仔细阅读功能文档，确保完全了解使用接口的前提条件及使用后造成的影响后，再进行操作。></notice>","requestParamsDescription":"## SQL Server原生参数名称\n参数名称 | 允许的值 | 修改时是否需要独占库 | 最低SQL Server 版本\n:--- | :--- | :--- | :---\ncompatibility_level | 100 <br> 110 <br>  120 <br>  130 <br>  140 <br>  150 <br>  160 | 否 | SQL Server 2008\nparameterization | FORCED <br>SIMPLE | 否 | 所有版本适用\ndelayed_durability | DISABLED <br>ALLOWED <br>FORCED | 否 |SQL Server 2014\naccelerated\\_database_recovery|ON<br>OFF|是|SQL Server 2019\nread\\_committed_snapshot|ON<br>OFF|是|SQL Server 2008\npage_verify| <br>CHECKSUM<br>TORN_PAGE_DETECTION（不支持修改取值为TORN_PAGE_DETECTION）|否|所有版本适用\nauto\\_update_statistics|ON<br>OFF|否|所有版本适用\nauto\\_update\\_statistics_async|ON<br>OFF|否|SQL Server 2012\nallow\\_snapshot_isolation|ON<br>OFF|否|所有版本适用\nansi\\_null_default|ON<br>OFF|否|所有版本适用\nansi_nulls|ON<br>OFF|否|所有版本适用\nansi_warnings|ON<br>OFF|否|所有版本适用\nansi_padding|ON<br>OFF|否|所有版本适用\nconcat\\_null\\_yields_null|ON<br>OFF|否|所有版本适用\nrecursive_triggers|ON<br>OFF|否|所有版本适用\nauto_close|OFF|否|所有版本适用\n\n## RDS自定义参数名称\n<notice>RDS自定义参数名称使用`rds_`开头。</notice>\n参数名称 | 允许的值 | 修改时是否需要独占库 | 最低SQL Server 版本 | 备注\n:--- | :--- | :--- | :--- | :---\nrds\\_optimize\\_db\\_file_grow|1|否|所有版本适用|将数据库的所有文件增长设置为大小，且大小为256MB。\nrds\\_set\\_db_online|1|否|所有版本适用|允许用户online，如果数据库已经online，则跳过。\nrds\\_shrink\\_database_log|1|否|所有版本适用|对数据库进行收缩动作，是否收缩成功取决于日志的log_resue_wait_desc的状态是否为“Nothing”。\nrds\\_update\\_db_stats|1|否|所有版本适用|更新数据库中的统计信息，底层使用SQL Server自带存储过程sp_updatestats。\nrds\\_rebuild\\_db_index|1|否|所有版本适用|重新数据库中的所有碎片率大于50%的非聚集索引，需要满足下述条件：<br> - 数据库大小小于10G。<br>- 磁盘剩余空间大于10G 。"}