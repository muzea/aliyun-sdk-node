{"summary":"该接口用于为RDS集群系列实例创建Endpoint。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"该参数用于保证请求的幂等性，防止重复提交请求。参数值由客户端生成，保证在不同请求间唯一。\n\n该参数值由ASCII字符组成，最长不超过64个字符，不能包含非ASCII字符。","type":"string","required":false,"example":"6000170000591aed949d0f****"}},{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。可调用DescribeDBInstances查询。","type":"string","required":true,"example":"rm-****"}},{"name":"VpcId","in":"query","schema":{"title":"vpcID","description":"内网连接的VPC ID。","type":"string","required":true,"example":"vpc-xxxmmxjqqi****"}},{"name":"VSwitchId","in":"query","schema":{"title":"vSwitchID","description":"内网连接的交换机ID。","type":"string","required":true,"example":"vsw-bp1kqp****"}},{"name":"PrivateIpAddress","in":"query","schema":{"title":"内网IP地址","description":"内网连接的IP地址。","type":"string","required":false,"example":"172.16.XX.XX"}},{"name":"ConnectionStringPrefix","in":"query","schema":{"title":"内网连接地址前缀","description":"内网连接地址前缀。\n\n创建Endpoint的同时会自动创建一个内网连接地址，该参数表示内网连接地址的前缀。","type":"string","required":true,"example":"rm-****-ro"}},{"name":"Port","in":"query","schema":{"title":"内网连接端口","description":"内网连接端口号。创建内网连接支持自定义端口号。\n\n取值范围：3000～5999\n","type":"string","required":true,"example":"3306"}},{"name":"DBInstanceEndpointType","in":"query","schema":{"title":"Endpoint 类型, Primary, Readonly, Node","description":"Endpoint类型，取值含义如下：\n\n- Primary：实例的读写Endpoint\n\n- Readonly：实例的只读Endpoint","type":"string","required":true,"enumValueTitles":{"Readonly":"Readonly"},"example":"Readonly"}},{"name":"DBInstanceEndpointDescription","in":"query","schema":{"title":"Endpoint 用户自定义描述","description":"用户自定义的Endpoint描述。","type":"string","required":false,"example":"for readonly business"}},{"name":"NodeItems","in":"query","style":"json","schema":{"description":"Endpoint节点相关信息列表。","type":"array","items":{"description":"Endpoint节点详情。","type":"object","properties":{"DBInstanceId":{"description":"实例ID。可调用DescribeDBInstances查询。","type":"string","required":true,"example":"rm-****"},"NodeId":{"description":"节点ID。","type":"string","required":true,"example":"rn-xxxx-****"},"Weight":{"description":"节点当前权重取值，按照该取值分配读流量。\n\n取值范围：0～100","type":"integer","format":"int64","required":false,"example":"50"}},"required":false},"required":true}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。可调用DescribeDBInstanceAttribute获取。","type":"string","required":false,"example":"rg-acfmy****"}}],"responses":{"200":{"schema":{"title":"PlainResponse<CreateDBInstanceEndpointModel>","description":"返回参数详情。","type":"object","properties":{"Data":{"description":"返回数据列表。","type":"object","properties":{"DBInstanceName":{"description":"实例ID。","type":"string","example":"rm-****"},"DBInstanceEndpointId":{"description":"实例的Endpoint ID。","type":"string","example":"ep-****"},"ConnectionString":{"description":"内网连接地址。","type":"string","example":"rm-****.mysql.rds.aliyuncs.com"}}},"RequestId":{"description":"请求ID。","type":"string","example":"C8E88DED-533F-4B3C-9207-731FBF394CCA"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidSourceCategory","errorMessage":"specified source category is invalid."},{"errorCode":"InvalidDBInstanceConnType.Format","errorMessage":"Specified DB instance conn type is not valid."},{"errorCode":"EndpointNum.Error","errorMessage":"The number of endpoint is too many."},{"errorCode":"InvalidNodeItems.DuplicateNodeId","errorMessage":"Duplicate nodeId, please ensure all nodeIds are different."},{"errorCode":"InvalidNodeItems.RONode","errorMessage":"ReadOnly endpoint can not contain readonly instance node."},{"errorCode":"InvalidNodeItems.RONodeIdPrimary","errorMessage":"ReadOnly endpoint can not contain primary node."},{"errorCode":"InvalidNodeItems.JsonFormat","errorMessage":"NodeItems is not a json string."},{"errorCode":"InvalidNodeItems.DBInstanceId","errorMessage":"Specified dbInstanceId is invalid"},{"errorCode":"InvalidNodeItems.NodeId","errorMessage":"Specified Node id is invalid"},{"errorCode":"EndpointType.NotSupport","errorMessage":"Current db type is not support specified endpoint type."},{"errorCode":"OtherEndpoint.Exist","errorMessage":"Other endpoint already exist."},{"errorCode":"InvalidPort.Malformed","errorMessage":"Specified port is not valid."},{"errorCode":"APICallingFailed","errorMessage":"Api called failed, please check vpc vsw vip"},{"errorCode":"InvalidDBInstanceName.NotFound","errorMessage":"The specified DB instance name does not exist."},{"errorCode":"InvalidNodeItems.BlackNodeItems","errorMessage":"NodeItems is blank."}],"403":[{"errorCode":"IncorrectDBInstanceState","errorMessage":"Current DB instance state does not support this operation."},{"errorCode":"InvalidConnVPCId","errorMessage":"Specified conn vpc id is not valid."},{"errorCode":"InvalidVswitchId","errorMessage":"Specified conn vswitch id is not valid."}],"404":[{"errorCode":"IncorrectDBInstanceLockMode","errorMessage":"Current DB instance lock mode does not support this operation."},{"errorCode":"InvalidConnectionString.NotFound","errorMessage":"Specified connection string or net type is not found."},{"errorCode":"InvalidConnectionString.Duplicate","errorMessage":"Specified connection string already exists in the Aliyun RDS."},{"errorCode":"InvalidWeight.Format","errorMessage":"The Specified Weight format is not valid."},{"errorCode":"InvalidDBInstance.NotFound","errorMessage":"Specified instance does not exist or not support."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Data\\\": {\\n    \\\"DBInstanceName\\\": \\\"rm-****\\\",\\n    \\\"DBInstanceEndpointId\\\": \\\"ep-****\\\",\\n    \\\"ConnectionString\\\": \\\"rm-****.mysql.rds.aliyuncs.com\\\"\\n  },\\n  \\\"RequestId\\\": \\\"C8E88DED-533F-4B3C-9207-731FBF394CCA\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDBInstanceEndpointResponse>\\n    <Data>\\n        <DBInstanceName>rm-****</DBInstanceName>\\n        <DBInstanceEndpointId>ep-****</DBInstanceEndpointId>\\n        <ConnectionString>rm-****.mysql.rds.aliyuncs.com</ConnectionString>\\n    </Data>\\n    <RequestId>C8E88DED-533F-4B3C-9207-731FBF394CCA</RequestId>\\n</CreateDBInstanceEndpointResponse>\",\"errorExample\":\"\"}]","title":"创建实例的Endpoint","description":"### 适用引擎\n\n<props=\"china\">\n\n- RDS MySQL\n- RDS PostgreSQL\n\n</props>\n\n<props=\"intl\">RDS MySQL</props>\n\n### 相关功能文档\n><notice>使用该接口前，请仔细阅读功能文档，确保完全了解使用接口的前提条件及使用后造成的影响后，再进行操作。></notice>\n\n<props=\"china\">\n\n- RDS MySQL：[增加集群只读地址](~~464132~~)\n- RDS PostgreSQL：[增加集群只读地址](~~96788~~)\n\n</props>\n\n<props=\"intl\">\n\n[增加集群只读地址](~~464132~~)\n</props>"}