{"summary":"该接口用于获取历史任务记录，支持创建时间30天内的任务。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"RegionId","in":"query","allowEmptyValue":false,"schema":{"description":"待处理事件所属的地域ID，可调用DescribeRegions接口获取。","type":"string","required":false,"docRequired":true,"example":"cn-beijing"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：**10~100**。默认值：**10**。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"10","example":"10","default":"10"}},{"name":"PageNumber","in":"query","schema":{"description":"查询结果的页码。取值范围：正整数。\n默认值：**1**。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1","default":"1"}},{"name":"InstanceType","in":"query","schema":{"description":"当前只支持Instance。","type":"string","required":false,"example":"Instance"}},{"name":"Status","in":"query","schema":{"description":"任务状态，用于选择对应状态的任务：\n\n* Scheduled - 等待执行\n* Running - 执行中\n* Succeed - 执行成功\n* Failed - 执行失败\n* Cancelling - 正在终止\n* Canceled - 已终止\n* Waiting - 等待预设时间\n\n如有多个状态则用英文逗号分隔，默认为空，表示全选。","type":"string","required":false,"example":"Scheduled"}},{"name":"InstanceId","in":"query","schema":{"description":"实例ID，用于查询对应实例的任务，如有多个用英文逗号分隔，最多支持30个，默认为空，表示不限制。","type":"string","required":false,"example":"rm-uf62br2491p5l****"}},{"name":"TaskId","in":"query","schema":{"description":"任务ID，用于查询已知ID的任务，如有多个英文用逗号分隔，最多支持30个，默认为空，表示不限制。","type":"string","required":false,"example":"t-83br18hloy3faf****\n"}},{"name":"TaskType","in":"query","schema":{"description":"任务类型，用于查询特定类型任务情况，如有多个用英文逗号分隔，最多支持30个，默认为空，表示不限制。","type":"string","required":false,"example":"autotest_dispatch_cases\n"}},{"name":"FromStartTime","in":"query","schema":{"description":"任务开始时间的起始时间，表示查询任务开始时间在此时间之后的任务。按照ISO8601标准表示，并需要使用UTC +0时间，格式为yyyy-MM-ddTHH:mm:ssZ。最早支持30天前，距当前时间超过30天会自动转换成30天前。","type":"string","required":true,"docRequired":true,"example":"2022-01-02T11:31:03Z"}},{"name":"ToStartTime","in":"query","schema":{"description":"任务开始时间的结束时间，表示查询任务开始时间在此时间之前的任务。按照ISO8601标准表示，并需要使用UTC +0时间，格式为yyyy-MM-ddTHH:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2022-03-02T11:31:03Z"}},{"name":"FromExecTime","in":"query","schema":{"description":"任务执行耗时的最小值。用于筛选任务执行耗时大于此时间的任务，单位秒。默认0，表示不限制。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"ToExecTime","in":"query","schema":{"description":"任务执行耗时的最大值。用于筛选任务执行耗时不小于此时间的任务，单位秒。默认0，表示不限制。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-ae****"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"PageNumber":{"description":"查询结果的页码。取值范围：正整数。\n默认值：**1**。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求唯一ID，如果遇到问题请提供这个请求ID，由工作人员为您排查。","type":"string","example":"5CD61041-35F7-10F7-BE94-33A48B22****"},"PageSize":{"description":"每页记录数，取值：**10~100**。默认值：**10**。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"不考虑分页因素，满足这些限制条件的总任务数。","type":"integer","format":"int32","example":"2"},"Items":{"description":"任务列表。","type":"array","items":{"description":"任务对象，格式是词典。","type":"object","properties":{"Status":{"description":"任务状态。\n* Scheduled - 等待执行\n* Running - 执行中\n* Succeed - 执行成功\n* Failed - 执行失败\n* Cancelling - 正在终止\n* Canceled - 已终止\n* Waiting - 等待预设时间","type":"string","example":"Running"},"TaskId":{"description":"任务ID，格式t-***","type":"string","example":"t-83br18hloy3faf****"},"CurrentStepName":{"description":"当前执行的步骤名，如果为空代表任务未开始。","type":"string","example":"exec_task"},"StartTime":{"description":"任务开始时间\nUTC +0时间，格式为yyyy-MM-ddTHH:mm:ssZ。","type":"string","example":"2022-02-03T11:31:03Z"},"EndTime":{"description":"任务结束时间\nUTC +0时间，格式为yyyy-MM-ddTHH:mm:ssZ。","type":"string","example":"2022-02-03T12:06:17Z"},"TaskType":{"description":"任务类型/任务名称。","type":"string","example":"autotest_dispatch_cases"},"RemainTime":{"description":"预估剩余执行时间，单位秒。","type":"integer","format":"int32","example":"1000"},"Progress":{"description":"当前进度，0～100。","type":"number","format":"float","example":"79.0"},"RegionId":{"description":"区域。","type":"string","example":"cn-shanghai"},"InstanceType":{"description":"实例类型，Eg. Instance 用户实例。","type":"string","example":"Instance"},"InstanceId":{"description":"实例ID，Eg. rm-xxx。","type":"string","example":"rm-uf62br2491p5l****"},"InstanceName":{"description":"实例名，用户自定义别名。","type":"string","example":"test"},"DbType":{"description":"DB类型。","type":"string","example":"mysql"},"Product":{"description":"产品, rds等。","type":"string","example":"rds"},"TaskDetail":{"description":"详情，JSON String 可扩展。\n不同taskType对应不同的输出。","type":"string","example":"{\\\"callerUid\\\":\\\"test\\\"}"},"ReasonCode":{"description":"当前任务发起的原因。","type":"string","example":" ****"},"ActionInfo":{"description":"允许的操作信息，具体使用时是根据currentStepName+status在此信息中匹配操作Action，如果未匹配到Action，代表任务当前状态不支持操作，示例：\n```\n  \"steps\": [\n    {\n      \"step_name\": \"exec_task\", // 步骤名, 与currentStepName匹配\n      \"action_info\": {    // 步骤支持的操作\n        \"Waiting\": [      // 状态，与status匹配\n          \"modifySwitchTime\" // 操作Action，可能多个，即代表支持多个操作\n        ]\n      }\n    },\n    {\n      \"step_name\": \"init_task\", // 步骤名\n      \"action_info\": {    // 步骤支持的操作\n        \"Running\": [      // 状态\n          \"cancel\",       // 操作\n          \"pause\"\n        ]\n      }\n    }\n  ]\n}\n```\n\n系统可能支持的操作：\nretry - 重试\ncancel - 取消\nmodifySwitchTime - 修改切换时间/恢复时间","type":"string","example":"{\\\"steps\\\":[{\\\"action_info\\\":{\\\"Waiting\\\":[\\\"modifySwitchTime\\\"]},\\\"step_name\\\":\\\"exec_task\\\"}]}"},"Uid":{"description":"资源所属用户ID。","type":"string","example":"141345906006****"},"CallerSource":{"description":"请求用户ID，callerSource为User时代表用户UID。","type":"string","example":"141345906006****"},"CallerUid":{"description":"请求来源\nSystem：系统\nUser：用户。","type":"string","example":"User"}}}}}}}},"errorCodes":{"400":[{"errorCode":"Param.Invalid","errorMessage":"Param invalid"},{"errorCode":"Param.Invalid.TimeEndBeforeStart","errorMessage":"Param invalid. End time before start time"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"PageNumber\\\": 1,\\n  \\\"RequestId\\\": \\\"5CD61041-35F7-10F7-BE94-33A48B22****\\\",\\n  \\\"PageSize\\\": 10,\\n  \\\"TotalCount\\\": 2,\\n  \\\"Items\\\": [\\n    {\\n      \\\"Status\\\": \\\"Running\\\",\\n      \\\"TaskId\\\": \\\"t-83br18hloy3faf****\\\",\\n      \\\"CurrentStepName\\\": \\\"exec_task\\\",\\n      \\\"StartTime\\\": \\\"2022-02-03T11:31:03Z\\\",\\n      \\\"EndTime\\\": \\\"2022-02-03T12:06:17Z\\\",\\n      \\\"TaskType\\\": \\\"autotest_dispatch_cases\\\",\\n      \\\"RemainTime\\\": 1000,\\n      \\\"Progress\\\": 79,\\n      \\\"RegionId\\\": \\\"cn-shanghai\\\",\\n      \\\"InstanceType\\\": \\\"Instance\\\",\\n      \\\"InstanceId\\\": \\\"rm-uf62br2491p5l****\\\",\\n      \\\"InstanceName\\\": \\\"test\\\",\\n      \\\"DbType\\\": \\\"mysql\\\",\\n      \\\"Product\\\": \\\"rds\\\",\\n      \\\"TaskDetail\\\": \\\"{\\\\\\\\\\\\\\\"callerUid\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"test\\\\\\\\\\\\\\\"}\\\",\\n      \\\"ReasonCode\\\": \\\" ****\\\",\\n      \\\"ActionInfo\\\": \\\"{\\\\\\\\\\\\\\\"steps\\\\\\\\\\\\\\\":[{\\\\\\\\\\\\\\\"action_info\\\\\\\\\\\\\\\":{\\\\\\\\\\\\\\\"Waiting\\\\\\\\\\\\\\\":[\\\\\\\\\\\\\\\"modifySwitchTime\\\\\\\\\\\\\\\"]},\\\\\\\\\\\\\\\"step_name\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"exec_task\\\\\\\\\\\\\\\"}]}\\\",\\n      \\\"Uid\\\": \\\"141345906006****\\\",\\n      \\\"CallerSource\\\": \\\"141345906006****\\\",\\n      \\\"CallerUid\\\": \\\"User\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询历史运维任务","description":"### 适用引擎\n\n- RDS MySQL\n- RDS PostgreSQL\n- RDS SQL Server\n\n### 相关功能文档\n><notice>使用该接口前，请仔细阅读功能文档，确保完全了解使用接口的前提条件及使用后造成的影响后，再进行操作。></notice>\n\n- [RDS MySQL任务列表](~~474275~~)\n- [RDS PostrgreSQL任务列表](~~474537~~)\n- [RDS SQL Server任务列表](~~614826~~)"}