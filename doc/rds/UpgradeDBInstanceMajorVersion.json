{"summary":"该接口用于发起RDS PostgreSQL实例大版本升级任务。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"DBInstanceClass","in":"query","schema":{"description":"升级后实例规格。CPU和内存配置必须大于等于原实例规格。\n\n例如，原实例规格`pg.n2.small.2c`的CPU为1核，内存为2GB，可升级为`pg.n2.medium.2c`，CPU为2核，内存为4 GB。\n\n> RDS PG的实例规格代码，请参见[RDS PostgreSQL主实例规格列表](~~276990~~)。","type":"string","required":false,"example":"pg.n2.medium.2c"}},{"name":"DBInstanceStorage","in":"query","schema":{"description":"升级后实例存储空间。\n\n单位：GB\n\n取值范围：\n- ESSD PL1云盘：20 GB ~ 3200 GB\n- ESSD PL2云盘：500 GB ~ 3200 GB\n- ESSD PL3云盘：1500 GB ~ 3200 GB\n\n> 本地盘实例升级大版本时，支持存储空间缩容。可选择的最小存储空间，请参见[升级数据库大版本](~~203309~~)。","type":"integer","format":"int32","required":false,"example":"20"}},{"name":"PayType","in":"query","schema":{"description":"计费方式。固定配置为按量付费，取值Postpaid。\n\n\n> 升级后如果需要变更实例的计费方式，请参见[按量付费转包年包月](~~96743~~)。","type":"string","required":true,"docRequired":true,"example":"Postpaid"}},{"name":"InstanceNetworkType","in":"query","schema":{"description":"升级后实例网络类型。固定配置为VPC，当前只支持专有网络实例进行大版本升级。\n\n如果网络类型为经典网络，请先切换为专有网络。关于如何查看或切换网络类型，请参见[切换网络类型](~~96761~~)。","type":"string","required":false,"example":"VPC"}},{"name":"SwitchTimeMode","in":"query","schema":{"description":"该参数与SwitchOver配合使用，只有**SwitchOver**参数取值为**true**时有效。表示割接时间。\n\n取值范围：\n- Immediate：立即生效。\n- MaintainTime：在可运维时间段内生效，可调用ModifyDBInstanceMaintainTime接口修改可运维时间段。","type":"string","required":false,"example":"Immediate"}},{"name":"SwitchTime","in":"query","schema":{"description":"预留参数，无需配置。","type":"string","required":false,"example":"2021-07-10T13:15:12Z"}},{"name":"SwitchOver","in":"query","schema":{"description":"割接配置，系统将创建一个新实例进行数据迁移。请选择迁移后是否自动切换至新实例。\n\n取值范围：\n\n- true：割接，自动切换。\n- false：不割接，不自动切换。此选项一般用于正式升级之前测试当前业务在新版本中的兼容性。\n\n> - 如果选择了割接：\n>     - 割接后无法回退，请谨慎选择。\n>     - 切换过程中，原实例会被变为只读，业务无法写入，请务必在业务低峰期进行。\n>     - 如果原实例中创建了只读实例，则无法选择割接。只能通过不割接升级实例，且原只读实例不会被克隆。升级完成后，您需要在新版本实例中另行创建PostgreSQL只读实例。\n> - 如果选择了不割接：\n>     - 迁移过程中，原实例的业务不会受到影响。\n>     - 如需通过不割接升级实例，需在迁移完成后把应用程序中的数据库连接地址改为新实例的连接地址。如何查看连接地址，请参见[查看或修改内外网地址和端口](~~96788~~)。","type":"string","required":false,"example":"false"}},{"name":"CollectStatMode","in":"query","schema":{"description":"选择在哪个时间点对数据库执行统计信息收集。\n- Before：表示割接前收集，可以保证业务稳定性。如果实例数据量太大可能会导致升级时间较久。\n- After：表示割接后收集，实例升级速度较快。升级后访问未生成统计信息的表可能导致执行计划不准确，业务高峰期还可能导致数据库宕机。\n\n> 对于不割接场景，割接前收集表示新实例开放读写前收集，割接后收集表示新实例开放读写后收集。","type":"string","required":false,"example":"After"}},{"name":"TargetMajorVersion","in":"query","schema":{"description":"升级后实例目标大版本。必须与执行升级前检查时设置的目标版本一致。\n\n> 可通过调用UpgradeDBInstanceMajorVersionPrecheck接口执行大版本升级前检查。","type":"string","required":false,"example":"13.0"}},{"name":"DBInstanceId","in":"query","schema":{"description":"原实例ID。","type":"string","required":false,"example":"pgm-bp1gm3yh0ht1****"}},{"name":"VPCId","in":"query","schema":{"description":"VPC ID。可以通过DescribeDBInstanceAttribute接口查看原实例的VPC ID。","type":"string","required":false,"example":"vpc-bp1opxu1zkhn00gzv****"}},{"name":"VSwitchId","in":"query","schema":{"description":"- 当原实例为基础系列实例时，配置目标实例交换机ID。\n- 当原实例为高可用系列实例时，可以配置目标主备实例交换机ID，使用逗号（,）分隔。\n\n> 配置的目标实例交换机需要与原实例处于同一可用区。可调用DescribeVSwitches接口查询获取。","type":"string","required":false,"example":"vsw-bp10aqj6o4lclxdrm****,vsw-bp10aqj6o4lclxdrm****"}},{"name":"PrivateIpAddress","in":"query","schema":{"description":"无需配置，表示目标实例的内网IP。系统默认通过VPCId和vSwitchId自动分配。","type":"string","required":false,"example":"172.16.XX.XX"}},{"name":"UsedTime","in":"query","schema":{"description":"预留参数，无需配置。","type":"string","required":false,"example":"1"}},{"name":"Period","in":"query","schema":{"description":"预留参数，无需配置。","type":"string","required":false,"example":"Month"}},{"name":"DBInstanceStorageType","in":"query","schema":{"description":"表示升级后实例的存储类型。\n\n取值范围：\n- cloud_ssd：SSD云盘\n- cloud_essd：ESSD PL1云盘\n- cloud_essd2：ESSD PL2云盘\n- cloud_essd3：ESSD PL3云盘\n\n\n版本升级功能基于云盘快照，当前升级后支持选择的存储类型如下。\n- 当原实例为SSD云盘时，可选SSD云盘。\n- 当原实例为ESSD云盘时，可选ESSD PL1云盘、ESSD PL2 云盘、ESSD PL3 云盘。\n- 当原实例为本地SSD盘时，可选ESSD PL1云盘、ESSD PL2 云盘、ESSD PL3 云盘。","type":"string","required":false,"example":"cloud_essd"}},{"name":"ZoneId","in":"query","schema":{"description":"目标主可用区ID。可以通过DescribeRegions接口查看可用区ID。\n\nRDS PostgreSQL支持升级后将新的实例配置到与原实例同一地域的其他可用区。","type":"string","required":false,"example":"cn-hangzhou-j"}},{"name":"ZoneIdSlave1","in":"query","schema":{"description":"仅当原实例为高可用系列时，该参数可配置，表示目标实例备可用区ID。\n\nRDS PostgreSQL支持升级后将新的备实例配置到与原实例同一地域的其他可用区。\n\n可以通过DescribeRegions接口查看可用区ID。","type":"string","required":false,"example":"cn-hangzhou-j"}},{"name":"ZoneIdSlave2","in":"query","schema":{"description":"预留参数，无需配置。","type":"string","required":false,"example":"cn-hangzhou-j"}}],"responses":{"200":{"schema":{"description":"返回参数详情。","type":"object","properties":{"DBInstanceId":{"description":"实例ID。","type":"string","example":"pgm-bp1gm3yh0ht1****"},"RequestId":{"description":"请求ID。","type":"string","example":"006729E5-2A33-5955-89E3-651D3F44EBE6"},"OrderId":{"description":"订单ID。","type":"string","example":"21128667463****"},"TaskId":{"description":"预留参数。","type":"integer","format":"int64","example":"416980000"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidUpgradePrecheckResult","errorMessage":"The upgrade precheck failed. No successful precheck task found in the past 7 days"},{"errorCode":"TargetEngineVersion.Parameters.NotFound","errorMessage":"targetEngineVersion is missing in the request."},{"errorCode":"InvalidDBInstanceStorageType","errorMessage":"The specified DBInstanceStorageType is invalid."},{"errorCode":"InvalidInstanceNetworkType","errorMessage":"The specified InstanceNetworkType is invalid."},{"errorCode":"InvalidVPCId","errorMessage":"The specified VPCId is invalid."},{"errorCode":"InvalidDedicatedHostGroupId","errorMessage":"The specified DedicatedHostGroupId is invalid."},{"errorCode":"InvalidPayType","errorMessage":"The specified PayType is invalid."},{"errorCode":"InvalidEngineVersion","errorMessage":"The specified EngineVersion is invalid."},{"errorCode":"InvalidDBInstanceStorage","errorMessage":"The specified DBInstanceStorage is invalid."},{"errorCode":"InvalidSwitchOver","errorMessage":"The specified SwitchOver is invalid."},{"errorCode":"PrimaryInstanceWithReadonlyNotSupport","errorMessage":"The specified primary instance with the read-only instance does not support the operation."},{"errorCode":"InvalidSwitchTimeMode","errorMessage":"The specified SwitchTimeMode is invalid."},{"errorCode":"InvalidSwitchTime","errorMessage":"The specified SwitchTime is invalid."},{"errorCode":"InvalidCollectStats","errorMessage":"The specified CollectStats is invalid."},{"errorCode":"IncorrectDBInstanceState","errorMessage":"The current instance state does not support this operation."},{"errorCode":"InvalidDBinstanceClass.ValueNotSupported","errorMessage":"The specified parameter DBinstanceClass is invalid."},{"errorCode":"InvalidDBInstanceClass.Offline","errorMessage":"The specified instance type is no longer provided. Please specify another instance type."},{"errorCode":"Order.ComboInstanceNotAllowOperate","errorMessage":"A package instance is not allowed to operate independently."},{"errorCode":"Price.PricingPlanResultNotFound","errorMessage":"Pricing plan price result not found."},{"errorCode":"Order.NoRealNameAuthentication","errorMessage":"You have not passed the real-name authentication and do not meet the purchase conditions. Please log in to the user center for real-name authentication."},{"errorCode":"InsufficientAvailableQuota","errorMessage":"Your account quota limit is less than 0, please recharge before trying to purchase."},{"errorCode":"CommodityServiceCalling.Exception","errorMessage":"Failed to call commodity service."},{"errorCode":"RegionDissolvedEOM","errorMessage":"Dear customer, Alibaba Cloud plans to optimize and adjust the current region. Cloud services in this region will cease operations. You are currently unable to operate new purchase orders. Thank you for your understanding and support."},{"errorCode":"Commodity.InvalidComponent","errorMessage":"The module you purchased is not legal, please buy it again."},{"errorCode":"RegionEndTimeDissolvedIndia","errorMessage":"Cloud services in the India (Mumbai) region will be discontinued. Set the validity date to July 15, 2024 or earlier than July 15, 2024."},{"errorCode":"RegionEndTimeDissolvedAustralia","errorMessage":"Cloud services in the Australia (Sydney) region will be discontinued. Set the validity date to September 30, 2024 or earlier than September 30, 2024."},{"errorCode":"Price.CommoditySys","errorMessage":"Commodity system call exception."},{"errorCode":"Pay.InsufficientBalance","errorMessage":"Insufficient available balance."},{"errorCode":"Order.PeriodInvalid","errorMessage":"There is a problem with the period you selected, please choose again."},{"errorCode":"pay.noCreditCard","errorMessage":"Account not bound to credit card."},{"errorCode":"Order.InstHasUnpaidOrder","errorMessage":"There is an unpaid order for the service you have purchased. Please pay or void it before placing the order."},{"errorCode":"noAvailablePaymentMethod","errorMessage":"No payment method is specified for your account. We recommend that you add a payment method."},{"errorCode":"BasicInfoUncompleted","errorMessage":"Your information is incomplete. Complete your information before the operation."},{"errorCode":"Risk.RiskControlRejection","errorMessage":"Your account is abnormal, please contact customer service for details."},{"errorCode":"Api.NotSupport","errorMessage":"Specified api is not supported."},{"errorCode":"ContainForbiddenLabelError","errorMessage":"There is a label that prohibits placing orders. Please contact your distributor for assistance."},{"errorCode":"InvalidDBInstanceId.NotFound","errorMessage":"The DBInstanceId provided does not exist in records."},{"errorCode":"InvalidInstanceLevel.DiskType","errorMessage":"Specified instance level not support request disk type"},{"errorCode":"InvalidParam","errorMessage":"Sepcified wal level Parameter is invalid. There are still logical slots in instance, so it can not be set as replica."},{"errorCode":"KmsApiError","errorMessage":"User secret key invalid."},{"errorCode":"System.SaleValidateFailed","errorMessage":"Sales expression validation system error."},{"errorCode":"Abs.InvalidAccount.NotFound","errorMessage":"account  is not found."}],"403":[{"errorCode":"TargetMajorVesionNotSupported","errorMessage":"The specified major version is not supported."},{"errorCode":"OrderStatus.UnPaid","errorMessage":"The specified db instance has unpaid order."},{"errorCode":"InvalidReduceDiskSize","errorMessage":"The storage capacity after the scale-down must be larger than the used amount."},{"errorCode":"CloudSSDNotSupport","errorMessage":"Cloud ssd does not support this operation, please upgrade to essd."},{"errorCode":"InvalidUserOperatorPermission","errorMessage":"The user permission does not support this operation."},{"errorCode":"InvalidVswitchId","errorMessage":"Specified conn vswitch id is not valid."}],"404":[{"errorCode":"InvalidDBInstanceName.NotFound","errorMessage":"The database instance does not exist."},{"errorCode":"IncorrectDBInstanceLockMode","errorMessage":"Current DB instance lock mode does not support this operation."},{"errorCode":"InvalidClusterKms","errorMessage":"The current instance does not authorized to access the Key Management Service."}],"500":[{"errorCode":"ExternalFailure","errorMessage":"The request processing has failed due to external service failure."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"DBInstanceId\\\": \\\"pgm-bp1gm3yh0ht1****\\\",\\n  \\\"RequestId\\\": \\\"006729E5-2A33-5955-89E3-651D3F44EBE6\\\",\\n  \\\"OrderId\\\": \\\"21128667463****\\\",\\n  \\\"TaskId\\\": 416980000\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpgradeDBInstanceMajorVersion>\\n    <RequestId>006729E5-2A33-5955-89E3-651D3F44EBE6</RequestId>\\n    <DBInstanceId>pgm-bp1gm3yh0ht1****</DBInstanceId>\\n    <OrderId>21128667463****</OrderId>\\n</UpgradeDBInstanceMajorVersion>\",\"errorExample\":\"\"}]","title":"升级RDS PostgreSQL数据库大版本","description":"### 适用引擎\nRDS PostgreSQL\n\n### 相关功能文档\n该API操作涉及费用，请仔细阅读相关功能文档，确保完全了解使用接口产生的费用、前提条件及使用后造成的影响后，再进行操作。\n\n[RDS PostgreSQL升级数据库大版本](~~203309~~)","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}