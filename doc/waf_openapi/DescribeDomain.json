{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"WAF实例的ID。\n\n> 您可以调用[DescribeInstanceInfo](~~140857~~)查询当前WAF实例的ID。","type":"string","required":true,"example":"waf-cn-7pp26f1****"}},{"name":"Domain","in":"query","schema":{"description":"要查询的域名名称。\n\n> 您可以调用[DescribeDomainNames](~~86373~~)查询所有已添加到WAF防护的域名。","type":"string","required":true,"example":"www.example.com"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次请求的ID。","type":"string","example":"D827FCFE-90A7-4330-9326-D33C8B4C7726"},"Domain":{"description":"域名的配置信息。","type":"object","properties":{"HttpToUserIp":{"description":"是否开启了HTTP回源功能。取值：\n\n- **0**：表示未开启。\n- **1**：表示已开启。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）且**HttpsPort**取值不为空（表示域名使用HTTPS协议）时，返回该参数。","type":"integer","format":"int32","example":"0"},"SniStatus":{"description":"是否开启了回源SNI。回源SNI表示WAF转发客户端请求到源站服务器，在与源站进行TLS握手时，通过SNI扩展字段（Server Name Indicator extension）指定要访问的主机，并与该主机建立HTTPS连接。取值：\n\n- **0**：表示未开启。\n- **1**：表示已开启。\n\n> 仅在**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式）且**HttpsPort**取值不为空（表示域名使用HTTPS协议）时，返回该参数。\n","type":"integer","format":"int32","example":"1"},"IsAccessProduct":{"description":"域名在WAF前是否配置有其他七层代理（例如高防、CDN等），即客户端访问流量到WAF前是否有经过其他七层代理转发。取值：\n\n- **0**：表示否。\n- **1**：表示是。","type":"integer","format":"int32","example":"1"},"AccessHeaderMode":{"description":"WAF获取客户端真实IP的方式。取值：\n\n- **0**：表示WAF读取请求头中X-Forwarded-For（XFF）字段的第一个值作为客户端IP。\n- **1**：表示WAF读取请求头中由您设置的自定义字段值作为客户端IP。\n\n> 仅当**IsAccessProduct**取值为**1**（表示WAF前有其他七层代理服务）时，返回该参数。","type":"integer","format":"int32","example":"1"},"HttpsRedirect":{"description":"是否开启了HTTPS强制跳转。取值：\n\n- **0**：表示未开启。\n- **1**：表示已开启。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）且**HttpsPort**取值不为空（表示域名使用HTTPS协议）时，返回该参数。","type":"integer","format":"int32","example":"0"},"IpFollowStatus":{"description":"是否开启了IPv4/IPv6回源协议跟随。取值：\n- **0**：表示未开启。\n- **1**：表示已开启。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"1"},"LoadBalancing":{"description":"回源时采用的负载均衡算法。取值：\n\n- **0**：表示IP Hash算法。\n- **1**：表示轮询算法。\n- **2**：表示Least Time算法。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"2"},"AccessType":{"description":"域名接入方式。取值：\n- **waf-cloud-dns**：表示CNAME接入。\n- **waf-cloud-native**：表示透明接入。","type":"string","example":"waf-cloud-dns"},"Version":{"description":"当前域名配置的版本。","type":"integer","format":"int64","example":"40"},"ClusterType":{"description":"WAF实例对应的集群类型。取值：\n\n- **0**：表示物理集群。\n- **1**：表示虚拟集群，即WAF独享集群。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"0"},"ReadTime":{"description":"WAF集群的读连接超时时长。单位：秒。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"120"},"WriteTime":{"description":"WAF集群的写连接超时时长。单位：秒。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"120"},"SniHost":{"description":"SNI扩展字段的自定义值。取值为空表示未自定义SNI值，默认使用请求头中**Host**字段的值作为SNI扩展字段的值。\n\n> 仅在**SniStatus**取值为**1**（表示开启SNI回源）时，返回该参数。","type":"string","example":"waf.example.com"},"ResourceGroupId":{"description":"WAF实例所属资源组ID。","type":"string","example":"rg-acfm2mkrunv****"},"Cname":{"description":"WAF为域名分配的CNAME地址。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"string","example":"kdmqyi3ck7xogegxpiyfpb0fj21mgkxn.****.com"},"ConnectionTime":{"description":"WAF集群的连接超时时长。单位：秒。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"integer","format":"int32","example":"5"},"LogHeaders":{"description":"域名的流量标记字段和值，用于标记经过WAF处理的流量。\n\n> 仅当域名开启了流量标记功能时，返回该参数。","type":"array","items":{"type":"object","properties":{"k":{"description":"流量标记字段的名称。","type":"string","example":"ALIWAF-TAG"},"v":{"description":"流量标记字段的值。","type":"string","example":"Yes"}}}},"CloudNativeInstances":{"description":"透明接入的配置列表。\n\n> 仅当**AccessType**取值为**waf-cloud-native**（表示域名使用透明接入方式接入WAF）时，返回该参数。","type":"array","items":{"type":"object","properties":{"RedirectionTypeName":{"description":"引流端口的类型。取值：\n\n- **SLB-L4**：表示从传统型负载均衡CLB（原SLB）实例的四层监听端口引流到WAF进行防护。\n- **SLB-L7**：表示从传统型负载均衡CLB（原SLB）实例的七层监听端口引流到WAF进行防护。\n- **ECS**：表示从云服务器ECS实例的监听端口引流到WAF进行防护。\n- **ALB**：表示从应用型负载均衡ALB实例的HTTP、HTTPS监听端口引流到WAF进行防护。","type":"string","example":"ALB"},"CloudNativeProductName":{"description":"云产品实例的类型。取值：\n\n- **SLB**：表示传统型负载均衡CLB（原SLB）实例。\n- **ECS**：表示云服务器ECS实例。\n- **ALB**：表示应用型负载均衡ALB实例。\n","type":"string","example":"ALB"},"InstanceId":{"description":"云产品实例的ID。","type":"string","example":"alb-s65nua68wdedsp****"},"IPAddressList":{"description":"云产品实例的公网IP地址列表。","type":"array","items":{"description":"云产品实例的公网IP地址。","type":"string","example":"39.XX.XX.197"},"example":"[\"39.XX.XX.197\"]"},"ProtocolPortConfigs":{"description":"协议及端口配置列表。","type":"array","items":{"description":"协议及端口配置。","type":"object","properties":{"Ports":{"description":"端口列表。","type":"array","items":{"description":"端口。","type":"integer","format":"int32","example":"80"},"example":"[80]"},"Protocol":{"description":"协议类型。取值：\n- **http**：表示HTTP协议。\n- **https**：表示HTTPS协议。","type":"string","example":"http"}}}}}}},"HttpPort":{"description":"HTTP端口列表。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"array","items":{"description":"HTTP端口。","type":"integer","format":"int32","example":"80"}},"Http2Port":{"description":"HTTP 2.0端口列表。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）且**HttpsPort**取值不为空（表示域名使用HTTPS协议）时，返回该参数。","type":"array","items":{"description":"HTTP 2.0端口。","type":"integer","format":"int32","example":"8443"}},"SourceIps":{"description":"源站服务器地址。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"array","items":{"description":"源站服务器地址。","type":"string","example":"39.XX.XX.197"}},"HttpsPort":{"description":"HTTPS端口列表。\n\n> 仅当**AccessType**取值为**waf-cloud-dns**（表示域名使用CNAME接入方式接入WAF）时，返回该参数。","type":"array","items":{"description":"HTTPS端口。","type":"integer","format":"int32","example":"443"}},"AccessHeaders":{"description":"用于获取客户端IP的自定义字段列表。\n\n> 仅当**AccessHeaderMode**取值为**1**（表示WAF读取请求头中由您设置的自定义字段值作为客户端IP）时，返回该参数。","type":"array","items":{"description":"用于获取客户端IP的自定义字段。","type":"string","example":"X-Client-IP"}},"Retry":{"description":"WAF回源失败时，是否重试。取值：\n\n- **true**：表示重试。\n\n- **false**：表示不重试。","type":"boolean","example":"false","default":"true"},"Keepalive":{"description":"是否保持长连接。取值：\n\n- **true**：表示保持长连接。\n\n- **false**：表示不保持长连接。","type":"boolean","example":"true","default":"true"},"KeepaliveRequests":{"description":"复用长连接的请求个数。取值范围：60~1000，单位：个。\n\n> 开启长连接后，复用多少个长连接。","type":"integer","format":"int32","example":"1000","default":"1000"},"KeepaliveTimeout":{"description":"空闲长连接超时时间，取值范围：1~60，默认15，单位：秒。\n\n> 复用的长连接空闲多少长后释放。","type":"integer","format":"int32","example":"15","default":"15"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"D827FCFE-90A7-4330-9326-D33C8B4C7726\\\",\\n  \\\"Domain\\\": {\\n    \\\"HttpToUserIp\\\": 0,\\n    \\\"SniStatus\\\": 1,\\n    \\\"IsAccessProduct\\\": 1,\\n    \\\"AccessHeaderMode\\\": 1,\\n    \\\"HttpsRedirect\\\": 0,\\n    \\\"IpFollowStatus\\\": 1,\\n    \\\"LoadBalancing\\\": 2,\\n    \\\"AccessType\\\": \\\"waf-cloud-dns\\\",\\n    \\\"Version\\\": 40,\\n    \\\"ClusterType\\\": 0,\\n    \\\"ReadTime\\\": 120,\\n    \\\"WriteTime\\\": 120,\\n    \\\"SniHost\\\": \\\"waf.example.com\\\",\\n    \\\"ResourceGroupId\\\": \\\"rg-acfm2mkrunv****\\\",\\n    \\\"Cname\\\": \\\"kdmqyi3ck7xogegxpiyfpb0fj21mgkxn.****.com\\\",\\n    \\\"ConnectionTime\\\": 5,\\n    \\\"LogHeaders\\\": [\\n      {\\n        \\\"k\\\": \\\"ALIWAF-TAG\\\",\\n        \\\"v\\\": \\\"Yes\\\"\\n      }\\n    ],\\n    \\\"CloudNativeInstances\\\": [\\n      {\\n        \\\"RedirectionTypeName\\\": \\\"ALB\\\",\\n        \\\"CloudNativeProductName\\\": \\\"ALB\\\",\\n        \\\"InstanceId\\\": \\\"alb-s65nua68wdedsp****\\\",\\n        \\\"IPAddressList\\\": [\\n          \\\"39.XX.XX.197\\\"\\n        ],\\n        \\\"ProtocolPortConfigs\\\": [\\n          {\\n            \\\"Ports\\\": [\\n              80\\n            ],\\n            \\\"Protocol\\\": \\\"http\\\"\\n          }\\n        ]\\n      }\\n    ],\\n    \\\"HttpPort\\\": [\\n      80\\n    ],\\n    \\\"Http2Port\\\": [\\n      8443\\n    ],\\n    \\\"SourceIps\\\": [\\n      \\\"39.XX.XX.197\\\"\\n    ],\\n    \\\"HttpsPort\\\": [\\n      443\\n    ],\\n    \\\"AccessHeaders\\\": [\\n      \\\"X-Client-IP\\\"\\n    ],\\n    \\\"Retry\\\": false,\\n    \\\"Keepalive\\\": true,\\n    \\\"KeepaliveRequests\\\": 1000,\\n    \\\"KeepaliveTimeout\\\": 15\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\\n<DescribeDomainResponse>\\n\\t<RequestId>D827FCFE-90A7-4330-9326-D33C8B4C7726</RequestId>\\n\\t<Domain>\\n\\t\\t<HttpToUserIp>0</HttpToUserIp>\\n\\t\\t<HttpPort>80</HttpPort>\\n\\t\\t<IsAccessProduct>1</IsAccessProduct>\\n\\t\\t<AccessHeaderMode>1</AccessHeaderMode>\\n\\t\\t<ResourceGroupId>rg-acfm2mkrunv****</ResourceGroupId>\\n\\t\\t<AccessHeaders>X-Client-IP</AccessHeaders>\\n\\t\\t<ReadTime>120</ReadTime>\\n\\t\\t<SourceIps>39.XX.XX.197</SourceIps>\\n\\t\\t<IpFollowStatus>1</IpFollowStatus>\\n\\t\\t<ClusterType>0</ClusterType>\\n\\t\\t<LoadBalancing>2</LoadBalancing>\\n\\t\\t<Cname>kdmqyi3ck7xogegxpiyfpb0fj21mgkxn.****.com</Cname>\\n\\t\\t<LogHeaders>\\n\\t\\t\\t<v>Yes</v>\\n\\t\\t\\t<k>ALIWAF-TAG</k>\\n\\t\\t</LogHeaders>\\n\\t\\t<WriteTime>120</WriteTime>\\n\\t\\t<Http2Port>443</Http2Port>\\n\\t\\t<Http2Port>8443</Http2Port>\\n\\t\\t<Version>40</Version>\\n\\t\\t<HttpsRedirect>0</HttpsRedirect>\\n\\t\\t<ConnectionTime>5</ConnectionTime>\\n\\t\\t<AccessType>waf-cloud-dns</AccessType>\\n\\t\\t<HttpsPort>443</HttpsPort>\\n\\t\\t<HttpsPort>8443</HttpsPort>\\n\\t</Domain>\\n</DescribeDomainResponse>\\n\",\"errorExample\":\"\"}]","title":"获取已添加的域名配置信息","summary":"查询已添加到WAF防护的域名的配置信息。","requestParamsDescription":"调用API时，除了本文中该API的请求参数，还需加入阿里云API公共请求参数。公共请求参数的详细介绍，请参见[公共参数](~~162719~~)。\n\n调用API的请求格式，请参见本文**示例**中的请求示例。","responseParamsDescription":" ","extraInfo":" "}