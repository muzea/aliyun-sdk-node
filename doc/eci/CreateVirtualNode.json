{"summary":"调用CreateVirtualNode创建一个虚拟节点（VNode），用于对接自建Kubernetes集群，使其可以扩展资源到ECI。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"ZoneId","in":"query","schema":{"description":"可用区ID。","type":"string","required":false,"example":"cn-hangzhou-b"}},{"name":"SecurityGroupId","in":"query","schema":{"description":"安全组ID。虚拟节点以及该虚拟节点下的ECI实例将加入到该安全组中。","type":"string","required":true,"docRequired":true,"example":"sg-2ze81zoc3yl7a3we****"}},{"name":"VSwitchId","in":"query","schema":{"description":"交换机ID。虚拟节点以及虚拟节点下的ECI实例所使用的交换机。    \n支持指定多个（1~10个）属于同一VPC的交换机。    ","type":"string","required":true,"docRequired":true,"example":"vsw-2ze23nqzig8inprou****"}},{"name":"VirtualNodeName","in":"query","schema":{"description":"虚拟节点的名称。长度为2~128个英文字符，可以包含小写英文字符、数字、半角句号（.）或者短划线（-）。","type":"string","required":false,"docRequired":false,"example":"testNode"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-uf66jeqopgqa9hdn****"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。只支持ASCII字符，且不能超过64个字符。更多详情，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"EnablePublicNetwork","in":"query","schema":{"description":"是否支持公网。默认为false。    \n如果设置为true，则虚拟节点将对外暴露一个公网IP。","type":"boolean","required":false,"example":"false"}},{"name":"EipInstanceId","in":"query","schema":{"description":"弹性公网IP的ID。","type":"string","required":false,"example":"eip-uf66jeqopgqa9hdn****"}},{"name":"KubeConfig","in":"query","schema":{"description":"虚拟节点要连接的K8s集群的KubeConfig。需进行Base64编码后传入。","type":"string","required":false,"example":"JTVDbmFwaVZlcnNpb24lM0ElMjB2MSU1Q25jbHVzdGVycyUzQSU1Q24tJTIwY2x1c3RlciUzQSU1Q24uLi******"}},{"name":"CustomResources","in":"query","schema":{"description":"虚拟节点支持的自定义资源。如果ECI Pod的request中声明了相应的自定义资源，则该Pod会被调度到VNode。\n格式为`资源名称=资源数量`，多个资源之间使用半角逗号间隔。","type":"string","required":false,"example":"example1.com=100,example2.com=200"}},{"name":"ClusterDomain","in":"query","schema":{"description":"集群的域名。配置后，除了主机的搜索域外，Kubelet会配置所有容器来搜索该域名。","type":"string","required":false,"example":"example.com"}},{"name":"ClusterDNS","in":"query","schema":{"description":"DNS服务器的IP地址。如果ECI Pod中设置了`dnsPolicy=ClusterFirst`，则使用该配置值为容器提供DNS服务。\n支持配置多个IP地址，多个IP地址之间使用半角逗号间隔。","type":"string","required":false,"example":"100.1.XX.XX"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"虚拟节点标签信息。","type":"array","items":{"description":"虚拟节点标签信息。","type":"object","properties":{"Key":{"description":"标签键。N的取值范围为1~20。","type":"string","required":false,"example":"name"},"Value":{"description":"标签值。N的取值范围为1~20。","type":"string","required":false,"example":"test"}},"required":false},"required":false,"maxItems":21}},{"name":"Taint","in":"query","style":"repeatList","schema":{"description":"虚拟节点污点信息。","type":"array","items":{"description":"虚拟节点污点信息。","type":"object","properties":{"Key":{"description":"污点的Key。N的取值范围为1~20。","type":"string","required":false,"example":"testKey"},"Value":{"description":"污点的Value。N的取值范围为1~20。","type":"string","required":false,"example":"testValue"},"Effect":{"description":"污点的Effect。N的取值范围为1~20。Effect的取值范围：\n\n- NoSchedule：不将Pod调度到具有该污点的节点上。\n- NoExecute：不将Pod调度到具有该污点的节点上的同时，驱逐节点上已经存在的Pod。\n- PreferNoSchedule：尽量不将Pod调度到具有该污点的节点上。","type":"string","required":false,"example":"NoSchedule"}},"required":false},"required":false,"maxItems":21}},{"name":"TlsBootstrapEnabled","in":"query","schema":{"description":"是否启用TLS启动引导。启用后，请使用TLS启动引导的KubeConfig证书。取值范围：\n\n- true：启用\n- false：不启用\n\n默认为false。\n","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"description":"返回信息。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"89164E78-FC82-4684-BE97-DCDD85D26546"},"VirtualNodeId":{"description":"虚拟节点ID。","type":"string","example":"vnd-2ze960zkdqrldeaw****"}}}}},"errorCodes":{"400":[{"errorCode":"Account.Arrearage","errorMessage":"Your account has an outstanding payment."},{"errorCode":"DryRunOperation","errorMessage":"Request validation has been passed with DryRun flag set."},{"errorCode":"InvalidParameter.CPU.Memory","errorMessage":"The specified cpu and memory are not allowed"},{"errorCode":"InvalidParameter.DuplicatedName","errorMessage":"The container group include containers with duplicate names."},{"errorCode":"InvalidParameter.DuplicatedVolumeName","errorMessage":"The container group includes volumes with duplicate names."},{"errorCode":"IncorrectStatus","errorMessage":"%s"},{"errorCode":"ServiceNotEnabled","errorMessage":"%s"},{"errorCode":"ImageSnapshot.IncorrectStatus","errorMessage":"%s"},{"errorCode":"ImageSnapshot.NotSupport","errorMessage":"%s"},{"errorCode":"DiskVolume.NotSupport","errorMessage":"The disk volume is not supported."},{"errorCode":"RamRole.NotSupport","errorMessage":"The RAM role is not supported."},{"errorCode":"DiskNumber.LimitExceed","errorMessage":"The maximum number of disks in an instance is exceeded."},{"errorCode":"InvalidPaymentMethod.InsufficientBalance","errorMessage":"No payment method is specified for your account. We recommend that you add a payment method or add funds to the prepayment balance."},{"errorCode":"DiskVolume.NotInSameZone","errorMessage":"The instance to be created and the disk are not in the same zone."},{"errorCode":"NoPermission","errorMessage":"You are not authorized to use the \"Product on ECI\" feature."},{"errorCode":"HighCpuMemConfigRequired","errorMessage":"You need to apply to be added to the whitelist of the specified CPU and memory."},{"errorCode":"RecommendEmpty.InstanceTypeFamilyNotMatched","errorMessage":"The recommended instance type is unavailable in the current zone. Try again later."},{"errorCode":"LocalDiskAmountNotMatch","errorMessage":"The number of local volumes does not match the instance type."},{"errorCode":"Payfor.CreditPayInsufficientBalance","errorMessage":"Your payment credit line is insufficient."},{"errorCode":"InvalidOperation.KMS.InstanceTypeNotSupport","errorMessage":"The specified instance is invalid. Only I/O optimized instances support KMS key."},{"errorCode":"InvalidParameter.Encrypted.KmsNotEnabled","errorMessage":"KMS must be enabled for encrypted disks."},{"errorCode":"InvalidParameter.KMS.EncryptedIllegal","errorMessage":"After configuring the parameter KmsKeyId, you must enable encryption."},{"errorCode":"Ipv6AddressNotSupportVsw","errorMessage":"IPv6 is not supported in the specified vSwitch."},{"errorCode":"EipAddressPoolIpNotEnough","errorMessage":"The ip address of specified PublicIpAddressPool is not enough."},{"errorCode":"VnodeDedicatedHostIdAlreadyExist","errorMessage":"DedicatedHostId:%s of Vnode:%s already exists."},{"errorCode":"DedicatedHostQuotaExceeded","errorMessage":"The quota of DedicatedHost is exceeded."}],"403":[{"errorCode":"OperationDenied.VswZoneMisMatch","errorMessage":"The specified VSwitchId is not in the specified Zone."},{"errorCode":"QuotaExceeded","errorMessage":"%s quota exceeded."},{"errorCode":"Zone.NotOnSale","errorMessage":"The specified zone is not available for purchase."},{"errorCode":"Forbidden.RiskControl","errorMessage":"This operation has been identified as an abnormal operation and cannot be processed."},{"errorCode":"Forbidden.SubUser","errorMessage":"The specified action is not available for you."},{"errorCode":"Forbidden.OnlyForInvitedTest","errorMessage":"Eci create action is only open to invited users during public beta."},{"errorCode":"OperationDenied.SecurityGroupMisMatch","errorMessage":"The specified VSwitchId and SecurityGroupId are not in the same VPC."},{"errorCode":"InvalidVSwitchId.IpNotEnough","errorMessage":"The specified VSwitch does not have enough IP addresses."},{"errorCode":"Forbidden.UserBussinessStatus","errorMessage":"This operation is not allowed, because you have overdue bills. Pay the overdue bill and try again."},{"errorCode":"Forbidden.UserNotRealNameAuthentication","errorMessage":"This operation is not allowed, because you have not passed the real-name verification."},{"errorCode":"InvalidUser.PassRoleForbidden","errorMessage":"The RAM user is not authorized to assume a RAM role."},{"errorCode":"NoPermission","errorMessage":"The RAM role does not belong to ECS."},{"errorCode":"OperationDenied.NoStock","errorMessage":"Sales of this resource are temporarily suspended in the specified zone. We recommend that you use the multi-zone creation function to avoid the risk of insufficient resource. For more information, see https://help.aliyun.com/document_detail/157290.html"},{"errorCode":"InvalidParameter.KMS.KeyId.Forbidden","errorMessage":"You are not authorized to access the specified KMSKeyId."},{"errorCode":"Forbidden.AccountClosed","errorMessage":"The operation is forbidden. Your account has been closed."},{"errorCode":"InvalidOperation.ResourceManagedByCloudProduct","errorMessage":"The operation is forbidden. The security group has been managed by another cloud product."},{"errorCode":"Spot.NotMatched","errorMessage":"%s. We recommend that you use the create multi-zone function to avoid insufficient inventory. For more information, see https://help.aliyun.com/document_detail/157290.html"},{"errorCode":"SecurityRisk.3DVerification","errorMessage":"We have detected a security risk with your default credit or debit card. Please proceed with verification via the link in your email."},{"errorCode":"CreateServiceLinkedRole.Denied","errorMessage":"Please make sure the account has ram:CreateServiceLinkedRole permission."}],"404":[{"errorCode":"ImageSnapshot.NotFound","errorMessage":"The specified snapshot does not exist."},{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified disk does not exist."},{"errorCode":"InvalidParameter.KMS.KeyId.NotFound","errorMessage":"The specified KMSKeyId does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"89164E78-FC82-4684-BE97-DCDD85D26546\\\",\\n  \\\"VirtualNodeId\\\": \\\"vnd-2ze960zkdqrldeaw****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateVirtualNodeResponse>\\n    <RequestId>89164E78-FC82-4684-BE97-DCDD85D26546</RequestId>\\n    <VirtualNodeId>vnd-2ze960zkdqrldeaw****</VirtualNodeId>\\n</CreateVirtualNodeResponse>\",\"errorExample\":\"\"}]","title":"创建一个虚拟节点","description":"- 调用本接口创建虚拟节点时，系统将自动为您创建一个服务关联角色AliyunServiceRoleForECIVnode，用于访问ECI、ECS、VPC等相关云服务。更多信息，请参见[虚拟节点服务关联角色](~~311014~~)。\n\n- 虚拟节点按个数计费。每个虚拟节点会有一个常驻节点，相当于2 vCPU，8 GiB的ECI实例，收取相关ECI实例费用。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}