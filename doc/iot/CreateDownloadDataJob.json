{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"formData","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无<props=\"intl\"><ph>**实例概览**页面或</ph></props>ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-cn-npk1u******"}},{"name":"TableName","in":"query","schema":{"description":"需下载的表名称。","type":"string","required":true,"example":"product_info"}},{"name":"DownloadDataType","in":"query","schema":{"description":"下载对象的类型，暂只支持**TABLE**。","type":"string","required":true,"example":"TABLE"}},{"name":"FileConfig","in":"query","style":"json","schema":{"description":"下载文件设置。给下载文件设置一个名称（fileName），可自定义，若fileName不传则默认生成一个文件名。","type":"object","required":false,"example":"{\"fileName\":\"fileName01\"}"}},{"name":"StartTime","in":"query","schema":{"description":"时间范围，查询数据的开始时间。","type":"integer","format":"int64","required":false,"example":"1658332800000"}},{"name":"EndTime","in":"query","schema":{"description":"时间范围，查询数据的结束时间。","type":"integer","format":"int64","required":false,"example":"1658406464534"}}],"responses":{"200":{"schema":{"description":"请求返回结果","type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"200"},"ErrorMessage":{"description":"调用失败时，返回的错误信息。","type":"string","example":"no authorization."},"RequestId":{"description":"请求ID，阿里云为该请求生成的唯一标识符。\n","type":"string","example":"4D6D7F71-1C94-4160-8511-EFF4B8F0643F"},"Success":{"description":"是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"Data":{"description":"请求的返回结果。","type":"object","properties":{"Status":{"description":"下载任务的执行状态。\n- **-1**：初始化中。\n- **0**：运行中。\n- **1**：执行成功。\n- **2**：执行失败。\n- **3**：已提交，等待中。\n- **4**：已取消。","type":"integer","format":"int32","example":"-1"},"LongJobId":{"description":"下载任务的ID。","type":"string","example":"62d949808bc742187xxxxxx"},"AsyncExecute":{"description":"是否是异步查询。\n- **true**：是异步查询。\n- **false**：不是异步查询，是同步查询。","type":"boolean","example":"true"},"CsvUrl":{"description":"OSS文件的下载地址。","type":"string","example":"https://oss-xxxx-xxxx.xxxx......"},"CsvFileName":{"description":"下载文件的名称。","type":"string","example":"test_download_file"}}}}}}},"errorCodes":{"400":[{"errorCode":"iot.dap.insight.noAuthorization","errorMessage":"no authorization."},{"errorCode":"iot.dap.insight.requestParamError","errorMessage":"request param error."},{"errorCode":"iot.dap.insight.serverError","errorMessage":"server hsf error please try later"},{"errorCode":"iot.dap.insight.queryTimeMoreThanQueryDays","errorMessage":"The query time range exceeded the allowed time range"},{"errorCode":"iot.dap.insight.processDownloadJobMoreConcurrenceCount","errorMessage":"the number of concurrent download tasks in progress exceeds the upper limit"},{"errorCode":"iot.dap.insight.downloadTimesUpperLimit","errorMessage":"the number of current job downloaded tasks exceeded the upper limit"},{"errorCode":"iot.dap.insight.downloadTaskNumUpperLimit","errorMessage":"the number of downloaded tasks exceeded the upper limit"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"ErrorMessage\\\": \\\"no authorization.\\\",\\n  \\\"RequestId\\\": \\\"4D6D7F71-1C94-4160-8511-EFF4B8F0643F\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Status\\\": -1,\\n    \\\"LongJobId\\\": \\\"62d949808bc742187xxxxxx\\\",\\n    \\\"AsyncExecute\\\": true,\\n    \\\"CsvUrl\\\": \\\"https://oss-xxxx-xxxx.xxxx......\\\",\\n    \\\"CsvFileName\\\": \\\"test_download_file\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDownloadDataJobResponse>\\n    <code>200</code>\\n    <data>\\n        <asyncExecute>true</asyncExecute>\\n        <longJobId>62d949808bc742187xxxxxx</longJobId>\\n        <resultDataInString/>\\n        <status>-1</status>\\n    </data>\\n    <requestId>C8E9E92F-ADD1-1434-BA90-E85F70F5C536</requestId>\\n    <success>true</success>\\n</CreateDownloadDataJobResponse>\",\"errorExample\":\"\"}]","title":"CreateDownloadDataJob","summary":"调用接口创建数据下载任务。","description":"## 使用说明\n\n- 该任务等同于在控制台创建的数据下载任务，用户可在对应数据表的导出管理页面查看此次下载任务的日志，并下载文件。\n\n- 通过该接口创建下载任务会增加[AMQP消息推送](~~143601~~)，其中`consumerGroupId`请选用`dop_aliyun_group_name`，消息内容包含此次下载任务的执行状态，用户可根据此状态，配合[GetDownloadFile](~~445783~~)接口获取文件下载地址或查看下载任务的异常信息。\n\n## 使用限制\n\n- 同一数据实例下，每次只能创建1个下载任务。待上一个任务执行完成后才能创建新的下载任务，否则会提示超过下载任务数限制异常。\n\n- 单次下载数据时间范围最多为3天。\n\n- 1天内只能创建3个下载任务，RAM用户共享阿里云账号配额。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。"}