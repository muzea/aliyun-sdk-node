{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该**ID**值，否则调用会失败。\n- 若无**实例概览**页面或**ID**值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-cn-0pp1n8t****"}},{"name":"Description","in":"query","schema":{"description":"任务的描述信息。长度不超过100个字符。","type":"string","required":false,"example":"jobDescription"}},{"name":"JobDocument","in":"query","schema":{"description":"下发给设备的任务执行规则文件。数据格式为JSON，长度不超过65536个字符。\n\n更多信息，请参见下文“JobDocument定义”。","type":"string","required":true,"example":"{ \"serviceIdentifier\": \"test_service\", \"params\": { \"key1\": \"value1\", \"key2\": \"value2\" } } "}},{"name":"Type","in":"query","schema":{"description":"任务类型。取值：\n- **INVOKE_SERVICE**：设备批量服务调用任务。\n- **SET_PROPERTY**：设备批量属性设置任务。\n- **PUB**：Pub批量消息推送任务。\n- **CUSTOM_JOB**：自定义任务。\n","type":"string","required":true,"example":"INVOKE_SERVICE"}},{"name":"JobFile","in":"query","style":"json","schema":{"description":"自定义任务中下发给设备的文件。\n\n仅**Type**为**CUSTOM_JOB**时，可传入此参数，且为非必传参数。\n\n更多信息，请参见下文“JobFile定义”。\n\n","type":"object","required":false,"example":"{   \"fileKey\":\"5cc34***f9/tazJ***s\",   \"signMethod\":\"Sha256\",   \"sign\":\"***\" }"}},{"name":"JobName","in":"query","schema":{"description":"任务名称。支持中文、英文字母、数字和下划线（_），长度范围为4~30个字符。","type":"string","required":true,"example":"oneJob"}},{"name":"TimeoutConfig","in":"query","style":"json","schema":{"description":"任务下作业执行的超时配置，数据格式为JSON，长度不超过8192个字符。\n\n更多信息，请参见下文“TimeoutConfig定义”。","type":"object","required":false,"example":"{\"inProgressTimeoutInMinutes\": 60}"}},{"name":"RolloutConfig","in":"query","style":"json","schema":{"description":"任务下作业推送速率配置，数据格式为JSON，长度不超过8192个字符。\n\n更多信息，请参见下文“RolloutConfig定义”。","type":"object","required":false,"example":"{\"maximumPerMinute\": 1000}"}},{"name":"TargetConfig","in":"query","style":"json","schema":{"description":"设备任务的目标设备配置。\n\n更多信息，请参见下文“TargetConfig”。","type":"object","required":true,"example":"{\"targetType\":\"PRODUCT_KEY\",\"targetProduct\":\"a1j***3d\"}"}},{"name":"ScheduledTime","in":"query","schema":{"description":"任务调度时间的毫秒数。取值范围：当前时间的10分钟后到7天之间。\n\n- 不传入此参数：任务创建后，立即初始化并调度执行。\n- 传入此参数：任务创建后，先初始化，等到设置的调度时间后，才开始调度执行。 ","type":"integer","format":"int64","required":false,"example":"1557062301656"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565"},"Success":{"description":"表示是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"JobId":{"description":"任务ID。任务的全局唯一标识符。","type":"string","example":"XUbmsMHmkqv0PiAG****010001"}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565\\\",\\n  \\\"Success\\\": true,\\n  \\\"JobId\\\": \\\"XUbmsMHmkqv0PiAG****010001\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateJobResponse>\\n<RequestId>E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565</RequestId>\\n<JobId>XUbmsMHmkqv0PiAG****010001</JobId>\\n<Success>true</Success>\\n</CreateJobResponse>\",\"errorExample\":\"\"}]","title":"创建任务","summary":"调用该接口创建设备任务。","description":"## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为5。\n\n  > RAM用户共享阿里云账号配额。\n","requestParamsDescription":"**TargetConfig定义**\n\n|名称|类型|描述|\n|------|------|------|\n|TargetType|String|目标设备的配置类型，可选值：<br>**DEVICE\\_LIST**，表示设备列表。<br>**GROUP\\_ID**，表示设备分组ID。<br>**PRODUCT\\_KEY**，表示设备所属产品的**ProductKey**。|\n|TargetDevices|List|设备任务的目标设备。仅**TargetType**为**DEVICE\\_LIST**时，传入此参数。<br>此参数最多传入200个设备。<br>更多信息，请参见下文“TargetDevice定义”。|\n|TargetGroup|String|设备任务的目标设备，所属设备分组的标识符（GroupID）。仅**TargetType**为**GROUP\\_ID**时，传入此参数。<br>不支持设置为设备动态分组的ID。<br>此设备分组中最多包含10万个设备。|\n|TargetProduct|String|设备任务的目标设备，所属产品的**ProductKey**。仅**TargetType**为**PRODUCT\\_KEY**时，传入此参数。<br>此产品下最多包含10万个设备。|\n\n**TargetDevice定义**\n|名称|类型|描述|\n|------|------|------|\n|IotId|String|目标设备的设备ID。|\n|ProductKey|String|目标设备所属产品的**ProductKey**。<br>如果传入该参数，需同时传入**DeviceName**。|\n|DeviceName|String|目标设备名称。<br>如果传入该参数，需同时传入**ProductKey**。|\n\n示例1\n```\n{\n\t\"TargetDevices\":\n\t[\n\t\t{\n\t\t\t\"IotId\":\"OPx***00101\",\n\t\t\t\"ProductKey\":\"a1A***n\",\n\t\t\t\"DeviceName\":\"devicenew\"\n\t\t}\n\t],\n\t\"TargetType\":\"DEVICE_LIST\"\n}\n```\n示例2\n```\n{\n\t\"targetGroup\":\"rY2***01\",\n\t\"targetType\":\"GROUP_ID\"\n}\n```\n示例3\n```\n{\n\t\"targetType\":\"PRODUCT_KEY\",\n\t\"targetProduct\":\"a1j***3d\"\n}\n```\n\n\n**RolloutConfig定义**\n|名称|类型|描述|\n|------|------|------|\n|maximumPerMinute|Integer|任务下每分钟推送的作业数量。默认值是1000。取值范围为50~1000。|\n|messageQoS|String|发送消息类型，仅对自定义任务和Pub批量消息推送任务生效。可取值：<br>**QoS0**，表示最多发送一次。<br>**QoS1**，表示最少发送一次。如果QoS1消息未接收到PUBACK消息，会在设备重连时，重新推送给设备。|\n\n示例\n```\n{\n  \"maximumPerMinute\": 1000,\n  \"messageQoS\":\"QoS1\"\n}\n```\n\n**TimeoutConfig定义**\n|名称|类型|描述|\n|------|------|------|\n|inProgressTimeoutInMinutes|Integer|任务下作业执行的超时时间，单位为分钟。<br>该参数仅对自定义任务生效。<br>从任务开始执行（状态更新为**IN\\_PROGRESS**）时计算，如果超过了超时时间，任务下作业仍未执行完成，将被自动设置为TIMED\\_OUT状态。<br>取值范围：<br>**INVOKE\\_SERVICE**类型任务：最大值为5，最小值为1，默认值为1。<br>**SET\\_PROPERTY**类型任务：最大值为5，最小值为1，默认值为1。<br>**CUSTOM\\_JOB**类型任务：最大值为3600，最小值为1，默认值为60。|\n\n示例\n```\n{\n  \"inProgressTimeoutInMinutes\": 60\n}\n```\n\n**JobDocument定义**\n**INVOKE\\_SERVICE**类型的任务用于批量调用设备服务，功能与[InvokeThingsService](~~96242~~)相似。\n|名称|类型|描述|\n|------|------|------|\n|serviceIdentifier|String|服务的标识符Identifier。<br>您可在物联网平台控制台对应实例下，单击**设备管理 > 产品**，找到设备所属产品，在产品详情的**功能定义**中查看。|\n|params|Object|要调用服务的入参信息。更多信息，请参见下文“params定义”。|\n\n**params定义**\n|名称|类型|描述|\n|------|------|------|\n|key|String|输入参数的标识符。您在创建该服务时，设置的输入参数的标识符。<br>您可在物联网平台控制台，设备所属产品的功能定义页面，从该产品的物模型，或单击该服务对应的编辑按钮，查看您设置的输入参数。|\n|value|String|指定参数值。该值需在您设置的输入参数的取值范围内。|\n\n示例\n```\n{\n\t\"serviceIdentifier\": \"test_service\",\n\t\"params\": {\n\t\t\"key1\": \"value1\",\n\t\t\"key2\": \"value2\"\n\t}\n}\n```\n\n**SET\\_PROPERTY**类型的Job用于批量设置设备属性值，功能与[SetDevicesProperty](~~96243~~)相似。\n|名称|类型|描述|\n|------|------|------|\n|params|Object|要设置的属性信息，组成为key:value。更多信息，请参见下文“params定义”。|\n\n**params定义**\n|名称|类型|描述|\n|------|------|------|\n|key|String|要设置属性的标识符identifier。您可在物联网平台控制台中，设备所属产品的功能定义中查看。<br>设置的属性必需是读写型。如果您指定了一个只读型的属性，设置将会失败。|\n|value|String|属性值。取值需和您定义属性的数据类型和取值范围保持一致。|\n\n```\n{\n\t\"params\": {\n\t\t\t\"key1\": \"value1\",\n\t\t\t\"key2\": \"value2\"\n\t }\n}\n```\n\n**CUSTOM_JOB**为自定义任务。\n|名称|类型|描述|\n|------|------|------|\n|key|String|自定义属性。|\n|value|String|自定义属性值。|\n\n\n```\n{\n  \"key\":\"value\"\n}\n```\n\n**JobFile定义**\n|名称|类型|描述|\n|------|------|------|\n|fileKey|String|使用**GenerateFileUploadURL**接口生成的文件**Key**。<br>创建任务前，必须先上传文件。具体操作，请参见[GenerateFileUploadURL](~~198575~~)的“使用说明”。<br>创建任务时会校验文件是否已经上传。|\n|signMethod|String|签名方法，可取值MD5和SHA256。|\n|sign|String|签名，通过URL上传的文件的根据相应的签名方法生成的签名参数。|\n\n示例\n```\n{\n  \"fileKey\":\"5cc34***/tazJff***\",\n  \"signMethod\":\"\",\n  \"sign\":\"\"\n}\n```\n\n\n调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}