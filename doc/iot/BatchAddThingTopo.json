{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无<props=\"intl\"><ph>**实例概览**页面或</ph></props>ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot_instc_pu****_c*-v64********"}},{"name":"GwProductKey","in":"query","schema":{"description":"网关设备所属的产品的ProductKey。","type":"string","required":true,"example":"a1vL7cp****"}},{"name":"GwDeviceName","in":"query","schema":{"description":"网关设备的名称。","type":"string","required":true,"example":"gateway"}},{"name":"TopoAddItem","in":"query","style":"repeatList","schema":{"description":"添加的的设备拓扑关系列表。","type":"array","items":{"type":"object","properties":{"ProductKey":{"description":"要接入网关的子设备所属的产品ProductKey。","type":"string","required":true,"example":"a1BwAGV****"},"DeviceName":{"description":"要接入网关的子设备名称。","type":"string","required":true,"example":"light"},"Sign":{"description":"添加拓扑关系的签名。\n根据签名计算方式**SignMethod(deviceSecret,content)**，计算出的结果作为Sign的取值。\n\n其中，**content**是将所有提交给服务器的子设备参数（Sign、SignMethod除外），按照英文字母升序，依次排序拼接（无拼接符号）的结果。\n\n例如，如果传入的设备参数为**ClientId=868575026974305、DeviceName=868575026974305、ProductKey=a1PB5fp1234、SignMethod=hmacmd5，且deviceSecret=1234**，那么签名计算为`hmacmd5(1234, clientId868575026974305deviceName868575026974305productKeya1PB5fpX1234)`；签名计算结果为`C1C1606D61884C5F16C9EA6622E5****`。\n> 示例中的**ClientId**为设备的客户端ID，您可自定义。","type":"string","required":true,"example":"C1C1606D61884C5F16C9EA6622E5****"},"Timestamp":{"description":"UTC时间戳。非必选。如果传入该参数，则需包含到签名计算中。","type":"string","required":false,"example":"1579335899000"},"SignMethod":{"description":"签名方法。支持**hmacSha1**、**hmacSha256**、**hmacMd5**和**Sha256**（大小写不敏感）。","type":"string","required":true,"example":"hmacMd5"},"ClientId":{"description":"设备端ID，可使用设备的SN码或MAC地址。非必选参数。如果传入该参数，则需包含到签名计算中。","type":"string","required":false,"example":"a1BwAGV****device1"}},"required":false},"required":true,"maxItems":50}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565"},"Success":{"description":"表示是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<BatchAddThingTopoResponse>\\n<RequestId>2E19BDAF-0FD0-4608-9F41-82D230CFEE38</RequestId>\\n<Success>true</Success>\\n</BatchAddThingTopoResponse>\",\"errorExample\":\"\"}]","title":"BatchAddThingTopo","summary":"调用该接口批量添加设备拓扑关系。","description":"## 使用说明\n\n- 单次调用最多可为一个网关添加10个子设备。\n\n- 接口调用者必须是网关的所有者（Owner）。\n\n- 单个阿里云账号调用该接口的QPS限流为5。\n\n- 如果传入的子设备已存在拓扑关系，则会将子设备原有的网关替换为当前网关。\n\n- 任意一个子设备与网关的拓扑关系建立失败时，系统回滚，传入的所有子设备与当前网关建立拓扑关系失败。\n\n## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为10。\n> RAM用户共享阿里云账号配额。\n","requestParamsDescription":" 调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}