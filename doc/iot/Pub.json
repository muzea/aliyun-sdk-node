{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该**ID**值，否则调用会失败。\n- 若无**实例概览**页面或**ID**值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-cn-0pp1n8t****"}},{"name":"CorrelationData","in":"query","schema":{"description":"使用MQTT 5.0版本通信协议时，请求和响应模式中的相关数据，用户可自定义。\n\n消息接收方可根据相关数据处理请求。\n\n> 您需要将相关数据转换为二进制数据，并进行Base64编码，从而生成String类型数据。","type":"string","required":false,"example":"aGVsbG8****"}},{"name":"ProductKey","in":"query","schema":{"description":"要接收消息的设备所属产品的**ProductKey**。","type":"string","required":true,"example":"a1Q5XoY****"}},{"name":"DeviceName","in":"query","schema":{"description":"MQTT云网关设备的名称。\n\n><notice>\n仅当需要向指定MQTT云网关设备发布消息时，需要传入该参数。\n></notice>","type":"string","required":false,"example":"device1"}},{"name":"Qos","in":"query","schema":{"description":"指定消息的发送方式。取值：\n\n- **0**：最多发送一次。\n- **1**：最少发送一次。如果QoS=1消息未接收到PUBACK消息，会在设备重连时，重新推送给设备。\n\n如果不传入此参数，则使用默认值**0**。\n\n通信消息的更多使用说明，请参见[使用限制的连接通信](~~30527~~)。\n\n","type":"integer","format":"int32","required":false,"example":"0","default":"0","enum":["0","1"]}},{"name":"ContentType","in":"query","schema":{"description":"使用MQTT 5.0版本通信协议时，发布消息的内容类型。\n\n典型应用于存放MIME类型文件，例如，文本文件类型：**text**、**plain**。","type":"string","required":false,"example":"text"}},{"name":"PayloadFormatIndicator","in":"query","schema":{"description":"使用MQTT 5.0版本通信协议时，发布消息的有效载荷标识，可取值：\n- **0**：消息是未确定的字节数据。\n- **1**：消息的有效载荷是UTF-8编码的字符数据。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"Retained","in":"query","schema":{"type":"boolean","required":false}},{"name":"MessageExpiryInterval","in":"query","schema":{"type":"integer","format":"int64","required":false}},{"name":"ResponseTopic","in":"query","schema":{"description":"使用MQTT 5.0版本通信协议时，请求和响应模式中的响应主题，即通信的Topic。更多消息，请参见[MQTT 5.0协议说明](~~30540~~)。","type":"string","required":false,"example":"/a1Q5XoY****/device1/user/update"}},{"name":"TopicFullName","in":"query","schema":{"description":"要接收消息的设备的自定义Topic。\n\n- 对于<props=\"china\"><ph>开源MQTT托管形态设备和</ph></props>MQTT云网关设备，自定义Topic为设备的原始自定义Topic。详细内容，请参见[Topic说明](~~433806~~)。\n- 对于<props=\"china\"><ph>非开源MQTT托管形态设备和</ph></props>非MQTT云网关设备，自定义Topic的格式支持为：\n\n    - `/${productKey}/${deviceName}/user/${TopicShortName}`：发送消息到指定**ProductKey**的指定设备。\n    - `/broadcast/${productKey}/${自定义字段}`：发送消息到指定**ProductKey**下已订阅该Topic的在线设备。`${productKey}`是要接收广播消息的具体产品的**ProductKey**；`${自定义字段}`为您自定义的任意字段。\n\n><notice> \n- Topic的操作权限必须为**订阅**或**发布和订阅**。\n- 调用该接口前，设备必须已订阅该Topic且未取消，否则无法接收本次发布的消息。\n\n></notice>\n\n查询自定义Topic方法：\n\n- 调用[QueryProductTopic](~~69647~~)接口，查询产品下的自定义Topic。\n- 在物联网平台控制台**产品详情**页面的**Topic类列表**页签下，查询产品下的自定义Topic。\n- 在物联网平台控制台**设备详情**页面的**Topic列表**页签下，查看设备已订阅的自定义Topic。","type":"string","required":true,"example":"/a1Q5XoY****/device1/user/get"}},{"name":"MessageContent","in":"formData","schema":{"description":"要发送的消息主体。您需要将消息原文转换成二进制数据，并进行Base64编码，从而生成消息主体。","type":"string","required":true,"example":"eyJ0ZXN0IjoidGFzayBwdWIgYnJvYWRjYXN0In0="}},{"name":"TopicAlias","in":"query","schema":{"type":"integer","format":"int32","required":false}},{"name":"UserProp","in":"query","style":"repeatList","schema":{"description":"使用MQTT 5.0版本通信协议时，用户自定义属性列表。","type":"array","items":{"type":"object","properties":{"Key":{"description":"使用MQTT 5.0版本通信协议时，用户自定义属性的Key。\n\n需要与**UserProp.N.Value**成对使用。","type":"string","required":false,"example":"key1"},"Value":{"description":"使用MQTT 5.0版本通信协议时，用户自定义属性的Value。\n\n需要与**UserProp.N.Key**成对使用。","type":"string","required":false,"example":"value1"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"MessageId":{"description":"成功发送消息后，云端生成的消息ID，用于标识该消息。","type":"string","example":"889455942124347329"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"BB71E443-4447-4024-A000-EDE09922891E"},"Success":{"description":"是否调用成功。\n\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"MessageId\\\": \\\"889455942124347329\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"BB71E443-4447-4024-A000-EDE09922891E\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<PubResponse>\\r\\n  <RequestId>BB71E443-4447-4024-A000-EDE09922891E</RequestId>\\r\\n  <Success>true</Success>\\r\\n  <MessageId>889455942124347329</MessageId>\\r\\n</PubResponse>\",\"errorExample\":\"\"}]","title":"Pub","summary":"调用该接口通过自定义Topic向设备发布消息，支持向指定产品下订阅了指定自定义Topic的在线设备发送广播消息。","description":"## 使用说明\n发送广播消息时：\n- 相关Topic是在设备开发时编码定义的，无需控制台创建。\n- 一个Topic默认最多可被1,000个设备订阅。若后续需要新增更多设备订阅自定义Topic的广播消息，可使用MQTT 5.0版本通信协议进行通信，通过设置自定义Topic支持保留消息广播和设置自定义Topic消息为保留消息来实现。使用说明，请参见[UpdateTopicConfig](~~601689~~)。\n\n## 使用限制\n该接口不支持下发设置属性和调用服务的指令。\n- 设置属性，请使用[SetDeviceProperty](~~69579~~)或[SetDevicesProperty](~~96243~~)。\n- 调用服务，请使用[InvokeThingService](~~69584~~)或[InvokeThingsService](~~96242~~)。\n\n## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为1600。\n> RAM用户共享阿里云账号配额。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}