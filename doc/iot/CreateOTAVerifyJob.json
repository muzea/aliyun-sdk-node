{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无<props=\"intl\"><ph>**实例概览**页面或</ph></props>ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot_instc_pu****_c*-v64********"}},{"name":"FirmwareId","in":"query","schema":{"description":"OTA升级包ID，升级包的唯一标识符。\n\n**FirmwareId**是调用[CreateOTAFirmware](~~147311~~)创建OTA升级包时，返回的参数之一。\n\n也可以调用[ListOTAFirmware](~~147450~~)，从返回参数中查看。","type":"string","required":true,"example":"nx3xxVvFdwvn6dim50PY03****"}},{"name":"TimeoutInMinutes","in":"query","schema":{"description":"设置设备升级超时时间，单位分钟，范围1~1,440。","type":"integer","format":"int32","required":false,"example":"1440"}},{"name":"ProductKey","in":"query","schema":{"description":"OTA升级包所属产品的ProductKey。","type":"string","required":true,"example":"a1VJwBw****"}},{"name":"NeedPush","in":"query","schema":{"description":"物联网平台是否主动向设备推送升级任务。\n\n- **true**（默认）：是。批次任务创建完成后，物联网平台主动将升级任务，直接推送给升级范围内的在线设备。\n    \n    此时，设备仍可主动向物联网平台发起请求，来获取OTA升级任务信息。\n\n- **false**：否。设备必须通过向物联网平台发起请求，来获取OTA升级任务信息。","type":"boolean","required":false,"example":"true"}},{"name":"NeedConfirm","in":"query","schema":{"description":"如需自主控制设备OTA升级时，可配置此参数，通过手机App来控制，设备是否可进行OTA升级。手机App需您自行开发。\n\n\n- **false**（默认）：否。直接按照**NeedPush**设置，获取OTA升级任务信息。\n- **true**：是。设备无法获取OTA升级任务，需App侧确认OTA升级后，才能按照**NeedPush**设置，获取OTA升级任务信息。","type":"boolean","required":false,"example":"false"}},{"name":"DownloadProtocol","in":"query","schema":{"description":"升级包下载协议，可选：**HTTPS**（默认）或**MQTT**。设备端收到物联网平台推送的升级包下载信息后，通过该协议下载升级包。\n\n><notice>使用MQTT协议下载升级包，必须符合以下条件：\n- 支持的地域：仅中国的华东2（上海）、华北2（北京）和华南1（深圳）。\n- OTA升级包：仅包含一个文件，且文件大小不超过16 MB。\n- 设备端SDK：必须使用物联网平台提供的C语言Link SDK最新版本的软件包，开发OTA升级和MQTT下载文件的能力。详细内容，请参见[使用MQTT协议下载升级包的OTA升级代码示例](~~330985~~)。\n\n></notice>","type":"string","required":false,"example":"HTTPS"}},{"name":"TargetDeviceName","in":"query","style":"repeatList","schema":{"description":"待验证的设备。\n\n> - 设备所属产品必须与OTA升级包所属产品一致。\n- 设备名称不能重复。\n- 最多可传入10个设备名称。","type":"array","items":{"type":"string","required":false},"required":true,"example":"testdevice","maxItems":10}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"type":"object","properties":{"Key":{"description":"批次标签key。仅支持英文字母、数字、半角句号（.），长度限制为1~30个字符。支持最多添加10个批次标签。\n\n批次标签将在向设备推送升级通知时下发给设备。\n\n> 批次标签可以不传入。**是否必选**的**是**，表示如果传入批次标签Tag，**Tag.N.Value**与**Tag.N.Key**必须成对传入。","type":"string","required":true,"example":"key1"},"Value":{"description":"批次标签value。长度限制为1~1024个字符。支持最多添加10个批次标签。所有批次标签key和vlaue的长度总和，不能超过4096个字符。\n\n> 批次标签可以不传入。**是否必选**的**是**，表示如果传入批次标签Tag，**Tag.N.Value**与**Tag.N.Key**必须成对传入。","type":"string","required":true,"example":"value1"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"29EC7245-0FA4-4BB6-B4F5-5F04818FDFB1"},"Success":{"description":"表示是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"Data":{"description":"调用成功时，返回的验证批次信息。详情见以下参数。","type":"object","properties":{"JobId":{"description":"OTA升级包验证任务ID，即用于验证OTA升级包的设备升级批次ID。","type":"string","example":"wahVIzGkCMuAUE2gDERM02****"},"UtcCreate":{"description":"OTA升级包验证任务的创建时间，UTC格式。","type":"string","example":"2019-11-04T06:22:19.566Z"}}}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"29EC7245-0FA4-4BB6-B4F5-5F04818FDFB1\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"JobId\\\": \\\"wahVIzGkCMuAUE2gDERM02****\\\",\\n    \\\"UtcCreate\\\": \\\"2019-11-04T06:22:19.566Z\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<CreateOTAVerifyJobResponse>\\r\\n <Data>\\r\\n   <JobId>wahVIzGkCMuAUE2gDERM02****</JobId>\\r\\n   <UtcCreate>2019-11-04T06:22:19.566Z</UtcCreate>\\r\\n </Data>\\r\\n <RequestId>29EC7245-0FA4-4BB6-B4F5-5F04818FDFB1</RequestId>\\r\\n <Success>true</Success>\\r\\n</CreateOTAVerifyJobResponse>\",\"errorExample\":\"\"}]","title":"CreateOTAVerifyJob","summary":"调用该接口创建OTA升级包验证任务。","description":"## 使用说明\n\n- 将OTA升级包推送给设备批量升级前，必须完成OTA升级包验证。只有已验证的OTA升级包才可用于批量设备升级。您可以调用[QueryOTAFirmware](~~147461~~)查看OTA升级包验证状态。\n- 不能对验证进行中或验证已成功的OTA升级包重复发起验证任务。\n- 最多只能传入10个设备用于OTA升级包验证。\n\n## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为10。\n> RAM用户共享阿里云账号配额。\n","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}