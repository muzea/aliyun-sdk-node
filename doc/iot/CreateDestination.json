{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"Configuration","in":"query","schema":{"description":"数据目的对应的配置信息，传入格式为JSON String。不同规则动作类型所需内容不同，具体要求和示例请参见本表格下方的参数补充说明。","type":"string","required":true,"example":"{\"topic\":\"/a1POX0c****/device1/user/get\",\"topicType\":1}"}},{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无**实例概览**页面或ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-2w****"}},{"name":"Type","in":"query","schema":{"description":"数据目的操作类型，可取值：\n\n- **REPUBLISH**：将解析器脚本处理后的Topic数据转发至物联网平台的另一个通信Topic。\n- **AMQP**：将解析器脚本处理后的Topic数据流转到AMQP消费组。\n- **DATAHUB**：将解析器脚本处理后的Topic数据转发至阿里云DataHub，进行流式数据处理。\n- **ONS**：将解析器脚本处理后的Topic数据转发至阿里云消息队列RocketMQ，进行消息分发。\n- **MNS**：将解析器脚本处理后的Topic数据发送至阿里云消息服务中，进行消息传输。\n- **FC**：将解析器脚本处理后的Topic数据发送至阿里云函数计算服务，进行事件计算。\n- **OTS**：将解析器脚本处理后的Topic数据发送至阿里云表格存储（Tablestore），进行NoSQL数据存储。","type":"string","required":true,"example":"REPUBLISH"}},{"name":"Name","in":"query","schema":{"description":"数据目的名称。","type":"string","required":true,"example":"DataPurpose"}},{"name":"Description","in":"query","schema":{"description":"数据目的描述信息。","type":"string","required":false,"example":"数据流转至数据库。"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E4C0FF92-2A86-41DB-92D3-73B60310D25E"},"Success":{"description":"表示是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"Destination":{"description":"创建成功后，返回的数据目的信息。","type":"object","properties":{"Type":{"description":"数据目的操作类型。","type":"string","example":"REPUBLISH"},"DestinationId":{"description":"数据目的ID。","type":"integer","format":"int64","example":"1003"},"Configuration":{"description":"数据目的对应的配置信息。","type":"string","example":"{\"topic\":\"/a1POX0c****/device1/user/get\",\"topicType\":1}"},"Name":{"description":"数据目的名称。","type":"string","example":"DataPurpose"},"UtcCreated":{"description":"创建数据目的对应的UTC时间。格式为`yyyy-MM-dd'T'HH:mm:ss.SSS'Z'`。","type":"string","example":"2022-03-27T12:45:43.000Z"},"IsFailover":{"description":"该数据目的配置是否为转发错误操作数据，即转发流转到其他云产品失败且重试失败的数据。\n\n- **true**：是转发错误操作数据。\n- **false**：不是转发错误操作数据，而是正常转发操作。\n\n默认值为**false**。","type":"boolean","example":"false"}}}}}}},"errorCodes":{"400":[{"errorCode":"iot.system.SystemException","errorMessage":"An internal error occurred. Try again later."},{"errorCode":"iot.system.IllegalRequest","errorMessage":"The request parameter is invalid."},{"errorCode":"iot.ruleng.NullRuleActionConfig","errorMessage":"The rule action configuration is empty."},{"errorCode":"iot.ruleng.NullRuleActionType","errorMessage":"The specified rule action is invalid or the rule action type is unspecified."},{"errorCode":"iot.ruleng.InvalidRamRole","errorMessage":"The RAM role is invalid"},{"errorCode":"iot.rule.DestinationCountExceed","errorMessage":"The count of destination exceeds the maximum number"},{"errorCode":"iot.rule.DestinationNameExisted","errorMessage":"The destination name is existed"},{"errorCode":"iot.rule.InvalidDestinationName","errorMessage":"The destination name is invalid"},{"errorCode":"iot.ruleng.RegionNotSupportRuleForwardCloudProduct","errorMessage":"The specified region does not support creating rules to publish messages to the specified cloud product"},{"errorCode":"iot.ruleng.IncorrectRegionName","errorMessage":"The regionName value is incorrect"},{"errorCode":"iot.consumer.group.InvalidConsumerGroupId","errorMessage":"Illegal consumer group ID"},{"errorCode":"iot.ruleng.NullProjectOfDatahub","errorMessage":"The project in DataHub is empty"},{"errorCode":"iot.ruleng.NotFoundTopicInDataHubProject","errorMessage":"This specified topic does not exist in the project in DataHub"},{"errorCode":"iot.ruleng.NotFoundVpcInstance","errorMessage":"The specified VPC instance does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"E4C0FF92-2A86-41DB-92D3-73B60310D25E\\\",\\n  \\\"Success\\\": true,\\n  \\\"Destination\\\": {\\n    \\\"Type\\\": \\\"REPUBLISH\\\",\\n    \\\"DestinationId\\\": 1003,\\n    \\\"Configuration\\\": \\\"{\\\\\\\"topic\\\\\\\":\\\\\\\"/a1POX0c****/device1/user/get\\\\\\\",\\\\\\\"topicType\\\\\\\":1}\\\",\\n    \\\"Name\\\": \\\"DataPurpose\\\",\\n    \\\"UtcCreated\\\": \\\"2022-03-27T12:45:43.000Z\\\",\\n    \\\"IsFailover\\\": false\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDestinationResponse>\\n<Destination>\\n    <Type>REPUBLISH</Type>\\n    <UtcCreated>2022-03-27T12:45:43.000Z</UtcCreated>\\n    <Configuration>{\\\"topic\\\":\\\"/a1POX0c****/device1/user/get\\\",\\\"topicType\\\":1}</Configuration>\\n    <IsFailover>false</IsFailover>\\n    <DestinationId>1003</DestinationId>\\n    <Name>DataPurpose</Name>\\n</Destination>\\n<RequestId>E4C0FF92-2A86-41DB-92D3-73B60310D25E</RequestId>\\n<Success>true</Success>\\n</CreateDestinationResponse>\",\"errorExample\":\"\"}]","title":"创建解析器流转数据目的","summary":"创建解析器流转数据目的。","description":"## QPS限制\n\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为10。\n> RAM用户共享阿里云账号配额。","requestParamsDescription":"**REPUBLISH类型Configuration定义**\n|名称|描述|\n|------|------|\n|productKey|转发至另一个Topic所属产品的ProductKey。|\n\nREPUBLISH类型**Configuration**示例：\n```\n{\n    \"productKey\":\"hf****3xn\"\n}\n```\n\n**AMQP类型Configuration定义**\n\n|名称|描述|\n|-------------|------------|\n|groupId|消费组ID。|\n\nAMQP类型**Configuration**示例：\n\n```\n{\n    \"groupId\":\"ZTh1JmuZcUfv44p4z00****\"\n}\n```\n\n**OTS类型Configuration定义**\n|名称|描述|\n|-------------|------------|\n|instanceName|表格存储中用来接收信息的实例名称。|\n|regionName|目标实例所在的阿里云地域代码，例如cn-shanghai。|\n|tableName|表格存储中用来接收信息的数据表名称。|\n|role|授权角色信息。通过授予物联网平台指定的系统服务角色，您可以授权物联网平台访问您的表格存储。授权角色信息：<br>`{\"roleName\":\"AliyunIOTAccessingOTSRole\",\"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingotsrole\"}`<br>`${uid}`为您的阿里云账号ID。您可以登录控制台，在账号安全设置页面查看您的账号ID。<br>`AliyunIOTAccessingOTSRole`是访问控制中定义的服务角色。用于授予物联网平台访问表格存储。关于角色的更多信息，请在访问控制RAM控制台的角色管理页面进行角色管理。|\n\nOTS类型**Configuration**示例：\n\n```\n{\n    \"instanceName\":\"${instanceName}\",\n    \"regionName\":\"cn-shanghai\",\n    \"tableName\":\"test_table\",\n    \"role\":{\n        \"roleName\":\"AliyunIOTAccessingOTSRole\",\n        \"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingotsrole\"\n    }\n}\n```\n\n**DATAHUB类型Configuration定义**\n\n|名称|描述|\n|-------------|------------ |\n|projectName|目标DataHub中用来接收信息的具体Project。|\n|topicName|目标DataHub中用来接收信息的具体Topic。|\n|regionName|目标DataHub所在的阿里云地域代码，例如cn-shanghai。|\n|role|授权角色信息。通过授予IoT指定的系统服务角色，您可以授权物联网平台访问您的DataHub。授权角色信息格式：<br>`{\"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingdatahubrole\",\"roleName\": \"AliyunIOTAccessingDataHubRole\"}`<br>`${uid}`为您的阿里云账号ID。您可以登录控制台，在账号安全设置页面查看您的账号ID。<br>`AliyunIOTAccessingDataHubRole`是访问控制中定义的服务角色。用于授予物联网平台访问DataHub。关于角色的更多信息，请在访问控制RAM控制台的角色管理页面进行角色管理。|\n\nDATAHUB类型**Configuration**示例：\n\n```\n{\n    \"role\":{\n        \"roleArn\": \"acs:ram::${uid}:role/aliyuniotaccessingdatahubrole\",\n        \"roleName\": \"AliyunIOTAccessingDataHubRole\"\n    },\n    \"ProjectName\": \"test_project_name\",\n    \"RegionName\": \"cn-shanghai\",\n    \"TopicName\": \"test_topic\"\n}\n```\n\n**MNS类型Configuration定义**\n|名称|描述|\n|-------------|------------|\n|themeName| 消息服务中用来接收信息的目标主题名称。|\n|regionName| 目标消息服务所在的阿里云地域代码，例如cn-shanghai。|\n|role| 授权角色信息。通过授予物联网平台指定的系统服务角色，您可以授权物联网平台访问您的消息服务。授权角色信息：<br>`{\"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingmnsrole\",\"roleName\": \"AliyunIOTAccessingMNSRole\"}`<br>`${uid}`为您的阿里云账号ID。您可以登录控制台，在账号安全设置页面查看您的账号ID。<br>`AliyunIOTAccessingMNSRole`是访问控制中定义的服务角色。用于授予物联网平台访问消息服务。关于角色的更多信息，请在访问控制RAM控制台的角色管理页面进行角色管理。|\n\nMNS类型**​Configuration**​​示例：\n\n```\n{\n    \"themeName\": \"test_name\",\n    \"role\":{\n        \"roleArn\": \"acs:ram::${uid}:role/aliyuniotaccessingmnsrole\",\n        \"roleName\": \"AliyunIOTAccessingMNSRole\"\n    },\n    \"regionName\": \"cn-shanghai\"\n}\n```\n\n**ONS类型Configuration定义**\n\n> 您需通过调用消息队列RocketMQ的SDK，或在消息队列RocketMQ控制台，授权物联网平台访问消息队列RocketMQ（至少要授予物联网平台发布权限），然后才能够成功创建将Topic数据转发至消息队列RocketMQ的规则动作。\n\n|名称|描述|\n|-------------|------------|\n|instanceId|RocketMQ中用来接收消息的目标Topic所属的实例ID。|\n|topic|RocketMQ中用来接收信息的目标Topic。|\n|regionName|目标RocketMQ实例所在的阿里云地域代码，例如cn-shanghai。<br>目前仅支持同地域内数据流转。\n|role|授权角色信息。通过授予物联网平台指定的系统服务角色，您可以授权物联网平台访问您的消息队列RocketMQ服务。授权角色信息：<br>`{\"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingmqrole\",\"roleName\": \"AliyunIOTAccessingMQRole\"}`<br>`${uid}`为您的阿里云账号ID。您可以登录控制台，在账号安全设置页面查看您的账号ID。<br>`AliyunIOTAccessingMQRole`是访问控制中定义的服务角色。用于授予物联网平台访问消息队列RocketMQ。关于角色的更多信息，请在访问控制RAM控制台的角色管理页面进行角色管理。|\n\nONS类型**Configuration**示例：\n\n```\n{\n    \"instanceId\": \"${MQ_INST_ID}\",\n    \"role\":\n    {\n        \"roleArn\": \"acs:ram::${uid}:role/aliyuniotaccessingmqrole\",\n        \"roleName\": \"AliyunIOTAccessingMQRole\"\n    },\n    \"regionName\": \"cn-shanghai\",\n    \"topic\": \"test_topic\"\n}\n```\n\n**FC类型Configuration定义**\n\n|名称|描述|\n|-------------|------------|\n|functionName| 函数服务中用来接收信息的目标函数名称。|\n|serviceName| 函数服务中用来接收信息的目标服务名称。|\n|regionName| 目标函数服务实例所在阿里云地域的代码，如cn-shanghai。|\n|role| 授权角色信息。通过授予物联网平台指定的系统服务角色，您可以授权物联网平台访问您的函数计算服务。授权角色信息：<br>`{\"roleArn\":\"acs:ram::${uid}:role/aliyuniotaccessingfcrole\",\"roleName\": \"AliyunIOTAccessingFCRole\"}`<br>`${uid}`为您的阿里云账号ID。您可以登录控制台，在账号安全设置页面查看您的账号ID。<br>`AliyunIOTAccessingFCRole`是访问控制中定义的服务角色。用于授予物联网平台访问函数计算。关于角色的更多信息，请在访问控制RAM控制台的角色管理页面进行角色管理。|\n\nFC类型**Configuration**示例：\n\n```\n{\n    \"role\":\n    {\n        \"roleArn\": \"acs:ram::${uid}:role/aliyuniotaccessingfcrole\",\n        \"roleName\": \"AliyunIOTAccessingFCRole\"\n    },\n    \"functionName\": \"${function_name}\",\n    \"serviceName\": \"${service_name}\",\n    \"regionName\": \"cn-shanghai\"\n}\n```\n\n调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}