{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"DeviceName","in":"formData","style":"repeatList","schema":{"description":"待分发的设备名称列表。最多包含1000个设备名称。","type":"array","items":{"type":"string","required":false},"required":true,"example":"RepeatList","maxItems":10000}},{"name":"TargetInstanceConfig","in":"formData","style":"repeatList","schema":{"description":"目标实例配置列表。","type":"array","items":{"type":"object","properties":{"TargetInstanceId":{"description":"设备分发的目标实例配置。实例ID详情，请参见参数**SourceInstanceId**描述。\n\n- 当参数**Strategy**为**1**时，此处可传入多个实例ID。\n- 当参数**Strategy**为**0**时，此处传入一个实例ID。","type":"string","required":true,"example":"iot-cn-6ja***"}},"required":false},"required":true,"maxItems":10}},{"name":"SourceInstanceId","in":"formData","schema":{"description":"设备所属的源实例ID。\n\n- 各地域公共实例ID：\n\n    - 华东2（上海）：iotx-oxssharez200。\n    - 日本：iotx-oxssharez300。\n    - 新加坡：iotx-oxssharez400。\n    - 美国（硅谷）：iotx-oxssharez500。\n    - 美国（弗吉尼亚）：iotx-oxssharez600。\n    - 德国（法兰克福）：iotx-oxssharez700。\n\n- 企业版实例ID：\n    \n    1. 登录物联网平台控制台，从顶部导航栏左上方的下拉菜单选择地域。\n    \n    2. 在**实例概览**页面，单击实例名称，在**实例详情**页面的**实例基本信息**中查看**实例ID**。\n","type":"string","required":true,"example":"iot-060***"}},{"name":"ProductKey","in":"formData","schema":{"description":"设备所属产品的**ProductKey**。","type":"string","required":true,"example":"a1BwAGV****"}},{"name":"TargetUid","in":"formData","schema":{"description":"设备所属的阿里云账号ID。可登录物联网平台控制台，单击账号头像，跳转至**安全设置**页面查看。\n\n**TargetUid**与**TargetAliyunId**参数至少传入一个。","type":"string","required":false,"example":"198***"}},{"name":"TargetAliyunId","in":"formData","schema":{"description":"设备所属的阿里云账号。可登录物联网平台控制台，单击账号头像，跳转至**安全设置**页面查看。\n\n**TargetUid**与**TargetAliyunId**参数至少传入一个。","type":"string","required":false,"example":" io****@example.com"}},{"name":"Strategy","in":"formData","schema":{"description":"分发策略。默认值为0。\n\n- **0**：指定地域，将设备分发到指定地域的一个实例中。\n- **1**：就近接入，配置多个地域的实例ID，设备将根据设备的IP位置动态接入其中距离最近的地域。","type":"integer","format":"int32","required":true,"example":"0"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565"},"Success":{"description":"表示是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"JobId":{"description":"调用成功后，返回的任务ID。任务的全局唯一标识符。","type":"string","example":"UbmsMHmkqv0PiAG****010001"}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565\\\",\\n  \\\"Success\\\": true,\\n  \\\"JobId\\\": \\\"UbmsMHmkqv0PiAG****010001\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDeviceDistributeJobResponse>\\n<RequestId>E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565</RequestId>\\n<JobId>UbmsMHmkqv0PiAG****010001</JobId>\\n<Success>true</Success>\\n</CreateDeviceDistributeJobResponse>\",\"errorExample\":\"\"}]","title":"CreateDeviceDistributeJob","summary":"调用该接口创建设备分发任务，默认同时分发设备所属产品。","description":"## 使用说明\n\n您可参考以下步骤，完成设备分发。\n\n1. 调用本接口发起设备分发任务（异步调用），获取返回参数**JobId**。\n\n2. 将上一步的返回参数**JobId**作为请求参数，重复调用接口[QueryDeviceDistributeJob](~~199536~~)，查看返回参数**Status**。\n   \n    > 您需根据接口的QPS限制，控制重复调用接口的频率。\n    \n    **Status**值如下，表示分发任务已处于最终态：\n    - **2**：设备分发任务正常执行完成。此时，不代表所有设备分发成功，每个设备的具体分发结果，请执行下一步获取。\n    - **3**：分发异常中断。处理异常流后，可重新发起设备分发任务。\n\n\n3. 将第一步的返回参数**JobId**作为请求参数，调用接口[QueryDeviceDistributeDetail](~~199533~~)，获取返回参数**File**，即分发结果的文件URL。\n\n    > 文件URL的有效期为10分钟。\n\n4. 通过文件URL获取分发结果详情，其中每个设备对应一个分发结果**Code**，当**Code**为200时，表示该设备分发成功。\n    \n    如果设备分发失败，您可按照以上操作，重新进行设备分发。\n\n\n\n## 限制说明\n\n- 调用云服务的接入地址**Endpoint**仅支持华东2（上海），即`iot.cn-shanghai.aliyuncs.com`。\n\n- 不支持调用本接口创建跨账号的分发任务。\n\n- 单个阿里云账号下，产品分发和设备分发的任务总数不超过10个。创建产品分发任务，请参见[CreateProductDistributeJob](~~199383~~)。\n\n- 单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为2。\n\n    > RAM用户共享阿里云账号配额。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}