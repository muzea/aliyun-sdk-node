{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该**ID**值，否则调用会失败。\n- 若无**实例概览**页面或**ID**值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-0pp1n8t****"}},{"name":"ProductKey","in":"query","schema":{"description":"要接收消息的设备所属产品的**ProductKey**。","type":"string","required":true,"example":"a1Q5XoY****"}},{"name":"EnableBroadcast","in":"query","schema":{"description":"是否支持保留消息广播。\n\n- **true**：是。\n- **false**：否。","type":"boolean","required":false,"example":"true"}},{"name":"EnableProxySubscribe","in":"query","schema":{"type":"boolean","required":false}},{"name":"Codec","in":"query","schema":{"type":"string","required":false}},{"name":"Operation","in":"query","schema":{"type":"string","required":false}},{"name":"TopicFullName","in":"query","schema":{"description":"要广播消息的自定义Topic。\n\n\n- 对于<props=\"china\"><ph>开源MQTT托管形态设备和</ph></props>MQTT云网关设备，自定义Topic为设备的原始自定义Topic。详细内容，请参见[Topic说明](~~433806~~)。\n- 对于<props=\"china\"><ph>非开源MQTT托管形态设备和</ph></props>非MQTT云网关设备，自定义Topic的格式为`/broadcast/${productKey}/${自定义字段}`。其中`${productKey}`与请求参数**ProductKey**值一致，`${自定义字段}`为您自定义的任意字段。\n\n><notice> \n- Topic是在设备开发时编码定义的，无需控制台创建。\n- Topic的操作权限必须为**订阅**或**发布和订阅**。\n\n></notice>","type":"string","required":true,"example":"/broadcast/a1Q5XoY****/test"}},{"name":"Description","in":"query","schema":{"type":"string","required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回错误码。详细信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"Message":{"type":"string"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565"},"Success":{"description":"是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"iot.message.broker.ParamCheckError","errorMessage":"Param check error."},{"errorCode":"iot.message.broker.ProductCheckError","errorMessage":"Product check error."},{"errorCode":"iot.message.broker.TopicConfigNumExceed","errorMessage":"Topic config num exceed."},{"errorCode":"iot.message.broker.SystemError","errorMessage":"System error."},{"errorCode":"iot.messagebroker.InvalidPubTopicFormat","errorMessage":"The pub topic cannot contain wildcard character."},{"errorCode":"iot.messagebroker.InvalidOperationWithBroadcast","errorMessage":"The operation must be sub when enable broadcast."},{"errorCode":"iot.messagebroker.InvalidTopicWithBroadcast","errorMessage":"The topic cannot contain wildcard character when enable broadcast."},{"errorCode":"iot.messagebroker.InvalidOperationWithProxySubscribe","errorMessage":"Operation must be sub or all when enable proxy subscribe."},{"errorCode":"iot.messagebroker.InvalidTopicWithProxySubscribe","errorMessage":"Topic cannot contain wildcard character when enable proxy subscribe."},{"errorCode":"iot.messagebroker.InvalidTopicWithCodec","errorMessage":"Topic cannot contain wildcard when enable codec."},{"errorCode":"iot.messagebroker.InvalidInstanceWithCodec","errorMessage":"Only connect instance support codec."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"Message\\\": \\\"\\\",\\n  \\\"RequestId\\\": \\\"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<RequestId>E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565</RequestId>\\n<Code/>\\n<Success>true</Success>\",\"errorExample\":\"\"}]","title":"UpdateTopicConfig","summary":"调用该接口设置自定义Topic是否支持保留消息广播。","description":"## 使用说明\n一个自定义Topic广播消息时，最多可被1,000个设备订阅。若后续需要新增更多设备订阅该自定义Topic的广播消息，可使用MQTT 5.0版本通信协议进行通信，通过设置自定义Topic支持保留消息广播和设置自定义Topic消息为保留消息来实现。\n具体步骤为：\n\n1. 调用本接口设置指定的自定义Topic（例如：`/broadcast/a1Q5XoY****/test`）支持保留消息广播，即**EnableBroadcast**设置为**true**。\n2. 调用[Pub](~~69793~~)接口向该自定义Topic（例如：`/broadcast/a1Q5XoY****/test`）发布广播消息，并设置为保留消息，即**Retained**设置为**true**。\n3. 调用[SubscribeTopic](~~311869~~)接口，新增设备订阅该自定义Topic（例如：`/broadcast/a1Q5XoY****/test`），设备即可收到上一步向该自定义Topic发送的保留消息。\n\n\n## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为100。\n> RAM用户共享阿里云账号配额。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}