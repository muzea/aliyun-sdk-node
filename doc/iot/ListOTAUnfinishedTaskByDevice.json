{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无<props=\"intl\"><ph>**实例概览**页面或</ph></props>ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-c3j***"}},{"name":"ModuleName","in":"query","schema":{"description":"OTA模块名称。\n\n- 传入时，表示查询指定模块的升级任务。\n- 不传入时，表示查询所有模块的升级任务。","type":"string","required":false,"example":"WifiConfigModify"}},{"name":"ProductKey","in":"query","schema":{"description":"设备所属产品的ProductKey。\n\n><notice>如果传入该参数，需同时传入**DeviceName**。\n   ></notice>","type":"string","required":false,"example":"a19mzPZ****"}},{"name":"DeviceName","in":"query","schema":{"description":"设备名称。\n\n><notice>如果传入该参数，需同时传入**ProductKey**。\n></notice>","type":"string","required":false,"example":"light"}},{"name":"TaskStatus","in":"query","schema":{"description":"查询单个指定升级状态下的设备升级作业。\n- **CONFIRM**：待确认。\n- **QUEUED**：待推送。\n- **NOTIFIED**：已推送。\n- **IN_PROGRESS**：升级中。\n\n> 单次调用本接口，仅可传入一个状态进行查询。该参数与**TaskStatusList**二选一使用。\n","type":"string","required":false,"example":"CONFIRM"}},{"name":"IotId","in":"query","schema":{"description":"要查询设备的设备ID。\n\n><notice>如果传入该参数，则无需传入**ProductKey**和**DeviceName**。**IotId**作为设备唯一标识符，和**ProductKey**与**DeviceName**的组合是一一对应的关系。如果您同时传入**IotId**和**ProductKey**与**DeviceName**的组合，则以**IotId**为准。\n></notice>","type":"string","required":false,"example":"TfmUAeJjQQhCPH84UVNn0010c6****"}},{"name":"TaskStatusList","in":"query","style":"repeatList","schema":{"description":"查询多个指定升级状态下的设备升级作业。\n- **CONFIRM**：待确认。\n- **QUEUED**：待推送。\n- **NOTIFIED**：已推送。\n- **IN_PROGRESS**：升级中。\n\n> 单次调用本接口，可传入多个状态进行查询。该参数与**TaskStatus**二选一使用。","type":"array","items":{"type":"string"},"required":false,"example":"QUEUED","maxItems":4}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"A59D3BE1-E9A3-43F3-9B50-B7C8DE165D9B"},"Success":{"description":"表示是否调用成功。\n\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"Data":{"type":"object","properties":{"SimpleOTATaskInfo":{"description":"调用成功时，返回的升级作业信息。详细内容，请参见以下**SimpleOTATaskInfo**。","type":"array","items":{"type":"object","properties":{"ModuleName":{"description":"OTA模块名称。","type":"string","example":"WifiConfigModify"},"ProductName":{"description":"设备所属产品的名称。","type":"string","example":"MyProduct"},"DeviceName":{"description":"设备名称。","type":"string","example":"light"},"UtcCreate":{"description":"升级作业创建时的时间，UTC格式。","type":"string","example":"2019-11-04T03:38:22.000Z"},"ProductKey":{"description":"设备所属产品的ProductKey。","type":"string","example":"a1GUfrM****"},"TaskStatus":{"description":"设备升级作业状态。\n\n- **CONFIRM**：待确认。\n- **QUEUED**：待推送。\n- **NOTIFIED**：已推送。\n- **IN_PROGRESS**：升级中。","type":"string","example":"CONFIRM"},"UtcModified":{"description":"升级作业最后一次修改时的时间，UTC格式。","type":"string","example":"2021-11-04T03:38:22.000Z"},"JobId":{"description":"升级批次ID。","type":"string","example":"7glPHmaDYLAYMD1HHutT02****"},"SrcVersion":{"description":"设备的原版本。","type":"string","example":"1.0.0"},"TaskId":{"description":"设备升级作业ID。","type":"string","example":"y3tOmCDNgpR8F9jnVEzC01****"},"DestVersion":{"description":"升级的目标版本。","type":"string","example":"1.0.1"},"FirmwareId":{"description":"升级包ID。","type":"string","example":"q3j9OYBjUAZMv1hlMgdo03****"},"IotId":{"description":"设备ID。物联网平台为该设备颁发的ID，设备的唯一标识符。","type":"string","example":"nadRdeffljdEndlfadgadfse****"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"iot.common.InvalidPageParams","errorMessage":"The specified pagination size or pagination parameter is invalid."},{"errorCode":"iot.prod.NullProductKey","errorMessage":"The productKey is empty."},{"errorCode":"iot.prod.InvalidFormattedProductkey","errorMessage":"The productKey format is incorrect."},{"errorCode":"iot.ota.NullOtaModuleName","errorMessage":"the module name can not be empty."},{"errorCode":"iot.ota.InvalidOtaModuleName","errorMessage":"the format of module name is invalid."},{"errorCode":"iot.ota.EmptyDeviceInfoParams","errorMessage":"the device info in params is empty"},{"errorCode":"iot.firmware.InvalidTaskStatus","errorMessage":"Invalid TaskStatus."},{"errorCode":"iot.device.InvalidFormattedDeviceNameInNameArray","errorMessage":"The deviceName list contains an invalid device name."},{"errorCode":"iot.firmware.ListOTATaskByDeviceFailed","errorMessage":"Failed to list OTA tasks by device."},{"errorCode":"iot.device.NotExistedDevice","errorMessage":"The device does not exist."},{"errorCode":"iot.prod.NotExistedProduct","errorMessage":"The specified product does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"RequestId\\\": \\\"A59D3BE1-E9A3-43F3-9B50-B7C8DE165D9B\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"SimpleOTATaskInfo\\\": [\\n      {\\n        \\\"ModuleName\\\": \\\"WifiConfigModify\\\",\\n        \\\"ProductName\\\": \\\"MyProduct\\\",\\n        \\\"DeviceName\\\": \\\"light\\\",\\n        \\\"UtcCreate\\\": \\\"2019-11-04T03:38:22.000Z\\\",\\n        \\\"ProductKey\\\": \\\"a1GUfrM****\\\",\\n        \\\"TaskStatus\\\": \\\"CONFIRM\\\",\\n        \\\"UtcModified\\\": \\\"2021-11-04T03:38:22.000Z\\\",\\n        \\\"JobId\\\": \\\"7glPHmaDYLAYMD1HHutT02****\\\",\\n        \\\"SrcVersion\\\": \\\"1.0.0\\\",\\n        \\\"TaskId\\\": \\\"y3tOmCDNgpR8F9jnVEzC01****\\\",\\n        \\\"DestVersion\\\": \\\"1.0.1\\\",\\n        \\\"FirmwareId\\\": \\\"q3j9OYBjUAZMv1hlMgdo03****\\\",\\n        \\\"IotId\\\": \\\"nadRdeffljdEndlfadgadfse****\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ListOTAUnfinishedTaskByDevice>\\n<Data>\\n    <SimpleOTATaskInfo>\\n        <SrcVersion>1.0.0</SrcVersion>\\n        <DeviceName>testDevice1</DeviceName>\\n        <FirmwareId>q3j9OYBjUAZMv1hlMgdo03****</FirmwareId>\\n        <IotId>SR8FiTu1R9tlUR2V1bmi00105****</IotId>\\n        <ProductKey>a1GUfrM****</ProductKey>\\n        <JobId>7glPHmaDYLAYMD1HHutT02****</JobId>\\n        <DestVersion>1.0.1</DestVersion>\\n        <UtcCreate>2019-11-04T03:38:15.000Z</UtcCreate>\\n        <UtcModified>2019-11-04T03:38:15.000Z</UtcModified>\\n        <TaskStatus>QUEUED</TaskStatus>\\n        <ProductName>MyProduct</ProductName>\\n        <TaskId>y3tOmCDNgpR8F9jnVEzC01****</TaskId>\\n        <ModuleName>WifiConfigModify</ModuleName>\\n    </SimpleOTATaskInfo>\\n    <SimpleOTATaskInfo>\\n        <SrcVersion>1.0.0</SrcVersion>\\n        <DeviceName>testDevice2</DeviceName>\\n        <FirmwareId>q3j9OYBjUAZMv1hlMgdo03****</FirmwareId>\\n        <IotId>nadRdeffljdEndlfadgadfse****</IotId>\\n        <ProductKey>a1GUfrM****</ProductKey>\\n        <JobId>7glPHmaDYLAYMD1HHutT02****</JobId>\\n        <DestVersion>1.0.1</DestVersion>\\n        <UtcCreate>2019-11-04T03:38:22.000Z</UtcCreate>\\n        <UtcModified>2019-11-04T03:38:22.000Z</UtcModified>\\n        <TaskStatus>CONFIRM</TaskStatus>\\n        <ProductName>MyProduct</ProductName>\\n        <TaskId>ZS9sNBb1ahsu6khqr9II01****</TaskId>\\n        <ModuleName>ConfigModify</ModuleName>\\n    </SimpleOTATaskInfo>\\n</Data>\\n<RequestId>A59D3BE1-E9A3-43F3-9B50-B7C8DE165D9B</RequestId>\\n<Success>true</Success>\\n</ListOTAUnfinishedTaskByDevice>\",\"errorExample\":\"\"}]","title":"查询指定设备未完成的升级作业","summary":"查询指定设备下，未完成状态的设备升级作业。","description":"## 使用说明\n请求参数中的**IotId**作为设备唯一标识符，和**ProductKey**与**DeviceName**的组合是一一对应的关系。调用API时，**ProductKey**与**DeviceName**的组合和**IotId**必须传入一个。\n\n## QPS限制\n\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为10。\n\n   > 单个阿里云账号下的所有RAM用户共享该阿里云账号的配额。","requestParamsDescription":"  调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}