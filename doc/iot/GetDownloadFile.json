{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get"},"parameters":[{"name":"Context","in":"formData","style":"json","schema":{"description":"请求内容。","type":"object","required":false,"example":"{\"xxx\";xxx}"}},{"name":"IotInstanceId","in":"formData","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有ID值，必须传入该ID值，否则调用会失败。\n- 若无<props=\"intl\"><ph>**实例概览**页面或</ph></props>ID值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot-cn-npk1u******"}},{"name":"LongJobId","in":"query","schema":{"description":"创建下载任务时返回的长任务ID，请参见[CreateDownloadDataJob](~~445782~~)中的**LongJobId**参数。","type":"string","required":true,"example":"62d949808bc742187xxxxxx"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"200"},"ErrorMessage":{"description":"调用失败时，返回的错误信息。","type":"string","example":"no authorization."},"RequestId":{"description":"请求ID，阿里云为该请求生成的唯一标识符。","type":"string","example":"BB71E443-4447-4024-A000-EDE09934****"},"Success":{"description":"是否调用成功。\n- **true**：调用成功。\n- **false**：调用失败。","type":"boolean","example":"true"},"Data":{"description":"数据。","type":"object","properties":{"Status":{"description":"下载任务的执行状态。\n- **-1**：初始化中。\n- **0**：运行中。\n- **1**：执行成功。\n- **2**：执行失败。\n- **3**：已提交，等待中。\n- **4**：已取消。","type":"integer","format":"int32","example":"1"},"LongJobId":{"description":"下载任务的ID。","type":"string","example":"62d949808bc742187xxxxxx"},"BeginTime":{"description":"下载任务的开始时间。","type":"integer","format":"int64","example":"1658406464534"},"AsyncExecute":{"description":"是否是异步查询。\n- **true**：是异步查询。\n- **false**：不是异步查询，是同步查询。","type":"boolean","example":"true"},"TotalCount":{"description":"总数。","type":"integer","format":"int64","example":"100"},"EndTime":{"description":"下载任务的结束时间。","type":"integer","format":"int64","example":"1658406465000"},"PreviewSize":{"description":"预览大小。","type":"integer","format":"int32","example":"100"},"PageNo":{"description":"分页页码。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"分页大小。","type":"integer","format":"int32","example":"10"},"CsvUrl":{"description":"OSS文件的下载地址。（有效期5分钟）","type":"string","example":"https://xxxxx-data-download-sh.oss-cn-shanghai.aliyuncs.com/data/download/6B761BxxxxxxxxAAA0BF03D32C80E/62da39b9xxxxxx5a7b953376/download_file_name.csv?Expires=1658469132&amp;OSSAccessKeyId=xxxxxxxxx&amp;Signature=rRL%xxxxxxx%3D"},"CsvFileName":{"description":"CSV文件名称。","type":"string","example":"test_download_flie"},"DatasetId":{"description":"下载对象ID。","type":"string","example":"xxxxxx"},"ResultDataInString":{"description":"查询执行结果。","type":"string","example":"{\"a\":123}"},"Header":{"description":"字段信息。","type":"array","items":{"type":"object","properties":{"TypeClass":{"description":"类型。","type":"string","example":"date"},"FieldName":{"description":"字段名。","type":"string","example":"user_name"},"GeoClass":{"description":"地理信息。","type":"string","example":"{xxx:xxxx}"},"FieldType":{"description":"字段数据类型。","type":"string","example":"INTEGER"},"TimeClass":{"description":"时间维度。","type":"string","example":"HOUR/DAY/MONTH"},"DimDateClass":{"description":"调度类型。","type":"string","example":"DAY"},"Alias":{"description":"字段别名。","type":"string","example":"user_name_alias"}}}},"Result":{"description":"执行结果。","type":"array","items":{"type":"object","example":"{\"a\":123}"}},"QuerySetting":{"description":"查询请求信息。","type":"object","properties":{"SelectedHeaders":{"description":"查询字段列表。","type":"array","items":{"description":"字段信息。","type":"object","properties":{"FieldName":{"description":"字段名。","type":"string","example":"user_name"},"GeoClass":{"description":"地理信息。","type":"string","example":"{xxx:xxx}"},"FieldType":{"description":"字段数据类型。","type":"string","example":"INTEGER"},"TimeClass":{"description":"日期维度。","type":"string","example":"HOUR/DAY/MONTH"},"Alias":{"description":"字段别名。","type":"string","example":"user_name_alias"},"DimDateClass":{"description":"调度类型。","type":"string","example":"DAY"}}}},"AstExpr":{"description":"查询条件。","type":"array","items":{"type":"object","properties":{"ExprType":{"description":"表达式类型。","type":"string","example":"binaryOp"},"Expr":{"description":"表达式内容。","type":"string","example":"{\"header\":{\"fieldName\":\"xxx\"},\"operator\":\"GreaterThanOrEqual\",\"value\":12345}"}}}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"iot.dap.insight.noAuthorization","errorMessage":"no authorization."},{"errorCode":"iot.dap.insight.requestParamError","errorMessage":"request param error."},{"errorCode":"iot.dap.insight.serverError","errorMessage":"server hsf error please try later"},{"errorCode":"iot.dap.insight.downloadTaskNumUpperLimit","errorMessage":"the number of downloaded tasks exceeded the upper limit"},{"errorCode":"iot.dap.insight.downloadTimesUpperLimit","errorMessage":"the number of current job downloaded tasks exceeded the upper limit"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"ErrorMessage\\\": \\\"no authorization.\\\",\\n  \\\"RequestId\\\": \\\"BB71E443-4447-4024-A000-EDE09934****\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Status\\\": 1,\\n    \\\"LongJobId\\\": \\\"62d949808bc742187xxxxxx\\\",\\n    \\\"BeginTime\\\": 1658406464534,\\n    \\\"AsyncExecute\\\": true,\\n    \\\"TotalCount\\\": 100,\\n    \\\"EndTime\\\": 1658406465000,\\n    \\\"PreviewSize\\\": 100,\\n    \\\"PageNo\\\": 1,\\n    \\\"PageSize\\\": 10,\\n    \\\"CsvUrl\\\": \\\"https://xxxxx-data-download-sh.oss-cn-shanghai.aliyuncs.com/data/download/6B761BxxxxxxxxAAA0BF03D32C80E/62da39b9xxxxxx5a7b953376/download_file_name.csv?Expires=1658469132&amp;OSSAccessKeyId=xxxxxxxxx&amp;Signature=rRL%xxxxxxx%3D\\\",\\n    \\\"CsvFileName\\\": \\\"test_download_flie\\\",\\n    \\\"DatasetId\\\": \\\"xxxxxx\\\",\\n    \\\"ResultDataInString\\\": \\\"{\\\\\\\"a\\\\\\\":123}\\\",\\n    \\\"Header\\\": [\\n      {\\n        \\\"TypeClass\\\": \\\"date\\\",\\n        \\\"FieldName\\\": \\\"user_name\\\",\\n        \\\"GeoClass\\\": \\\"{xxx:xxxx}\\\",\\n        \\\"FieldType\\\": \\\"INTEGER\\\",\\n        \\\"TimeClass\\\": \\\"HOUR/DAY/MONTH\\\",\\n        \\\"DimDateClass\\\": \\\"DAY\\\",\\n        \\\"Alias\\\": \\\"user_name_alias\\\"\\n      }\\n    ],\\n    \\\"Result\\\": [\\n      {\\n        \\\"a\\\": 123\\n      }\\n    ],\\n    \\\"QuerySetting\\\": {\\n      \\\"SelectedHeaders\\\": [\\n        {\\n          \\\"FieldName\\\": \\\"user_name\\\",\\n          \\\"GeoClass\\\": \\\"{xxx:xxx}\\\",\\n          \\\"FieldType\\\": \\\"INTEGER\\\",\\n          \\\"TimeClass\\\": \\\"HOUR/DAY/MONTH\\\",\\n          \\\"Alias\\\": \\\"user_name_alias\\\",\\n          \\\"DimDateClass\\\": \\\"DAY\\\"\\n        }\\n      ],\\n      \\\"AstExpr\\\": [\\n        {\\n          \\\"ExprType\\\": \\\"binaryOp\\\",\\n          \\\"Expr\\\": \\\"{\\\\\\\"header\\\\\\\":{\\\\\\\"fieldName\\\\\\\":\\\\\\\"xxx\\\\\\\"},\\\\\\\"operator\\\\\\\":\\\\\\\"GreaterThanOrEqual\\\\\\\",\\\\\\\"value\\\\\\\":12345}\\\"\\n        }\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetDownloadFileResponse>\\n    <code/>\\n    <data>\\n        <asyncExecute>true</asyncExecute>\\n        <csvFileName>download_file_name</csvFileName>\\n        <csvUrl>https://insight-data-download-sh.oss-cn-shanghai.aliyuncs.com/data/download/6B761B2617454C9C9AAA0BF03D32C80E/62da39b9a48f865a7b953376/download_file_name.csv?Expires=1658469132&amp;OSSAccessKeyId=xxxxxxxxx&amp;Signature=rRL%xxxxxxx%3D</csvUrl>\\n        <longJobId>62d949808bc742187xxxxxx</longJobId>\\n        <status>1</status>\\n    </data>\\n    <requestId>41CF72F4-63C1-1EBA-8590-89D0F0CD298A</requestId>\\n    <success>true</success>\\n</GetDownloadFileResponse>\",\"errorExample\":\"\"}]","title":"GetDownloadFile","summary":"调用该接口获取数据表数据下载任务的执行结果。","description":"## 使用说明\n\n- 单个下载任务的下载链接一天内只能获取3次。\n- 下载链接的有效期为5分钟。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。"}