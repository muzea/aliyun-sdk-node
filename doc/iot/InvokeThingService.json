{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"IotInstanceId","in":"query","schema":{"description":"实例ID。您可在物联网平台控制台的**实例概览**页面，查看当前实例的**ID**。\n\n><notice>\n- 若有**ID**值，必须传入该**ID**值，否则调用会失败。\n- 若无**实例概览**页面或**ID**值，则无需传入。\n\n></notice>\n\n实例的更多信息，请参见[实例概述](~~356505~~)。","type":"string","required":false,"example":"iot_instc_pu****_c*-v64********"}},{"name":"ProductKey","in":"query","schema":{"description":"要调用服务的设备所属的产品ProductKey。\n><notice> 如果传入该参数，需同时传入**DeviceName**。\n></notice>","type":"string","required":false,"example":"a1BwAGV****"}},{"name":"DeviceName","in":"query","schema":{"description":"要调用服务所属设备的DeviceName。\n><notice> 如果传入该参数，需同时传入**ProductKey**。\n></notice>\n","type":"string","required":false,"example":"light"}},{"name":"Identifier","in":"query","schema":{"description":"服务的标识符。\n\n设备的服务**Identifier**的查看方式：\n\n- 登录[物联网平台控制台](https://iot.console.aliyun.com/)，在设备所属产品的**功能定义**中查看。\n- 调用接口[QueryThingModel](~~150321~~)，从返回的物模型信息中查看。\n\n> 如果是自定义（非默认）模块**testFb**下服务**testService**，则参数值为**testFb:testService**。","type":"string","required":true,"docRequired":true,"example":"Set"}},{"name":"Args","in":"query","schema":{"description":"要启用服务的入参信息，数据格式为JSON String，例如**Args={\"param1\":1}**。\n若此参数为空时，需传入 **Args={}** 。\n\n><notice>物模型功能定义数据类型为float或double时，对应参数值（即使值为整数）至少携带一位小数位。例如10.0、11.1。\n></notice>","type":"string","required":true,"docRequired":true,"example":"{\"param1\":1}"}},{"name":"IotId","in":"query","schema":{"description":"要调用服务的设备ID。物联网平台为该设备颁发的ID，设备的唯一标识符。\n><notice> **IotId**作为设备唯一标识符，和**ProductKey**与**DeviceName**组合是一一对应的关系。如果传入该参数，则无需传入**ProductKey**和**DeviceName**。如果您同时传入**IotId**和**ProductKey**与**DeviceName**组合，则以**IotId**为准。\n></notice>\n","type":"string","required":false,"example":"Q7uOhVRdZRRlDnTLv****00100"}},{"name":"Qos","in":"query","schema":{"type":"integer","format":"int32","required":false,"maximum":"1","minimum":"0","default":"0"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"调用失败时，返回的错误码。更多信息，请参见[错误码](~~87387~~)。","type":"string","example":"iot.system.SystemException"},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565"},"ErrorMessage":{"description":"调用失败时，返回的出错信息。","type":"string","example":"系统异常"},"Success":{"description":"是否调用成功。\n- **true**：调用成功，但不代表调用的服务执行成功。执行情况，以设备端日志为准。\n- **false**：调用失败。","type":"boolean","example":"true"},"Data":{"description":"调用成功时，返回的数据。","type":"object","properties":{"Result":{"description":"同步调用服务，返回的调用结果。\n异步调用服务，不返回此参数。","type":"string","example":"{\"param1\":1}"},"MessageId":{"description":"云端向设备下发服务调用的消息ID。","type":"string","example":"abcabcabc1234****"}}}}}}},"errorCodes":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"iot.system.SystemException\\\",\\n  \\\"RequestId\\\": \\\"E55E50B7-40EE-4B6B-8BBE-D3ED55CCF565\\\",\\n  \\\"ErrorMessage\\\": \\\"系统异常\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Result\\\": \\\"{\\\\\\\"param1\\\\\\\":1}\\\",\\n    \\\"MessageId\\\": \\\"abcabcabc1234****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<InvokeThingServiceResponse>\\n<Data>\\n    <Result>{\\\"code\\\":200,\\\"data\\\":{},\\\"id\\\":\\\"100686\\\",\\\"message\\\":\\\"success\\\",\\\"version\\\":\\\"1.0\\\"}</Result>\\n    <MessageId>abcabc123</MessageId>\\n</Data>\\n<RequestId>A44C818E-FA7F-4765-B1E7-01D14AE01C6A</RequestId>\\n<Success>true</Success>\\n</InvokeThingServiceResponse>\",\"errorExample\":\"\"}]","title":"在一个设备上调用指定服务","summary":"调用该接口在单个设备上调用指定服务。","description":"## 使用说明\n\n定义产品物模型服务时，已设置服务调用方式。因此，调用本接口时，物联网平台会根据请求参数**Identifier**值，选择服务对应的调用方式。\n- 同步方式：物联网平台直接使用RRPC同步方式下行推送请求，设备返回RRPC响应消息。RRPC使用详情，请参见[什么是RRPC](~~90567~~)。\n- 异步方式：物联网平台采用异步方式下行推送请求，设备采用异步方式返回结果。订阅的Topic详情，请参见[设备服务调用](~~89301~~)。\n\n><notice>若创建产品时，设置物模型校验类型为**免校验**，调用本接口会默认为异步调用方式。\n></notice>\n\n调用服务到设备端后，设备会返回调用结果给接口的调用方。设备端响应逻辑及响应结果，需您在设备端完成开发。设备返回结果的数据格式必须符合标准的Alink协议，Alink JSON格式如下：\n```\n{\n\t\"id\": \"58***89\",\n\t\"code\": 200,\n\t\"data\": {},\n\t\"message\": \"success\",\n\t\"localizedMsg\": \"localizedMsg\"\n}\n```\n> - **id**为物联网平台生成的唯一ID，设备从服务调用请求中获取，并原文返回。\n- **code**为整型数字，会返回给接口调用方，用于判断服务调用结果。\n- **data**为调用设备服务的结果数据，会返回给接口调用方。数据必须为JSON格式，由用户自行定义返回内容。\n- **message**、**localizedMsg**根据业务需要进行返回。\n例如物联网平台的设备接入C Link SDK提供了物模型使用示例，详细内容，请参见[调用服务](~~258239~~)。\n\n\n## 使用限制\n同步调用服务，最大超时时间为8秒。若8秒内服务器未收到回复，则返回超时错误。异步调用服务无最大超时时间限制。\n\n## QPS限制\n单个阿里云账号调用该接口的每秒请求数（QPS）最大限制为500。\n > RAM用户共享阿里云账号配额。","requestParamsDescription":"调用API时，除了本文介绍的该API的特有请求参数，还需传入公共请求参数。公共请求参数说明，请参见[公共参数文档](~~30561~~)。","responseParamsDescription":" ","extraInfo":" "}