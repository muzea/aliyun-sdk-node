{"summary":"从一个已存在的Object中拷贝数据来上传一个Part。","path":"/{key}","methods":["put"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/xml"],"produces":["application/xml"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"bucket","in":"host","schema":{"description":"Bucket名称。","type":"string","required":true,"example":"examplebucket"}},{"name":"key","in":"path","schema":{"description":"Object完整路径。","type":"string","required":true,"example":"exampledir/exampleobject/txt"}},{"name":"x-oss-copy-source","in":"header","schema":{"description":"拷贝源地址（必须有可读权限）。","type":"string","required":true,"example":"/oss-example/ src-object"}},{"name":"partNumber","in":"query","schema":{"description":"每一个上传的Part都有一个标识它的号码（partNumber）。\n\n取值：1~10000\n\n单个Part的大小限制为100 KB~5 GB。\n> MultipartUpload事件中除最后一个Part以外，其他Part的大小都要大于或等于100 KB。因不确定是否为最后一个Part，UploadPart接口并不会立即校验上传Part的大小，只有当CompleteMultipartUpload时才会校验。","type":"integer","format":"int64","required":true,"example":"10000"}},{"name":"uploadId","in":"query","schema":{"description":"uploadId用于唯一标识上传的Part属于哪个Object。","type":"string","required":true,"example":"0004B999EF5A239BB9138C6227D69F95"}},{"name":"x-oss-copy-source-range","in":"header","schema":{"description":"源Object的拷贝范围。例如设置bytes=0~9，表示拷贝0到9这10个字符。\n默认值：无\n  - 不指定该请求头时，表示拷贝整个源Object。\n  - 当指定该请求头时，则返回消息中会包含整个文件的长度和此次拷贝的范围，例如：Content-Range: bytes 0~9/44，表示整个文件长度为44，此次拷贝的范围为0~9。\n  - 当指定的范围不符合规范时，则拷贝整个源Object，并且不在结果中提及Content-Range。","type":"string","required":false,"example":"bytes=100-6291756"}},{"name":"x-oss-copy-source-if-match","in":"header","schema":{"description":"如果源Object的ETAG值和用户提供的ETAG相等，则执行拷贝操作；否则返回412 HTTP错误码（预处理失败）。\n默认值：无","type":"string","required":false,"example":"5B3C1A2E053D763E1B002CC607C5****"}},{"name":"x-oss-copy-source-if-none-match","in":"header","schema":{"description":"如果传入的ETag值和Object的ETag不匹配，则正常传输文件，并返回200 OK；否则返回304 Not Modified。\n默认值：无","type":"string","required":false,"example":"5B3C1A2E053D763E1B002CC607C5****"}},{"name":"x-oss-copy-source-if-unmodified-since","in":"header","schema":{"description":"如果传入参数中的时间等于或者晚于文件实际修改时间，则正常传输文件，并返回200 OK；否则返回412 precondition failed错误。\n默认值：无","type":"string","required":false,"example":"Fri, 13 Oct 2015 14:47:53 GMT"}},{"name":"x-oss-copy-source-if-modified-since","in":"header","schema":{"description":"如果指定的时间早于实际修改时间，则正常传送文件，并返回200 OK；否则返回304 not modified。\n默认值：无\n时间格式：GMT时间，例如Fri, 13 Nov 2015 14:47:53 GMT","type":"string","required":false,"example":"Fri, 13 Nov 2015 14:47:53 GMT"}}],"responses":{"200":{"headers":{"x-oss-copy-source-version-id":{"schema":{"type":"string"}}},"schema":{"description":"UploadPartCopy请求的响应体。","type":"object","properties":{"CopyPartResult":{"description":"保存UploadPartCopy结果的容器。","type":"object","properties":{"LastModified":{"description":"最近一次修改时间。","type":"string","format":"iso8601","example":"2014-07-17T06:27:54.000Z"},"ETag":{"description":"被拷贝Object的ETag值。","type":"string","example":"\"5B3C1A2E053D763E1B002CC607C5****\""}}}}}},"5XX":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"CopyPartResult\\\": {\\n    \\\"LastModified\\\": \\\"2014-07-17T06:27:54.000Z\\\",\\n    \\\"ETag\\\": \\\"\\\\\\\"5B3C1A2E053D763E1B002CC607C5****\\\\\\\"\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"拷贝数据上传一个数据块","description":"该接口为通过在UploadPart请求的基础上增加一个请求头x-oss-copy-source来调用UploadPartCopy接口，实现从一个已存在的Object中拷贝数据来上传一个Part。\n\n**注意事项**\n<br>当拷贝一个大于1 GB的文件时，必须使用UploadPartCopy的方式进行拷贝。如果想通过单个操作拷贝小于1 GB的文件，请参见[CopyObject](https://help.aliyun.com/document_detail/31979.htm?spm=a2c4g.11186623.0.0.49aa29d6oRCP8o#t4696.html)。\n<br>使用UploadPartCopy接口时，有如下注意事项：\n\n- 不允许拷贝以AppendObject方式上传的Object。\n\n- 执行UploadPartCopy的源Bucket地址和目标Bucket地址必须是同一个Region。\n\n- 调用该接口上传Part数据前，必须先调用InitiateMultipartUpload接口来获取一个OSS服务器颁发的Upload ID。\n\n- 若调用InitiateMultipartUpload接口时，指定了x-oss-server-side-encryption请求头，则会对上传的Part进行加密编码，并在UploadPart响应头中返回x-oss-server-side-encryption头，其值表明该Part的服务器端加密算法，详情请参见[InitiateMultipartUpload](~~31992~~)。\n\n- MultipartUpload要求除最后一个Part以外，其他的Part大小都要大于100 KB。因不确定是否为最后一个Part，UploadPart接口并不会立即校验上传Part的大小，只有当CompleteMultipartUpload的时候才会校验。\n\n**版本控制**\n\nUploadPartCopy默认从一个已存在的Object的当前版本中拷贝数据来上传一个Part。允许通过在请求头x-oss-copy-source中附带versionId的子条件，实现从Object的指定版本进行拷贝，例如x-oss-copy-source : /SourceBucketName/SourceObjectName?versionId=111111。\n>SourceObjectName要进行URL编码。响应中将会返回被拷贝Object的versionId：x-oss-copy-source-version-id。\n\n如果未指定versionId且拷贝Object的当前版本为删除标记（Delete Marker），OSS将返回404 Not Found。通过指定versionId来拷贝删除标记时，OSS将返回400 Bad Request。\n\n"}