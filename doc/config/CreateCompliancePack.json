{"summary":"为当前账号创建合规包。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free"},"parameters":[{"name":"CompliancePackTemplateId","in":"formData","schema":{"description":"合规包模板ID。\n\n关于如何获取合规包模板ID，请参见[ListCompliancePackTemplates](~~261176~~)。","type":"string","required":false,"example":"ct-5f26ff4e06a300c4****"}},{"name":"CompliancePackName","in":"formData","schema":{"description":"合规包名称。","type":"string","required":true,"docRequired":true,"example":"等保三级预检合规包","maxLength":100}},{"name":"Description","in":"formData","schema":{"description":"合规包描述。","type":"string","required":false,"example":"等保三级预检合规包","maxLength":500}},{"name":"RiskLevel","in":"formData","schema":{"description":"合规包风险等级。取值：\n- 1：高风险。\n- 2（默认值）：中风险。\n- 3：低风险。","type":"integer","format":"int32","required":false,"maximum":"3","exclusiveMaximum":false,"minimum":"1","exclusiveMinimum":false,"example":"2","enum":["1","2","3"]}},{"name":"ConfigRules","in":"formData","style":"json","schema":{"description":"合规包中的规则列表。\n\n> 本参数和`TemplateContent`必须设置其中一个。","type":"array","items":{"description":"合规包中的规则列表。","type":"object","properties":{"ManagedRuleIdentifier":{"description":"规则模板标识。配置审计根据规则模板标识自动创建规则，并将该规则加入到当前合规包中。\n\n> `ManagedRuleIdentifier`和`ConfigRuleId`二选一，当两个参数都设置时，以`ConfigRuleId`为准确。","type":"string","required":false,"example":"eip-bandwidth-limit"},"ConfigRuleName":{"description":"规则名称。\n\n","type":"string","required":false,"example":"弹性IP实例带宽满足最低要求"},"ConfigRuleParameters":{"description":"规则参数信息。","type":"array","items":{"description":"规则参数信息。","type":"object","properties":{"ParameterName":{"description":"规则参数名称。\n\n参数`ParameterName`和`ParameterValue`必须同时设置，或同时不设置。如果规则模板存在参数，且无默认值，则您必须设置该参数。","type":"string","required":false,"example":"bandwidth"},"ParameterValue":{"description":"规则参数值。\n\n参数`ParameterName`和`ParameterValue`必须同时设置，或同时不设置。如果规则模板存在参数，且无默认值，则您必须设置该参数。","type":"string","required":false,"example":"10"}},"required":false},"required":false},"ConfigRuleId":{"description":"规则ID。配置审计将已有规则加入到当前合规包中。\n\n`ManagedRuleIdentifier`和`ConfigRuleId`二选一，当两个参数都设置时，以`ConfigRuleId`为准确。","type":"string","required":false,"example":"cr-e918626622af000f****"},"Description":{"description":"规则描述。","type":"string","required":false,"example":"弹性公网已绑定到ECS或者NAT实例，非闲置状态，视为“合规”。"},"RiskLevel":{"description":"规则风险等级。取值：\n- 1：高风险。\n- 2：中风险。\n- 3：低风险。","type":"integer","format":"int32","required":false,"example":"1"}},"required":false},"required":false}},{"name":"TemplateContent","in":"formData","schema":{"description":"用于生成合规包的模板信息。模板内容可以从已有合规包详情API中查看，或者参考[编写配置化合规包模板](~~2659733~~)进行编写。\n\n> 本参数和ConfigRules必须设置其中一个。","type":"string","required":false,"example":"{\n    \"configRuleTemplates\": [\n        {\n            \"configRuleName\": \"自定义条件规则示例\",\n            \"scope\": {\n                \"complianceResourceTypes\": [\n                    \"ACS::ECS::Instance\"\n                ]\n            },\n            \"description\": \"\",\n            \"source\": {\n                \"owner\": \"CUSTOM_CONFIGURATION\",\n                \"identifier\": \"acs-config-configuration\",\n                \"sourceDetails\": [\n                    {\n                        \"messageType\": \"ScheduledNotification\",\n                        \"maximumExecutionFrequency\": \"Twelve_Hours\"\n                    },\n                    {\n                        \"messageType\": \"ConfigurationItemChangeNotification\"\n                    }\n                ],\n                \"conditions\": \"{\\\"ComplianceConditions\\\":\\\"{\\\\\\\"operator\\\\\\\":\\\\\\\"and\\\\\\\",\\\\\\\"children\\\\\\\":[{\\\\\\\"operator\\\\\\\":\\\\\\\"GreaterOrEquals\\\\\\\",\\\\\\\"featurePath\\\\\\\":\\\\\\\"$.Cpu\\\\\\\",\\\\\\\"featureSource\\\\\\\":\\\\\\\"CONFIGURATION\\\\\\\",\\\\\\\"desired\\\\\\\":\\\\\\\"2\\\\\\\"}]}\\\"}\"\n            },\n            \"inputParameters\": {}\n        },\n        {\n            \"configRuleName\": \"OSS存储空间Referer在指定的防盗链白名单中\",\n            \"scope\": {\n                \"complianceResourceTypes\": [\n                    \"ACS::OSS::Bucket\"\n                ]\n            },\n            \"description\": \"OSS存储空间开启防盗链并且Referer在指定白名单中，视为“合规”。\",\n            \"source\": {\n                \"owner\": \"ALIYUN\",\n                \"identifier\": \"oss-bucket-referer-limit\",\n                \"sourceDetails\": [\n                    {\n                        \"messageType\": \"ConfigurationItemChangeNotification\"\n                    }\n                ]\n            },\n            \"inputParameters\": {\n                \"allowEmptyReferer\": \"true\",\n                \"allowReferers\": \"http://www.aliyun.com\"\n            }\n        }\n    ]\n}","maxLength":1024000}},{"name":"ClientToken","in":"formData","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。`ClientToken`只支持ASCII字符，且不能超过64个字符。","type":"string","required":false,"example":"1594295238-f9361358-5843-4294-8d30-b5183fac****"}},{"name":"DefaultEnable","in":"formData","schema":{"description":"规则是否支持快速启用。取值：\n- true：合规包快捷启用时会开启该规则。\n- false（默认值）：不启用。","type":"boolean","required":false,"example":"false"}},{"name":"RegionIdsScope","in":"formData","schema":{"description":"合规包仅对指定地域ID中的资源生效。多个地域ID之间用半角逗号（,）分隔。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"ExcludeRegionIdsScope","in":"formData","schema":{"type":"string","required":false}},{"name":"ExcludeResourceIdsScope","in":"formData","schema":{"description":"合规包对指定资源ID无效，即不对该资源执行评估。多个资源ID之间用半角逗号（,）分隔。","type":"string","required":false,"example":"eip-8vbf3x310fn56ijfd****"}},{"name":"ResourceIdsScope","in":"formData","schema":{"type":"string","required":false}},{"name":"ResourceGroupIdsScope","in":"formData","schema":{"description":"合规包仅对指定资源组ID中的资源生效。多个资源组ID之间用半角逗号（,）分隔。","type":"string","required":false,"example":"rg-aekzdibsjjc****"}},{"name":"ExcludeResourceGroupIdsScope","in":"formData","schema":{"type":"string","required":false}},{"name":"TagKeyScope","in":"formData","schema":{"description":"合规包仅对绑定指定标签键的资源生效。","type":"string","required":false,"example":"ECS"}},{"name":"TagValueScope","in":"formData","schema":{"description":"合规包仅对绑定指定标签键值对的资源生效。\n> TagValueScope需结合TagKeyScope一起使用。","type":"string","required":false,"example":"test"}},{"name":"TagsScope","in":"formData","style":"flat","schema":{"type":"array","items":{"type":"object","properties":{"TagKey":{"type":"string","required":false},"TagValue":{"type":"string","required":false}},"required":false},"required":false}},{"name":"ExcludeTagsScope","in":"formData","style":"flat","schema":{"type":"array","items":{"type":"object","properties":{"TagKey":{"type":"string","required":false},"TagValue":{"type":"string","required":false}},"required":false},"required":false}}],"responses":{"200":{"schema":{"description":"无","type":"object","properties":{"CompliancePackId":{"description":"合规包ID。","type":"string","example":"cp-a8a8626622af0082****"},"RequestId":{"description":"请求ID。","type":"string","example":"6EC7AED1-172F-42AE-9C12-295BC2ADB751"}}}}},"errorCodes":{"400":[{"errorCode":"CompliancePackExceedMaxCount","errorMessage":"The maximum number of compliance pack is exceeded."},{"errorCode":"Invalid.ConfigRules.Empty","errorMessage":"You must specify ConfigRules."},{"errorCode":"Invalid.ConfigRules.Value","errorMessage":"The specified ConfigRules is invalid."},{"errorCode":"ConfigRuleExceedMaxRuleCount","errorMessage":"The maximum number of config rules is exceeded."},{"errorCode":"Invalid.CompliancePackName.Empty","errorMessage":"You must specify CompliancePackName."},{"errorCode":"Invalid.CompliancePackName.Value","errorMessage":"The specified CompliancePackName is invalid."},{"errorCode":"Invalid.CompliancePackTemplateId.Value","errorMessage":"The specified CompliancePackTemplateId does not exist."},{"errorCode":"CompliancePackExists","errorMessage":"The compliance pack already exists."}],"404":[{"errorCode":"AccountNotExisted","errorMessage":"Your account does not exist."}],"503":[{"errorCode":"ServiceUnavailable","errorMessage":"The request has failed due to a temporary failure of the server."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"CompliancePackId\\\": \\\"cp-a8a8626622af0082****\\\",\\n  \\\"RequestId\\\": \\\"6EC7AED1-172F-42AE-9C12-295BC2ADB751\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateCompliancePackResponse>\\n    <CompliancePackId>cp-a8a8626622af0082****</CompliancePackId>\\n    <RequestId>6EC7AED1-172F-42AE-9C12-295BC2ADB751</RequestId>\\n</CreateCompliancePackResponse>\",\"errorExample\":\"\"}]","title":"创建合规包","description":"合规包是一组规则的集合。新建合规包时，您可以选择合规包模板中的默认规则，也可以选择规则模板和已有规则列表中的规则。\n新建合规包后，这些规则默认会执行一次评估，后续将根据规则的触发机制自动触发评估，也可以手动执行评估。\n\n合规包模板是配置审计根据合规场景定制的一组规则的集合。\n\n本文将提供一个示例，通过合规包模板`ClassifiedProtectionPreCheck`（等保三级预检合规包）创建一个合规包。","requestParamsDescription":"关于公共请求参数的详情，请参见[公共参数](~~251751~~)。"}