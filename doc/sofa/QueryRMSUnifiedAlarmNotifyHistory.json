{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"Status","in":"formData","schema":{"description":"\t\n发送状态","type":"integer","format":"int64","required":false,"docRequired":false,"enumValueTitles":{"0":"失败","1":"成功"},"example":"0"}},{"name":"Channel","in":"formData","schema":{"description":"\t\n通知渠道","type":"string","required":false,"docRequired":false,"example":"DD_WEBHOOK"}},{"name":"Subscriber","in":"formData","schema":{"description":"通知人id","type":"string","required":false,"docRequired":false,"example":"1"}},{"name":"CurrentPage","in":"formData","schema":{"description":"当前页","type":"integer","format":"int64","required":false,"docRequired":false,"example":"1"}},{"name":"PageSize","in":"formData","schema":{"description":"每页条数","type":"integer","format":"int64","required":false,"docRequired":false,"example":"20"}},{"name":"WorkspaceName","in":"formData","schema":{"description":"工作区名","type":"string","required":true,"docRequired":true,"example":"acgatewayprod"}},{"name":"EventId","in":"formData","schema":{"description":"\t\n事件id","type":"string","required":false,"docRequired":false,"example":"355400_1670410905000_598877597"}},{"name":"StartTime","in":"formData","schema":{"description":"\t\n开始时间","type":"integer","format":"int64","required":true,"docRequired":true,"example":"1660730580000"}},{"name":"EndTime","in":"formData","schema":{"description":"结束时间","type":"integer","format":"int64","required":true,"docRequired":true,"example":"1668160800150"}},{"name":"Keyword","in":"formData","schema":{"description":"查询告警内容","type":"string","required":false,"docRequired":false,"example":"asd"}},{"name":"AlarmRuleId","in":"formData","schema":{"description":"告警规则 ID","type":"integer","format":"int64","required":false,"docRequired":false,"example":"22"}},{"name":"AlarmStatus","in":"formData","schema":{"description":"告警状态","type":"integer","format":"int64","required":false,"docRequired":false,"enumValueTitles":{"2":"告警中","4":"已静默","5":"已恢复"},"example":"2"}},{"name":"AlarmStackInfoJsonStr","in":"formData","schema":{"description":"根据应用过滤告警历史json格式 包含字段如下：\n\ndatasource_type\tSTRING\t否\t[\"CUSTOM\",\"STACK\",\"TABLE]\t\t\n是应用监控，还是自定义监控\n\ndatasource\tSTRING\t否\tMM@@2000464\t\t\n数据源\n\nalarm_target_type\tSTRING\t否\t[\"APP\",\"HOST\"]\t\t\n应用类型\n\nalarm_target_identify\tSTRING\t否\tRMS-monitorprod\t\t\n应用名称","type":"string","required":false,"docRequired":false,"example":"{\\\"DatasourceType\\\":\\\"CUSTOM\\\",\\\"AlarmTargetType\\\":\\\"APP\\\",\\\"AlarmTargetIdentify\\\":\\\"prod-app-acrbasis\\\"，\\\"Datasource\\\":\\\"SPM@@15984\\\"}"}},{"name":"DashboardQueryParamJsonStr","in":"formData","schema":{"description":"大盘告警查询参数","type":"string","required":false,"docRequired":false}},{"name":"AlarmSubscribers","in":"formData","style":"repeatList","schema":{"description":"根据通知对象过滤","type":"array","items":{"description":"通知对象","type":"object","properties":{"SubscriberSource":{"description":"\t\n订阅者来源","type":"string","required":true,"example":"LOCAL"},"SubscriberType":{"description":"订阅者类型","type":"string","required":true,"example":"USER_GROUP"},"Subscriber":{"description":"订阅者","type":"string","required":true,"example":"1"},"SubscriberUuid":{"description":"订阅者uuid","type":"string","required":true,"example":"839f5cf92ab3435385ef3949c001a7a8"},"SubscriberName":{"description":"告警对象的名称","type":"string","required":true,"example":"mike"}},"required":false},"required":false,"maxItems":100}}],"responses":{"200":{"schema":{"type":"object","properties":{"CurrentPage":{"description":"当前页","type":"integer","format":"int64","example":"1"},"RequestId":{"description":"请求ID","type":"string","example":"B4C10721-BD3E-5F45-AF3C-880715462315"},"ResultMessage":{"description":"结果描述","type":"string","example":"Rpc error"},"ResultCode":{"description":"结果码","type":"string","example":"OK"},"PageSize":{"description":"每页大小","type":"integer","format":"int64","example":"20"},"TotalCount":{"description":"总条数","type":"integer","format":"int64","example":"84"},"AlarmNotifyHistories":{"description":"报警通知历史","type":"array","items":{"description":"报警通知历史","type":"object","properties":{"AlarmSilenceTime":{"description":"\t\n告警静默期","type":"integer","format":"int64","example":"20"},"Status":{"description":"通知状态","type":"integer","format":"int64","example":"0"},"ErrorMessage":{"description":"描述消息发送错误原因","type":"string","example":"Specified private IP address is duplicated."},"AlarmType":{"description":"\t\n告警类型","type":"string","example":"APP"},"GmtModified":{"description":"修改时间","type":"string","example":"2020-03-18 21:47:32"},"NotifyContent":{"description":"消息内容","type":"string"},"AlarmRuleId":{"description":"报警规则id","type":"integer","format":"int64","example":"5839"},"Subscriber":{"description":"订阅人","type":"string","example":"400"},"Channel":{"description":"通知渠道","type":"string","example":"DD_WEBHOOK"},"AlarmTargetDeleted":{"description":"\t\n目标对象是否删除","type":"boolean"},"AlarmLevel":{"description":"告警级别","type":"integer","format":"int64","example":"1"},"AlarmEventId":{"description":"报警事件id","type":"string","example":"356454_1670377620000_1650847553"},"AlarmRuleName":{"description":"\t\n告警规则名","type":"string","example":"bvtcase测试"},"AlarmTargetType":{"description":"告警对象类型","type":"string","example":"APP"},"SubscriberType":{"description":"订阅人的类型","type":"string","example":"USER_GROUP"},"AlarmStatus":{"description":"报警状态","type":"integer","format":"int64","example":"2"},"DataSourceName":{"description":"数据源名称","type":"string","example":"交易成功量"},"AlarmRuleUuid":{"type":"string"},"WorkspaceId":{"description":"工作空间ID","type":"integer","format":"int64","example":"1"},"SubscriberSource":{"description":"订阅者来源","type":"string","example":"LOCAL"},"AlarmTime":{"description":"报警时间。","type":"integer","format":"int64","example":"1671076740000"},"AggCount":{"description":"\t\n聚合条数","type":"integer","format":"int64","example":"1"},"AlarmTargetIdentify":{"description":"告警对象","type":"string","example":"monitorprod"},"AlarmHistoryId":{"description":"报警发送记录id","type":"integer","format":"int64","example":"27313821"},"GmtCreate":{"description":"创建时间","type":"string","example":"2020-03-13 02:25:08"},"AlarmUrl":{"description":"告警数据源跳转url","type":"string","example":"/rms/sofacloud/sofa_app/view/a?workspaceName=b&amp;tenantName=c"},"AlarmUrlWithDomain":{"description":"\t\n网页的绝对路径，包含域名","type":"string","example":"http://www.alipay.com/rms/sofacloud/sofa_app/view/a?workspaceName=b&amp;tenantName=c"},"TraceId":{"description":"调用链ID，用于精确查询调用信息。","type":"string","example":"0a6481081662012458401682123"},"Id":{"description":"属性 ID","type":"integer","format":"int64","example":"73738"},"TenantId":{"description":"租户ID","type":"integer","format":"int64","example":"1"},"SubscriberName":{"description":"订阅者名称\n\n","type":"string","example":"mike"}}}},"AlarmNotifySubs":{"description":"告警通知历史中对应的通知对象","type":"array","items":{"description":"通知对象","type":"object","properties":{"SubscriberSource":{"description":"订阅者来源","type":"string","example":"LOCAL"},"Subscriber":{"description":"订阅者","type":"string","example":"400"},"SubscriberUuid":{"description":"订阅者uuid","type":"string","example":"839f5cf92ab3435385ef3949c001a7a8"},"SubscriberType":{"description":"订阅者类型","type":"string","example":"USER_GROUP"},"SubscriberName":{"description":"订阅者名称","type":"string","example":"mike"}}}}}}}},"errorCodes":{},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"CurrentPage\\\": 1,\\n  \\\"RequestId\\\": \\\"B4C10721-BD3E-5F45-AF3C-880715462315\\\",\\n  \\\"ResultMessage\\\": \\\"Rpc error\\\",\\n  \\\"ResultCode\\\": \\\"OK\\\",\\n  \\\"PageSize\\\": 20,\\n  \\\"TotalCount\\\": 84,\\n  \\\"AlarmNotifyHistories\\\": [\\n    {\\n      \\\"AlarmSilenceTime\\\": 20,\\n      \\\"Status\\\": 0,\\n      \\\"ErrorMessage\\\": \\\"Specified private IP address is duplicated.\\\",\\n      \\\"AlarmType\\\": \\\"APP\\\",\\n      \\\"GmtModified\\\": \\\"2020-03-18 21:47:32\\\",\\n      \\\"NotifyContent\\\": \\\"\\\",\\n      \\\"AlarmRuleId\\\": 5839,\\n      \\\"Subscriber\\\": \\\"400\\\",\\n      \\\"Channel\\\": \\\"DD_WEBHOOK\\\",\\n      \\\"AlarmTargetDeleted\\\": true,\\n      \\\"AlarmLevel\\\": 1,\\n      \\\"AlarmEventId\\\": \\\"356454_1670377620000_1650847553\\\",\\n      \\\"AlarmRuleName\\\": \\\"bvtcase测试\\\",\\n      \\\"AlarmTargetType\\\": \\\"APP\\\",\\n      \\\"SubscriberType\\\": \\\"USER_GROUP\\\",\\n      \\\"AlarmStatus\\\": 2,\\n      \\\"DataSourceName\\\": \\\"交易成功量\\\",\\n      \\\"AlarmRuleUuid\\\": \\\"\\\",\\n      \\\"WorkspaceId\\\": 1,\\n      \\\"SubscriberSource\\\": \\\"LOCAL\\\",\\n      \\\"AlarmTime\\\": 1671076740000,\\n      \\\"AggCount\\\": 1,\\n      \\\"AlarmTargetIdentify\\\": \\\"monitorprod\\\",\\n      \\\"AlarmHistoryId\\\": 27313821,\\n      \\\"GmtCreate\\\": \\\"2020-03-13 02:25:08\\\",\\n      \\\"AlarmUrl\\\": \\\"/rms/sofacloud/sofa_app/view/a?workspaceName=b&amp;tenantName=c\\\",\\n      \\\"AlarmUrlWithDomain\\\": \\\"http://www.alipay.com/rms/sofacloud/sofa_app/view/a?workspaceName=b&amp;tenantName=c\\\",\\n      \\\"TraceId\\\": \\\"0a6481081662012458401682123\\\",\\n      \\\"Id\\\": 73738,\\n      \\\"TenantId\\\": 1,\\n      \\\"SubscriberName\\\": \\\"mike\\\"\\n    }\\n  ],\\n  \\\"AlarmNotifySubs\\\": [\\n    {\\n      \\\"SubscriberSource\\\": \\\"LOCAL\\\",\\n      \\\"Subscriber\\\": \\\"400\\\",\\n      \\\"SubscriberUuid\\\": \\\"839f5cf92ab3435385ef3949c001a7a8\\\",\\n      \\\"SubscriberType\\\": \\\"USER_GROUP\\\",\\n      \\\"SubscriberName\\\": \\\"mike\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询告警通知历史","summary":"查询告警通知历史，如钉钉、电话、短信、webhook的通知记录，以及通知状态。"}