{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","systemTags":{"operationType":"get"},"parameters":[{"name":"WorkspaceName","in":"formData","schema":{"description":"工作空间名称","type":"string","required":true,"docRequired":true,"example":"SOFAStack杭州金区-生产"}},{"name":"Start","in":"formData","schema":{"description":"查询开始时间，格式为Unix时间戳，单位为毫秒。\n\n> 查询开始时间需在数据库实例SQL洞察存储时长范围内，最大不能早于当前时间90天。\n","type":"integer","format":"int64","required":true,"docRequired":true,"example":"1668911820000"}},{"name":"End","in":"formData","schema":{"description":"查询数据的终止日期，格式为Unix时间戳，单位为毫秒。\n\n> 查询结束时间需晚于查询开始时间，最晚只能查询到当天凌晨0点的数据。","type":"integer","format":"int64","required":true,"docRequired":true,"example":"1662516900000"}},{"name":"CurrentPage","in":"formData","schema":{"description":"当前页","type":"integer","format":"int64","required":false,"docRequired":false,"example":"2"}},{"name":"PageSize","in":"formData","schema":{"description":"分页参数，分页大小","type":"integer","format":"int64","required":false,"docRequired":false,"example":"10"}},{"name":"AlarmTargetType","in":"formData","schema":{"description":"告警对象类型","type":"string","required":false,"docRequired":false,"example":"APP"}},{"name":"AlarmTarget","in":"formData","schema":{"description":"告警对象","type":"string","required":false,"docRequired":false,"example":"PlanetKms"}},{"name":"AlarmLevel","in":"formData","schema":{"description":"告警级别","type":"integer","format":"int64","required":false,"docRequired":false,"example":"1"}},{"name":"Status","in":"formData","schema":{"description":"告警状态","type":"integer","format":"int64","required":false,"docRequired":false,"example":"1"}},{"name":"AlarmStackInfoJsonStr","in":"formData","schema":{"description":"根据应用过滤告警历史json格式 包含字段如下：\n\ndatasource_type\tSTRING\t否\t[\"CUSTOM\",\"STACK\",\"TABLE]\t\t\n是应用监控，还是自定义监控\n\ndatasource\tSTRING\t否\tMM@@2000464\t\t\n数据源\n\nalarm_target_type\tSTRING\t否\t[\"APP\",\"HOST\"]\t\t\n应用类型\n\nalarm_target_identify\tSTRING\t否\tRMS-monitorprod\t\t\n应用名称","type":"string","required":false,"docRequired":false,"example":"{\\\"DatasourceType\\\":\\\"STACK\\\",\\\"AlarmTargetType\\\":\\\"APP\\\",\\\"AlarmTargetIdentify\\\":\\\"prod-app-twc-universal\\\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"CurrentPage":{"description":"当前页","type":"integer","format":"int64","example":"5"},"RequestId":{"description":"请求id","type":"string","example":"CB2B427A-E370-5599-8872-A249F8EFD859"},"ResultMessage":{"description":"结果描述","type":"string","example":"workspace not found with name TWCProd, tenant_id 0008528286"},"ResultCode":{"description":"结果码","type":"string","example":"OK"},"PageSize":{"description":"分页参数，分页大小","type":"integer","format":"int64","example":"10"},"TotalCount":{"description":"总条数","type":"integer","format":"int64","example":"120"},"AlarmHistories":{"description":"报警历史对象列表","type":"array","items":{"description":"报警历史详情","type":"object","properties":{"AlarmTargetType":{"description":"告警对象类型","type":"string","example":"APP"},"Status":{"description":"报警状态","type":"integer","format":"int64","example":"1"},"DataSourceName":{"description":"数据源名称","type":"string","example":"ant_intel_hz"},"AlarmType":{"description":"\t\n告警类型","type":"string","example":"APP"},"GmtModified":{"description":"最后修改时间","type":"string","example":"2020-04-02 21:53:24"},"EventId":{"description":"告警事件id","type":"string","example":"355402_1670998540000_598877597"},"WorkspaceId":{"description":"工作空间ID","type":"integer","format":"int64","example":"1"},"UniqueIdentity":{"description":"告警规则唯一标识","type":"string","example":"174851af-6c56-4d8b-8cc7-9f998e752f09"},"AlarmTime":{"description":"告警时间","type":"integer","format":"int64","example":"1671088115000"},"AlarmRuleId":{"description":"报警规则id","type":"integer","format":"int64","example":"860"},"GmtCreate":{"description":"创建时间","type":"string","example":"2020-04-02 21:53:24"},"AlarmDetail":{"description":"告警详情","type":"string","example":"[{\"datasource\":\"basic@@machinePortCheck\",\"tags\":[{\"key\":\"cluster\",\"value\":\"default-kernel\"},{\"key\":\"hostname\",\"value\":\"100.83.13.115\"},{\"key\":\"port\",\"value\":\"22\"}],\"conditionValues\":[{\"condition\":{\"metric\":\"total\",\"metricDisplayName\":\"总量\",\"type\":\"Current\",\"compareOperation\":\"LT\",\"N\":0,\"threshold\":10000.0,\"conditionDesc\":\"total 当前时间 > 10000.0\"},\"value\":1.0}]}]"},"AlarmUrl":{"description":"告警数据源跳转url","type":"string","example":"/rms/sofacloud/sofa_app/view/a?workspaceName=b&tenantName=c"},"AlarmContent":{"description":"报警内容","type":"string","example":"[测试实例] [cluster:default-kernel hostname:100.83.13.115 port:22 cluster:antcloud-middlewaredev-import-cluster-38742336 namespace:kube-system] 物理机端口探测/总量 当前时间的值 1.000 < 10000.00"},"AlarmUrlWithDomain":{"description":"\t\n网页的绝对路径，包含域名","type":"string","example":"http://www.alipay.com/rms/sofacloud/sofa_app/view/a?workspaceName=b&tenantName=c"},"AlarmTargetDeleted":{"description":"\t\n目标对象是否删除","type":"boolean","example":"false"},"AlarmLevel":{"description":"告警级别","type":"integer","format":"int64","example":"1"},"Id":{"description":"属性 ID","type":"integer","format":"int64","example":"3376"},"TenantId":{"description":"租户id","type":"integer","format":"int64","example":"1"},"AlarmTarget":{"description":"告警对象","type":"string","example":"sibei_1229_1"},"AlarmRuleName":{"description":"\t\n告警规则名","type":"string","example":"bvtcase测试"}}}}}}}},"errorCodes":{},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"CurrentPage\\\": 5,\\n  \\\"RequestId\\\": \\\"CB2B427A-E370-5599-8872-A249F8EFD859\\\",\\n  \\\"ResultMessage\\\": \\\"workspace not found with name TWCProd, tenant_id 0008528286\\\",\\n  \\\"ResultCode\\\": \\\"OK\\\",\\n  \\\"PageSize\\\": 10,\\n  \\\"TotalCount\\\": 120,\\n  \\\"AlarmHistories\\\": [\\n    {\\n      \\\"AlarmTargetType\\\": \\\"APP\\\",\\n      \\\"Status\\\": 1,\\n      \\\"DataSourceName\\\": \\\"ant_intel_hz\\\",\\n      \\\"AlarmType\\\": \\\"APP\\\",\\n      \\\"GmtModified\\\": \\\"2020-04-02 21:53:24\\\",\\n      \\\"EventId\\\": \\\"355402_1670998540000_598877597\\\",\\n      \\\"WorkspaceId\\\": 1,\\n      \\\"UniqueIdentity\\\": \\\"174851af-6c56-4d8b-8cc7-9f998e752f09\\\",\\n      \\\"AlarmTime\\\": 1671088115000,\\n      \\\"AlarmRuleId\\\": 860,\\n      \\\"GmtCreate\\\": \\\"2020-04-02 21:53:24\\\",\\n      \\\"AlarmDetail\\\": \\\"[{\\\\\\\"datasource\\\\\\\":\\\\\\\"basic@@machinePortCheck\\\\\\\",\\\\\\\"tags\\\\\\\":[{\\\\\\\"key\\\\\\\":\\\\\\\"cluster\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"default-kernel\\\\\\\"},{\\\\\\\"key\\\\\\\":\\\\\\\"hostname\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"100.83.13.115\\\\\\\"},{\\\\\\\"key\\\\\\\":\\\\\\\"port\\\\\\\",\\\\\\\"value\\\\\\\":\\\\\\\"22\\\\\\\"}],\\\\\\\"conditionValues\\\\\\\":[{\\\\\\\"condition\\\\\\\":{\\\\\\\"metric\\\\\\\":\\\\\\\"total\\\\\\\",\\\\\\\"metricDisplayName\\\\\\\":\\\\\\\"总量\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"Current\\\\\\\",\\\\\\\"compareOperation\\\\\\\":\\\\\\\"LT\\\\\\\",\\\\\\\"N\\\\\\\":0,\\\\\\\"threshold\\\\\\\":10000.0,\\\\\\\"conditionDesc\\\\\\\":\\\\\\\"total 当前时间 > 10000.0\\\\\\\"},\\\\\\\"value\\\\\\\":1.0}]}]\\\",\\n      \\\"AlarmUrl\\\": \\\"/rms/sofacloud/sofa_app/view/a?workspaceName=b&tenantName=c\\\",\\n      \\\"AlarmContent\\\": \\\"[测试实例] [cluster:default-kernel hostname:100.83.13.115 port:22 cluster:antcloud-middlewaredev-import-cluster-38742336 namespace:kube-system] 物理机端口探测/总量 当前时间的值 1.000 < 10000.00\\\",\\n      \\\"AlarmUrlWithDomain\\\": \\\"http://www.alipay.com/rms/sofacloud/sofa_app/view/a?workspaceName=b&tenantName=c\\\",\\n      \\\"AlarmTargetDeleted\\\": false,\\n      \\\"AlarmLevel\\\": 1,\\n      \\\"Id\\\": 3376,\\n      \\\"TenantId\\\": 1,\\n      \\\"AlarmTarget\\\": \\\"sibei_1229_1\\\",\\n      \\\"AlarmRuleName\\\": \\\"bvtcase测试\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]"}