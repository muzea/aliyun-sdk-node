{"summary":"查询活跃SQL记录。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的详情，包括实例ID。","type":"string","required":true,"example":"gp-bp12ga6v69h86****"}},{"name":"Database","in":"query","schema":{"description":"数据库名，默认为所有数据库。","type":"string","required":false,"example":"testdb"}},{"name":"User","in":"query","schema":{"description":"用户名。","type":"string","required":false,"example":"testuser"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始日期，格式：`yyyy-MM-ddTHH:mm:ssZ`。","type":"string","required":false,"example":"2021-08-03T09:30Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，格式如：yyyy-MM-ddTHH:mm:ssZ，且大于查询开始时间。","type":"string","required":false,"example":"2022-05-07T07:59Z"}},{"name":"Keyword","in":"query","schema":{"description":"查询关键字。","type":"string","required":false,"example":"SELECT"}},{"name":"MinDuration","in":"query","schema":{"description":"大于某个时间跨度范围，单位为秒（s）。例如，100表示大于100秒的数据。","type":"string","required":false,"example":"300"}},{"name":"MaxDuration","in":"query","schema":{"description":"小于某个时间跨度范围，单位为秒（s）。","type":"string","required":false,"example":"600"}},{"name":"Order","in":"query","schema":{"description":"排序字段和排序方式。\n\n默认为`{\"Field\":\"StartTime\",\"Type\":\"Desc\"}`，表示按开始时间进行排序。暂不支持其他排序字段和排序方式。","type":"string","required":false,"example":"{\"Field\":\"StartTime\",\"Type\":\"Desc\"}"}}],"responses":{"200":{"schema":{"description":"描述。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"ABB39CC3-4488-4857-905D-2E4A051D0521"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"gp-bp12ga6v69h86****"},"Queries":{"description":"详情。","type":"array","items":{"description":"详情。","type":"object","properties":{"PID":{"description":"进程ID。","type":"string","example":"6164"},"SessionID":{"description":"查询所属的会话ID。","type":"string","example":"6612"},"State":{"description":"异步请求的执行状态。取值说明：\n- **running**：运行中。\n- **block**：阻塞中。","type":"string","example":"running"},"QueryStart":{"description":"查询起始时间。","type":"string","example":"2022-05-07T06:59Z"},"QueryDuration":{"description":"查询运行时间。单位为秒（s）。","type":"string","example":"60"},"Query":{"description":"查询对应的SQL文本。","type":"string","example":"Select * from t1,t2 where t1.id=t2.id;"},"User":{"description":"用户名。","type":"string","example":"testuser"},"Database":{"description":"数据库名称。","type":"string","example":"xg_analyse"},"ClientAddr":{"description":"客户端地址。","type":"string","example":"0.0.0.0"},"SqlTruncated":{"description":"SQL语句是否截断。取值说明：\n- true：是。\n- false：否。","type":"string","example":"false"},"SqlTruncatedThreshold":{"description":"SQL语句截断阈值。","type":"string","example":"1024"}}}}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"ABB39CC3-4488-4857-905D-2E4A051D0521\\\",\\n  \\\"DBInstanceId\\\": \\\"gp-bp12ga6v69h86****\\\",\\n  \\\"Queries\\\": [\\n    {\\n      \\\"PID\\\": \\\"6164\\\",\\n      \\\"SessionID\\\": \\\"6612\\\",\\n      \\\"State\\\": \\\"running\\\",\\n      \\\"QueryStart\\\": \\\"2022-05-07T06:59Z\\\",\\n      \\\"QueryDuration\\\": \\\"60\\\",\\n      \\\"Query\\\": \\\"Select * from t1,t2 where t1.id=t2.id;\\\",\\n      \\\"User\\\": \\\"testuser\\\",\\n      \\\"Database\\\": \\\"xg_analyse\\\",\\n      \\\"ClientAddr\\\": \\\"0.0.0.0\\\",\\n      \\\"SqlTruncated\\\": \\\"false\\\",\\n      \\\"SqlTruncatedThreshold\\\": \\\"1024\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询活跃SQL记录"}