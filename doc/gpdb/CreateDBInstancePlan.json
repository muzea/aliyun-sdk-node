{"summary":"创建定时计划。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的实例ID。","type":"string","required":true,"example":"gp-bp12ga6v69h86****"}},{"name":"PlanName","in":"query","schema":{"description":"计划名称。","type":"string","required":true,"example":"test-plan"}},{"name":"PlanDesc","in":"query","schema":{"description":"计划描述。","type":"string","required":false,"example":"this is a test plan"}},{"name":"PlanType","in":"query","schema":{"description":"计划类型，取值如下：\n\n- **PauseResume**：自动启停。\n- **Resize**：实例变配，即增加或减少计算节点。\n- **ModifySpec**：规格变更，即变更计算节点规格。\n\n> - 实例变配仅支持Serverless模式实例。\n>- 规格变更仅支持存储弹性模式实例。","type":"string","required":true,"example":"PauseResume"}},{"name":"PlanScheduleType","in":"query","schema":{"description":"计划执行方式，取值如下：\n\n- **Postpone**：稍后执行。\n- **Regular**：周期执行。","type":"string","required":true,"example":"Regular"}},{"name":"PlanStartDate","in":"query","schema":{"description":"计划的开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n> - 仅**PlanScheduleType**为**Regular**时需要设置该参数。\n>- 不传默认为当前时间。","type":"string","required":false,"example":"2022-04-17T23:00Z"}},{"name":"PlanEndDate","in":"query","schema":{"description":"计划的结束时间，需要大于查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n> - 仅**PlanScheduleType**为**Regular**时需要设置该参数。\n>- 该参数非必填，没有结束时间，计划删除周期停止。","type":"string","required":false,"example":"2023-04-17T23:00Z"}},{"name":"PlanConfig","in":"query","schema":{"description":"执行计划具体信息，JSON格式，内容需根据**PlanType**参数和**PlanScheduleType**参数的值进行调整，具体说明请参见以下补充说明。","type":"string","required":true,"example":"{\"pause\":{\"planCronTime\":\"0 0 12 1/1 * ? \"},\"resume\":{\"planCronTime\":\"0 0 0 1/1 * ? \"}}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"34b32a0a-08ef-4a87-b6be-cdd9f56fc3ad"},"Status":{"description":"API执行状态。\n\n执行成功则返回**success**；执行失败则不返回该参数。","type":"string","example":"success"},"ErrorMessage":{"description":"错误信息。\n\n只会在API执行失败时返回该参数。","type":"string","example":"****"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"gp-bp12ga6v69h86****"},"PlanId":{"description":"计划ID。","type":"string","example":"1234"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"34b32a0a-08ef-4a87-b6be-cdd9f56fc3ad\\\",\\n  \\\"Status\\\": \\\"success\\\",\\n  \\\"ErrorMessage\\\": \\\"****\\\",\\n  \\\"DBInstanceId\\\": \\\"gp-bp12ga6v69h86****\\\",\\n  \\\"PlanId\\\": \\\"1234\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDBInstancePlanResponse>\\n    <RequestId>34b32a0a-08ef-4a87-b6be-cdd9f56fc3ad</RequestId>\\n    <Status>success</Status>\\n    <DBInstanceId>gp-bp12ga6v69h86****</DBInstanceId>\\n    <PlanId>1234</PlanId>\\n</CreateDBInstancePlanResponse>\",\"errorExample\":\"\"}]","title":"创建定时计划","description":"- 实例付费类型必须为按量付费。\n- 实例变配和规格变更时，可能会导致业务闪断，建议您将执行时间设置为业务低峰期。\n\n请确保在使用该接口前，已充分了解AnalyticDB PostgreSQL版产品的[收费方式](~~35406~~)和<props=\"china\">[价格](https://www.aliyun.com/price/product#/gpdb/detail/GreenplumPost)</props><props=\"intl\">[价格](https://www.alibabacloud.com/zh/product/hybriddb-postgresql/pricing)</props>。","requestParamsDescription":"### PlanConfig参数补充说明\nPlanType为PauseResume时：\n- **PlanScheduleType**为**Postpone**时，只需要指定启动或暂停的具体时间，其中**pause**为暂停实例；**resume**为启动实例；**executeTime**为启停的时间（UTC时间），示例如下：\n    - 暂停实例：`{\"pause\":{\"executeTime\":\"2022-08-30T16:00:00Z\"}}`\n    - 启动实例：`{\"resume\":{\"executeTime\":\"2022-08-30T16:00:00Z\"}}`\n- **PlanScheduleType**为**Regular**时，需要指定周期启动和暂停的时间，其中**pause**为暂停实例；**resume**为启动实例；**planCronTime**为周期启停的时间，Cron格式（UTC时间），示例如下：\n`{\"pause\":{\"planCronTime\":\"0 0 12 1/1 * ? \"},\"resume\":{\"planCronTime\":\"0 0 0 1/1 * ? \"}}`。\n\n\nPlanType为Resize时：\n- **PlanScheduleType**为**Postpone**时，需要指定扩容或缩容的时间和目标节点数，其中**scaleOut**为扩容实例；**scaleIn**为缩容实例；**executeTime**为扩缩容的时间（UTC时间）；**segmentNodeNum**为目标节点数，示例如下：\n    - 扩容实例：`{\"scaleOut\":{\"executeTime\":\"2022-08-30T16:00:00Z\",\"segmentNodeNum\":4}}`\n    - 缩容实例：`{\"scaleIn\":{\"executeTime\":\"2022-08-30T16:00:00Z\",\"segmentNodeNum\":2}}`\n- **PlanScheduleType**为**Regular**时，需要指定周期扩缩容的时间和目标节点数，其中**scaleOut**为扩容实例；**scaleIn**为缩容实例；**planCronTime**为周期扩缩容的时间，Cron格式（UTC时间）；**segmentNodeNum**为目标节点数，示例如下：\n`{\"scaleIn\":{\"segmentNodeNum\":2,\"planCronTime\":\"0 0 12 1/1 * ? \"},\"scaleOut\":{\"segmentNodeNum\":4,\"planCronTime\":\"0 0 0 1/1 * ? \"}}`。\n\n\nPlanType为ModifySpec时：\n- **PlanScheduleType**为**Postpone**时，需要指定升配或降配的时间和目标规格，其中**scaleUp**为实例升配；**scaleDown**为实例降配；**executeTime**为扩缩容的时间（UTC时间）；**instanceSpec**为目标规格，示例如下：\n    - 实例升配：`{\"scaleUp\":{\"executeTime\":\"2022-08-30T16:00:00Z\",\"instanceSpec\":\"4C32G\"}}`\n    - 实例降配：`{\"scaleDown\":{\"executeTime\":\"2022-08-30T16:00:00Z\",\"instanceSpec\":\"2C16G\"}}`\n- **PlanScheduleType**为**Regular**时，需要指定周期升降配的时间和目标规格，其中**scaleUp**为实例升配；**scaleDown**为实例降配；**planCronTime**为周期扩缩容的时间，Cron格式（UTC时间）；**instanceSpec**为目标规格，示例如下：\n`{\"scaleUp\":{\"instanceSpec\":\"4C32G\",\"planCronTime\":\"0 0 12 1/1 * ? \"},\"scaleDown\":{\"instanceSpec\":\"2C16G\",\"planCronTime\":\"0 0 0 1/1 * ? \"}}`。\n\n\n> Cron表达式的说明和相关使用方法，请参见[Cron表达式](~~64769~~)。"}