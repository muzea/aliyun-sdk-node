{"summary":"获取AnalyticDB PostgreSQL版实例锁诊断列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的实例ID。\n","type":"string","required":true,"example":"gp-bp12ga6v69h86****"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值说明：\n- **30**\n- **50**\n- **100**\n\n默认值：**30**。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，大于0且不超过Integer的最大值，默认值：**1**。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。\n\n不填则表示没有查询开始时间，将返回查询结束时间之前所有锁诊断信息。如果也没有查询结束时间，将返回全部锁诊断信息。","type":"string","required":false,"example":"2022-08-15T06:59Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，需要大于查询开始时间，格式为<i>yyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。\n\n不填则表示没有查询结束时间，将返回查询开始时间之后所有锁诊断信息。如果也没有查询开始时间，将返回全部锁诊断信息。","type":"string","required":false,"example":"2022-08-20T07:59Z"}},{"name":"User","in":"query","schema":{"description":"用户名。不填则表示查询所有用户的锁等待信息。","type":"string","required":false,"example":"testUser"}},{"name":"Database","in":"query","schema":{"description":"数据库名称。","type":"string","required":true,"example":"test"}},{"name":"QueryCondition","in":"query","schema":{"description":"查询过滤条件，取值如下：\n\n- `{\"Type\":\"maxCost\",\"Value\":\"10\"}`：等待时间最长的10个查询。\n- `{\"Type\":\"status\",\"Value\":\"LockWaiting\"}`：锁等待的查询。\n- `{\"Type\":\"status\",\"Value\":\"ResourceWaiting\"}`：资源等待的查询。","type":"string","required":true,"example":"{\"Type\":\"maxCost\",\"Value\":\"10\"}"}},{"name":"Keyword","in":"query","schema":{"description":"查询关键字。","type":"string","required":false,"example":"table"}},{"name":"Order","in":"query","schema":{"description":"排序字段和排序方式。\n\n默认为`{\"Field\":\"StartTime\",\"Type\":\"Desc\"}`，表示按开始时间进行排序。暂不支持其他排序字段和排序方式。","type":"string","required":false,"example":"{\"Field\":\"StartTime\",\"Type\":\"Desc\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Items":{"description":"查询列表。","type":"array","items":{"type":"object","properties":{"PID":{"description":"进程ID，即等待查询SQL的唯一标识。","type":"string","example":"100"},"SessionID":{"description":"查询所属的会话ID。","type":"string","example":"50"},"StartTime":{"description":"查询开始时间。为时间戳格式，单位为ms。","type":"integer","format":"int64","example":"1660902033374"},"WaitingTime":{"description":"SQL等待的时长，单位为ms。","type":"integer","format":"int64","example":"26911000"},"Status":{"description":"查询的等待状态，取值如下：\n\n- **LockWaiting**：锁等待。\n- **ResourceWaiting**：资源等待。","type":"string","example":"LockWaiting"},"SQLStmt":{"description":"查询的SQL文本。","type":"string","example":"Select * from t1,t2 where t1.id=t2.id;"},"User":{"description":"查询的用户。","type":"string","example":"testUser"},"Database":{"description":"数据库名称。","type":"string","example":"test"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"B4CAF581-2AC7-41AD-8940-D56DF7AADF5B"},"TotalCount":{"description":"总记录数。","type":"integer","format":"int32","example":"1"},"PageNumber":{"description":"当前页码。","type":"integer","format":"int32","example":"1"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Items\\\": [\\n    {\\n      \\\"PID\\\": \\\"100\\\",\\n      \\\"SessionID\\\": \\\"50\\\",\\n      \\\"StartTime\\\": 1660902033374,\\n      \\\"WaitingTime\\\": 26911000,\\n      \\\"Status\\\": \\\"LockWaiting\\\",\\n      \\\"SQLStmt\\\": \\\"Select * from t1,t2 where t1.id=t2.id;\\\",\\n      \\\"User\\\": \\\"testUser\\\",\\n      \\\"Database\\\": \\\"test\\\"\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"B4CAF581-2AC7-41AD-8940-D56DF7AADF5B\\\",\\n  \\\"TotalCount\\\": 1,\\n  \\\"PageNumber\\\": 1\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeWaitingSQLRecordsResponse>\\n    <Items>\\n        <PID>100</PID>\\n        <SessionID>50</SessionID>\\n        <StartTime>1660902033374</StartTime>\\n        <WaitingTime>26911000</WaitingTime>\\n        <Status>LockWaiting</Status>\\n        <SQLStmt>Select * from t1,t2 where t1.id=t2.id;</SQLStmt>\\n        <User>testUser</User>\\n        <Database>test</Database>\\n    </Items>\\n    <RequestId>B4CAF581-2AC7-41AD-8940-D56DF7AADF5B</RequestId>\\n    <TotalCount>1</TotalCount>\\n    <PageNumber>1</PageNumber>\\n</DescribeWaitingSQLRecordsResponse>\",\"errorExample\":\"\"}]","title":"获取锁诊断列表","description":"本接口仅支持查询6.0版本存储弹性模式实例的锁诊断列表。"}