{"summary":"下载AnalyticDB PostgreSQL的实例的查询诊断记录。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"none","riskType":"none","chargeType":"free"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的详情，包括实例ID。","type":"string","required":true,"example":"gp-bp12ga6v69h86****"}},{"name":"User","in":"query","schema":{"description":"用户名。","type":"string","required":false,"example":"adbpguser"}},{"name":"Database","in":"query","schema":{"description":"数据库名称。","type":"string","required":true,"example":"adbtest"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":false,"example":"2022-05-07T06:59Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，需要大于查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":false,"example":"2022-05-07T07:59Z"}},{"name":"QueryCondition","in":"query","schema":{"description":"查询过滤条件，JSON格式，取值如下：\n\n- `{\"Type\":\"maxCost\", \"Value\":\"100\"}`：耗时最长的100个查询。\n- `{\"Type\":\"status\",\"Value\":\"finished\"}`：已完成的查询。\n- `{\"Type\":\"status\",\"Value\":\"running\"}`：运行中的查询。\n- `{\"Type\":\"cost\",\"Max\":\"200\"}`：短耗时查询，执行耗时小于200毫秒的查询。\n- `{\"Type\":\"cost\",\"Min\":\"200\",\"Max\":\"60000\"}`：中等耗时查询，执行耗时大于等于200毫秒且小于1分钟的查询。\n- `{\"Type\":\"cost\",\"Min\":\"60000\"}`：长耗时查询，执行耗时大于等于1分钟的查询。\n- `{\"Type\":\"cost\",\"Min\":\"30\",\"Max\":\"50\"}`：自定义耗时查询，您可以自定义设置查询的最短耗时和最长耗时，**Min**表示最短耗时；**Max**表示最长耗时，单位为毫秒（ms）。","type":"string","required":false,"example":"{ \"Type\":\"maxCost\", \"Value\":\"100\" }"}},{"name":"Lang","in":"query","schema":{"description":"下载文件的语言，取值如下：\n\n- **zh**：简体中文。\n- **en**：英文。\n- **ja**：日语。\n- **zh-tw**：繁体中文。","type":"string","required":false,"example":"zh"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"该参数已废弃，无需传入该参数。","type":"string","required":false,"example":"null"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B4CAF581-2AC7-41AD-8940-D56DF7AADF5B"},"DownloadId":{"description":"下载任务ID。","type":"string","example":"11"},"DBInstanceId":{"description":"实例ID。","type":"string","example":"gp-bp12ga6v69h86****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B4CAF581-2AC7-41AD-8940-D56DF7AADF5B\\\",\\n  \\\"DownloadId\\\": \\\"11\\\",\\n  \\\"DBInstanceId\\\": \\\"gp-bp12ga6v69h86****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DownloadDiagnosisRecordsResponse>\\n    <RequestId>B4CAF581-2AC7-41AD-8940-D56DF7AADF5B</RequestId>\\n    <DownloadId>11111</DownloadId>\\n</DownloadDiagnosisRecordsResponse>\",\"errorExample\":\"\"}]","title":"下载查询诊断记录","description":"本接口用于下载AnalyticDB PostgreSQL版实例的查询诊断记录。完成下载后，您可以通过[DescribeDownloadRecords](~~447712~~)接口查看下载记录并获取下载链接。\n\n目前该功能仅支持存储弹性模式实例，且内核版本为V6.3.10.1及以上版本。如何查看和升级内核小版本，请参见[查看内核小版本](~~277424~~)和[版本升级](~~139271~~)。"}