{"summary":"调用DescribeSQLLogs接口查询指定时间段的SQL执行记录。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"ResourceGroupId","in":"query","schema":{"description":"该参数已废弃，无需传入该参数。","type":"string","required":false,"example":"null"}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间。格式为<i>YYYY-MM-DDThh:mmZ</i>（UTC时间）。","type":"string","required":false,"docRequired":true,"example":"2022-03-10T06:30Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间。格式为<i>YYYY-MM-DDThh:mmZ</i>（UTC时间）。\n\n> 查询结束时间需晚于开始时间，且开始时间和结束时间的时间间隔不能超过24小时。","type":"string","required":false,"docRequired":true,"example":"2022-03-17T06:30Z"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。\n\n> 您可以调用[DescribeRegions](~~86912~~)接口查看可用的地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL版实例的详情，包括实例ID。","type":"string","required":true,"example":"gp-xxxxxxxx"}},{"name":"QueryKeywords","in":"query","schema":{"description":"SQL关键字。","type":"string","required":false,"example":"select 1"}},{"name":"Database","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"adbpgadmin"}},{"name":"User","in":"query","schema":{"description":"用户名。","type":"string","required":false,"example":"testadmin"}},{"name":"ExecuteCost","in":"query","schema":{"description":"执行耗时，单位为秒（s）。","type":"string","required":false,"example":"1"}},{"name":"SourceIP","in":"query","schema":{"description":"来源IP。","type":"string","required":false,"example":"100.XX.XX.90"}},{"name":"ExecuteState","in":"query","schema":{"description":"执行状态。取值如下：\n- **1**：成功。\n- **0**：失败。","type":"string","required":false,"example":"1"}},{"name":"OperationClass","in":"query","schema":{"description":"操作类别，取值如下：\n\n- **DQL**\n- **DML**\n- **DDL**\n- **DCL**\n- **TCL**","type":"string","required":false,"example":"DQL"}},{"name":"OperationType","in":"query","schema":{"description":"执行SQL的类型。\n\n>- 如果设置了**OperationClass**参数，则**OperationType**的值必须属于对应的语言类型。例如**OperationClass**的值为**DQL**，则**OperationType**的值必须为**DQL**类型的SQL，例如**SELECT**。\n- 如果没有设置**OperationClass**参数，则**OperationType**的值可以是任意类型SQL。\n- 如果没有设置**OperationClass**参数也没有设置**OperationType**参数，则表示返回所有类型SQL。","type":"string","required":false,"example":"SELECT"}},{"name":"MaxExecuteCost","in":"query","schema":{"description":"慢SQL最大耗时，取值需大于等于0，单位为秒（s）。","type":"string","required":false,"example":"1000"}},{"name":"MinExecuteCost","in":"query","schema":{"description":"慢SQL最小耗时，取值需大于等于0，单位为秒（s）。","type":"string","required":false,"example":"1"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，大于0且不超过Integer的最大值，默认值：1。","type":"string","required":false,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值说明：\n- 30（默认值）\n- 50\n- 100","type":"string","required":false,"example":"30"}}],"responses":{"200":{"schema":{"type":"object","properties":{"PageRecordCount":{"description":"每页包含的记录个数。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"A7941C94-B92F-46A0-BD3E-2D**********"},"PageNumber":{"description":"查询结果页数。","type":"integer","format":"int32","example":"1"},"Items":{"description":"结果列表。","type":"array","items":{"type":"object","properties":{"OperationClass":{"description":"操作类别。","type":"string","example":"DQL"},"ExecuteState":{"description":"执行状态。\n\n- **success**：成功\n- **fail**：失败","type":"string","example":"success"},"ExecuteCost":{"description":"执行耗时。","type":"number","format":"float","example":"2"},"SQLText":{"description":"SQL语句内容。","type":"string","example":"select 1"},"SourcePort":{"description":"来源端口。","type":"integer","format":"int32","example":"50514"},"DBRole":{"description":"数据库角色。","type":"string","example":"master"},"OperationType":{"description":"执行SQL的类型。","type":"string","example":"SELECT"},"SourceIP":{"description":"来源IP。","type":"string","example":"100.**.**.90"},"ReturnRowCounts":{"description":"执行结果返回的行数。","type":"integer","format":"int64","example":"1"},"DBName":{"description":"数据库名称。","type":"string","example":"adbpgadmin"},"OperationExecuteTime":{"description":"执行时间。","type":"string","example":"2021-03-15T17:02:32Z"},"ScanRowCounts":{"description":"扫描行数。","type":"integer","format":"int64","example":"1"},"AccountName":{"description":"执行SQL的数据库账号。","type":"string","example":"testadmin"}}}}}}}},"errorCodes":{"400":[{"errorCode":"IdempotentParameterMismatch","errorMessage":"The request uses the same client token as a previous, but non-identical request. Do not reuse a client token with different requests, unless the requests are identical."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageRecordCount\\\": 1,\\n  \\\"RequestId\\\": \\\"A7941C94-B92F-46A0-BD3E-2D**********\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"Items\\\": [\\n    {\\n      \\\"OperationClass\\\": \\\"DQL\\\",\\n      \\\"ExecuteState\\\": \\\"success\\\",\\n      \\\"ExecuteCost\\\": 2,\\n      \\\"SQLText\\\": \\\"select 1\\\",\\n      \\\"SourcePort\\\": 50514,\\n      \\\"DBRole\\\": \\\"master\\\",\\n      \\\"OperationType\\\": \\\"SELECT\\\",\\n      \\\"SourceIP\\\": \\\"100.**.**.90\\\",\\n      \\\"ReturnRowCounts\\\": 1,\\n      \\\"DBName\\\": \\\"adbpgadmin\\\",\\n      \\\"OperationExecuteTime\\\": \\\"2021-03-15T17:02:32Z\\\",\\n      \\\"ScanRowCounts\\\": 1,\\n      \\\"AccountName\\\": \\\"testadmin\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSQLLogsResponse>\\n    <PageRecordCount>1</PageRecordCount>\\n    <RequestId>A7941C94-B92F-46A0-BD3E-2D**********</RequestId>\\n    <PageNumber>1</PageNumber>\\n    <Items>\\n        <OperationClass>DQL</OperationClass>\\n        <ExecuteState>success</ExecuteState>\\n        <ExecuteCost>2</ExecuteCost>\\n        <SQLText>select 1</SQLText>\\n        <SourcePort>50514</SourcePort>\\n        <DBRole>master</DBRole>\\n        <OperationType>SELECT</OperationType>\\n        <SourceIP>100.**.**.90</SourceIP>\\n        <SQLPlan>\\\"\\\"</SQLPlan>\\n        <ReturnRowCounts>1</ReturnRowCounts>\\n        <DBName>adbpgadmin</DBName>\\n        <OperationExecuteTime>2021-03-15T17:02:32Z</OperationExecuteTime>\\n        <ScanRowCounts>1</ScanRowCounts>\\n        <AccountName>testadmin</AccountName>\\n    </Items>\\n</DescribeSQLLogsResponse>\",\"errorExample\":\"\"}]","title":"查询SQL执行记录","description":"该接口不支持实例资源类型为存储预留模式的实例。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}