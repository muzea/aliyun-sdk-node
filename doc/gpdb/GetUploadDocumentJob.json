{"summary":"通过JobId获取异步上传文档的任务的进度和结果。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"开启了向量引擎优化的实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的详情，包括实例ID。","type":"string","required":true,"example":"gp-xxxxxxxxx"}},{"name":"Namespace","in":"formData","schema":{"description":"命名空间，用于租户隔离，默认为public。\n\n> 可以通过[CreateNamespace](~~2401495~~)创建，通过[ListNamespaces](~~2401502~~)接口查看列表。","type":"string","required":false,"example":"mynamespace","default":"public"}},{"name":"Collection","in":"formData","schema":{"description":"文档库名称。\n\n> 由[CreateDocumentCollection](~~2618448~~)接口创建。您可以调用[ListDocumentCollections](~~2618452~~)接口查看已经创建的文档库。","type":"string","required":true,"example":"document"}},{"name":"RegionId","in":"query","schema":{"description":"实例所在地域ID。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"NamespacePassword","in":"formData","schema":{"description":"命名空间对应的密码。\n\n> 本值为CreateNamespace接口指定。","type":"string","required":true,"example":"testpassword"}},{"name":"JobId","in":"formData","schema":{"description":"上传文档的任务ID，由`UploadDocumentAsync`接口获得。","type":"string","required":true,"example":"bf8f7bc4-9276-44f7-9c22-1d06edc8dfd1"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"ABB39CC3-4488-4857-905D-2E4A051D0521"},"Message":{"description":"接口返回详细信息。","type":"string","example":"success"},"Status":{"description":"此接口状态，取值说明：\n- **success**：成功。\n- **fail**：失败。","type":"string","example":"success"},"Job":{"description":"上传文档的任务的详细信息。","type":"object","properties":{"Id":{"description":"Job ID。","type":"string","example":"231460f8-75dc-405e-a669-0c5204887e91"},"Completed":{"description":"操作是否完成。","type":"boolean","example":"false"},"CreateTime":{"description":"任务创建时间。","type":"string","example":"2024-01-08 16:52:04.864664"},"UpdateTime":{"description":"任务更新时间。","type":"string","example":"2024-01-08 16:53:04.864664"},"Status":{"description":"任务状态。取值说明：\n- Success：成功。\n- Failed：失败，失败原因可查看Error字段。\n- Cancelling：正在取消中。\n- Cancelled：已取消。\n- Start：开始。\n- Running：执行中。\n- Pending：等待中。","type":"string","example":"Running"},"Error":{"description":"当前操作异常或者失败时的错误信息。","type":"string","example":"Failed to connect database."},"Progress":{"description":"上传进度，此数值为进度百分比，值为100时表示完成。","type":"integer","format":"int32","example":"20"}}},"ChunkResult":{"description":"切分结果。","type":"object","properties":{"ChunkFileUrl":{"description":"切分后的文件链接，有效期为2h。文件格式为JSONL，每一行的格式为`{\"page_content\":\"*****\", \"metadata\": {\"**\":\"***\",\"**\":\"***\"}`","type":"string","example":"http://xxx/test.jsonl"},"PlainChunkFileUrl":{"description":"切分后的不带metadata的文件链接，有效期为2h。文件格式为纯文本，每一行为一条切分块。此文件可方便的用于embedding。","type":"string","example":"http://xxx/test.txt"}}},"Usage":{"description":"文档理解或Embedding消耗的token或条数。","type":"object","properties":{"EmbeddingTokens":{"description":"向量化时使用的token数。\n\n> token是指将输入的文本分割成的最小单位；token可以是一个单词、一个词组、一个标点符号、一个字符等。","type":"integer","format":"int32","example":"475"},"EmbeddingEntries":{"type":"integer","format":"int32"}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"ABB39CC3-4488-4857-905D-2E4A051D0521\\\",\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"Status\\\": \\\"success\\\",\\n  \\\"Job\\\": {\\n    \\\"Id\\\": \\\"231460f8-75dc-405e-a669-0c5204887e91\\\",\\n    \\\"Completed\\\": false,\\n    \\\"CreateTime\\\": \\\"2024-01-08 16:52:04.864664\\\",\\n    \\\"UpdateTime\\\": \\\"2024-01-08 16:53:04.864664\\\",\\n    \\\"Status\\\": \\\"Running\\\",\\n    \\\"Error\\\": \\\"Failed to connect database.\\\",\\n    \\\"Progress\\\": 20\\n  },\\n  \\\"ChunkResult\\\": {\\n    \\\"ChunkFileUrl\\\": \\\"http://xxx/test.jsonl\\\",\\n    \\\"PlainChunkFileUrl\\\": \\\"http://xxx/test.txt\\\"\\n  },\\n  \\\"Usage\\\": {\\n    \\\"EmbeddingTokens\\\": 475,\\n    \\\"EmbeddingEntries\\\": 0\\n  }\\n}\",\"type\":\"json\"}]","title":"获取上传文档任务","description":"此接口为UploadDocumentAsync的相关接口。可通过UploadDocumentAsync创建一个上传任务，并得到一个JobId，然后通过此接口查看Job的执行信息。\n\n> 使用建议\n> - 按照文档复杂度和切分后的向量条数评估超时，一般不超过2小时。"}