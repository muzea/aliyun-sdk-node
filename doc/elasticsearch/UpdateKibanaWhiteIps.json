{"summary":"更新指定阿里云Elasticsearch实例的Kibana访问白名单。","path":"/openapi/instances/{InstanceId}/kibana-white-ips","methods":["patch","post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"InstanceId","in":"path","schema":{"description":"实例ID。","type":"string","required":true,"docRequired":true,"example":"es-cn-tl329rbpc0001****"}},{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不值过64个ASCII字符。","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF****"}},{"name":"modifyMode","in":"query","schema":{"title":"修改方式，覆盖/新增/删除，针对设置分组时使用。不设置分组，默认覆盖default分组值","description":"修改方式，取值含义如下：\n\n- Cover（默认值）：使用ips参数的值覆盖原IP白名单。\n\n- Append：在原IP白名单中增加ips参数中输入的IP地址。\n\n- Delete：在原IP白名单中删除ips参数中输入的IP地址，至少需要保留一个IP地址。","type":"string","required":false,"example":"Cover","default":"Cover","enum":["Cover","Append","Delete"]}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体。","type":"object","properties":{"kibanaIPWhitelist":{"title":"kibana节点IP访问白名单。不可与分组同时设置。","description":"Kibana节点IP访问白名单。不可与分组同时设置。","type":"array","items":{"description":"IP地址白名单列表。whiteIpGroup为空时可用，该参数值会更新Default白名单分组中的IP白名单配置。\n\n不支持同时配置kibanaIPWhitelist和whiteIpGroup。","type":"string","required":false,"example":"[\"110.0.XX.XX/8\"]"},"required":false},"whiteIpGroup":{"title":"Kibana 访问白名单分组设置","description":"以白名单组方式更新Kibana访问白名单配置，仅支持更新一个白名单组。\n\n不支持同时配置kibanaIPWhitelist和whiteIpGroup。","type":"object","properties":{"groupName":{"title":"分组名称","description":"白名单组的组名。如果选填了whiteIpGroup参数，则该参数必填。","type":"string","required":false,"example":"test_group_name"},"whiteIpType":{"title":"白名单类型，固定设置PUBLIC_KIBANA","description":"白名单类型，仅支持PUBLIC_KIBANA（公网访问白名单）。","type":"string","required":false,"example":"PUBLIC_KIBANA"},"ips":{"title":"分组白名单列表","description":"白名单组中的IP列表。","type":"array","items":{"title":"白名单IP","description":"白名单组中的IP列表。如果选填了whiteIpGroup参数，则该参数必填。","type":"string","required":false,"example":"[\"0.0.0.0\", \"10.2.XX.XX\"]"},"required":false}},"required":false}},"required":false,"docRequired":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"E5EF11F1-DBAE-4020-AC24-DFA6C4345CAE"},"Result":{"description":"返回对应Elasticsearch实例的详情。","type":"object","properties":{"kibanaPrivateIPWhitelist":{"description":"Kibana私网访问白名单列表。","type":"array","items":{"description":"Kibana私网访问白名单列表。","type":"string","example":"[ \"192.168.XX.XX/24\" ]"}},"kibanaIPWhitelist":{"description":"Kibana访问白名单列表。","type":"array","items":{"description":"Kibana访问白名单列表。","type":"string","example":"[\"0.0.XX.XX\",       \"10.2.XX.XX\",       \"110.0.XX.XX/9\"]"}},"networkConfig":{"description":"网络配置信息。","type":"object","properties":{"vpcId":{"description":"专有网络ID。","type":"string","example":"vpc-bp1jy348ibzulk6hn****"},"vswitchId":{"description":"交换机ID。","type":"string","example":"vsw-bp1a0mifpletdd1da****"},"vsArea":{"description":"实例所在地域。","type":"string","example":"cn-hangzhou-h"},"type":{"description":"网络类型。","type":"string","example":"vpc"},"whiteIpGroupList":{"description":"白名单组列表。","type":"array","items":{"description":"白名单组列表。","type":"object","properties":{"groupName":{"description":"白名单组组名。","type":"string","example":"test_group_name"},"ips":{"description":"白名单组中的IP列表。","type":"array","items":{"description":"白名单组中的IP列表。","type":"string","example":"[\"0.0.0.0\", \"10.2.XX.XX\"]"}},"whiteIpType":{"description":"白名单类型。","type":"string","example":"PUBLIC_KIBANA"}}}}}}}}}}},"400":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}},"401":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}},"404":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}},"500":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"E5EF11F1-DBAE-4020-AC24-DFA6C4345CAE\\\",\\n  \\\"Result\\\": {\\n    \\\"kibanaPrivateIPWhitelist\\\": [\\n      \\\"[ \\\\\\\"192.168.XX.XX/24\\\\\\\" ]\\\"\\n    ],\\n    \\\"kibanaIPWhitelist\\\": [\\n      \\\"[\\\\\\\"0.0.XX.XX\\\\\\\",       \\\\\\\"10.2.XX.XX\\\\\\\",       \\\\\\\"110.0.XX.XX/9\\\\\\\"]\\\"\\n    ],\\n    \\\"networkConfig\\\": {\\n      \\\"vpcId\\\": \\\"vpc-bp1jy348ibzulk6hn****\\\",\\n      \\\"vswitchId\\\": \\\"vsw-bp1a0mifpletdd1da****\\\",\\n      \\\"vsArea\\\": \\\"cn-hangzhou-h\\\",\\n      \\\"type\\\": \\\"vpc\\\",\\n      \\\"whiteIpGroupList\\\": [\\n        {\\n          \\\"groupName\\\": \\\"test_group_name\\\",\\n          \\\"ips\\\": [\\n            \\\"[\\\\\\\"0.0.0.0\\\\\\\", \\\\\\\"10.2.XX.XX\\\\\\\"]\\\"\\n          ],\\n          \\\"whiteIpType\\\": \\\"PUBLIC_KIBANA\\\"\\n        }\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"更新实例Kibana访问白名单","description":"## 注意事项\n- 调用该接口时，当实例状态为生效中（activating）、失效（invalid）和冻结（inactive）时，无法更新信息。\n- 您可以通过两种方式更新白名单：IP白名单列表和IP白名单组。两种方式不能同时使用，且除了InstanceId和clientToken外，两种方式支持配置的参数也不同，具体如下： \n    - IP白名单列表：kibanaIPWhitelist\n    - IP白名单组：modifyMode、whiteIpGroup\n- 公网访问白名单不支持配置私网IP地址，私网访问白名单不支持配置公网IP地址。","requestParamsDescription":"><notice> 白名单组的增加和删除是由modifyMode为Cover的调用来实现的，Delete和Append无法实现白名单组粒度的增删，只能修改白名单组中的IP地址列表。具体说明如下：\n\n- modifyMode为Cover时，如果ips为空，则删除该白名单组。如果groupName不在已有白名单组组名的列表中，则会新建一个白名单组。\n- modifyMode为Delete时，删除后的ips至少需要保留一个IP地址。\n- modifyMode为Append时，需要保证白名单组组名为已创建，否则会提示NotFound的错误。\n\n></notice>\n","responseParamsDescription":"> 下文返回示例中，本文只保证包含返回数据列表中的参数，而未提到的参数仅供参考，程序中不能强制依赖获取这些参数。","extraInfo":" "}