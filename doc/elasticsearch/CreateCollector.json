{"summary":"创建采集器，采集指定服务上的数据。","path":"/openapi/collectors","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不超过64个ASCII字符。","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF****"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数。用来指定待创建采集器的配置信息。","type":"object","properties":{"dryRun":{"title":"创建是否校验。true:只校验不创建，false：校验并创建","description":"是否校验并创建采集器，只有在创建或更新采集器时使用此参数。可选值：\n\n- true：只校验不更新\n- false：校验并更新\n\n","type":"boolean","required":true,"example":"true","default":"false"},"name":{"title":"采集器实例名称，自定义","description":"采集器名称。长度为1~30个字符，以大小写字母开头，可以包含字母、数字、下划线（_）或连字符（-）。","type":"string","required":true,"example":"ct-test"},"resType":{"title":"采集器类型。","description":"采集器类型。可选值：fileBeat、metricBeat、heartBeat和auditBeat。","type":"string","required":true,"example":"fileBeat","enum":["fileBeat","metricBeat","heartBeat","auditBeat"]},"vpcId":{"title":"采集器所属专有网络ID。","description":"采集器所在的专有网络ID。","type":"string","required":true,"example":"vpc-bp12nu14urf0upaf*****"},"resVersion":{"title":"采集器版本","description":"采集器版本。可选值：\n- 基于ECS部署：6.8.5_with_community\n- 基于ACK部署：6.8.13_with_community","type":"string","required":true,"example":"6.8.5_with_community","enum":["6.8.13_with_community","6.8.5_with_community"]},"collectorPaths":{"title":"filebeat的采集路径，只有ECS机器上的使用","description":"fileBeat采集路径。仅当采集器的安装机器为ECS时，需要配置。","type":"array","items":{"title":"filebeat的采集路径元素","description":"fileBeat采集路径。仅当采集器的安装机器为ECS时，需要配置。","type":"string","required":false,"example":"[\"/var/log\"]"},"required":false},"configs":{"title":"配置文件信息","description":"采集器的配置文件信息。","type":"array","items":{"title":"配置文件信息","description":"采集器的配置文件信息。","type":"object","properties":{"fileName":{"title":"文件路径名称","description":"文件名。","type":"string","required":true,"example":"filebeat.yml"},"content":{"title":"文件内容。详见：https://help.aliyun.com/document_detail/146447.html","description":"文件内容。","type":"string","required":true,"example":"\"filebeat.inputs:xxx\""}},"required":true},"required":true},"extendConfigs":{"title":"采集器Output实例配置","description":"采集器扩展配置。","type":"array","items":{"title":"采集器Output设置，详见数据结构：CollectorDeployMachine、CollectorKibanaInstance、CollectorTargetInstance","description":"采集器扩展配置，详情请参见下文的extendConfigs参数说明章节。","type":"object","required":true,"example":"{             \"instanceId\": \"es-cn-nif201ihd0012****\",              \"instanceType\": \"elasticsearch\",              \"configType\": \"collectorTargetInstance\",              \"hosts\": [                 \"es-cn-nif201ihd0012****.elasticsearch.aliyuncs.com:9200\"             ],              \"userName\": \"elastic\",              \"password\": \"*****\",              \"protocol\": \"HTTP\"         },          {             \"type\": \"ECSInstanceId\",              \"configType\": \"collectorDeployMachine\",              \"machines\": [                 {                     \"instanceId\": \"i-bp11u91xgubypcuz****\"                 }             ]         }     ]"},"required":true}},"required":false,"docRequired":false,"example":"{     \"dryRun\": false,      \"name\": \"test_beats_1\",      \"resType\": \"fileBeat\",      \"resVersion\": \"6.8.5_with_community\",      \"vpcId\": \"vpc-bp12nu14urf0upaf*****\",      \"collectorPaths\": [         \"/var/log\"     ],      \"configs\": [         {             \"fileName\": \"filebeat.yml\",              \"content\": \"filebeat.inputs:xxx\"         }     ] }"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"8466BDFB-C513-4B8D-B4E3-5AB256AB****"},"Result":{"description":"返回结果。","type":"object","properties":{"resId":{"description":"创建成功的采集器ID。","type":"string","example":"ct-cn-4135is2tj194p****"}}}}}},"5XX":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}},"4XX":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"8466BDFB-C513-4B8D-B4E3-5AB256AB****\\\",\\n  \\\"Result\\\": {\\n    \\\"resId\\\": \\\"ct-cn-4135is2tj194p****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"创建收集器","requestParamsDescription":"## extendConfigs参数说明\nextendConfigs中的参数含义如下。\n|  名称  | 类型  | 是否必选 | 示例值  | 描述  |\n|  ----  | ----  | ----  | ----  |\n| extendConfigs| Array |   |   | 采集器扩展配置。|\n| └configType | String |  是    | collectorElasticsearchForKibana  | 配置类型。可选值：collectorTargetInstance（采集器Output）、collectorDeployMachine（采集器的部署机器）、collectorElasticsearchForKibana（支持Kibana仪表盘的Elasticsearch实例信息）。|\n| └type| String |  否    | ECSInstanceId  | 采集器部署的机器类型。可选值：ECSInstanceId（ECS）、ACKCluster（容器Kubernetes）。当**configType**为**collectorDeployMachine**时必填。|\n| └instanceType| String |  否  | elasticsearch  | 采集器Output指定的实例类型。可选值：elasticsearch、logstash。当**configType**为**collectorTargetInstance**时必填。|\n| └instanceId | String |  是    | es-cn-nif201ihd0012****  |采集器关联的实例ID。当**configType**为**collectorTargetInstance**时，为采集器Output的实例ID；当**configType**为**collectorDeployMachines**，且**type**为**ACKCluster**时，为ACK集群ID。|\n| └machines| Array |  否  |   |采集器所部署的ECS机器列表信息。当**configType**为**collectorDeployMachines**，且**type**为**ECSInstanceId**时，必填。|\n|   └└instanceId | String |  是  | i-bp11u91xgubypcuz****  |ECS机器ID列表。|\n| └groupId | String |  | default_ct-cn-5i2l75bz4776**** | 机器组ID。当**configType**为**collectorDeployMachine**时，必填。 |\n| └protocol | String |  否    |  HTTP | 传输协议，需要与采集器Output指定实例的访问协议保持一致。可选值：HTTP、HTTPS。当**configType**为**collectorTargetInstance**时必填。|\n| └userName| String |  否    | elastic  |采集器Output指定实例的访问用户名，默认为elastic。当**configType**为**collectorTargetInstance**或**collectorElasticsearchForKibana**时必填。|\n| └password| String |  否    | \\*****  |对应用户名的密码。|\n| └enableMonitoring| Boolean |  否    | true |是否启用Monitoring，当**configType**为**collectorTargetInstance**，且**instanceType**为**elasticsearch**时必填。可选值：true（启用）、false（不启用）。|\n| └hosts| List<String> |  否  | [\"es-cn-nif201i\\*****.elasticsearch.aliyuncs.com:9200\"]  |采集器Output指定实例的访问地址列表。当**configType**为**collectorTargetInstance**时必填。|\n| └host | String |  否    | es-cn-nif201ihd0012****-kibana.internal.elasticsearch.aliyuncs.com:5601  |启用Kibana Dashboard后，Kibana的私网访问地址。当**configType**为**collectorElasticsearchForKibana**时必填。|\n| └kibanaHost| String |  否    | https://es-cn-nif201ihd0012****.kibana.elasticsearch.aliyuncs.com:5601  |启用Kibana Dashboard后，Kibana的公网访问地址。当**configType**为**collectorElasticsearchForKibana**时必填。|\n\n> └表示子参数。\n\n**extendConfigs**中包括3种configType，分别为collectorTargetInstance、collectorElasticsearchForKibana、collectorDeployMachine，部署机器不同，需要配置的参数不同，具体组合方式如下：\n\n- collectorTargetInstance\n    - ECS\n      configType、instanceId、instanceType、hosts、userName、password、protocol、enableMonitoring\n    - ACK\n      configType、instanceId、instanceType、userName、password、protocol、enableMonitoring\n\n- collectorElasticsearchForKibana\n    - ECS\n      configType、instanceId、host、kibanaHost、userName、password、protocol\n    - ACK\n      configType\n   \n- collectorDeployMachine\n    - ECS\n      configType、type、machines、groupId\n    - ACK\n      configType、type、instanceId\n     ","responseParamsDescription":" ","extraInfo":" "}