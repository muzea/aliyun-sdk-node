{"path":"/openapi/instances/{InstanceId}/actions/restart","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"none"},"parameters":[{"name":"InstanceId","in":"path","schema":{"description":" 实例ID。","type":"string","required":true,"docRequired":true,"example":"es-cn-nif1q8auz0003****"}},{"name":"force","in":"query","schema":{"description":"是否忽略集群状态，强制重启。","type":"boolean","required":false,"example":"false"}},{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不值过64个ASCII字符。\n\n","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF****"}},{"name":"body","in":"body","schema":{"type":"string","required":false,"docRequired":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F99407AB-2FA9-489E-A259-40CF6DC****"},"Result":{"description":"返回结果。","type":"object","properties":{"nodeAmount":{"description":"实例的数据节点数量。","type":"integer","format":"int32","example":"2"},"publicDomain":{"description":"公网访问地址。","type":"string","example":"es-cn-n6w1o1x0w001c****.public.elasticsearch.aliyuncs.com"},"createdAt":{"description":"实例创建时间。","type":"string","example":"2020-07-06T10:18:48.662Z"},"status":{"description":"实例的状态。\n\n支持：active（正常）、activating（生效中）、inactive（冻结）和invalid（失效）。","type":"string","example":"active"},"kibanaPort":{"description":"Kibana公网端口。","type":"integer","format":"int32","example":"5601"},"publicPort":{"description":"公网端口。","type":"integer","format":"int32","example":"9200"},"paymentType":{"description":"实例的付费方式。\n\n支持：prepaid（包年包月）和postpaid（按量付费）。","type":"string","example":"postpaid"},"domain":{"description":"实例的内网访问地址。","type":"string","example":"es-cn-nif1q8auz0003****.elasticsearch.aliyuncs.com"},"description":{"description":"实例名称。","type":"string","example":"es-cn-abc"},"esVersion":{"description":"实例版本。","type":"string","example":"6.7.0_with_X-Pack"},"kibanaDomain":{"description":"Kibana公网访问地址。","type":"string","example":"es-cn-nif1q8auz0003****.kibana.elasticsearch.aliyuncs.com"},"updatedAt":{"description":"实例最后更新的时间。","type":"string","example":"2018-07-18T10:10:04.484Z"},"instanceId":{"description":"实例ID。","type":"string","example":"es-cn-n6w1o1x0w001c****"},"dictList":{"description":"IK词典配置。","type":"array","items":{"type":"object","properties":{"fileSize":{"description":"词典文件大小，单位：字节。","type":"integer","format":"int64","example":"2782602"},"type":{"description":"词典类型，取值：\n\n- STOP：停用词\n- MAIN：主词典\n- SYNONYMS：同义词词典\n- ALI_WS：阿里词典","type":"string","example":"MAIN"},"name":{"description":"词典文件名称。","type":"string","example":"SYSTEM_MAIN.dic"},"sourceType":{"description":"来源类型，支持：\n\n- OSS：OSS开放存储（需要确保OSS存储空间为公共可读）\n- ORIGIN：开源Elasticsearch\n- UPLOAD：上传的文件","type":"string","example":"ORIGIN"}}}},"synonymsDicts":{"description":"同义词词典配置。","type":"array","items":{"type":"object","properties":{"fileSize":{"description":"词典文件大小，单位：字节。","type":"integer","format":"int64","example":"2782602"},"type":{"description":"词典类型，取值：\n\n- STOP：停用词\n- MAIN：主词典\n- SYNONYMS：同义词词典\n- ALI_WS：阿里词典","type":"string","example":"STOP"},"name":{"description":"词典文件名称。","type":"string","example":"SYSTEM_MAIN.dic"},"sourceType":{"description":"来源类型，支持：\n\n- OSS：OSS开放存储（需要确保OSS存储空间为公共可读）\n- ORIGIN：开源Elasticsearch\n- UPLOAD：上传的文件","type":"string","example":"ORIGIN"}}}},"kibanaConfiguration":{"description":"Kibana节点配置。","type":"object","properties":{"spec":{"description":"节点规格。","type":"string","example":"elasticsearch.n4.small"},"amount":{"description":"节点数量。","type":"integer","format":"int32","example":"1"},"disk":{"description":"节点存储空间大小，单位为GB。","type":"integer","format":"int32","example":"20"},"diskType":{"description":"节点存储类型。","type":"string","example":"cloud_ssd"}}},"masterConfiguration":{"description":"Master节点配置。","type":"object","properties":{"spec":{"description":"节点规格。","type":"string","example":"elasticsearch.sn2ne.large"},"amount":{"description":"节点数量。","type":"integer","format":"int32","example":"3"},"disk":{"description":"节点存储空间大小，单位为GB。","type":"integer","format":"int32","example":"20"},"diskType":{"description":"节点存储类型。只支持cloud_ssd（SSD云盘）。","type":"string","example":"cloud_ssd"}}},"networkConfig":{"description":"网络配置。","type":"object","properties":{"vpcId":{"description":"专有网络ID。","type":"string","example":"vpc-bp16k1dvzxtmagcva****"},"vsArea":{"description":"实例所在的可用区。","type":"string","example":"cn-hangzhou-i"},"type":{"description":"网络类型，只支持专有网络VPC（Virtual Private Cloud）。","type":"string","example":"vpc"},"vswitchId":{"description":"虚拟交换机ID。","type":"string","example":"vsw-bp1k4ec6s7sjdbudw****"}}},"nodeSpec":{"description":"数据节点配置信息。","type":"object","properties":{"spec":{"description":"节点规格。","type":"string","example":"elasticsearch.n4.small"},"disk":{"description":"节点的存储空间大小，单位为GB。","type":"integer","format":"int32","example":"50"},"diskType":{"description":"节点的存储类型。","type":"string","example":"cloud_ssd"}}}}}}}},"5XX":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}},"4XX":{"schema":{"type":"object","properties":{"Code":{"type":"string"},"Message":{"type":"string"},"RequestId":{"type":"string"}}}}},"errorCodes":{"400":[{"errorCode":"InstanceActivating","errorMessage":"Instance is activating"},{"errorCode":"InstanceNotFound","errorMessage":"The instanceId provided does not exist"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F99407AB-2FA9-489E-A259-40CF6DC****\\\",\\n  \\\"Result\\\": {\\n    \\\"nodeAmount\\\": 2,\\n    \\\"publicDomain\\\": \\\"es-cn-n6w1o1x0w001c****.public.elasticsearch.aliyuncs.com\\\",\\n    \\\"createdAt\\\": \\\"2020-07-06T10:18:48.662Z\\\",\\n    \\\"status\\\": \\\"active\\\",\\n    \\\"kibanaPort\\\": 5601,\\n    \\\"publicPort\\\": 9200,\\n    \\\"paymentType\\\": \\\"postpaid\\\",\\n    \\\"domain\\\": \\\"es-cn-nif1q8auz0003****.elasticsearch.aliyuncs.com\\\",\\n    \\\"description\\\": \\\"es-cn-abc\\\",\\n    \\\"esVersion\\\": \\\"6.7.0_with_X-Pack\\\",\\n    \\\"kibanaDomain\\\": \\\"es-cn-nif1q8auz0003****.kibana.elasticsearch.aliyuncs.com\\\",\\n    \\\"updatedAt\\\": \\\"2018-07-18T10:10:04.484Z\\\",\\n    \\\"instanceId\\\": \\\"es-cn-n6w1o1x0w001c****\\\",\\n    \\\"dictList\\\": {\\n      \\\"dictList\\\": [\\n        {\\n          \\\"fileSize\\\": 2782602,\\n          \\\"type\\\": \\\"MAIN\\\",\\n          \\\"name\\\": \\\"SYSTEM_MAIN.dic\\\",\\n          \\\"sourceType\\\": \\\"ORIGIN\\\"\\n        }\\n      ]\\n    },\\n    \\\"synonymsDicts\\\": {\\n      \\\"synonymsDicts\\\": [\\n        {\\n          \\\"fileSize\\\": 2782602,\\n          \\\"type\\\": \\\"STOP\\\",\\n          \\\"name\\\": \\\"SYSTEM_MAIN.dic\\\",\\n          \\\"sourceType\\\": \\\"ORIGIN\\\"\\n        }\\n      ]\\n    },\\n    \\\"kibanaConfiguration\\\": {\\n      \\\"spec\\\": \\\"elasticsearch.n4.small\\\",\\n      \\\"amount\\\": 1,\\n      \\\"disk\\\": 20,\\n      \\\"diskType\\\": \\\"cloud_ssd\\\"\\n    },\\n    \\\"masterConfiguration\\\": {\\n      \\\"spec\\\": \\\"elasticsearch.sn2ne.large\\\",\\n      \\\"amount\\\": 3,\\n      \\\"disk\\\": 20,\\n      \\\"diskType\\\": \\\"cloud_ssd\\\"\\n    },\\n    \\\"networkConfig\\\": {\\n      \\\"vpcId\\\": \\\"vpc-bp16k1dvzxtmagcva****\\\",\\n      \\\"vsArea\\\": \\\"cn-hangzhou-i\\\",\\n      \\\"type\\\": \\\"vpc\\\",\\n      \\\"vswitchId\\\": \\\"vsw-bp1k4ec6s7sjdbudw****\\\"\\n    },\\n    \\\"nodeSpec\\\": {\\n      \\\"spec\\\": \\\"elasticsearch.n4.small\\\",\\n      \\\"disk\\\": 50,\\n      \\\"diskType\\\": \\\"cloud_ssd\\\"\\n    }\\n  }\\n}\",\"errorExample\":\"{\\n  \\\"RequestId\\\" : \\\"F78BCD23-A133-4E32-A0FD-3D06E014402F\\\",\\n  \\\"Code\\\" : \\\"InstanceNotFound\\\",\\n  \\\"Message\\\" : \\\"The specified instance does not exist. Check the instance status and try again.\\\"\\n}\\n\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"重启Elasticsearch","summary":"重启Elasticsearch集群。","description":"> 重启后，实例进入生效中（activing）状态。重启成功后，实例状态变为正常（active）。阿里云Elasticsearch支持单节点重启，节点重启分为普通重启和蓝绿重启。","requestParamsDescription":"## RequestBody\nRequestBody中还需填入以下参数，用来指定重启参数信息。\n| 名称 | 类型 | 是否必选 | 示例值 | 描述 |\n| ---- | ---- | ---- | ---- |\n| restartType | String | 否 |  instance |重启类型。可选值：<br>**instance**（默认）：实例重启。<br>**nodeIp**：节点重启，需要指定节点的IP地址。<br>**nodeEcsId**：节点重启，需要指定集群中ECS实例的ID。|\n| nodes | List<String>  | 否| [\"127.0.0.1\"] |选择节点重启时，指定待重启的节点的IP地址或ID。|\n| blueGreenDep | Boolean | 否 | false |节点重启时，是否启用蓝绿部署，默认值为**false**。|\n| batchCount | Double | 否| 25.0 | 实例强制重启时，设置的并发度。|\n| batchUnit | String | 否 | percent |**batchCount**的单位，默认为**percent**。|\n\n> * **restartType**不传或者传空字符串时，默认为**instance**。为**instance**时，默认忽略**blueGreenDep**参数，并且需要满足以下条件：\n    * **force**为**true**时，**batchCount**必须大于0，小于等于100，否则会报错RestartBatchValueError。\n    * **force**为**false**时，**batchCount**默认为0，设置为其他值时，会报错NormalRestartNotSupportBatch。\n* **restartType**为**nodeIp**时，默认忽略**batchCount**参数，并且需要满足以下条件：\n    * **nodes**不可为空，否则提醒参数错误。\n    * **blueGreenDep**为**true**时，在重启节点时，会启用蓝绿部署。为**false**时，不会启用蓝绿部署，即正常重启。\n\n\n示例如下。\n\n```\n{\n    \"restartType\":\"nodeIp\",\n    \"nodes\":[\"172.16.xx.xx\",\"172.16.xx.xx\"],\n    \"blueGreenDep\":true\n}\n```\n","responseParamsDescription":"以下返回示例中，本文只保证包含返回数据列表中的参数，而未提到的参数仅供参考，程序中不能强制依赖获取这些参数。","extraInfo":" "}