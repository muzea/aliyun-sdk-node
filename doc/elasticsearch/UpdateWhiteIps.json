{"summary":"修改ES实例的VPC私网访问白名单。","path":"/openapi/instances/{InstanceId}/white-ips","methods":["patch","post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"InstanceId","in":"path","schema":{"description":"实例ID。","type":"string","required":true,"docRequired":true,"example":"es-cn-npk2154oi000b****"}},{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不超过64个ASCII字符。","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF****"}},{"name":"modifyMode","in":"query","schema":{"description":"修改方式，可选值：\n\n- Cover（默认）：使用ips参数的值覆盖原白名单的IP地址。\n\n- Append：在原白名单的IP地址中增加ips参数中输入的IP地址。\n\n- Delete：在原白名单的IP地址中删除ips参数中输入的IP地址，至少需要保留一个IP地址。\n\n","type":"string","required":false,"example":"Cover"}},{"name":"body","in":"body","style":"json","schema":{"description":"RequestBody信息。","type":"object","properties":{"esIPWhitelist":{"description":"白名单中的IP地址信息。","type":"array","items":{"description":"IP地址白名单列表。whiteIpGroup为空时可用，该参数值会更新Default白名单分组中的IP白名单配置。\n><notice> 不支持同时配置esIPWhitelist和whiteIpGroup。\n></notice>","type":"string","required":false,"example":"[\"10.61.xx.xx\", \"106.11.xx.xx”]"},"required":false},"whiteIpGroup":{"description":"以白名单组方式更新实例白名单配置，仅支持更新一个白名单组。\n><notice> 不支持同时配置esIPWhitelist和whiteIpGroup。\n></notice>","type":"object","properties":{"groupName":{"description":"白名单组的组名。如果选填了whiteIpGroup参数，则该参数必填。","type":"string","required":false,"example":"test_group"},"ips":{"description":"白名单组中的IP地址列表。","type":"array","items":{"description":"白名单组中的IP地址列表。如果选填了whiteIpGroup参数，则该参数必填。","type":"string","required":false,"example":"[\"10.2.xx.xx\", \"10.3.xx.xx\"]"},"required":false},"whiteIpType":{"description":"IP白名单的类型。固定为**PRIVATE_ES**，即私网访问白名单。","type":"string","required":false,"example":"PRIVATE_ES"}},"required":false}},"required":false}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"8D58B014-BBD7-4D80-B219-00B9D5C6860C"},"Result":{"description":"返回结果。","type":"object","properties":{"esIPWhitelist":{"description":"私网访问白名单（已废弃）。","type":"array","items":{"description":"更新后的白名单列表。","type":"string","example":"[\"106.11.xx.xx\", \"10.61.xx.xx\"]"}},"networkConfig":{"description":"网络配置。","type":"object","properties":{"whiteIpGroupList":{"description":"白名单组列表。","type":"array","items":{"description":"白名单组信息。","type":"object","properties":{"groupName":{"description":"白名单组的组名。默认包含default分组。","type":"string","example":"test_group"},"ips":{"description":"白名单组中的IP地址信息。","type":"array","items":{"description":"白名单组中的IP地址列表。","type":"string","example":"[\"10.2.xx.xx\", \"10.3.xx.xx\"]"}},"whiteIpType":{"description":"白名单类型。固定为PRIVATE_ES，即私网访问白名单。","type":"string","example":"PRIVATE_ES"}}}}}}}}}}},"400":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"401":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"404":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"500":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"8D58B014-BBD7-4D80-B219-00B9D5C6860C\\\",\\n  \\\"Result\\\": {\\n    \\\"esIPWhitelist\\\": [\\n      \\\"[\\\\\\\"106.11.xx.xx\\\\\\\", \\\\\\\"10.61.xx.xx\\\\\\\"]\\\"\\n    ],\\n    \\\"networkConfig\\\": {\\n      \\\"whiteIpGroupList\\\": [\\n        {\\n          \\\"groupName\\\": \\\"test_group\\\",\\n          \\\"ips\\\": [\\n            \\\"[\\\\\\\"10.2.xx.xx\\\\\\\", \\\\\\\"10.3.xx.xx\\\\\\\"]\\\"\\n          ],\\n          \\\"whiteIpType\\\": \\\"PRIVATE_ES\\\"\\n        }\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"修改实例的VPC私网访问白名单","description":"## 注意事项\n- 当实例状态为生效中（activating）、失效（invalid）和冻结（inactive）时，无法更新信息。\n- 您可以通过两种方式更新白名单：IP白名单列表和IP白名单组。两种方式不能同时使用，且除了InstanceId和clientToken外，两种方式支持配置的参数也不同，具体如下： \n    - IP白名单列表：esIPWhitelist\n    - IP白名单组：modifyMode、whiteIpGroup\n- 公网访问白名单不支持配置私网IP地址，私网访问白名单不支持配置公网IP地址。","requestParamsDescription":"><notice> 白名单组的增加和删除是由modifyMode为Cover的调用来实现的，Delete和Append无法实现白名单组粒度的增删，只能修改白名单组中的IP地址列表。具体说明如下：\n\n- modifyMode为Cover时，如果ips为空，则删除该白名单组。如果groupName不在已有白名单组组名的列表中，则会新建一个白名单组。\n- modifyMode为Delete时，删除后的ips至少需要保留一个IP地址。\n- modifyMode为Append时，需要保证白名单组组名为已创建，否则会提示NotFound的错误。\n\n></notice>","responseParamsDescription":">  以下返回示例中，本文只保证包含返回数据列表中的参数，而未提到的参数仅供参考，参数说明可参见[ListInstance](~~142230~~)。程序中不能强制依赖获取这些参数。","extraInfo":" "}