{"summary":"创建Elasticsearch实例。","path":"/openapi/instances","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"paid"},"parameters":[{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不超过64个ASCII字符。\n","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF****"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数。","type":"object","properties":{"zoneCount":{"description":"实例的可用区数量。可选值：1、2、3，默认值：1。","type":"integer","format":"int32","required":false,"example":"2"},"paymentType":{"description":"付费类型。可选值：\n\n- postpaid：按量计费\n- prepaid：包年包月","type":"string","required":false,"example":"postpaid"},"paymentInfo":{"description":"包年包月实例的付费详情。创建包年包月实例时必填。","required":false,"$ref":"#/components/schemas/PaymentInfo"},"nodeAmount":{"description":"数据节点个数，取值范围为2~50。","type":"integer","format":"int32","required":true,"example":"3"},"instanceCategory":{"description":"版本类型：\n- x-pack：创建商业版实例，或不开启Indexing Service和OpenStore的内核增强版实例。\n- IS：创建开启Indexing Service或OpenStore的内核增强版实例。","type":"string","required":false,"example":"advanced"},"esAdminPassword":{"description":"实例的访问密码。要求包含以下字符中的三种：大写字母、小写字母、数字、特殊字符：!@#$%^&*()_+-=，长度为8~32位。","type":"string","required":true,"example":"Es_password"},"esVersion":{"description":"实例版本。可选值：\n- 8.5.1_with_X-Pack\n- 7.10_with_X-Pack\n- 6.7_with_X-Pack\n- 7.7_with_X-Pack\n- 6.8_with_X-Pack\n- 6.3_with_X-Pack\n- 5.6_with_X-Pack\n- 5.5.3_with_X-Pack\n\n> 以上所列版本不一定包含Elasticsearch实例支持的所有版本，实际支持的版本可调用[GetRegionConfiguration](~~254099~~)接口查看。","type":"string","required":true,"example":"5.5.3_with_X-Pack"},"nodeSpec":{"description":"数据节点配置。\n\n> 在北京、上海、杭州和深圳地域，通过createInstance创建新一代云盘型数据节点的实例时，需指定规格族+后缀`.new`，例如， elasticsearch.sn1ne.large.new。","required":false,"$ref":"#/components/schemas/NodeSpec"},"masterConfiguration":{"description":"专有主节点配置。\n> 在北京、上海、杭州和深圳地域，通过createInstance创建新一代云盘型数据节点的实例时，需指定规格族+后缀`.new`，例如， elasticsearch.sn1ne.large.new。","required":false,"$ref":"#/components/schemas/MasterNodeConfiguration"},"warmNodeConfiguration":{"description":"冷数据节点配置。","required":false,"$ref":"#/components/schemas/WarmNodeConfiguration"},"clientNodeConfiguration":{"description":"协调节点配置。","required":false,"$ref":"#/components/schemas/ClientNodeConfiguration"},"elasticDataNodeConfiguration":{"description":"弹性节点配置。","required":false,"$ref":"#/components/schemas/ElasticDataNodeConfiguration"},"kibanaConfiguration":{"description":"Kibana节点配置。\n\n> 强烈建议开启Kibana节点。","required":false,"$ref":"#/components/schemas/KibanaNodeConfiguration"},"networkConfig":{"description":"网络配置。\n\n> 创建实例时不支持指定IP白名单。","required":true,"$ref":"#/components/schemas/NetworkConfig"},"resourceGroupId":{"title":"资源组id。","description":"实例所属的资源组ID。","type":"string","required":false,"example":"rg-aekzu7tsu4n****"},"description":{"title":"实例名称，","description":"实例名称。","type":"string","required":false,"example":"es"},"tags":{"title":"实例标签组。","description":"实例标签组。","type":"array","items":{"title":"实例标签。","description":"实例标签。","type":"object","properties":{"tagKey":{"title":"实例标签键。","description":"实例的标签键。","type":"string","required":false,"example":"KeyTest"},"tagValue":{"title":"实例标签值。","description":"实例的标签值。","type":"string","required":false,"example":"KeyValue"}},"required":false},"required":false}},"required":false,"example":"{   \"description\": \"xpack-hot-cold\",   \"nodeAmount\": 2,   \"esVersion\": \"7.10_with_X-Pack\",   \"instanceCategory\": \"x-pack\",   \"nodeSpec\": {     \"spec\": \"elasticsearch.sn2ne.xlarge\",     \"disk\": 20,     \"diskType\": \"cloud_ssd\"   },   \"warmNodeConfiguration\": {     \"spec\": \"elasticsearch.sn1ne.xlarge\",     \"amount\": 3,     \"diskType\": \"cloud_efficiency\",     \"disk\": 500   },   \"networkConfig\": {     \"type\": \"vpc\",     \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",     \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",     \"vsArea\": \"cn-zhangjiakou-c\"   },   \"paymentType\": \"postpaid\",   \"esAdminPassword\": \"yourPassword\",   \"kibanaConfiguration\": {     \"spec\": \"elasticsearch.sn1ne.large\"   } }"}}],"responses":{"202":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"838D9D11-8EEF-46D8-BF0D-BC8FC2B0C2F3"},"Result":{"description":"返回结果。","type":"object","properties":{"instanceId":{"description":"实例ID。","type":"string","example":"es-is-0u2ecp69tt****"}}}}}},"400":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"401":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"404":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}},"500":{"schema":{"type":"object","properties":{"RequestId":{"type":"string"},"Code":{"type":"string"},"Message":{"type":"string"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<createInstanceResponse>\\n    <RequestId>838D9D11-8EEF-46D8-BF0D-BC8FC2B0C2F3</RequestId>\\n    <Result>\\n        <instanceId>es-is-0u2ecp69tt****</instanceId>\\n    </Result>\\n</createInstanceResponse>\",\"errorExample\":\"\"}]","title":"创建ES实例","description":"### 注意事项\n- 请确保在使用该接口前，已充分了解Elasticsearch产品的收费方式和价格。详情请参见[阿里云Elasticsearch定价](https://www.aliyun.com/price/product?spm=a2c4g.11186623.2.7.657d2cbeRoSPCd#/elasticsearch/detail)。\n- 创建实例需要通过实名认证。<props=\"china\"><ph>详情请参见[实名认证](~~37175~~)。</ph></props>\n- 创建实例时不需要指定可用区，实例默认与所选VPC在同一可用区中。\n\n","requestParamsDescription":"> - 阿里云Elasticsearch支持的节点规格列表，请参见[阿里云Elasticsearch定价信息](https://www.aliyun.com/price/product?spm=a2c4g.11186623.2.10.653c6c88NcQPZY#/elasticsearch/detail)和[产品规格](~~271718~~)。\n- diskType参数是节点的存储类型，普通云盘型规格该参数必填，本地盘规格该参数非必填。\n\n\n\n请求体参数示例如下：\n\n- 创建通用商业版实例，同时包含冷、热节点。\n```\n{\n  \"description\": \"xpack-hot-cold\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"x-pack\",\n  \"nodeSpec\": {\n    \"spec\": \"elasticsearch.sn2ne.xlarge\",\n    \"disk\": 20,\n    \"diskType\": \"cloud_ssd\"\n  },\n  \"warmNodeConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.xlarge\",\n    \"amount\": 3,\n    \"diskType\": \"cloud_efficiency\",\n    \"disk\": 500\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建Indexing Service系列实例，只包含热节点。\n```\n{\n  \"description\": \"is-hot\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"IS\",\n  \"nodeSpec\": {\n    \"spec\": \"elasticsearch.sn1ne.xlarge\",\n    \"disk\": 20,\n    \"diskType\": \"cloud_ssd\"\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建Indexing Service系列实例，只包含冷节点。\n```\n{\n  \"description\": \"is-cold\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"IS\",\n  \"warmNodeConfiguration\": {\n    \"spec\": \"group.c6.large.500\",\n    \"amount\": 3,\n    \"disk\": 300\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建Indexing Service系列实例，同时包含冷、热节点。\n```\n{\n  \"description\": \"is-hot-cold\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"IS\",\n  \"nodeSpec\": {\n    \"spec\": \"elasticsearch.sn2ne.xlarge\",\n    \"disk\": 50,\n    \"diskType\": \"cloud_ssd\"\n  },\n  \"warmNodeConfiguration\": {\n    \"spec\": \"group.c6.large.500\",\n    \"amount\": 3,\n    \"disk\": 300\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建Indexing Service系列实例，开启OpenStore存储，同时包含冷、热节点。\n```\n{\n  \"description\": \"os-1\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"IS\",\n  \"nodeSpec\": {\n    \"spec\": \"elasticsearch.sn2ne.xlarge\",\n    \"disk\": 50,\n    \"diskType\": \"cloud_ssd\"\n  },\n  \"warmNodeConfiguration\": {\n    \"spec\": \"openstore.i2g.4xlarge\",\n    \"amount\": 3\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建Indexing Service系列实例，开启OpenStore存储，包含冷热共享型节点。\n```\n{\n  \"description\": \"os-2\",\n  \"nodeAmount\": 2,\n  \"esVersion\": \"7.10_with_X-Pack\",\n  \"instanceCategory\": \"IS\",\n  \"nodeSpec\": {\n    \"spec\": \"openstore.i2g.4xlarge\",\n    \"disk\": 50,\n    \"diskType\": \"cloud_ssd\"\n  },\n  \"networkConfig\": {\n    \"type\": \"vpc\",\n    \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n    \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n    \"vsArea\": \"cn-zhangjiakou-c\"\n  },\n  \"paymentType\": \"postpaid\",\n  \"esAdminPassword\": \"yourPassword\",\n  \"kibanaConfiguration\": {\n    \"spec\": \"elasticsearch.sn1ne.large\"\n  }\n}\n```\n- 创建通用商业版7.10版本实例，并开启自动续费。\n> paymentType设置为prepaid，表示实例为预付费模式。自动续费在paymentInfo参数中设置。\n```\n{\n \"description\": \"自动续费\",\n \"nodeAmount\": 3,\n \"instanceCategory\": \"x-pack\",\n \"esVersion\": \"7.10_with_X-Pack\",\n \"nodeSpec\": {\n \"spec\": \"elasticsearch.sn2ne.xlarge\",\n \"disk\": 50,\n \"diskType\": \"cloud_ssd\"\n },\n \"kibanaConfiguration\": {\n \"spec\": \"elasticsearch.sn1ne.large\"\n },\n \"networkConfig\": {\n \"type\": \"vpc\",\n \"vpcId\": \"vpc-8vbfu74bmw4m7m84a****\",\n \"vswitchId\": \"vsw-8vbnk6cmurbpump2f****\",\n \"vsArea\": \"cn-zhangjiakou-c\"\n },\n \"paymentType\": \"prepaid\",\n \"paymentInfo\": {\n \"duration\": 1,\n \"pricingCycle\": \"Month\",\n \"isAutoRenew\": true,\n \"autoRenewDuration\": 1\n },\n \"esAdminPassword\": \"yourPassword\"\n}\n```","responseParamsDescription":"## 返回参数\n| 名称 | 类型 | 示例值 | 描述 |\n| ---- | ---- | ---- | ---- |\n| RequestId | String | 838D9D11-8EEF-46D8-BF0D-BC8FC2B0C2F3 | 请求ID。|\n| Result | object |   | 返回结果。|\n| └instanceId | string | es-is-0u2ecp69tt**** | 实例ID。|","extraInfo":" "}