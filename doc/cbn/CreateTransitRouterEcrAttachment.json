{"summary":"您可以调用CreateTransitRouterEcrAttachment接口将要互通的专线网关ECR（ExpressConnect Router）网络实例连接到同地域的转发路由器实例中。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"paid"},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-001****"}},{"name":"CenId","in":"query","schema":{"description":"云企业网实例ID。","type":"string","required":false,"example":"cen-7qthudw0ll6jmc****"}},{"name":"TransitRouterId","in":"query","schema":{"description":"转发路由器实例ID。","type":"string","required":false,"example":"tr-bp1su1ytdxtataupl****"}},{"name":"RegionId","in":"query","schema":{"description":"转发路由器实例所属的地域ID。\n\n您可以通过调用[DescribeChildInstanceRegions](~~132080~~)接口获取地域ID。","type":"string","required":false,"example":"eu-central-1"}},{"name":"TransitRouterAttachmentName","in":"query","schema":{"description":"ECR连接的名称。\n\n名称可以为空或长度为1～128个字符，不能以http://或https://开头。","type":"string","required":false,"example":"nametest"}},{"name":"TransitRouterAttachmentDescription","in":"query","schema":{"description":"ECR连接描述。\n\n描述可以为空或长度为1～256个字符，不能以http://或https://开头。","type":"string","required":false,"example":"testdesc"}},{"name":"EcrId","in":"query","schema":{"description":"关联的专线网关实例ID。","type":"string","required":true,"docRequired":true,"example":"ecr-upyc0viial107r****"}},{"name":"EcrOwnerId","in":"query","schema":{"description":"ECR实例所属阿里云账号（主账号）ID。默认值为当前登录的阿里云账号ID。\n\n> 如果您要加载跨账号的网络实例，本参数必填。","type":"integer","format":"int64","required":false,"example":"1250123456123456"}},{"name":"DryRun","in":"query","schema":{"description":"是否只预检此次请求。取值：\n- **true**：发送检查请求，不会修改VPN连接的配置。检查项包括是否填写了必需参数、请求格式、业务限制。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。\n- **false**（默认值）：发送正常请求，通过检查后直接修改VPN连接的配置。","type":"boolean","required":false,"example":"false"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签信息列表。\n\n一次最多支持输入20个标签信息。","type":"array","items":{"type":"object","properties":{"Key":{"description":"资源的标签键。\n\n一旦传入该值，则不允许为空字符串。最多支持64个字符，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n一次最多支持输入20个标签的标签键。","type":"string","required":false,"example":"tagtest"},"Value":{"description":"资源的标签值。\n\n标签值可以为空或输入不超过128个字符的字符串，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n每一个标签键对应一个标签值，一次最多支持输入20个标签键对应的标签值。","type":"string","required":false,"example":"tagtest"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"type":"object","properties":{"TransitRouterAttachmentId":{"description":"ECR连接ID。","type":"string","example":"tr-attach-qieks13jnt1cchy***"},"RequestId":{"description":"请求ID。","type":"string","example":"C0245BEF-52AC-44A8-A776-EF96FD26A5CA"}}}}},"errorCodes":{"400":[{"errorCode":"NoPermission.AliyunServiceRolePolicyForCEN","errorMessage":"You are not authorized to create the service linked role. Role Name: AliyunServiceRolePolicyForCEN. Service Name: cen.aliyuncs.com. Make sure that the user has been granted the ram:CreateServiceLinkedRole permission."},{"errorCode":"OperationUnsupported.TransitRouterRegionId","errorMessage":"The specified TransitRouterRegion does not support the operation."},{"errorCode":"InvalidCenId.NotFound","errorMessage":"CenId is not found."},{"errorCode":"InvalidStatus.ResourceStatus","errorMessage":"The resource is not in a valid state for the attachment operation."},{"errorCode":"InvalidTransitRouterId.NotFound","errorMessage":"TransitRouterId is not found."},{"errorCode":"Forbbiden.TransitRouterServiceNotOpen","errorMessage":"The user has not open transit router service."},{"errorCode":"OperationUnsupported.TransitRouterType","errorMessage":"The specified TransitRouterType does not support the operation."},{"errorCode":"MissingParam.CenIdOrRegionId","errorMessage":"Either CenId or RegionId must be specified."},{"errorCode":"IllegalParam.AssociateRouteTableId","errorMessage":"The specified AssociateRouteTableId is illegal."},{"errorCode":"Forbbiden.AttachChildInstanceAcrossBid","errorMessage":"Operation is invalid, please apply for cross-bid attaching."},{"errorCode":"IllegalParam.RegionId","errorMessage":"RegionId is illegal."},{"errorCode":"OperationUnsupported.CenFullLevel","errorMessage":"CEN full level does not support TransitRouter"},{"errorCode":"InvalidOperation.CenInstanceStatus","errorMessage":"The CEN instance is not in a valid state for the operation.\t"},{"errorCode":"IncorrectStatus.TransitRouter","errorMessage":"The status of TransitRouter is incorrect."},{"errorCode":"QuotaFull.ChildInstanceRelatedCen","errorMessage":"The childinstance has exceed the quota of the times that a childinstance can be attached as an attachment."},{"errorCode":"Forbidden.ResourceOwnerTransitRouterServiceNotOpen","errorMessage":"The resource owner user has not opened transit router service."},{"errorCode":"OperationUnsupported.BandwidthType","errorMessage":"The specified BandwidthType does not support the operation."},{"errorCode":"IllegalParam.BandwidthType","errorMessage":"BandwidthType is illegal."},{"errorCode":"IncorrectStatus.EcrResource","errorMessage":"The ECR resource is not in a valid state for the attachment operation."},{"errorCode":"QuotaExceeded.CenQuotaEcrAttachPerTransitRouter","errorMessage":"The maximum number of ECR attachment per Transit Router is exceeded."},{"errorCode":"OperationUnsupported.ECRAttachment","errorMessage":"ECR Attachment is not supported."},{"errorCode":"InvalidTransitRouterMode.NeedUpgrade","errorMessage":"TransitRouter need to upgrade."},{"errorCode":"InvalidParameter","errorMessage":"Invalid parameter."},{"errorCode":"Unauthorized","errorMessage":"The AccessKeyId is unauthorized."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"TransitRouterAttachmentId\\\": \\\"tr-attach-qieks13jnt1cchy***\\\",\\n  \\\"RequestId\\\": \\\"C0245BEF-52AC-44A8-A776-EF96FD26A5CA\\\"\\n}\",\"type\":\"json\"}]","title":"在企业版转发路由器下创建专线网关ECR连接","description":"- 仅企业版转发路由器支持创建ECR连接。\n- 您可以通过以下两种方式在企业版转发路由器下创建ECR连接： \n\n  - 如果您已经在目标地域创建了企业版转发路由器实例，您可以通过指定**EcrId**、**RegionId**和**TransitRouterId**创建ECR连接。 \n  - 如果您在目标地域没有企业版转发路由器实例，您可以通过指定**EcrId**、**CenId**和**RegionId**创建ECR连接。创建ECR连接时系统为您自动创建企业版转发路由器实例。 \n\n- CreateTransitRouterEcrAttachment接口属于异步接口，即系统会先返回一个ECR连接ID，但该ECR连接并未创建完成，系统后台的创建任务仍在进行。您可以调用ListTransitRouterEcrAttachments接口查询ECR连接的状态。 \n\n  - 当ECR连接处于**Attaching**状态时，表示ECR连接正在创建中，在该状态下，您只能对ECR连接执行查询操作，不能执行其他操作。 \n  - 当ECR连接处于**Attached**状态时，表示ECR连接创建完成。 \n- 创建ECR连接后，ECR连接默认不与任何企业版转发路由器路由表建立路由学习关系和关联转发关系。 \n\n  当ECR连接与企业版转发路由器路由表建立[路由学习关系](~~468300~~)后，系统会自动将ECR实例的路由传播至企业版转发路由器路由表中。\n- 创建ECR连接后，系统自动将ECR连接关联的企业版转发路由器路由表中的路由传播到ECR实例的路由表中。 \n\n### 前提条件 \n- 企业版转发路由器所属的阿里云账号和ECR实例所属的阿里云账号属于同一家企业。 \n- 企业版转发路由器支持连接同账号和跨账号的ECR实例。在创建跨账号的ECR连接前，请先获得跨账号ECR实例的授权。具体操作，请参见[跨账号网络实例授权](~~181553~~)。\n- **调用本接口创建ECR连接前，请先调用[CreateExpressConnectRouterAssociation](~~2712082~~)接口为ECR实例和企业版转发路由器实例创建关联关系。**\n\n  **当您调用DeleteTransitRouterEcrAttachment接口强制删除ECR连接时，系统将会一并删除ECR实例和企业版转发路由器实例间的关联关系，无需再额外删除。**"}