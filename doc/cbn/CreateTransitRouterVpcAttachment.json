{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n>若您未指定，则系统自动使用API请求的RequestId作为ClientToken标识。每次API请求的RequestId不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-001****"}},{"name":"CenId","in":"query","schema":{"description":"云企业网实例ID。","type":"string","required":false,"example":"cen-j3jzhw1zpau2km****"}},{"name":"TransitRouterId","in":"query","schema":{"description":"企业版转发路由器实例ID。","type":"string","required":false,"example":"tr-bp1su1ytdxtataupl****"}},{"name":"RegionId","in":"query","schema":{"description":"VPC实例所属地域ID。\n\n您可以通过调用[DescribeChildInstanceRegions](~~132080~~)接口获取地域ID。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"TransitRouterAttachmentName","in":"query","schema":{"description":"VPC连接的名称。\n\n名称可以为空或长度为1～128个字符，不能以http://或https://开头。","type":"string","required":false,"example":"testname"}},{"name":"TransitRouterAttachmentDescription","in":"query","schema":{"description":"VPC连接的描述信息。\n\n描述可以为空或长度为1～256个字符，不能以http://或https://开头。","type":"string","required":false,"example":"testname"}},{"name":"VpcId","in":"query","schema":{"description":"VPC实例ID。","type":"string","required":true,"docRequired":true,"example":"vpc-bp1kbjcre9vtsebo1****"}},{"name":"VpcOwnerId","in":"query","schema":{"description":"VPC实例所属阿里云账号（主账号）ID。默认值为当前登录的阿里云账号ID。\n\n> 如果您要加载跨账号的网络实例，本参数必填。","type":"integer","format":"int64","required":false,"example":"1250123456123456"}},{"name":"ChargeType","in":"query","schema":{"description":"付费方式。默认值：**POSTPAY**，表示按量付费。","type":"string","required":false,"example":"POSTPAY"}},{"name":"DryRun","in":"query","schema":{"description":"是否对此次请求执行预检，包括权限、实例状态校验等。取值：\n\n- **false**（默认值）：发送正常请求，通过检查后直接创建VPC连接。\n- **true**：发送检查请求，只进行校验，不会创建VPC连接。检查项包括是否填写了必需参数、请求格式等。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。","type":"boolean","required":false,"example":"false"}},{"name":"ZoneMappings","in":"query","style":"repeatList","schema":{"description":"请在企业版转发路由器的可用区中选择一个交换机实例。\n\n一次最多支持添加10组信息。\n\n","type":"array","items":{"description":"企业版转发路由器支持的可用区及其对应的交换机实例的信息。","type":"object","properties":{"VSwitchId":{"description":"在企业版转发路由器支持的可用区中选择一个交换机实例。\n\n一次最多支持为10个可用区选择交换机实例。","type":"string","required":true,"example":"vsw-bp1a214sbus8z3b54****"},"ZoneId":{"description":"企业版转发路由器支持的可用区的ID。\n\n您可以通过[DescribeZones](~~36064~~)接口查询可用区的ID。\n\n一次最多支持选择10个可用区。","type":"string","required":true,"example":"cn-hangzhou-h"}},"required":false},"required":true,"maxItems":10}},{"name":"AutoPublishRouteEnabled","in":"query","schema":{"description":"是否使企业版转发路由器自动发布路由到VPC实例。\n\n- **false**（默认值）：否。\n- **true**：是。","type":"boolean","required":false,"example":"true"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签信息。\n\n一次最多支持输入20个标签信息。","type":"array","items":{"type":"object","properties":{"Key":{"description":"资源的标签键。\n\n一旦传入该值，则不允许为空字符串。最多支持64个字符，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n一次最多支持输入20个标签的标签键。","type":"string","required":false,"example":"tagtest"},"Value":{"description":"资源的标签值。\n\n标签值可以为空或输入不超过128个字符的字符串，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n每一个标签键对应一个标签值，一次最多支持输入20个标签键对应的标签值。","type":"string","required":false,"example":"tagtest"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"TransitRouterAttachmentId":{"description":"VPC连接ID。","type":"string","example":"tr-attach-ia340z7xis7t5s****"},"RequestId":{"description":"请求ID。","type":"string","example":"C087A369-82B9-43EF-91F4-4B63A9C6E6B6"}}}}},"errorCodes":{"400":[{"errorCode":"OperationUnsupported.TransitRouterRegionId","errorMessage":"The specified TransitRouterRegion does not support the operation."},{"errorCode":"NoPermission.AliyunServiceRoleForCEN","errorMessage":"You are not authorized to create the service linked role. Role Name: AliyunServiceRoleForCEN. Service Name: cen.aliyuncs.com. Make sure that the user has been granted the ram:CreateServiceLinkedRole permission."},{"errorCode":"IllegalParam.RegionId","errorMessage":"The Specified Parameter RegionId is illegal"},{"errorCode":"MissingParam.CenIdOrRegionId","errorMessage":"Either CenId or RegionId must be specified."},{"errorCode":"IllegalParam.ZoneId","errorMessage":"The specified ZoneId is illegal."},{"errorCode":"IllegalParam.ChargeType","errorMessage":"The specified ChargeType is illegal."},{"errorCode":"InvalidTransitRouterId.NotFound","errorMessage":"The specified  TransitRouterId is not found."},{"errorCode":"IncorrectStatus.VpcResource","errorMessage":"The resource is not in a valid state for the attachment operation."},{"errorCode":"IncorrectStatus.Vpc","errorMessage":"The resource is not in a valid state for the attachment operation."},{"errorCode":"IncorrectStatus.VpcOrVswitch","errorMessage":"The Vpc Or Vswith is not in a valid state for the attachment operation."},{"errorCode":"OperationNotSupport.VpcAutoRoutesPublish","errorMessage":"Auto publish vpc routes is not supported in this region."},{"errorCode":"InvalidOperation.VpnAssociated","errorMessage":"The operation is not supported because the VPC is associated with VPN."},{"errorCode":"Forbbiden.TransitRouterServiceNotOpen","errorMessage":"The user has not open transit router service."},{"errorCode":"IllegalParam.ZoneMappings","errorMessage":"The Specified Parameter ZoneMappings is illegal"},{"errorCode":"OperationUnsupported.TransitRouterType","errorMessage":"The specified TransitRouterType does not support the operation."},{"errorCode":"InvalidCenId.NotFound","errorMessage":"CenId is not found."},{"errorCode":"IllegalParam.VSwitchId","errorMessage":"VSwitchId is illegal."},{"errorCode":"IncorrectStatus.TransitRouterInstance","errorMessage":"The status of TransitRouter is incorrect."},{"errorCode":"OperationUnsupported.CenFullLevel","errorMessage":"CEN full level does not support TransitRouter"},{"errorCode":"IllegalParam.ServiceMode","errorMessage":"ServiceMode is illegal."},{"errorCode":"QuotaFull.ChildInstanceRelatedCen","errorMessage":"The childinstance has exceed the quota of the times that a childinstance can be attached as an attachment."},{"errorCode":"OperationUnsupported.CloudBoxVswNotSupport","errorMessage":"Cloud Box vsw does not support."},{"errorCode":"IncorrectStatus.TransitRouter","errorMessage":"The status of TransitRouter is incorrect."},{"errorCode":"Duplicated.ZoneMapping","errorMessage":"The parameter ZoneMapping is duplicated."},{"errorCode":"QuotaExceeded.CenQuotaVpcAttachPerTransitRouter","errorMessage":"The maximum number of VPC attachment per Transit Router is exceeded."},{"errorCode":"IncorrectStatus.VpcRouteTable","errorMessage":"The VPC route table is not in a desired state."},{"errorCode":"InvalidStatus.VpcAttachedFullModeCen","errorMessage":"The VPC has been attached to another CEN instance whose protection level is FULL."},{"errorCode":"Forbbiden.AttachChildInstanceAcrossBid","errorMessage":"VPCs that belong to another BID cannot be associated. You need to apply for cross-BID attaching."},{"errorCode":"InvalidOperation.VpcAutoRoutesPublishInOtherCEN","errorMessage":"The specified VPC already has its routes synchronized with another CEN instance."},{"errorCode":"QuotaExceeded.VpcAutoRoutesPublishPerTransitRouter","errorMessage":"The number of VPCs that have route synchronization enabled has reached the upper limit."},{"errorCode":"InsufficientIpAddr.vsw","errorMessage":"Insufficient available IP addresses in the vSwitch."},{"errorCode":"Forbidden.ResourceOwnerTransitRouterServiceNotOpen","errorMessage":"The resource owner user has not opened transit router service."},{"errorCode":"IllegalParam.TransitRouterRegionId","errorMessage":"TransitRouterRegionId is illegal."},{"errorCode":"InvalidTransitRouterMode.NeedUpgrade","errorMessage":"TransitRouter need to upgrade."},{"errorCode":"IllegalParam.Ipv6Support","errorMessage":"Ipv6Support is illegal. Valid Values are [enable, disable]."},{"errorCode":"OperationFailed.VSwitchNotFound","errorMessage":"The specified vswitch not found."},{"errorCode":"OperationFailed.VSwitchIpv6CidrNotAllocated","errorMessage":"The specified vswitch does not have IPv6 address allocated."},{"errorCode":"InvalidParameter","errorMessage":"Invalid parameter."},{"errorCode":"Unauthorized","errorMessage":"The AccessKeyId is unauthorized."}],"404":[{"errorCode":"InvalidVSwitchId.NotFound","errorMessage":"The specified VSwitchId is not found."}],"409":[{"errorCode":"InvalidOperation.CenInstanceStatus","errorMessage":"The CEN instance is not in a valid state for the operation."},{"errorCode":"IncorrectStatus.VpcSwitch","errorMessage":"The resource is not in a valid state for the attachment operation."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TransitRouterAttachmentId\\\": \\\"tr-attach-ia340z7xis7t5s****\\\",\\n  \\\"RequestId\\\": \\\"C087A369-82B9-43EF-91F4-4B63A9C6E6B6\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateTransitRouterVpcAttachmentResponse>\\n    <TransitRouterAttachmentId>tr-attach-ia340z7xis7t5s****</TransitRouterAttachmentId>\\n    <RequestId>C087A369-82B9-43EF-91F4-4B63A9C6E6B6</RequestId>\\n</CreateTransitRouterVpcAttachmentResponse>\",\"errorExample\":\"\"}]","title":"在企业版转发路由器下创建专有网络VPC连接","summary":"调用CreateTransitRouterVpcAttachment接口将要互通的专有网络VPC（Virtual Private Cloud）实例连接至转发路由器实例。连接后，转发路由器实例可以帮助您实现私网互通。","description":"- 您可以通过以下两种方式在企业版转发路由器下创建VPC连接：\n    - 如果您已经在目标地域创建了企业版转发路由器实例，您可以通过指定**VpcId**、**ZoneMappings.N.VSwitchId**、**ZoneMappings.N.ZoneId**和**TransitRouterId**、**RegionId**创建VPC连接。\n    - 如果您在目标地域没有企业版转发路由器实例，您可以通过指定**VpcId**、**ZoneMappings.N.VSwitchId**、**ZoneMappings.N.ZoneId**、**CenId**和**RegionId**创建VPC连接。创建VPC连接时系统为您自动创建企业版转发路由器实例。\n\n- **CreateTransitRouterVpcAttachment**接口属于异步接口，即系统会先返回一个VPC连接ID，但该VPC连接并未创建完成，系统后台的创建任务仍在进行。您可以调用[ListTransitRouterVpcAttachments](~~261222~~)接口查询VPC连接的状态。\n    - 当VPC连接处于**Attaching**状态时，表示VPC连接正在创建中，在该状态下，您只能对VPC连接执行查询操作，不能执行其他操作。\n    - 当VPC连接处于**Attached**状态时，表示VPC连接创建完成。\n- 创建VPC连接后，VPC连接默认不与任何转发路由器路由表建立路由学习关系和关联转发关系。\n\n## 前提条件\n\n在调用本接口创建VPC连接前，请确保满足以下条件：\n\n- VPC实例在企业版转发路由器支持的可用区拥有至少一个交换机实例，且该交换机实例拥有至少一个空闲的IP地址。关于企业版转发路由器支持的地域和可用区信息，请参见[企业版转发路由器支持的地域和可用区](~~181681~~)。\n- 如果您要连接跨账号的网络实例，请先获得跨账号网络实例授权。具体操作，请参见[跨账号网络实例授权](~~181553~~)。\n- VPC连接创建后会产生费用，请确保您已经了解相关计费规则。更多信息，请参见[计费说明](~~189836~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}