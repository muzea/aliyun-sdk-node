{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"DryRun","in":"query","schema":{"description":"是否只预检此次请求。取值：\n- **true**：发送检查请求，不会创建VPN连接。检查项包括是否填写了必需参数、请求格式、业务限制。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。\n- **false**（默认值）：发送正常请求，通过检查后直接创建VPN连接。","type":"boolean","required":false,"example":"false"}},{"name":"CenId","in":"query","schema":{"description":"云企业网实例ID。","type":"string","required":false,"example":"cen-rsgxs8ng2awen2****"}},{"name":"TransitRouterId","in":"query","schema":{"description":"转发路由器实例ID。","type":"string","required":false,"example":"tr-p0wm740vjnbaprv0m****"}},{"name":"RegionId","in":"query","schema":{"description":"转发路由器实例所属的地域ID。\n\n您可以通过调用[DescribeChildInstanceRegions](~~132080~~)接口获取地域ID。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"TransitRouterAttachmentName","in":"query","schema":{"description":"VPN连接的名称。\n\n名称可以为空或长度为1～128个字符，不能以http://或https://开头。","type":"string","required":false,"example":"nametest"}},{"name":"TransitRouterAttachmentDescription","in":"query","schema":{"description":"VPN连接的描述信息。\n\n描述可以为空或长度为1～256个字符，不能以http://或https://开头。","type":"string","required":false,"example":"desctest"}},{"name":"VpnId","in":"query","schema":{"description":"IPsec连接ID。","type":"string","required":true,"docRequired":true,"example":"vco-p0w042cqwvlhl4zyw****"}},{"name":"VpnOwnerId","in":"query","schema":{"description":"IPsec连接所属的阿里云账号（主账号）ID。\n\n- 如果不输入本参数，默认使用当前登录的阿里云账号ID。\n- 如果您要连接跨账号的IPsec连接时，本参数必填。","type":"integer","format":"int64","required":false,"example":"1210123456123456"}},{"name":"AutoPublishRouteEnabled","in":"query","schema":{"description":"是否允许转发路由器实例自动向IPsec连接发布路由条目。取值：\n\n- **true**（默认值）：允许。\n- **false**：不允许。","type":"boolean","required":false,"example":"true"}},{"name":"ChargeType","in":"query","schema":{"description":"计费方式。\n\n仅取值：**POSTPAY**（默认值），表示按使用量付费。","type":"string","required":false,"example":"POSTPAY"}},{"name":"Zone","in":"query","style":"repeatList","schema":{"description":"当前地域下的可用区ID。\n\n系统将在您指定的可用区下创建资源。","type":"array","items":{"description":"可用区ID。","type":"object","properties":{"ZoneId":{"description":"可用区ID。\n\n您可以通过调用[ListTransitRouterAvailableResource](~~261356~~)接口获取地域ID。  ","type":"string","required":true,"example":"cn-hangzhou-h"}},"required":false},"required":true,"maxItems":1}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签信息列表。\n\n一次最多支持输入20个标签信息。","type":"array","items":{"description":"标签信息。","type":"object","properties":{"Key":{"description":"资源的标签键。\n\n一旦传入该值，则不允许为空字符串。最多支持64个字符，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n一次最多支持输入20个标签的标签键。","type":"string","required":false,"example":"TagKey"},"Value":{"description":"资源的标签值。\n\n标签值可以为空或输入不超过128个字符的字符串，不能以`aliyun`或者`acs:`开头，不能包含`http://`或者`https:// `。\n\n每一个标签键对应一个标签值，一次最多支持输入20个标签键对应的标签值。","type":"string","required":false,"example":"TagValue"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"TransitRouterAttachmentId":{"description":"VPN连接ID。","type":"string","example":"tr-attach-y5dup2qwfyh9lu****"},"RequestId":{"description":"请求ID。","type":"string","example":"8B5DD40A-3A29-5AC0-B8DA-05FD10D5C893"}}}}},"errorCodes":{"400":[{"errorCode":"NoPermission.AliyunServiceRolePolicyForCEN","errorMessage":"You are not authorized to create the service linked role. Role Name: AliyunServiceRolePolicyForCEN. Service Name: cen.aliyuncs.com. Make sure that the user has been granted the ram:CreateServiceLinkedRole permission."},{"errorCode":"OperationUnsupported.TransitRouterRegionId","errorMessage":"The specified TransitRouterRegion does not support the operation."},{"errorCode":"InvalidCenId.NotFound","errorMessage":"CenId is not found."},{"errorCode":"InvalidStatus.ResourceStatus","errorMessage":"The resource is not in a valid state for the attachment operation."},{"errorCode":"InvalidTransitRouterId.NotFound","errorMessage":"TransitRouterId is not found."},{"errorCode":"Forbbiden.TransitRouterServiceNotOpen","errorMessage":"The user has not open transit router service."},{"errorCode":"InvalidTransitRouterMode.NeedUpgrade","errorMessage":"TransitRouter need to upgrade."},{"errorCode":"InvalidAvailable.NoResource","errorMessage":"No resource in the available zone."},{"errorCode":"OperationUnsupported.VpnAttachment","errorMessage":"The specified region does not support the operation."},{"errorCode":"OperationUnsupported.TransitRouterType","errorMessage":"The specified TransitRouterType does not support the operation."},{"errorCode":"OperationFailed.AllocateCidrFailed","errorMessage":"Operation failed because vpn allocate cidr failed."},{"errorCode":"OperationUnsupported.ZoneId","errorMessage":"The specified ZoneId does not support the operation."},{"errorCode":"MissingParam.CenIdOrRegionId","errorMessage":"Either CenId or RegionId must be specified."},{"errorCode":"IllegalParam.RegionId","errorMessage":"RegionId is illegal."},{"errorCode":"OperationUnsupported.CenFullLevel","errorMessage":"CEN full level does not support TransitRouter"},{"errorCode":"InvalidOperation.CenInstanceStatus","errorMessage":"The CEN instance is not in a valid state for the operation.\t"},{"errorCode":"IllegalParam.ZoneMappings","errorMessage":"The Specified Parameter ZoneMappings is illegal"},{"errorCode":"IncorrectStatus.TransitRouter","errorMessage":"The status of TransitRouter is incorrect."},{"errorCode":"InvalidOperation.VpnNetworkTypeInvalid","errorMessage":"The network type of child-instance is invalid."},{"errorCode":"QuotaExceeded.CenQuotaVpnAttachPerTransitRouter","errorMessage":"The maximum number of VPN attachment per Transit Router is exceeded."},{"errorCode":"QuotaFull.ChildInstanceRelatedCen","errorMessage":"The childinstance has exceed the quota of the times that a childinstance can be attached as an attachment."},{"errorCode":"Forbidden.ResourceOwnerTransitRouterServiceNotOpen","errorMessage":"The resource owner user has not opened transit router service."},{"errorCode":"InvalidParameter","errorMessage":"Invalid parameter."},{"errorCode":"Unauthorized","errorMessage":"The AccessKeyId is unauthorized."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TransitRouterAttachmentId\\\": \\\"tr-attach-y5dup2qwfyh9lu****\\\",\\n  \\\"RequestId\\\": \\\"8B5DD40A-3A29-5AC0-B8DA-05FD10D5C893\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateTransitRouterVpnAttachmentResponse>\\n    <TransitRouterAttachmentId>tr-attach-y5dup2qwfyh9lu****</TransitRouterAttachmentId>\\n    <RequestId>8B5DD40A-3A29-5AC0-B8DA-05FD10D5C893</RequestId>\\n</CreateTransitRouterVpnAttachmentResponse>\",\"errorExample\":\"\"}]","title":"创建VPN连接","summary":"转发路由器支持连接VPN网关的IPsec连接。本地数据中心可以通过IPsec连接直接连接至转发路由器，然后通过转发路由器实现与其他网络的互通，调用CreateTransitRouterVpnAttachment接口创建VPN连接。","description":"- 创建VPN连接后，VPN连接默认不与任何转发路由器路由表建立路由学习关系和关联转发关系。\n- 在调用`CreateTransitRouterVpnAttachment`接口的过程中，如果您指定了**CenId**、**RegionId**参数的值，则无需指定**TransitRouterId**参数的值；如果您指定了**TransitRouterId**、**RegionId**参数的值，则无需指定**CenId**参数的值。\n\n### 前提条件\n\n- 在创建VPN连接前，请确保您已经在转发路由器实例所在的地域创建了一个IPsec连接，且IPsec连接未绑定任何资源。具体操作，请参见[CreateVpnAttachment](~~442455~~)。\n- 如果转发路由器实例需要连接跨账号的IPsec连接，则需确保IPsec连接已对转发路由器实例授权。具体操作，请参见[GrantInstanceToTransitRouter](~~417520~~)。\n- 在创建VPN连接之前，请确保您已设置转发路由器的TR地址段。具体操作，请参见[CreateTransitRouterCidr](~~468230~~)。"}