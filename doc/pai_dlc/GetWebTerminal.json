{"summary":"获取进入容器的连接。","path":"/api/v1/jobs/{JobId}/pods/{PodId}/webterminal","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"JobId","in":"path","schema":{"description":"任务ID。","type":"string","required":false,"example":"dlc-20210126170216-******"}},{"name":"PodId","in":"path","schema":{"description":"任务Pod ID。","type":"string","required":false,"example":"dlc-20210126170216-****-chief-0"}},{"name":"PodUid","in":"query","schema":{"description":"Pod UID。","type":"string","required":false,"example":"94a7cc7c-0033-48b5-85bd-71c63592c268"}},{"name":"IsShared","in":"query","schema":{"description":"是否创建用于分享的进入容器链接。\n\n若为是，返回用于分享的进入容器链接，链接在三十秒内失效且仅可被使用一次。进入容器链接被使用一次后，其他使用该链接的进入容器请求将无效。\n\n若为否，返回普通的进入容器链接，链接在三十秒内失效。使用该链接需进行阿里云身份认证。","type":"boolean","required":false,"example":"true"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"description":"此次调用的请求ID，用于诊断和答疑。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"WebTerminalUrl":{"description":"进入容器的链接。链接为WebSocket URL。用户需构建WebSocket客户端。\n客户端中关于WebSocket的通信格式可参考以下代码：\n\n  ```\n  ws = new WebSocket(\n      `wss://xxxxx`,\n    );\n    ws.onopen = function open() {\n      console.warn('connected');\n      term.write('\\r');\n    };\n\n    ws.onclose = function close() {\n      console.warn('disconnected');\n      term.write('Connection closed');\n    };\n\n    // 收到后端返回\n    ws.onmessage = function incoming(event) {\n      const msg = JSON.parse(event.data);\n      console.warn(msg);\n      if (msg.operation === 'stdout') {\n        term.write(msg.data);\n      } else {\n        console.warn('invalid msg operation: ' + msg);\n      }\n    };\n\n    // 控制台输入\n    term.onData(data => {\n      const msg = { operation: 'stdin', data: data };\n      ws.send(JSON.stringify(msg));\n    });\n\n    term.onResize(size => {\n      const msg = { operation: 'resize', cols: size.cols, rows: size.rows };\n      setTimeout(() => ws.send(JSON.stringify(msg)), 15000);\n    });\n\n    fitAddon.fit();\n  };\n```","type":"string","example":"wss://*****"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"WebTerminalUrl\\\": \\\"wss://*****\\\"\\n}\",\"type\":\"json\"}]","title":"获取进入容器的链接"}