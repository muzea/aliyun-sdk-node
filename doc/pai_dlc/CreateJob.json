{"summary":"创建一个任务到集群中运行。您可以指定数据源配置、代码源配置、启动命令以及任务运行的每个节点的计算资源配置等信息。","path":"/api/v1/jobs","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"13110","abilityTreeNodes":["FEATURElearnQJXF95"]},"parameters":[{"name":"body","in":"body","style":"json","schema":{"description":"请求Body参数。","type":"object","properties":{"DisplayName":{"title":"作业显示名称","description":"任务的名称，命名格式如下：\n- 名称长度不超过256个字符。\n- 允许数字、字母、下划线（_）、英文句号（.）和短横线（-）。","type":"string","required":true,"example":"tf-mnist-test","maxLength":1024,"minLength":1},"JobType":{"title":"作业类型","description":"任务类型，大小写敏感。当前支持的任务类型：\n- TFJob\n- PyTorchJob\n- XGBoostJob\n- OneFlowJob\n- ElasticBatch","type":"string","required":true,"example":"TFJob","maxLength":32,"minLength":1},"JobSpecs":{"title":"作业规格配置","description":"**JobSpecs**描述任务运行时的各种配置，诸如镜像地址、启动命令、节点资源申明、副本数量等。\n\nDLC任务由不同类型的节点组成，同一类型的节点拥有完全相同的配置，这种配置被称为一个JobSpec。**JobSpecs**描述所有类型节点的配置，是JobSpec的数组。","type":"array","items":{"description":"任务的运行时配置。","required":false,"$ref":"#/components/schemas/JobSpec"},"required":true,"minItems":1},"UserCommand":{"title":"作业命令","description":"任务所有节点的启动命令。","type":"string","required":true,"example":"python /root/code/mnist.py"},"DataSources":{"title":"数据源配置列表","description":"任务运行所使用的数据源列表。","type":"array","items":{"description":"本任务使用的所有数据源列表。按照数据源中的配置mount到每一个节点所在的容器本地目录上（本地目录由数据源中的配置MountPath指定）。\n\n任务的启动命令中的进程以MountPath为路径直接访问每一个数据源代表的分布式文件系统。","type":"object","properties":{"DataSourceId":{"title":"数据源Id","description":"数据源的ID。如何查看数据源ID，请参见[ListDatasets](~~457222~~)。","type":"string","required":false,"example":"d-cn9dl*******"},"MountPath":{"title":"本地挂载路径","description":"本任务需要挂载的路径，可选参数，默认使用数据源中的挂载路径。","type":"string","required":false,"example":"/root/data"},"Uri":{"title":"数据源路径","type":"string","required":false,"example":"oss://bucket.oss-cn-hangzhou-internal.aliyuncs.com/path/"}},"required":false},"required":false},"CodeSource":{"title":"代码源配置","description":"本任务使用的代码源。任务的节点启动之前，DLC会自动下载代码源中配置好的代码，并Mount到容器的本地目录。","type":"object","properties":{"CodeSourceId":{"title":"代码源Id","description":"代码源ID。如何获取代码源ID，请参见[ListCodeSources ](~~459922~~)。","type":"string","required":false,"example":"code-20210111103721-xxxxxxx"},"Branch":{"title":"代码分支","description":"本任务运行时，引用的代码仓库的分支，可选参数，默认使用代码源中的配置分支字段。","type":"string","required":false,"example":"master"},"Commit":{"title":"代码Commit","description":"本任务需要下载的代码Commit ID，可选参数，默认使用代码源中的CommitID配置。","type":"string","required":false,"example":"44da109b5******"},"MountPath":{"title":"本地挂载路径","description":"本次任务需要挂载的路径，可选参数，默认使用代码源中配置挂载路径。","type":"string","required":false,"example":"/root/data"}},"required":false},"UserVpc":{"title":"用户VPC","description":"用户VPC配置。","type":"object","properties":{"VpcId":{"title":"用户VPC的id","description":"用户VPC的ID。","type":"string","required":false,"example":"vpc-abcdef****"},"SwitchId":{"title":"用户交换机的id","description":"用户交换机的ID，可选参数\n- 参数值为空时系统会根据库存情况自动选择合适的交换机；\n- 也可以自己指定交换机ID。","type":"string","required":false,"example":"vs-abcdef****"},"SecurityGroupId":{"title":"用户安全组的id","description":"用户安全组的ID。","type":"string","required":false,"example":"sg-abcdef****"},"ExtendedCIDRs":{"title":"扩展网段","description":"扩展网段\n- 当交换机ID为空时，此参数可以不提供，系统会自动获取VPC下的所有网段；\n- 当交换机ID不为空时，此参数必须提供，建议填写VPC下的所有网段。","type":"array","items":{"description":"扩展网段。","type":"string","required":false,"example":"192.168.0.1/24"},"required":false},"DefaultRoute":{"description":"默认路由。取值如下：\n- eth0：表示使用默认网卡，通过公共网关访问外部网络。\n- eth1：表示使用用户弹性网卡，通过私有网关访问外部网络。具体配置方法，请参考[配置DSW实例通过专有公网网关访问公网](~~2525343~~)。","type":"string","required":false,"example":"eth0"}},"required":false},"ThirdpartyLibs":{"title":"三方库配置列表","description":"待安装的Python三方库列表。","type":"array","items":{"description":"指定一个第三方Python库和对应版本要求，例如：`numpy==1.16.1`。","type":"string","required":false,"example":"numpy==1.16.1"},"required":false},"ThirdpartyLibDir":{"title":"三方库(requirements.txt)文件路径","description":"Python三方库（requirements.txt）文件所在文件夹名称；每个节点在运行指定的UserCommand之前，PAI-DLC会从指定文件夹取出requirements.txt文件，并调用`pip install -r`安装。","type":"string","required":false,"example":"/root/code/"},"Envs":{"title":"环境变量配置","description":"环境变量配置。","type":"object","required":false,"additionalProperties":{"type":"string","example":"ENABLE_DEBUG_MODE","description":"一个环境变量，格式：`Key=Value`。"}},"JobMaxRunningTimeMinutes":{"title":"作业最大运行时间","description":"作业最长运行时长，单位为分钟。","type":"integer","format":"int64","required":false,"minimum":"1","example":"1024"},"WorkspaceId":{"title":"工作空间编号","description":"工作空间ID，如何获取工作空间ID，请参见[ListWorkspaces](~~449124~~)。","type":"string","required":false,"example":"ws-20210126170216-xxxxxxx"},"ResourceId":{"title":"资源组编号","description":"资源组ID，可选参数。\n- 参数值为空表示提交到公共资源组。\n- 如果当前工作空间已经绑定专有资源组，此处可以指定对应的资源组ID；如何创建专有资源组、查询专有资源组ID，详情请参见[准备及管理DLC资源组集群](https://help.aliyun.com/document_detail/202827.html#section-yhx-u5z-nh8)。","type":"string","required":false,"example":"rs-xxx"},"Priority":{"title":"作业优先级","description":"任务的优先级，可选参数，默认值1，参数值的范围是1~9。其中：\n\n- 1为最低优先级。\n- 9为最高优先级。","type":"integer","format":"int32","required":false,"example":"8"},"Settings":{"description":"作业额外参数配置。","required":false,"$ref":"#/components/schemas/JobSettings"},"ElasticSpec":{"description":"该参数暂未支持，无需关注。","required":false,"$ref":"#/components/schemas/JobElasticSpec"},"DebuggerConfigContent":{"title":"debugger参数","description":"该参数暂未支持，无需关注。","type":"string","required":false,"example":"“”"},"Options":{"description":"本任务的额外配置，通过此参数可以调整挂载的数据源的一些行为。如任务有挂载OSS类型的数据源时，可以通过将此参数配置为 `fs.oss.download.thread.concurrency=4,fs.oss.download.queue.size=16` ，覆盖JindoFS的默认参数。","type":"string","required":false,"example":"key1=value1,key2=value2"},"SuccessPolicy":{"description":"分布式多机任务的成功策略，目前只有Tensorflow的多机任务支持。\n- ChiefWorker：当指定为这个值的时候，只要Chief的pod成功结束，那么就认为整个任务成功结束。\n- AllWorkers（默认值）：必须是所有的Worker全部成功，才会认为整个任务成功。","type":"string","required":false,"example":"AllWorkers"},"CredentialConfig":{"required":false,"$ref":"#/components/schemas/CredentialConfig"}},"required":false}}],"responses":{"200":{"schema":{"description":"返回JSON格式字符串。","type":"object","properties":{"JobId":{"title":"作业Id","description":"此次调用创建的任务ID。","type":"string","example":"dlc7*******"},"RequestId":{"title":"请求Id","description":"本次请求的ID，用于诊断和答疑。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-xxxxxxx"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"JobId\\\": \\\"dlc7*******\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-xxxxxxx\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<不支持/>\",\"errorExample\":\"\"}]","title":"创建任务","description":"请确保在使用该接口前，已充分了解PAI-DLC产品的收费方式和[价格](https://help.aliyun.com/document_detail/171758.html)。"}