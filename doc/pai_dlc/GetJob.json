{"summary":"获取一个任务的详细配置和运行时信息。","path":"/api/v1/jobs/{JobId}","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"JobId","in":"path","schema":{"title":"作业Id","description":"任务ID。如何获取任务ID，请参见[ListJobs](~~459676~~)。","type":"string","required":true,"example":"dlc*******","maxLength":256,"minLength":1}},{"name":"NeedDetail","in":"query","schema":{"title":"是否返回作业详情信息，默认为true","description":"是否返回作业详情信息，默认为true","type":"boolean","required":false,"example":"true"}}],"responses":{"200":{"schema":{"description":"JSON格式的字符串。","type":"object","properties":{"JobId":{"title":"作业Id","description":"任务ID。","type":"string","example":"dlc*******"},"JobType":{"title":"作业类型","description":"任务类型。由[CreateJob](~~459672~~) API中的JobType指定。","type":"string","example":"TFJob"},"DisplayName":{"title":"作业显示名称","description":"任务名称。","type":"string","example":"tf-mnist-test"},"UserId":{"title":"作业提交人Id","description":"任务提交人的阿里云UID。","type":"string","example":"12*********"},"Status":{"title":"作业状态","description":"任务运行状态，可能值：\n\n- Created\n- Creating\n- Queuing\n- Dequeued\n- Running\n- Stopping\n- Succeeded\n- Failed\n- Stopped","type":"string","example":"Stopped"},"WorkspaceId":{"title":"作业所属工作空间ID","description":"任务所属工作空间ID。","type":"string","example":"268"},"WorkspaceName":{"title":"作业所属工作空间名称","description":"任务所属工作空间名称。","type":"string","example":"dlc-workspace"},"ResourceId":{"title":"作业运行所在的资源组ID","description":"任务运行所在的资源组ID。","type":"string","example":"r******"},"ResourceLevel":{"title":"作业运行时使用的资源级别","description":"任务运行时使用的资源级别。","type":"string","example":"L0"},"ReasonCode":{"title":"状态详情码","description":"状态详情码，对当前状态（Status）下的子状态的一个分类。","type":"string","example":"JobStoppedByUser"},"ReasonMessage":{"title":"状态详情","description":"状态详情的详细描述。","type":"string","example":"Job is stopped by user."},"JobSpecs":{"title":"作业规格配置","description":"任务中的节点配置，参考CreateJob API中的**JobSpecs**。","type":"array","items":{"description":"描述一种节点类型的详细配置。","$ref":"#/components/schemas/JobSpec"}},"UserCommand":{"title":"用户命令","description":"每个节点的启动命令。","type":"string","example":"python /root/code/mnist.py"},"DataSources":{"title":"数据源配置列表","description":"数据源列表。","type":"array","items":{"description":"数据源。","type":"object","properties":{"DataSourceId":{"title":"数据源Id","description":"数据源ID。","type":"string","example":"d*******"},"MountPath":{"title":"本地挂载路径","description":"本地挂载路径，可选参数，默认为空（表示使用数据源中挂载路径）。","type":"string","example":"/mnt/data/"},"Uri":{"title":"数据源路径","description":"数据源路径","type":"string","example":"oss://bucket.oss-cn-hangzhou-internal.aliyuncs.com/path/"}}}},"CodeSource":{"title":"代码源配置","description":"代码源。","type":"object","properties":{"CodeSourceId":{"title":"代码源Id","description":"代码源ID。","type":"string","example":"code******"},"Branch":{"title":"代码分支","description":"代码分支。","type":"string","example":"master"},"Commit":{"title":"代码Commit","description":"代码CommitID。","type":"string","example":"44da109b59f8596152987eaa8f3b2487xxxxxx"},"MountPath":{"title":"本地挂载路径","description":"本地挂载路径。","type":"string","example":"/mnt/data"}}},"ThirdpartyLibs":{"title":"三方库配置列表","description":"需要安装的Python三方库列表。","type":"array","items":{"description":"第三方Python库。","type":"string","example":"numpy==1.16.1"}},"ThirdpartyLibDir":{"title":"三方库(requirements.txt)文件路径","description":"三方库（requirements.txt）文件所在文件夹。","type":"string","example":"/root/code/"},"Envs":{"title":"环境变量配置","description":"环境变量配置。","type":"object","additionalProperties":{"type":"string","example":"ENABLE_DEBUG_MODE","description":"环境变量Key和Value。"}},"GmtCreateTime":{"title":"作业创建时间（UTC）","description":"任务创建时间（UTC）。","type":"string","example":"2021-01-12T14:35:01Z"},"GmtSubmittedTime":{"description":"任务提交到集群的时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"GmtRunningTime":{"description":"任务开始运行的时间（UTC）。","type":"string","example":"2021-01-12T14:36:21Z"},"GmtSuccessedTime":{"description":"任务正常结束的时间（UTC）。","type":"string","example":"2021-01-12T15:36:08Z"},"GmtStoppedTime":{"description":"任务停止的时间（UTC）。","type":"string","example":"2021-01-12T15:36:08Z"},"GmtFailedTime":{"description":"任务运行失败的时间（UTC）。","type":"string","example":"2021-01-12T15:36:08Z"},"GmtFinishTime":{"title":"作业结束时间（UTC）","description":"任务结束时间（UTC）。","type":"string","example":"2021-01-12T15:36:08Z"},"Duration":{"title":"作业运行时长（s）","description":"任务运行时长，单位：秒。","type":"integer","format":"int64","example":"3602"},"Pods":{"title":"作业所以运行Pod列表","description":"任务运行中的所有节点。","type":"array","items":{"description":"节点数组。","type":"object","properties":{"Type":{"title":"Pod类型","description":"节点类型，与CreateJob中的JobSpecs中的某个JobSpec对应。","type":"string","example":"Worker"},"PodId":{"title":"Pod Id","description":"节点ID，可用于GetPodLogs和GetPodEvents API获取节点的详细日志和事件。","type":"string","example":"Worker"},"PodUid":{"title":"Pod UId","description":"Pod UID。","type":"string","example":"fe846462-af2c-4521-bd6f-96787a57591d"},"Status":{"title":"Pod状态","description":"节点状态。可能值：\n\n- Pending\n- Running\n- Succeeded\n- Failed\n- Unknown","type":"string","example":"Running"},"Ip":{"title":"Pod Ip","description":"节点的网络IP地址。","type":"string","example":"10.0.1.2"},"GmtCreateTime":{"title":"Pod创建时间（UTC）","description":"Pod创建时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"GmtStartTime":{"title":"Pod启动时间（UTC）","description":"节点启动时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"GmtFinishTime":{"title":"Pod结束时间（UTC）","description":"节点结束时间（UTC）。","type":"string","example":"2021-01-12T15:36:05Z"},"HistoryPods":{"title":"历史Pods","description":"历史Pods。","type":"array","items":{"description":"历史Pod数组。","type":"object","properties":{"Type":{"title":"Pod类型","description":"Pod类型。","type":"string","example":"Worker"},"PodId":{"title":"Pod Id","description":"Pod ID。","type":"string","example":"Worker"},"PodUid":{"title":"Pod UId","description":"Pod UID。","type":"string","example":"fe846462-af2c-4521-bd6f-96787a57591d"},"Status":{"title":"Pod状态","description":"Pod状态。","type":"string","example":"Failed"},"Ip":{"title":"Pod Ip","description":"Pod IP。","type":"string","example":"10.0.1.3"},"GmtCreateTime":{"title":"Pod创建时间（UTC）","description":"Pod创建时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"GmtStartTime":{"title":"Pod启动时间（UTC）","description":"Pod启动时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"GmtFinishTime":{"title":"Pod结束时间（UTC）","description":"Pod结束时间（UTC）。","type":"string","example":"2021-01-12T14:36:01Z"},"SubStatus":{"title":"Pod子状态，如抢占状态","description":"Pod子状态，例如抢占状态。取值如下：\n- Normal\n- Evicted","type":"string","example":"Normal"},"ResourceType":{"title":"Pod资源使用类型","description":"Pod资源使用类型。","type":"string","example":"Normal"}}}},"SubStatus":{"title":"Pod子状态，如抢占状态","description":"Pod子状态，例如抢占状态。取值如下：\n- Normal\n- Evicted","type":"string","example":"Normal"},"ResourceType":{"title":"Pod资源使用类型","description":"Pod资源使用类型。","type":"string","example":"Normal"}}}},"RequestId":{"title":"请求Id","description":"请求ID，用于诊断和答疑。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-xxxxxxxx"},"Settings":{"title":"作业额外参数配置","description":"作业额外参数配置。","$ref":"#/components/schemas/JobSettings"},"ClusterId":{"title":"集群ID","description":"集群ID。","type":"string","example":"a*****"},"ElasticSpec":{"title":"弹性任务参数","description":"弹性任务参数。","$ref":"#/components/schemas/JobElasticSpec"},"EnabledDebugger":{"title":"是否开启debugger任务","description":"是否开启debugger任务。","type":"boolean","example":"false"},"Priority":{"title":"任务的优先级","description":"任务的优先级。可能值为1~9。","type":"integer","format":"int32","example":"1"},"SubStatus":{"title":"作业子状态，如抢占重试状态","description":"作业子状态，例如抢占重试状态。","type":"string","example":"Restarting"},"RestartTimes":{"title":"作业已使用的重试次数和最大重试次数","description":"作业已使用的重试次数和最大重试次数。","type":"string","example":"0/10"},"StatusHistory":{"type":"array","items":{"$ref":"#/components/schemas/StatusTransitionItem"}},"TenantId":{"type":"string"},"ResourceType":{"title":"资源类型，可选值：ECS，Lingjun，ACS","description":"资源类型，可选值：ECS，Lingjun，ACS","type":"string","example":"ECS"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"JobId\\\": \\\"dlc*******\\\",\\n  \\\"JobType\\\": \\\"TFJob\\\",\\n  \\\"DisplayName\\\": \\\"tf-mnist-test\\\",\\n  \\\"UserId\\\": \\\"12*********\\\",\\n  \\\"Status\\\": \\\"Stopped\\\",\\n  \\\"WorkspaceId\\\": \\\"268\\\",\\n  \\\"WorkspaceName\\\": \\\"dlc-workspace\\\",\\n  \\\"ResourceId\\\": \\\"r******\\\",\\n  \\\"ResourceLevel\\\": \\\"L0\\\",\\n  \\\"ReasonCode\\\": \\\"JobStoppedByUser\\\",\\n  \\\"ReasonMessage\\\": \\\"Job is stopped by user.\\\",\\n  \\\"JobSpecs\\\": [\\n    {\\n      \\\"Type\\\": \\\"Worker\\\",\\n      \\\"Image\\\": \\\"registry.cn-hangzhou.aliyuncs.com/pai-dlc/tensorflow-training:1.12.2PAI-cpu-py27-ubuntu16.04\\\",\\n      \\\"ImageConfig\\\": {\\n        \\\"DockerRegistry\\\": \\\"registry.cn-hangzhou.aliyuncs.com\\\",\\n        \\\"Username\\\": \\\"\\\",\\n        \\\"Password\\\": \\\"\\\",\\n        \\\"Auth\\\": \\\"\\\"\\n      },\\n      \\\"PodCount\\\": 1,\\n      \\\"EcsSpec\\\": \\\"ecs.c6.large\\\",\\n      \\\"ExtraPodSpec\\\": {\\n        \\\"SideCarContainers\\\": [\\n          {\\n            \\\"Name\\\": \\\"data-init\\\",\\n            \\\"Image\\\": \\\"registry.cn-hangzhou.aliyuncs.com/pai-dlc/curl:v1.0.0\\\",\\n            \\\"Command\\\": [\\n              \\\"curl www.aliyun.com\\\"\\n            ],\\n            \\\"Args\\\": [\\n              \\\"\\\"\\n            ],\\n            \\\"WorkingDir\\\": \\\"/root\\\",\\n            \\\"Env\\\": [\\n              {\\n                \\\"Name\\\": \\\"ENABLE_DEBUG\\\",\\n                \\\"Value\\\": \\\"true\\\"\\n              }\\n            ],\\n            \\\"Resources\\\": {\\n              \\\"Limits\\\": {\\n                \\\"key\\\": \\\"\\\"\\n              },\\n              \\\"Requests\\\": {\\n                \\\"key\\\": \\\"\\\"\\n              }\\n            }\\n          }\\n        ],\\n        \\\"InitContainers\\\": [\\n          {\\n            \\\"Name\\\": \\\"data-init\\\",\\n            \\\"Image\\\": \\\"registry.cn-hangzhou.aliyuncs.com/pai-dlc/curl:v1.0.0\\\",\\n            \\\"Command\\\": [\\n              \\\"curl www.aliyun.com\\\"\\n            ],\\n            \\\"Args\\\": [\\n              \\\"\\\"\\n            ],\\n            \\\"WorkingDir\\\": \\\"/root\\\",\\n            \\\"Env\\\": [\\n              {\\n                \\\"Name\\\": \\\"ENABLE_DEBUG\\\",\\n                \\\"Value\\\": \\\"true\\\"\\n              }\\n            ],\\n            \\\"Resources\\\": {\\n              \\\"Limits\\\": {\\n                \\\"key\\\": \\\"\\\"\\n              },\\n              \\\"Requests\\\": {\\n                \\\"key\\\": \\\"\\\"\\n              }\\n            }\\n          }\\n        ],\\n        \\\"PodLabels\\\": {\\n          \\\"key\\\": \\\"\\\"\\n        },\\n        \\\"PodAnnotations\\\": {\\n          \\\"key\\\": \\\"\\\"\\n        },\\n        \\\"SharedVolumeMountPaths\\\": [\\n          \\\"/root/share/\\\"\\n        ]\\n      },\\n      \\\"ResourceConfig\\\": {\\n        \\\"CPU\\\": \\\"10\\\",\\n        \\\"GPU\\\": \\\"3\\\",\\n        \\\"Memory\\\": \\\"10Gi\\\",\\n        \\\"SharedMemory\\\": \\\"5Gi\\\",\\n        \\\"GPUType\\\": \\\"Tesla-V100-16G\\\"\\n      },\\n      \\\"UseSpotInstance\\\": false,\\n      \\\"SpotSpec\\\": {\\n        \\\"SpotStrategy\\\": \\\"\\\",\\n        \\\"SpotDiscountLimit\\\": 0\\n      }\\n    }\\n  ],\\n  \\\"UserCommand\\\": \\\"python /root/code/mnist.py\\\",\\n  \\\"DataSources\\\": [\\n    {\\n      \\\"DataSourceId\\\": \\\"d*******\\\",\\n      \\\"MountPath\\\": \\\"/mnt/data/\\\",\\n      \\\"Uri\\\": \\\"oss://bucket.oss-cn-hangzhou-internal.aliyuncs.com/path/\\\"\\n    }\\n  ],\\n  \\\"CodeSource\\\": {\\n    \\\"CodeSourceId\\\": \\\"code******\\\",\\n    \\\"Branch\\\": \\\"master\\\",\\n    \\\"Commit\\\": \\\"44da109b59f8596152987eaa8f3b2487xxxxxx\\\",\\n    \\\"MountPath\\\": \\\"/mnt/data\\\"\\n  },\\n  \\\"ThirdpartyLibs\\\": [\\n    \\\"numpy==1.16.1\\\"\\n  ],\\n  \\\"ThirdpartyLibDir\\\": \\\"/root/code/\\\",\\n  \\\"Envs\\\": {\\n    \\\"key\\\": \\\"ENABLE_DEBUG_MODE\\\"\\n  },\\n  \\\"GmtCreateTime\\\": \\\"2021-01-12T14:35:01Z\\\",\\n  \\\"GmtSubmittedTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n  \\\"GmtRunningTime\\\": \\\"2021-01-12T14:36:21Z\\\",\\n  \\\"GmtSuccessedTime\\\": \\\"2021-01-12T15:36:08Z\\\",\\n  \\\"GmtStoppedTime\\\": \\\"2021-01-12T15:36:08Z\\\",\\n  \\\"GmtFailedTime\\\": \\\"2021-01-12T15:36:08Z\\\",\\n  \\\"GmtFinishTime\\\": \\\"2021-01-12T15:36:08Z\\\",\\n  \\\"Duration\\\": 3602,\\n  \\\"Pods\\\": [\\n    {\\n      \\\"Type\\\": \\\"Worker\\\",\\n      \\\"PodId\\\": \\\"Worker\\\",\\n      \\\"PodUid\\\": \\\"fe846462-af2c-4521-bd6f-96787a57591d\\\",\\n      \\\"Status\\\": \\\"Running\\\",\\n      \\\"Ip\\\": \\\"10.0.1.2\\\",\\n      \\\"GmtCreateTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n      \\\"GmtStartTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n      \\\"GmtFinishTime\\\": \\\"2021-01-12T15:36:05Z\\\",\\n      \\\"HistoryPods\\\": [\\n        {\\n          \\\"Type\\\": \\\"Worker\\\",\\n          \\\"PodId\\\": \\\"Worker\\\",\\n          \\\"PodUid\\\": \\\"fe846462-af2c-4521-bd6f-96787a57591d\\\",\\n          \\\"Status\\\": \\\"Failed\\\",\\n          \\\"Ip\\\": \\\"10.0.1.3\\\",\\n          \\\"GmtCreateTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n          \\\"GmtStartTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n          \\\"GmtFinishTime\\\": \\\"2021-01-12T14:36:01Z\\\",\\n          \\\"SubStatus\\\": \\\"Normal\\\",\\n          \\\"ResourceType\\\": \\\"Normal\\\"\\n        }\\n      ],\\n      \\\"SubStatus\\\": \\\"Normal\\\",\\n      \\\"ResourceType\\\": \\\"Normal\\\"\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-xxxxxxxx\\\",\\n  \\\"Settings\\\": {\\n    \\\"BusinessUserId\\\": \\\"166924\\\",\\n    \\\"Caller\\\": \\\"SilkFlow\\\",\\n    \\\"Tags\\\": {\\n      \\\"key\\\": \\\"\\\"\\n    },\\n    \\\"PipelineId\\\": \\\"pid-123456\\\",\\n    \\\"EnableTideResource\\\": true,\\n    \\\"EnableErrorMonitoringInAIMaster\\\": false,\\n    \\\"ErrorMonitoringArgs\\\": \\\"--enable-log-hang-detection true\\\",\\n    \\\"EnableRDMA\\\": true,\\n    \\\"EnableOssAppend\\\": true,\\n    \\\"OversoldType\\\": \\\"AcceptQuotaOverSold\\\",\\n    \\\"AdvancedSettings\\\": {\\n      \\\"test\\\": \\\"test\\\",\\n      \\\"test2\\\": 1\\n    },\\n    \\\"Driver\\\": \\\"535.54.03\\\",\\n    \\\"EnableSanityCheck\\\": true,\\n    \\\"SanityCheckArgs\\\": \\\"--sanity-check-timing=AfterJobFaultTolerant --sanity-check-timeout-ops=MarkJobFai\\\",\\n    \\\"JobReservedMinutes\\\": 30,\\n    \\\"JobReservedPolicy\\\": \\\"Always\\\"\\n  },\\n  \\\"ClusterId\\\": \\\"a*****\\\",\\n  \\\"ElasticSpec\\\": {\\n    \\\"EnableElasticTraining\\\": true,\\n    \\\"MinParallelism\\\": 1,\\n    \\\"MaxParallelism\\\": 8,\\n    \\\"AIMasterType\\\": \\\"\\\",\\n    \\\"AIMasterDockerImage\\\": \\\"\\\",\\n    \\\"EnablePsJobElasticWorker\\\": true,\\n    \\\"EnableAIMaster\\\": true,\\n    \\\"EnablePsResourceEstimate\\\": true,\\n    \\\"EnablePsJobElasticPS\\\": true,\\n    \\\"PSMinParallelism\\\": 4,\\n    \\\"PSMaxParallelism\\\": 10,\\n    \\\"ElasticStrategy\\\": \\\"\\\",\\n    \\\"EnableEDP\\\": true,\\n    \\\"EDPMaxParallelism\\\": 16,\\n    \\\"EDPMinParallelism\\\": 8\\n  },\\n  \\\"EnabledDebugger\\\": false,\\n  \\\"Priority\\\": 1,\\n  \\\"SubStatus\\\": \\\"Restarting\\\",\\n  \\\"RestartTimes\\\": \\\"0/10\\\",\\n  \\\"StatusHistory\\\": [\\n    {\\n      \\\"Status\\\": \\\"\\\",\\n      \\\"StartTime\\\": \\\"\\\",\\n      \\\"EndTime\\\": \\\"\\\",\\n      \\\"ReasonCode\\\": \\\"\\\",\\n      \\\"ReasonMessage\\\": \\\"\\\"\\n    }\\n  ],\\n  \\\"TenantId\\\": \\\"\\\",\\n  \\\"ResourceType\\\": \\\"ECS\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<不支持/>\",\"errorExample\":\"\"}]","title":"获取任务详情"}