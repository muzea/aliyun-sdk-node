{"summary":"获取预留配置。","path":"/2021-04-06/services/{serviceName}/functions/{functionName}/provision-config","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"serviceName","in":"path","schema":{"title":"服务名称","description":"服务名称。","type":"string","required":true,"example":"demoService"}},{"name":"qualifier","in":"query","allowEmptyValue":false,"schema":{"title":"别名名称","description":"别名名称。","type":"string","required":true,"example":"prod"}},{"name":"functionName","in":"path","schema":{"title":"函数名称","description":"函数名称。","type":"string","required":true,"example":"demoFunction"}},{"name":"X-Fc-Account-Id","in":"header","schema":{"description":"您的阿里云账号（主账号）ID。","type":"string","required":false,"example":"188077086902****"}},{"name":"X-Fc-Date","in":"header","schema":{"description":"函数的调用开始日期，格式为**EEE,d MMM yyyy HH:mm:ss GMT**。","type":"string","required":false,"example":"Wed, 11 May 2022 09:00:00 GMT"}},{"name":"X-Fc-Trace-Id","in":"header","schema":{"description":"函数计算调用请求的调用链ID。","type":"string","required":false,"example":"rid281s******"}}],"responses":{"200":{"headers":{"ETag":{"schema":{"title":"provision config etag， 以确保实际更改的 provision config 和期望更改的 provision config 是一致的","type":"string"}}},"schema":{"title":"provisionConfigResponse","description":"函数预留配置。","type":"object","properties":{"resource":{"title":"资源描述","description":"资源描述。","type":"string","example":"12345#servierName#qualifier#functionName"},"target":{"title":"目标资源个数","description":"目标资源个数。","type":"integer","format":"int64","example":"5"},"current":{"title":"实际资源个数","description":"实际资源个数。","type":"integer","format":"int64","example":"1"},"scheduledActions":{"title":"定时策略配置","description":"定时策略配置。","type":"array","items":{"description":"定时伸缩策略：通过定时伸缩策略您可以更加灵活地配置预留的函数实例，在指定时间将预留的函数实例量设定成需要的值，使函数实例量更好地贴合业务的并发量。","example":"[     {         \"Name\":\"action_1\",         \"StartTime\":\"2020-11-01T10:00:00Z\",         \"EndTime\":\"2020-11-30T10:00:00Z\",         \"TargetValue\":50,         \"ScheduleExpression\":\"cron(0 0 20 * * *)\"     },     {         \"Name\":\"action_2\",         \"StartTime\":\"2020-11-01T10:00:00Z\",         \"EndTime\":\"2020-11-30T10:00:00Z\",         \"TargetValue\":10,         \"ScheduleExpression\":\"cron(0 0 22 * * *)\"     } ]","$ref":"#/components/schemas/ScheduledActions"}},"targetTrackingPolicies":{"title":"指标追踪伸缩策略配置","description":"指标追踪伸缩策略配置。","type":"array","items":{"description":"指标伸缩策略：根据函数实例并发利用率的情况每分钟对预留资源进行一次伸缩。\n\n- 当指标超过追踪值metricTarget时，开始以积极的策略扩容预留模式的函数实例量，以使得指标值恢复到追踪值metricTarget附近。\n- 当指标低于追踪值metricTarget时，开始以保守的策略缩容预留模式的函数实例量，以使得指标值逐渐恢复到追踪值metricTarget附近。\n\n当您在系统中设置了伸缩最大值和最小值，此时预留的函数实例量会在最大值与最小值之间进行伸缩，超出最大值时将停止扩容，低于最小值时将停止缩容。","example":"[     {       \"Name\": \"action_1\",       \"StartTime\": \"2020-11-01T10:00:00Z\",       \"EndTime\": \"2020-11-30T10:00:00Z\",       \"MetricType\": \"ProvisionedConcurrencyUtilization\",       \"MetricTarget\": 0.6,       \"MinCapacity\": 10,       \"MaxCapacity\": 100     }   ]","$ref":"#/components/schemas/TargetTrackingPolicies"}},"currentError":{"title":"预留实例创建失败时的错误信息","description":"预留实例创建失败时的错误信息。","type":"string","example":"image not found"},"alwaysAllocateCPU":{"title":"是否始终分配CPU给函数实例。","description":"是否始终分配CPU给函数实例。","type":"boolean","example":"true"}}}},"400":{},"403":{},"404":{},"409":{},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"resource\\\": \\\"12345#servierName#qualifier#functionName\\\",\\n  \\\"target\\\": 5,\\n  \\\"current\\\": 1,\\n  \\\"scheduledActions\\\": [\\n    {\\n      \\\"name\\\": \\\"\\\",\\n      \\\"startTime\\\": \\\"\\\",\\n      \\\"endTime\\\": \\\"\\\",\\n      \\\"target\\\": 0,\\n      \\\"scheduleExpression\\\": \\\"\\\"\\n    }\\n  ],\\n  \\\"targetTrackingPolicies\\\": [\\n    {\\n      \\\"name\\\": \\\"\\\",\\n      \\\"startTime\\\": \\\"\\\",\\n      \\\"endTime\\\": \\\"\\\",\\n      \\\"metricType\\\": \\\"\\\",\\n      \\\"metricTarget\\\": 0,\\n      \\\"minCapacity\\\": 0,\\n      \\\"maxCapacity\\\": 0\\n    }\\n  ],\\n  \\\"currentError\\\": \\\"image not found\\\",\\n  \\\"alwaysAllocateCPU\\\": true\\n}\",\"type\":\"json\"}]","title":"获取函数预留信息"}