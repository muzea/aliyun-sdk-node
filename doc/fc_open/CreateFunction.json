{"summary":"创建函数。","path":"/2021-04-06/services/{serviceName}/functions","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"serviceName","in":"path","schema":{"title":"服务名称","description":"服务的名称。","type":"string","required":true,"example":"serviceName"}},{"name":"X-Fc-Account-Id","in":"header","schema":{"description":"您的阿里云账号（主账号）ID。","type":"string","required":false,"example":"188077086902****"}},{"name":"function","in":"body","style":"json","schema":{"title":"函数结构体","description":"函数的定义。","type":"object","properties":{"code":{"description":"函数代码ZIP包。**code**和**customContainerConfig**二选一。","required":false,"$ref":"#/components/schemas/Code"},"customContainerConfig":{"description":"Custom Container运行时的相关配置，成功配置后函数可以使用自定义容器镜像执行函数。**code**和**customContainerConfig**二选一。","required":false,"$ref":"#/components/schemas/CustomContainerConfig"},"layers":{"title":"层列表","description":"层的列表。\n> 多个层会按照数组下标从大到小的顺序进行合并，下标小的层的内容会覆盖下标大的层的同名文件。\n\n","type":"array","items":{"description":"层资源的名称。格式为acs:fc:{region}:{accountID}:layers/{layerName}/versions/{layerVersion}。","type":"string","required":false,"example":"layerName"},"required":false},"description":{"title":"函数描述","description":"函数的描述。","type":"string","required":false,"example":"function-description"},"functionName":{"title":"函数名称","description":"函数的名称。只能包含字母、数字、下划线（_）和短划线（-），不能以数字、短划线（-）开头，长度范围为1~64个字符。","type":"string","required":true,"example":"functionName"},"handler":{"title":"function执行的入口，具体格式和语言相关","description":"函数执行的入口，具体格式和语言相关。详细信息，请参见[函数入口](~~157704~~)。","type":"string","required":true,"example":"index.handler"},"initializationTimeout":{"title":"初始化function运行的超时时间，单位为秒，最小1秒，默认3秒。初始化function超过这个时间后会被终止执行","description":"初始化函数运行的超时时间，默认值为3秒，单位为秒。最小1秒，最大为5分钟。当初始化函数超过这个时间后，函数会被终止执行。","type":"integer","format":"int32","required":false,"example":"60"},"initializer":{"title":"初始化 function 执行的入口，具体格式和语言相关","description":"初始化函数执行的入口。详细信息，请参见[Initializer函数](~~157704~~)。","type":"string","required":false,"example":"index.initializer"},"memorySize":{"title":"function的内存规格，单位为MB，为64MB的倍数","description":"函数的内存规格，单位为MB，内存大小为64 MB的倍数。不同的函数实例类型，内存规格存在差异。更多信息，请参见[实例规格](~~179379~~)。","type":"integer","format":"int32","required":false,"example":"512"},"runtime":{"title":"function运行的语言环境，目前支持nodejs6, nodejs8, python2.7, python3, java8","description":"函数运行的语言环境。目前支持**nodejs20**、**nodejs18**、**nodejs20**、**nodejs18**、**nodejs16**、**nodejs14**、**nodejs12**、**nodejs10**、**nodejs8**、**nodejs6**、**nodejs4.4**、**python3.10**、**python3.9**、**python3**、**python2.7**、**java11**、**java8**、**go1**、**php7.2**、**dotnetcore3.1**、**dotnetcore2.1**、**custom.debian10**、**custom**和**custom-container**。更多信息，请参见[支持的函数运行环境列表](~~73338~~)。","type":"string","required":true,"example":"python3.9"},"timeout":{"title":"function运行的超时时间，单位为秒，最小1秒，默认3秒。function超过这个时间后会被终止执行","description":"函数运行的超时时间，单位为秒，最小1秒，默认3秒。函数超过这个时间后会被终止执行。","type":"integer","format":"int32","required":false,"example":"60"},"caPort":{"title":"自定义、自定义容器运行时 HTTP Server 的监听端口","description":"自定义、自定义容器运行时HTTP Server的监听端口。","type":"integer","format":"int32","required":false,"example":"9000"},"environmentVariables":{"description":"函数的环境变量，您可以在函数中通过环境变量访问环境变量。更多信息，请参见[环境变量](~~69777~~)。","type":"object","required":false,"additionalProperties":{"type":"string","description":"环境变量配置。","example":"{\"key\":\"value\"}"}},"instanceConcurrency":{"description":"实例最大并发度。","type":"integer","format":"int32","required":false,"example":"10"},"instanceSoftConcurrency":{"description":"实例软并发度，用于优雅扩容。当实例上的并发数超过软并发度时，会触发实例扩容。例如，您的实例启动较慢，可以通过设置合适的软实例并发度，提前启动实例。\n\n取值小于或等于**instanceConcurrency**。","type":"integer","format":"int32","required":false,"example":"5"},"instanceType":{"description":"函数的实例类型，取值如下：\n  * **e1**：弹性实例。\n  * **c1**：性能实例。\n  * **fc.gpu.tesla.1**：GPU实例Tesla系列T4卡型。\n  * **fc.gpu.ampere.1**：GPU实例Ampere系列A10卡型。\n  * **g1**：同**fc.gpu.tesla.1**。\n\n默认值：e1","type":"string","required":false,"example":"e1"},"customRuntimeConfig":{"title":"Custom Runtime函数详细配置","description":"Custom Runtime函数详细配置。","required":false,"$ref":"#/components/schemas/CustomRuntimeConfig"},"instanceLifecycleConfig":{"description":"实例生命周期配置。","required":false,"$ref":"#/components/schemas/InstanceLifecycleConfig"},"customDNS":{"title":"函数自定义DNS配置","description":"函数自定义DNS配置。","required":false,"$ref":"#/components/schemas/CustomDNS"},"customHealthCheckConfig":{"title":"函数自定义健康检查配置，仅适用于Custom runtime/container","description":"函数自定义健康检查配置，仅适用于Custom Runtime和Custom Container。","required":false,"$ref":"#/components/schemas/CustomHealthCheckConfig"},"cpu":{"title":"function的CPU规格，单位为vCPU，为0.05vCPU的倍数","description":"函数的CPU规格，单位为vCPU，为0.05 vCPU的倍数。","type":"number","format":"float","required":false,"example":"1.5"},"diskSize":{"title":"function的磁盘规格，单位为MB，可选值为512MB或10240MB","description":"函数的磁盘规格，单位为MB，可选值为512 MB或10240 MB。","type":"integer","format":"int32","required":false,"example":"512"},"gpuMemorySize":{"title":"function的GPU显存规格，单位为MB，为1024MB的倍数","description":"function的GPU显存规格，单位为MB，为1024MB的倍数","type":"integer","format":"int32","required":false,"example":"2048"}},"required":false}},{"name":"X-Fc-Code-Checksum","in":"header","schema":{"description":"函数代码包的CRC-64值。","type":"string","required":false,"example":"1506052139770049xxxx"}},{"name":"X-Fc-Date","in":"header","schema":{"description":"函数的调用开始日期，格式为**EEE,d MMM yyyy HH:mm:ss GMT**。","type":"string","required":false,"example":"Wed, 11 May 2022 09:00:00 GMT"}},{"name":"X-Fc-Trace-Id","in":"header","schema":{"description":"调用函数的ID，与返回参数requestId对应。","type":"string","required":false,"example":"test-trace-id"}}],"responses":{"200":{"headers":{"ETag":{"schema":{"title":"function etag，用于更改function。以确保实际更改的function和期望更改的function是一致的.","type":"string"}}},"schema":{"title":"FunctionResponse","description":"创建函数的返回值。","type":"object","properties":{"codeChecksum":{"title":"function code包的CRC64值","description":"函数代码包的CRC64值。","type":"string","example":"5434025278388143772"},"codeSize":{"title":"系统返回的function的code包大小，单位为byte Example : 1024","description":"系统返回的函数代码包的大小，单位为Byte。","type":"integer","format":"int64","example":"1024"},"createdTime":{"title":"function创建时间","description":"函数的创建时间。","type":"string","example":"2016-08-15T15:00:00.000+0000"},"customContainerConfig":{"description":"Custom Container运行时的相关配置，配置后函数可以使用自定义容器镜像执行函数。","$ref":"#/components/schemas/CustomContainerConfig"},"layers":{"description":"层的列表。\n> 多个层会按照数组下标从大到小的顺序进行合并，下标小的层的内容会覆盖下标大的层的同名文件。","type":"array","items":{"description":"层资源的名称。","type":"string","example":"md5#layername#version"}},"description":{"title":"函数描述","description":"函数描述。","type":"string","example":"This is a demo hello world function"},"functionId":{"title":"系统为每个function生成的唯一ID","description":"系统为每个函数生成的唯一ID。","type":"string","example":"2d28e0e9-9ba5-4eed-8b1a-d3d9cd24\n****"},"functionName":{"title":"函数名称","description":"函数名称。","type":"string","example":"demo-function"},"handler":{"title":"function的执行入口","description":"函数的执行入口。","type":"string","example":"index.handler"},"lastModifiedTime":{"title":"function上次修改时间","description":"函数上次修改时间。","type":"string","example":"2016-08-15T17:00:00.000+0000"},"memorySize":{"title":"function的内存规格，单位为MB，为64MB的倍数","description":"函数设置的内存大小，单位为MB。","type":"integer","format":"int32","example":"512"},"runtime":{"title":"function运行的语言环境，目前支持nodejs6, nodejs8, python2.7, python3, java8","description":"函数运行的语言环境。目前支持**nodejs20**、**nodejs18**、**nodejs20**、**nodejs18**、**nodejs16**、**nodejs14**、**nodejs12**、**nodejs10**、**nodejs8**、**nodejs6**、**nodejs4.4**、**python3.10**、**python3.9**、**python3**、**python2.7**、**java11**、**java8**、**go1**、**php7.2**、**dotnetcore3.1**、**dotnetcore2.1**、**custom.debian10**、**custom**和**custom-container**。更多信息，请参见[支持的函数运行环境列表](~~73338~~)。","type":"string","example":"python3.9"},"timeout":{"title":"运行的超时时间，单位为秒","description":"函数运行的超时时间，单位为秒，默认60秒。最小1秒，最长10分钟。如果函数运行超过设置的时间，函数运行将被终止。","type":"integer","format":"int32","example":"10"},"initializationTimeout":{"title":"初始化function运行的超时时间，单位为秒，最小1秒，默认3秒。初始化function超过这个时间后会被终止执行","description":"初始化函数运行的超时时间，单位为秒，最小1秒，默认3秒。初始化函数超过这个时间后会被终止执行。","type":"integer","format":"int32","example":"60"},"initializer":{"title":"初始化 function 执行的入口，具体格式和语言相关","description":"初始化函数执行的入口，具体格式和语言相关。","type":"string","example":"index.handler"},"caPort":{"title":"自定义、自定义容器运行时 HTTP Server 的监听端口","description":"Custom Runtime或Custom Container运行时HTTP Server的监听端口。","type":"integer","format":"int32","example":"9000"},"environmentVariables":{"description":"为函数设置的环境变量，可以在函数中获取环境变量的值。更多信息，请参见[环境变量](~~69777~~)。","type":"object","additionalProperties":{"type":"string","description":"环境变量配置。","example":"{\"key\":\"value\"}"}},"instanceConcurrency":{"description":"单个函数实例允许的最大并发度。","type":"integer","format":"int32","example":"10"},"instanceSoftConcurrency":{"description":"实例软并发度，用于优雅扩容。当实例上的并发数超过软并发度时，会触发实例扩容。例如，您的实例启动较慢，可以通过设置合适的软实例并发度，提前启动实例。\n\n取值小于或等于**instanceConcurrency**。","type":"integer","format":"int32","example":"5"},"instanceType":{"description":"函数的实例类型，取值如下：\n  * **e1**：弹性实例。\n  * **c1**：性能实例。\n  * **fc.gpu.tesla.1**：GPU实例Tesla系列T4卡型。\n  * **fc.gpu.ampere.1**：GPU实例Ampere系列A10卡型。\n  * **g1**：同**fc.gpu.tesla.1**。","type":"string","example":"e1"},"instanceLifecycleConfig":{"description":"实例生命周期配置。\n\n","$ref":"#/components/schemas/InstanceLifecycleConfig"},"customDNS":{"title":"函数自定义DNS配置","description":"函数自定义DNS配置。","$ref":"#/components/schemas/CustomDNS"},"customRuntimeConfig":{"title":"Custom Runtime函数详细配置","description":"Custom Runtime函数详细配置。","$ref":"#/components/schemas/CustomRuntimeConfig"},"customHealthCheckConfig":{"title":"函数自定义健康检查配置，仅适用于Custom runtime/container","description":"函数自定义健康检查配置，仅适用于Custom Runtime和Custom Container。","$ref":"#/components/schemas/CustomHealthCheckConfig"},"cpu":{"title":"function的CPU规格，单位为vCPU，为0.05vCPU的倍数","description":"函数的CPU规格，单位为vCPU，为0.05 vCPU的倍数。","type":"number","format":"float","example":"1.5"},"diskSize":{"title":"function的磁盘规格，单位为MB，可选值为512MB或10240MB","description":"函数的磁盘规格，单位为MB，可选值为512 MB或10240 MB。","type":"integer","format":"int32","example":"512"},"gpuMemorySize":{"title":"function的GPU显存规格，单位为MB，为1024MB的倍数","description":"function的GPU显存规格，单位为MB，为1024MB的倍数","type":"integer","format":"int32","example":"2048"},"layersArnV2":{"title":"层的arn列表","description":"层的arn列表","type":"array","items":{"title":"层资源定位符","description":"层资源定位符","type":"string","example":"acs:fc:cn-hangzhou:official:layers/Python310/versions/2"}}}}},"400":{},"403":{},"404":{},"409":{},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"codeChecksum\\\": \\\"5434025278388143772\\\",\\n  \\\"codeSize\\\": 1024,\\n  \\\"createdTime\\\": \\\"2016-08-15T15:00:00.000+0000\\\",\\n  \\\"customContainerConfig\\\": {\\n    \\\"args\\\": \\\"[\\\\\\\"-arg1\\\\\\\", \\\\\\\"value1\\\\\\\"]\\\",\\n    \\\"command\\\": \\\"[\\\\\\\"/code/myserver\\\\\\\"]\\\",\\n    \\\"image\\\": \\\"registry-vpc.cn-hangzhou.aliyuncs.com/fc-demo/helloworld:v1beta1\\\",\\n    \\\"accelerationType\\\": \\\"Default\\\",\\n    \\\"instanceID\\\": \\\"cri-xxxxxxxxxx\\\",\\n    \\\"webServerMode\\\": true\\n  },\\n  \\\"layers\\\": [\\n    \\\"md5#layername#version\\\"\\n  ],\\n  \\\"description\\\": \\\"This is a demo hello world function\\\",\\n  \\\"functionId\\\": \\\"2d28e0e9-9ba5-4eed-8b1a-d3d9cd24\\\\n****\\\",\\n  \\\"functionName\\\": \\\"demo-function\\\",\\n  \\\"handler\\\": \\\"index.handler\\\",\\n  \\\"lastModifiedTime\\\": \\\"2016-08-15T17:00:00.000+0000\\\",\\n  \\\"memorySize\\\": 512,\\n  \\\"runtime\\\": \\\"python3.9\\\",\\n  \\\"timeout\\\": 10,\\n  \\\"initializationTimeout\\\": 60,\\n  \\\"initializer\\\": \\\"index.handler\\\",\\n  \\\"caPort\\\": 9000,\\n  \\\"environmentVariables\\\": {\\n    \\\"key\\\": \\\"{\\\\\\\"key\\\\\\\":\\\\\\\"value\\\\\\\"}\\\"\\n  },\\n  \\\"instanceConcurrency\\\": 10,\\n  \\\"instanceSoftConcurrency\\\": 5,\\n  \\\"instanceType\\\": \\\"e1\\\",\\n  \\\"instanceLifecycleConfig\\\": {\\n    \\\"preFreeze\\\": {\\n      \\\"handler\\\": \\\"\\\",\\n      \\\"timeout\\\": 0\\n    },\\n    \\\"preStop\\\": {\\n      \\\"handler\\\": \\\"\\\",\\n      \\\"timeout\\\": 0\\n    }\\n  },\\n  \\\"customDNS\\\": {\\n    \\\"nameServers\\\": [\\n      \\\"8.8.8.8\\\"\\n    ],\\n    \\\"searches\\\": [\\n      \\\"ns1.svc.cluster-domain.example\\\"\\n    ],\\n    \\\"dnsOptions\\\": [\\n      {\\n        \\\"name\\\": \\\"ndots\\\",\\n        \\\"value\\\": \\\"2\\\"\\n      }\\n    ]\\n  },\\n  \\\"customRuntimeConfig\\\": {\\n    \\\"command\\\": [\\n      \\\"/code/myBootstrap\\\"\\n    ],\\n    \\\"args\\\": [\\n      \\\"args1\\\"\\n    ]\\n  },\\n  \\\"customHealthCheckConfig\\\": {\\n    \\\"httpGetUrl\\\": \\\"\\\",\\n    \\\"initialDelaySeconds\\\": 0,\\n    \\\"periodSeconds\\\": 0,\\n    \\\"timeoutSeconds\\\": 0,\\n    \\\"failureThreshold\\\": 0,\\n    \\\"successThreshold\\\": 0\\n  },\\n  \\\"cpu\\\": 1.5,\\n  \\\"diskSize\\\": 512,\\n  \\\"gpuMemorySize\\\": 2048,\\n  \\\"layersArnV2\\\": [\\n    \\\"acs:fc:cn-hangzhou:official:layers/Python310/versions/2\\\"\\n  ]\\n}\",\"type\":\"json\"}]","title":"创建函数"}