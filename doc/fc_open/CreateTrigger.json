{"summary":"创建触发器。","path":"/2021-04-06/services/{serviceName}/functions/{functionName}/triggers","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"serviceName","in":"path","schema":{"title":"service名称","description":"服务的名称。","type":"string","required":true,"example":"demoService"}},{"name":"functionName","in":"path","schema":{"title":"function名称","description":"函数的名称。","type":"string","required":true,"example":"demoFunction"}},{"name":"body","in":"body","style":"json","schema":{"title":"trigger对象","description":"触发器的定义。","type":"object","properties":{"invocationRole":{"title":"event source，如OSS，使用该role去invoke function","description":"事件源（如OSS）调用函数所需的角色。更多信息，请参见[触发器简介](~~53102~~)。","type":"string","required":false,"example":"acs:ram::1234567890:role/fc-test"},"qualifier":{"title":"service版本","description":"服务的版本或别名。","type":"string","required":false,"example":"LATEST"},"sourceArn":{"title":"event source的Aliyun Resource Name（ARN","description":"触发器事件源的Aliyun Resource Name。对于定时、HTTP和EventBridge类型的触发器可忽略该参数，其它类型触发器该参数为必填项。对于 EB 触发器，若主动填写该字段，表示将 EB 侧已存在资源关联到该触发器，注意，**两个不同 EB 触发器不要配置同一个 sourceArn**，否则触发器的更新/删除操作会相互影响","type":"string","required":false,"example":"acs:oss:cn-shanghai:12345:mybucket"},"triggerConfig":{"title":"trigger配置，针对不同的trigger类型，trigger配置会有所不同","description":"触发器配置，针对不同类型的触发器，配置有所不同。具体格式请参考如下对应的数据结构：\n\n  - OSS触发器：请参见[OSSTriggerConfig](~~415697~~)。\n  - 日志服务触发器：请参见[LogTriggerConfig](~~415694~~)。\n  - 定时触发器：请参见[TimeTriggerConfig](~~415712~~)。\n  - HTTP触发器：请参见[HTTPTriggerConfig](~~415685~~)。\n  - Tablestore触发器：只需要填写完整的**SourceArn**参数便可, 这里无需额外配置，取值为空{}。\n  - CDN事件触发器：请参见[CDNEventsTriggerConfig](~~415674~~)。\n  - MNS主题触发器：请参见[MnsTopicTriggerConfig](~~415695~~)。\n  - EventBridge触发器：请参见[EventBridgeTriggerConfig](~~2508622~~)。","type":"string","required":true,"example":"{\"events\": [\"oss:ObjectCreated:*\"], \"filter\": {\"key\": {\"prefix\": \"/prefix\", \"suffix\": \".zip\"}}}"},"triggerName":{"title":"trigger名称","description":"触发器的名称。要求只能包含字母、数字、下划线\\(_)和短划线\\(-)。不能以数字、短划线\\(-)开头，长度限制为1~128个字符。","type":"string","required":true,"example":"oss_create_object_demo"},"triggerType":{"title":"trigger类型，如 oss, log, tablestore, timer, http, cdn_events, mns_topic","description":"触发器的类型。具体取值和触发器类型对应关系如下所示：\n  - **oss**：OSS触发器。更多信息，请参见[OSS触发器概述](~~62922~~)。\n  - **log**：日志服务触发器。更多信息，请参见[日志服务触发器概述](~~84386~~)。\n  - **timer**：定时触发器。更多信息，请参见[定时触发器概述](~~68172~~)。\n  - **http**：HTTP触发器。更多信息，请参见[HTTP触发器概述](~~71229~~)。\n  - **tablestore**：Tablestore触发器。更多信息，请参见[Tablestore触发器概述](~~100092~~)。\n  - **cdn_events**：CDN事件触发器。更多信息，请参见[CDN事件触发器概述](~~73333~~)。\n  - **mns_topic**：MNS主题触发器。更多信息，请参见[MNS主题触发器概述](~~97032~~)。\n  - **eventbridge**：EventBridge触发器。","type":"string","required":true,"enumValueTitles":{"cdn_events":"cdn_events","timer":"timer","log":"log","mns_topic":"mns_topic","eventbridge":"eventbridge","http":"http","oss":"oss","tablestore":"tablestore"},"example":"oss"},"description":{"description":"触发器的描述。","type":"string","required":false,"example":"trigger for test"}},"required":false}},{"name":"X-Fc-Account-Id","in":"header","schema":{"description":"您的阿里云账号（主账号）ID。","type":"string","required":false,"example":"188077086902****"}},{"name":"X-Fc-Date","in":"header","schema":{"description":"客户端发起请求的时间。格式为**EEE,d MMM yyyy HH:mm:ss GMT**。","type":"string","required":false,"example":"Wed, 11 May 2022 09:00:00 GMT"}},{"name":"X-Fc-Trace-Id","in":"header","schema":{"description":"自定义请求ID。","type":"string","required":false,"example":"my-test-trace-id"}}],"responses":{"200":{"headers":{"ETag":{"schema":{"title":"trigger etag，用于更改trigger。以确保实际更改的trigger和期望更改的trigger是一致的","type":"string"}}},"schema":{"title":"TriggerResponse","description":"触发器定义。","type":"object","properties":{"createdTime":{"title":"创建时间","description":"触发器的创建时间。","type":"string","example":"2016-08-15T15:00:00.000+0000"},"invocationRole":{"title":"调用函数使用的RAM角色的ARN","description":"事件源调用函数使用的RAM角色的ARN。","type":"string","example":"acs:ram::1234567890:role/fc-test"},"lastModifiedTime":{"title":"上次修改时间","description":"触发器的上次修改时间。","type":"string","example":"016-08-15T17:00:00.000+0000"},"qualifier":{"title":"service版本","description":"服务的版本。","type":"string","example":"LATEST"},"sourceArn":{"title":"event source的Aliyun Resource Name（ARN","description":"事件源的Aliyun Resource Name。","type":"string","example":"acs:oss:cn-shanghai:12345:mybucket"},"triggerConfig":{"title":"trigger配置对象","description":"触发器配置，针对不同类型的触发器，配置有所不同。","type":"string","example":"{\"events\": [\"oss:ObjectCreated:*\"], \"filter\": {\"key\": {\"prefix\": \"/prefix\", \"suffix\": \".zip\"}}}"},"triggerName":{"title":"trigger名称","description":"触发器的名称。要求只能包含字母、数字、下划线（_）和短划线（-）。不能以数字、短划线（-）开头，长度限制为1~128个字符。","type":"string","example":"oss_create_object_trigger_demo"},"triggerType":{"title":"trigger类型，如 oss, log, tablestore, timer, http, cdn_events, mns_topic","description":"触发器的类型，例如**oss**、**log**、**tablestore**、**timer**、**http**、**cdn_events**、**mns\\_topic**、**eventbridge**。","type":"string","example":"oss"},"description":{"description":"触发器的描述。","type":"string","example":"trigger for test"},"triggerId":{"description":"触发器的唯一ID。","type":"string","example":"3e270f2f-cef2-421a-bc86-ff4e8088****"},"domainName":{"title":"域名名称，使用域名名称拼接上函数计算域名，可以采用HTTP协议调用到触发器对应版本的函数。例如{domainName}.cn-shanghai.fc.aliyuncs.com","description":"域名名称，使用域名名称拼接上函数计算域名，可以采用HTTP协议调用到触发器对应版本的函数。例如`{domainName}.cn-shanghai.fc.aliyuncs.com`。","type":"string","example":"demo-service-demo-function-jkhksh"},"urlInternet":{"title":"公网域名地址。在互联网可以通过HTTP协议或者HTTPS协议访问HTTP Trigger。","description":"公网域名地址。在互联网可以通过HTTP协议或者HTTPS协议访问HTTP Trigger。","type":"string","example":"https://svc-func-xxxxxxxx.cn-hangzhou.fcapp.run"},"urlIntranet":{"title":"私网域名地址。在VPC可以通过HTTP协议或者HTTPS协议访问HTTP Trigger。","description":"私网域名地址。在VPC可以通过HTTP协议或者HTTPS协议访问HTTP Trigger。","type":"string","example":"https://svc-func-xxxxxxxx.cn-hangzhou-vpc.fcapp.run"}}}},"400":{},"403":{},"404":{},"409":{},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"createdTime\\\": \\\"2016-08-15T15:00:00.000+0000\\\",\\n  \\\"invocationRole\\\": \\\"acs:ram::1234567890:role/fc-test\\\",\\n  \\\"lastModifiedTime\\\": \\\"016-08-15T17:00:00.000+0000\\\",\\n  \\\"qualifier\\\": \\\"LATEST\\\",\\n  \\\"sourceArn\\\": \\\"acs:oss:cn-shanghai:12345:mybucket\\\",\\n  \\\"triggerConfig\\\": \\\"{\\\\\\\"events\\\\\\\": [\\\\\\\"oss:ObjectCreated:*\\\\\\\"], \\\\\\\"filter\\\\\\\": {\\\\\\\"key\\\\\\\": {\\\\\\\"prefix\\\\\\\": \\\\\\\"/prefix\\\\\\\", \\\\\\\"suffix\\\\\\\": \\\\\\\".zip\\\\\\\"}}}\\\",\\n  \\\"triggerName\\\": \\\"oss_create_object_trigger_demo\\\",\\n  \\\"triggerType\\\": \\\"oss\\\",\\n  \\\"description\\\": \\\"trigger for test\\\",\\n  \\\"triggerId\\\": \\\"3e270f2f-cef2-421a-bc86-ff4e8088****\\\",\\n  \\\"domainName\\\": \\\"demo-service-demo-function-jkhksh\\\",\\n  \\\"urlInternet\\\": \\\"https://svc-func-xxxxxxxx.cn-hangzhou.fcapp.run\\\",\\n  \\\"urlIntranet\\\": \\\"https://svc-func-xxxxxxxx.cn-hangzhou-vpc.fcapp.run\\\"\\n}\",\"type\":\"json\"}]","title":"创建触发器"}