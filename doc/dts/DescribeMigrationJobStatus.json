{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"数据迁移实例所在地域的ID，详情请参见[支持的地域列表](~~141033~~)。\n","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"MigrationJobId","in":"query","schema":{"description":"数据迁移实例ID，可以通过调用**DescribeMigrationJobs**接口查询。","type":"string","required":true,"docRequired":true,"example":"dtsz2v12jfo309****"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。\n","type":"string","required":false,"example":"0c593ea1-3bea-11e9-b96b-88e9fe63****"}},{"name":"AccountId","in":"query","schema":{"description":"阿里云主账号ID，无需设置，该参数即将下线。\n","type":"string","required":false,"example":"12323344****"}},{"name":"ResourceGroupId","in":"query","schema":{"type":"string"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"A032E3B4-929B-48E9-97B9-37587CBF****"},"MigrationJobName":{"description":"数据迁移实例名称。","type":"string","example":"MySQL迁移"},"MigrationJobStatus":{"description":"迁移实例状态，返回值：\n\n- **NotStarted**：未启动。\n- **Prechecking**：预检查中。\n- **PrecheckFailed**：预检查失败。\n- **Migrating**：迁移中。\n- **Suspending**：暂停中。\n- **MigrationFailed**：迁移失败。\n- **Finished**：迁移完成。","type":"string","example":"Migrating"},"ErrCode":{"description":"调用出错时返回的错误码。\n","type":"string","example":"InternalError"},"Success":{"description":"请求是否成功。\n","type":"string","example":"true"},"PayType":{"description":"迁移实例的付费类型，返回值固定为**PostPaid**（按量付费）。\n","type":"string","example":"PostPaid"},"ErrMessage":{"description":"调用错误时返回的错误信息。\n","type":"string","example":"The request processing has failed due to some unknown error."},"MigrationObject":{"description":"迁移对象。\n","type":"string","example":"[{\\\"DBName\\\":\\\"dtstestdata\\\",\\\"TableIncludes\\\":[{\\\"TableName\\\":\\\"customer\\\"}]}]"},"MigrationJobId":{"description":"数据迁移实例ID。","type":"string","example":"dtsz2v12jfo309****"},"TaskId":{"description":"数据迁移任务ID，可用于配置控制台任务详情页面的链接。\n> 迁移任务详情页的链接为：https://dts.console.aliyun.com/#/progress/z2v12jfo309****/config/ 。","type":"string","example":"z2v12jfo309****"},"MigrationJobClass":{"description":"数据迁移实例的规格，返回值为：**small**、**medium**、**large**、**xlarge**或**2xlarge**。更多规格说明，请参见[数据迁移链路规格说明](~~26606~~)。","type":"string","example":"2xlarge"},"DataInitializationStatus":{"description":"全量数据迁移执行状态。\n","type":"object","properties":{"Status":{"description":"全量数据迁移状态，取值包括：\n\n- **NotStarted**：未启动。\n- **Migrating**：迁移中。\n- **Failed**：迁移失败。\n- **Finished**：迁移完成。","type":"string","example":"Finished"},"Percent":{"description":"全量数据迁移进度，单位为百分比。\n","type":"string","example":"100"},"ErrorMessage":{"description":"全量数据迁移失败的错误提示。","type":"string","example":"java.lang.NumberFormatException: For input string: \"\""},"Progress":{"description":"已完成全量数据初始化的记录数。\n","type":"string","example":"200001"}}},"DataSynchronizationStatus":{"description":"增量数据迁移执行状态。\n","type":"object","properties":{"Status":{"description":"增量数据迁移状态，取值包括：\n\n- **NotStarted**：未启动。\n- **Migrating**：迁移中。\n- **Failed**：迁移失败。\n- **Finished**：迁移完成。\n- **Catched**：无延迟。\n","type":"string","example":"Catched"},"Percent":{"description":"增量数据迁移进度，单位为百分比。\n","type":"string","example":"95"},"Delay":{"description":"增量数据迁移延迟，单位为秒。\n","type":"string","example":"0"},"ErrorMessage":{"description":"增量数据迁移失败的错误提示。\n","type":"string","example":"任务失败太久 无法恢复"},"Checkpoint":{"description":"迁移最新一条增量数据的时间戳，格式为Unix时间戳，单位为秒。","type":"string","example":"1612507847"}}},"DestinationEndpoint":{"description":"目标实例的连接信息。","type":"object","properties":{"DatabaseName":{"description":"目标实例中待迁移对象所属数据库的名称。","type":"string","example":"dtstestdata"},"InstanceId":{"description":"目标实例ID。","type":"string","example":"rm-bp1zc3iyqe3qw****"},"IP":{"description":"目标实例的连接地址。","type":"string","example":"172.16.88.***"},"InstanceType":{"description":"目标实例类型。","type":"string","example":"RDS"},"Port":{"description":"目标实例的数据库服务端口。\n","type":"string","example":"3306"},"UserName":{"description":"目标实例的数据库账号。\n","type":"string","example":"dtstest"},"oracleSID":{"description":"Oracle数据库的SID信息。\n> 当目标实例的数据库类型为**Oracle**时，才会返回该参数。","type":"string","example":"testsid"},"EngineName":{"description":"目标实例的数据库类型。","type":"string","example":"MySQL"}}},"MigrationMode":{"description":"迁移类型。","type":"object","properties":{"dataInitialization":{"description":"是否迁移全量数据，取值：\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"dataSynchronization":{"description":"是否迁移增量数据，取值：\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"},"structureInitialization":{"description":"是否执行结构迁移，取值：\n\n- **true**：是。\n- **false**：否。","type":"boolean","example":"true"}}},"PrecheckStatus":{"description":"预检查情况。","type":"object","properties":{"Status":{"description":"预检查状态，返回值：\n\n- **NotStarted**：未启动。\n- **Checking**：预检查中。\n- **Failed**：预检查失败。\n- **Finished**：预检查完成。","type":"string","example":"Success"},"Percent":{"description":"预检查整体进度，单位为百分比。\n","type":"string","example":"100"},"Detail":{"type":"object","properties":{"CheckItem":{"description":"各预检查项的执行情况。\n","type":"array","items":{"type":"object","properties":{"CheckStatus":{"description":"检查结果，返回值：\n\n- **Success**：通过该项检查。\n- **Failed**：未通过该项检查。","type":"string","example":"Success"},"ErrorMessage":{"description":"预检查未通过的错误提示。\n> 当**CheckStatus**参数返回值为**Failed**时，才会返回本参数。","type":"string","example":"Original error: Access denied for user 'dtstest'@'100.104.***.**' (using password: YES)"},"ItemName":{"description":"预检查项目。\n","type":"string","example":"CHECK_CONN_SRC"},"RepairMethod":{"description":"预检查未通过时对应的修复方法。\n> 当**CheckStatus**参数返回值为**Failed**时，才会返回本参数。","type":"string","example":"CHECK_ERROR_DEST_CONN_REPAIR2"}}}}}}}},"SourceEndpoint":{"description":"源实例的连接信息。","type":"object","properties":{"DatabaseName":{"description":"源实例中待迁移对象所属数据库的名称。","type":"string","example":"dtstestdatabase"},"InstanceId":{"description":"源实例ID。","type":"string","example":"rm-bp1i99e8l7913****"},"IP":{"description":"源实例的连接地址。","type":"string","example":"172.16.88.***"},"InstanceType":{"description":"源实例类型。\n\n- **RDS**：阿里云RDS实例。\n- **ECS**：ECS上的自建数据库。\n- **LocalInstance**：有公网IP的自建数据库。\n- **Express**：通过专线/VPN网关/智能网关接入的自建数据库。\n- **MongoDB**：阿里云MongoDB实例。\n- **POLARDB**：阿里云POLARDB for MySQL集群（该值仅适用于中国站）。","type":"string","example":"RDS"},"Port":{"description":"源实例的数据库服务端口。\n","type":"string","example":"3306"},"UserName":{"description":"源实例的数据库账号。\n","type":"string","example":"dtstest"},"oracleSID":{"description":"Oracle数据库的SID信息。\n> 当源实例的数据库类型为**Oracle**时，才会返回该参数。","type":"string","example":"dtstestdatabase"},"EngineName":{"description":"源实例的数据库类型。","type":"string","example":"MySQL"}}},"StructureInitializationStatus":{"description":"结构迁移执行状态。","type":"object","properties":{"Status":{"description":"结构迁移状态，取值包括：\n\n- **NotStarted**：未启动。\n- **Migrating**：迁移中。\n- **Failed**：迁移失败。\n- **Finished**：迁移完成。","type":"string","example":"Finished"},"Percent":{"description":"结构迁移进度，单位为百分比。\n","type":"string","example":"100"},"ErrorMessage":{"description":"结构迁移失败的错误提示。\n","type":"string","example":"DTS-1020042 Execute sql error sql: ERROR: type \"geometry\" does not exist;"},"Progress":{"description":"已完成结构迁移的表的数量。\n","type":"string","example":"1"}}}}}}},"errorCodes":{"400":[{"errorCode":"Throttling.User","errorMessage":"Request was denied due to user flow control."}],"403":[{"errorCode":"InvalidSecurityToken.Expired","errorMessage":"Specified SecurityToken is expired."}],"500":[{"errorCode":"ServiceUnavailable","errorMessage":"The request has failed due to a temporary failure of the server."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"A032E3B4-929B-48E9-97B9-37587CBF****\\\",\\n  \\\"MigrationJobName\\\": \\\"MySQL迁移\\\",\\n  \\\"MigrationJobStatus\\\": \\\"Migrating\\\",\\n  \\\"ErrCode\\\": \\\"InternalError\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"PayType\\\": \\\"PostPaid\\\",\\n  \\\"ErrMessage\\\": \\\"The request processing has failed due to some unknown error.\\\",\\n  \\\"MigrationObject\\\": \\\"[{\\\\\\\\\\\\\\\"DBName\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"dtstestdata\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"TableIncludes\\\\\\\\\\\\\\\":[{\\\\\\\\\\\\\\\"TableName\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"customer\\\\\\\\\\\\\\\"}]}]\\\",\\n  \\\"MigrationJobId\\\": \\\"dtsz2v12jfo309****\\\",\\n  \\\"TaskId\\\": \\\"z2v12jfo309****\\\",\\n  \\\"MigrationJobClass\\\": \\\"2xlarge\\\",\\n  \\\"DataInitializationStatus\\\": {\\n    \\\"Status\\\": \\\"Finished\\\",\\n    \\\"Percent\\\": \\\"100\\\",\\n    \\\"ErrorMessage\\\": \\\"java.lang.NumberFormatException: For input string: \\\\\\\"\\\\\\\"\\\",\\n    \\\"Progress\\\": \\\"200001\\\"\\n  },\\n  \\\"DataSynchronizationStatus\\\": {\\n    \\\"Status\\\": \\\"Catched\\\",\\n    \\\"Percent\\\": \\\"95\\\",\\n    \\\"Delay\\\": \\\"0\\\",\\n    \\\"ErrorMessage\\\": \\\"任务失败太久 无法恢复\\\",\\n    \\\"Checkpoint\\\": \\\"1612507847\\\"\\n  },\\n  \\\"DestinationEndpoint\\\": {\\n    \\\"DatabaseName\\\": \\\"dtstestdata\\\",\\n    \\\"InstanceId\\\": \\\"rm-bp1zc3iyqe3qw****\\\",\\n    \\\"IP\\\": \\\"172.16.88.***\\\",\\n    \\\"InstanceType\\\": \\\"RDS\\\",\\n    \\\"Port\\\": \\\"3306\\\",\\n    \\\"UserName\\\": \\\"dtstest\\\",\\n    \\\"oracleSID\\\": \\\"testsid\\\",\\n    \\\"EngineName\\\": \\\"MySQL\\\"\\n  },\\n  \\\"MigrationMode\\\": {\\n    \\\"dataInitialization\\\": true,\\n    \\\"dataSynchronization\\\": true,\\n    \\\"structureInitialization\\\": true\\n  },\\n  \\\"PrecheckStatus\\\": {\\n    \\\"Status\\\": \\\"Success\\\",\\n    \\\"Percent\\\": \\\"100\\\",\\n    \\\"Detail\\\": {\\n      \\\"CheckItem\\\": [\\n        {\\n          \\\"CheckStatus\\\": \\\"Success\\\",\\n          \\\"ErrorMessage\\\": \\\"Original error: Access denied for user 'dtstest'@'100.104.***.**' (using password: YES)\\\",\\n          \\\"ItemName\\\": \\\"CHECK_CONN_SRC\\\",\\n          \\\"RepairMethod\\\": \\\"CHECK_ERROR_DEST_CONN_REPAIR2\\\"\\n        }\\n      ]\\n    }\\n  },\\n  \\\"SourceEndpoint\\\": {\\n    \\\"DatabaseName\\\": \\\"dtstestdatabase\\\",\\n    \\\"InstanceId\\\": \\\"rm-bp1i99e8l7913****\\\",\\n    \\\"IP\\\": \\\"172.16.88.***\\\",\\n    \\\"InstanceType\\\": \\\"RDS\\\",\\n    \\\"Port\\\": \\\"3306\\\",\\n    \\\"UserName\\\": \\\"dtstest\\\",\\n    \\\"oracleSID\\\": \\\"dtstestdatabase\\\",\\n    \\\"EngineName\\\": \\\"MySQL\\\"\\n  },\\n  \\\"StructureInitializationStatus\\\": {\\n    \\\"Status\\\": \\\"Finished\\\",\\n    \\\"Percent\\\": \\\"100\\\",\\n    \\\"ErrorMessage\\\": \\\"DTS-1020042 Execute sql error sql: ERROR: type \\\\\\\"geometry\\\\\\\" does not exist;\\\",\\n    \\\"Progress\\\": \\\"1\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeMigrationJobStatusResponse>\\r\\n    <TaskId>z2v12jfo309****</TaskId>\\r\\n    <DataInitializationStatus>\\r\\n        <Status>Finished</Status>\\r\\n        <Progress>200001</Progress>\\r\\n        <Percent>100</Percent>\\r\\n    </DataInitializationStatus>\\r\\n    <RequestId>A032E3B4-929B-48E9-97B9-37587CBF****</RequestId>\\r\\n    <MigrationJobName>MySQL迁移</MigrationJobName>\\r\\n    <PayType>PostPaid</PayType>\\r\\n    <MigrationJobStatus>Migrating</MigrationJobStatus>\\r\\n    <Success>true</Success>\\r\\n    <MigrationMode>\\r\\n        <structureInitialization>true</structureInitialization>\\r\\n        <dataSynchronization>true</dataSynchronization>\\r\\n        <dataInitialization>true</dataInitialization>\\r\\n    </MigrationMode>\\r\\n    <MigrationJobId>dtsz2v12jfo309****</MigrationJobId>\\r\\n    <PrecheckStatus>\\r\\n        <Status>Finished</Status>\\r\\n        <Percent>100</Percent>\\r\\n        <Detail>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_CONN_SRC</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_AUTH_SRC</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_CONN_DEST</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_AUTH_DEST</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_BINLOG_ON</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_BINLOG_MODE</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_BINLOG_ROW_IMAGE</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_SERVER_ID</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_BINLOG_EXIST</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_ENGINE</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_MYSQL_PASSOWRD_FORMAT</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_SRC</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_SQL_MODE</ItemName>\\r\\n            </CheckItem>\\r\\n            <CheckItem>\\r\\n                <CheckStatus>Success</CheckStatus>\\r\\n                <ItemName>CHECK_SAME_USER</ItemName>\\r\\n            </CheckItem>\\r\\n        </Detail>\\r\\n    </PrecheckStatus>\\r\\n    <DestinationEndpoint>\\r\\n        <UserName>dtstest</UserName>\\r\\n        <InstanceId>rm-bp1zc3iyqe3qw****</InstanceId>\\r\\n        <InstanceType>RDS</InstanceType>\\r\\n        <EngineName>MySQL</EngineName>\\r\\n    </DestinationEndpoint>\\r\\n    <MigrationJobClass>2xlarge</MigrationJobClass>\\r\\n    <SourceEndpoint>\\r\\n        <UserName>dtstest</UserName>\\r\\n        <InstanceId>rm-bp1i99e8l7913****</InstanceId>\\r\\n        <InstanceType>RDS</InstanceType>\\r\\n        <EngineName>MySQL</EngineName>\\r\\n    </SourceEndpoint>\\r\\n    <DataSynchronizationStatus>\\r\\n        <Status>Catched</Status>\\r\\n        <Checkpoint>1612507847</Checkpoint>\\r\\n        <Percent>95</Percent>\\r\\n        <Delay>0</Delay>\\r\\n    </DataSynchronizationStatus>\\r\\n    <StructureInitializationStatus>\\r\\n        <Status>Finished</Status>\\r\\n        <Progress>1</Progress>\\r\\n        <Percent>100</Percent>\\r\\n    </StructureInitializationStatus>\\r\\n</DescribeMigrationJobStatusResponse>\",\"errorExample\":\"\"}]","title":"查询数据迁移任务的状态","summary":"老版查询数据迁移任务的状态。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}