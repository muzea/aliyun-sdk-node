{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"MsgId","in":"query","schema":{"description":"需查询的消息的ID，即Message ID。","type":"string","required":true,"docRequired":true,"example":"1E0578FE110F18B4AAC235C05F2*****"}},{"name":"Topic","in":"query","schema":{"description":"需查询的消息的Topic。","type":"string","required":true,"docRequired":true,"example":"test-mq_topic"}},{"name":"InstanceId","in":"query","schema":{"description":"需查询消息所对应的实例ID。","type":"string","required":false,"docRequired":true,"example":"MQ_INST_111111111111_DOxxxxxx"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"公共参数，每个请求的ID都是唯一的，可用于排查和定位问题。","type":"string","example":"A07E3902-B92E-44A6-B6C5-6AA111111****"},"Data":{"description":"查询结果。","type":"object","properties":{"StoreSize":{"description":"消息大小。","type":"integer","format":"int32","example":"407"},"ReconsumeTimes":{"description":"消息重试消费的次数。","type":"integer","format":"int32","example":"1"},"StoreTimestamp":{"description":"被服务端存储的时间戳。","type":"integer","format":"int64","example":"1570761026708"},"InstanceId":{"description":"实例ID。","type":"string","example":"MQ_INST_111111111111_DOxxxxxx"},"MsgId":{"description":"消息ID，即Message ID。","type":"string","example":"1E0578FE110F18B4AAC235C0C8460BA2"},"StoreHost":{"description":"存储该消息的服务器实例。","type":"string","example":"11.220.***.***:10911"},"Topic":{"description":"消息的Topic。","type":"string","example":"test-mq_topic"},"PropertyList":{"type":"object","properties":{"MessageProperty":{"description":"消息属性列表。","type":"array","items":{"type":"object","properties":{"Value":{"description":"消息属性的值。","type":"string","example":"TagA"},"Name":{"description":"消息属性。取值说明如下：\n\n- **TRACE_ON**：是否有消息轨迹\n- **KEYS**：消息的Key属性\n- **TAGS**：消息的Tag属性\n- **INSTANCE_ID**：消息所在的实例的ID\n\n更多概念信息，请参见[名词解释](~~29533~~)。","type":"string","example":"TAGS"}}}}}},"BornTimestamp":{"description":"生成时间戳。","type":"integer","format":"int64","example":"1570761026630"},"BodyCRC":{"description":"消息体CRC校验值。","type":"integer","format":"int32","example":"914112295"},"BornHost":{"description":"生成该消息的客户端实例。","type":"string","example":"42.120.**.**:64646"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"A07E3902-B92E-44A6-B6C5-6AA111111****\\\",\\n  \\\"Data\\\": {\\n    \\\"StoreSize\\\": 407,\\n    \\\"ReconsumeTimes\\\": 1,\\n    \\\"StoreTimestamp\\\": 1570761026708,\\n    \\\"InstanceId\\\": \\\"MQ_INST_111111111111_DOxxxxxx\\\",\\n    \\\"MsgId\\\": \\\"1E0578FE110F18B4AAC235C0C8460BA2\\\",\\n    \\\"StoreHost\\\": \\\"11.220.***.***:10911\\\",\\n    \\\"Topic\\\": \\\"test-mq_topic\\\",\\n    \\\"PropertyList\\\": {\\n      \\\"MessageProperty\\\": [\\n        {\\n          \\\"Value\\\": \\\"TagA\\\",\\n          \\\"Name\\\": \\\"TAGS\\\"\\n        }\\n      ]\\n    },\\n    \\\"BornTimestamp\\\": 1570761026630,\\n    \\\"BodyCRC\\\": 914112295,\\n    \\\"BornHost\\\": \\\"42.120.**.**:64646\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<OnsMessageGetByMsgIdResponse>\\n<Data>\\n    <MsgId>1E0578FE110F18B4AAC235C0C8460BA2</MsgId>\\n    <InstanceId>MQ_INST_111111111111_DOxxxxxx</InstanceId>\\n    <ReconsumeTimes>1</ReconsumeTimes>\\n    <BornHost>42.120.**.**:64646</BornHost>\\n    <BodyCRC>914112295</BodyCRC>\\n    <StoreHost>11.220.***.***:10911</StoreHost>\\n    <StoreTimestamp>1570761026708</StoreTimestamp>\\n    <BornTimestamp>1570761026630</BornTimestamp>\\n    <Topic>test-mq_topic</Topic>\\n    <StoreSize>407</StoreSize>\\n    <PropertyList>\\n        <MessageProperty>\\n            <Name>TAGS</Name>\\n            <Value>TagA</Value>\\n        </MessageProperty>\\n    </PropertyList>\\n</Data>\\n<RequestId>A07E3902-B92E-44A6-B6C5-6AA111111****</RequestId>\\n</OnsMessageGetByMsgIdResponse>\",\"errorExample\":\"\"}]","title":"通过MsgId查询消息","summary":"通过传入 Message ID 查询指定消息的信息以及判断该指定的消息是否曾被消费过。","description":"><notice>阿里云提供的OpenAPI属于管控类API，用于管理和查询阿里云服务的相关资源。仅推荐在管控链路集成，消息收发的核心数据链路中严禁依赖OpenAPI实现，否则可能会导致链路产生风险。></notice>\n\n- 如遇消息消费有问题，则可通过该接口查询具体发送的消息内容来排查问题。\n\n- 根据Message ID查询消息的方式属于精确查询，查询条件需要的Message ID从每次消息发送成功的SendResult中获取，因此业务方必须存储每次发送消息的结果。查询到的信息包括发送时间、存储服务器和消息的Key和Tag等属性。","responseParamsDescription":" ","extraInfo":"## 控制台操作\n除了调用**OnsMessageGetByMsgId**接口，您还可以通过消息队列RocketMQ版控制台查看消息的详细信息。具体操作，请参见[消息查询](~~29540~~)。"}