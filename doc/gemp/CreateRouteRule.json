{"summary":"创建流转规则。","path":"/routeRule/save","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"body","in":"body","style":"json","schema":{"title":"创建规则参数","description":"创建流转规则参数","type":"object","properties":{"ruleName":{"title":"规则名称","description":"流转规则名字","type":"string","required":true,"example":"规则名称"},"enableStatus":{"title":"启用状态","description":"启用状态","type":"string","required":false,"example":"启用禁用状态"},"relatedServiceId":{"title":"关联服务ID","description":"关联服务ID","type":"integer","format":"int64","required":true,"example":"100"},"routeType":{"title":"路由类型：INCIDENT 触发事件 ALERT仅触发报警","description":"路由类型：INCIDENT 触发事件 ALERT 仅触发报警","type":"string","required":true,"example":"INCIDENT"},"incidentLevel":{"title":"事件级别 P1 P2 P3 P4","description":"事件级别 P1 P2 P3 P4","type":"string","required":true,"example":"P1"},"assignObjectId":{"title":"事件分派对象ID（服务组ID 或用户ID）","description":"事件分派对象ID（服务组ID 或用户ID）","type":"integer","format":"int64","required":true,"example":"65"},"assignObjectType":{"title":"事件分派对象类型 SERVICEGROUP服务组 USER 单个用户","description":" 事件分派对象类型 SERVICEGROUP 服务组  USER 单个用户","type":"string","required":true,"example":"SERVICEGROUP"},"effection":{"title":"影响程度 LOW-一般 HIGH-严重","description":"影响程度 LOW-一般 HIGH-严重","type":"string","required":true,"example":"LOW"},"timeWindow":{"title":"时间窗口","description":"时间窗口","type":"integer","format":"int64","required":true,"example":"2"},"matchCount":{"title":"命中次数","description":"命中次数","type":"integer","format":"int32","required":true,"example":"3"},"timeWindowUnit":{"title":"时间窗口单位 MINUTE  分钟  SECOND 秒","description":"时间窗口单位\nMINUTE 分钟\n\u0000SECOND  秒","type":"string","required":true,"example":"MINUTE"},"routeChildRules":{"title":"子规则","description":"子规则数组","type":"array","items":{"description":"子规则","type":"object","properties":{"monitorSourceId":{"title":"监控源ID","description":"监控源ID","type":"integer","format":"int64","required":true,"example":"1"},"conditions":{"title":"条件","description":"匹配条件列表","type":"array","items":{"description":"条件","type":"object","properties":{"key":{"title":"字段名称","description":"匹配key","type":"string","required":true,"example":"payload.summary"},"value":{"title":"字段值","description":"匹配value","type":"string","required":true,"example":"123"},"operationSymbol":{"title":"操作符号：notContain 不包含；contain 包含；equals 等于；notEquals 不等于；","description":"操作符","type":"string","required":true,"example":"equals"}},"required":true},"required":true},"childConditionRelation":{"title":"0-与，1-或","description":"0-与，1-或","type":"integer","format":"int64","required":false,"example":"0"},"problemLevel":{"title":"故障级别","description":"故障级别 P1 P2 P3 P4","type":"string","required":false,"example":"P1"}},"required":true},"required":true},"notifyChannels":{"title":"通知渠道。 SMS 短信  EMAIL 邮件  PHONE电话  WEIXIN_GROUP 企微群 DING_GROUP钉钉群","description":"通知渠道列表","type":"array","items":{"description":"通知渠道 SMS 短信 ，PHONE 语音，EMAIL 邮件，WEBHOOK 群通知","type":"string","required":true,"example":"[SMS,PHONE]"},"required":true},"clientToken":{"title":"幂等号","description":"幂等号","type":"string","required":false,"example":"C4BE3837-1A13-413B-A225-2C88188E8A43"},"childRuleRelation":{"title":"子规则关系AND,OR","description":"子规则关系AND，OR\n","type":"string","required":true,"example":"AND"},"problemLevelGroup":{"description":"故障等级组","type":"object","required":false,"additionalProperties":{"type":"object","properties":{"childRuleRelation":{"title":"子规则关系，0与，1或","description":"子规则关系，0与，1或","type":"integer","format":"int32","required":false,"example":"1"},"matchCount":{"title":"抑制：命中次数","description":"抑制：命中次数","type":"integer","format":"int64","required":false,"example":"1"},"timeWindow":{"title":"抑制：时间窗口","description":"抑制：时间窗口","type":"integer","format":"int64","required":false,"example":"5"},"timeWindowUnit":{"title":"抑制：时间窗口单位","description":"抑制：时间窗口单位","type":"string","required":false,"example":"M"},"enableUpgrade":{"title":"升级：是否升级","description":"升级：是否升级","type":"boolean","required":false,"example":"false"},"upgradeTimeWindow":{"title":"升级：时间窗口","description":"升级：时间窗口","type":"integer","format":"int64","required":false,"example":"5"},"upgradeTimeWindowUnit":{"title":"升级：时间窗口单位","description":"升级：时间窗口单位","type":"string","required":false,"example":"M"}}}},"coverageProblemLevels":{"title":"故障等级覆盖","description":"故障等级覆盖","type":"array","items":{"description":"coverage类型","type":"string","required":false,"example":"P1"},"required":false},"problemEffectionServices":{"title":"故障影响服务","description":"故障影响服务","type":"array","items":{"description":"影响服务id","type":"integer","format":"int64","required":false,"example":"1"},"required":false},"convergenceFields":{"title":"收敛字段集合","description":"收敛字段集合","type":"array","items":{"description":"收敛字段集合","type":"string","required":false,"example":"app"},"required":false},"convergenceType":{"title":"收敛类型（0：流转规则收敛，1：字段收敛）","description":"收敛类型（0：流转规则收敛，1：字段收敛）","type":"integer","format":"int32","required":false,"example":"0"}},"required":false}}],"responses":{"200":{"schema":{"title":"响应参数","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"请求","description":"请求","type":"string","example":"请求ID"},"data":{"title":"结果","description":"返回结果","type":"object","properties":{"routeRuleId":{"title":"规则ID","description":"规则ID","type":"integer","format":"int64","example":"1000"}},"example":"65"}}}}},"errorCodes":{"400":[{"errorCode":"AddRouteRuleFail","errorMessage":"Failed to add the rule."},{"errorCode":"RouteRuleNameAlreadyExisted","errorMessage":"The rule name already exists."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"requestId\\\": \\\"请求ID\\\",\\n  \\\"data\\\": {\\n    \\\"routeRuleId\\\": 1000\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateRouteRuleResponse>\\n    <requestId>请求ID</requestId>\\n    <data>\\n        <routeRuleId>1000</routeRuleId>\\n    </data>\\n</CreateRouteRuleResponse>\",\"errorExample\":\"\"}]","title":"创建流转规则"}