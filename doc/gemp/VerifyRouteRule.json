{"summary":"验证流转规则。","path":"/routeRule/verify","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"parameters":[{"name":"body","in":"body","style":"json","schema":{"title":"A short description of struct","description":"A short description of struct","type":"object","properties":{"routeRuleId":{"title":"规则id","description":"规则id","type":"integer","format":"int64","required":false,"example":"1111"},"testSourceEvents":{"title":"测试告警","description":"测试告警内容","type":"array","items":{"description":"测试告警内容","type":"object","properties":{"monitorSourceId":{"title":"监控告警源ID","description":"监控源源ID","type":"integer","format":"int64","required":false,"example":"1"},"monitorSourceName":{"title":"监控告警源名称","description":"监控源名称","type":"string","required":false,"example":"zabbix"},"eventTime":{"title":"告警上报时间","description":"告警时间","type":"string","required":false,"example":"2021-09-08 13:00:00"},"eventJson":{"title":"告警内容","description":"告警JSON","type":"string","required":false,"example":"{}"}},"required":false,"example":"{}"},"required":false}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"Id of the request","description":"Id of the request","type":"string","example":"xxxxxx"},"data":{"title":"验证结果","description":"验证结果","type":"object","properties":{"isValidRule":{"title":"验证是否成功","description":"验证是否成功","type":"boolean","example":"true"},"routeType":{"title":"事件或者报警","description":"事件或者报警","type":"string","example":"INCIDENT、ALERT"},"notifySubscriptionNames":{"title":"订阅名称","description":"订阅名称","type":"array","items":{"description":"通知订阅","type":"object","properties":{"subscriptionId":{"title":"订阅ID","description":"订阅ID","type":"integer","format":"int64","example":"111111"},"title":{"title":"订阅名称","description":"订阅名称","type":"string","example":"订阅名称"}},"example":"我的订阅"}},"escalationPlans":{"title":"升级策略名称","description":"升级策略名称","type":"array","items":{"description":"升级计划","type":"object","properties":{"escalationPlanName":{"title":"升级计划名称","description":"升级计划名称","type":"string","example":"升级计划1"},"escalationPlanId":{"title":"升级计划ID","description":"升级计划ID","type":"integer","format":"int64","example":"111111"}}}},"routeRuleFailReason":{"title":"流转规则验证失败的原因","description":"流转规则验证失败的原因","type":"array","items":{"description":"流转规则验证失败的原因","type":"string","example":"alertName不匹配"}},"monitorSourceIds":{"title":"验证失败监控源ID","description":"验证失败监控源ID","type":"array","items":{"description":"1000","type":"integer","format":"int64","example":"验证失败监控源ID"}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"requestId\\\": \\\"xxxxxx\\\",\\n  \\\"data\\\": {\\n    \\\"isValidRule\\\": true,\\n    \\\"routeType\\\": \\\"INCIDENT、ALERT\\\",\\n    \\\"notifySubscriptionNames\\\": [\\n      {\\n        \\\"subscriptionId\\\": 111111,\\n        \\\"title\\\": \\\"订阅名称\\\"\\n      }\\n    ],\\n    \\\"escalationPlans\\\": [\\n      {\\n        \\\"escalationPlanName\\\": \\\"升级计划1\\\",\\n        \\\"escalationPlanId\\\": 111111\\n      }\\n    ],\\n    \\\"routeRuleFailReason\\\": [\\n      \\\"alertName不匹配\\\"\\n    ],\\n    \\\"monitorSourceIds\\\": [\\n      0\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<VerifyRouteRuleResponse>\\n    <requestId>xxxxxx</requestId>\\n    <data>\\n        <isValidRule>true</isValidRule>\\n        <routeType>INCIDENT、ALERT</routeType>\\n        <notifySubscriptionNames>我的订阅</notifySubscriptionNames>\\n        <escalationPlanNames>升级策略1</escalationPlanNames>\\n        <routeRuleFailReason>alertName不匹配</routeRuleFailReason>\\n    </data>\\n</VerifyRouteRuleResponse>\",\"errorExample\":\"\"}]","title":"验证流转规则","requestParamsDescription":"{\n    \"testSourceEvents\": [\n        {\n            \"eventJson\": \"{\\n\\t\\\"summary\\\": \\\"Cpu_util at 85.16% on machine 112.11.123.11\\\",\\n\\t\\\"priority\\\": \\\"P1\\\",\\n\\t\\\"name\\\": \\\"Cpu 使用超额预警\\\",\\n\\t\\\"timestamp\\\": \\\"2021-07-17 T08:42:58.315+0000\\\",\\n\\t\\\"region\\\": \\\"shanghai\\\",\\n\\t\\\"source\\\": \\\"112.11.123.11\\\",\\n\\t\\\"application\\\": \\\"zheda/mozi\\\",\\n\\t\\\"group\\\": \\\"线上\\\",\\n\\t\\\"class\\\": \\\"Load\\\",\\n\\t\\\"details\\\": {\\n\\t\\t\\\"freeSpace\\\": \\\"1%\\\",\\n\\t\\t\\\"pingTime\\\": \\\"1500ms\\\",\\n\\t\\t\\\"loadAvg\\\": \\\"0.75\\\"\\n\\t},\\n\\t\\\"tags\\\": \\\"{}\\\"\\n}\",\n            \"eventTime\": \"2021-12-17 05:13:17\",\n            \"monitorSourceId\": 23463,\n            \"monitorSourceName\": \"标准集成\"\n        }\n    ],\n    \"routeRuleId\": \"160034020\",\n    \"clientToken\": \"7e070585-ee11-450e-8827-db353faa3419\"\n}","responseParamsDescription":"{\n    \"requestId\": \"gdgsdgsggsdg\",\n    \"success\": true,\n    \"errCode\": 200,\n    \"errMessage\": null,\n    \"data\": {\n        \"routeRuleId\": null,\n        \"isValidRule\": false,\n        \"routeType\": \"INCIDENT\",\n        \"routeRuleName\": null,\n        \"assignToWhoName\": null,\n        \"notifySubscriptions\": [\n            {\n                \"subscriptionId\": 80002030,\n                \"title\": \"【测试，勿动】全部服务\"\n            },\n            {\n                \"subscriptionId\": 100000010,\n                \"title\": \"撒发色分\"\n            },\n            {\n                \"subscriptionId\": 100000030,\n                \"title\": \"ceshi2190830\"\n            },\n            {\n                \"subscriptionId\": 100000040,\n                \"title\": \"test121\"\n            },\n            {\n                \"subscriptionId\": 100000070,\n                \"title\": \"是\"\n            },\n            {\n                \"subscriptionId\": 110000000,\n                \"title\": \"全部服务-个人-优先级高\"\n            },\n            {\n                \"subscriptionId\": 110000010,\n                \"title\": \"111\"\n            },\n            {\n                \"subscriptionId\": 110000030,\n                \"title\": \"老数据兼容测试\"\n            },\n            {\n                \"subscriptionId\": 110000090,\n                \"title\": \"测试优化功能\"\n            },\n            {\n                \"subscriptionId\": 120000000,\n                \"title\": \"经1\"\n            },\n            {\n                \"subscriptionId\": 120000030,\n                \"title\": \"三级级联--全部服务\"\n            },\n            {\n                \"subscriptionId\": 120000070,\n                \"title\": \"341\"\n            },\n            {\n                \"subscriptionId\": 130000000,\n                \"title\": \"全部服务-服务组\"\n            },\n            {\n                \"subscriptionId\": 130000010,\n                \"title\": \"222\"\n            },\n            {\n                \"subscriptionId\": 130000030,\n                \"title\": \"ceshi0903\"\n            },\n            {\n                \"subscriptionId\": 130000060,\n                \"title\": \"niidfads\"\n            },\n            {\n                \"subscriptionId\": 130000070,\n                \"title\": \"e232\"\n            },\n            {\n                \"subscriptionId\": 130000080,\n                \"title\": \"test0001\"\n            },\n            {\n                \"subscriptionId\": 140000000,\n                \"title\": \"边界值测试\"\n            },\n            {\n                \"subscriptionId\": 140000010,\n                \"title\": \"通知订阅啊\"\n            },\n            {\n                \"subscriptionId\": 140000020,\n                \"title\": \"【不要乱动配置！！！】【新】通知订阅-全部\"\n            },\n            {\n                \"subscriptionId\": 140000070,\n                \"title\": \"ceshiyixzia\"\n            },\n            {\n                \"subscriptionId\": 150000000,\n                \"title\": \"24321\"\n            },\n            {\n                \"subscriptionId\": 150000030,\n                \"title\": \"dscs\"\n            },\n            {\n                \"subscriptionId\": 150000070,\n                \"title\": \"史蒂夫v\"\n            },\n            {\n                \"subscriptionId\": 150000090,\n                \"title\": \"121212\"\n            },\n            {\n                \"subscriptionId\": 160000010,\n                \"title\": \"3333\"\n            },\n            {\n                \"subscriptionId\": 160000030,\n                \"title\": \"wj测试订阅\"\n            },\n            {\n                \"subscriptionId\": 160000060,\n                \"title\": \"cdscds\"\n            },\n            {\n                \"subscriptionId\": 160000070,\n                \"title\": \"ceshisd\"\n            },\n            {\n                \"subscriptionId\": 170000000,\n                \"title\": \"服务--个人\"\n            },\n            {\n                \"subscriptionId\": 170000010,\n                \"title\": \"4444444\"\n            },\n            {\n                \"subscriptionId\": 170000020,\n                \"title\": \"测试11\"\n            },\n            {\n                \"subscriptionId\": 170000030,\n                \"title\": \"这是一个测试0927\"\n            },\n            {\n                \"subscriptionId\": 170000060,\n                \"title\": \"妖股仁东控股的背后操盘方景华，近日收到证监会的500万罚单。相关处罚决定书显示，这名昔日牛散在仁东控股上巨亏了近27亿，还向证监\"\n            },\n            {\n                \"subscriptionId\": 170000070,\n                \"title\": \"吃\"\n            },\n            {\n                \"subscriptionId\": 170000090,\n                \"title\": \"发发发\"\n            },\n            {\n                \"subscriptionId\": 180000000,\n                \"title\": \"aa1\"\n            },\n            {\n                \"subscriptionId\": 180000010,\n                \"title\": \"3\"\n            },\n            {\n                \"subscriptionId\": 180000030,\n                \"title\": \"sdds\"\n            },\n            {\n                \"subscriptionId\": 180000040,\n                \"title\": \"4fy\"\n            },\n            {\n                \"subscriptionId\": 180000050,\n                \"title\": \"cadscds\"\n            },\n            {\n                \"subscriptionId\": 180000060,\n                \"title\": \"sdc\"\n            },\n            {\n                \"subscriptionId\": 180000090,\n                \"title\": \"速度\"\n            },\n            {\n                \"subscriptionId\": 190000040,\n                \"title\": \"时间自定义配置测试\"\n            },\n            {\n                \"subscriptionId\": 190000080,\n                \"title\": \"老数据兼容\"\n            },\n            {\n                \"subscriptionId\": 190000090,\n                \"title\": \"当钉测试\"\n            }\n        ],\n        \"escalationPlans\": [],\n        \"routeRuleFailReason\": [\n            \"无告警内容匹配 Zabbix这条规则\"\n        ],\n        \"monitorSourceIds\": [\n            23465\n        ]\n    }\n}"}