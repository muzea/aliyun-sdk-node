{"summary":"获取故障通知预览。","path":"/problem/preview","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"body","in":"body","style":"json","schema":{"description":"body","type":"object","properties":{"problemId":{"title":"故障id","description":"故障id","type":"integer","format":"int64","required":false,"example":"12312"},"problemNotifyType":{"title":"通告类型","description":"通告类型 PROBLEM_NOTIFY：故障通告 PROBLEM_UPDATE：故障更新 PROBLEM_UPGRADE：故障升级 PROBLEM_DEGRADE：故障降级 PROBLEM_RECOVER：故障恢复 PROBLEM_REISSUE：\n故障补发 PROBLEM_CANCEL：故障取消","type":"string","required":false,"example":"PROBLEM_NOTIFY"},"problemLevel":{"title":"故障等级","description":"故障等级","type":"string","required":false,"example":"P2"},"effectServiceIds":{"title":"影响服务","description":"影响服务","type":"array","items":{"description":"影响服务ID","type":"integer","format":"int64","required":false,"example":"1231"},"required":false},"relatedServiceId":{"title":"所属服务","description":"关联服务Id","type":"integer","format":"int64","required":false,"example":"21312"},"incidentId":{"title":"事件Id","description":"事件id","type":"integer","format":"int64","required":false,"example":"213123"},"serviceGroupIds":{"title":"应急协同组","description":"协同组Id","type":"array","items":{"description":"服务组Id","type":"integer","format":"int64","required":false,"example":"12313"},"required":false},"clientToken":{"title":"幂等校验token","description":"幂等Token","type":"string","required":false,"example":"4361a0e1-6747-4834-96ce-0c4840f13812"}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"requestId","description":"requestId","type":"string","example":"4361a0e1-6747-4834-96ce-0c2840fd3812"},"data":{"description":"data","type":"object","properties":{"problem":{"description":"object","type":"object","properties":{"problemName":{"title":"故障名称","description":"故障名称","type":"string","example":"故障名称"},"problemStatus":{"title":"故障状态 1 处理中 2已恢复 3复盘中 4已复盘 5已取消","description":"HANDLING\t故障状态 \nHANDLING    处理中 RECOVERED  已恢复 \nREPLAYING   复盘中 \nREPLAYED     已复盘 CANCEL        已取消","type":"string","example":"HANDLING"},"problemLevel":{"title":"故障等级 1=P1 2=P2 3=P3 4=P4","description":"故障等级 1=P1 2=P2 3=P3 4=P4","type":"string","example":"P2"},"discoverTime":{"title":"发现时间","description":"发现时间","type":"string","example":"2021-02-21 00:00:00"},"recoveryTime":{"title":"恢复时间","description":"恢复时间","type":"string","example":"2021-02-21 00:00:00"},"serviceName":{"title":"关联服务 名称","description":"关联服务名称","type":"string","example":"服务A"},"progressSummary":{"title":"进展摘要","description":"进展摘要","type":"string","example":"摘要123"},"preliminaryReason":{"title":"初步原因","description":"初步原因","type":"string","example":"原因A"},"mainHandlerName":{"title":"主要处理人","description":"主要处理人","type":"string","example":"小明"},"mainHandlerId":{"title":"主要处理人Id","description":"主要处理人Id","type":"string","example":"231"},"isManual":{"title":"是否手动","description":"是否手动","type":"boolean","example":"true"},"isUpgrade":{"title":"是否升级","description":"是否升级","type":"boolean","example":"true"},"problemId":{"title":"故障Id","description":"故障Id","type":"integer","format":"int64","example":"123123"},"relatedServiceId":{"title":"关联服务ID","description":"关联服务ID","type":"integer","format":"int64","example":"213123"},"createTime":{"title":"创建时间","description":"创建时间","type":"string","example":"2021-02-21 00:00:00"},"progressSummaryRichTextId":{"title":"富文本id","description":"富文本id","type":"integer","format":"int64","example":"12312"},"coordinationGroups":{"title":"应急协同组","description":"应急协同组","type":"array","items":{"type":"object","properties":{"serviceGroupName":{"title":"服务组名称","description":"服务组名称","type":"string","example":"服务组A"},"serviceGroupId":{"title":"服务Id","description":"服务Id","type":"integer","format":"int64","example":"1231"},"serviceGroupDescription":{"title":"服务组Maison","description":"服务组Maison","type":"string","example":"服务组描述"}}}},"effectionServices":{"title":"影响服务","description":"影响服务","type":"array","items":{"type":"object","properties":{"serviceName":{"title":"影响服务名称","description":"影响服务名称","type":"string","example":"服务B"},"serviceId":{"title":"影响服务Id","description":"影响服务Id","type":"integer","format":"int64","example":"1231"}}}}}},"voice":{"title":"语音","description":"语音","type":"object","properties":{"count":{"title":"数量","description":"数量","type":"integer","format":"int64","example":"12"},"users":{"description":"用户组","type":"array","items":{"description":"用户","type":"object","properties":{"username":{"title":"用户","description":"用户","type":"string","example":"用户名称"}}}}}},"mail":{"title":"邮箱","description":"邮箱","type":"object","properties":{"count":{"title":"数量","description":"数量","type":"integer","format":"int64","example":"123"},"users":{"description":"用户组","type":"array","items":{"description":"用户","type":"object","properties":{"username":{"title":"用户名称","description":"用户名称","type":"string","example":"用户名称"}}}}}},"sms":{"title":"短信","description":"短信","type":"object","properties":{"count":{"title":"数量","description":"数量","type":"integer","format":"int64","example":"12"},"users":{"description":"用户组","type":"array","items":{"description":"用户","type":"object","properties":{"username":{"title":"用户名称","description":"用户名称","type":"string","example":"用户名称"}}}}}},"webhook":{"title":"webhook","description":"webhook","type":"object","properties":{"count":{"title":"数量","description":"数量","type":"integer","format":"int64","example":"32"},"serviceGroups":{"description":"服务组","type":"array","items":{"description":"object","type":"object","properties":{"serviceName":{"title":"服务名称","description":"服务名称","type":"string","example":"服务名称"}}}}}},"upBeforeData":{"title":"升级前数据","description":"升级前数据","type":"string","example":"最新升级前等级"},"upAfterData":{"title":"升级后数据","description":"升级后数据","type":"string","example":"最新升级后等级"},"deBeforeData":{"title":"降级前数据","description":"降级前数据","type":"string","example":"最新降级前等级"},"deAfterData":{"title":"降级后数据","description":"降级后数据","type":"string","example":"最新降级后等级"}}}}}}},"errorCodes":{"404":[{"errorCode":"ProblemNotExisted","errorMessage":"The problem does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"requestId\\\": \\\"4361a0e1-6747-4834-96ce-0c2840fd3812\\\",\\n  \\\"data\\\": {\\n    \\\"problem\\\": {\\n      \\\"problemName\\\": \\\"故障名称\\\",\\n      \\\"problemStatus\\\": \\\"HANDLING\\\",\\n      \\\"problemLevel\\\": \\\"P2\\\",\\n      \\\"discoverTime\\\": \\\"2021-02-21 00:00:00\\\",\\n      \\\"recoveryTime\\\": \\\"2021-02-21 00:00:00\\\",\\n      \\\"serviceName\\\": \\\"服务A\\\",\\n      \\\"progressSummary\\\": \\\"摘要123\\\",\\n      \\\"preliminaryReason\\\": \\\"原因A\\\",\\n      \\\"mainHandlerName\\\": \\\"小明\\\",\\n      \\\"mainHandlerId\\\": \\\"231\\\",\\n      \\\"isManual\\\": true,\\n      \\\"isUpgrade\\\": true,\\n      \\\"problemId\\\": 123123,\\n      \\\"relatedServiceId\\\": 213123,\\n      \\\"createTime\\\": \\\"2021-02-21 00:00:00\\\",\\n      \\\"progressSummaryRichTextId\\\": 12312,\\n      \\\"coordinationGroups\\\": [\\n        {\\n          \\\"serviceGroupName\\\": \\\"服务组A\\\",\\n          \\\"serviceGroupId\\\": 1231,\\n          \\\"serviceGroupDescription\\\": \\\"服务组描述\\\"\\n        }\\n      ],\\n      \\\"effectionServices\\\": [\\n        {\\n          \\\"serviceName\\\": \\\"服务B\\\",\\n          \\\"serviceId\\\": 1231\\n        }\\n      ]\\n    },\\n    \\\"voice\\\": {\\n      \\\"count\\\": 12,\\n      \\\"users\\\": [\\n        {\\n          \\\"username\\\": \\\"用户名称\\\"\\n        }\\n      ]\\n    },\\n    \\\"mail\\\": {\\n      \\\"count\\\": 123,\\n      \\\"users\\\": [\\n        {\\n          \\\"username\\\": \\\"用户名称\\\"\\n        }\\n      ]\\n    },\\n    \\\"sms\\\": {\\n      \\\"count\\\": 12,\\n      \\\"users\\\": [\\n        {\\n          \\\"username\\\": \\\"用户名称\\\"\\n        }\\n      ]\\n    },\\n    \\\"webhook\\\": {\\n      \\\"count\\\": 32,\\n      \\\"serviceGroups\\\": [\\n        {\\n          \\\"serviceName\\\": \\\"服务名称\\\"\\n        }\\n      ]\\n    },\\n    \\\"upBeforeData\\\": \\\"最新升级前等级\\\",\\n    \\\"upAfterData\\\": \\\"最新升级后等级\\\",\\n    \\\"deBeforeData\\\": \\\"最新降级前等级\\\",\\n    \\\"deAfterData\\\": \\\"最新降级后等级\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetProblemPreviewResponse>\\n    <requestId>4361a0e1-6747-4834-96ce-0c2840fd3812</requestId>\\n    <data>\\n        <problem>\\n            <problemName>故障名称</problemName>\\n            <problemStatus>HANDLING</problemStatus>\\n            <problemLevel>P2</problemLevel>\\n            <discoverTime>2021-02-21 00:00:00</discoverTime>\\n            <recoveryTime>2021-02-21 00:00:00</recoveryTime>\\n            <serviceName>服务A</serviceName>\\n            <progressSummary>摘要123</progressSummary>\\n            <preliminaryReason>原因A</preliminaryReason>\\n            <mainHandlerName>小明</mainHandlerName>\\n            <mainHandlerId>231</mainHandlerId>\\n            <isManual>true</isManual>\\n            <isUpgrade>true</isUpgrade>\\n            <problemId>123123</problemId>\\n            <relatedServiceId>213123</relatedServiceId>\\n            <createTime>2021-02-21 00:00:00</createTime>\\n            <coordinationGroups>\\n                <serviceGroupName>服务组A</serviceGroupName>\\n                <serviceGroupId>1231</serviceGroupId>\\n                <serviceGroupDescription>服务组描述</serviceGroupDescription>\\n            </coordinationGroups>\\n            <effectionServices>\\n                <serviceName>服务B</serviceName>\\n                <serviceId>1231</serviceId>\\n            </effectionServices>\\n        </problem>\\n        <voice>\\n            <count>12</count>\\n            <users>\\n                <username>用户名称</username>\\n            </users>\\n        </voice>\\n        <mail>\\n            <count>123</count>\\n            <users>\\n                <username>用户名称</username>\\n            </users>\\n        </mail>\\n        <sms>\\n            <count>12</count>\\n            <users>\\n                <username>用户名称</username>\\n            </users>\\n        </sms>\\n        <webhook>\\n            <count>32</count>\\n            <serviceGroups>\\n                <serviceName>服务名称</serviceName>\\n            </serviceGroups>\\n        </webhook>\\n        <upBeforeData>最新升级前等级</upBeforeData>\\n        <upAfterData>最新升级后等级</upAfterData>\\n        <deBeforeData>最新降级前等级</deBeforeData>\\n        <deAfterData>最新降级后等级</deAfterData>\\n    </data>\\n</GetProblemPreviewResponse>\",\"errorExample\":\"\"}]","title":"获取故障通知预览"}