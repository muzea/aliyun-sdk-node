{"summary":"查询监听及其转发规则的健康检查状态。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"ListenerId","in":"query","schema":{"title":"监听Id","description":"实例的监听ID。","type":"string","required":true,"example":"lsn-o4u54y73wq7b******"}},{"name":"IncludeRule","in":"query","schema":{"title":"是否包含转发规则健康检查结果","description":"是否包含转发规则的检查结果。取值：\n\n- **true**：是。\n- **false**（默认值）：否。","type":"boolean","required":false,"example":"true"}},{"name":"NextToken","in":"query","schema":{"description":"是否拥有下一次查询的令牌（Token）。取值：\n- 第一次查询和没有下一次查询时，均无需填写。\n- 如果有下一次查询，取值为上一次API调用返回的**NextToken**值。","type":"string","required":false,"example":"FFmyTO70tTpLG6I3FmYAXGKPd****"}},{"name":"MaxResults","in":"query","schema":{"description":"分批次查询时每次显示的最大条目数。取值范围：**1**~**30**，默认值为**20**。","type":"integer","format":"int64","required":false,"example":"20"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"查询监听及其相应配置的转发规则的健康检查状态。","type":"object","properties":{"ListenerHealthStatus":{"title":"监听健康检查结果","description":"监听的服务器组健康检查状态列表。","type":"array","items":{"description":"监听的服务器组健康检查状态结构。","type":"object","properties":{"ListenerId":{"title":"监听Id","description":"实例的监听ID。","type":"string","example":"lsn-o4u54y73wq7b******"},"ListenerPort":{"title":"监听的端口号","description":"监听的端口号。","type":"integer","format":"int32","example":"80"},"ListenerProtocol":{"title":"监听的协议","description":"监听的协议。","type":"string","example":"http"},"ServerGroupInfos":{"title":"服务器组健康检查结果","description":"服务器组信息。","type":"array","items":{"description":"服务器组信息。","type":"object","properties":{"HealthCheckEnabled":{"title":"健康检查开启/关闭","description":"健康检查开启状态。取值： **on**，表示开启健康检查。","type":"string","example":"on"},"NonNormalServers":{"title":"处于非正常状态的后端服务器","description":"非正常状态的后端服务器列表。","type":"array","items":{"description":"非正常状态的后端服务器列表。","type":"object","properties":{"Port":{"title":"后端服务器端口","description":"后端服务器端口。","type":"integer","format":"int32","example":"90"},"Reason":{"title":"status为非正常状态时的详细异常原因","description":"非正常状态的原因。","type":"object","properties":{"ActualResponse":{"title":"后端实际的返回码信息","description":"后端服务器实际的返回码信息，例如，**302**。\n\n> `ReasonCode`为**RESPONSE_MISMATCH**才该返回值。","type":"string","example":"302"},"ExpectedResponse":{"title":"用户预期的后端返回码信息","description":"用户预期的后端服务器返回码信息。\n\n取值：**HTTP\\_2xx**、**HTTP\\_3xx**、**HTTP\\_4xx**和**HTTP\\_5xx**。多个返回码之间用半角逗号（,）分隔。\n\n> **ReasonCode**为**RESPONSE_MISMATCH**才返回该值。","type":"string","example":"HTTP_2xx"},"ReasonCode":{"title":"失败reasonCode","description":"**Status**为异常状态时的详细原因，目前仅HTTP和HTTPS的监听与转发规则支持查看异常状态原因：\n- **CONNECT_TIMEOUT**：负载均衡健康检查时向后端服务器建立连接超时。\n\n- **CONNECT_FAILED**：负载均衡健康检查时向后端服务器建立连接失败。\n\n- **RECV_RESPONSE_FAILED**：负载均衡健康检查时从后端服务器接收响应失败。\n\n- **RECV_RESPONSE_TIMEOUT**：负载均衡健康检查时从后端服务器接收响应超时。\n\n- **SEND_REQUEST_FAILED**：负载均衡健康检查时向后端服务器发送请求失败。\n\n- **SEND_REQUEST_TIMEOUT**：负载均衡健康检查时向后端服务器发送请求超时。\n\n- **RESPONSE_FORMAT_ERROR**：负载均衡健康检查时从后端服务器接收响应格式错误。\n\n- **RESPONSE_MISMATCH**：负载均衡健康检查时从后端服务器接收的响应码与预期配置返回码不一致。","type":"string","example":"RESPONSE_MISMATCH"}}},"ServerId":{"title":"后端服务器id","description":"后端服务器ID。","type":"string","example":"i-uf62h8v******"},"ServerIp":{"title":"后端服务器Ip","description":"后端服务器IP。","type":"string","example":"192.168.8.10"},"Status":{"title":"健康检查状态","description":"健康检查状态。取值：\n\n- **Initial**：初始化中，表示负载均衡实例配置了健康检查，但查不到数据。\n\n- **Unhealthy**：异常，表示连续上报不健康的状态。\n\n- **Unused**：未使用，表示后端服务器的权重为0。\n\n- **Unavailable**：未开启，表示未开启健康检查。\n","type":"string","example":"Initial"}}}},"ServerGroupId":{"title":"服务器组ID","description":"关联的服务器组ID。","type":"string","example":"sgp-8ilqs4axp6******"},"ActionType":{"title":"服务器组使用类型","description":"服务器组使用类型。","type":"string","example":"TrafficMirror"}}}}}}},"RequestId":{"title":"请求Id","description":"请求ID。","type":"string","example":"CEF72CEB-54B6-4AE8-B225-F876F******"},"RuleHealthStatus":{"title":"转发规则健康检查结果","description":"转发规则的健康状态列表。","type":"array","items":{"description":"转发规则的健康状态结构。","type":"object","properties":{"RuleId":{"title":"转发规则ID","description":"转发规则ID。","type":"string","example":"rule-hp34s2h0xx1ht4nwo****"},"ServerGroupInfos":{"title":"服务器组健康检查结果","description":"服务器组列表。","type":"array","items":{"description":"服务器组结构。","type":"object","properties":{"HealthCheckEnabled":{"title":"健康检查开启/关闭","description":"健康检查开启状态。取值： **on**，表示开启健康检查。","type":"string","example":"on"},"NonNormalServers":{"title":"处于非正常状态的后端服务器","description":"非正常状态的后端服务器列表。","type":"array","items":{"description":"非正常状态的后端服务器列表。","type":"object","properties":{"Port":{"title":"后端服务器端口","description":"后端服务器端口。","type":"integer","format":"int32","example":"90"},"Reason":{"title":"status为非正常状态时的详细异常原因","description":"非正常状态的原因。","type":"object","properties":{"ActualResponse":{"title":"后端实际的返回码信息","description":"后端服务器实际的返回码信息，例如，**302**。\n\n> **ReasonCode**为**RESPONSE_MISMATCH**才有值。","type":"string","example":"302"},"ExpectedResponse":{"title":"用户预期的后端返回码信息","description":"用户预期的后端服务器返回码信息。\n\n取值：**HTTP\\_2xx**、**HTTP\\_3xx**、**HTTP\\_4xx**和**HTTP\\_5xx**。多个返回码之间用半角逗号（,）分隔。\n\n> **ReasonCode**为**RESPONSE_MISMATCH**才有值。","type":"string","example":"HTTP_2xx"},"ReasonCode":{"title":"失败reasonCode","description":"**Status**为异常状态时的详细原因，目前仅HTTP和HTTPS的监听与转发规则支持查看异常状态原因：\n- **CONNECT_TIMEOUT**：负载均衡健康检查时向后端服务器建立连接超时。\n\n- **CONNECT_FAILED**：负载均衡健康检查时向后端服务器建立连接失败。\n\n- **RECV_RESPONSE_FAILED**：负载均衡健康检查时从后端服务器接收响应失败。\n\n- **RECV_RESPONSE_TIMEOUT**：负载均衡健康检查时从后端服务器接收响应超时。\n\n- **SEND_REQUEST_FAILED**：负载均衡健康检查时向后端服务器发送请求失败。\n\n- **SEND_REQUEST_TIMEOUT**：负载均衡健康检查时向后端服务器发送请求超时。\n\n- **RESPONSE_FORMAT_ERROR**：负载均衡健康检查时从后端服务器接收响应格式错误。\n\n- **RESPONSE_MISMATCH**：负载均衡健康检查时从后端服务器接收的响应码与预期配置返回码不一致。","type":"string","example":"RESPONSE_MISMATCH"}}},"ServerId":{"title":"后端服务器Id","description":"后端服务器ID。","type":"string","example":"i-uf62h8v******"},"ServerIp":{"title":"后端服务器ID","description":"后端服务器组IP。","type":"string","example":"192.168.2.11"},"Status":{"title":"健康检查状态","description":"健康检查状态。取值：\n\n- **Initial**：初始化中，表示负载均衡实例配置了健康检查，但查不到数据。\n\n- **Unhealthy**：异常，表示连续上报不健康的状态。\n\n- **Unused**：未使用，表示后端服务器的权重为0。\n\n- **Unavailable**：未开启，表示未开启健康检查。\n","type":"string","example":"Initial"}}}},"ServerGroupId":{"title":"服务器组ID","description":"关联的服务器组ID。","type":"string","example":"sgp-8ilqs4axp6******"},"ActionType":{"title":"服务器组使用类型","description":"服务器组使用类型。","type":"string","example":"TrafficMirror"}}}}}}},"NextToken":{"title":"下一页标识","description":"是否拥有下一次查询的令牌（Token）。取值：\n- 如果**NextToken**为空表示没有下一次查询。\n- 如果**NextToken**有返回值，该取值表示下一次查询开始的令牌。","type":"string","example":"FFmyTO70tTpLG6I3FmYAXGKPd****"}}}}},"errorCodes":{"403":[{"errorCode":"Forbidden.LoadBalancer","errorMessage":"Authentication is failed for %s."}],"404":[{"errorCode":"ResourceNotFound.LoadBalancer","errorMessage":"The specified resource %s is not found."},{"errorCode":"ResourceNotFound.Listener","errorMessage":"The specified resource %s is not found."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"ListenerHealthStatus\\\": [\\n    {\\n      \\\"ListenerId\\\": \\\"lsn-o4u54y73wq7b******\\\",\\n      \\\"ListenerPort\\\": 80,\\n      \\\"ListenerProtocol\\\": \\\"http\\\",\\n      \\\"ServerGroupInfos\\\": [\\n        {\\n          \\\"HealthCheckEnabled\\\": \\\"on\\\",\\n          \\\"NonNormalServers\\\": [\\n            {\\n              \\\"Port\\\": 90,\\n              \\\"Reason\\\": {\\n                \\\"ActualResponse\\\": \\\"302\\\",\\n                \\\"ExpectedResponse\\\": \\\"HTTP_2xx\\\",\\n                \\\"ReasonCode\\\": \\\"RESPONSE_MISMATCH\\\"\\n              },\\n              \\\"ServerId\\\": \\\"i-uf62h8v******\\\",\\n              \\\"ServerIp\\\": \\\"192.168.8.10\\\",\\n              \\\"Status\\\": \\\"Initial\\\"\\n            }\\n          ],\\n          \\\"ServerGroupId\\\": \\\"sgp-8ilqs4axp6******\\\",\\n          \\\"ActionType\\\": \\\"TrafficMirror\\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"CEF72CEB-54B6-4AE8-B225-F876F******\\\",\\n  \\\"RuleHealthStatus\\\": [\\n    {\\n      \\\"RuleId\\\": \\\"rule-hp34s2h0xx1ht4nwo****\\\",\\n      \\\"ServerGroupInfos\\\": [\\n        {\\n          \\\"HealthCheckEnabled\\\": \\\"on\\\",\\n          \\\"NonNormalServers\\\": [\\n            {\\n              \\\"Port\\\": 90,\\n              \\\"Reason\\\": {\\n                \\\"ActualResponse\\\": \\\"302\\\",\\n                \\\"ExpectedResponse\\\": \\\"HTTP_2xx\\\",\\n                \\\"ReasonCode\\\": \\\"RESPONSE_MISMATCH\\\"\\n              },\\n              \\\"ServerId\\\": \\\"i-uf62h8v******\\\",\\n              \\\"ServerIp\\\": \\\"192.168.2.11\\\",\\n              \\\"Status\\\": \\\"Initial\\\"\\n            }\\n          ],\\n          \\\"ServerGroupId\\\": \\\"sgp-8ilqs4axp6******\\\",\\n          \\\"ActionType\\\": \\\"TrafficMirror\\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"NextToken\\\": \\\"FFmyTO70tTpLG6I3FmYAXGKPd****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetListenerHealthStatusResponse>\\n    <ListenerHealthStatus>\\n        <ListenerId>lsr-bp1bpn0kn908w4nbw****</ListenerId>\\n        <ListenerPort>80</ListenerPort>\\n        <ListenerProtocol>http</ListenerProtocol>\\n        <ServerGroupInfos>\\n            <HealthCheckEnabled>on</HealthCheckEnabled>\\n            <NonNormalServers>\\n                <Port>90</Port>\\n                <Reason>\\n                    <ActualResponse>302</ActualResponse>\\n                    <ExpectedResponse>HTTP_2xx</ExpectedResponse>\\n                    <ReasonCode>RESPONSE_MISMATCH</ReasonCode>\\n                </Reason>\\n                <ServerId>rg-bp1bfa08ex*****</ServerId>\\n                <ServerIp>192.168.8.10</ServerIp>\\n                <Status>Initial</Status>\\n            </NonNormalServers>\\n            <ServerGroupId>vsp-bp1qjwo61pqz3ahltv****</ServerGroupId>\\n            <ActionType>TrafficMirror</ActionType>\\n        </ServerGroupInfos>\\n    </ListenerHealthStatus>\\n    <RequestId>CEF72CEB-54B6-4AE8-B225-F876FF7BA984</RequestId>\\n    <RuleHealthStatus>\\n        <RuleId>rule-hp34s2h0xx1ht4nwo****</RuleId>\\n        <ServerGroupInfos>\\n            <HealthCheckEnabled>on</HealthCheckEnabled>\\n            <NonNormalServers>\\n                <Port>90</Port>\\n                <Reason>\\n                    <ActualResponse>302</ActualResponse>\\n                    <ExpectedResponse>HTTP_2xx</ExpectedResponse>\\n                    <ReasonCode>RESPONSE_MISMATCH</ReasonCode>\\n                </Reason>\\n                <ServerId>rg-bp1bfa08ex****</ServerId>\\n                <ServerIp>192.168.2.11</ServerIp>\\n                <Status>Initial</Status>\\n            </NonNormalServers>\\n            <ServerGroupId>vsp-bp1qjwo61pqz3ahlt****</ServerGroupId>\\n            <ActionType>TrafficMirror</ActionType>\\n        </ServerGroupInfos>\\n    </RuleHealthStatus>\\n    <NextToken>FFmyTO70tTpLG6I3FmYAXGKPd****</NextToken>\\n</GetListenerHealthStatusResponse>\",\"errorExample\":\"\"}]","title":"查询健康检查"}