{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{},"parameters":[{"name":"MqttRegionId","in":"query","schema":{"description":"云消息队列 MQTT 版实例地域（Region）的ID。请参见[服务接入点](~~181438~~)。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"InstanceId","in":"query","schema":{"description":"云消息队列 MQTT 版实例的ID，一定要和客户端实际使用的实例ID匹配。您可以在控制台**实例详情**页面的**基础信息**区域查看。","type":"string","required":true,"docRequired":true,"example":"mqtt-cn-i7m26mf****"}},{"name":"MsgId","in":"query","schema":{"description":"消息ID，即Message ID。","type":"string","required":true,"docRequired":true,"example":"AC1EC0030EAB78308DB16A3EC773****"}},{"name":"BeginTime","in":"query","schema":{"description":"查询范围的起始时间戳。单位：毫秒。","type":"integer","format":"int64","required":true,"docRequired":true,"maximum":"9223372036854774807","minimum":"-9223372036854774808","example":"1618646400000"}},{"name":"EndTime","in":"query","schema":{"description":"查询范围的终止时间戳。单位：毫秒。","type":"integer","format":"int64","required":true,"docRequired":true,"maximum":"9223372036854774807","minimum":"-9223372036854774808","example":"1621591200000"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"公共参数，每个请求的ID都是唯一的，可用于排查和定位问题。","type":"string","example":"69AD5550-BF22-438A-9202-A6E89185****"},"MessageTraceLists":{"description":"返回的消息发送轨迹列表。","type":"array","items":{"type":"object","properties":{"Time":{"description":"消息的发送时间。","type":"string","example":"2021-05-21 15:08:19.210"},"Action":{"description":"消息动作。取值说明如下：\n\n- **pub_mqtt**：表示消息的发送者是云消息队列 MQTT 版客户端。\n\n- **pub_mq**：表示消息的发送者是云消息队列 RocketMQ 版客户端。","type":"string","example":"pub_mqtt"},"ActionCode":{"description":"消息动作的返回码。取值说明如下：\n\n- **mqtt.trace.action.msg.pub.mqtt**：消息动作取值为**pub_mqtt**时返回该参数值。\n\n- **mqtt.trace.action.msg.pub.mq**：消息动作取值为**pub_mq**时返回该参数值。","type":"string","example":"mqtt.trace.action.msg.pub.mqtt"},"ActionInfo":{"description":"消息动作的说明信息。取值说明如下：\n\n- **Pub From Mqtt Client**：消息动作取值为**pub_mqtt**时返回该参数值。\n\n- **Pub From MQ**：消息动作取值为**pub_mq**时返回该参数值。","type":"string","example":"Pub From Mqtt Client"},"MsgId":{"description":"消息ID，即Message ID。","type":"string","example":"AC1EC0030EAB78308DB16A3EC773BD95"},"ClientId":{"description":"发送消息的客户端ID。","type":"string","example":"GID_test@@@producer"}}}}}}}},"errorCodes":{"404":[{"errorCode":"ApiNotSupport","errorMessage":"The specified API is not supported."}],"500":[{"errorCode":"SystemOverFlow","errorMessage":"An error occurred while processing your request. Please try again."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"69AD5550-BF22-438A-9202-A6E89185****\\\",\\n  \\\"MessageTraceLists\\\": [\\n    {\\n      \\\"Time\\\": \\\"2021-05-21 15:08:19.210\\\",\\n      \\\"Action\\\": \\\"pub_mqtt\\\",\\n      \\\"ActionCode\\\": \\\"mqtt.trace.action.msg.pub.mqtt\\\",\\n      \\\"ActionInfo\\\": \\\"Pub From Mqtt Client\\\",\\n      \\\"MsgId\\\": \\\"AC1EC0030EAB78308DB16A3EC773BD95\\\",\\n      \\\"ClientId\\\": \\\"GID_test@@@producer\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<QueryMqttTraceMessagePublishResponse>\\n  <MessageTraceLists>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <Time>2021-05-21 15:08:19.210</Time>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC773****</MsgId>\\n  </MessageTraceLists>\\n  <RequestId>69AD5550-BF22-438A-9202-A6E89185****</RequestId>\\n</QueryMqttTraceMessagePublishResponse>\",\"errorExample\":\"\"}]","title":"查询消息发送轨迹","summary":"查询指定消息的发送轨迹。当消息的收发不符合预期时，您可以通过该接口查看消息的发布时间、发布客户端等详细信息，帮助您快速定位异常原因。","description":"- 每成功调用一次**QueryMqttTraceMessagePublish**接口，都会计算为一次消息TPS，从而影响您的计费。计费详情，请参见[计费说明](~~52819~~)。\n- 本接口的单用户QPS限制为500次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~163047~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"# 控制台操作\n除了调用**QueryMqttTraceMessagePublish**接口，您还可以通过微消息队列MQTT版控制台查看消息的发送轨迹。具体操作，请参见[消息轨迹查询](~~205708~~)。"}