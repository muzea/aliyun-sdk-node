{"summary":"设备证书是由CA根证书签发给客户端设备使用的数字证书，用于客户端和服务端连接时，服务端对客户端进行安全认证。认证通过后服务端和客户端可基于证书内的加密密钥进行安全通信，若认证不通过则服务端拒绝客户端接入。\n本接口用于查询由指定CA证书签发且已在微消息队列MQTT版服务端注册的所有设备证书。","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list"},"parameters":[{"name":"MqttInstanceId","in":"query","schema":{"description":"CA证书所绑定的实例ID，即云消息队列 MQTT 版的实例ID。","type":"string","required":true,"example":"post-cn-7mz2d******"}},{"name":"PageNo","in":"query","schema":{"description":"查询第几页的返回结果。起始页从第1页开始计算。","type":"string","required":true,"example":"2"}},{"name":"PageSize","in":"query","schema":{"description":"每页最多显示几条查询记录。\n\n取值范围：1~100。","type":"string","required":true,"example":"10"}},{"name":"CaSn","in":"query","schema":{"description":"待查询CA证书的SN序列码，表示查询哪一个CA证书下所有已注册的设备证书。","type":"string","required":true,"example":"007269004887******"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"公共参数，每个请求的ID都是唯一的，可用于排查和定位问题。","type":"string","example":"020F6A43-19E6-4B6E-B846-44EB31DF****"},"Data":{"description":"查询结果。","type":"object","properties":{"Total":{"description":"查询结果总数。","type":"integer","format":"int32","example":"1"},"PageNo":{"description":"当前返回的查询记录是第几页。","type":"integer","format":"int32","example":"2"},"PageSize":{"description":"每页显示的最大结果数。","type":"integer","format":"int32","example":"10"},"DeviceCertificateVOS":{"description":"设备证书的详细信息。","type":"array","items":{"type":"object","properties":{"ValidBegin":{"description":"设备证书生效的起始时间。格式为毫秒级别的Unix时间戳。","type":"string","example":"1654137303000"},"ValidEnd":{"description":"设备证书生效的终止时间。格式为毫秒级别的Unix时间戳。","type":"string","example":"1969497303000"},"DeviceSn":{"description":"设备证书的SN序列号，用于唯一标识一个设备证书。","type":"string","example":"356217374433******"},"DeviceContent":{"description":"设备证书的内容。\n\n\\n表示换行。","type":"string","example":"-----BEGIN DEVICECERTIFICATE-----\\nMIIDuzCCAqdGVzdC5jbi1xaW5n******\\n-----END DEVICECERTIFICATE-----"},"Status":{"description":"设备证书的状态。取值如下：\n\n- 0：表示证书为未激活状态。\n\n- 1：表示证书为激活状态。\n\n设备证书注册后，默认为激活状态。","type":"string","example":"1"},"CaSn":{"description":"设备证书所属的CA证书的SN序列号，用于唯一标识一个CA证书。","type":"string","example":"00f26900ba87******"},"DeviceName":{"description":"设备证书的名称。","type":"string","example":"mqtt_device"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"ParameterFieldCheckFailed","errorMessage":"Failed to validate the parameters. The parameters may be missing or invalid."}],"500":[{"errorCode":"ParameterFieldCheckFailed","errorMessage":"Failed to validate the parameters. The parameters may be missing or invalid."},{"errorCode":"FindDeviceBySnError","errorMessage":"Failed to find the device certificate by the SN. Please check sn is valid"},{"errorCode":"MqttInstanceNotFound","errorMessage":"Specified instance is not found"},{"errorCode":"MqttOwnerCheckError","errorMessage":"Failed to validate the instance permission"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"020F6A43-19E6-4B6E-B846-44EB31DF****\\\",\\n  \\\"Data\\\": {\\n    \\\"Total\\\": 1,\\n    \\\"PageNo\\\": 2,\\n    \\\"PageSize\\\": 10,\\n    \\\"DeviceCertificateVOS\\\": [\\n      {\\n        \\\"ValidBegin\\\": \\\"1654137303000\\\",\\n        \\\"ValidEnd\\\": \\\"1969497303000\\\",\\n        \\\"DeviceSn\\\": \\\"356217374433******\\\",\\n        \\\"DeviceContent\\\": \\\"-----BEGIN DEVICECERTIFICATE-----\\\\\\\\nMIIDuzCCAqdGVzdC5jbi1xaW5n******\\\\\\\\n-----END DEVICECERTIFICATE-----\\\",\\n        \\\"Status\\\": \\\"1\\\",\\n        \\\"CaSn\\\": \\\"00f26900ba87******\\\",\\n        \\\"DeviceName\\\": \\\"mqtt_device\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ListDeviceCertificateByCaSnResponse>\\n    <RequestId>020F6A43-19E6-4B6E-B846-44EB31DF****</RequestId>\\n    <Data>\\n        <Total>1</Total>\\n        <PageNo>2</PageNo>\\n        <PageSize>10</PageSize>\\n        <DeviceCertificateVOS>\\n            <ValidBegin>1654137303000</ValidBegin>\\n            <ValidEnd>1969497303000</ValidEnd>\\n            <DeviceSn>356217374433******</DeviceSn>\\n            <DeviceContent>-----BEGIN DEVICECERTIFICATE-----\\\\nMIIDuzCCAqdGVzdC5jbi1xaW5n******\\\\n-----END DEVICECERTIFICATE-----</DeviceContent>\\n            <Status>1</Status>\\n            <CaSn>00f26900ba87******</CaSn>\\n            <DeviceName>mqtt_device</DeviceName>\\n        </DeviceCertificateVOS>\\n    </Data>\\n</ListDeviceCertificateByCaSnResponse>\",\"errorExample\":\"\"}]","title":"查询CA证书下设备证书","description":"- 仅铂金版和专业版实例支持使用ListDeviceCertificateByCaSn接口。\n- 单用户请求频率限制为500次/秒。如有特殊需求，请联系云消息队列 MQTT 版技术支持，钉钉群号：35228338。","extraInfo":"### 控制台操作\n除了调用ListDeviceCertificateByCaSn接口，您还可以通过微消息队列MQTT版控制台查看指定CA证书下所有已注册的设备证书。具体操作，请参见[设备证书管理](~~449435~~)。"}