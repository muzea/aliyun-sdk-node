{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{},"parameters":[{"name":"MqttRegionId","in":"query","schema":{"description":"云消息队列 MQTT 版实例地域（Region）的ID。请参见[服务接入点](~~181438~~)。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"InstanceId","in":"query","schema":{"description":"云消息队列 MQTT 版实例的ID，一定要和客户端实际使用的实例ID匹配。您可以在控制台**实例详情**页面的**基础信息**区域查看。","type":"string","required":true,"docRequired":true,"example":"mqtt-cn-i7m26mf****"}},{"name":"ClientId","in":"query","schema":{"description":"需要查询消息列表的设备的Client ID。","type":"string","required":true,"docRequired":true,"example":"GID_test@@@producer"}},{"name":"BeginTime","in":"query","schema":{"description":"查询范围的起始时间戳。单位：毫秒。","type":"integer","format":"int64","required":true,"docRequired":true,"maximum":"9223372036854774807","minimum":"-9223372036854774808","example":"1618646400000"}},{"name":"EndTime","in":"query","schema":{"description":"查询范围的终止时间戳。单位：毫秒。","type":"integer","format":"int64","required":true,"docRequired":true,"maximum":"9223372036854774807","minimum":"-9223372036854774808","example":"1621591200000"}},{"name":"CurrentPage","in":"query","schema":{"description":"当前取第几页消息，从1开始递增。若输入参数大于总页数，则返回结果为空。","type":"integer","format":"int32","required":true,"docRequired":true,"maximum":"2147483647","minimum":"-2147483648","example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"分页查询，每页最多显示的消息数量，最小1条，最多100条。","type":"integer","format":"int32","required":true,"docRequired":true,"maximum":"2147483647","minimum":"-2147483648","example":"5"}},{"name":"Reverse","in":"query","schema":{"description":"返回结果是否倒序显示。取值说明如下：\n\n- **true**：按照消息发送或消费时间倒序显示，最后一条发送或消费的消息显示在第一条，最早一条发送或消费的消息显示在最后一条。\n\n- **false**：按照消息发送或消费时间顺序显示，最早一条发送或消费的消息显示在第一条，最后一条发送或消费的消息显示在最后一条。\n\n若不输入，则返回结果默认按照消息发送或消费的时间顺序显示。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"CurrentPage":{"description":"当前位于第几页。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"公共参数，每个请求的ID都是唯一的，可用于排查和定位问题。","type":"string","example":"B096B9D6-62F3-4567-BB59-58D1362E****"},"PageSize":{"description":"每页最多显示的消息数量。","type":"integer","format":"int32","example":"10"},"Total":{"description":"查询到的消息总数。","type":"integer","format":"int64","example":"5"},"MessageOfClientList":{"description":"返回的消息列表。","type":"array","items":{"type":"object","properties":{"Time":{"description":"消息发送的时间或被消费的时间。","type":"string","example":"2021-05-21 15:08:19.234"},"Action":{"description":"消息动作。取值说明如下：\n\n- **pub_mqtt**：微消息队列MQTT版客户端发送消息。\n\n- **sub**：微消息队列MQTT版客户端订阅消息。\n\n- **push_offline**：服务端推送离线消息到微消息队列MQTT版客户端。\n","type":"string","example":"pub_mqtt"},"ActionCode":{"description":"消息动作的返回码。取值说明如下\n\n- **mqtt.trace.action.msg.pub.mqtt**：消息动作取值为**pub_mqtt**时返回该参数值。\n\n- **mqtt.trace.action.msg.sub**：消息动作取值为**sub**时返回该参数值。\n\n- **mqtt.trace.action.msg.push.offline**：消息动作取值为**push_offline**时返回该参数值。\n","type":"string","example":"mqtt.trace.action.msg.pub.mqtt"},"ActionInfo":{"description":"消息动作的返回信息。取值说明如下：\n\n- **Pub From Mqtt Client**：消息动作取值为**pub_mqtt**时返回该参数值。\n\n- **Push To Mqtt Client**：消息动作取值为**sub**时返回该参数值。\n\n- **Push Offline Msg To Mqtt Client**：消息动作取值为**push_offline**时返回该参数值。","type":"string","example":"Pub From Mqtt Client"},"MsgId":{"description":"消息ID，即Message ID。","type":"string","example":"AC1EC0030EAB78308DB16A3EC773****"},"ClientId":{"description":"设备的Client ID。","type":"string","example":"GID_test@@@producer"}}}}}}}},"errorCodes":{"404":[{"errorCode":"ApiNotSupport","errorMessage":"The specified API is not supported."}],"500":[{"errorCode":"SystemOverFlow","errorMessage":"An error occurred while processing your request. Please try again."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"CurrentPage\\\": 1,\\n  \\\"RequestId\\\": \\\"B096B9D6-62F3-4567-BB59-58D1362E****\\\",\\n  \\\"PageSize\\\": 10,\\n  \\\"Total\\\": 5,\\n  \\\"MessageOfClientList\\\": [\\n    {\\n      \\\"Time\\\": \\\"2021-05-21 15:08:19.234\\\",\\n      \\\"Action\\\": \\\"pub_mqtt\\\",\\n      \\\"ActionCode\\\": \\\"mqtt.trace.action.msg.pub.mqtt\\\",\\n      \\\"ActionInfo\\\": \\\"Pub From Mqtt Client\\\",\\n      \\\"MsgId\\\": \\\"AC1EC0030EAB78308DB16A3EC773****\\\",\\n      \\\"ClientId\\\": \\\"GID_test@@@producer\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<QueryMqttTraceMessageOfClientResponse>\\n <RequestId>B096B9D6-62F3-4567-BB59-58D1362E****</RequestId>\\n <PageSize>10</PageSize>\\n <CurrentPage>1</CurrentPage>\\n <Total>5</Total>\\n <MessageOfClientList>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <Time>2021-05-21 15:08:19.210 </Time>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC773****</MsgId>\\n </MessageOfClientList>\\n <MessageOfClientList>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <Time>2021-05-21 15:08:19.234 </Time>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC78F****</MsgId>\\n </MessageOfClientList>\\n <MessageOfClientList>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <Time>2021-05-21 15:08:19.234 </Time>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC78F****</MsgId>\\n </MessageOfClientList>\\n <MessageOfClientList>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <Time>2021-05-21 15:08:19.234 </Time>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC78F****</MsgId>\\n </MessageOfClientList>\\n <MessageOfClientList>\\n    <Action>pub_mqtt</Action>\\n    <ActionCode>mqtt.trace.action.msg.pub.mqtt</ActionCode>\\n    <ClientId>GID_test@@@producer</ClientId>\\n    <ActionInfo>Pub From Mqtt Client</ActionInfo>\\n    <Time>2021-05-21 15:08:19.234 </Time>\\n    <MsgId>AC1EC0030EAB78308DB16A3EC78F****</MsgId>\\n </MessageOfClientList>\\n</QueryMqttTraceMessageOfClientResponse>\",\"errorExample\":\"\"}]","title":"查询消息轨迹","summary":"查询指定设备在一定时间段内的消息列表。当消息的收发不符合预期时，您可以通过该接口查看消息的收发状态等轨迹信息，帮助您快速定位异常原因。","description":"- 每成功调用一次**QueryMqttTraceMessageOfClient**接口，都会计算为一次消息TPS，从而影响您的计费。计费详情，请参见[计费说明](~~52819~~)。\n- 本接口的单用户QPS限制为500次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~163047~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"# 控制台操作\n除了调用**QueryMqttTraceMessageOfClient**接口，您还可以通过微消息队列MQTT版控制台查看设备的消息列表。具体操作，请参见[消息轨迹查询](~~205708~~)。"}