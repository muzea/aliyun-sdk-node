{"methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ClusterId","in":"query","schema":{"description":"待添加节点的集群ID。\n\n您可以通过调用[ListClusters](~~87126~~)获取集群ID。","type":"string","required":true,"docRequired":true,"example":"ehpc-hz-FYUr32****"}},{"name":"ImageId","in":"query","schema":{"description":"待添加节点的镜像ID，仅在未指定TargetImageId时，ImageId生效。\n\n您可以通过调用[ListImages](~~87213~~)和[ListCustomImages](~~87215~~)接口获取镜像ID。\n\n>如果添加多个节点，仅指定了TargetImageId的节点会使用TargetImageId。","type":"string","required":false,"example":"centos_7_06_64_20G_alibase_20190711.vhd"}},{"name":"ComputeSpotStrategy","in":"query","schema":{"description":"计算节点抢占策略。取值范围：\n\n- NoSpot：按量计费节点。\n\n- SpotWithPriceLimit：设置上限价格的抢占式实例。\n\n- SpotAsPriceGo：系统自动出价，跟随当前市场实际价格的抢占式实例。\n\n默认值：NoSpot","type":"string","required":false,"example":"NoSpot"}},{"name":"ComputeSpotPriceLimit","in":"query","schema":{"description":"计算节点每小时最高价格，取值是浮点数，最多支持3位小数。参数ComputeSpotStrategy取值为SpotWithPriceLimit时生效。\n\n当同时设置了ComputeSpotPriceLimit与InstanceTypeModel.N.MaxPrice时，按两者的最小值创建计算节点。","type":"number","format":"float","required":false,"example":"0.68"}},{"name":"SystemDiskType","in":"query","schema":{"description":"系统盘的云盘类型。取值范围：\n- cloud_efficiency：高效云盘\n- cloud_ssd：SSD云盘\n- cloud_essd：ESSD云盘\n- cloud：普通云盘，已停售","type":"string","required":false,"example":"cloud_ssd"}},{"name":"SystemDiskSize","in":"query","schema":{"description":"系统盘的大小。单位：GB\n\n取值范围：40~500\n\n默认值：40","type":"integer","format":"int32","required":false,"example":"40"}},{"name":"HostNamePrefix","in":"query","schema":{"description":"主机名前缀。方便您分类管理节点。","type":"string","required":false,"example":"compute"}},{"name":"HostNameSuffix","in":"query","schema":{"description":"主机名后缀。方便您分类管理节点。","type":"string","required":false,"example":"01"}},{"name":"AllocatePublicAddress","in":"query","schema":{"description":"是否分配公网地址。取值范围：\n\n- true：分配公网地址\n\n- false：不分配公网地址\n\n默认值：false","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"InternetChargeType","in":"query","schema":{"description":"弹性公网IP付费类型。取值范围：\n\n- PayByBandwidth：按固定带宽收费\n\n- PayByTraffic：按使用流量计费","type":"string","required":false,"example":"PayByTraffic","default":"PayByTraffic"}},{"name":"InternetMaxBandWidthIn","in":"query","schema":{"description":"公网入带宽最大值，单位为Mbit/s。取值范围：\n\n- 当所购公网出带宽小于等于10Mbit/s时：1~10，默认为10。\n\n- 当所购公网出带宽大于10Mbit/s时：1~InternetMaxBandWidthOut的取值，默认为InternetMaxBandWidthOut的取值。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"0","example":"10","default":"0"}},{"name":"InternetMaxBandWidthOut","in":"query","schema":{"description":"公网出带宽最大值，单位为Mbit/s。取值范围：0~100\n\n默认值：0","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"0","example":"10","default":"0"}},{"name":"Cores","in":"query","schema":{"description":"vCPU个数。当参数ResourceAmountType为Cores时，该参数为必选。\n\n同时指定vCPU和Memory可以定义节点规格。例如，vCPU=2、Memory=16可以定义配置为2 vCPU、16 GB的所有节点规格。结合节点规格、可用区等因素确定可用节点规格集合，并根据价格排序为您创建价格最低的节点。","type":"integer","format":"int32","required":false,"example":"2"}},{"name":"Memory","in":"query","schema":{"description":"内存大小，当参数ResourceAmountType为Cores时，该参数为必选。单位：GB。\n\n同时指定vCPU和Memory可以定义节点规格。例如，vCPU=2、Memory=16可以定义配置为2 vCPU、16 GB的所有节点规格。结合节点规格、可用区等因素确定可用节点规格集合，并根据价格排序为您创建价格最低的节点。","type":"integer","format":"int32","required":false,"example":"16"}},{"name":"InstanceFamilyLevel","in":"query","schema":{"description":"实例规格族级别，在指定Cores和Memory时才生效。取值范围：\n\n- EntryLevel：入门级。\n\n- EnterpriseLevel：企业级。\n\n- CreditEntryLevel：积分入门级。更多信息，请参见[突发性能实例](~~59977~~)。\n\n默认值：EnterpriseLevel","type":"string","required":false,"example":"EntryLevel"}},{"name":"TargetCapacity","in":"query","schema":{"description":"期望添加的资源数量，具体资源数量依赖ResourceAmountType取值。\n\n- 当ResourceAmountType取值为Instance时，TargetCapacity取值范围：1~200\n\n- 当ResourceAmountType取值为Cores时，TargetCapacity取值范围：1~1000","type":"integer","format":"int32","required":true,"docRequired":true,"example":"20"}},{"name":"ResourceAmountType","in":"query","schema":{"description":"期望添加的资源类型。取值范围：\n\n- Instances：计算节点对应的ECS实例\n\n- Cores：vCPU和内存\n\n默认值：Instances","type":"string","required":false,"example":"Instances"}},{"name":"PriorityStrategy","in":"query","schema":{"description":"抢占式节点申请策略。取值范围：\n\n- LowPriceResourcePlanning：按vCPU单价从低到高进行尝试创建。当设置了抢占式计费方式的多节点规格时，优先创建对应抢占式计费节点。\n\n- CapacityOptResourcePlanning：按照价格更低及释放率更低的方式综合编排创建。\n\n- CustomizedResourcePlanning：根据预先定义的可用区（ZoneIds.N）扩容。当优先级较高的可用区没有实例库存时，自动使用下一优先级的可用区。","type":"string","required":false,"example":"LowPriceResourcePlanning"}},{"name":"StrictSatisfiedTargetCapacity","in":"query","schema":{"description":"是否满足TargetCapacity的数量要求。取值范围：\n\n- true：如果库存不足，则不创建任何节点并返回报错。如果库存充足，会存在以下两种情况：\n  - StrictResourceProvision为true：检查库存，如果库存充足才会创建节点，并严格按期望数量创建节点，否则就不创建任何节点。\n  - StrictResourceProvision为false：检查库存，如果库存充足才会创建节点，但实际可能会因为先查询库存量，创建节点时实时库存不足而创建部分节点。\n\n- false：如果库存不足，则按库存量创建部分节点。\n\n默认值：true","type":"boolean","required":false,"example":"true"}},{"name":"SystemDiskLevel","in":"query","schema":{"description":"创建ESSD云盘作为系统盘使用时，设置云盘的性能等级。取值范围：\n- PL0：单盘最高随机读写IOPS 1万\n- PL1：单盘最高随机读写IOPS 5万\n- PL2：单盘最高随机读写IOPS 10万\n- PL3：单盘最高随机读写IOPS 100万\n\n默认值：PL0\n关于如何选择ESSD性能等级，请参见[ESSD云盘](~~122389~~)。","type":"string","required":false,"example":"PL0"}},{"name":"StrictResourceProvision","in":"query","schema":{"description":"是否必须满足TargetCapacity的数量要求。当StrictSatisfiedTargetCapacity为true时生效。取值范围：\n\n- true：检查库存，如果库存充足才会创建节点，并严格按期望数量创建节点，否则就不创建任何节点。\n- false：检查库存，如果库存充足才会创建节点，但实际可能会因为先查询库存量，创建节点时实时库存不足而创建部分节点。\n\n默认值：false","type":"boolean","required":false,"example":"false"}},{"name":"Round","in":"query","schema":{"description":"分批创建节点的总批数。 取值范围：1~10\n\n默认值：1","type":"integer","format":"int32","required":false,"maximum":"10","minimum":"1","example":"1","default":"1"}},{"name":"Interval","in":"query","schema":{"description":"分批创建节点的时间间隔。单位：秒，取值范围：60~600\n\n默认值：60","type":"integer","format":"int32","required":false,"maximum":"600","minimum":"60","example":"60","default":"60"}},{"name":"ZoneInfos","in":"query","style":"repeatList","schema":{"description":"可用区信息。最多可以添加10个。","type":"array","items":{"description":"可用区信息数组。","type":"object","properties":{"VSwitchId":{"description":"待添加节点的交换机ID。N的取值范围：1~10。","type":"string","required":false,"docRequired":true,"example":"vsw-bp1e47optm9g58zcu****"},"ZoneId":{"description":"待添加节点的可用区ID。N的取值范围：1~10。\n\n>多个可用区ID之间不能相同。","type":"string","required":false,"docRequired":true,"example":"cn-hangzhou-b"}},"required":false},"required":true,"docRequired":true,"maxItems":100}},{"name":"InstanceTypeModel","in":"query","style":"repeatList","schema":{"description":"抢占式实例信息。","type":"array","items":{"description":"抢占式实例信息数组。","type":"object","properties":{"MaxPrice":{"description":"您可以为该抢占式实例支付的每小时最高价格。取值是浮点数，最多支持3位小数。\n\n当参数ComputeSpotStrategy取值为SpotWithPriceLimit时才生效。\n\nN的取值范围：1~10","type":"number","format":"float","required":false,"example":"0.034"},"TargetImageId":{"description":"待添加节点的镜像ID，该镜像必须为Windows镜像。\n\nN的取值范围：1~10","type":"string","required":false,"example":"win2016_1607_x64_dtc_zh-cn_40G_alibase_20210516.vhd"},"InstanceType":{"description":"待添加的节点规格，默认使用上次扩容或者创建集群时的计算节点规格。\n\nN的取值范围：1~10","type":"string","required":false,"example":"ecs.n1.tiny"}},"required":false},"required":false,"maxItems":100}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签信息。","type":"array","items":{"description":"标签信息数组。","type":"object","properties":{"Key":{"description":"待添加节点的标签键。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以aliyun和acs:开头，不能包含http://或 https://。\n\nN的取值范围：1~20","type":"string","required":false,"example":"TestKey"},"Value":{"description":"待添加节点的标签值。一旦传入该值，可以为空字符串。最多支持128个字符，不能以acs:开头，不能包含http://或者https://。\n\nN的取值范围：1~20","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":19}},{"name":"JobQueue","in":"query","schema":{"description":"计算节点加入的队列名称。\n\n您可以通过调用[ListQueues](~~92176~~)获取已有队列名称。","type":"string","required":false,"example":"workq"}},{"name":"UserData","in":"query","schema":{"description":"实例自定义数据。需要以 Base64 方式编码，原始数据最多为 16 KB。Linux操作系统支持shell脚本；Windows操作系统支持bat和powershell两种格式，在Base64编码前，第一行为[bat]或者[powershell]。\n> 因为传输 API 请求时，不会加密您设置的 UserData，建议不要以明文方式传入机密的信息，例如密码和私钥等。如果必须传入，建议加密后，然后以 Base64 的方式编码后再传入，在实例内部以同样的方式反解密。","type":"string","required":false,"example":"ZWNobyBoZWxsbyBlY3Mh\n"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"任务ID。","type":"string","example":"B745C159-3155-4B94-95D0-4B73D4D2****"},"SatisfiedAmount":{"description":"创建成功的计算节点数量。","type":"integer","format":"int32","example":"10"},"TaskId":{"description":"请求ID。","type":"string","example":"B745C159-3155-4B94-95D0-4B73D4D2****"},"Detail":{"description":"API调用结果详情。","type":"string","example":"Resources Application is satisfied. Creating..."},"InstanceIds":{"type":"object","properties":{"InstanceId":{"description":"实例ID。\n\n > 由于ApplyNodes是异步操作，请求成功就会立即返回结果，不会等待实例创建成功，因此InstanceIds内容为空。您可以通过[ListNodes](~~87161~~)获取InstanceId。","type":"array","items":{"description":"实例ID。\n\n > 由于ApplyNodes是异步操作，请求成功就会立即返回结果，不会等待实例创建成功，因此InstanceIds内容为空。您可以通过[ListNodes](~~87161~~)获取InstanceId。","type":"string","example":"null"}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The specified parameter %s is invalid."},{"errorCode":"NotEnabled","errorMessage":"You have not enabled this service"},{"errorCode":"InDebt","errorMessage":"Your account has overdue payments."},{"errorCode":"InvalidVswitch","errorMessage":"The vSwitch parameter is invalid, or the number of available IP addresses is insufficient."},{"errorCode":"InvalidImage","errorMessage":"The image ID is invalid."},{"errorCode":"InvaildSystemDiskSize","errorMessage":"The system disk size must be greater than or equal to image size."},{"errorCode":"InvalidInstanceType.NotSupported","errorMessage":"The instance type is invalid."},{"errorCode":"InvalidZoneId.ValueNotSupported","errorMessage":"The specified ZoneId is invalid."}],"403":[{"errorCode":"TooManyComputes","errorMessage":"The number of computing nodes exceeds the quota."},{"errorCode":"TooManyLogins","errorMessage":"The maximum number of logged on nodes is exceeded."},{"errorCode":"TooManyScc","errorMessage":"The maximum number of SCC instances is exceeded."},{"errorCode":"InvalidClusterStatus","errorMessage":"The operation failed due to invalid cluster status."},{"errorCode":"ConflictOpt","errorMessage":"A conflicting operation is running."},{"errorCode":"ImageNotSupported","errorMessage":"The specified image is not supported."},{"errorCode":"InvalidCapacityNum.ValueNotSupported","errorMessage":"The specified TargetCapacity is invalid."},{"errorCode":"RecommendEmpty.InstanceTypeSoldOut","errorMessage":"The resource is out of stock."},{"errorCode":"ResourceTargetAmount.NotSatisfied","errorMessage":"The resource application is not satisfied."},{"errorCode":"RecommendEmpty.PriceNotSatisfied","errorMessage":"The price limit is not satisfied."},{"errorCode":"QuotaExceed.PayasyougoInstance","errorMessage":"The pay-as-you-go instance exceeds the quota."},{"errorCode":"RecommendEmpty.InstanceTypeNoStock","errorMessage":"The instanceTypes are out of usage."},{"errorCode":"RecommendEmpty.InstanceTypeNotAuthorized","errorMessage":"The recommend instanceTypes are not authorized."},{"errorCode":"InvalidOpt","errorMessage":"The specified operation is invalid. Please try again later."}],"404":[{"errorCode":"ImageNotFound","errorMessage":"The specified image does not exist."},{"errorCode":"ClusterNotFound","errorMessage":"The specified cluster does not exist."},{"errorCode":"VolumeNotFound","errorMessage":"The specified volume does not exist."},{"errorCode":"ManagerNotFound","errorMessage":"The manager nodes do not exist or their status is abnormal."},{"errorCode":"ObjectNotFound","errorMessage":"The specified object is not found."},{"errorCode":"VswitchNotFound","errorMessage":"The specified vSwitch does not exist."}],"406":[{"errorCode":"EcsError","errorMessage":"An error occurred while calling the ECS API operation."},{"errorCode":"EipError","errorMessage":"The EIP API request failed."},{"errorCode":"DbError","errorMessage":"A database service error occurred."},{"errorCode":"AliyunError","errorMessage":"An Alibaba Cloud product error occurred."}],"407":[{"errorCode":"NotAuthorized","errorMessage":"You are not authorized by RAM for this request."}],"409":[{"errorCode":"PartFailure","errorMessage":"Part of the batch operation failed."}],"500":[{"errorCode":"UnknownError","errorMessage":"An unknown error occurred."}],"503":[{"errorCode":"ServiceUnavailable","errorMessage":"The request has failed due to a temporary failure of the server"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B745C159-3155-4B94-95D0-4B73D4D2****\\\",\\n  \\\"SatisfiedAmount\\\": 10,\\n  \\\"TaskId\\\": \\\"B745C159-3155-4B94-95D0-4B73D4D2****\\\",\\n  \\\"Detail\\\": \\\"Resources Application is satisfied. Creating...\\\",\\n  \\\"InstanceIds\\\": {\\n    \\\"InstanceId\\\": [\\n      \\\"null\\\"\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ApplyNodes>\\n<TaskId>B745C159-3155-4B94-95D0-4B73D4D2****</TaskId>\\n<SatisfiedAmount>10</SatisfiedAmount>\\n<RequestId>B745C159-3155-4B94-95D0-4B73D4D2****</RequestId>\\n<InstanceIds>\\n    <InstanceId>null</InstanceId>\\n</InstanceIds>\\n<Detail>Resources Application is satisfied. Creating...</Detail>\\n</ApplyNodes>\",\"errorExample\":\"\"}]","title":"批量添加节点到指定集群","summary":"调用ApplyNodes添加一个或多个按量计费或抢占式计算节点到指定集群中。","description":"## 接口说明\n\n该接口支持按照节点数量或节点设置的vCPU个数、内存大小等维度灵活申请所需资源。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}