{"summary":"调用SubmitServerlessJob提交Serverless作业到E-HPC集群。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ClusterId","in":"query","schema":{"description":"集群ID。\n\n您可以通过调用[ListClusters](~~87116~~)获取集群ID。","type":"string","required":true,"docRequired":true,"example":"ehpc-hz-FYUr32****"}},{"name":"JobName","in":"query","schema":{"description":"Serverless作业名。\n> 支持英文小写字母、数字或者短划线（-），不能以短划线开头或者结尾。","type":"string","required":true,"docRequired":true,"example":"testjob"}},{"name":"ArrayProperties","in":"query","style":"json","schema":{"description":"数组作业配置。\n> 数组作业索引值会通过环境变量`EHPC_ARRAY_TASK_ID`传入Serverless作业容器中，支持用户业务程序访问。","type":"object","properties":{"IndexStart":{"description":"数组作业索引的起始值。取值范围：0~4999。","type":"integer","format":"int64","required":false,"example":"1"},"IndexEnd":{"description":"数组作业索引的结束值。取值范围：0~4999，且大于等于IndexStart。","type":"integer","format":"int64","required":false,"example":"5"},"IndexStep":{"description":"数组作业索引的间隔。\n> 若数组作业属性为IndexStart=1,IndexEnd=5,IndexStep=2，则该数组作业包含三个子任务，子任务索引分别为1,3,5。","type":"integer","format":"int64","required":false,"example":"2"}},"required":false}},{"name":"JobPriority","in":"query","schema":{"description":"Serverless作业的调度优先级。取值范围：0~999，取值越大，优先级越高。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"EphemeralStorage","in":"query","schema":{"description":"为Serverless作业容器增加的临时存储空间大小。单位：GiB。\n> Serverless作业容器默认提供30 GiB的免费存储空间，如果您的存储需求大于30 GiB，可以通过该参数自定义增加临时存储空间大小。","type":"integer","format":"int32","required":false,"example":"200"}},{"name":"Timeout","in":"query","schema":{"description":"Serverless作业的有效期限，超出该时间后，作业会强制终止。单位为秒。","type":"integer","format":"int64","required":false,"example":"3600"}},{"name":"VSwitchId","in":"query","style":"json","schema":{"description":"Serverless作业容器所属的交换机ID列表。","type":"array","items":{"description":"交换机ID。\n> E-HPC当前仅支持VPC网络。您可以调用[DescribeVSwitches](~~35748~~)查询已创建的交换机的相关信息。","type":"string","required":false,"example":"vsw-bp1gb5gf5546rn****"},"required":false,"maxItems":10}},{"name":"InstanceType","in":"query","style":"json","schema":{"description":"Serverless作业容器所采用的ECS实例规格列表。","type":"array","items":{"description":"ECS实例规格。","type":"string","required":false,"example":"ecs.g7.8xlarge"},"required":false,"docRequired":false,"maxItems":5}},{"name":"Cpu","in":"query","schema":{"description":"Serverless作业容器的vCPU大小。单位：核。","type":"number","format":"float","required":false,"docRequired":false,"example":"2","default":"1.0"}},{"name":"Memory","in":"query","schema":{"description":"Serverless作业容器的内存大小。单位：GiB。","type":"number","format":"float","required":false,"docRequired":false,"example":"4","default":"2.0"}},{"name":"SpotStrategy","in":"query","schema":{"description":"实例的抢占策略。取值范围：\n\n- NoSpot：正常按量付费实例。\n- SpotWithPriceLimit：设置上限价格的抢占式实例。\n- SpotAsPriceGo：系统自动出价，跟随当前市场实际价格的抢占式实例。\n\n默认值：NoSpot。","type":"string","required":false,"docRequired":false,"example":"SpotWithPriceLimit"}},{"name":"SpotPriceLimit","in":"query","schema":{"description":"设置抢占式实例的每小时最高价格，最多精确到小数点后3位。\n\n当SpotStrategy取值为SpotWithPriceLimit时，必须设置SpotPriceLimit。","type":"number","format":"float","required":false,"example":"0.062"}},{"name":"RamRoleName","in":"query","schema":{"description":"Serverless作业容器绑定的RAM角色名称。","type":"string","required":false,"example":"testRamRoleName"}},{"name":"Container","in":"query","style":"json","schema":{"description":"Serverless作业容器的属性。","type":"object","properties":{"EnvironmentVar":{"description":"容器的环境变量值。","type":"array","items":{"description":"容器的环境变量值。","type":"object","properties":{"Key":{"description":"环境变量名。长度为1~128位。格式要求：[0-9a-zA-Z]，以及下划线，不能以数字开头。","type":"string","required":false,"example":"PATH"},"Value":{"description":"环境变量值。长度为0~256位。","type":"string","required":false,"example":"/usr/local/bin"}},"required":false},"required":false,"maxItems":20},"WorkingDir":{"description":"容器工作目录。","type":"string","required":false,"example":"/usr/local/\n"},"Image":{"description":"容器镜像。","type":"string","required":true,"example":"registry-vpc.cn-hangzhou.aliyuncs.com/ehpc/hpl:latest\n"},"Command":{"description":"容器启动指令列表。","type":"array","items":{"description":"容器启动指令。","type":"string","required":false,"example":"python3"},"required":false,"maxItems":20},"Arg":{"description":"容器启动命令对应的参数列表。最多10个。","type":"array","items":{"description":"容器启动参数。","type":"string","required":false,"example":"hello.py"},"required":false,"maxItems":100},"Gpu":{"description":"容器使用的GPU个数。","type":"integer","format":"int32","required":false,"example":"1"},"VolumeMount":{"description":"容器挂载的数据卷列表。","type":"array","items":{"description":"容器挂载的数据卷信息。","type":"object","properties":{"MountPath":{"description":"容器挂载数据卷的目录。    \n\n> 容器挂载目录下的内容会被Volume的内容直接覆盖，请谨慎使用。","type":"string","required":false,"example":"/data"},"FlexVolumeDriver":{"description":"使用FlexVolume插件挂载数据卷时的驱动类型。取值范围如下：\n\n- alicloud/nas：挂载NAS。\n\n- alicloud/oss：挂载OSS。","type":"string","required":false,"example":"alicloud/oss"},"FlexVolumeOptions":{"description":"FlexVolume对象选项列表。为KV形式，采用JSON传递。","type":"string","required":false,"example":"{\"bucket\":\"hpctest\",\"url\": \"oss-cn-hangzhou-internal.aliyuncs.com\n\",\"path\":\"/data\",\"ramRole\":\"AliyunECSInstanceForEHPCRole\"}"}},"required":false},"required":false}},"required":true}},{"name":"DependsOn","in":"query","style":"json","schema":{"description":"Serverless作业依赖列表。","type":"array","items":{"description":"Serverless作业依赖。","type":"object","properties":{"JobId":{"description":"所依赖的作业ID。","type":"string","required":false,"example":"10"},"Type":{"description":"依赖类型。取值范围：\n\n- AfterSucceeded：所依赖作业或数组作业**所有子任务**运行成功（退出码为0）。\n- AfterFailed：所依赖作业或数组作业**任一子任务**运行失败（退出码非0）。\n- AfterAny：所依赖作业运行结束（成功或失败）。\n- AfterCorresponding：所依赖数组作业对应的子任务运行成功（退出码为0）。\n\n默认值：AfterSucceeded。","type":"string","required":false,"example":"AfterAny"}},"required":false},"required":false,"maxItems":10,"minItems":1}},{"name":"RetryStrategy","in":"query","style":"json","schema":{"description":"Serverless作业重试策略。","type":"object","properties":{"Attempts":{"description":"Serverless作业重试次数。取值范围：1～10。","type":"integer","format":"int32","required":false,"maximum":"10","minimum":"1","example":"5"},"EvaluateOnExit":{"description":"Serverless作业重试规则列表。最多10个。","type":"array","items":{"description":"Serverless作业重试规则。","type":"object","properties":{"Action":{"description":"作业行为。取值范围如下：\n\n- Retry：当命中特定退出码时，作业开始新一轮重试。\n\n- Exit：当命中特定退出码时，作业退出。","type":"string","required":false,"example":"Retry"},"OnExitCode":{"description":"作业退出码，配合Action构成作业重试规则。取值范围：0～255。","type":"string","required":false,"example":"10"}},"required":false},"required":false,"maxItems":10}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"JobId":{"description":"Serverless作业ID。","type":"string","example":"10"},"RequestId":{"description":"请求ID。","type":"string","example":"04F0F334-1335-436C-A1D7-6C044FE73368"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParams","errorMessage":"The specified parameter %s is invalid."},{"errorCode":"NotEnabled","errorMessage":"You have not enabled this service"},{"errorCode":"InDebt","errorMessage":"Your account has overdue payments."}],"403":[{"errorCode":"InvalidClusterStatus","errorMessage":"The operation failed due to invalid cluster status."},{"errorCode":"ConflictOpt","errorMessage":"A conflicting operation is running."}],"404":[{"errorCode":"ClusterNotFound","errorMessage":"The specified cluster does not exist."}],"406":[{"errorCode":"EcsError","errorMessage":"An error occurred while calling the ECS API operation."},{"errorCode":"DbError","errorMessage":"A database service error occurred."},{"errorCode":"AliyunError","errorMessage":"An Alibaba Cloud product error occurred."},{"errorCode":"AgentError","errorMessage":"The agent service request failed: %s"},{"errorCode":"ServiceAPIError","errorMessage":"Failed to call the operation. Cause:%s"}],"407":[{"errorCode":"NotAuthorized","errorMessage":"You are not authorized by RAM for this request."}],"409":[{"errorCode":"PartFailure","errorMessage":"Part of the batch operation failed."}],"500":[{"errorCode":"UnknownError","errorMessage":"An unknown error occurred."}],"503":[{"errorCode":"ServiceUnavailable","errorMessage":"The request has failed due to a temporary failure of the server"}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"JobId\\\": \\\"10\\\",\\n  \\\"RequestId\\\": \\\"04F0F334-1335-436C-A1D7-6C044FE73368\\\"\\n}\",\"type\":\"json\"}]","title":"提交Serverless作业"}