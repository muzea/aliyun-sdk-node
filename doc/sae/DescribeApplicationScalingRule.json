{"path":"/pop/v1/sam/scale/applicationScalingRule","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"abilityTreeCode":"6320","abilityTreeNodes":["FEATUREsae5HLO11"]},"parameters":[{"name":"AppId","in":"query","schema":{"description":"应用ID。","type":"string","required":true,"example":"a0d2e04c-159d-40a8-b240-d2f2c263****"}},{"name":"ScalingRuleName","in":"query","schema":{"description":"弹性伸缩策略名称。\n","type":"string","required":true,"example":"test"}}],"responses":{"200":{"schema":{"description":"返回信息。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"73404D3D-EE4F-4CB2-B197-5C46F6A1****"},"TraceId":{"description":"调用链ID，用于精确查询调用信息。","type":"string","example":"0b57ff7e16243300839193068e****"},"Data":{"description":"返回结果。","type":"object","properties":{"Timer":{"description":"定时弹性伸缩。","type":"object","properties":{"EndDate":{"description":"定时弹性伸缩策略的短期结束日期。取值说明如下：\n\n- 当**BeginDate**和**EndDate**取值均为**null**时，表示长期执行，为默认值。\n- 当取值为具体日期时，例如**BeginDate**为**2021-03-25**，**EndDate**为**2021-04-25**，表示执行有效期为1个月。","type":"string","example":"2021-04-25"},"BeginDate":{"description":"定时弹性伸缩策略的短期起始日期。取值说明如下：\n\n- 当**BeginDate**和**EndDate**取值均为**null**时，表示长期执行，为默认值。\n- 当取值为具体日期时，例如**BeginDate**为**2021-03-25**，**EndDate**为**2021-04-25**，表示执行有效期为1个月。","type":"string","example":"2021-03-25"},"Schedules":{"description":"单天内触发时间点。","type":"array","items":{"description":"时间点数据。","type":"object","properties":{"AtTime":{"description":"时间点。格式：**时:分**。","type":"string","example":"08:00"},"TargetReplicas":{"description":"目标实例数。","type":"integer","format":"int32","example":"2"},"MinReplicas":{"description":"最小实例数。","type":"integer","format":"int32","example":"1"},"MaxReplicas":{"description":"最大实例数。","type":"integer","format":"int32","example":"10"}}}},"Period":{"description":"执行定时弹性伸缩策略的周期。取值说明如下：\n\n- **\\* \\* \\***：每天指定时间执行定时策略。\n- **\\* \\* Fri,Mon**：每周指定天数的指定时间执行定时策略，支持多选，GMT+8时区。取值说明如下： \n\n    - **Sun**：星期日\n    - **Mon**：星期一\n    - **Tue**：星期二\n    - **Wed**：星期三\n    - **Thu**：星期四\n    - **Fri**：星期五\n    - **Sat**：星期六\n- **1,2,3,28,31 \\* \\***：每月指定日期的指定时间执行定时策略，支持多选。取值范围\\[1,31\\]。若当月无31日，则跳过该日期执行定时策略。","type":"string","example":"* * *"}}},"UpdateTime":{"description":"弹性伸缩策略更新时间。单位：毫秒。","type":"integer","format":"int64","example":"1624330075827"},"AppId":{"description":"应用ID。","type":"string","example":"a0d2e04c-159d-40a8-b240-d2f2c263****"},"CreateTime":{"description":"弹性伸缩策略创建时间。单位：毫秒。","type":"integer","format":"int64","example":"1624329843790"},"LastDisableTime":{"description":"最近一次禁用弹性伸缩策略的时间。","type":"integer","format":"int64","example":"1641882854484"},"ScaleRuleEnabled":{"description":"弹性伸缩策略是否启用。取值说明如下：\n\n- **true**：启用状态。\n- **false**：禁用状态。","type":"boolean","example":"true"},"ScaleRuleType":{"description":"弹性伸缩策略类型。取值说明如下：\n\n- **timing**：定时弹性。\n- **metric**：监控指标弹性。\n- **mix**：混合弹性。","type":"string","example":"timing"},"Metric":{"description":"监控指标弹性伸缩。","type":"object","properties":{"Metrics":{"description":"监控指标弹性伸缩列表。","type":"array","items":{"description":"监控指标数据。","type":"object","properties":{"MetricTargetAverageUtilization":{"description":"监控指标的目标值。\n\n- CPU使用率目标值，单位为百分比。\n- 内存使用率目标值，单位为百分比。\n- QPS，单位为秒。\n- 响应时间，单位为毫秒。\n- TCP活跃连接数平均值，单位为个/秒。\n- 公网SLB QPS，单位为秒。\n- 公网SLB响应时间，单位为毫秒。\n- 私网SLB QPS，单位为秒。\n- 私网SLB响应时间，单位为毫秒。","type":"integer","format":"int32","example":"20"},"MetricType":{"description":"监控指标的触发条件。取值说明如下：\n\n- **CPU**：CPU使用率。\n- **MEMORY**：内存使用率。\n- **QPS**：JAVA应用1分钟内单个实例的平均QPS。\n- **RT**：JAVA应用1分钟内应用所有服务接口平均RT值。\n- **tcpActiveConn**：30秒内单个实例的平均TCP活跃连接数。\n- **SLB\\_QPS**：15秒内单个实例的平均公网SLB QPS。\n- **SLB\\_RT**：15秒内公网SLB平均响应时间。\n- **INTRANET\\_SLB\\_QPS**：15秒内单个实例的平均私网SLB QPS。\n- **INTRANET\\_SLB\\_RT**：15秒内私网SLB平均响应时间。","type":"string","example":"CPU"},"SlbProject":{"description":"SLB访问日志Project。","type":"string","example":"test"},"SlbLogstore":{"description":"SLB访问日志Logstore。","type":"string","example":"test"},"Vport":{"description":"SLB实例端口。","type":"string","example":"80"},"SlbId":{"description":"SLB实例ID。","type":"string","example":"lb-xxx"}}}},"MetricsStatus":{"description":"监控指标弹性状态。","type":"object","properties":{"DesiredReplicas":{"description":"目标实例数。","type":"integer","format":"int64","example":"2"},"NextScaleTimePeriod":{"description":"下一次监控指标弹性的周期。","type":"integer","format":"int32","example":"3"},"CurrentReplicas":{"description":"当前实例数。","type":"integer","format":"int64","example":"2"},"LastScaleTime":{"description":"最近一次弹性扩缩的时间。","type":"string","example":"2022-01-11T08:14:32Z"},"CurrentMetrics":{"description":"当前监控指标弹性数据。","type":"array","items":{"description":"监控指标数据。","type":"object","properties":{"Type":{"description":"数据类型。与监控指标关联。\n\n- **Resource**：**cpu**、**memory**的指标取值。\n- **Pods**：**tcpActiveConn**的指标取值。\n- **External**：**arms**、**slb**的指标取值。","type":"string","example":"Resource"},"CurrentValue":{"description":"当前值。","type":"integer","format":"int64","example":"0"},"Name":{"description":"触发条件的名称。\n\n- **cpu**：CPU使用率。\n- **memory**：内存使用率。\n- **arms\\_incall\\_rt**：JAVA应用1分钟内单个实例的平均QPS。\n- **arms\\_incall\\_rt**：JAVA应用1分钟内应用所有服务接口平均RT值。\n- **tcpActiveConn**：TCP活跃连接数。\n- **slb\\_incall\\_qps**：公网SLB QPS。\n- **slb\\_incall\\_rt**：公网SLB响应时间。\n- **intranet\\_slb\\_incall\\_qps**：私网SLB QPS。\n- **intranet\\_slb\\_incall\\_rt**：私网SLB响应时间。\n","type":"string","example":"cpu"}}}},"NextScaleMetrics":{"description":"下一次监控指标弹性列表。","type":"array","items":{"description":"监控指标数据。","type":"object","properties":{"NextScaleOutAverageUtilization":{"description":"下一次触发扩容条件的监控指标弹性的百分比数值。","type":"integer","format":"int32","example":"21"},"NextScaleInAverageUtilization":{"description":"下一次触发缩容条件的监控指标弹性的百分比数值。","type":"integer","format":"int32","example":"10"},"Name":{"description":"触发条件的名称。\n\n- **cpu**：CPU使用率。\n- **memory**：内存使用率。\n- **arms\\_incall\\_rt**：JAVA应用1分钟内单个实例的平均QPS。\n- **arms\\_incall\\_rt**：JAVA应用1分钟内应用所有服务接口平均RT值。\n- **tcpActiveConn**：TCP活跃连接数。\n- **slb\\_incall\\_qps**：公网SLB QPS。\n- **slb\\_incall\\_rt**：公网SLB响应时间。\n- **intranet\\_slb\\_incall\\_qps**：私网SLB QPS。\n- **intranet\\_slb\\_incall\\_rt**：私网SLB响应时间。","type":"string","example":"cpu"}}}}}},"MaxReplicas":{"description":"最大实例数。","type":"integer","format":"int32","example":"3"},"MinReplicas":{"description":"最小实例数。","type":"integer","format":"int32","example":"1"},"ScaleUpRules":{"description":"应用扩容规则。","type":"object","properties":{"Step":{"description":"弹性扩容步长。单位时间内最多扩容的实例数。","type":"integer","format":"int64","example":"100"},"StabilizationWindowSeconds":{"description":"扩容冷却时间。取值范围\\[0, 3600\\]，单位为秒。默认为0秒。","type":"integer","format":"int64","example":"300"},"Disabled":{"description":"是否禁止缩容。取值说明如下：\n\n- **true**：开启。\n- **false**：关闭。\n\n> 开启后将永远不会缩容该应用的实例，能有效防止在流量高峰期缩容造成业务风险。默认关闭。","type":"boolean","example":"false"}}},"ScaleDownRules":{"description":"应用缩容规则。","type":"object","properties":{"Step":{"description":"弹性缩容步长。单位时间内最多缩容的实例数。","type":"integer","format":"int64","example":"100"},"StabilizationWindowSeconds":{"description":"缩容冷却时间。取值范围\\[0, 3600\\]，单位为秒。默认为0秒。","type":"integer","format":"int64","example":"300"},"Disabled":{"description":"是否禁止缩容。取值说明如下：\n\n- **true**：开启。\n- **false**：关闭。\n\n> 开启后将永远不会缩容该应用的实例，能有效防止在流量高峰期缩容造成业务风险。默认关闭。","type":"boolean","example":"false"}}}}},"ScaleRuleName":{"description":"弹性伸缩策略名称。","type":"string","example":"test"},"MinReadyInstances":{"type":"integer","format":"int32"},"MinReadyInstanceRatio":{"type":"integer","format":"int32"}}},"Message":{"description":"附加信息。取值说明如下：\n\n- 请求正常，返回**success**。\n- 请求异常，返回具体异常错误码。","type":"string","example":"success"},"ErrorCode":{"description":"错误码。取值说明如下：\n\n- 请求成功：不返回**ErrorCode**字段。\n- 请求失败：返回**ErrorCode**字段。具体信息，请参见本文的**错误码**列表。","type":"string","example":"空"},"Code":{"description":"接口状态或POP错误码。取值说明如下：\n\n- **2xx**：成功。\n- **3xx**：重定向。\n- **4xx**：请求错误。\n- **5xx**：服务器错误。","type":"string","example":"200"},"Success":{"description":"重启应用实例是否成功。取值说明如下：\n\n- **true**：重启成功。\n- **false**：重启失败。","type":"boolean","example":"true"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"73404D3D-EE4F-4CB2-B197-5C46F6A1****\\\",\\n  \\\"TraceId\\\": \\\"0b57ff7e16243300839193068e****\\\",\\n  \\\"Data\\\": {\\n    \\\"Timer\\\": {\\n      \\\"EndDate\\\": \\\"2021-04-25\\\",\\n      \\\"BeginDate\\\": \\\"2021-03-25\\\",\\n      \\\"Schedules\\\": [\\n        {\\n          \\\"AtTime\\\": \\\"08:00\\\",\\n          \\\"TargetReplicas\\\": 2,\\n          \\\"MinReplicas\\\": 1,\\n          \\\"MaxReplicas\\\": 10\\n        }\\n      ],\\n      \\\"Period\\\": \\\"* * *\\\"\\n    },\\n    \\\"UpdateTime\\\": 1624330075827,\\n    \\\"AppId\\\": \\\"a0d2e04c-159d-40a8-b240-d2f2c263****\\\",\\n    \\\"CreateTime\\\": 1624329843790,\\n    \\\"LastDisableTime\\\": 1641882854484,\\n    \\\"ScaleRuleEnabled\\\": true,\\n    \\\"ScaleRuleType\\\": \\\"timing\\\",\\n    \\\"Metric\\\": {\\n      \\\"Metrics\\\": [\\n        {\\n          \\\"MetricTargetAverageUtilization\\\": 20,\\n          \\\"MetricType\\\": \\\"CPU\\\",\\n          \\\"SlbProject\\\": \\\"test\\\",\\n          \\\"SlbLogstore\\\": \\\"test\\\",\\n          \\\"Vport\\\": \\\"80\\\",\\n          \\\"SlbId\\\": \\\"lb-xxx\\\"\\n        }\\n      ],\\n      \\\"MetricsStatus\\\": {\\n        \\\"DesiredReplicas\\\": 2,\\n        \\\"NextScaleTimePeriod\\\": 3,\\n        \\\"CurrentReplicas\\\": 2,\\n        \\\"LastScaleTime\\\": \\\"2022-01-11T08:14:32Z\\\",\\n        \\\"CurrentMetrics\\\": [\\n          {\\n            \\\"Type\\\": \\\"Resource\\\",\\n            \\\"CurrentValue\\\": 0,\\n            \\\"Name\\\": \\\"cpu\\\"\\n          }\\n        ],\\n        \\\"NextScaleMetrics\\\": [\\n          {\\n            \\\"NextScaleOutAverageUtilization\\\": 21,\\n            \\\"NextScaleInAverageUtilization\\\": 10,\\n            \\\"Name\\\": \\\"cpu\\\"\\n          }\\n        ]\\n      },\\n      \\\"MaxReplicas\\\": 3,\\n      \\\"MinReplicas\\\": 1,\\n      \\\"ScaleUpRules\\\": {\\n        \\\"Step\\\": 100,\\n        \\\"StabilizationWindowSeconds\\\": 300,\\n        \\\"Disabled\\\": false\\n      },\\n      \\\"ScaleDownRules\\\": {\\n        \\\"Step\\\": 100,\\n        \\\"StabilizationWindowSeconds\\\": 300,\\n        \\\"Disabled\\\": false\\n      }\\n    },\\n    \\\"ScaleRuleName\\\": \\\"test\\\",\\n    \\\"MinReadyInstances\\\": 0,\\n    \\\"MinReadyInstanceRatio\\\": 0\\n  },\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"ErrorCode\\\": \\\"空\\\",\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeApplicationScalingRuleResponse>\\n    <RequestId>73404D3D-EE4F-4CB2-B197-5C46F6A1****</RequestId>\\n    <TraceId>0b57ff7e16243300839193068e****</TraceId>\\n    <Data>\\n        <Timer>\\n            <EndDate>2021-04-25</EndDate>\\n            <BeginDate>2021-03-25</BeginDate>\\n            <Schedules>\\n                <AtTime>08:00</AtTime>\\n                <TargetReplicas>2</TargetReplicas>\\n                <MinReplicas>1</MinReplicas>\\n                <MaxReplicas>10</MaxReplicas>\\n            </Schedules>\\n            <Period>* * *</Period>\\n        </Timer>\\n        <UpdateTime>1624330075827</UpdateTime>\\n        <AppId>a0d2e04c-159d-40a8-b240-d2f2c263****</AppId>\\n        <CreateTime>1624329843790</CreateTime>\\n        <LastDisableTime>1641882854484</LastDisableTime>\\n        <ScaleRuleEnabled>true</ScaleRuleEnabled>\\n        <ScaleRuleType>timing</ScaleRuleType>\\n        <Metric>\\n            <Metrics>\\n                <MetricTargetAverageUtilization>20</MetricTargetAverageUtilization>\\n                <MetricType>CPU</MetricType>\\n                <SlbProject>test</SlbProject>\\n                <SlbLogstore>test</SlbLogstore>\\n                <Vport>80</Vport>\\n                <SlbId>lb-xxx</SlbId>\\n            </Metrics>\\n            <MetricsStatus>\\n                <DesiredReplicas>2</DesiredReplicas>\\n                <NextScaleTimePeriod>3</NextScaleTimePeriod>\\n                <CurrentReplicas>2</CurrentReplicas>\\n                <LastScaleTime>2022-01-11T08:14:32Z</LastScaleTime>\\n                <CurrentMetrics>\\n                    <Type>Resource</Type>\\n                    <CurrentValue>0</CurrentValue>\\n                    <Name>cpu</Name>\\n                </CurrentMetrics>\\n                <NextScaleMetrics>\\n                    <NextScaleOutAverageUtilization>21</NextScaleOutAverageUtilization>\\n                    <NextScaleInAverageUtilization>10</NextScaleInAverageUtilization>\\n                    <Name>cpu</Name>\\n                </NextScaleMetrics>\\n            </MetricsStatus>\\n            <MaxReplicas>3</MaxReplicas>\\n            <MinReplicas>1</MinReplicas>\\n            <ScaleUpRules>\\n                <Step>100</Step>\\n                <StabilizationWindowSeconds>300</StabilizationWindowSeconds>\\n                <Disabled>false</Disabled>\\n            </ScaleUpRules>\\n            <ScaleDownRules>\\n                <Step>100</Step>\\n                <StabilizationWindowSeconds>300</StabilizationWindowSeconds>\\n                <Disabled>false</Disabled>\\n            </ScaleDownRules>\\n        </Metric>\\n        <ScaleRuleName>test</ScaleRuleName>\\n    </Data>\\n    <Message>success</Message>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</DescribeApplicationScalingRuleResponse>\",\"errorExample\":\"\"}]","title":"DescribeApplicationScalingRule","summary":"调用DescribeApplicationScalingRules接口查询应用的单个弹性伸缩策略。"}