{"path":"/pop/v1/sam/ingress/Ingress","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"6306","abilityTreeNodes":["FEATUREsaeD9PL61"]},"parameters":[{"name":"NamespaceId","in":"query","schema":{"description":"应用所在命名空间ID，目前不支持跨命名空间的应用。","type":"string","required":true,"example":"cn-beijing:sae-test"}},{"name":"Description","in":"query","schema":{"description":"路由规则名称。","type":"string","required":false,"example":"ingress-for-sae-test"}},{"name":"SlbId","in":"query","schema":{"description":"路由规则所使用的SLB。","type":"string","required":true,"example":"lb-uf6hucc7inlqrtcq5****"}},{"name":"ListenerPort","in":"query","schema":{"description":"SLB监听端口，该端口不能被占用。","type":"integer","format":"int32","required":true,"example":"80"}},{"name":"CertId","in":"query","schema":{"description":"**CLB**证书ID。取值说明如下：\n\n- **LoadBalanceType**为**clb**时，使用该字段来配置HTTPS监听证书。\n\nCLB使用SSL证书ID的更多信息，请参见[管理证书（CLB）](~~90792~~)。","type":"string","required":false,"example":"188077086902****_176993d****_181437****_108724****"}},{"name":"CertIds","in":"query","schema":{"description":"**ALB**多证书ID。取值说明如下：\n\n- **LoadBalanceType**为**alb**时，使用该字段来配置HTTPS监听多证书，多个证书ID之间使用逗号分割。\n\n- ALB使用的SSL证书ID需要从数字证书产品获取。例如配置`756***-cn-hangzhou`，`756***`为产品页获取的证书ID, `-cn-hangzhou`为固定后缀。更多信息，请参见[管理证书（ALB）](~~209076~~)。","type":"string","required":false,"example":"87***35-cn-hangzhou,812***3-cn-hangzhou"}},{"name":"DefaultRule","in":"query","schema":{"description":"默认转发规则。按照IP地址，通过指定端口转发流量到指定应用。参数说明如下：\n\n- **appId**：应用ID。\n- **containerPort**：应用实例端口。\n\n> 所有未匹配或不满足**Rules**转发规则的请求都会转到该指定应用。","type":"string","required":true,"example":"{\"appId\":\"395b60e4-0550-458d-9c54-a265d036****\",\"containerPort\":8080}"}},{"name":"Rules","in":"formData","schema":{"description":"转发规则。按照域名和请求路径，通过指定端口转发流量到指定应用。参数说明如下：\n\n- **appId**：应用ID。\n- **containerPort**：应用实例端口。\n- **domain**：域名。\n- **path**：请求路径。\n- **backendProtocol**：后端服务协议，支持http/https/grpc，默认值为http。\n- **rewritePath**：重写路径。","type":"string","required":true,"example":"[{\"appId\":\"395b60e4-0550-458d-9c54-a265d036****\",\"containerPort\":8080,\"domain\":\"www.sae.site\",\"path\":\"/path1\"},{\"appId\":\"666403ce-d25b-47cf-87fe-497565d2****\",\"containerPort\":8080,\"domain\":\"sae.site\",\"path\":\"/sys/(.*)/(.*)/aaa\",\"rewritePath\":\"/${1}\",\"backendProtocol\":\"http\"}]"}},{"name":"LoadBalanceType","in":"query","schema":{"description":"负载均衡SLB的类型。取决于创建路由规则时填写的类型，更新时不可变更。取值说明如下：\n\n- **clb**：传统型负载均衡CLB（原SLB）。\n- **alb**：应用型负载均衡ALB。","type":"string","required":false,"example":"clb"}},{"name":"ListenerProtocol","in":"query","schema":{"description":"请求转发协议。取值说明如下：\n\n- **HTTP**：适用于需要对数据内容进行识别的应用。\n- **HTTPS**：适用于需要加密传输的应用。","type":"string","required":false,"example":"HTTP"}}],"responses":{"200":{"schema":{"description":"返回数据。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"91F93257-7A4A-4BD3-9A7E-2F6EAE6D****"},"Message":{"description":"附加信息。取值说明如下：\n\n- 请求正常，返回**success**。\n- 请求异常，返回具体异常错误码。","type":"string","example":"success"},"TraceId":{"description":"调用链ID，用于精确查询调用信息。","type":"string","example":"0a98a02315955564772843261e****"},"Data":{"description":"返回结果。","type":"object","properties":{"IngressId":{"description":"路由规则ID。","type":"integer","format":"int64","example":"87"}}},"ErrorCode":{"description":"错误码。取值说明如下：\n\n- 请求成功：不返回**ErrorCode**字段。\n- 请求失败：返回**ErrorCode**字段。具体信息，请参见本文的**错误码**列表。","type":"string","example":"空"},"Code":{"description":"接口状态或POP错误码。取值说明如下：\n\n- **2xx**：成功。\n- **3xx**：重定向。\n- **4xx**：请求错误。\n- **5xx**：服务器错误。","type":"string","example":"200"},"Success":{"description":"创建路由规则是否成功。取值说明如下：\n\n- **true**：创建成功。\n- **false**：创建失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.NotEmpty","errorMessage":"You must specify the parameter %s."},{"errorCode":"InvalidParameter.Obviously","errorMessage":"The specified parameter is invalid {%s}."},{"errorCode":"InvalidParameter.WithMessage","errorMessage":"The parameter is invalid {%s}: %s"},{"errorCode":"Slb.NotFound","errorMessage":"The SLB instance does not exist: slbId [%s]"},{"errorCode":"Exceed.IngressRule","errorMessage":"The number of Ingress related rules must be less than or equal to 40."},{"errorCode":"SlbListenerPort.NotAvailable","errorMessage":"The SLB listening port is unavailable: slbId [%s], port [%s]"},{"errorCode":"SSLCert.NotFound","errorMessage":"The specified SSL certificate cannot be found."}],"404":[{"errorCode":"InvalidResponse.Api","errorMessage":"The response of API %s is empty."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"91F93257-7A4A-4BD3-9A7E-2F6EAE6D****\\\",\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"TraceId\\\": \\\"0a98a02315955564772843261e****\\\",\\n  \\\"Data\\\": {\\n    \\\"IngressId\\\": 87\\n  },\\n  \\\"ErrorCode\\\": \\\"空\\\",\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateIngressResponse>\\n    <RequestId>91F93257-7A4A-4BD3-9A7E-2F6EAE6D****</RequestId>\\n    <Message>success</Message>\\n    <TraceId>0a98a02315955564772843261e****</TraceId>\\n    <Data>\\n        <IngressId>87</IngressId>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</CreateIngressResponse>\",\"errorExample\":\"\"}]","title":"创建一条路由规则","summary":"调用CreateIngress接口创建一条路由规则。"}