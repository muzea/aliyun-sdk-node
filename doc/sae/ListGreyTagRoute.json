{"summary":"根据应用ID查询灰度规则详情。","path":"/pop/v1/sam/tagroute/greyTagRouteList","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"10488","abilityTreeNodes":["FEATUREsaeETR3ZD"]},"parameters":[{"name":"AppId","in":"query","schema":{"title":"应用ID","description":"应用ID。","type":"string","required":true,"example":"7171a6ca-d1cd-4928-8642-7d5cfe69****"}}],"responses":{"200":{"schema":{"description":"返回数据。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"9D29CBD0-45D3-410B-9826-52F86F90****"},"Message":{"description":"附加信息。取值说明如下：\n\n- 请求正常，返回**success**。\n- 请求异常，返回具体异常错误码。","type":"string","example":"success"},"TraceId":{"description":"调用链ID，用于精确查询调用信息。","type":"string","example":"0a98a02315955564772843261e****"},"Data":{"description":"灰度规则信息。","type":"object","properties":{"CurrentPage":{"description":"当前页码。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"分页查询时设置的每页数量。目前只能为**1**。","type":"integer","format":"int32","example":"1"},"TotalSize":{"description":"总个数。目前只能为**1**。","type":"integer","format":"int64","example":"1"},"Result":{"description":"返回结果。","type":"array","items":{"description":"返回数据。","type":"object","properties":{"GreyTagRouteId":{"description":"规则ID。","type":"integer","format":"int64","example":"1"},"Name":{"description":"规则名称。","type":"string","example":"rule-name"},"Description":{"description":"规则描述。","type":"string","example":"test"},"ScRules":{"description":"Spring Cloud灰度规则。","type":"array","items":{"description":"规则详情。","type":"object","properties":{"path":{"description":"Spring Cloud应用灰度规则对应的路径。","type":"string","example":"/path"},"condition":{"description":"灰度规则的条件模式。取值说明如下：\n- **AND**：表示与，即同时满足条件列表中的所有条件。\n- **OR**：表示或，即满足条件列表中的任一条件。","type":"string","example":"OR"},"items":{"description":"条件列表。","type":"array","items":{"description":"条件列表数据。","type":"object","properties":{"type":{"description":"比较类型。取值说明如下：\n- **param**：表示Parameter。\n- **cookie**：表示Cookie。\n- **header**：表示Header。","type":"string","example":"cookie"},"name":{"description":"参数名。","type":"string","example":"test"},"operator":{"description":"运算符。取值说明如下：\n- **rawvalue**：表示直接比较。\n- **list**：表示白名单。\n- **mod**：表示对100取模。\n- **deterministic\\_proportional\\_steaming\\_division**：表示百分比。","type":"string","example":"rawvalue"},"value":{"description":"参数取值，根据**type**和**name**得到的值跟这个值进行比较。","type":"string","example":"test"},"cond":{"description":"比较操作符。可取值：**>**、**<**、**>=**、**<=**、**==**以及**!=**。","type":"string","example":"=="},"index":{"title":"abandon","description":"Spring Cloud应用不涉及。","type":"integer","format":"int32","example":"N/A"},"expr":{"description":"Spring Cloud应用不涉及。","type":"string","example":"N/A"}}}}}}},"AlbRules":{"description":"为配置好ALB网关路由的应用创建的灰度规则。","type":"array","items":{"description":"灰度规则详情。","type":"object","properties":{"ingressId":{"description":"网关路由ID。","type":"string","example":"23"},"condition":{"description":"灰度规则的条件模式，当前只支持AND：表示同时满足条件列表中的所有条件。","type":"string","example":"AND"},"items":{"description":"条件列表。","type":"array","items":{"description":"条件列表详情。","type":"object","properties":{"type":{"description":"比较类型。取值说明如下：\n- **sourceIp**：表示SourceIp。\n- **cookie**：表示Cookie。\n- **header**：表示Header。","type":"string","example":"cookie"},"name":{"description":"参数名。","type":"string","example":"example"},"operator":{"description":"运算符。取值说明如下：目前只支持rawvalue：直接比较。","type":"string","example":"rawvalue"},"value":{"description":"参数取值，根据type和name得到的值跟这个值进行比较。","type":"string","example":"test"},"cond":{"description":"暂支持==。","type":"string","example":"=="},"index":{"title":"abandon","description":"ALB应用无需填写。","type":"integer","format":"int32","example":"N/A"},"expr":{"description":"ALB应用无需填写。","type":"string","example":"N/A"}}}},"serviceName":{"description":"服务名称。","type":"string","example":"s-6366-e3****-99**"}}}},"DubboRules":{"description":"Dubbo服务灰度规则。","type":"array","items":{"description":"灰度规则信息。","type":"object","properties":{"serviceName":{"description":"Dubbo服务名称。","type":"string","example":"com.alibaba.edas.boot.EchoService"},"group":{"description":"灰度规则对应的Dubbo服务的分组。","type":"string","example":"DUBBO"},"version":{"description":"Dubbo服务版本。","type":"string","example":"1.0.0"},"methodName":{"description":"Dubbo服务的方法名。","type":"string","example":"echo"},"condition":{"description":"灰度规则的条件模式。取值说明如下：\n- **AND**：表示与，即同时满足条件列表中的所有条件。\n- **OR**：表示或，即满足条件列表中的任一条件。","type":"string","example":"OR"},"items":{"description":"条件列表。","type":"array","items":{"description":"条件详情。","type":"object","properties":{"index":{"description":"参数编号，0表示第一个参数。","type":"integer","format":"int32","example":"0"},"expr":{"description":"参数值获取表达式。语法遵循SpEL（link）表达式，取值说明如下：\n- **留空**：表示直接取当前参数的值。\n- **.name**：表示取参数的name属性，相当于args0.getName()。\n- **.isEnabled()**：表示取参数的enabled属性，相当于args0.isEnabled()。\n- **[0]**：表示当前参数应是一个数组，取数组的第一个值，相当于args0\\[0]，注意开始没有英文句点（.）。\n- **.get(0)**：表示当前参数应是一个List，取List的第一个值，相当于args0.get(0)。\n- **.get(\"key\")**：表示当前参数是一个Map，获取key对应的值，相当于args0.get(\"key\")。","type":"string","example":".name"},"operator":{"description":"运算符。取值说明如下：\n- **rawvalue**：表示直接比较。\n- **list**：表示白名单。\n- **mod**：表示对100取模。\n- **deterministic\\_proportional\\_steaming\\_division**：表示百分比。","type":"string","example":"rawvalue"},"value":{"description":"参数取值，根据**expr**和**index**得到的值跟这个值进行比较。","type":"string","example":"test"},"cond":{"description":"比较操作符。可取值：**>**、**<**、**>=**、**<=**、**==**以及**!=**。","type":"string","example":"=="},"type":{"title":"abandon","description":"Dubbo服务不涉及。","type":"string","example":"N/A"},"name":{"title":"abandon","description":"Dubbo服务不涉及。","type":"string","example":"N/A"}}}}}}},"CreateTime":{"description":"规则被创建的时间戳。单位：毫秒。","type":"integer","format":"int64","example":"1619007592013"},"UpdateTime":{"description":"规则被更新的时间戳。单位：毫秒。","type":"integer","format":"int64","example":"1609434061000"}}}}}},"ErrorCode":{"description":"错误码。取值说明如下：\n\n- 请求成功：不返回**ErrorCode**字段。\n- 请求失败：返回**ErrorCode**字段。具体信息，请参见本文的**错误码**列表。","type":"string","example":"空"},"Code":{"description":"接口状态或POP错误码。取值说明如下：\n\n- **2xx**：成功。\n- **3xx**：重定向。\n- **4xx**：请求错误。\n- **5xx**：服务器错误。","type":"string","example":"200"},"Success":{"description":"查询变更单信息是否成功。取值说明如下：\n\n- **true**：表示查询成功。\n- **false**：表示查询失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.NotEmpty","errorMessage":"You must specify the parameter %s."},{"errorCode":"InvalidParameter.Obviously","errorMessage":"The specified parameter is invalid {%s}."},{"errorCode":"InvalidParameter.WithMessage","errorMessage":"The parameter is invalid {%s}: %s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"9D29CBD0-45D3-410B-9826-52F86F90****\\\",\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"TraceId\\\": \\\"0a98a02315955564772843261e****\\\",\\n  \\\"Data\\\": {\\n    \\\"CurrentPage\\\": 1,\\n    \\\"PageSize\\\": 1,\\n    \\\"TotalSize\\\": 1,\\n    \\\"Result\\\": [\\n      {\\n        \\\"GreyTagRouteId\\\": 1,\\n        \\\"Name\\\": \\\"rule-name\\\",\\n        \\\"Description\\\": \\\"test\\\",\\n        \\\"ScRules\\\": [\\n          {\\n            \\\"path\\\": \\\"/path\\\",\\n            \\\"condition\\\": \\\"OR\\\",\\n            \\\"items\\\": [\\n              {\\n                \\\"type\\\": \\\"cookie\\\",\\n                \\\"name\\\": \\\"test\\\",\\n                \\\"operator\\\": \\\"rawvalue\\\",\\n                \\\"value\\\": \\\"test\\\",\\n                \\\"cond\\\": \\\"==\\\",\\n                \\\"index\\\": 0,\\n                \\\"expr\\\": \\\"N/A\\\"\\n              }\\n            ]\\n          }\\n        ],\\n        \\\"AlbRules\\\": [\\n          {\\n            \\\"ingressId\\\": \\\"23\\\",\\n            \\\"condition\\\": \\\"AND\\\",\\n            \\\"items\\\": [\\n              {\\n                \\\"type\\\": \\\"cookie\\\",\\n                \\\"name\\\": \\\"example\\\",\\n                \\\"operator\\\": \\\"rawvalue\\\",\\n                \\\"value\\\": \\\"test\\\",\\n                \\\"cond\\\": \\\"==\\\",\\n                \\\"index\\\": 0,\\n                \\\"expr\\\": \\\"N/A\\\"\\n              }\\n            ],\\n            \\\"serviceName\\\": \\\"s-6366-e3****-99**\\\"\\n          }\\n        ],\\n        \\\"DubboRules\\\": [\\n          {\\n            \\\"serviceName\\\": \\\"com.alibaba.edas.boot.EchoService\\\",\\n            \\\"group\\\": \\\"DUBBO\\\",\\n            \\\"version\\\": \\\"1.0.0\\\",\\n            \\\"methodName\\\": \\\"echo\\\",\\n            \\\"condition\\\": \\\"OR\\\",\\n            \\\"items\\\": [\\n              {\\n                \\\"index\\\": 0,\\n                \\\"expr\\\": \\\".name\\\",\\n                \\\"operator\\\": \\\"rawvalue\\\",\\n                \\\"value\\\": \\\"test\\\",\\n                \\\"cond\\\": \\\"==\\\",\\n                \\\"type\\\": \\\"N/A\\\",\\n                \\\"name\\\": \\\"N/A\\\"\\n              }\\n            ]\\n          }\\n        ],\\n        \\\"CreateTime\\\": 1619007592013,\\n        \\\"UpdateTime\\\": 1609434061000\\n      }\\n    ]\\n  },\\n  \\\"ErrorCode\\\": \\\"空\\\",\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ListGreyTagRouteResponse>\\n    <RequestId>9D29CBD0-45D3-410B-9826-52F86F90****</RequestId>\\n    <Message>success</Message>\\n    <TraceId>0a98a02315955564772843261e****</TraceId>\\n    <Data>\\n        <CurrentPage>1</CurrentPage>\\n        <PageSize>1</PageSize>\\n        <TotalSize>1</TotalSize>\\n        <Result>\\n            <GreyTagRouteId>1</GreyTagRouteId>\\n            <Name>rule-name</Name>\\n            <Description>test</Description>\\n            <ScRules>\\n                <path>/path</path>\\n                <condition>OR</condition>\\n                <items>\\n                    <type>cookie</type>\\n                    <name>test</name>\\n                    <operator>rawvalue</operator>\\n                    <value>test</value>\\n                    <cond>==</cond>\\n                    <expr>N/A</expr>\\n                </items>\\n            </ScRules>\\n            <AlbRules>\\n                <ingressId>23</ingressId>\\n                <condition>AND</condition>\\n                <items>\\n                    <type>cookie</type>\\n                    <name>example</name>\\n                    <operator>rawvalue</operator>\\n                    <value>test</value>\\n                    <cond>==</cond>\\n                    <expr>N/A</expr>\\n                </items>\\n                <serviceName>s-6366-e3****-99**</serviceName>\\n            </AlbRules>\\n            <DubboRules>\\n                <serviceName>com.alibaba.edas.boot.EchoService</serviceName>\\n                <group>DUBBO</group>\\n                <version>1.0.0</version>\\n                <methodName>echo</methodName>\\n                <condition>OR</condition>\\n                <items>\\n                    <index>0</index>\\n                    <expr>.name</expr>\\n                    <operator>rawvalue</operator>\\n                    <value>test</value>\\n                    <cond>==</cond>\\n                    <type>N/A</type>\\n                    <name>N/A</name>\\n                </items>\\n            </DubboRules>\\n            <CreateTime>1619007592013</CreateTime>\\n            <UpdateTime>1609434061000</UpdateTime>\\n        </Result>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</ListGreyTagRouteResponse>\",\"errorExample\":\"\"}]","title":"ListGreyTagRoute","description":"> 目前一个应用只能配置一条灰度规则。","requestParamsDescription":"- **ScRule参数说明**\n\n|参数名称 |类型|示例 |描述 |\n| --- | --- | --- | --- |\n|condition|String|OR |灰度规则的条件模式。取值说明如下：<br />- **AND**：表示与，即同时满足条件列表中的所有条件。<br />-    **OR**：表示或，即满足条件列表中的任一条件。|\n|path|String  | /path| Spring Cloud应用灰度规则对应的path。|\n|items |Array of items | |条件列表。|\n\n**Item参数说明**\n\n|参数名称 |类型|示例 |描述 |\n| --- | --- | --- | --- |\n|name|String|test |参数名。|\n|cond |String | == |比较操作符。可取值：**>**、**<**、**>=**、**<=**、**==**以及**!=**。|\n|type | String| cookie |比较类型。取值说明如下：<br />- **param**：表示Parameter。<br />- **cookie**：表示Cookie。<br />- **header**：表示Header。 |\n|value|String | test| 参数取值，根据**type**和**name**得到的值跟这个值进行比较。|\n|operator| String| rawvalue|运算符。取值说明如下：<br />- **rawvalue**：表示直接比较。<br />- **list**：表示白名单。<br />- **mod**：表示对100取模。<br />- **deterministic_proportional_steaming_division**：表示百分比。|\n\n- **DubboRule参数说明**\n\n|参数名称 |类型|示例 |描述 |\n| --- | --- | --- | --- |\n|condition|String|OR |灰度规则的条件模式。取值说明如下：<br />- **AND**：表示与，即同时满足条件列表中的所有条件。<br />- **OR**：表示或，即满足条件列表中的任一条件。|\n|methodName|String  | echo| Dubbo服务的方法名。|\n|serviceName| String| com.alibaba.edas.boot.EchoService| Dubbo服务名称。|\n|version |String | 1.0.0| Dubbo服务版本。|\n|items |Array of items | |条件列表。|\n|group|String|DUBBO|灰度规则对应的Dubbo服务的分组。|\n\n**Item参数说明**\n\n|参数名称 |类型|示例 |描述 |\n| --- | --- | --- | --- |\n|index|Integer|0 |参数编号，0表示第一个参数。|\n|expr|String|.name|参数值获取表达式。语法遵循SpEL（link）表达式，取值说明如下：<br />- **留空**：表示直接取当前参数的值。<br />- **.name**：表示取参数的name属性，相当于args0.getName()。<br />- **.isEnabled()** ：表示取参数的enabled属性，相当于args0.isEnabled()。<br />- **[0]**：表示当前参数应是一个数组，取数组的第一个值，相当于args0[0]，注意开始没有英文句点（.）。<br />- **.get(0) **：表示当前参数应是一个List，取List的第一个值，相当于args0.get(0)。<br />- **.get(\"key\")**：表示当前参数是一个Map，获取key对应的值，相当于args0.get(\"key\")。|\n|cond |String | == |比较操作符。可取值：**>**、**<**、**>=**、**<=**、**==**以及**!=**。|\n|value|String | test| 参数取值，根据**expr**和**index**得到的值跟这个值进行比较。|\n|operator| String| rawvalue|运算符。取值说明如下：<br />- **rawvalue**：表示直接比较。<br />- **list**：表示白名单。<br />- **mod**：表示对100取模。<br />- **deterministic_proportional_steaming_division**：表示百分比。|"}