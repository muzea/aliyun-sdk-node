{"summary":"创建PAI-EAS服务。","path":"/api/v2/services","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"body","in":"body","schema":{"description":"请求body。其中关键请求参数配置说明，请参见下方的**表 1. 请求 Body 参数**和**表 2. metadata 参数**。更多参数配置详情，请参见[服务模型所有相关参数说明](~~450525~~)。","type":"string","required":false,"example":"镜像部署服务：\n{\n  \"name\": \"foo\",\n  \"metadata\": {\n    \"instance\": 2,\n    \"memory\": 7000,\n    \"cpu\": 4\n    },\n  \"containers\": [\n    {\n      \"image\": \"****\",\n      \"script\": \"**** --listen=0.0.0.0 --server_port=8000 --headless\",\n      \"port\": 8000\n    }\n  ],\n  \"storage\": [\n    {\n      \"oss\": {\n        \"path\": \"oss://examplebuket/data111/\",\n        \"readOnly\": false\n      },\n      \"properties\": {\n        \"resource_type\": \"model\"\n      },\n      \"mount_path\": \"/data\"\n    }\n  ]\n}\n镜像部署AI-Web应用：\n{\n  \"name\": \"foo\",\n  \"metadata\": {\n    \"instance\": 1,\n    \"memory\": 7000,\n    \"cpu\": 4,\n    \"enable_webservice\": true\n  },\n  \"containers\": [\n    {\n      \"image\": \"****\",\n      \"script\": \"**** --listen=0.0.0.0 --server_port=8000 --headless\",\n      \"port\": 8000\n    }\n  ],\n  \"storage\": [\n    {\n      \"oss\": {\n        \"path\": \"oss://examplebucket/data111/\",\n        \"readOnly\": false\n      },\n      \"properties\": {\n      \"resource_type\": \"model\"\n      },\n      \"mount_path\": \"/data\"\n    }\n  ]\n}\n模型+processor部署服务：\n{\n  \"metadata\": {\n    \"instance\": 1,\n    \"memory\": 7000,\n    \"cpu\": 4\n  },\n  \"name\": \"foo\",\n  \"model_config\": {},\n  \"processor_type\": \"python\",\n  \"processor_path\": \"oss://****\",\n  \"processor_entry\": \"a.py\",\n  \"model_path\": \"oss://****\"\n}"}},{"name":"Develop","in":"query","schema":{"title":"是否进入开发模式。","description":"是否进入开发模式。","type":"string","required":false,"enumValueTitles":{"true":"进入开发模式","false":"不进入开发模式"},"example":"true"}},{"name":"Labels","in":"query","style":"json","schema":{"description":"用户自定义标签。","type":"object","required":false,"additionalProperties":{"type":"string","description":"标签。","example":"{\"key\":\"value\"}"}}},{"name":"WorkspaceId","in":"query","schema":{"description":"工作空间ID。","type":"string","required":false,"example":"123456"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回结果。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"40325405-579C-4D82****"},"ServiceId":{"description":"新创建服务的服务ID。","type":"string","example":"eas-m-aaxxxddf"},"ServiceName":{"description":"新创建服务的服务名字。","type":"string","example":"yourname"},"Status":{"description":"新服务的当前状态。","type":"string","example":"Creating"},"Region":{"description":"新创建服务所属的区域ID。","type":"string","example":"cn-shanghai"},"InternetEndpoint":{"description":"新创建服务的公网Endpoint。","type":"string","example":"http://pai-eas.vpc.cn-shanghai.****"},"IntranetEndpoint":{"description":"新创建服务的内网Endpoint。","type":"string","example":"http://pai-eas.cn-shanghai.****"}}}},"400":{},"403":{},"409":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"40325405-579C-4D82****\\\",\\n  \\\"ServiceId\\\": \\\"eas-m-aaxxxddf\\\",\\n  \\\"ServiceName\\\": \\\"yourname\\\",\\n  \\\"Status\\\": \\\"Creating\\\",\\n  \\\"Region\\\": \\\"cn-shanghai\\\",\\n  \\\"InternetEndpoint\\\": \\\"http://pai-eas.vpc.cn-shanghai.****\\\",\\n  \\\"IntranetEndpoint\\\": \\\"http://pai-eas.cn-shanghai.****\\\"\\n}\",\"type\":\"json\"}]","title":"创建服务","description":"**请确保在使用该接口前，已充分了解EAS产品的收费方式和[价格](~~144261~~)。**","requestParamsDescription":"**表 1. 请求Body参数**\n\n|名称|类型|是否必选|说明|\n|---|---|---|---|\n|name|String|是|服务名称，在同一个地域内全局唯一。|\n|token|String|否|指定用于访问鉴权的Token字符串，若不指定则按**generate_token**自动生成。|\n|model_path|String|否|模型相关的文件，支持HTTP和OSS两种格式，HTTP地址需为Public可访问的。若为OSS地址，则输入可以是目录或者文件；若文件为`.tar.gz`、`.tar.bz2`、`.zip`等压缩包，会自动解压。|\n|role_arn|string|否|**model_path**或**processor_path**为OSS地址时，需要指定用于OSS授权的role_arn，role_arn的获取参数Role_ARN。|\n|oss_endpoint|String|否|**model_path**或**processor_path**为OSS地址时，需要指定OSS Bucket对应的endpoint。|\n|model_entry|String|否|模型的入口文件，若不指定，则使用**model_path**中的文件名，可以包含任意文件，主文件的路径会传递给Processor中的`Load()`函数。|\n|processor_path|String|是|Processor相关的文件包，支持本地文件和HTTP链接地址，若文件为`.tar.gz`、`.tar.bz2`、`.zip`等压缩包，会自动解压。|\n|processor_entry|String|否|**C、C++、Python类型必选**。Processor的主文件，其中包含了预测所需要`Load()`函数和`Process()`函数的实现。|\n|processor_mainclass|String|否|**Java类型必选**。Processor的主文件，JAR包中的mainclass。|\n|processor_type|String|是|processor实现的语言，目前已支持C、C++、Java、Python。|\n|metadata|Dict|否|服务的meta信息。详见下表2。|\n|cloud|Dict|否|目前只有指定机型部署时会用到，传参的样式为`\"cloud\":{\"computing\":{\"instance_type\": \"ecs.gxxxxxx.large\"}}`。|\n|containers|List|否|自定义镜像部署。如果Processor部署无法满足需求，可以使用自定义镜像部署，详情请参见[服务部署：自定义镜像](~~258246~~)。|\n>model_path和processor_path为输入模型数据和processor数据的数据来源，支持HTTP和OSS两种数据源，使用test命令进行本地调试时支持本地文件和目录。\n- 若使用HTTP地址，则需要将相关文件打包成.tar.gz、.tar.bz2、.zip等压缩包，可上传至OSS并生成HTTP地址。\n- 若使用OSS地址，则输入可以是目录，也可以是文件。\n\n\n**表 2. metadata参数**\n|名称|类型|是否必选|描述|示例值|\n|---|---|---|---|---|\n|instance|Int|否|服务启动的Worker数目。|1|\n|cpu|Int|否|每个Worker需要的CPU数目。|1|\n|gpu|Int|否|每个Worker需要的GPU数目。|0|\n|memory|Int|否|每个Worker需要的内存大小，单位为MB。|1000|\n|resource|String|否|服务所属的资源组。|eas-r-aaabbbccc|\n|rpc.worker_threads|Int|否|每个Instance中用于并发处理请求的线程数。|5|\n|rpc.max_queue_size|Int|否|请求处理时队列的最大长度，队列满时新请求会被以450状态码丢弃。|64|\n|rpc.keepalive|Int|否|请求的超时时间，单位为毫秒。|5000|\n|rpc.rate_limit|Int|否|单实例请求限流的QPS值，单实例QPS超出该值后的请求会被返回429丢弃。|0|\n|release|Bool|否|若为true，则要创建一个灰度发布服务。|false|"}