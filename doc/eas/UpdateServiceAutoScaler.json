{"summary":"修改服务已有的自动扩缩控制器配置。","path":"/api/v2/services/{ClusterId}/{ServiceName}/autoscaler","methods":["put"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"ClusterId","in":"path","schema":{"description":"服务所在地域ID。","type":"string","required":true,"example":"cn-shanghai"}},{"name":"ServiceName","in":"path","schema":{"description":"服务名称。如何查看服务名称，请参见[ListServices ](~~412109~~)。","type":"string","required":true,"example":"foo"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求Body。","type":"object","properties":{"min":{"title":"最小 replica 数，需要大于0","description":"最小实例数，需要大于0。","type":"integer","format":"int32","required":true,"example":"2"},"max":{"title":"最大 replica 数，需要大于MinReplica","description":"最大实例数，需要大于Min Replica。","type":"integer","format":"int32","required":true,"example":"8"},"scaleStrategies":{"description":"伸缩策略列表。","type":"array","items":{"type":"object","properties":{"metricName":{"description":"指标名称，取值如下：\n- qps：单实例QPS伸缩阈值。\n- cpu：CPU利用率阈值。","type":"string","required":true,"example":"qps"},"threshold":{"description":"触发自动伸缩阈值。\n- 指标名称配置为qps：当单实例的平均QPS大于该值时会触发扩容。\n- 指标名称配置为cpu：当单实例的平均CPU使用率大于该值时会触发扩容。","type":"number","format":"float","required":true,"example":"100"},"service":{"description":"指标所属服务，不配置默认为当前服务。","type":"string","required":false,"example":"demo_svc"}},"required":false},"required":true},"behavior":{"description":"自动扩缩容时的行为。","type":"object","properties":{"scaleUp":{"description":"扩容时的行为","type":"object","properties":{"stabilizationWindowSeconds":{"description":"扩容稳定窗口期时间，默认值为0。\n只有当过去一段时间内的指标均满足条件，才会执行扩容。","type":"integer","format":"int32","required":false,"example":"0"}},"required":false},"scaleDown":{"description":"缩容时的行为。","type":"object","properties":{"stabilizationWindowSeconds":{"description":"缩容稳定窗口期时间，默认值为300。\n只有当过去一段时间内的指标均不满足条件，才会执行缩容。","type":"integer","format":"int32","required":false,"example":"300"}},"required":false},"onZero":{"description":"缩容到0时的行为。","type":"object","properties":{"scaleDownGracePeriodSeconds":{"description":"缩容到0之前的等待期，默认为600。\n当指标满足缩容到0的条件时，需要经过等待期的时间，才会执行缩容到0。","type":"integer","format":"int32","required":false,"example":"600"},"scaleUpActivationReplicas":{"description":"当从0开始扩容时，一次性创建的实例数。默认值为1。","type":"integer","format":"int32","required":false,"example":"1"}},"required":false}},"required":false}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回结果。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"40325405-579C-4D82****"},"Message":{"description":"请求返回信息。","type":"string","example":"Update auto scale for service [foo] successfully"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"40325405-579C-4D82****\\\",\\n  \\\"Message\\\": \\\"Update auto scale for service [foo] successfully\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"更新服务自动扩缩容配置"}