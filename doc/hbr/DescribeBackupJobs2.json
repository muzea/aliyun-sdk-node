{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"95502","abilityTreeNodes":["FEATUREhbrS7MI6C","FEATUREhbrQ3MV3B","FEATUREhbrF83GXN","FEATUREhbr56LH1C","FEATUREhbrFWIWBG","FEATUREhbrAW9I1R","FEATUREhbrB1KQ9G","FEATUREhbr3BJQCT"]},"parameters":[{"name":"PageNumber","in":"query","schema":{"description":"分页页码，从1开始，默认值为1。","type":"integer","format":"int32","required":false,"minimum":"1","example":"1","default":"1"}},{"name":"PageSize","in":"query","schema":{"description":"分页大小，最小值为1，最大值为99，默认值为10。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"1","example":"10","default":"10"}},{"name":"SourceType","in":"query","schema":{"description":"数据源类型，取值范围：\n\n- **ECS_FILE**：备份ECS文件\n- **OSS**：备份阿里云OSS\n- **NAS**：备份阿里云NAS\n- **OTS**：备份阿里云OTS\n- **UDM_ECS**：备份ECS整机\n- **UDM\\_ECS\\_DISK**：ECS整机备份-云盘备份子任务\n- **COMMON_NAS**：通用NAS数据源，包括归档NAS数据源和本地NAS数据源。您需要通过Filters的Values区分数据源类型。\n- **File**：本地文件备份","type":"string","required":false,"docRequired":true,"example":"ECS_FILE"}},{"name":"SortDirection","in":"query","schema":{"description":"排序方向。取值范围：\n\n- **ASCEND**：升序\n- **DESCEND**（默认）：降序","type":"string","required":false,"example":"DESCEND","default":"DESCEND","enum":["ASCEND","DESCEND"]}},{"name":"Filters","in":"query","style":"repeatList","schema":{"description":"查询过滤器中的键值。","type":"array","items":{"description":"查询过滤器。","type":"object","properties":{"Key":{"description":"查询过滤器中的键值。取值包括：\n\n- **RegionId**：地域ID\n- **PlanId**：备份计划ID\n- **JobId**：备份任务ID\n- **VaultId**：仓库ID\n- **InstanceId**：ECS实例ID\n- **Bucket**：OSS bucket名称\n- **FileSystemId**：文件系统ID\n- **Status**：任务状态\n- **CreatedTime**：任务开始时间\n- **CompleteTime**：任务结束时间\n- **InstanceName**：表格存储实例名称\n- **BackupType**：备份任务（仅当 SourceType 取值为COMMON_NAS时，需要配置该参数）","type":"string","required":false,"example":"VaultId"},"Values":{"description":"查询过滤器的变量值。","type":"array","items":{"description":"查询过滤器的变量值。\n\n-COMPLETE：本地NAS备份\n\n0：ARCHIVE：归档数据源NAS\n\n1：ARCHIVE_BY_SEARCH：归档数据源NAS","type":"string","required":false,"example":"[\"v-*********************\"]"},"required":false,"maxItems":500},"Operator":{"description":"匹配方式。默认为IN。即过滤器中Key和Value支持的匹配操作（Operator）方式，取值包括：\n\n- **EQUAL**：等于\n- **NOT_EQUAL**：不等于\n- **GREATER_THAN**：大于\n- **GREATER_THAN_OR_EQUAL**：大于等于\n- **LESS_THAN**：小于\n- **LESS_THAN_OR_EQUAL**：小于等于\n- **BETWEEN**：区间，value为JSON数组`[下届,上届]`。\n- **IN**：在集合中，value为数组。\n\n> 当使用**CompleteTime**作为Key查询时，暂时不支持IN操作。","type":"string","required":false,"example":"IN"}},"required":false},"required":false,"maxItems":5}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"Success":{"description":"请求是否成功。\n\n- true：成功\n- false：失败","type":"boolean","example":"true"},"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"PageNumber":{"description":"分页页码，从1开始，默认值为1。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"分页大小，最小值为1，最大值为99，默认值为10。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"查询到的符合条件的备份任务总数。","type":"integer","format":"int64","example":"8"},"BackupJobs":{"type":"object","properties":{"BackupJob":{"description":"符合条件的备份任务列表。","type":"array","items":{"description":"备份任务详情。","type":"object","properties":{"Status":{"description":"备份任务状态。取值范围：\n\n- **COMPLETE**：成功\n- **PARTIAL_COMPLETE**：部分成功\n- **FAILED**：失败","type":"string","example":"COMPLETE"},"ErrorMessage":{"description":"备份任务的错误信息。","type":"string","example":"PARTIAL_COMPLETE"},"ActualItems":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示备份任务实际项目数。","type":"integer","format":"int64","example":"6"},"VaultId":{"description":"备份仓库ID。","type":"string","example":"v-0006******q"},"ActualBytes":{"description":"去除重复后备份任务实际数据量。单位为字节。","type":"integer","format":"int64","example":"600"},"CreateTime":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示文件系统创建时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1607436917"},"BackupType":{"description":"备份类型。取值为**COMPLETE**，表示全量备份。","type":"string","example":"COMPLETE"},"Prefix":{"description":"仅当**SourceType**取值为**OSS**时，该参数有效。表示备份对象前缀。","type":"string","example":"example/"},"SourceType":{"description":"数据源类型，取值范围：\n\n- **ECS_FILE**：备份ECS文件\n- **OSS**：备份阿里云OSS\n- **NAS**：备份阿里云NAS","type":"string","example":"ECS_FILE"},"Options":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示是否使用Windows系统VSS定义备份路径。\n\n- 此功能仅支持Windows类型ECS实例。\n- 如果备份源中有数据更改，需要确保备份数据与源数据的一致时，才可配置为`[\"UseVSS\":true]`。\n- 选择使用VSS后，不支持多个文件目录同时备份。","type":"string","example":"{\"UseVSS\":false}"},"ClientId":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示备份客户端ID。","type":"string","example":"c-*********************"},"ItemsDone":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示备份项目数。","type":"integer","format":"int64","example":"8"},"BytesTotal":{"description":"数据源总数据量。单位为字节。","type":"integer","format":"int64","example":"1000"},"Exclude":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示不需要进行备份的路径，该路径下所有文件都不备份。最多支持255个字符。","type":"string","example":"[\"/var\", \"/proc\"]"},"JobName":{"description":"备份任务名称。","type":"string","example":"jobname"},"CompleteTime":{"description":"备份任务完成时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"CreatedTime":{"description":"备份任务创建时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"Bucket":{"description":"仅当**SourceType**取值为**OSS**时，该参数有效。表示备份OSS bucket名称。","type":"string","example":"hbr-backup-oss"},"Progress":{"description":"备份进度。值为100%*100。","type":"integer","format":"int32","example":"10000"},"SpeedLimit":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示备份流量控制。格式为`{start}|{end}|{bandwidth}`。多个流量控制配置使用`|`分隔，并且配置时间不允许有重叠。\n\n- **start**：起始小时\n- **end**：结束小时\n- **bandwidth**：限制速率，单位KB/s。","type":"string","example":"0:24:5120"},"InstanceId":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示ECS实例ID。","type":"string","example":"i-*********************"},"PlanId":{"description":"备份计划ID。","type":"string","example":"plan-20********35"},"FileSystemId":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示文件系统ID。","type":"string","example":"005494"},"StartTime":{"description":"备份任务开始时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"UpdatedTime":{"description":"备份任务更新时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"JobId":{"description":"备份任务ID。","type":"string","example":"job-000g********w7"},"ItemsTotal":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示数据源项目总数。","type":"integer","format":"int64","example":"10"},"Include":{"description":"备份任务包含的备份路径。","type":"string","example":"[\"/home/alice/*.pdf\", \"/home/bob/*.txt\"]"},"BytesDone":{"description":"增量备份的数据量。单位为字节。","type":"integer","format":"int64","example":"800"},"Paths":{"type":"object","properties":{"Path":{"description":"表示备份路径。","type":"array","items":{"description":"表示备份路径。","type":"string","example":"\"/home\""}}}},"Detail":{"description":"ECS整机备份任务详情。","type":"object","properties":{"DoCopy":{"description":"是否进行异地复制。","type":"boolean","example":"true"},"DestinationNativeSnapshotId":{"description":"异地复制快照ID。","type":"string","example":"s-******************"},"DestinationNativeSnapshotProgress":{"description":"异地复制进度。","type":"integer","format":"int32","example":"85"},"DestinationNativeSnapshotStatus":{"description":"异地复制状态。","type":"string","example":"COMPLETE"},"DestinationRetention":{"description":"异地复制备份保留时间。","type":"integer","format":"int64","example":"30"},"DestinationSnapshotId":{"description":"异地复制备份ID。","type":"string","example":"s-******************"},"DestinationNativeSnapshotErrorMessage":{"description":"异地复制失败信息。","type":"string","example":"ECS.CreatingSnapshot"},"NativeSnapshotId":{"description":"快照ID。","type":"string","example":"s-******************"},"DiskNativeSnapshotIdList":{"type":"object","properties":{"DiskNativeSnapshotId":{"description":"快照与云盘对应关系。","type":"array"}}}}},"InstanceName":{"description":"表格存储实例名称。","type":"string","example":"instancename"},"OtsDetail":{"description":"表格存储实例详情。","type":"object","properties":{"TableNames":{"type":"object","properties":{"TableName":{"description":"表格存储实例的数据表名称列表。","type":"array","items":{"description":"表格存储实例的数据表名称。","type":"string","example":"[\"table1\", \"table2\", \"table3\"]"}}}}}},"Speed":{"description":"实际的平均备份速度。单位为KB/s。","type":"integer","format":"int64","example":"500"},"TableName":{"description":"表格存储实例的数据表名称。","type":"string","example":"table1"},"CrossAccountType":{"description":"跨账号备份类型。支持： \n- SELF_ACCOUNT：本账号备份\n- CROSS_ACCOUNT：跨账号备份","type":"string","enumValueTitles":{},"example":"SELF_ACCOUNT"},"CrossAccountUserId":{"description":"被当前账号管理的跨账号备份的原账号ID。","type":"integer","format":"int64","example":"158975xxxxx4625"},"CrossAccountRoleName":{"description":"被当前账号管理的跨账号备份的原账号RAM中创建的角色名。","type":"string","example":"BackupRole"},"Identifier":{"title":"仅SourceType=CONTAINER时返回，表示容器备份任务备份的集群标识。当集群类型为阿里云容器服务Kubernetes集群时，该值为Kubernetes集群ID。","description":"仅SourceType=CONTAINER时返回，表示容器备份任务备份的集群标识。当集群类型为阿里云容器服务Kubernetes集群时，该值为Kubernetes集群ID。","type":"string","example":"c83**************************b76"},"DestSourceType":{"description":"目的端数据源类型。（仅同步需要）","type":"string","example":"OSS"},"DestDataSourceId":{"description":"目的端数据源ID。（仅同步需要）","type":"string","example":"ds-000cov4ufudxklj24zdk"},"DestDataSourceDetail":{"description":"目的端数据源详情。（仅同步需要）","type":"string","example":"{\\\"prefix\\\":\\\"/\\\"}"},"ChangeListPath":{"description":"增量文件同步列表的配置。（仅同步需要）","type":"string","example":"{\"dataSourceId\": \"ds-123456789\", \"path\": \"/changelist\"}"},"FilesTotal":{"description":"表示需处理文件的总数。","type":"integer","format":"int64","example":"10"},"FilesDone":{"description":"表示文件已处理完成数。","type":"integer","format":"int64","example":"9"},"ActualFiles":{"description":"表示实际处理的文件数。","type":"integer","format":"int64","example":"8"}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"Success\\\": true,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 10,\\n  \\\"TotalCount\\\": 8,\\n  \\\"BackupJobs\\\": {\\n    \\\"BackupJob\\\": [\\n      {\\n        \\\"Status\\\": \\\"COMPLETE\\\",\\n        \\\"ErrorMessage\\\": \\\"PARTIAL_COMPLETE\\\",\\n        \\\"ActualItems\\\": 6,\\n        \\\"VaultId\\\": \\\"v-0006******q\\\",\\n        \\\"ActualBytes\\\": 600,\\n        \\\"CreateTime\\\": 1607436917,\\n        \\\"BackupType\\\": \\\"COMPLETE\\\",\\n        \\\"Prefix\\\": \\\"example/\\\",\\n        \\\"SourceType\\\": \\\"ECS_FILE\\\",\\n        \\\"Options\\\": \\\"{\\\\\\\"UseVSS\\\\\\\":false}\\\",\\n        \\\"ClientId\\\": \\\"c-*********************\\\",\\n        \\\"ItemsDone\\\": 8,\\n        \\\"BytesTotal\\\": 1000,\\n        \\\"Exclude\\\": \\\"[\\\\\\\"/var\\\\\\\", \\\\\\\"/proc\\\\\\\"]\\\",\\n        \\\"JobName\\\": \\\"jobname\\\",\\n        \\\"CompleteTime\\\": 1554347313,\\n        \\\"CreatedTime\\\": 1554347313,\\n        \\\"Bucket\\\": \\\"hbr-backup-oss\\\",\\n        \\\"Progress\\\": 10000,\\n        \\\"SpeedLimit\\\": \\\"0:24:5120\\\",\\n        \\\"InstanceId\\\": \\\"i-*********************\\\",\\n        \\\"PlanId\\\": \\\"plan-20********35\\\",\\n        \\\"FileSystemId\\\": \\\"005494\\\",\\n        \\\"StartTime\\\": 1554347313,\\n        \\\"UpdatedTime\\\": 1554347313,\\n        \\\"JobId\\\": \\\"job-000g********w7\\\",\\n        \\\"ItemsTotal\\\": 10,\\n        \\\"Include\\\": \\\"[\\\\\\\"/home/alice/*.pdf\\\\\\\", \\\\\\\"/home/bob/*.txt\\\\\\\"]\\\",\\n        \\\"BytesDone\\\": 800,\\n        \\\"Paths\\\": {\\n          \\\"Path\\\": [\\n            \\\"\\\\\\\"/home\\\\\\\"\\\"\\n          ]\\n        },\\n        \\\"Detail\\\": {\\n          \\\"DoCopy\\\": true,\\n          \\\"DestinationNativeSnapshotId\\\": \\\"s-******************\\\",\\n          \\\"DestinationNativeSnapshotProgress\\\": 85,\\n          \\\"DestinationNativeSnapshotStatus\\\": \\\"COMPLETE\\\",\\n          \\\"DestinationRetention\\\": 30,\\n          \\\"DestinationSnapshotId\\\": \\\"s-******************\\\",\\n          \\\"DestinationNativeSnapshotErrorMessage\\\": \\\"ECS.CreatingSnapshot\\\",\\n          \\\"NativeSnapshotId\\\": \\\"s-******************\\\",\\n          \\\"DiskNativeSnapshotIdList\\\": {\\n            \\\"DiskNativeSnapshotId\\\": [\\n              \\\"\\\"\\n            ]\\n          }\\n        },\\n        \\\"InstanceName\\\": \\\"instancename\\\",\\n        \\\"OtsDetail\\\": {\\n          \\\"TableNames\\\": {\\n            \\\"TableName\\\": [\\n              \\\"[\\\\\\\"table1\\\\\\\", \\\\\\\"table2\\\\\\\", \\\\\\\"table3\\\\\\\"]\\\"\\n            ]\\n          }\\n        },\\n        \\\"Speed\\\": 500,\\n        \\\"TableName\\\": \\\"table1\\\",\\n        \\\"CrossAccountType\\\": \\\"SELF_ACCOUNT\\\",\\n        \\\"CrossAccountUserId\\\": 0,\\n        \\\"CrossAccountRoleName\\\": \\\"BackupRole\\\",\\n        \\\"Identifier\\\": \\\"c83**************************b76\\\",\\n        \\\"DestSourceType\\\": \\\"OSS\\\",\\n        \\\"DestDataSourceId\\\": \\\"ds-000cov4ufudxklj24zdk\\\",\\n        \\\"DestDataSourceDetail\\\": \\\"{\\\\\\\\\\\\\\\"prefix\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"/\\\\\\\\\\\\\\\"}\\\",\\n        \\\"ChangeListPath\\\": \\\"{\\\\\\\"dataSourceId\\\\\\\": \\\\\\\"ds-123456789\\\\\\\", \\\\\\\"path\\\\\\\": \\\\\\\"/changelist\\\\\\\"}\\\",\\n        \\\"FilesTotal\\\": 10,\\n        \\\"FilesDone\\\": 9,\\n        \\\"ActualFiles\\\": 8\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeBackupJobs2Response>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <Success>true</Success>\\n    <Code>200</Code>\\n    <Message>successful</Message>\\n    <PageNumber>1</PageNumber>\\n    <PageSize>10</PageSize>\\n    <TotalCount>8</TotalCount>\\n    <BackupJobs>\\n        <Status>COMPLETE</Status>\\n        <ErrorMessage>PARTIAL_COMPLETE</ErrorMessage>\\n        <ActualItems>6</ActualItems>\\n        <VaultId>v-0006******q</VaultId>\\n        <ActualBytes>600</ActualBytes>\\n        <CreateTime>1607436917</CreateTime>\\n        <BackupType>COMPLETE</BackupType>\\n        <Prefix>example/</Prefix>\\n        <SourceType>ECS_FILE</SourceType>\\n        <Options>{\\\"UseVSS\\\":false}</Options>\\n        <ClientId>c-*********************</ClientId>\\n        <ItemsDone>8</ItemsDone>\\n        <BytesTotal>1000</BytesTotal>\\n        <Exclude>[\\\"/var\\\", \\\"/proc\\\"]</Exclude>\\n        <JobName>jobname</JobName>\\n        <CompleteTime>1554347313</CompleteTime>\\n        <CreatedTime>1554347313</CreatedTime>\\n        <Bucket>hbr-backup-oss</Bucket>\\n        <Progress>10000</Progress>\\n        <SpeedLimit>0:24:5120</SpeedLimit>\\n        <InstanceId>i-*********************</InstanceId>\\n        <PlanId>plan-20********35</PlanId>\\n        <FileSystemId>005494</FileSystemId>\\n        <StartTime>1554347313</StartTime>\\n        <UpdatedTime>1554347313</UpdatedTime>\\n        <JobId>job-000g********w7</JobId>\\n        <ItemsTotal>10</ItemsTotal>\\n        <Include>[\\\"/home/alice/*.pdf\\\", \\\"/home/bob/*.txt\\\"]</Include>\\n        <BytesDone>800</BytesDone>\\n        <Paths>\\\"/home\\\"</Paths>\\n        <InstanceName>instancename</InstanceName>\\n        <OtsDetail>\\n            <TableNames>[\\\"table1\\\", \\\"table2\\\", \\\"table3\\\"]</TableNames>\\n        </OtsDetail>\\n        <Speed>500</Speed>\\n        <TableName>table1</TableName>\\n        <CrossAccountType>SELF_ACCOUNT</CrossAccountType>\\n        <CrossAccountRoleName>BackupRole</CrossAccountRoleName>\\n    </BackupJobs>\\n</DescribeBackupJobs2Response>\",\"errorExample\":\"\"}]","title":"查询备份任务","summary":"查询一个或者多个符合条件的备份任务。"}