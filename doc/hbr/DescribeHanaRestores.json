{"methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"VaultId","in":"query","schema":{"description":"备份仓库ID。","type":"string","required":false,"example":"v-000au6bq******mpu"}},{"name":"ClusterId","in":"query","schema":{"description":"SAP HANA实例ID。","type":"string","required":true,"docRequired":true,"example":"cl-000b******soejg"}},{"name":"PageNumber","in":"query","schema":{"description":"分页页码。从1开始，默认值为1。","type":"integer","format":"int32","required":false,"minimum":"1","example":"1","default":"1"}},{"name":"PageSize","in":"query","schema":{"description":"分页大小。最小值为1，最大值为99，默认值为10。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"1","example":"10","default":"1"}},{"name":"RestoreId","in":"query","schema":{"description":"恢复任务ID。","type":"string","required":false,"example":"r-0007o3vqfukfe92hvf13"}},{"name":"DatabaseName","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"SYSTEMDB"}},{"name":"BackupId","in":"query","schema":{"description":"备份ID。","type":"integer","format":"int64","required":false,"example":"1632754800158"}},{"name":"RestoreStatus","in":"query","schema":{"description":"恢复任务状态。\n  - **RUNNING**：运行中\n  - **COMPLETE**：成功\n  - **PARTIAL_COMPLETE**：部分成功\n  - **FAILED**：失败\n  - **CANCELED**：已取消\n  - **EXPIRED**：已超时\n","type":"string","required":false,"example":"COMPLETE"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-acfm4ebtpkzx7zy"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"7DEFC897-8F05-5C05-912C-C9A9510FBFF1"},"Success":{"description":"请求是否成功。\n\n- true：成功\n- false：失败","type":"boolean","example":"true"},"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"PageNumber":{"description":"分页页码。从1开始，默认值为1。","type":"integer","format":"int32","example":"1"},"PageSize":{"description":"分页大小。最小值为1，最大值为99，默认值为10。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"总记录数。","type":"integer","format":"int32","example":"19"},"HanaRestore":{"type":"object","properties":{"HanaRestores":{"description":"恢复任务列表。","type":"array","items":{"description":"恢复任务。","type":"object","properties":{"Status":{"description":"恢复任务状态。\n  - **RUNNING**：运行中\n  - **COMPLETE**：成功\n  - **PARTIAL_COMPLETE**：部分成功\n  - **FAILED**：失败\n  - **CANCELED**：已取消\n  - **EXPIRED**：已超时\n","type":"string","example":"COMPLETE"},"ReachedTime":{"description":"恢复的实际时间点。","type":"integer","format":"int64","example":"1635315505"},"VaultId":{"description":"备份仓库ID。","type":"string","example":"v-000g9acf******gta"},"CurrentPhase":{"description":"当前恢复阶段，该值直接从SAP HANA获取。","type":"integer","format":"int32","example":"2"},"ClearLog":{"description":"恢复后，日志条目将从日志区中删除。初始化日志区域，如果不想恢复驻留在日志区中的日志段，请选择true，否则选择false。","type":"boolean","example":"true"},"Message":{"description":"恢复阶段详情。","type":"string","example":"SQL Error 448 - recovery could not be completed:"},"CheckAccess":{"description":"检查差异和日志备份可用性。\n\n- true：在恢复开始时，系统会检查所需的差异备份和日志备份是否都可用。 如果缺少差异备份或日志备份，在更改数据之前会停止恢复。\n- false：不开启检查。","type":"boolean","example":"true"},"Mode":{"description":"恢复方式。\n- **RECOVERY\\_TO\\_MOST\\_RECENT**： 将数据库恢复到已备份的最近可用状态。\n- **RECOVERY\\_TO\\_POINT\\_IN\\_TIME**：将数据库恢复到特定时间点。\n- **RECOVERY\\_TO\\_SPECIFIC\\_BACKUP**：将数据库恢复到指定的数据库备份。\n- **RECOVERY\\_TO\\_LOG\\_POSITION**：将数据库还原到指定日志位置。","type":"string","example":"RECOVERY_TO_SPECIFIC_BACKUP"},"SystemCopy":{"description":"是否是跨实例恢复。\n\n- true：跨实例恢复\n- false：非跨实例恢复","type":"boolean","example":"true"},"CurrentProgress":{"description":"当前进度，该值直接从SAP HANA获取。","type":"integer","format":"int64","example":"1"},"UseDelta":{"description":"是否使用差异备份。如果您需要使用差异备份或增量备份执行恢复，请选择true。如果选择在不使用差异备份或增量备份的情况下执行恢复，则使用日志备份进行恢复。","type":"boolean","example":"true"},"BackupID":{"description":"备份ID。","type":"integer","format":"int64","example":"1635315505"},"SourceClusterId":{"description":"源SAP HANA实例ID。","type":"string","example":"cl-0000g3mvy******5cj"},"VolumeId":{"description":"要恢复的Volume ID。仅选择**RECOVERY\\_TO\\_LOG\\_POSITION**恢复方式时有效。","type":"integer","format":"int32","example":"0"},"DatabaseName":{"description":"数据库的名称。","type":"string","example":"BWD"},"Phase":{"description":"恢复阶段。","type":"string","example":"restart"},"ClusterId":{"description":"待恢复的SAP HANA实例ID。","type":"string","example":"cl-000923yu******p00j4"},"DatabaseRestoreId":{"description":"数据库恢复ID。","type":"integer","format":"int64","example":"1644038961030"},"State":{"description":"状态，该值直接从SAP HANA获取。","type":"string","example":"successful"},"Source":{"description":"源系统名。表示需要恢复的源数据库名，格式为`源数据库名@SID`。","type":"string","example":"PRD@H4P"},"MaxPhase":{"description":"最大阶段，该值直接从SAP HANA获取。","type":"integer","format":"int32","example":"4"},"EndTime":{"description":"恢复任务结束时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1634356382"},"StartTime":{"description":"恢复任务开始时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1636970413"},"BackupPrefix":{"description":"备份前缀。","type":"string","example":"INC_DATA_BACKUP"},"RestoreId":{"description":"恢复任务ID。","type":"string","example":"r-000c1en183ayn9sesgqh"},"LogPosition":{"description":"日志位置，仅选择**RECOVERY\\_TO\\_LOG\\_POSITION**恢复方式时有效。","type":"integer","format":"int64","example":"0"},"RecoveryPointInTime":{"description":"选择需要恢复到的时间点。仅选择**RECOVERY\\_TO\\_POINT\\_IN\\_TIME**恢复方式时有效，系统会将数据库恢复到离这个时间最近的状态。","type":"integer","format":"int64","example":"1649851200"},"MaxProgress":{"description":"最大进度，该值直接从SAP HANA获取。","type":"integer","format":"int64","example":"1"},"UseCatalog":{"description":"是否从Catalog中查找备份。仅选择**RECOVERY\\_TO\\_SPECIFIC\\_BACKUP**恢复方式时有效。如果不使用Catalog，需要指定一个备份前缀，混合云备份服务会根据备份前缀进行恢复。","type":"boolean","example":"false"}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"7DEFC897-8F05-5C05-912C-C9A9510FBFF1\\\",\\n  \\\"Success\\\": true,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 10,\\n  \\\"TotalCount\\\": 19,\\n  \\\"HanaRestore\\\": {\\n    \\\"HanaRestores\\\": [\\n      {\\n        \\\"Status\\\": \\\"COMPLETE\\\",\\n        \\\"ReachedTime\\\": 1635315505,\\n        \\\"VaultId\\\": \\\"v-000g9acf******gta\\\",\\n        \\\"CurrentPhase\\\": 2,\\n        \\\"ClearLog\\\": true,\\n        \\\"Message\\\": \\\"SQL Error 448 - recovery could not be completed:\\\",\\n        \\\"CheckAccess\\\": true,\\n        \\\"Mode\\\": \\\"RECOVERY_TO_SPECIFIC_BACKUP\\\",\\n        \\\"SystemCopy\\\": true,\\n        \\\"CurrentProgress\\\": 1,\\n        \\\"UseDelta\\\": true,\\n        \\\"BackupID\\\": 1635315505,\\n        \\\"SourceClusterId\\\": \\\"cl-0000g3mvy******5cj\\\",\\n        \\\"VolumeId\\\": 0,\\n        \\\"DatabaseName\\\": \\\"BWD\\\",\\n        \\\"Phase\\\": \\\"restart\\\",\\n        \\\"ClusterId\\\": \\\"cl-000923yu******p00j4\\\",\\n        \\\"DatabaseRestoreId\\\": 1644038961030,\\n        \\\"State\\\": \\\"successful\\\",\\n        \\\"Source\\\": \\\"PRD@H4P\\\",\\n        \\\"MaxPhase\\\": 4,\\n        \\\"EndTime\\\": 1634356382,\\n        \\\"StartTime\\\": 1636970413,\\n        \\\"BackupPrefix\\\": \\\"INC_DATA_BACKUP\\\",\\n        \\\"RestoreId\\\": \\\"r-000c1en183ayn9sesgqh\\\",\\n        \\\"LogPosition\\\": 0,\\n        \\\"RecoveryPointInTime\\\": 1649851200,\\n        \\\"MaxProgress\\\": 1,\\n        \\\"UseCatalog\\\": false\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeHanaRestoresResponse>\\n    <RequestId>7DEFC897-8F05-5C05-912C-C9A9510FBFF1</RequestId>\\n    <Success>true</Success>\\n    <Code>200</Code>\\n    <Message>successful</Message>\\n    <PageNumber>1</PageNumber>\\n    <PageSize>10</PageSize>\\n    <TotalCount>19</TotalCount>\\n    <HanaRestore>\\n        <Status>COMPLETE</Status>\\n        <ReachedTime>1635315505</ReachedTime>\\n        <VaultId>v-000g9acf******gta</VaultId>\\n        <CurrentPhase>2</CurrentPhase>\\n        <ClearLog>true</ClearLog>\\n        <Message>SQL Error 448 - recovery could not be completed:</Message>\\n        <CheckAccess>true</CheckAccess>\\n        <Mode>RECOVERY_TO_SPECIFIC_BACKUP</Mode>\\n        <SystemCopy>true</SystemCopy>\\n        <CurrentProgress>1</CurrentProgress>\\n        <UseDelta>true</UseDelta>\\n        <BackupID>1635315505</BackupID>\\n        <SourceClusterId>cl-0000g3mvy******5cj</SourceClusterId>\\n        <VolumeId>0</VolumeId>\\n        <DatabaseName>BWD</DatabaseName>\\n        <Phase>restart</Phase>\\n        <ClusterId>cl-000923yu******p00j4</ClusterId>\\n        <DatabaseRestoreId>1644038961030</DatabaseRestoreId>\\n        <State>successful</State>\\n        <Source>PRD@H4P</Source>\\n        <MaxPhase>4</MaxPhase>\\n        <EndTime>1634356382</EndTime>\\n        <StartTime>1636970413</StartTime>\\n        <BackupPrefix>INC_DATA_BACKUP</BackupPrefix>\\n        <RestoreId>r-000c1en183ayn9sesgqh</RestoreId>\\n        <LogPosition>0</LogPosition>\\n        <RecoveryPointInTime>1649851200</RecoveryPointInTime>\\n        <MaxProgress>1</MaxProgress>\\n        <UseCatalog>false</UseCatalog>\\n    </HanaRestore>\\n</DescribeHanaRestoresResponse>\",\"errorExample\":\"\"}]","title":"查询符合条件的SAP HANA恢复任务","summary":"查询符合条件的SAP HANA恢复任务。"}