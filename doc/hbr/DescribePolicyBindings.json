{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{},"parameters":[{"name":"NextToken","in":"formData","schema":{"description":"获取下一页策略与数据源关联所需的Token。","type":"string","required":false,"example":"caeba0bbb2be03f84eb48b699f0a"}},{"name":"MaxResults","in":"formData","schema":{"description":"每次查询结果的个数。\n\n取值范围：10~100。默认值：10。","type":"integer","format":"int32","required":false,"example":"10","default":"10"}},{"name":"PolicyId","in":"formData","schema":{"description":"策略ID。","type":"string","required":false,"example":"po-000************hky"}},{"name":"DataSourceIds","in":"formData","style":"json","schema":{"description":"数据源ID列表。","type":"array","items":{"description":"数据源ID。","type":"string","required":false,"example":"i-uf6************68n"},"required":false}},{"name":"SourceType","in":"query","schema":{"description":"数据源类型。取值范围：\n* **UDM_ECS**：表示ECS整机备份。","type":"string","required":false,"example":"UDM_ECS"}},{"name":"Filters","in":"query","style":"repeatList","schema":{"description":"查询过滤器。","type":"array","items":{"description":"查询过滤器。","type":"object","properties":{"Key":{"description":"查询过滤器中的键值。取值包括：\n\n- **PolicyId**：备份策略ID\n- **DataSourceId**：ECS实例ID\n- **DataSourceType**：数据源类型","type":"string","required":false,"example":"DataSourceType"},"Operator":{"description":"匹配方式。默认为IN。即过滤器中Key和Value支持的匹配操作（Operator）方式，取值包括：\n\n- **EQUAL**：等于\n- **NOT_EQUAL**：不等于\n- **GREATER_THAN**：大于\n- **GREATER_THAN_OR_EQUAL**：大于等于\n- **LESS_THAN**：小于\n- **LESS_THAN_OR_EQUAL**：小于等于\n- **BETWEEN**：区间，value为JSON数组`[下届,上届]`。\n- **IN**：在集合中，value为数组。","type":"string","required":false,"example":"IN"},"Values":{"description":"查询过滤器中的待匹配的值。","type":"array","items":{"description":"查询过滤器中的待匹配的值。","type":"string","required":false,"example":"UDM_ECS"},"required":false,"maxItems":10}},"required":false},"required":false,"maxItems":100}}],"responses":{"200":{"schema":{"title":"DescribePolicyBindingsResponse","description":"DescribePolicyBindingsResponse","type":"object","properties":{"PolicyBindings":{"description":"绑定策略列表。","type":"array","items":{"description":"绑定策略详情。","type":"object","properties":{"CreatedTime":{"description":"创建时间。UNIX时间，单位秒。","type":"integer","format":"int64","example":"1661399570"},"UpdatedTime":{"description":"更新时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1653611573"},"PolicyBindingId":{"description":"绑定策略ID。","type":"string","example":"pd-000************slc"},"PolicyBindingDescription":{"description":"绑定策略描述。","type":"string","example":"po-000************eslc-i-uf6************y5g"},"PolicyId":{"description":"策略ID。","type":"string","example":"po-000************56y"},"DataSourceId":{"description":"数据源ID。","type":"string","example":"i-8vb************5ly"},"Disabled":{"description":"策略是否对该数据源生效。\n- true：暂停\n- false：未暂停","type":"boolean","example":"true"},"Source":{"description":"- 当SourceType取值为**OSS**时，表示备份某个prefix，如果不指定，则表示备份整个Bucket根目录。\n- 当SourceType取值为**ECS_FILE**或**File**时，表示备份的文件目录，如果不指定，则表示备份全部目录。","type":"string","example":"backup/"},"Include":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示要进行备份的文件类型，这些类型的所有文件都备份。最多支持255个字符。","type":"string","example":"[\\\"*.doc\\\",\\\"*.xltm\\\"]"},"Exclude":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示不需要进行备份的文件类型，该类型的所有文件都不备份。最多支持255个字符。","type":"string","example":"[\\\"*.doc\\\",\\\"*.xltm\\\"]"},"SpeedLimit":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示备份流量控制。格式为`{start}{end}{bandwidth}`。多个流量控制配置使用分隔，并且配置时间不允许有重叠。\n\n- **start**：起始小时。\n- **end**：结束小时。\n- **bandwidth**：限制速率，单位KB/s。","type":"string","example":"0:24:10240"},"AdvancedOptions":{"description":"高级选项。","type":"object","properties":{"UdmDetail":{"description":"整机备份高级选项。","type":"object","properties":{"ExcludeDiskIdList":{"description":"不需要保护的云盘ID列表。当DiskIdList不为空时，将忽略该参数。","type":"array","items":{"description":"不需要保护的云盘ID。","type":"string","example":"d-bp1************apo\n"}},"DiskIdList":{"description":"需要保护的云盘ID列表。保护所有云盘时，该值为空。","type":"array","items":{"description":"需要保护的云盘ID。","type":"string","example":"d-bp1************apo\n"}},"SnapshotGroup":{"description":"是否创建快照一致性组。仅云盘类型全部为ESSD时，支持创建快照一致性组。","type":"boolean","example":"true"},"AppConsistent":{"description":"是否创建应用一致性。仅云盘类型全部为ESSD时，支持创建快照应用一致性。","type":"boolean","example":"false"},"RamRoleName":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照需要配置的RAM角色名称。","type":"string","example":"AliyunECSInstanceForHbrRole"},"PreScriptPath":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照前执行的冻结脚本路径。","type":"string","example":"/tmp/prescript.sh"},"PostScriptPath":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照后执行的解冻脚本路径。","type":"string","example":"/tmp/postscript.sh"},"EnableFsFreeze":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。是否在创建应用一致性快照前使用Linux的FsFreeze机制确保文件系统处于只读一致性。默认为true。","type":"boolean","example":"true"},"TimeoutInSeconds":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。IO冻结超时时间。默认为30秒。","type":"integer","format":"int64","example":"30"},"EnableWriters":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。是否设置应用一致性快照：\n- true：创建应用一致性快照\n- false：创建文件系统一致性快照\n\n默认为true。","type":"boolean","example":"true"},"DestinationKmsKeyId":{"description":"目标地域自定义KMS密钥ID，该字段不为空且开启异地复制时，将使用该密钥进行加密异地复制。","type":"string","example":"4ed37b1e-da51-4187-aceb-9db4f9b7148b"}}},"OssDetail":{"description":"OSS备份高级选项。","type":"object","properties":{"InventoryId":{"description":"OSS清单名称，该值不为空时将使用OSS清单用于性能调优。\n- 建议备份1亿以上OSS对象采用清单提升增量性能，由清单文件产生的存储费用由OSS服务单独收取。\n- OSS清单文件生成需要时间，在OSS清单文件生成完成之前可能会备份失败，可以等待下个周期执行。","type":"string","example":"inventory_test"},"InventoryCleanupPolicy":{"description":"备份后是否删除清单文件。仅当使用OSS清单时有效。支持：\n- **NO_CLEANUP**：不删除。\n- **DELETE_CURRENT**：删除当前文件。\n- **DELETE_CURRENT_AND_PREVIOUS**：删除所有文件。","type":"string","example":"DELETE_CURRENT_AND_PREVIOUS"}}},"FileDetail":{"description":"文件备份高级选项。","type":"object","properties":{"UseVSS":{"description":"是否启用VSS（Windows）功能。取值：\n- **true**：启用。\n- **false**：不启用。","type":"boolean","example":"false"},"AdvPolicy":{"description":"是否使用高级策略。取值：\n- **true**：使用。\n- **false**：不适用。","type":"boolean","example":"false"}}},"CommonNasDetail":{"description":"本地NAS高级选项。","type":"object","properties":{"FullOnIncrementFail":{"description":"增量备份失败时是否转为全量备份。取值：\n- **true**：失败时转为全量备份。\n- **false**：失败时不转为全量备份。","type":"boolean","example":"true"},"FetchSliceSize":{"description":"备份分片大小（文件数）。","type":"integer","format":"int64","example":"100000"},"ClientId":{"description":"备份客户端ID。","type":"string","example":"c-0001eg6mcvjs93f46s2d"},"ClusterId":{"description":"客户端组ID。","type":"string","example":"cl-000gkcofngi04j6k680a"}}},"CommonFileSystemDetail":{"description":"大规模文件系统备份高级选项。","type":"object","properties":{"FullOnIncrementFail":{"description":"增量备份失败时是否转为全量备份。取值：\n- **true**：失败时转为全量备份。\n- **false**：失败时不转为全量备份。","type":"boolean","example":"true"},"FetchSliceSize":{"description":"备份分片大小（文件数）。","type":"integer","format":"int64","example":"100000"}}}}},"SourceType":{"description":"数据源类型，取值范围：\n\n- **UDM_ECS**：表示ECS整机备份","type":"string","example":"UDM_ECS"},"CrossAccountType":{"description":"跨账号备份类型。支持： \n- SELF_ACCOUNT：本账号备份\n- CROSS_ACCOUNT：跨账号备份","type":"string","example":"CROSS_ACCOUNT"},"CrossAccountUserId":{"description":"跨账号备份的原账号ID。","type":"integer","format":"int64","example":"1480************"},"CrossAccountRoleName":{"description":"用于跨账号备份的原账号RAM中创建的角色名。","type":"string","example":"hbrcrossrole"}}}},"NextToken":{"description":"获取下一页策略与数据源绑定所需的Token。","type":"string","example":"caeba0bbb2be03f84eb48b699f0a"},"MaxResults":{"description":"每次查询结果的个数。\n\n取值范围：10~100。默认值：10。","type":"integer","format":"int32","example":"10"},"TotalCount":{"description":"总记录数。","type":"integer","format":"int64","example":"38"},"Success":{"description":"请求是否成功。\n\n- true：成功\n- false：失败","type":"boolean","example":"true"},"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"5225929A-4EBD-55EE-9FE1-4A130E582A76"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"PolicyBindings\\\": [\\n    {\\n      \\\"CreatedTime\\\": 1661399570,\\n      \\\"UpdatedTime\\\": 1653611573,\\n      \\\"PolicyBindingId\\\": \\\"pd-000************slc\\\",\\n      \\\"PolicyBindingDescription\\\": \\\"po-000************eslc-i-uf6************y5g\\\",\\n      \\\"PolicyId\\\": \\\"po-000************56y\\\",\\n      \\\"DataSourceId\\\": \\\"i-8vb************5ly\\\",\\n      \\\"Disabled\\\": true,\\n      \\\"Source\\\": \\\"backup/\\\",\\n      \\\"Include\\\": \\\"[\\\\\\\\\\\\\\\"*.doc\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"*.xltm\\\\\\\\\\\\\\\"]\\\",\\n      \\\"Exclude\\\": \\\"[\\\\\\\\\\\\\\\"*.doc\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"*.xltm\\\\\\\\\\\\\\\"]\\\",\\n      \\\"SpeedLimit\\\": \\\"0:24:10240\\\",\\n      \\\"AdvancedOptions\\\": {\\n        \\\"UdmDetail\\\": {\\n          \\\"ExcludeDiskIdList\\\": [\\n            \\\"d-bp1************apo\\\\n\\\"\\n          ],\\n          \\\"DiskIdList\\\": [\\n            \\\"d-bp1************apo\\\\n\\\"\\n          ],\\n          \\\"SnapshotGroup\\\": true,\\n          \\\"AppConsistent\\\": false,\\n          \\\"RamRoleName\\\": \\\"AliyunECSInstanceForHbrRole\\\",\\n          \\\"PreScriptPath\\\": \\\"/tmp/prescript.sh\\\",\\n          \\\"PostScriptPath\\\": \\\"/tmp/postscript.sh\\\",\\n          \\\"EnableFsFreeze\\\": true,\\n          \\\"TimeoutInSeconds\\\": 30,\\n          \\\"EnableWriters\\\": true,\\n          \\\"DestinationKmsKeyId\\\": \\\"4ed37b1e-da51-4187-aceb-9db4f9b7148b\\\"\\n        },\\n        \\\"OssDetail\\\": {\\n          \\\"InventoryId\\\": \\\"inventory_test\\\",\\n          \\\"InventoryCleanupPolicy\\\": \\\"DELETE_CURRENT_AND_PREVIOUS\\\"\\n        },\\n        \\\"FileDetail\\\": {\\n          \\\"UseVSS\\\": false,\\n          \\\"AdvPolicy\\\": false\\n        },\\n        \\\"CommonNasDetail\\\": {\\n          \\\"FullOnIncrementFail\\\": true,\\n          \\\"FetchSliceSize\\\": 100000,\\n          \\\"ClientId\\\": \\\"c-0001eg6mcvjs93f46s2d\\\",\\n          \\\"ClusterId\\\": \\\"cl-000gkcofngi04j6k680a\\\"\\n        },\\n        \\\"CommonFileSystemDetail\\\": {\\n          \\\"FullOnIncrementFail\\\": true,\\n          \\\"FetchSliceSize\\\": 100000\\n        }\\n      },\\n      \\\"SourceType\\\": \\\"UDM_ECS\\\",\\n      \\\"CrossAccountType\\\": \\\"CROSS_ACCOUNT\\\",\\n      \\\"CrossAccountUserId\\\": 0,\\n      \\\"CrossAccountRoleName\\\": \\\"hbrcrossrole\\\"\\n    }\\n  ],\\n  \\\"NextToken\\\": \\\"caeba0bbb2be03f84eb48b699f0a\\\",\\n  \\\"MaxResults\\\": 10,\\n  \\\"TotalCount\\\": 38,\\n  \\\"Success\\\": true,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"5225929A-4EBD-55EE-9FE1-4A130E582A76\\\"\\n}\",\"type\":\"json\"}]","title":"查询绑定策略列表","summary":"查询策略绑定的一个或多个数据源、查询数据源绑定的一个或多个策略。"}