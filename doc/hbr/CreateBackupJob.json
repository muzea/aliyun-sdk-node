{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"95428","abilityTreeNodes":["FEATUREhbr56LH1C","FEATUREhbrFWIWBG","FEATUREhbr3BJQCT","FEATUREhbrB1KQ9G","FEATUREhbrS7MI6C","FEATUREhbrQ3MV3B","FEATUREhbrF83GXN"]},"parameters":[{"name":"JobName","in":"query","schema":{"description":"备份任务名称。","type":"string","required":false,"example":"k8s-backup-infra-20220131150046-hbr"}},{"name":"SourceType","in":"query","schema":{"description":"数据源类型，取值范围：\n  - **ECS_FILE**：表示ECS文件备份任务。\n  - **UDM_ECS**：表示ECS整机备份任务。\n  - **CONTAINER**表示容器备份任务。","type":"string","required":true,"docRequired":true,"example":"CONTAINER"}},{"name":"Retention","in":"query","schema":{"description":"备份保留天数。","type":"integer","format":"int64","required":false,"docRequired":true,"example":"15"}},{"name":"InstanceId","in":"query","schema":{"description":"仅当**SourceType**取值为**UDM_ECS**时，需要配置该参数。表示ECS实例ID。","type":"string","required":false,"docRequired":true,"example":"i-bp1xxxxxxxxxxxxxxysm"}},{"name":"Detail","in":"query","style":"json","schema":{"description":"整机备份详情，类型为JSON字符串。\n\n* doCopy：是否开启异地复制\n* destinationRegionId：异地复制目标地域\n* destinationRetention：异地复制备份点保留时间\n* diskIdList：备份的云盘ID列表，为空时备份全部云盘。\n* snapshotGroup：是否使用一致性快照组（仅实例所有云盘均为ESSD时有效）。\n* appConsistent：是否使用应用一致性（需要搭配参数preScriptPath和postScriptPath使用）。\n* preScriptPath：冻结脚本路径。\n* postScriptPath：解冻脚本路径。\n* enableWriters：仅当**AppConsistent**为**true**时，需要配置该参数。是否设置应用一致性快照（默认为 true）：\n  * true：创建应用一致性快照\n  * false：创建文件系统一致性快照\n* enableFsFreeze：仅当**AppConsistent**为**true**时，需要配置该参数。是否在创建应用一致性快照前使用 Linux 的 FsFreeze 机制确保文件系统处于只读一致性。默认为 true。\n* timeoutSeconds：仅当**AppConsistent**为**true**时，需要配置该参数。IO 冻结超时时间。默认为 30 秒。","type":"object","required":false,"docRequired":true,"example":"{\n    \"doCopy\": false,\n    \"destinationRegionId\": \"\",\n    \"destinationRetention\": null,\n    \"diskIdList\": [],\n    \"snapshotGroup\": false,\n    \"appConsistent\": false,\n    \"enableWriters\": true,\n    \"preScriptPath\": \"\",\n    \"postScriptPath\": \"\",\n    \"enableFsFreeze\": true,\n    \"timeoutInSeconds\": 60\n}"}},{"name":"BackupType","in":"query","schema":{"description":"备份类型。\n* **COMPLETE**：全量备份。\n* **INCREMENTAL**：增量备份。","type":"string","required":false,"example":"INCREMENTAL"}},{"name":"VaultId","in":"query","schema":{"description":"备份仓库ID。","type":"string","required":false,"example":"v-000xxxxxxxxxxxxxxy1v"}},{"name":"SpeedLimit","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示备份流量控制。格式为`{start}|{end}|{bandwidth}`。多个流量控制配置使用|分隔，并且配置时间不允许有重叠。\n\n- **start**：起始小时。\n- **end**：结束小时。\n- **bandwidth**：限制速率，单位KB/s。","type":"string","required":false,"example":"0:24:NaN"}},{"name":"Options","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示是否使用Windows系统VSS定义备份路径。\n\n- 此功能仅支持Windows类型ECS实例。\n- 如果备份源中有数据更改，需要确保备份数据与源数据的一致时，才可配置为`[\"UseVSS\":true]`。\n- 选择使用VSS后，不支持多个文件目录同时备份。","type":"string","required":false,"example":"{\"UseVSS\":false}"}},{"name":"Include","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示需要备份的路径，该路径下所有文件都备份。最多支持255个字符。","type":"string","required":false,"example":"[\"/home/alice/*.pdf\", \"/home/bob/*.txt\"]"}},{"name":"Exclude","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**时，需要配置该参数。表示不需要进行备份的路径，该路径下所有文件都不备份。最多支持255个字符。","type":"string","required":false,"example":"[\"/var\", \"/proc\"]"}},{"name":"ClusterId","in":"query","schema":{"description":"集群ID。","type":"string","required":false,"example":"cl-00068btz******oku"}},{"name":"ContainerResources","in":"query","schema":{"description":"集群资源，仅**SourceType**取值为**CONTAINER**时需要配置该参数。","type":"string","required":false,"example":"[{\\\"resourceType\\\":\\\"PV\\\",\\\"backupMethod\\\":\\\"FILE\\\",\\\"resourceId\\\":\\\"674dac6d-74cd-47e9-a675-09e2f10d2c45\\\",\\\"resourceInfo\\\":\\\"{\\\\\\\"pv_name\\\\\\\":\\\\\\\"nas-650dac6d-74cd-47e9-a675-09e2f10d2c45\\\\\\\",\\\\\\\"pv_size\\\\\\\":\\\\\\\"8Gi\\\\\\\",\\\\\\\"storage_class\\\\\\\":\\\\\\\"alibabacloud-cnfs-nas\\\\\\\",\\\\\\\"pvc_name\\\\\\\":\\\\\\\"data-postgresql-default-0\\\\\\\",\\\\\\\"namespace\\\\\\\":\\\\\\\"database\\\\\\\"}\\\",\\\"host\\\":\\\"cn-huhehaote.192.168.13.133\\\",\\\"hostPrefix\\\":\\\"6f5e758e-8d35-4584-b9ce-8333adfc7547/volumes/kubernetes.io~csi/nas-670dac6d-74cd-47e9-a675-09e2f10d2c45/mount\\\",\\\"pvPath\\\":\\\"/\\\"}]"}},{"name":"InitiatedByAck","in":"query","schema":{"description":"是否由容器服务调用。默认为false。","type":"boolean","required":false,"example":"false"}},{"name":"ContainerClusterId","in":"query","schema":{"description":"集群ID，仅**SourceType**取值为**CONTAINER**时需要配置该参数。","type":"string","required":false,"example":"cc-000xxxxxxxxxxxxxxi00"}},{"name":"CrossAccountType","in":"query","schema":{"description":"跨账号备份类型。支持： \n- SELF_ACCOUNT：本账号备份\n- CROSS_ACCOUNT：跨账号备份","type":"string","required":false,"enumValueTitles":{},"example":"SELF_ACCOUNT"}},{"name":"CrossAccountUserId","in":"query","schema":{"description":"被当前账号管理的跨账号备份的原账号ID。\n","type":"integer","format":"int64","required":false,"example":"158975xxxxxx4625"}},{"name":"CrossAccountRoleName","in":"query","schema":{"description":"被当前账号管理的跨账号备份的原账号RAM中创建的角色名。","type":"string","required":false,"example":"BackupRole"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"25F49E7B-7E39-542E-83AD-62E6E7F73786"},"Success":{"description":"请求是否成功。\n\n- true：成功。\n- false：失败。","type":"boolean","example":"true"},"JobId":{"description":"备份任务ID。","type":"string","example":"job-000csy09q50a2jdcbwbo"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"25F49E7B-7E39-542E-83AD-62E6E7F73786\\\",\\n  \\\"Success\\\": true,\\n  \\\"JobId\\\": \\\"job-000csy09q50a2jdcbwbo\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateBackupJobResponse>\\n    <Code>200</Code>\\n    <Message>successful</Message>\\n    <RequestId>25F49E7B-7E39-542E-83AD-62E6E7F73786</RequestId>\\n    <Success>true</Success>\\n    <JobId>job-000csy09q50a2jdcbwbo</JobId>\\n</CreateBackupJobResponse>\",\"errorExample\":\"\"}]","title":"创建备份任务","summary":"创建一个手动备份任务。"}