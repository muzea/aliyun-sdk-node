{"methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"95447","abilityTreeNodes":["FEATUREhbr56LH1C","FEATUREhbrFWIWBG","FEATUREhbr3BJQCT","FEATUREhbrB1KQ9G","FEATUREhbrS7MI6C","FEATUREhbrQ3MV3B","FEATUREhbrF83GXN"]},"parameters":[{"name":"RestoreType","in":"query","schema":{"description":"恢复目的地数据源类型，取值范围：\n  - **ECS_FILE**：恢复到ECS文件。\n  - **OSS**：恢复到阿里云OSS。\n  - **NAS**：恢复到阿里云NAS。\n  - **OTS_TABLE**：恢复到阿里云OTS。\n  - **UDM\\_ECS_ROLLBACK**：恢复到阿里云ECS整机。","type":"string","required":true,"docRequired":true,"example":"ECS_FILE"}},{"name":"VaultId","in":"query","schema":{"description":"备份快照所属备份仓库ID。","type":"string","required":false,"docRequired":true,"example":"v-*********************"}},{"name":"SnapshotId","in":"query","schema":{"description":"备份快照ID。","type":"string","required":false,"docRequired":true,"example":"s-********************"}},{"name":"SnapshotHash","in":"query","schema":{"description":"备份快照HASH值。","type":"string","required":false,"docRequired":false,"example":"f2fe..."}},{"name":"SourceType","in":"query","schema":{"description":"数据源类型，取值范围：\n  - **ECS_FILE**：恢复ECS文件。\n  - **OSS**：恢复阿里云OSS。\n  - **NAS**：恢复阿里云NAS。\n  - **OTS_TABLE**：恢复到阿里云OTS。\n  - **UDM_ECS**：恢复到阿里云ECS整机。","type":"string","required":true,"docRequired":true,"example":"ECS_FILE"}},{"name":"Options","in":"query","schema":{"description":"恢复任务参数","type":"string","required":false,"example":"{\\\"includes\\\":[],\\\"excludes\\\":[],\\\"conflictPolicy\\\":\\\"OVERWRITE_EXISTING\\\"}"}},{"name":"TargetFileSystemId","in":"query","schema":{"description":"仅当**RestoreType**取值为**NAS**时，该参数有效。表示恢复目的地的文件系统ID。","type":"string","required":false,"example":"005494"}},{"name":"TargetCreateTime","in":"query","schema":{"description":"仅当**RestoreType**取值为**NAS**时，该参数有效。表示恢复目的地的文件系统创建时间。","type":"integer","format":"int64","required":false,"example":"1554347313"}},{"name":"TargetPath","in":"formData","schema":{"description":"仅当**RestoreType**取值为**ECS_FILE**时，该参数有效。表示恢复目的地的文件路径。","type":"string","required":false,"example":"C:\\"}},{"name":"TargetBucket","in":"query","schema":{"description":"仅当**RestoreType**取值为**OSS**时，该参数有效。表示恢复目的地的OSS bucket名称。","type":"string","required":false,"example":"hbr-backup-oss"}},{"name":"TargetPrefix","in":"query","schema":{"description":"仅当**RestoreType**取值为**OSS**时，该参数有效。表示恢复目的地的对象前缀。","type":"string","required":false,"example":"hbr"}},{"name":"UdmDetail","in":"query","style":"json","schema":{"description":"整机备份详情。","type":"object","required":false,"example":"{\\\"sourceInstanceId\\\":\\\"i-uf62te6pm3iwsyxyz66q\\\",\\\"bootAfterRestore\\\":false}"}},{"name":"UdmRegionId","in":"query","schema":{"description":"仅当**SourceType**取值为**UDM_ECS**时，该参数有效。表示恢复的目标地域。","type":"string","required":false,"example":"cn-shanghai"}},{"name":"TargetInstanceId","in":"formData","schema":{"description":"仅当**RestoreType**取值为**ECS_FILE**时，该参数有效。表示恢复目的地的ECS实例ID。","type":"string","required":false,"example":"i-*********************"}},{"name":"Include","in":"formData","schema":{"description":"恢复的路径。该路径下所有文档都会被恢复。最多255个字符。","type":"string","required":false,"example":"[\"/home/alice/*.pdf\", \"/home/bob/*.txt\"]"}},{"name":"Exclude","in":"formData","schema":{"description":"不做恢复的路径。该路径下所有文档都不会被恢复。最多255个字符。","type":"string","required":false,"example":"[\"/var\", \"/proc\"]"}},{"name":"TargetContainer","in":"query","schema":{"description":"恢复的目标容器详情。","type":"string","required":false,"example":"{\\\"host\\\":\\\"k8s-node1\\\",\\\"hostPrefix\\\":\\\"/var/lib/kubelet/pods/4acb31fe-8577-40ff-bc8c-eccabd835f73/volumes/kubernetes.io~csi/pvc-b050b00e-ef17-4792-aab1-1642355cf1f4/mount\\\",\\\"pvPath\\\":\\\"/\\\"}"}},{"name":"InitiatedByAck","in":"query","schema":{"description":"是否由容器服务调用。默认为false。","type":"boolean","required":false,"example":"false"}},{"name":"TargetContainerClusterId","in":"query","schema":{"description":"恢复的目标容器集群ID。","type":"string","required":false,"example":"cc-000amjsc7o1h9506oob7"}},{"name":"TargetInstanceName","in":"query","schema":{"description":"恢复的目标表格存储实例名称。","type":"string","required":false,"example":"instancename"}},{"name":"TargetTableName","in":"query","schema":{"description":"恢复的目标表格存储的数据表名称。","type":"string","required":false,"example":"tablename"}},{"name":"TargetTime","in":"query","schema":{"description":"恢复的表格存储的时间。UNIX时间，单位为秒。","type":"integer","format":"int64","required":false,"example":"1642496881"}},{"name":"OtsDetail","in":"formData","style":"json","schema":{"description":"表格存储实例详情。","required":false,"$ref":"#/components/schemas/OtsTableRestoreDetail"}},{"name":"CrossAccountType","in":"query","schema":{"description":"跨账号备份类型。支持： \n- SELF_ACCOUNT：本账号备份\n- CROSS_ACCOUNT：跨账号备份","type":"string","required":false,"enumValueTitles":{},"example":"SELF_ACCOUNT"}},{"name":"CrossAccountUserId","in":"query","schema":{"description":"被当前账号管理的跨账号备份的原账号ID。","type":"integer","format":"int64","required":false,"example":"158975xxxxx4625"}},{"name":"CrossAccountRoleName","in":"query","schema":{"description":"被当前账号管理的跨账号备份的原账号RAM中创建的角色名。","type":"string","required":false,"example":"BackupRole"}},{"name":"FailbackDetail","in":"query","style":"json","schema":{"description":"恢复至本地的详细信息。","type":"object","required":false,"example":"{\"cpu\":4,\"extra\":\"{\\\"restoreVMNamePrefix\\\":\\\"627-\\\",\\\"dataCenterName\\\":\\\"SDDC-Datacenter\\\",\\\"dataStoreId\\\":\\\"datastore-50\\\",\\\"folderId\\\":\\\"group-v49\\\",\\\"resourcePoolId\\\":\\\"resgroup-46\\\",\\\"locationName\\\":\\\"vcenter.pc-uf600a******1.acvs.aliyuncs.com/SDDC-Datacenter/Workloads\\\",\\\"computeResourceName\\\":\\\"SDDC-Datacenter/Default_c-uf600a******\\\",\\\"dataStoreName\\\":\\\"Default_c-uf600a******/WorkloadDatastore\\\",\\\"networkMoReference\\\":\\\"DistributedVirtualPortgroup:dvportgroup-1001\\\",\\\"useHotAdd\\\":false}\",\"instanceId\":\"i-2vc******z\",\"memoryInMB\":8192,\"serverId\":\"0fdc0c86-eb92-4e05-91ab-eeaf9fb6ad01\",\"uefiBoot\":false}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"Success":{"description":"请求是否成功。\n  - true：成功\n  - false：失败","type":"boolean","example":"true"},"RestoreId":{"description":"恢复任务ID。","type":"string","example":"r-*********************"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"Success\\\": true,\\n  \\\"RestoreId\\\": \\\"r-*********************\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateRestoreJobResponse>\\n    <Code>200</Code>\\n    <Message>successful</Message>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <Success>true</Success>\\n    <RestoreId>r-*********************</RestoreId>\\n</CreateRestoreJobResponse>\",\"errorExample\":\"\"}]","title":"创建恢复任务","summary":"创建一个恢复任务。","description":"- 根据所选快照与恢复目的地，创建恢复任务。\n- 目前数据源类型与恢复目的地数据源类型需要一致。"}