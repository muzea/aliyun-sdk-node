{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"95649","abilityTreeNodes":["FEATUREhbrS7MI6C","FEATUREhbrQ3MV3B","FEATUREhbrF83GXN","FEATUREhbr56LH1C","FEATUREhbrFWIWBG","FEATUREhbrAW9I1R","FEATUREhbrB1KQ9G","FEATUREhbr3BJQCT"]},"parameters":[{"name":"SourceType","in":"query","schema":{"description":"数据源类型。取值范围：\n* **ECS_FILE**：表示ECS文件的备份快照。\n* **OSS**：表示阿里云OSS的备份快照。\n* **NAS**：表示阿里云NAS的备份快照。","type":"string","required":false,"docRequired":true,"example":"ECS_FILE"}},{"name":"Query","in":"query","style":"json","schema":{"description":"查询条件。Query示例如下：\n\n```\n[\n  {\n    \"field\": \"VaultId\",\n    \"value\": \"v-0003rf9m*****qx5\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"InstanceId\",\n    \"value\": \"i-bp1i20zq2*****e9368m\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"PlanId\",\n    \"value\": \"plan-0005vk*****gkd1iu4f\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"CompleteTime\",\n    \"value\": 1626769913,\n    \"operation\": \"GREATER_THAN_OR_EQUAL\"\n  }\n]\n```\n\n- 支持的field如下：\n\n    - VaultId：必选参数，表示仓库ID。\n    - InstanceId：仅当SourceType=ECS_FILE时，必选参数，表示ECS实例ID。\n    -  Bucket ：仅当SourceType=OSS时，必选参数，表示OSS bucket名称。\n    - FileSystemId：仅当SourceType=NAS时，必选参数，表示NAS文件系统ID。\n    - CreateTime ：仅当SourceType=NAS时，必选参数，表示NAS文件系统创建时间。\n    - CompleteTime：快照完成时间。\n    - PlanId：备份计划ID。\n\n- 支持的operation如下：\n\n    - MATCH_TERM：精确匹配。\n    - GREATER_THAN：大于。\n    - GREATER_THAN_OR_EQUAL：大于等于。\n    - LESS_THAN：小于。\n    - LESS_THAN_OR_EQUAL：小于等于。\n    - BETWEEN：区间，value为JSON数组` [下界,上界]`。\n    - IN：在集合中，value为数组。\n    - NOT_IN：不在集合中，value为数组。","type":"array","items":{"description":"查询条件。Query示例如下：\n\n```\n[\n  {\n    \"field\": \"VaultId\",\n    \"value\": \"v-0003rf9m*****qx5\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"InstanceId\",\n    \"value\": \"i-bp1i20zq2*****e9368m\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"PlanId\",\n    \"value\": \"plan-0005vk*****gkd1iu4f\",\n    \"operation\": \"MATCH_TERM\"\n  },\n  {\n    \"field\": \"CompleteTime\",\n    \"value\": 1626769913,\n    \"operation\": \"GREATER_THAN_OR_EQUAL\"\n  }\n]\n```\n\n- 支持的field如下：\n\n    - VaultId：必选参数，表示仓库ID。\n    - InstanceId：仅当SourceType=ECS_FILE时，必选参数，表示ECS实例ID。\n    -  Bucket ：仅当SourceType=OSS时，必选参数，表示OSS bucket名称。\n    - FileSystemId：仅当SourceType=NAS时，必选参数，表示NAS文件系统ID。\n    - CreateTime ：仅当SourceType=NAS时，必选参数，表示NAS文件系统创建时间。\n    - CompleteTime：快照完成时间。\n    - PlanId：备份计划ID。\n\n- 支持的operation如下：\n\n    - MATCH_TERM：精确匹配。\n    - GREATER_THAN：大于。\n    - GREATER_THAN_OR_EQUAL：大于等于。\n    - LESS_THAN：小于。\n    - LESS_THAN_OR_EQUAL：小于等于。\n    - BETWEEN：区间，value为JSON数组` [下界,上界]`。\n    - IN：在集合中，value为数组。\n    - NOT_IN：不在集合中，value为数组。","type":"any","required":false,"example":"[ { \"field\": \"VaultId\", \"value\": \"v-0003rf9m17pap3ltpqx5\", \"operation\": \"MATCH_TERM\" }, { \"field\": \"InstanceId\", \"value\": \"i-bp1i20zq2wuzdie9368m\", \"operation\": \"MATCH_TERM\" }, { \"field\": \"PlanId\", \"value\": \"plan-0005vkqhpesqgkd1iu4f\", \"operation\": \"MATCH_TERM\" }, { \"field\": \"CompleteTime\", \"value\": 1626769913, \"operation\": \"GREATER_THAN_OR_EQUAL\" } ]"},"required":false,"example":"[   {     \"field\": \"VaultId\",     \"value\": \"v-0003rf9m17pap3ltpqx5\",     \"operation\": \"MATCH_TERM\"   },   {     \"field\": \"InstanceId\",     \"value\": \"i-bp1i20zq2wuzdie9368m\",     \"operation\": \"MATCH_TERM\"   },   {     \"field\": \"PlanId\",     \"value\": \"plan-0005vkqhpesqgkd1iu4f\",     \"operation\": \"MATCH_TERM\"   },   {     \"field\": \"CompleteTime\",     \"value\": 1626769913,     \"operation\": \"GREATER_THAN_OR_EQUAL\"   } ]"}},{"name":"Limit","in":"query","schema":{"description":"本次查询需要返回的最大数量。\n如果只为了获取行数，无需具体数据，可以设置`limit=0`，即不返回任意一行数据。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"NextToken","in":"query","schema":{"description":"获取下一页快照所需的Token。","type":"string","required":false,"example":"caeba0bbb2be03f84eb48b699f0a****"}},{"name":"SortBy","in":"query","schema":{"description":"排序字段。","type":"string","required":false,"example":"CreatedTime"}},{"name":"Order","in":"query","schema":{"description":"排序方式，默认值为ASC。\n- ASC：升序\n- DESC：降序","type":"string","required":false,"example":"ASC"}}],"responses":{"200":{"schema":{"type":"object","properties":{"NextToken":{"description":"获取下一页快照所需的Token。","type":"string","example":"BE"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"Success":{"description":"请求是否成功。\n\n- true：成功。\n- false：失败。","type":"boolean","example":"true"},"Limit":{"description":"当前页显示历史快照数量。","type":"integer","format":"int32","example":"10"},"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"TotalCount":{"description":"符合条件的快照总数。","type":"integer","format":"int32","example":"20"},"Snapshots":{"type":"object","properties":{"Snapshot":{"description":"历史快照列表。","type":"array","items":{"type":"object","properties":{"Status":{"description":"备份快照任务的状态。取值范围：\n* **COMPLETE**：成功\n* **PARTIAL_COMPLETE**：部分成功\n* **FAILED**：失败","type":"string","example":"COMPLETE"},"SnapshotHash":{"description":"快照HASH值。","type":"string","example":"f2fe..."},"VaultId":{"description":"保存备份库快照的仓库ID。","type":"string","example":"v-0003rf9m17pap3ltpqx5"},"ActualItems":{"description":"快照实际项目数。\n\n> 目前仅文件备份可用。\n","type":"integer","format":"int64","example":"6"},"BackupType":{"description":"备份类型。取值为**COMPLETE**，表示全量备份。","type":"string","example":"COMPLETE"},"CreateTime":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示文件系统创建时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1607436917"},"ActualBytes":{"description":"去重后快照实际数据量。单位为字节。","type":"integer","format":"int64","example":"600"},"SourceType":{"description":"数据源类型。取值范围：\n* **ECS_FILE**：ECS文件的备份快照。\n* **OSS**：阿里云OSS的备份快照。\n* **NAS**：阿里云NAS的备份快照。","type":"string","example":"ECS_FILE"},"Prefix":{"description":"仅当**SourceType**取值为**OSS**时，该参数有效。表示备份前缀。","type":"string","example":"example/"},"ClientId":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示备份客户端ID。","type":"string","example":"c-*********************"},"BytesTotal":{"description":"数据源总量。单位为字节。","type":"integer","format":"int64","example":"1000"},"ItemsDone":{"description":"备份项目数。\n\n> 目前仅文件备份可用。\n","type":"integer","format":"int64","example":"8"},"CompleteTime":{"description":"备份快照完成时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"Retention":{"description":"备份快照保留天数。","type":"integer","format":"int64","example":"7"},"CreatedTime":{"description":"备份快照的创建时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"Bucket":{"description":"仅当**SourceType**取值为**OSS**时，该参数有效。表示OSS bucket名称。","type":"string","example":"hbr-backup-oss"},"ParentSnapshotHash":{"description":"父备份的快照HASH值。","type":"string","example":"f2fe.."},"InstanceId":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示ECS实例ID。","type":"string","example":"i-*********************"},"FileSystemId":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示文件系统ID。","type":"string","example":"005494"},"ErrorFile":{"description":"记录备份失败信息的文件，包含备份部分完成的信息。","type":"string","example":"Item\tError Message C:\\Program Files (x86)\\Symantec\\Symantec Endpoint Protection\\14.3.558.0000.105\\Bin\\service.dat\tOpen: open \\\\?\\C:\\Program Files (x86)\\Symantec\\Symantec Endpoint Protection\\14.3.558.0000.105\\Bin\\service.dat: The process cannot access the file because it is being used by another process. C:\\ProgramData\\McAfee\\Agent\\data\\InstallerFiles\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini\tOpen: open \\\\?\\C:\\ProgramData\\McAfee\\Agent\\data\\InstallerFiles\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini: Access is denied."},"StartTime":{"description":"快照开始时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"UpdatedTime":{"description":"备份快照的更新时间。UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1554347313"},"SnapshotId":{"description":"备份快照ID。","type":"string","example":"s-*********************"},"JobId":{"description":"备份任务ID。","type":"string","example":"v-*********************"},"Path":{"description":"仅当**SourceType**取值为**ECS_FILE**时，该参数有效。表示备份的文件路径。","type":"string","example":"[\"/home\"]"},"ItemsTotal":{"description":"数据源项目总数。\n\n> 目前仅文件备份可用。\n","type":"integer","format":"int64","example":"10"},"BytesDone":{"description":"增量备份的数据量。单位为字节。","type":"integer","format":"int64","example":"800"},"Paths":{"type":"object","properties":{"Path":{"description":"备份文件路径列表。","example":"\"/home\"","type":"array","items":{"description":"仅当**SourceType**取值为**NAS**时，该参数有效。表示备份的文件路径。","type":"string","example":"\"/home\""}}}},"InstanceName":{"description":"表格存储实例名称。","type":"string","example":"instancename"},"TableName":{"description":"表格存储实例的数据表名称。","type":"string","example":"table2"},"RangeStart":{"description":"备份任务开始执行时间。UNIX时间，单位为毫秒。","type":"integer","format":"int64","example":"1642492553038"},"RangeEnd":{"description":"备份任务结束执行时间。UNIX时间，单位为毫秒。","type":"integer","format":"int64","example":"1642521709966"},"ExpireTime":{"description":"快照到期时间，UNIX时间，单位为秒。","type":"integer","format":"int64","example":"1640334062"},"SourceSnapshotHash":{"description":"转归档前快照HASH值。","type":"string","example":"qwer***"},"SourceParentSnapshotHash":{"description":"转归档前父快照HASH值。","type":"string","example":"qwer***"},"StorageClass":{"description":"存储类型。取值：\n- **Standard**：标准。\n- **Archive**：归档。\n- **ColdArchive**：冷归档。","type":"string","example":"STANDARD"},"ArchiveTime":{"description":"转归档时间。","type":"integer","format":"int64","example":"1640334062"},"UseCommonNas":{"description":"是否使用本地NAS。","type":"boolean","example":"false"},"Include":{"description":"备份任务包含的备份路径。","type":"string","example":"[\\\"/test/example_cn-huhehaote_3.txt\\\", \\\"/test/example_cn-huhehaote_9.txt\\\", \\\"/test/example_cn-huhehaote_5.txt\\\", \\\"/test/example_cn-huhehaote_1.txt\\\", \\\"/test/example_cn-huhehaote_7.txt\\\"]"},"Exclude":{"description":"备份任务不包含的备份路径。","type":"string","example":"[\\\"/test/example_cn-hangzhou_7.txt\\\", \\\"/test/example_cn-hangzhou_1.txt\\\", \\\"/test/example_cn-hangzhou_3.txt\\\", \\\"/test/example_cn-hangzhou_9.txt\\\", \\\"/test/example_cn-hangzhou_6.txt\\\"]"}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"NextToken\\\": \\\"BE\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"Success\\\": true,\\n  \\\"Limit\\\": 10,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"TotalCount\\\": 20,\\n  \\\"Snapshots\\\": {\\n    \\\"Snapshot\\\": [\\n      {\\n        \\\"Status\\\": \\\"COMPLETE\\\",\\n        \\\"SnapshotHash\\\": \\\"f2fe...\\\",\\n        \\\"VaultId\\\": \\\"v-0003rf9m17pap3ltpqx5\\\",\\n        \\\"ActualItems\\\": 6,\\n        \\\"BackupType\\\": \\\"COMPLETE\\\",\\n        \\\"CreateTime\\\": 1607436917,\\n        \\\"ActualBytes\\\": 600,\\n        \\\"SourceType\\\": \\\"ECS_FILE\\\",\\n        \\\"Prefix\\\": \\\"example/\\\",\\n        \\\"ClientId\\\": \\\"c-*********************\\\",\\n        \\\"BytesTotal\\\": 1000,\\n        \\\"ItemsDone\\\": 8,\\n        \\\"CompleteTime\\\": 1554347313,\\n        \\\"Retention\\\": 7,\\n        \\\"CreatedTime\\\": 1554347313,\\n        \\\"Bucket\\\": \\\"hbr-backup-oss\\\",\\n        \\\"ParentSnapshotHash\\\": \\\"f2fe..\\\",\\n        \\\"InstanceId\\\": \\\"i-*********************\\\",\\n        \\\"FileSystemId\\\": \\\"005494\\\",\\n        \\\"ErrorFile\\\": \\\"Item\\\\tError Message C:\\\\\\\\Program Files (x86)\\\\\\\\Symantec\\\\\\\\Symantec Endpoint Protection\\\\\\\\14.3.558.0000.105\\\\\\\\Bin\\\\\\\\service.dat\\\\tOpen: open \\\\\\\\\\\\\\\\?\\\\\\\\C:\\\\\\\\Program Files (x86)\\\\\\\\Symantec\\\\\\\\Symantec Endpoint Protection\\\\\\\\14.3.558.0000.105\\\\\\\\Bin\\\\\\\\service.dat: The process cannot access the file because it is being used by another process. C:\\\\\\\\ProgramData\\\\\\\\McAfee\\\\\\\\Agent\\\\\\\\data\\\\\\\\InstallerFiles\\\\\\\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini\\\\tOpen: open \\\\\\\\\\\\\\\\?\\\\\\\\C:\\\\\\\\ProgramData\\\\\\\\McAfee\\\\\\\\Agent\\\\\\\\data\\\\\\\\InstallerFiles\\\\\\\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini: Access is denied.\\\",\\n        \\\"StartTime\\\": 1554347313,\\n        \\\"UpdatedTime\\\": 1554347313,\\n        \\\"SnapshotId\\\": \\\"s-*********************\\\",\\n        \\\"JobId\\\": \\\"v-*********************\\\",\\n        \\\"Path\\\": \\\"[\\\\\\\"/home\\\\\\\"]\\\",\\n        \\\"ItemsTotal\\\": 10,\\n        \\\"BytesDone\\\": 800,\\n        \\\"Paths\\\": {\\n          \\\"Path\\\": [\\n            \\\"\\\\\\\"/home\\\\\\\"\\\"\\n          ]\\n        },\\n        \\\"InstanceName\\\": \\\"instancename\\\",\\n        \\\"TableName\\\": \\\"table2\\\",\\n        \\\"RangeStart\\\": 1642492553038,\\n        \\\"RangeEnd\\\": 1642521709966,\\n        \\\"ExpireTime\\\": 1640334062,\\n        \\\"SourceSnapshotHash\\\": \\\"qwer***\\\",\\n        \\\"SourceParentSnapshotHash\\\": \\\"qwer***\\\",\\n        \\\"StorageClass\\\": \\\"STANDARD\\\",\\n        \\\"ArchiveTime\\\": 1640334062,\\n        \\\"UseCommonNas\\\": false,\\n        \\\"Include\\\": \\\"[\\\\\\\\\\\\\\\"/test/example_cn-huhehaote_3.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-huhehaote_9.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-huhehaote_5.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-huhehaote_1.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-huhehaote_7.txt\\\\\\\\\\\\\\\"]\\\",\\n        \\\"Exclude\\\": \\\"[\\\\\\\\\\\\\\\"/test/example_cn-hangzhou_7.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-hangzhou_1.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-hangzhou_3.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-hangzhou_9.txt\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"/test/example_cn-hangzhou_6.txt\\\\\\\\\\\\\\\"]\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SearchHistoricalSnapshotsResponse>\\n    <NextToken>BE</NextToken>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <Success>true</Success>\\n    <Limit>10</Limit>\\n    <Code>200</Code>\\n    <Message>successful</Message>\\n    <TotalCount>20</TotalCount>\\n    <Snapshots>\\n        <Status>COMPLETE</Status>\\n        <SnapshotHash>f2fe...</SnapshotHash>\\n        <VaultId>v-0003rf9m17pap3ltpqx5</VaultId>\\n        <ActualItems>6</ActualItems>\\n        <BackupType>COMPLETE</BackupType>\\n        <CreateTime>1607436917</CreateTime>\\n        <ActualBytes>600</ActualBytes>\\n        <SourceType>ECS_FILE</SourceType>\\n        <Prefix>example/</Prefix>\\n        <ClientId>c-*********************</ClientId>\\n        <BytesTotal>1000</BytesTotal>\\n        <ItemsDone>8</ItemsDone>\\n        <CompleteTime>1554347313</CompleteTime>\\n        <Retention>7</Retention>\\n        <CreatedTime>1554347313</CreatedTime>\\n        <Bucket>hbr-backup-oss</Bucket>\\n        <ParentSnapshotHash>f2fe..</ParentSnapshotHash>\\n        <InstanceId>i-*********************</InstanceId>\\n        <FileSystemId>005494</FileSystemId>\\n        <ErrorFile>Item\\tError Message C:\\\\Program Files (x86)\\\\Symantec\\\\Symantec Endpoint Protection\\\\14.3.558.0000.105\\\\Bin\\\\service.dat\\tOpen: open \\\\\\\\?\\\\C:\\\\Program Files (x86)\\\\Symantec\\\\Symantec Endpoint Protection\\\\14.3.558.0000.105\\\\Bin\\\\service.dat: The process cannot access the file because it is being used by another process. C:\\\\ProgramData\\\\McAfee\\\\Agent\\\\data\\\\InstallerFiles\\\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini\\tOpen: open \\\\\\\\?\\\\C:\\\\ProgramData\\\\McAfee\\\\Agent\\\\data\\\\InstallerFiles\\\\172e8a3b04b7ab0fd0215f4fb7707e3744b37d83b6743b3eacb94447c74dc9af_contrib.ini: Access is denied.</ErrorFile>\\n        <StartTime>1554347313</StartTime>\\n        <UpdatedTime>1554347313</UpdatedTime>\\n        <SnapshotId>s-*********************</SnapshotId>\\n        <JobId>v-*********************</JobId>\\n        <Path>[\\\"/home\\\"]</Path>\\n        <ItemsTotal>10</ItemsTotal>\\n        <BytesDone>800</BytesDone>\\n        <Paths>\\\"/home\\\"</Paths>\\n        <InstanceName>instancename</InstanceName>\\n        <TableName>table2</TableName>\\n        <RangeStart>1642492553038</RangeStart>\\n        <RangeEnd>1642521709966</RangeEnd>\\n        <ExpireTime>1640334062</ExpireTime>\\n    </Snapshots>\\n</SearchHistoricalSnapshotsResponse>\",\"errorExample\":\"\"}]","title":"获取备份快照","summary":"获取一个或者多个符合条件的历史备份快照。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}