{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"PolicyId","in":"formData","schema":{"description":"策略ID。","type":"string","required":true,"example":"po-000************ky9"}},{"name":"DataSourceId","in":"formData","schema":{"description":"数据源ID。","type":"string","required":true,"example":"i-bp1************dtv"}},{"name":"SourceType","in":"query","schema":{"description":"数据源类型，取值范围：\n\n- **UDM_ECS**：表示ECS整机备份","type":"string","required":true,"example":"UDM_ECS"}},{"name":"PolicyBindingDescription","in":"query","schema":{"description":"绑定策略描述。","type":"string","required":false,"example":"po-000************5xx-i-2ze************nw4"}},{"name":"Disabled","in":"query","schema":{"description":"策略对该数据源是否暂停生效。\n- true：暂停\n- false：未暂停","type":"boolean","required":false,"example":"true"}},{"name":"Source","in":"query","schema":{"description":"- 当SourceType取值为**OSS**时，表示备份某个prefix，如果不指定，则表示备份整个Bucket根目录。\n- 当SourceType取值为**ECS_FILE**或**File**时，表示备份的文件目录，如果不指定，则表示备份全部目录。","type":"string","required":false,"example":"backup/"}},{"name":"Include","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示要进行备份的文件类型，这些类型的所有文件都备份。最多支持255个字符。","type":"string","required":false,"example":"[\\\"*.doc\\\",\\\"*.xltm\\\"]"}},{"name":"Exclude","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示不需要进行备份的文件类型，该类型的所有文件都不备份。最多支持255个字符。","type":"string","required":false,"example":"[\\\"*.doc\\\",\\\"*.xltm\\\"]"}},{"name":"SpeedLimit","in":"query","schema":{"description":"仅当**SourceType**取值为**ECS_FILE**或**File**时，需要配置该参数。表示备份流量控制。格式为`{start}{end}{bandwidth}`。多个流量控制配置使用分隔，并且配置时间不允许有重叠。\n\n- **start**：起始小时。\n- **end**：结束小时。\n- **bandwidth**：限制速率，单位KB/s。","type":"string","required":false,"example":"0:24:5120"}},{"name":"AdvancedOptions","in":"query","style":"json","schema":{"description":"高级选项。","type":"object","properties":{"UdmDetail":{"description":"ECS整机备份详情。","type":"object","properties":{"ExcludeDiskIdList":{"description":"不需要保护的云盘ID列表。当DiskIdList不为空时，将忽略该参数。","type":"array","items":{"description":"不需要保护的云盘ID。","type":"string","required":false,"example":"d-bp1************apo"},"required":false},"DiskIdList":{"description":"需要保护的云盘ID列表。保护所有云盘时，该值为空。","type":"array","items":{"description":"需要保护的云盘ID。","type":"string","required":false,"example":"d-bp1************apo"},"required":false},"SnapshotGroup":{"description":"是否创建快照一致性组。仅云盘类型全部为ESSD时，支持创建快照一致性组。","type":"boolean","required":false,"example":"true"},"AppConsistent":{"description":"是否创建应用一致性。仅云盘类型全部为ESSD时，支持创建快照应用一致性。","type":"boolean","required":false,"example":"false"},"RamRoleName":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照需要配置的RAM角色名称。","type":"string","required":false,"example":"AliyunECSInstanceForHbrRole"},"PreScriptPath":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照前执行的冻结脚本路径。","type":"string","required":false,"example":"/tmp/prescript.sh"},"PostScriptPath":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。创建应用一致性快照后执行的解冻脚本路径。","type":"string","required":false,"example":"/tmp/postscript.sh"},"EnableFsFreeze":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。是否在创建应用一致性快照前使用Linux的FsFreeze机制确保文件系统处于只读一致性。默认为true。","type":"boolean","required":false,"example":"true"},"TimeoutInSeconds":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。IO冻结超时时间。默认为30秒。","type":"integer","format":"int64","required":false,"example":"30"},"EnableWriters":{"description":"仅当**AppConsistent**为**true**时，需要配置该参数。是否设置应用一致性快照：\n- true：创建应用一致性快照\n- false：创建文件系统一致性快照\n\n默认为true。","type":"boolean","required":false,"example":"true"}},"required":false},"OssDetail":{"description":"OSS备份详情。","type":"object","properties":{"InventoryId":{"description":"OSS清单名称，该值不为空时将使用OSS清单用于性能调优。\n- 建议备份1亿以上OSS对象采用清单提升增量性能，由清单文件产生的存储费用由OSS服务单独收取。\n- OSS清单文件生成需要时间，在OSS清单文件生成完成之前可能会备份失败，可以等待下个周期执行。","type":"string","required":false,"example":"30663060"},"InventoryCleanupPolicy":{"description":"备份后是否删除清单文件。仅当使用OSS清单时有效。支持：\n- **NO_CLEANUP**：不删除。\n- **DELETE_CURRENT**：删除当前文件。\n- **DELETE_CURRENT_AND_PREVIOUS**：删除所有文件。","type":"string","required":false,"example":"NO_CLEANUP"}},"required":false},"CommonFileSystemDetail":{"description":"大规模文件系统备份详情。","type":"object","properties":{"FullOnIncrementFail":{"description":"增量备份失败时是否转为全量备份。取值：\n- **true**：失败时转为全量备份。\n- **false**：失败时不转为全量备份。","type":"boolean","required":false,"example":"true"},"FetchSliceSize":{"description":"备份分片大小（文件数）。","type":"integer","format":"int64","required":false,"example":"100000"}},"required":false}},"required":false}}],"responses":{"200":{"schema":{"title":"UpdatePolicyBindingResponse","description":"UpdatePolicyBindingResponse","type":"object","properties":{"Success":{"description":"请求是否成功。\n\n- true表示成功。\n- false表示失败。","type":"boolean","example":"true"},"Code":{"description":"返回码，200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息描述，成功一般返回successful，错误时会返回相应错误信息。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"B6F24C46-54B9-519B-9AB8-A8988D705E67"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Success\\\": true,\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"B6F24C46-54B9-519B-9AB8-A8988D705E67\\\"\\n}\",\"type\":\"json\"}]","title":"修改策略与数据源关联","summary":"修改策略与数据源的关联关系。"}