{"path":"/openapi/ha3/instances/{instanceId}/indexes/{indexName}","methods":["put"],"schemes":["https","http"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"186780","abilityTreeNodes":["FEATUREopensearchVHEWK3"]},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例ID","type":"string","required":true,"example":"ha-cn-pl32rf0****"}},{"name":"indexName","in":"path","schema":{"description":"索引名称","type":"string","required":true,"example":"test_api"}},{"name":"dryRun","in":"query","schema":{"description":"是否校验入参数据合法性，默认false。\n\n取值：\n\n- **true**：只校验参数合法性。\n\n- **false**：校验参数合法性，创建归因配置。","type":"boolean","required":false,"example":"true","default":"false"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数","type":"object","properties":{"dataSourceInfo":{"description":"数据源相关信息 （向量检索版新版本必填）","type":"object","properties":{"buildMode":{"title":"索引重建方式 (api: API方式推送数据源, indexRecover: 从索引中恢复数据源)","description":"索引重建方式 (api: API方式推送数据源, indexRecover: 从索引中恢复数据源)","type":"string","required":false,"example":"api"},"generation":{"title":"从索引中恢复数据源，dump表的generation","description":"从索引中恢复数据源，dump表的generation","type":"integer","format":"int64","required":false,"example":"1718698593"},"dataTimeSec":{"title":"追增量时间戳","description":"追增量时间戳","type":"integer","format":"int32","required":false,"example":"1709715164"},"processPartitionCount":{"title":"数据更新资源数","description":"数据更新资源数","type":"integer","format":"int32","required":false,"example":"4"},"name":{"title":"数据源名","description":"数据源名","type":"string","required":false,"example":"ha-cn-pl32rf0****_index_1"},"type":{"title":"数据源类型 (odps, swift, saro, oss, unKnow)","description":"数据源类型 (odps, swift, saro, oss, unKnow)","type":"string","required":false,"example":"odps"},"domain":{"title":"离线部署","description":"离线部署","type":"string","required":false,"example":"vpc_hz_domain_1\n"},"config":{"title":"odps 数据源配置","description":"odps 数据源配置","type":"object","properties":{"endpoint":{"title":"odps相关","description":"odps相关","type":"string","required":false,"example":"http://service.cn-hangzhou.maxcompute.aliyun-inc.com/api"},"accessKey":{"description":"odps数据源ak","type":"string","required":false,"example":"L***p"},"accessSecret":{"description":"odps数据源ak secret","type":"string","required":false,"example":"5**9a6"},"project":{"description":"odps数据源项目名称","type":"string","required":false,"example":"bbt_algo_pai"},"partition":{"description":"ODPS Partition。例如：ds=20180102。","type":"string","required":false,"example":"ds=20230114"},"table":{"title":"saro、odps相关","description":"saro、odps相关","type":"string","required":false,"example":"item"},"namespace":{"title":"saro相关","description":"saro相关","type":"string","required":false,"example":"test-namespace"},"path":{"title":"hdfs相关","description":"hdfs相关","type":"string","required":false,"example":"test-hdfs-path"},"ossPath":{"title":"oss数据源相关","description":"oss数据源相关","type":"string","required":false,"example":"/opensearch/oss.json"},"bucket":{"description":"OSS存储空间。","type":"string","required":false,"example":"test-bucket"}},"required":false},"saroConfig":{"title":"saro数据源配置","description":"saro数据源配置","type":"object","properties":{"namespace":{"description":"saro数据源的namespace","type":"string","required":false,"example":"flink-test-fjx-default"},"tableName":{"description":"saro数据表名称","type":"string","required":false,"example":"device_event_shy_summary_"}},"required":false},"autoBuildIndex":{"title":"是否开启自动全量","description":"是否开启自动全量","type":"boolean","required":false,"example":"true"},"processParallelNum":{"description":"全量process并发数","type":"integer","format":"int32","required":false,"example":"2"}},"required":false},"description":{"description":"描述信息。","type":"string","required":false,"example":"\"测试\""},"content":{"title":"文件内容","description":"文件内容","type":"string","required":false,"example":"{\\\"summarys\\\":{\\\"summary_fields\\\":[\\\"id\\\"]},\\\"indexs\\\":[{\\\"index_name\\\":\\\"index_id\\\",\\\"index_type\\\":\\\"PRIMARYKEY64\\\",\\\"index_fields\\\":\\\"id\\\",\\\"has_primary_key_attribute\\\":true,\\\"is_primary_key_sorted\\\":false}],\\\"attributes\\\":[\\\"id\\\"],\\\"fields\\\":[{\\\"field_name\\\":\\\"id\\\",\\\"field_type\\\":\\\"UINT16\\\"}],\\\"table_name\\\":\\\"index_2\\\"}"},"partition":{"title":"数据分片","description":"数据分片","type":"integer","format":"int32","required":false,"example":"2"},"dataSource":{"title":"数据源","description":"数据源","type":"string","required":false,"example":"ha-cn-pl32rf0****_index_1"},"domain":{"title":"数据源部署","description":"数据源部署","type":"string","required":false,"example":"vpc_hz_domain_1"},"buildParallelNum":{"description":"全量build并发数","type":"integer","format":"int32","required":false,"example":"2"},"mergeParallelNum":{"description":"全量merge并发数","type":"integer","format":"int32","required":false,"example":"2"},"cluster":{"description":"集群信息","type":"object","required":false,"additionalProperties":{"type":"object","additionalProperties":{"type":"object","properties":{"value":{"type":"string","description":"变量","example":"partition"},"description":{"type":"string","description":"描述信息","example":"自定义变量"},"disableModify":{"type":"boolean","example":"true","description":"是否可被用户修改"},"isModify":{"type":"boolean","example":"false","description":"是否被修改过"},"type":{"type":"string","example":"NORMAL","description":"普通变量：NORMAL， function变量：FUNCTION"}},"description":"cluster.json更新内容"},"description":"集群信息"}},"clusterConfigName":{"description":"cluster.json文件名","type":"string","required":false,"example":"ha-cn-pl32rf0****@a-cn-pl32rf0****_test_api@hz_pre_vpc_domain_1@test_api@index_config_v1"},"config":{"description":"离线配置信息","type":"object","required":false,"additionalProperties":{"type":"object","properties":{"desc":{"type":"string","required":false,"example":"测试","description":"备注"},"files":{"type":"array","items":{"type":"object","properties":{"operateType":{"type":"string","required":false,"example":"UPDATE","description":"操作类型：UPDATE:更新；DELETE:删除；默认UPDATE"},"parentFullPath":{"type":"string","required":false,"example":"/","description":"上级目录的路径"},"fileName":{"type":"string","required":false,"description":"文件名称","example":"/intervene_dict/中文-通用分析器.dict"},"config":{"type":"object","properties":{"content":{"type":"string","required":false,"example":"$dictContent","description":"文件内容--词典配置"},"variables":{"type":"object","required":false,"additionalProperties":{"type":"object","properties":{"description":{"type":"string","required":false,"example":"测试","description":"描述"},"disableModify":{"type":"boolean","required":false,"description":"是否可被用户修改","example":"true"},"isModify":{"type":"boolean","required":false,"example":"false","description":"是否被修改过"},"type":{"type":"string","required":false,"example":"NORMAL","description":"普通变量：NORMAL， function变量：FUNCTION"},"value":{"type":"string","required":false,"example":"test","description":"变量"}},"description":"变量信息"},"description":"变量"}},"required":false,"description":"本次更新的配置"},"dirName":{"type":"string","required":false,"description":"目录名称","example":"/test"}},"required":false},"required":false,"description":"修改的文件列表"}},"description":"离线配置"}},"pushMode":{"description":"推送配置方式: 默认仅推送配置","type":"string","required":false,"example":"PUSH_ONLY"}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"requestId":{"title":"id of request","description":"id of request","type":"string","example":"93A9E542-8CF8-5BA6-99AB-94C0FE520429"},"result":{"title":"Object","description":"Object","type":"any","example":"{}"}}}},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"93A9E542-8CF8-5BA6-99AB-94C0FE520429\\\",\\n  \\\"result\\\": \\\"{}\\\"\\n}\",\"type\":\"json\"}]","title":"修改索引"}