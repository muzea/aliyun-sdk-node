{"summary":"创建索引表。","path":"/openapi/ha3/instances/{instanceId}/tables","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"218772","abilityTreeNodes":["FEATUREopensearchGTRUN8"]},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例id。","type":"string","required":true,"example":"ha-cn-pl32rf0****"}},{"name":"dryRun","in":"query","schema":{"description":"是否dryRun创建（仅校验数据源是否合法）。取值：-true 是 -false 否","type":"boolean","required":false,"example":"true","default":"false"}},{"name":"body","in":"body","style":"json","schema":{"description":"body","type":"object","properties":{"name":{"title":"索引名","description":"索引名","type":"string","required":false,"example":"api_index_1"},"dataProcessorCount":{"title":"数据更新资源数","description":"数据更新资源数","type":"integer","format":"int32","required":false,"example":"1"},"partitionCount":{"title":"数据分片数","description":"数据分片数","type":"integer","format":"int32","required":false,"example":"1"},"dataSource":{"title":"数据源配置","description":"数据源配置","type":"object","properties":{"type":{"title":"数据源类型: 仅支持odps、swift、oss三种类型 (odps, swift, saro, oss, unKnow)","description":"数据源类型: 仅支持odps、swift、oss三种类型 (odps, swift, saro, oss, unKnow)","type":"string","required":false,"example":"odps"},"dataTimeSec":{"title":"追增量时间戳","description":"追增量时间戳","type":"integer","format":"int32","required":false,"example":"1715160176"},"autoBuildIndex":{"title":"是否自动索引重建","description":"是否自动索引重建","type":"boolean","required":false,"example":"true"},"config":{"title":"数据源配置","description":"数据源配置","type":"object","properties":{"endpoint":{"title":"odps相关","description":"odps相关","type":"string","required":false,"example":"http://service.cn-hangzhou.maxcompute.aliyun-inc.com/api"},"accessKey":{"description":"odps数据源ak","type":"string","required":false,"example":"L***p"},"accessSecret":{"description":"odps数据源ak secret","type":"string","required":false,"example":"5**9a6"},"project":{"description":"odps数据源项目名称","type":"string","required":false,"example":"test_project"},"partition":{"description":"数据源为odps时必填","type":"string","required":false,"example":"ds=20220713"},"table":{"title":"saro、odps相关","description":"saro、odps相关","type":"string","required":false,"example":"test56"},"ossPath":{"title":"oss数据源相关","description":"oss数据源相关","type":"string","required":false,"example":"/opensearch/test.txt"},"bucket":{"description":"oss bucket","type":"string","required":false,"example":"test-bucket"}},"required":false}},"required":false},"rawSchema":{"title":"如果用户传了rawSchema，则直接使用rawSchema作为ha3 schema结构，不用手动拼装","description":"如果用户传了rawSchema，则直接使用rawSchema作为ha3 schema结构，不用手动拼装","type":"string","required":false,"example":"{}"},"primaryKey":{"title":"主键字段","description":"主键字段","type":"string","required":false,"example":"id"},"fieldSchema":{"title":"key: 字段名","description":"key: 字段名","type":"object","required":false,"additionalProperties":{"type":"string","example":"{\n    \"id\": \"INT64\",\n    \"source_image\": \"STRING\",\n    \"namespace\": \"INT64\",\n    \"source_image_vector\": \"MULTI_FLOAT\"\n}","description":"map结构"}},"vectorIndex":{"title":"索引结构","description":"索引结构","type":"array","items":{"type":"object","properties":{"indexName":{"title":"索引结构名称","description":"索引结构名称","type":"string","required":false,"example":"test_index"},"vectorField":{"title":"向量字段","description":"向量字段","type":"string","required":false,"example":"source_image_vector"},"sparseIndexField":{"title":"稀疏向量下标字段","description":"稀疏向量下标字段","type":"string","required":false,"example":"sparse_indices"},"sparseValueField":{"title":"稀疏向量值字段","description":"稀疏向量值字段","type":"string","required":false,"example":"sparse_values"},"dimension":{"title":"向量维度","description":"向量维度","type":"string","required":false,"example":"128"},"vectorIndexType":{"title":"向量索引算法","description":"向量索引算法","type":"string","required":false,"example":"Qc"},"distanceType":{"title":"距离类型","description":"距离类型","type":"string","required":false,"example":"SquaredEuclidean"},"namespace":{"title":"命名空间字段","description":"命名空间字段","type":"string","required":false,"example":"namespace"},"advanceParams":{"title":"索引结构配置","description":"索引结构配置","type":"object","properties":{"buildIndexParams":{"title":"索引构建参数","description":"索引构建参数","type":"string","required":false,"example":"{}"},"searchIndexParams":{"title":"索引检索参数","description":"索引检索参数","type":"string","required":false,"example":"{}"},"minScanDocCnt":{"title":"召回候选集的个数最小值","description":"召回候选集的个数最小值","type":"string","required":false,"example":"20000"},"linearBuildThreshold":{"title":"线性构建的阈值","description":"线性构建的阈值","type":"string","required":false,"example":"5000"}},"required":false}},"required":false},"required":false},"dataProcessConfig":{"title":"字段处理配置","description":"字段处理配置","type":"array","items":{"description":"字段处理配置详细信息","type":"object","properties":{"operator":{"title":"字段处理方式 (copy: 将源字段拷贝至目标字段, vectorize: 使用模型对源字段进行向量化，向量存储在目标字段中)","description":"字段处理方式 (copy: 将源字段拷贝至目标字段, vectorize: 使用模型对源字段进行向量化，向量存储在目标字段中)","type":"string","required":false,"example":"vectorize"},"dstField":{"title":"目标字段","description":"目标字段","type":"string","required":false,"example":"source_image_vector"},"srcField":{"title":"源字段","description":"源字段","type":"string","required":false,"example":"source_image"},"params":{"title":"配置模型信息","description":"配置模型信息","type":"object","properties":{"vectorModel":{"title":"向量化模型","description":"向量化模型","type":"string","required":false,"example":"clip"},"vectorModal":{"title":"数据类型","description":"数据类型","type":"string","required":false,"example":"image"},"srcFieldConfig":{"title":"向量化信息来源","description":"向量化信息来源","type":"object","properties":{"ossEndpoint":{"description":"OSS区域地址。","type":"string","required":false,"example":"oss-cn-hangzhou-internal.aliyuncs.com"},"ossBucket":{"description":"OSSBucket","type":"string","required":false,"example":"test-bucket"},"uid":{"description":"云账号id","type":"string","required":false,"example":"1062017779051424"}},"required":false}},"required":false}},"required":false},"required":false}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"requestId":{"title":"id of request","description":"id of request","type":"string","example":"2AE63638-5420-56DC-BF59-37D8174039A0"},"result":{"title":"Map","description":"Map","type":"object","example":"{}"}}}},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"2AE63638-5420-56DC-BF59-37D8174039A0\\\",\\n  \\\"result\\\": {}\\n}\",\"type\":\"json\"}]","title":"创建索引表","requestParamsDescription":"### 请求示例\n\n﻿\n\n```java\nPOST /openapi/ha3/instances/{instanceId}/tables\n```\n><notice>示例仅列举最简单的参数, 更多自定义参数请参考请求参数></notice>\n\n```java\n{\n    \"name\": \"api\",\n    \"partitionCount\": 1,\n    \"primaryKey\": \"id\",\n    \"fieldSchema\": {\n        \"id\": \"INT64\",\n        \"source_image\": \"STRING\",\n        \"namespace\": \"STRING\",\n        \"source_image_vector\": \"MULTI_FLOAT\"\n    },\n    \"vectorIndex\": [\n        {\n            \"indexName\": \"test_index_1\",\n            \"vectorField\": \"source_image_vector\",\n            \"vectorIndexType\": \"HNSW\",\n            \"dimension\": \"512\",\n            \"distanceType\": \"InnerProduct\"\n        }\n    ]\n}\n```\n详情可参考[响应结构](~~465311~~)<details>"}