{"summary":"创建索引信息。","path":"/openapi/ha3/instances/{instanceId}/indexes","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"104691","abilityTreeNodes":["FEATUREopensearchVHEWK3"]},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例ID。","type":"string","required":true,"example":"ha-cn-2r42ppr****"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数。","type":"object","properties":{"name":{"title":"名称","description":"索引名称。","type":"string","required":false,"example":"index_1"},"dataSource":{"title":"数据源","description":"数据源名称。","type":"string","required":false,"example":"ha-cn-35t3n1y****_index_1"},"domain":{"title":"数据源的部署","description":"数据源机房。","type":"string","required":false,"example":"vpc_hz_domain_1"},"content":{"title":"文件内容","description":"索引结构。","type":"string","required":false,"example":"{\\\"summarys\\\":{\\\"summary_fields\\\":[\\\"id\\\"]},\\\"indexs\\\":[{\\\"index_name\\\":\\\"index_id\\\",\\\"index_type\\\":\\\"PRIMARYKEY64\\\",\\\"index_fields\\\":\\\"id\\\",\\\"has_primary_key_attribute\\\":true,\\\"is_primary_key_sorted\\\":false}],\\\"attributes\\\":[\\\"id\\\"],\\\"fields\\\":[{\\\"field_name\\\":\\\"id\\\",\\\"field_type\\\":\\\"UINT16\\\"}],\\\"table_name\\\":\\\"index_2\\\"}"},"partition":{"title":"数据分片","description":"数据分片数。","type":"integer","format":"int32","required":false,"example":"2"},"dataSourceInfo":{"description":"数据源相关信息 （向量检索版新版本必填）。","type":"object","properties":{"dataTimeSec":{"description":"追增量时间戳。","type":"integer","format":"int32","required":false,"example":"1709715164"},"processPartitionCount":{"description":"数据更新资源数。","type":"integer","format":"int32","required":false,"example":"4"},"name":{"description":"数据源名称。","type":"string","required":false,"example":"ha-cn-35t3n1y****_index_1"},"type":{"description":"数据源类型。取值：\n\n- odps\n- swift\n- saro\n- oss","type":"string","required":false,"example":"odps"},"domain":{"description":"离线机房。","type":"string","required":false,"example":"vpc_hz_domain_1\n"},"config":{"description":"odps相关。","type":"object","properties":{"endpoint":{"description":"odps数据源的Endpoint, oss数据源的Endpoint。","type":"string","required":false,"example":"https://oss-cn-hangzhou.aliyuncs.com"},"accessKey":{"description":"odps数据源AK。","type":"string","required":false,"example":"L***p"},"accessSecret":{"description":"odps数据源AK Secret。","type":"string","required":false,"example":"5**9a6"},"project":{"description":"odps数据源项目名称。","type":"string","required":false,"example":"bbt_algo_pai"},"partition":{"description":"数据源为odps时必填。","type":"string","required":false,"example":"ds=20230114"},"table":{"description":"表名称。","type":"string","required":false,"example":"bbt_rec_swing_u2i2i_score_be_v1"},"namespace":{"description":"命名空间。","type":"string","required":false,"example":"test-namespace"},"path":{"description":"hdfs数据源路径。","type":"string","required":false,"example":"test-hdfs-path"},"ossPath":{"description":"oss文件路径。","type":"string","required":false,"example":"/opensearch/oss.json"},"bucket":{"description":"oss bucket。","type":"string","required":false,"example":"test-bucket"}},"required":false},"saroConfig":{"description":"saro数据源配置。","type":"object","properties":{"namespace":{"description":"saro数据源的namespace。","type":"string","required":false,"example":"目前仅在内网支持"},"tableName":{"description":"saro数据表名称。","type":"string","required":false,"example":"目前仅在内网支持"}},"required":false},"autoBuildIndex":{"description":"是否开启自动全量。","type":"boolean","required":false,"example":"true"},"processParallelNum":{"description":"全量process并发数","type":"integer","format":"int32","required":false,"example":"2"}},"required":false},"extend":{"description":"字段配置的扩展内容。key: 向量字段(vector)、需embeding字段（embeding）。","type":"object","required":false,"example":"{\n        \"vector\":\n        [\n            \"source_image_vector\"\n        ],\n        \"embeding\":\n        [\n            \"source_image\"\n        ],\n        \"description\":\n        []\n    }"},"buildParallelNum":{"description":"全量build并发数","type":"integer","format":"int32","required":false,"example":"2"},"mergeParallelNum":{"description":"全量merge并发数","type":"integer","format":"int32","required":false,"example":"2"}},"required":false,"example":"{}"}},{"name":"dryRun","in":"query","schema":{"description":"是否dryRun创建（仅校验数据源是否合法）。取值：\n\n- true：是。\n- false：否。","type":"boolean","required":false,"example":"true"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"requestId":{"title":"id of request","description":"请求ID。","type":"string","example":"407BFD91-DE7D-50BA-8F88-CDE52A3B5E46"},"result":{"title":"Map","description":"返回结果。","type":"object","example":"{}"}}}},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"407BFD91-DE7D-50BA-8F88-CDE52A3B5E46\\\",\\n  \\\"result\\\": {}\\n}\",\"type\":\"json\"}]","title":"创建索引信息","description":"### 方法\n\n```java\nPOST\n```\n\n### URI\n\n```java\n/openapi/ha3/instances/{instanceId}/indexes\n```","requestParamsDescription":"### 请求示例\n\n```java\nPOST /openapi/ha3/instances/ose-test1/indexes\n```\n\n\n```java\n{\n    \"name\": \"index_1\",\n    \"dataSource\": \"ha-cn-3********0d_index_1\",\n    \"content\": \"\",\n    \"extend\":\n    {\n        \"vector\":\n        [\n            \"source_image_vector\"\n        ],\n        \"embeding\":\n        [\n            \"source_image\"\n        ],\n        \"description\":\n        []\n    },\n    \"partition\": 1,\n    \"dataSourceInfo\":\n    {\n        \"type\": \"odps\",\n        \"processPartitionCount\": 2,\n        \"autoBuildIndex\": true,\n        \"config\":\n        {\n            \"endpoint\": \"http://service.cn-hangzhou.maxcompute.aliyun.com/api\",\n            \"project\": \"odps_project\",\n            \"accessKey\": \"ak\",\n            \"accessSecret\": \"as\",\n            \"table\": \"odps_table\",\n            \"partition\": \"ds=*******\"\n        },\n        \"saroConfig\":\n        {},\n        \"dataTimeSec\": 1709715164\n    }\n}\n```","responseParamsDescription":"### 返回示例\n\n正确返回\n\n```java\n{\n  \"requestId\": \"0A6EB64B-B4C8-CF02-810F-E660812972FF\",\n  \"result\": {}\n}\n```\n详情可参考[响应结构](~~465311~~)"}