{"summary":"展示部署全局概览。","path":"/openapi/ha3/instances/{instanceId}/deploy-graph","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例ID","type":"string","required":false,"example":"ha-cn-pl32rf0****"}}],"responses":{"200":{"schema":{"description":"Schema of Response","type":"object","properties":{"requestId":{"title":"id of request","description":"Id of the request","type":"string","example":"E7B7D598-B080-5C8E-AA35-D43EC0D5F886"},"result":{"title":"DeployGraph","description":"返回结果。","type":"object","properties":{"graph":{"description":"部署信息","type":"object","properties":{"onlineMaster":{"title":"在线集群元信息","description":"在线集群元信息","type":"array","items":{"type":"object","properties":{"id":{"description":"机房id","type":"integer","format":"int64","example":"1"},"name":{"description":"在线集群名称","type":"string","example":"\t\nha-cn-pl32rf0****_hz_pre_vpc_domain_1"},"domainName":{"description":"机房","type":"string","example":"hz_pre_vpc_domain_1"},"hippoId":{"description":"资源id","type":"string","example":"5377"}}}},"zoneMetas":{"title":"zone元信息","description":"zone元信息列表","type":"array","items":{"description":"zone元信息","type":"object","properties":{"name":{"description":"节点名称","type":"string","example":"ha-cn-pl32rf0****_qrs"},"tag":{"description":"标签","type":"string","example":"\t\nha-cn-pl32rf0****_qrs_hz_pre_vpc_domain_1"},"suezAdminName":{"description":"suez admin名称","type":"string","example":"\t\nha-cn-pl32rf0****_hz_pre_vpc_domain_1"},"type":{"description":"类型","type":"string","example":"qrs"},"domainInfo":{"description":"机房","type":"string","example":"hz_pre_vpc_domain_1"}}}},"tableMetas":{"title":"数据源元信息","description":"数据源元信息","type":"array","items":{"type":"object","properties":{"tableDeployId":{"description":"表部署id","type":"integer","format":"int64","example":"2177"},"name":{"description":"数据源名称","type":"string","example":"ha-cn-pl32rf0****_test_api"},"tag":{"description":"标签","type":"string","example":"ha-cn-pl32rf0****_test_api_hz_pre_vpc_domain_1"},"domainName":{"description":"机房","type":"string","example":"hz_pre_vpc_domain_1"},"buildDeployId":{"description":"离线部署id","type":"integer","format":"int64","example":"1"},"type":{"description":"数据源类型","type":"string","example":"odps"}}}},"indexMetas":{"title":"索引元信息","description":"索引元信息列表","type":"array","items":{"description":"索引元信息","type":"object","properties":{"name":{"description":"索引名称","type":"string","example":"test_api"},"tag":{"description":"标签","type":"string","example":"test_api_hz_pre_vpc_domain_1"},"domainName":{"description":"机房","type":"string","example":"hz_pre_vpc_domain_1"},"tableDeployId":{"description":"表部署id","type":"integer","format":"int64","example":"2409"},"tableName":{"description":"数据源名称","type":"string","example":"ha-cn-pl32rf0****_test_api"},"zoneName":{"description":"节点名称","type":"string","example":"ha-cn-pl32rf0****_qrs"}}}},"zoneIndexRelation":{"title":"zone和索引关联关系","description":"zone和索引关联关系列表","type":"object","additionalProperties":{"type":"array","items":{"type":"string","example":"general_hz_pre_vpc_domain_1","description":"索引关联集群"},"description":"zone和索引关联关系"}},"tableIndexRelation":{"title":"数据源和索引关联关系","description":"数据源和索引关联关系列表","type":"object","additionalProperties":{"type":"array","items":{"type":"string","example":"test_api_hz_pre_vpc_domain_1","description":"索引关联表"},"description":"数据源和索引关联关系"}}}}},"example":"{}"}}}},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"E7B7D598-B080-5C8E-AA35-D43EC0D5F886\\\",\\n  \\\"result\\\": {\\n    \\\"graph\\\": {\\n      \\\"onlineMaster\\\": [\\n        {\\n          \\\"id\\\": 1,\\n          \\\"name\\\": \\\"\\\\t\\\\nha-cn-pl32rf0****_hz_pre_vpc_domain_1\\\",\\n          \\\"domainName\\\": \\\"hz_pre_vpc_domain_1\\\",\\n          \\\"hippoId\\\": \\\"5377\\\"\\n        }\\n      ],\\n      \\\"zoneMetas\\\": [\\n        {\\n          \\\"name\\\": \\\"ha-cn-pl32rf0****_qrs\\\",\\n          \\\"tag\\\": \\\"\\\\t\\\\nha-cn-pl32rf0****_qrs_hz_pre_vpc_domain_1\\\",\\n          \\\"suezAdminName\\\": \\\"\\\\t\\\\nha-cn-pl32rf0****_hz_pre_vpc_domain_1\\\",\\n          \\\"type\\\": \\\"qrs\\\",\\n          \\\"domainInfo\\\": \\\"hz_pre_vpc_domain_1\\\"\\n        }\\n      ],\\n      \\\"tableMetas\\\": [\\n        {\\n          \\\"tableDeployId\\\": 2177,\\n          \\\"name\\\": \\\"ha-cn-pl32rf0****_test_api\\\",\\n          \\\"tag\\\": \\\"ha-cn-pl32rf0****_test_api_hz_pre_vpc_domain_1\\\",\\n          \\\"domainName\\\": \\\"hz_pre_vpc_domain_1\\\",\\n          \\\"buildDeployId\\\": 1,\\n          \\\"type\\\": \\\"odps\\\"\\n        }\\n      ],\\n      \\\"indexMetas\\\": [\\n        {\\n          \\\"name\\\": \\\"test_api\\\",\\n          \\\"tag\\\": \\\"test_api_hz_pre_vpc_domain_1\\\",\\n          \\\"domainName\\\": \\\"hz_pre_vpc_domain_1\\\",\\n          \\\"tableDeployId\\\": 2409,\\n          \\\"tableName\\\": \\\"ha-cn-pl32rf0****_test_api\\\",\\n          \\\"zoneName\\\": \\\"ha-cn-pl32rf0****_qrs\\\"\\n        }\\n      ],\\n      \\\"zoneIndexRelation\\\": {\\n        \\\"key\\\": [\\n          \\\"general_hz_pre_vpc_domain_1\\\"\\n        ]\\n      },\\n      \\\"tableIndexRelation\\\": {\\n        \\\"key\\\": [\\n          \\\"test_api_hz_pre_vpc_domain_1\\\"\\n        ]\\n      }\\n    }\\n  }\\n}\",\"type\":\"json\"}]","title":"展示部署全局概览","description":"## 方法\n\nGET\n\n## URI\n\n```java\n/openapi/ha3/instances/{instanceId}/deploy-graph\n```\n","requestParamsDescription":"\n### 请求示例\n\n```java\n﻿\nGET /openapi/ha3/instances/{instanceId}/deploy-graph\n```","responseParamsDescription":"\n\n### 返回示例\n正确返回\n﻿\n\n```java\n{\n﻿\n  \"requestId\": \"0A6EB64B-B4C8-CF02-810F-E660812972FF\",\n﻿\n  \"result\": {\n﻿\n    \"app\": {\n﻿\n      \"creator\": \"74087\",\n﻿\n      \"gmtModified\": 1628151698000,\n﻿\n      \"groupId\": 596,\n﻿\n      \"platformType\": \"tisplus\",\n﻿\n      \"description\": \"qrs改写插件测试集群，测试同学不要使用\",\n﻿\n      \"gmtCreate\": 1628151698000,\n﻿\n      \"isActive\": 0,\n﻿\n      \"type\": \"online_group\",\n﻿\n      \"appStatus\": 0,\n﻿\n      \"procStatus\": 0,\n﻿\n      \"isDeleted\": 0,\n﻿\n      \"name\": \"search4TestPlugin\",\n﻿\n      \"id\": 5171\n﻿\n    },\n﻿\n    \"hippos\": [],\n﻿\n    \"appGroupName\": \"多biz测试业务线\",\n﻿\n    \"name\": \"search4TestPlugin\",\n﻿\n    \"availableDeploys\": [\n﻿\n      {\n﻿\n        \"gmtModified\": 1594193012000,\n﻿\n        \"virtualDomainList\": \"6,7,8\",\n﻿\n        \"platformType\": \"[\\\"tisplus\\\",\\\"tisplus_khronos\\\",\\\"tisplus_dingtalk\\\"]\",\n﻿\n        \"description\": \"pre_et2机房\",\n﻿\n        \"groups\": \"\",\n﻿\n        \"gmtCreate\": 1565752477000,\n﻿\n        \"type\": \"INNET\",\n﻿\n        \"modules\": \"[\\\"online\\\"]\",\n﻿\n        \"foundationDetailList\": \"15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,94\",\n﻿\n        \"name\": \"pre_et2\",\n﻿\n        \"hippoId\": \"hippo_et2_7u\",\n﻿\n        \"id\": 5\n﻿\n      },\n﻿\n      {\n﻿\n        \"gmtModified\": 1571642223000,\n﻿\n        \"platformType\": \"[\\\"tisplus\\\"]\",\n﻿\n        \"description\": \"预发oc27机房\",\n﻿\n        \"groups\": \"\",\n﻿\n        \"gmtCreate\": 1571642223000,\n﻿\n        \"type\": \"INNET\",\n﻿\n        \"modules\": \"[\\\"online\\\"]\",\n﻿\n        \"foundationDetailList\": \"67,68,69,70,71,72,73,74,75,76,77,78,79\",\n﻿\n        \"name\": \"oc27_pre\",\n﻿\n        \"hippoId\": \"hippo_7u_oc27\",\n﻿\n        \"id\": 15\n﻿\n      }\n﻿\n    ],\n﻿\n    \"graph\": {\n﻿\n      \"zoneMetas\": [\n﻿\n        {\n﻿\n          \"suezAdminName\": \"search4TestPlugin_pre\",\n﻿\n          \"zoneMetaId\": 8509,\n﻿\n          \"domainInfo\": \"pre\",\n﻿\n          \"mainZone\": true,\n﻿\n          \"name\": \"search4TestPlugin_qrs\",\n﻿\n          \"zoneId\": 11379,\n﻿\n          \"tag\": \"search4TestPlugin_qrs_pre\",\n﻿\n          \"clusterId\": 5265,\n﻿\n          \"type\": \"qrs\"\n﻿\n        },\n﻿\n        {\n﻿\n          \"suezAdminName\": \"search4TestPlugin_pre\",\n﻿\n          \"zoneMetaId\": 8510,\n﻿\n          \"domainInfo\": \"pre\",\n﻿\n          \"mainZone\": true,\n﻿\n          \"name\": \"test_searcher\",\n﻿\n          \"zoneId\": 11380,\n﻿\n          \"tag\": \"test_searcher_pre\",\n﻿\n          \"clusterId\": 5265,\n﻿\n          \"type\": \"searcher\"\n﻿\n        }\n﻿\n      ],\n﻿\n      \"tableIndexRelation\": {\n﻿\n        \"product_sku_pre_ea120\": [\n﻿\n          \"product_sku_pre_ea120\"\n﻿\n        ]\n﻿\n      },\n﻿\n      \"onlineMaster\": [\n﻿\n        {\n﻿\n          \"appId\": 5171,\n﻿\n          \"domainId\": 1,\n﻿\n          \"domainName\": \"pre\",\n﻿\n          \"gmtCreate\": 1628561292000,\n﻿\n          \"gmtModified\": 1628562498000,\n﻿\n          \"hippoGroupId\": \"20\",\n﻿\n          \"id\": 5265,\n﻿\n          \"monitorStatus\": 1,\n﻿\n          \"name\": \"search4TestPlugin_pre\",\n﻿\n          \"processorInfoId\": 27789,\n﻿\n          \"zkAddr\": \"\"\n﻿\n        }\n﻿\n      ],\n﻿\n      \"indexMetas\": [\n﻿\n        {\n﻿\n          \"tableDeployId\": 7366,\n﻿\n          \"zoneMetaId\": 8510,\n﻿\n          \"domainName\": \"pre_ea120\",\n﻿\n          \"name\": \"product_sku\",\n﻿\n          \"tableId\": 6866,\n﻿\n          \"tag\": \"product_sku_pre_ea120\",\n﻿\n          \"zoneName\": \"test_searcher\",\n﻿\n          \"tableName\": \"product_sku\"\n﻿\n        }\n﻿\n      ],\n﻿\n      \"offlineMaster\": [\n﻿\n        {\n﻿\n          \"appId\": 5214,\n﻿\n          \"domainId\": 18,\n﻿\n          \"domainName\": \"pre_ea120\",\n﻿\n          \"gmtCreate\": 1628501863000,\n﻿\n          \"gmtModified\": 1628501863000,\n﻿\n          \"id\": 3751,\n﻿\n          \"isPublic\": 2,\n﻿\n          \"monitorStatus\": 1,\n﻿\n          \"name\": \"search4_multi_biz_bs\",\n﻿\n          \"platformType\": \"tisplus\",\n﻿\n          \"processorInfoId\": 27755,\n﻿\n          \"zkAddr\": \"\"\n﻿\n        }\n```\n"}