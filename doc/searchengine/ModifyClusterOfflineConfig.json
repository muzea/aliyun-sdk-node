{"summary":"修改集群的配置信息。","path":"/openapi/ha3/instances/{instanceId}/cluster-offline-config","methods":["put"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"104631","abilityTreeNodes":["FEATUREopensearchA6GC80"]},"parameters":[{"name":"instanceId","in":"path","schema":{"description":"实例ID","type":"string","required":true,"example":"ha-cn-pl32rf0****"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求结构。","type":"object","properties":{"dataSourceName":{"description":"数据源名称","type":"string","required":false,"example":"ha-cn-pl32rf0****_test_api"},"dataSourceType":{"title":"数据源类型 (odps: maxComputer, swift: swift, unKnow)","description":"数据源类型 (odps: maxComputer, swift: swift, unKnow)","type":"string","required":false,"example":"odps"},"domain":{"title":"离线部署","description":"数据源部署","type":"string","required":false,"example":"vpc_hz_domain_1"},"config":{"title":"key:配置名称","description":"key:配置名称","type":"object","required":false,"additionalProperties":{"type":"integer","format":"int32","description":"value:配置版本号","example":"1"}},"partition":{"title":"对于odps数据源触发全量时必传","description":"对于odps数据源触发全量时必传","type":"string","required":false,"example":"ds=20211202"},"dataTimeSec":{"title":"对于api推送数据源触发全量时必传","description":"对于API推送数据源触发全量时必传","type":"integer","format":"int32","required":false,"example":"1640867288"},"buildMode":{"title":"索引重建方式 (api: API方式推送数据源, indexRecover: 从索引中恢复数据源)","description":"索引重建方式 (api: API方式推送数据源, indexRecover: 从索引中恢复数据源)","type":"string","required":false,"example":"indexRecover"},"generation":{"title":"从索引中恢复数据源，dump表的generation","description":"索引全量版本","type":"integer","format":"int64","required":false,"example":"160142641"},"pushMode":{"title":"推送方式：PUSH_ONLY（仅推送配置）、PUSH_GENERATION （指定generation）、TRIGGER_BUILD(推送配置并做全量)","description":"推送配置方式: 默认仅推送配置","type":"string","required":false,"example":"PUSH_ONLY"}},"required":false,"example":"{}"}}],"responses":{"200":{"schema":{"description":"Schema of Response","type":"object","properties":{"requestId":{"title":"id of request","description":"请求id","type":"string","example":"E7B7D598-B080-5C8E-AA35-D43EC0D5F886"},"result":{"title":"Map","description":"结果","type":"object","example":"{}"}}}},"500":{}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"E7B7D598-B080-5C8E-AA35-D43EC0D5F886\\\",\\n  \\\"result\\\": {}\\n}\",\"type\":\"json\"}]","title":"修改集群的配置信息","description":"## 请求语法\n```\nPUT /openapi/ha3/instances/{instanceId}/cluster-offline-config\n```。","requestParamsDescription":"| 名称                    | 是否必须 | 类型    | 描述                                                         |\n| ----------------------- | -------- | ------- | ------------------------------------------------------------ |\n| dataSource              | 是       | String  | 数据源名称                                                   |\n| domain                  | 是       | String  | 数据源部署                                                   |\n| indexes                 | 是       | Object  | 索引结构的描述信息                                           |\n| advancedConfigVersionId | 是       | Integer | 高级配置的版本id                                             |\n| triggerBuild            | 是       | boolean | true 推送配置并触发索引重建false 配置等待下一次索引重建后生效 |\n| buildMode               | 否       | Integer | 重建index方式 api:默认方式 indexRecover:索引中恢复数据源 （目前只有数据源类型为hdfs必填） |\n| generation              | 否       | Long    | 历史回流ID                                                   |\n| partition               | 否       | String  | 索引重建选择的数据源的数据分区，当触发odps索引重建时必传     |\n| dataTimeSec             | 否       | Integer | int类型，秒级时间戳，表示API推送数据源触发重建的数据时间，API推送触发重建时必填项 |\n| dataSourceType          | 否       | Enum    | 当triggerBuild=true时必传（odps或swift）                     |\n\n### 请求示例\n`PUT /openapi/ha3/instances/ha3_instance_name/cluster-offline-config`\n\n```\n{\n    \"dataSource\": \"test1\",\n    \"domain\": \"xx\",\n    \"indexes\": [\n        {\n            \"name\": \"index1\",\n            \"versionId\": 1\n        },\n        {\n            \"name\": \"index2\",\n            \"versionId\": 1\n        }\n    ],\n    \"advancedConfigVersionId\": 2,\n    \"triggerBuild\": true,\n    \"partition\": \"20201010\", //odps触发重建时必填\n    \"dataSourceType\": \"odps\", // odps或swift，必填项，不传报错\n    \"dataTimeSec\": 1640867288 //int类型，秒级时间戳，表示API推送数据源触发重建的数据时间，API推送触发重建时必填项\n  \n}\n```","responseParamsDescription":"### 返回示例\n\n```\n{\n  \"requestId\": \"0A6EB64B-B4C8-CF02-810F-E660812972FF\",\n  \"result\": []\n}\n```\n详情可参考[响应结构](~~465311~~)"}