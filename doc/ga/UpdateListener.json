{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","riskType":"none","chargeType":"free"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"全球加速实例所在的地域ID，仅取值**cn-hangzhou**。","type":"string","required":false,"example":"cn-hangzhou","default":"cn-hangzhou"}},{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000\t"}},{"name":"Name","in":"query","schema":{"description":"监听的名称。\n\n名称长度为1~128个字符，以大小写字母或中文开头，可包含数字、半角句号（.）下划线（_）和短划线（-）。","type":"string","required":false,"example":"Listener"}},{"name":"Description","in":"query","schema":{"description":"监听的描述信息。\n\n描述长度最大为200个字符，不能以`http://`和`https://`开头。","type":"string","required":false,"example":"Listener"}},{"name":"ClientAffinity","in":"query","schema":{"description":"客户端亲和性。\n\n- 不传入值时，不保持客户端亲和性，即不能确保来自同一客户端的连接请求始终定向到同一终端节点。\n\n- 取值为**SOURCE_IP**时，保持客户端亲和性。即客户端访问有状态的应用程序时，可以将来自同一客户端的所有请求都定向到同一终端节点，而不考虑源端口和协议。","type":"string","required":false,"example":"SOURCE_IP"}},{"name":"Protocol","in":"query","schema":{"description":"监听的网络传输协议类型，取值：\n\n- **tcp**：TCP协议。\n\n- **udp**：UDP协议。\n\n- **http**：HTTP协议。\n\n- **https**：HTTPS协议。","type":"string","required":false,"example":"tcp"}},{"name":"ListenerId","in":"query","schema":{"description":"监听实例ID。","type":"string","required":true,"example":"lsr-bp1bpn0kn908w4nbw****"}},{"name":"ProxyProtocol","in":"query","schema":{"description":"是否开启保持客户端源IP功能。\n\n- **true**：开启保持客户端源IP功能。开启后，支持后端服务查看客户端的原始IP地址。\n\n- **false**（默认值）：不开启保持客户端源IP功能。\n\n> 该参数后续将不在监听API中配置，建议在终端节点组的相关API中进行配置。关于**ProxyProtocol**，请参见[CreateEndpointGroup](~~153259~~)和[UpdateEndpointGroup](~~153262~~)。","type":"string","required":false,"example":"false"}},{"name":"PortRanges","in":"query","style":"repeatList","schema":{"description":"用来接收请求并向终端节点进行转发的端口范围。\n\n可配置的监听端口范围为**1**~**65499**。\n\n最多可配置端口数量与监听路由类型和监听协议类型相关，更多信息，请参见[监听端口](~~153216~~)。","type":"array","items":{"description":"用来接收请求并向终端节点进行转发的端口范围。\n\n可配置的监听端口范围为**1**~**65499**。\n\n最多可配置端口数量与监听路由类型和监听协议类型相关，更多信息，请参见[监听端口](~~153216~~)。","type":"object","properties":{"FromPort":{"description":"用来接收请求并向终端节点进行转发的起始监听端口。\n\n可配置的监听端口范围为**1**~**65499**，且需满足**FromPort**≤**ToPort**。\n\n最多可配置端口数量与监听路由类型和监听协议类型相关，更多信息，请参见[监听端口](~~153216~~)。\n>对于HTTP或HTTPS协议的监听，只支持配置一个监听端口，即起始监听端口和结束监听端口需相同。","type":"integer","format":"int32","required":true,"example":"20"},"ToPort":{"description":"用来接收请求并向终端节点进行转发的结束监听端口。\n\n可配置的监听端口范围为**1**~**65499**，且需满足**FromPort**≤**ToPort**。\n\n最多可配置端口数量与监听路由类型和监听协议类型相关，更多信息，请参见[监听端口](~~153216~~)。\n>对于HTTP或HTTPS协议的监听，只支持配置一个监听端口，即起始监听端口和结束监听端口需相同。","type":"integer","format":"int32","required":true,"example":"21"}},"required":false},"required":false,"maxItems":100}},{"name":"Certificates","in":"query","style":"repeatList","schema":{"description":"SSL证书。","type":"array","items":{"description":"SSL证书。","type":"object","properties":{"Id":{"description":"SSL证书ID。\n\n>仅HTTPS协议的监听需要配置该项。","type":"string","required":false,"example":"449****-cn-hangzhou"}},"required":false},"required":false,"maxItems":10}},{"name":"BackendPorts","in":"query","style":"repeatList","schema":{"description":"后端服务器接收请求的端口范围。","type":"array","items":{"description":"后端服务器接收请求的端口范围。","type":"object","properties":{"FromPort":{"description":"后端服务器接收请求的起始端口。\n\n>当您的监听协议为HTTP或HTTPS，且监听的端口和后端服务器提供服务的端口不一致时才需填写该项。其中，后端服务器接收请求的起始端口和结束端口需相同。","type":"integer","format":"int32","required":false,"example":"80"},"ToPort":{"description":"后端服务器接收请求的结束端口。\n\n>当您的监听协议为HTTP或HTTPS，且监听的端口和后端服务器提供服务的端口不一致时才需填写该项。其中，后端服务器接收请求的起始端口和结束端口需相同。","type":"integer","format":"int32","required":false,"example":"80"}},"required":false},"required":false,"maxItems":20}},{"name":"XForwardedForConfig","in":"query","style":"flat","schema":{"description":"`XForward`字段配置信息。","type":"object","properties":{"XForwardedForGaIdEnabled":{"description":"是否通过`GA-ID`头字段获取全球加速实例ID。取值：\n\n- **true**：是。\n\n- **false**（默认值）：否。\n\n> 仅HTTP和HTTPS监听支持此参数。","type":"boolean","required":false,"example":"false"},"XForwardedForProtoEnabled":{"description":"是否通过`GA-X-Forward-Proto`字段获取全球加速实例的监听协议。取值：\n\n- **true**：是。\n\n- **false**（默认值）：否。\n\n> 仅HTTP和HTTPS监听支持此参数。","type":"boolean","required":false,"example":"false"},"XForwardedForPortEnabled":{"description":"是否通过`GA-X-Forward-Port`字段获取全球加速实例的监听端口。取值：\n\n- **true**：是。\n\n- **false**（默认值）：否。\n\n> 仅HTTP和HTTPS监听支持此参数。","type":"boolean","required":false,"example":"false"},"XRealIpEnabled":{"description":"是否通过`X-Real-IP`字段获取真实的客户端IP。取值：\n\n- **true**：是。\n\n- **false**（默认值）：否。\n\n> 仅HTTP和HTTPS监听支持此参数。","type":"boolean","required":false,"example":"false"},"XForwardedForGaApEnabled":{"description":"是否通过`GA-AP`字段获取加速地域信息。取值：\n\n- **true**：是。\n\n- **false**（默认值）：否。\n\n> 仅HTTP和HTTPS监听支持此参数。","type":"boolean","required":false,"example":"false"}},"required":false}},{"name":"SecurityPolicyId","in":"query","schema":{"description":"安全策略实例ID。取值：\n\n- **tls_cipher_policy_1_0**\n\n    - 支持的TLS版本：TLSv1.0、TLSv1.1和TLSv1.2。\n\n    - 支持的加密算法套件：ECDHE-RSA-AES128-GCM-SHA256、ECDHE-RSA-AES256-GCM-SHA384、ECDHE-RSA-AES128-SHA256、ECDHE-RSA-AES256-SHA384、AES128-GCM-SHA256、AES256-GCM-SHA384、AES128-SHA256、AES256-SHA256、ECDHE-RSA-AES128-SHA、ECDHE-RSA-AES256-SHA、AES128-SHA、AES256-SHA和DES-CBC3-SHA。\n\n- **tls_cipher_policy_1_1**\n\n    - 支持的TLS版本： TLSv1.1和TLSv1.2。\n\n    - 支持的加密算法套件：ECDHE-RSA-AES128-GCM-SHA256、ECDHE-RSA-AES256-GCM-SHA384、ECDHE-RSA-AES128-SHA256、ECDHE-RSA-AES256-SHA384、AES128-GCM-SHA256、AES256-GCM-SHA384、AES128-SHA256、AES256-SHA256、ECDHE-RSA-AES128-SHA、ECDHE-RSA-AES256-SHA、AES128-SHA、AES256-SHA和DES-CBC3-SHA。\n\n- **tls_cipher_policy_1_2**\n\n    - 支持的TLS版本：TLSv1.2。\n\n    - 支持的加密算法套件：ECDHE-RSA-AES128-GCM-SHA256、ECDHE-RSA-AES256-GCM-SHA384、ECDHE-RSA-AES128-SHA256、ECDHE-RSA-AES256-SHA384、AES128-GCM-SHA256、AES256-GCM-SHA384、AES128-SHA256、AES256-SHA256、ECDHE-RSA-AES128-SHA、ECDHE-RSA-AES256-SHA、AES128-SHA、AES256-SHA和DES-CBC3-SHA。\n\n- **tls_cipher_policy_1_2_strict**\n\n    - 支持的TLS版本：TLSv1.2。\n\n    - 支持的加密算法套件：ECDHE-RSA-AES128-GCM-SHA256、ECDHE-RSA-AES256-GCM-SHA384、ECDHE-RSA-AES128-SHA256、ECDHE-RSA-AES256-SHA384、ECDHE-RSA-AES128-SHA和ECDHE-RSA-AES256-SHA。\n\n- **tls_cipher_policy_1_2_strict_with_1_3**\n\n    - 支持的TLS版本：TLSv1.2及TLSv1.3。\n\n    - 支持的加密算法套件：TLS_AES_128_GCM_SHA256、TLS_AES_256_GCM_SHA384、TLS_CHACHA20_POLY1305_SHA256、TLS_AES_128_CCM_SHA256、TLS_AES_128_CCM_8_SHA256、ECDHE-ECDSA-AES128-GCM-SHA256、ECDHE-ECDSA-AES256-GCM-SHA384、ECDHE-ECDSA-AES128-SHA256、ECDHE-ECDSA-AES256-SHA384、ECDHE-RSA-AES128-GCM-SHA256、ECDHE-RSA-AES256-GCM-SHA384、ECDHE-RSA-AES128-SHA256、ECDHE-RSA-AES256-SHA384、ECDHE-ECDSA-AES128-SHA、ECDHE-ECDSA-AES256-SHA、ECDHE-RSA-AES128-SHA、ECDHE-RSA-AES256-SHA。\n\n> 仅HTTPS监听支持此参数。","type":"string","required":false,"example":"tls_cipher_policy_1_0"}},{"name":"IdleTimeout","in":"query","schema":{"description":"连接空闲超时时间。单位：秒。\n\n- TCP：10-900s，默认900s\n- UDP：10-20s ，默认20s \n- HTTP/HTTPS：1-60秒，默认15s ","type":"integer","format":"int32","required":false,"example":"900"}},{"name":"RequestTimeout","in":"query","schema":{"description":"HTTP/HTTPS的连接请求超时时间。单位：秒。\n\n可选：1-180s，默认60s。\n\n>仅对Protocol（网络传输协议类型）为HTTP或HTTPS的监听有效。如果在超时时间内后端服务器一直没有响应，全球加速将放弃等待，并给客户端返回HTTP 504错误码。","type":"integer","format":"int32","required":false,"example":"60"}},{"name":"HttpVersion","in":"query","schema":{"description":"HTTP协议的最大版本，取值：\n- **http3**：HTTP/3。\n- **http2**：HTTP/2。\n- **http1.1**：HTTP/1.1。\n> 仅HTTPS监听支持此参数。","type":"string","required":false,"example":"http2"}}],"responses":{"200":{"schema":{"description":"返回信息列表。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"6FEA0CF3-D3B9-43E5-A304-D217037876A8\t"}}}}},"errorCodes":{"400":[{"errorCode":"NotActive.Listener","errorMessage":"The state of the listener is not active."},{"errorCode":"PortRangeIllegal.Listener","errorMessage":"The specified listener port range is invalid."},{"errorCode":"PortConflict.Listener","errorMessage":"The listener port configuration is in conflict."},{"errorCode":"QuotaExceeded.ListenerPort","errorMessage":"The maximum number of listener ports is exceeded."},{"errorCode":"NotExist.Accelerator","errorMessage":"The accelerated instance does not exist."},{"errorCode":"StateError.Accelerator","errorMessage":"The state of the accelerated instance is invalid."},{"errorCode":"Exist.PortOverride","errorMessage":"Port override exists."},{"errorCode":"RegionNotSupportHugePort.Listener","errorMessage":"The current ipSet or listener region does not support hugePort."},{"errorCode":"PortRanges.MustOne","errorMessage":"The portRanges must be one for HTTPS and HTTP type listener."},{"errorCode":"SecurityPolicyIdIllegal.Listener","errorMessage":"The listener security policy ID %s is illegal."},{"errorCode":"SecurityPolicyId.NotNeed","errorMessage":"No security policy ID is required for the listener."}],"403":[{"errorCode":"Forbbiden.SubUser","errorMessage":"You are not authorized to operate on the specified resource because your account was created by another user."},{"errorCode":"Forbidden","errorMessage":"The user is not authorized to operate on the specified resource."}],"500":[{"errorCode":"UnknownError","errorMessage":"An error occurred while processing your request. Please try again. If the error persists, please submit a ticket."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"6FEA0CF3-D3B9-43E5-A304-D217037876A8\\\\t\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateListenerResponse>\\n    <RequestId>6FEA0CF3-D3B9-43E5-A304-D217037876A8\\t</RequestId>\\n</UpdateListenerResponse>\",\"errorExample\":\"\"}]","title":"修改监听","summary":"调用UpdateListener接口修改全球加速实例下指定监听的配置。","description":"本接口用于修改指定监听的协议、端口等信息，使监听配置满足您的业务需求。\n\n在调用本接口时，请注意以下事项：\n\n- **UpdateListener**接口属于异步接口，即系统会先返回一个请求ID，但监听配置并未修改完成，系统后台的修改任务仍在进行。您可以调用[DescribeListener](~~153254~~)查询监听的状态：\n    - 当监听处于**updating**状态时，表示监听配置正在修改中，在该状态下，您只能执行查询操作，不能执行其他操作。\n    - 当监听处于**active**状态时，表示监听配置修改完成。\n- **UpdateListener**接口不支持在同一个全球加速实例内并发修改监听配置。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}