{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","riskType":"none","chargeType":"free"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"全球加速实例所属的地域ID，仅取值：**cn-hangzhou**。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**可能不一样。","type":"string","required":false,"example":"02fb3da4****"}},{"name":"AcceleratorId","in":"query","schema":{"description":"全球加速实例ID。","type":"string","required":true,"example":"ga-bp17frjjh0udz4q****"}},{"name":"ListenerId","in":"query","schema":{"description":"监听ID。","type":"string","required":true,"example":"lsr-bp1s0vzbi5bxlx5****"}},{"name":"ForwardingRules","in":"query","style":"flat","schema":{"description":"转发策略配置信息列表。\n","type":"array","items":{"description":"转发策略配置信息列表。","type":"object","properties":{"Priority":{"description":"转发策略优先级。取值范围：**1**~**10000**。值越小表示优先级越高。\n","type":"integer","format":"int32","required":true,"example":"1000"},"RuleConditions":{"description":"转发条件列表。","type":"array","items":{"description":"转发条件列表。","type":"object","properties":{"RuleConditionType":{"description":"转发条件类型。取值：\n- **Host**：域名。\n- **Path**：路径。\n- **RequestHeader**：HTTP标头。\n- **Query**：查询字符串。\n- **Method**：HTTP请求方法。\n- **Cookie**：Cookie。\n- **SourceIP**：源IP。","type":"string","required":true,"example":"Host"},"RuleConditionValue":{"description":"转发条件类型对应的值。\n根据**RuleConditionType**传入不同的JSON字符串值。\n\n- 当**RuleConditionType**取值为**Host**时，该参数为域名条件配置信息。一个转发策略内只允许创建一个域名类型转发规则，该转发规则内支持配置多个域名，多个域名间为“或”关系。域名长度为3~128个字符，允许包含字母、数字、短划线（-）和半角句号（.），支持使用星号（*）和半角问号（?）作为通配符。取值样例为`[\"www.example.com\", \"www.aliyun.com\"]`。\n\n- 当**RuleConditionType**取值为**Path**时，该参数为路径条件配置信息。一个转发策略内允许创建多个路径类型转发规则，多个路径类型转发规则间为”或“关系，一个转发路径类型规则内支持配置多个路径，多个路径间为“或”关系。路径长度为1~128个字符，必须以正斜线（/）开头，只允许包含字母、数字、美元符号（$）、短划线（-）、下划线（_）、半角句号（.）、加号（+）、正斜线（/）、and（&）、波浪线（~）、at（@）、半角冒号（:）、撇号（'），支持使用星号（*）和半角问号（?）作为通配符。取值样例为`[\"/a\", \"/b/\"]`。\n\n- 当**RuleConditionType**取值为**RequestHeader**时，该参数为HTTP标头字段条件配置信息，由键（Key）和值（Value）组成。同一个转发规则条件内标头字段值不能重复。取值样例为`[{\"header1\":[\"value1\",\"value2\"]}]`。\n\n    - Key：HTTP标头的键值长度为1~40个字符，支持字母、数字、短划线（-）和下划线（_）。\n\n    - Value：HTTP标头的值长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，开头和结尾不能为空格。\n\n- 当**RuleConditionType**取值为**Query**时，该参数为查询字符串条件配置信息，由键（Key）和值（Value）组成。取值样例为`[{\"query1\":[\"value1\"]}, {\"query2\":[\"value2\"]}]`。\n    - Key：HTTP标头的键值长度为1~100个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和`[]{}<>\\;/?:@&=+,$%|\"^~`。\n\n    - Value：HTTP标头的值长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和`[]{}<>\\;/?:@&=+,$%|\"^~`。\n- 当**RuleConditionType**取值为**Method**时，该参数为请求方法配置信息。取值范围为**HEAD**、**GET**、**POST**、**OPTIONS**、**PUT**、**PATCH**、**DELETE**。取值样例为`[\"GET\", \"OPTIONS\", \"POST\"]`。\n\n- 当**RuleConditionType**取值为**Cookie**时，该参数为Cookie配置信息，由键（Key）和值（Value）组成。取值样例为`[{\"cookie1\":[\"value1\"]}, {\"cookie2\":[\"value2\"]}]`\n    - Key：Cookie的键值长度为1~100个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和`#[]{}\\|<>&`。\n\n    - Value：Cookie的值长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和`#[]{}\\|<>&`。\n\n- 当**RuleConditionType**取值为**SourceIP**时，该参数为源IP配置信息，支持IP地址，例如1.1.XX.XX/32，或IP地址段，例如2.2.XX.XX/24。一个转发规则只允许创建一个源IP规则，该转发规则内支持配置多个源IP，多个IP之间为“或”关系。取值样例为`[\"1.1.XX.XX/32\", \"2.2.XX.XX/24\"]`。","type":"string","required":false,"example":"[\"www.example.com\", \"www.aliyun.com\"]"},"PathConfig":{"description":"路径配置信息。\n> 不推荐使用该参数，建议直接使用**RuleConditionType**和**RuleConditionValue**配置转发条件。","type":"object","properties":{"Values":{"description":"路径配置信息。\n> 不推荐使用该参数，建议直接使用**RuleConditionType**和**RuleConditionValue**配置转发条件。","type":"array","items":{"description":"路径配置。\n\n路径长度为1~128个字符，必须以正斜线（/）开头，只允许包含字母、数字、美元符号（$）、短划线（-）、下划线（_）、半角句号（.）、加号（+）、正斜线（/）、and（&）、波浪线（~）、at（@）、半角冒号（:）、半角单引号（'），支持使用星号（*）和半角问号（?）作为通配符。\n> 不推荐使用该参数，建议直接使用**RuleConditionType**和**RuleConditionValue**配置转发条件。","type":"string","required":false,"example":"/test"},"required":false}},"required":false},"HostConfig":{"description":"域名配置信息。\n> 不推荐使用该参数，建议直接使用**RuleConditionType**和**RuleConditionValue**配置转发条件。","type":"object","properties":{"Values":{"description":"域名配置信息。\n> 不推荐使用该参数，建议直接使用**RuleConditionType**和**RuleConditionValue**配置转发条件。","type":"array","items":{"description":"域名配置。\n\n域名长度为3~128个字符，允许包含字母、数字、短划线（-）和半角句号（.），支持使用星号（*）和半角问号（?）作为通配符。","type":"string","required":false,"example":"example.com"},"required":false}},"required":false}},"required":false},"required":true,"maxItems":100,"minItems":1},"RuleActions":{"description":"转发动作。","type":"array","items":{"description":"转发动作。","type":"object","properties":{"Order":{"description":"转发优先级。\n\n> 当前无实际意义，无需配置。","type":"integer","format":"int32","required":true,"example":"20"},"RuleActionType":{"description":"转发动作类型。取值：\n\n- **ForwardGroup**：转发。\n- **Redirect**：重定向。\n- **FixResponse**：返回固定响应。\n- **Rewrite**：重写。\n- **AddHeader**：写入头字段。\n- **RemoveHeader**：删除头字段。","type":"string","required":true,"example":"ForwardGroup","default":"ForwardGroup","enum":["ForwardGroup","Redirect","FixResponse","AddHeader","RemoveHeader","Rewrite","Drop"]},"RuleActionValue":{"description":"转发动作类型对应的值。\n\n根据**RuleActionType**传入不同的JSON字符串值。\n\n一个转发规则最多只能有一条**ForwardGroup**、**Redirect**、**FixResponse**类型的转发动作。**Rewrite**、**AddHeader**、**RemoveHeader**类型的转发动作顺序必须在**ForwardGroup**类型的转发动作之前。\n\n- 当**RuleActionType**取值为**ForwardGroup**时，该参数为虚拟终端节点组信息。仅支持转发至一个虚拟终端节点组。取值样例为`{\"type\":\"endpointgroup\", \"value\":\"epg-bp1enpdcrqhl78g6r****\"}`，其中：\n\n    - `type`：取值为`endpointgroup`。\n\n    - `value`：目标虚拟终端节点组ID。\n\n- 当**RuleActionType**取值为**Redirect**时，该参数为重定向配置信息。**Redirect**类型的转发动作中`protocol`、`domain`、`port`、`path`、`query`不能全部为空或者默认值。取值样例为`{\"protocol\":\"HTTP\", \"domain\":\"www.example.com\", \"port\":\"80\", \"path\":\"/a\",\"query\":\"value1\", \"code\":\"301\" }`，其中：\n\n    - `protocol`：要跳转的协议。取值范围为`${protocol}`（默认值）、`HTTP`、`HTTPS`。\n\n    - `domain`：要跳转的域名。默认值为`${host}`（默认值），您还可以输入其他域名信息，域名长度为3~128个字符，只允许包含小写字母、数字和特殊字符`.-?=~_-+/^*!$&|()[]`。\n\n    - `port`：要跳转的端口。默认值为`${port}`，您还可以输入端口号，端口取值范围为1~63335。\n\n    - `path`：要跳转的路径。默认值为`${path}`，路径长度限制为1~128个字符。正则表达式类型的路径，必须以波浪线（~）开头，支持的大小写字母、数字和特殊字符`.-_/=?~^*$:()[]+|`；非正则表达式类型的路径，必须以正斜线（/） 开头，支持大小写字母、数字和特殊字符`.-_/=?:`。\n\n    - `query`：要跳转的查询字符串。默认值为`${query}`，您还可以输入其他查询字符串信息，查询字符串长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和特殊字符`[]{}<>\\#|&`。\n\n    - `code`：跳转方式。支持`301`、`302`、`303`、`307`或`308`。\n\n- 当**RuleActionType**取值为**FixResponse**时，该参数为返回固定响应配置信息。取值样例为`{\"code\":\"200\", \"type\":\"text/plain\", \"content\":\"dssacav\" }`，其中：\n    - `code`：响应状态码。仅支持`2xx`、`4xx`、`5xx`数字型字符串，`x`为任意数字。\n\n    - `type`：响应正文类型。仅支持**text/plain**, **text/css**, **text/html**, **application/javascript**, **application/json**。\n\n    - `content`：响应正文。响应正文长度不能超过1000个字符，不支持中文字符。\n\n- 当**RuleActionType**取值为**AddHeader**时，该参数为插入HTTP标头字段配置信息。转发规则中存在**AddHeader**类型的转发动作，必须同时配置一条**ForwardGroup**类型的转发动作。取值样例为`[{\"name\":\"header1\",\"type\":\"userdefined\", \"value\":\"value\"}]`，其中：\n\n    - `name`：HTTP标头字段名称。名称长度为1~40字符，支持大小写字母、数字、短划线（-）和下划线（_）。**AddHeader**中的HTTP标头字段名称不能重复，也不能和**RemoveHeader**中的HTTP标头字段名称重复。\n\n    - `type`：HTTP标头字段内容类型。取值范围为`user-defined`（用户指定）、`ref`（引用）、`system-defined`（系统定义）。\n\n    - `value`：HTTP标头字段内容，内容不能为空。`type`为`user-defined`（用户指定）时，长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内的可打印字符，支持大小写字母、数字、短划线（-）和下划线（_），开头和结尾不能为空格；`type`为`ref`（引用）时，长度为1~128个字符，支持大小写字母、数字、短划线（-）和下划线（_），开头和结尾不能为空格；`type`为`system-defined`（系统定义）时，仅支持取值为`ClientSrcIp`。\n\n- 当**RuleActionType**取值为**RemoveHeader**时，该参数为删除HTTP标头字段信息。转发规则中存在**RemoveHeader**类型的转发动作，必须同时配置一条**ForwardGroup**类型的转发动作。长度为1~40字符，支持大小写字母、数字、短划线（-）和下划线（_）。取值样例为`[\"header1\"]`。\n\n- 当**RuleActionType**取值为**Rewrite**时，该参数为重写配置信息。转发规则中存在**Rewrite**类型的转发动作，必须同时配置一条**ForwardGroup**类型的转发动作。取值样例为`{\"domain\":\"value1\", \"path\":\"value2\", \"query\":\"value3\"}`，其中：\n\n    - `domain`：要跳转的域名。默认值为`${host}`，您还可以输入其他域名信息，域名长度为3~128个字符，只允许包含小写字母、数字和特殊字符`.-?=~_-+/^*!$&|()[]`。\n\n    - `path`：要跳转的路径。默认值为`${path}`，路径长度限制为1~128个字符。正则表达式类型的路径，必须以波浪线（~）开头，支持的大小写字母、数字和特殊字符`.-_/=?~^*$:()[]+|`；非正则表达式类型的路径，必须以正斜线（/） 开头，支持大小写字母、数字和特殊字符`.-_/=?:`。\n\n    - `query`：要跳转的查询字符串。默认值为`${query}`，您还可以输入其他查询字符串信息，查询字符串长度为1~128个字符，支持ASCII码值`ch >= 32 && ch < 127`范围内可打印字符，如果是字母必须为小写字母，不支持空格和特殊字符`[]{}<>\\#|&`。","type":"string","required":false,"example":"[{\"type\":\"endpointgroup\", \"value\":\"epg-bp1enpdcrqhl78g6r****\"}]"},"ForwardGroupConfig":{"description":"转发配置。\n> 不推荐使用该参数，建议直接使用**RuleActionType**和**RuleActionValue**配置转发动作。","type":"object","properties":{"ServerGroupTuples":{"description":"终端节点组配置。\n> 不推荐使用该参数，建议直接使用**RuleActionType**和**RuleActionValue**配置转发动作。","type":"array","items":{"description":"终端节点组配置。\n> 不推荐使用该参数，建议直接使用**RuleActionType**和**RuleActionValue**配置转发动作。","type":"object","properties":{"EndpointGroupId":{"description":"终端节点组ID。\n> 不推荐使用该参数，建议直接使用**RuleActionType**和**RuleActionValue**配置转发动作。","type":"string","required":true,"example":"epg-bp1ieei9664r5nv****"}},"required":true},"required":true}},"required":false}},"required":true},"required":true,"maxItems":100,"minItems":1},"ForwardingRuleId":{"description":"转发策略ID。","type":"string","required":true,"example":"frule-bp1dii16gu9qdvb34****"},"ForwardingRuleName":{"description":"转发策略名称。\n\n名称长度为2~128个英文或中文字符，必须以大小写字母或中文开头，可包含数字、半角句号（.）、下划线（_）和短划线（-）。\n","type":"string","required":false,"example":"test"},"RuleDirection":{"description":"规则生效方向。无需配置。\n\n目前默认为**request**，表示请求方向生效。","type":"string","required":false,"example":"request"}},"required":false},"required":true,"example":"test","maxItems":100,"minItems":1}}],"responses":{"200":{"schema":{"description":"返回信息列表。","type":"object","properties":{"ForwardingRules":{"description":"转发策略信息。","type":"array","items":{"description":"转发策略信息。","type":"object","properties":{"ForwardingRuleId":{"description":"转发策略ID。","type":"string","example":"frule-bp1dii16gu9qdvb34****"}}}},"RequestId":{"description":"请求ID。","type":"string","example":"64ADAB1E-0B7F-4FD8-A404-3BECC0E9CCFF"}}}}},"errorCodes":{"400":[{"errorCode":"NotExist.Listener","errorMessage":"The listener does not exist."},{"errorCode":"NotActive.Listener","errorMessage":"The state of the listener is not active."},{"errorCode":"NotExist.Accelerator","errorMessage":"The accelerated instance does not exist."},{"errorCode":"StateError.Accelerator","errorMessage":"The state of the accelerated instance is invalid."},{"errorCode":"NotExist.BusinessRegion","errorMessage":"The business region does not exist."},{"errorCode":"NotExist.BasicBandwidthPackage","errorMessage":"You must specify the basic bandwidth package."},{"errorCode":"QuotaExceeded.EndPoint","errorMessage":"The maximum number of endpoints is exceeded."},{"errorCode":"Exist.EndpointGroup","errorMessage":"The endpoint group already exists."},{"errorCode":"NoPermission.VpcEndpoint","errorMessage":"You are not authorized to perform the operation."},{"errorCode":"QuotaExceeded.ForwardingRule","errorMessage":"he number of forwarding rule exceeds the limit."},{"errorCode":"QuotaExceeded.RuleConditionConfig","errorMessage":"The number of path and host exceeds the limit."},{"errorCode":"RepeatPathAndHost.ForwardingRule","errorMessage":"path and host %s repeat"},{"errorCode":"NotExist.ForwardingRule","errorMessage":"forwarding rule %s is not exist"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"ForwardingRules\\\": [\\n    {\\n      \\\"ForwardingRuleId\\\": \\\"frule-bp1dii16gu9qdvb34****\\\"\\n    }\\n  ],\\n  \\\"RequestId\\\": \\\"64ADAB1E-0B7F-4FD8-A404-3BECC0E9CCFF\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateForwardingRulesResponse>\\n    <ForwardingRules>\\n        <ForwardingRuleId>frule-bp1dii16gu9qdvb34****</ForwardingRuleId>\\n    </ForwardingRules>\\n    <RequestId>64ADAB1E-0B7F-4FD8-A404-3BECC0E9CCFF</RequestId>\\n</UpdateForwardingRulesResponse>\",\"errorExample\":\"\"}]","title":"更新转发规则","summary":"调用UpdateForwardingRules接口更新转发策略。","description":"- **UpdateForwardingRules**接口属于异步接口，即系统会先返回一个请求ID，但转发策略并未修改完成，系统后台的修改任务仍在进行。您可以调用[ListForwardingRules](~~205817~~)查询转发策略的状态：\n    - 当转发策略处于**configuring**状态时，表示转发策略正在修改中，在该状态下，您只能执行查询操作，不能执行其他操作。\n    - 当转发策略处于**active**状态时，表示转发策略修改完成。\n- **UpdateForwardingRules**接口不支持在同一个全球加速实例内并发修改转发策略。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}