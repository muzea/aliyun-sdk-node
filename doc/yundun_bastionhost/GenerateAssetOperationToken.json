{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"指定要申请运维令牌操作所在堡垒机的实例ID。\n> 您可以调用[DescribeInstances](~~153281~~)接口获取该参数。","type":"string","required":true,"example":"bastionhost-cn-st220aw****"}},{"name":"RegionId","in":"query","schema":{"description":"堡垒机的地域ID。\n> 地域ID和地域名称的对应关系，请参见[地域和可用区](~~40654~~)。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"AssetType","in":"query","schema":{"description":"指定要申请令牌的资产类型。取值：\n- **Host**：主机。\n- **Database**：数据库。","type":"string","required":true,"example":"Host"}},{"name":"AssetId","in":"query","schema":{"description":"需要申请运维令牌的资产ID。","type":"string","required":true,"example":"11"}},{"name":"AssetAccountId","in":"query","schema":{"description":"申请运维令牌的资产账户ID。\n> AssetAccountId和AssetAccountName需要至少指定一个，当同时指定时，优先使用AssetAccountId","type":"string","required":false,"example":"2"}},{"name":"AssetAccountName","in":"query","schema":{"description":"主机账号名，当为自定义账号时，填写真实账户名。\n\n> 当AssetAccountId和AssetAccountName同时指定时，优先使用AssetAccountId","type":"string","required":false,"example":"root"}},{"name":"AssetAccountPassword","in":"query","schema":{"description":"base64后的密码。当为自定义账号申请运维令牌时必填,","type":"string","required":false,"example":"dGVzdHBhc3N3b3Jk"}},{"name":"AssetAccountProtocolName","in":"query","schema":{"description":"协议名称。取值：\n\n- SSH\n- RDP\n- Oracle\n- PostgreSQL\n- MySQL\n- SQLServer","type":"string","required":false,"example":"SSH"}}],"responses":{"200":{"schema":{"type":"object","properties":{"AssetOperationToken":{"description":"响应数据。","type":"object","properties":{"CountLeft":{"description":"运维令牌剩余可使用的次数。","type":"integer","format":"int64","example":"1"},"ExpireTime":{"description":"运维令牌过期时间。时间戳格式。","type":"integer","format":"int64","example":"1709110797"},"HasCountLimit":{"description":"是否有使用次数限制.","type":"boolean","example":"true"},"MaxRenewCount":{"description":"最大续期次数，0表示不可续期。","type":"integer","format":"int64","example":"10"},"RenewCount":{"description":"已经续期的次数。","type":"integer","format":"int64","example":"1"},"Token":{"description":"申请的运维令牌。","type":"string","example":"NmYyMmEzNmMwYzljNGY******"},"TokenId":{"description":"运维令牌ID。","type":"string","example":"1"}}},"RequestId":{"description":"阿里云为该请求生成的唯一标识符。","type":"string","example":"EC9BF0F4-8983-491A-BC8C-1B4DD94976DE"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter","errorMessage":"The argument is invalid."}],"500":[{"errorCode":"InternalError","errorMessage":"An unknown error occurred."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"AssetOperationToken\\\": {\\n    \\\"CountLeft\\\": 1,\\n    \\\"ExpireTime\\\": 1709110797,\\n    \\\"HasCountLimit\\\": true,\\n    \\\"MaxRenewCount\\\": 10,\\n    \\\"RenewCount\\\": 1,\\n    \\\"Token\\\": \\\"NmYyMmEzNmMwYzljNGY******\\\",\\n    \\\"TokenId\\\": \\\"1\\\"\\n  },\\n  \\\"RequestId\\\": \\\"EC9BF0F4-8983-491A-BC8C-1B4DD94976DE\\\"\\n}\",\"type\":\"json\"}]","title":"申请运维令牌","summary":"您可以通过该接口申请主机或数据库运维令牌，并通过运维令牌运维资产。"}