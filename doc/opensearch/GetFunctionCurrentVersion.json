{"summary":"获取当前功能新建实例时使用的版本信息。","path":"/v4/openapi/functions/{functionName}/current-version","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"functionName","in":"path","schema":{"description":"功能名称，支持的模型有：\n\n- CTR模型：ctr\n- 人气模型：pop\n- 类目模型：category\n- 热词模型：hot\n- 底纹模型：hint\n- 下拉提示模型：suggest\n- 分词模型：analyzer\n- 词权重模型：termweight","type":"string","required":true,"example":"ctr"}},{"name":"modelType","in":"query","schema":{"description":"模型类型，不同功能对应的模型类型如下：\n\n- CTR模型：tf_checkpoint\n- 人气模型：pop\n- 类目模型：offline_inference\n- 热词模型：offline_inference\n- 底纹模型：offline_inference\n- 下拉提示模型：offline_inference\n- 分词模型：text\n- 词权重模型：tf_checkpoint","type":"string","required":true,"enumValueTitles":{"pop":"人气模型","offline_inference":"热词底纹\\类目预测","tf_checkpoint":"ctr\\定制词权重等","text":"定制分词"},"example":"tf_checkpoint"}},{"name":"functionType","in":"query","schema":{"description":"功能类型：\n\n- PAAS （默认）\n- SAAS","type":"string","required":false,"example":"PAAS"}},{"name":"domain","in":"query","schema":{"description":"行业，默认为空，表示通用版","type":"string","required":false,"enumValueTitles":{"education":"教育行业","ecommerce":"电商行业","community":"内容社区"},"example":"ecommerce"}},{"name":"category","in":"query","schema":{"description":"垂类，默认为空","type":"string","required":false,"enumValueTitles":{"general":"通用","question":"教育搜题","it":"IT内容"},"example":"general"}}],"responses":{"200":{"schema":{"description":"响应体","type":"object","properties":{"Status":{"description":"状态码","type":"string","example":"OK"},"HttpCode":{"description":"HTTP状态码。","type":"integer","format":"int64","example":"200"},"RequestId":{"description":"请求id","type":"string","example":"1638157479281"},"Message":{"description":"错误信息","type":"string","example":"version not exist."},"Code":{"description":"错误码","type":"string","example":"Version.NotExist"},"Result":{"description":"返回结果。","type":"object","properties":{"FunctionName":{"description":"功能名称","type":"string","example":"ctr"},"FunctionType":{"description":"功能类型：\n\n- PAAS\n- SAAS","type":"string","example":"PAAS"},"ModelType":{"description":"模型类型","type":"string","example":"tf_checkpoint"},"VersionConfig":{"description":"配置信息","type":"object","properties":{"CreateParameters":{"description":"创建实例时使用的参数列表","type":"array","items":{"description":"参数体","type":"object","properties":{"Name":{"description":"name","type":"string","example":"params1"},"Required":{"description":"required","type":"string","example":"true"}},"example":"{                     \"name\": \"params1\",                     \"required\": \"true\",                     \"formItemProps\": \"{\\\"required\\\": true, \\\"pattern?\\\": \\\"/^[a-zA-Z][a-zA-Z0-9_]{0,29}$/\\\"}\",                     \"componentProps\": \"{\\\"component\\\": \\\"Input\\\", \\\"attributes\\\": {\\\"defaultValue\\\": \\\"value1\\\"}}\"                 }"},"example":"[                 {                     \"name\": \"params1\",                     \"required\": \"true\",                     \"formItemProps\": \"{\\\"required\\\": true, \\\"pattern?\\\": \\\"/^[a-zA-Z][a-zA-Z0-9_]{0,29}$/\\\"}\",                     \"componentProps\": \"{\\\"component\\\": \\\"Input\\\", \\\"attributes\\\": {\\\"defaultValue\\\": \\\"value1\\\"}}\"                 }             ]"},"Depends":{"description":"实例的依赖项列表","type":"array","items":{"description":"参数体\n\n","type":"object","properties":{"Condition":{"description":"条件","type":"string","example":"\"\""},"Dependency":{"description":"依赖项","type":"string","example":"\"\""},"Description":{"description":"描述","type":"string","example":"\"\""}},"example":"{                     \"dependency\": \"依赖项\",                     \"condition\": \"条件\",                     \"description\": \"\"                 }"},"example":"[                 {                     \"dependency\": \"依赖项\",                     \"condition\": \"条件\",                     \"description\": \"\"                 }             ]"},"UsageParameters":{"description":"实例在线使用过程中的参数列表","type":"array","items":{"description":"参数体","type":"object","properties":{"Name":{"description":"name","type":"string","example":"\"\""},"Required":{"description":"required","type":"string","example":"\"\""}},"example":"{}"},"example":"[]"}},"example":"{             \"createParameters\": [                 {                     \"name\": \"params1\",                     \"required\": \"true\",                     \"formItemProps\": \"{\\\"required\\\": true, \\\"pattern?\\\": \\\"/^[a-zA-Z][a-zA-Z0-9_]{0,29}$/\\\"}\",                     \"componentProps\": \"{\\\"component\\\": \\\"Input\\\", \\\"attributes\\\": {\\\"defaultValue\\\": \\\"value1\\\"}}\"                 }             ],             \"depends\": [                 {                     \"dependency\": \"依赖项\",                     \"condition\": \"条件\",                     \"description\": \"\"                 }             ],             \"usageParameters\": []         }"},"VersionId":{"description":"版本id","type":"integer","format":"int64","example":"101"},"VersionName":{"description":"版本名称","type":"string","example":"v1"}},"example":"{         \"versionName\": \"v1\",         \"versionId\": 101,         \"functionName\": \"ctr\",         \"modelType\": \"tf_checkpoint\",         \"functionType\": \"PAAS\",         \"versionConfig\": {             \"createParameters\": [                 {                     \"name\": \"params1\",                     \"required\": \"true\",                     \"formItemProps\": \"{\\\"required\\\": true, \\\"pattern?\\\": \\\"/^[a-zA-Z][a-zA-Z0-9_]{0,29}$/\\\"}\",                     \"componentProps\": \"{\\\"component\\\": \\\"Input\\\", \\\"attributes\\\": {\\\"defaultValue\\\": \\\"value1\\\"}}\"                 }             ],             \"depends\": [                 {                     \"dependency\": \"依赖项\",                     \"condition\": \"条件\",                     \"description\": \"\"                 }             ],             \"usageParameters\": []         }     }"},"Latency":{"description":"请求耗时（单位ms）","type":"integer","format":"int64","example":"123"}},"example":"{     \"status\": \"OK\",     \"requestId\": \"\",     \"httpCode\": 200,     \"code\": \"\",     \"message\": \"\",     \"latency\": 123,     \"result\": {         \"versionName\": \"v1\",         \"versionId\": 101,         \"functionName\": \"ctr\",         \"modelType\": \"tf_checkpoint\",         \"functionType\": \"PAAS\",         \"versionConfig\": {             \"createParameters\": [                 {                     \"name\": \"params1\",                     \"required\": \"true\",                     \"formItemProps\": \"{\\\"required\\\": true, \\\"pattern?\\\": \\\"/^[a-zA-Z][a-zA-Z0-9_]{0,29}$/\\\"}\",                     \"componentProps\": \"{\\\"component\\\": \\\"Input\\\", \\\"attributes\\\": {\\\"defaultValue\\\": \\\"value1\\\"}}\"                 }             ],             \"depends\": [                 {                     \"dependency\": \"依赖项\",                     \"condition\": \"条件\",                     \"description\": \"\"                 }             ],             \"usageParameters\": []         }     } }"}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Status\\\": \\\"OK\\\",\\n  \\\"HttpCode\\\": 200,\\n  \\\"RequestId\\\": \\\"1638157479281\\\",\\n  \\\"Message\\\": \\\"version not exist.\\\",\\n  \\\"Code\\\": \\\"Version.NotExist\\\",\\n  \\\"Result\\\": {\\n    \\\"FunctionName\\\": \\\"ctr\\\",\\n    \\\"FunctionType\\\": \\\"PAAS\\\",\\n    \\\"ModelType\\\": \\\"tf_checkpoint\\\",\\n    \\\"VersionConfig\\\": {\\n      \\\"CreateParameters\\\": [\\n        {\\n          \\\"Name\\\": \\\"params1\\\",\\n          \\\"Required\\\": \\\"true\\\"\\n        }\\n      ],\\n      \\\"Depends\\\": [\\n        {\\n          \\\"Condition\\\": \\\"\\\\\\\"\\\\\\\"\\\",\\n          \\\"Dependency\\\": \\\"\\\\\\\"\\\\\\\"\\\",\\n          \\\"Description\\\": \\\"\\\\\\\"\\\\\\\"\\\"\\n        }\\n      ],\\n      \\\"UsageParameters\\\": [\\n        {\\n          \\\"Name\\\": \\\"\\\\\\\"\\\\\\\"\\\",\\n          \\\"Required\\\": \\\"\\\\\\\"\\\\\\\"\\\"\\n        }\\n      ]\\n    },\\n    \\\"VersionId\\\": 101,\\n    \\\"VersionName\\\": \\\"v1\\\"\\n  },\\n  \\\"Latency\\\": 123\\n}\",\"type\":\"json\"}]","title":"获取当前版本","requestParamsDescription":"### 示例\n`GET /v4/openapi/functions/ctr/current-version?modelType=_checkpoint&functionType=PAAS&domain=ecommerce&category=general`","responseParamsDescription":"### 正常返回示例（热词模型）\n```\n{\n    \"status\": \"OK\",\n    \"requestId\": \"165890826219877085621759\",\n    \"latency\": 0.049,\n    \"httpCode\": 200,\n    \"code\": \"\",\n    \"message\": \"\",\n    \"result\": {\n        \"versionId\": 37,\n        \"versionName\": \"v2\",\n        \"description\": \"\",\n        \"status\": \"available\",\n        \"functionName\": \"hot\",\n        \"modelType\": \"offline_inference\",\n        \"functionType\": \"PAAS\",\n        \"versionConfig\": {\n            \"createParameters\": [\n                {\n                    \"name\": \"filter\",\n                    \"required\": \"false\",\n                    \"validations\": \"[{\\\"preprocess\\\": {\\\"pattern\\\": \\\"(\\\\\\\\w+)\\\\\\\\s*(>=|<=|>|<|=|!=)\\\\\\\\s*(\\\\\\\\w+)\\\", \\\"type\\\": \\\"regex\\\", \\\"group\\\": 1}, \\\"params\\\": {\\\"data\\\": [\\\"user_id\\\", \\\"biz_type\\\"], \\\"type\\\": \\\"trival\\\"}, \\\"class\\\": \\\"EnumerateRule\\\"}]\",\n                    \"value\": \"{\\\"component\\\":\\\"Input\\\",\\\"attributes\\\":{\\\"defaultValue\\\":\\\"\\\",\\\"dataSource\\\":\\\"\\\"}}\",\n                    \"valueSplit\": \",\"\n                }\n            ],\n            \"usageParameters\": [\n                {\n                    \"name\": \"allow_dict_id\",\n                    \"required\": \"false\",\n                    \"validations\": \"[{\\\"params\\\": {\\\"restrictions\\\": \\\"type=hot_allowlist\\\", \\\"type\\\": \\\"passthrough\\\", \\\"dataSource\\\": \\\"dicts\\\"}, \\\"class\\\": \\\"EnumerateRule\\\"}]\",\n                    \"value\": \"{\\\"component\\\":\\\"Select\\\",\\\"attributes\\\":{\\\"defaultValue\\\":\\\"\\\",\\\"dataSource\\\":\\\"\\\"}}\"\n                },\n                {\n                    \"name\": \"deny_dict_id\",\n                    \"required\": \"false\",\n                    \"validations\": \"[{\\\"params\\\": {\\\"restrictions\\\": \\\"type=hot_denylist\\\", \\\"type\\\": \\\"passthrough\\\", \\\"dataSource\\\": \\\"dicts\\\"}, \\\"class\\\": \\\"EnumerateRule\\\"}]\",\n                    \"value\": \"{\\\"component\\\":\\\"Select\\\",\\\"attributes\\\":{\\\"defaultValue\\\":\\\"\\\",\\\"dataSource\\\":\\\"\\\"}}\"\n                }\n            ],\n            \"depends\": [\n                {\n                    \"condition\": \"integrity_level >= 1\",\n                    \"dependency\": \"integrity_level\",\n                    \"description\": \"数据完整度至少为L1级\"\n                }\n            ],\n            \"deployment\": \"\",\n            \"dagTemplate\": \"opensearch_hot_train\"\n        }\n    }\n}\n```"}