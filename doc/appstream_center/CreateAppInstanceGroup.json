{"summary":"创建交付组。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"AppCenterImageId","in":"formData","schema":{"description":"应用镜像ID。可从[无影云应用控制台](https://appstreaming.console.aliyun.com/)的**运维**>**自定义镜像**或**系统镜像**页面获取。","type":"string","required":true,"example":"img-8z4nztpaqvay4****"}},{"name":"ProductType","in":"formData","schema":{"description":"产品类型。","type":"string","required":true,"enumValueTitles":{"CloudApp":"无影云应用"},"example":"CloudApp"}},{"name":"AppInstanceGroupName","in":"formData","schema":{"description":"交付组名称。","type":"string","required":true,"example":"办公应用"}},{"name":"Users","in":"formData","style":"repeatList","schema":{"description":"需添加到交付组分配用户的用户名称列表。","type":"array","items":{"description":"需添加到交付组分配用户的用户名称。格式为Users.N=`<用户名>`，其中N取值为大于0的整数。","type":"string","required":false,"example":"Users.1=username1\nUsers.2=username2"},"required":false,"maxItems":200}},{"name":"UserInfo","in":"formData","style":"json","schema":{"description":"需添加到交付组分配用户的用户信息。如果填写了`Users`参数，则该字段为必需。","type":"object","properties":{"Type":{"description":"用户账号类型。","type":"string","required":false,"enumValueTitles":{"Simple":"便捷账号"},"example":"Simple"}},"required":false}},{"name":"ChargeType","in":"formData","schema":{"description":"付费方式。","type":"string","required":true,"enumValueTitles":{"PostPaid":"按量付费","PrePaid":"包年包月"},"example":"PrePaid"}},{"name":"PromotionId","in":"formData","schema":{"description":"优惠ID。可通过[GetResourcePrice](~~428503~~)接口获取。","type":"string","required":false,"example":"17440009****"}},{"name":"AutoPay","in":"formData","schema":{"description":"是否自动付费。","type":"boolean","required":false,"enumValueTitles":{"true":"自动付费","false":"手动付费 [默认值]"},"example":"false"}},{"name":"AutoRenew","in":"formData","schema":{"description":"是否自动续费。","type":"boolean","required":false,"enumValueTitles":{"true":"自动续费","false":"手动续费 [默认值]"},"example":"false"}},{"name":"Period","in":"formData","schema":{"description":"当参数`ChargeType`取值为`PrePaid`时，该参数表示购买资源的时长，且为必填值。单位由`PeriodUnit`指定。\n\n- 如果`PeriodUnit`为`Week`，该参数的取值范围为：\n\n   - 1\n\n- 如果`PeriodUnit`为`Month`，该参数的取值范围为：\n\n   - 1\n   - 2\n   - 3\n   - 6\n\n- 如果`PeriodUnit`为`Year`，该参数的取值范围为：\n\n   - 1\n   - 2\n   - 3\n\n> 当参数`ChargeType`取值为`PostPaid`时，该参数请填写固定值1。","type":"integer","format":"int32","required":true,"example":"1"}},{"name":"PeriodUnit","in":"formData","schema":{"description":"当参数`ChargeType`取值为`PrePaid`时，该参数表示购买资源的时长单位。\n\n> 该参数区分大小写。例如，`Week`是有效的，`week`是无效的。\n另外，如果请求参数不符合上述搭配，例如`2 Week`，虽然调用本接口会成功，但最终在下单阶段会出错。\n\n> 当参数`ChargeType`取值为`PostPaid`时，该参数请填写固定值`Month`。","type":"string","required":true,"enumValueTitles":{"Month":"月","Year":"年","Week":"周"},"example":"Week"}},{"name":"SessionTimeout","in":"formData","schema":{"description":"应用回收时间，单位为分钟。终端用户将云应用断开连接一段时间后，云上应用进程即退出，这段时间就是应用回收时间。如果永不回收，则填写`-1`。取值范围：-1和3~300，且值为整数。默认值为`15`。","type":"integer","format":"int32","required":true,"maximum":"300","example":"15"}},{"name":"BizRegionId","in":"formData","schema":{"description":"交付组所属的地域ID。关于支持的地域详情，请参见[使用限制](~~426036~~)。","type":"string","required":true,"enumValueTitles":{"cn-shanghai":"华东2（上海）","cn-hangzhou":"华东1（杭州）"},"example":"cn-hangzhou"}},{"name":"ChargeResourceMode","in":"formData","schema":{"description":"售卖模式。","type":"string","required":true,"enumValueTitles":{"Node":"按资源售卖"},"example":"Node"}},{"name":"NodePool","in":"formData","style":"json","schema":{"description":"节点池对象。","type":"object","properties":{"NodeInstanceType":{"description":"购买资源的规格类型ID，可通过[ListNodeInstanceType](~~428502~~)接口获取。","type":"string","required":false,"enumValueTitles":{"appstreaming.vgpu.8c16g.4g":"无影-图形型_8核16G 4G显存","appstreaming.general.8c16g":"无影-通用型_8核16G","appstreaming.general.4c8g":"无影-通用型_4核8G","appstreaming.vgpu.14c93g.12g":"无影-图形型_14核93G 12G显存","appstreaming.vgpu.8c31g.16g":"无影-图形型_8核31G 16G显存"},"example":"appstreaming.general.4c8g"},"NodeAmount":{"description":"购买资源的数量。取值范围：1~100。\n\n>- 若为包年包月资源，则该参数必填。\n>- 若为按量付费资源，则当弹性模式（`StrategyType`）为固定数量（`NODE_FIXED`）或自动扩缩容（`NODE_SCALING_BY_USAGE`）时该参数必填。","type":"integer","format":"int32","required":false,"example":"1"},"NodeCapacity":{"description":"并发会话数，即单个资源可同时连接的会话数。如果同时连接的会话数过多，可能导致应用的使用体验下降。取值范围因资源规格不同而不同。各资源规格对应的取值范围分别是：\n\n- appstreaming.general.4c8g：1\\~2；\n- appstreaming.general.8c16g：1\\~4；\n- appstreaming.vgpu.8c16g.4g：1\\~4；\n- appstreaming.vgpu.8c31g.16g：1\\~4；\n- appstreaming.vgpu.14c93g.12g：1\\~6；","type":"integer","format":"int32","required":false,"example":"2"},"StrategyType":{"description":"弹性模式。\n\n> \n>- `NODE_FIXED`（固定数量）：适用于包年包月资源和按量付费资源。\n>- `NODE_SCALING_BY_USAGE`（自动扩缩容）：适用于包年包月资源和按量付费资源。\n>- `NODE_SCALING_BY_SCHEDULE`（定时扩缩容）：仅适用于按量付费资源。","type":"string","required":false,"enumValueTitles":{"NODE_FIXED":"固定数量（不使用弹性扩缩容）","NODE_SCALING_BY_SCHEDULE":"定时扩缩容","NODE_SCALING_BY_USAGE":"自动扩缩容"},"example":"NODE_FIXED"},"MaxScalingAmount":{"description":"扩容时最多创建资源的数量。`StrategyType`设为`NODE_SCALING_BY_USAGE`（使用弹性资源）时，该字段必填。","type":"integer","format":"int32","required":false,"example":"10"},"ScalingStep":{"description":"扩容时每次创建资源的数量。取值范围：1~10。`StrategyType`设为`NODE_SCALING_BY_USAGE`（使用弹性资源）时，该字段必填。","type":"integer","format":"int32","required":false,"example":"2"},"ScalingUsageThreshold":{"description":"会话使用率上限阈值（%）。当会话使用率超过该阈值时，将触发自动扩容。会话使用率的计算公式为`会话使用率=当前会话数÷(资源总数×资源并发会话数)×100%`。`StrategyType`设为`NODE_SCALING_BY_USAGE`（使用弹性资源）时，该字段必填。取值范围：0~100。默认值：85。","type":"string","required":false,"example":"85"},"ScalingDownAfterIdleMinutes":{"description":"无会话连接的资源最多保留的时长（分钟）。当资源内无会话连接时，将按照此处设置的时长开始倒计时，倒计时结束时将完成缩容。取值范围：5\\~120。默认值：5。但有以下例外情况：\n\n- 若缩容后将导致重新触发自动扩容，则不会执行缩容，以免导致反复产生缩容、扩容。\n- 若此时间段内，因会话数增加而触发自动扩容，则该资源不会按原计划缩容，倒计时也将重新开始。","type":"integer","format":"int32","required":false,"example":"5"},"StrategyEnableDate":{"description":"策略生效日期。格式为：yyyy-MM-dd。该日期必须大于或等于当前日期。`StrategyType`（弹性模式）设为`NODE_SCALING_BY_SCHEDULE`（定时扩缩容）时，该字段必填。","type":"string","required":false,"example":"2022-08-01"},"StrategyDisableDate":{"description":"策略失效日期。格式为：yyyy-MM-dd。失效日期与生效日期的间隔必须介于7天到1年之间（含7天和1年）。`StrategyType`（弹性模式）设为`NODE_SCALING_BY_SCHEDULE`（定时扩缩容）时，该字段必填。","type":"string","required":false,"example":"2022-09-08"},"WarmUp":{"description":"是否开启资源预热策略。`StrategyType`（弹性模式）设为`NODE_SCALING_BY_SCHEDULE`（定时扩缩容）时，该字段必填。","type":"boolean","required":false,"example":"false"},"RecurrenceSchedules":{"description":"策略执行周期列表。`StrategyType`（弹性模式）设为`NODE_SCALING_BY_SCHEDULE`（定时扩缩容）时，该字段必填。","type":"array","items":{"description":"策略执行周期。","type":"object","properties":{"RecurrenceType":{"description":"策略执行周期的类型。必须同时指定`RecurrenceType`和`RecurrenceValues`。 ","type":"string","required":false,"enumValueTitles":{"weekly":"周（每周指定几天重复执行一次定时任务）"},"example":"weekly"},"RecurrenceValues":{"description":"策略执行周期的数值列表。","type":"array","items":{"description":"策略执行周期的数值。","type":"integer","format":"int32","required":false,"enumValueTitles":{"1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六","7":"周日"},"example":"1"},"required":false,"maxItems":7},"TimerPeriods":{"description":"策略执行周期的时间段列表。时间段设置要求：\n\n- 最多可添加3个时间段。\n- 时间段之间不重叠。\n- 时间段之间的间隔大于或等于5分钟。\n- 单个时间段的时长大于或等于15分钟。\n- 所有时间段累计不跨天。","type":"array","items":{"description":"策略执行周期的时间段。","type":"object","properties":{"StartTime":{"description":"开始时间。格式为HH:mm。","type":"string","required":false,"example":"12:00"},"EndTime":{"description":"结束时间。格式为HH:mm。","type":"string","required":false,"example":"15:00"},"Amount":{"description":"资源数量。","type":"integer","format":"int32","required":false,"example":"2"}},"required":false},"required":false,"maxItems":5}},"required":false},"required":false,"maxItems":7}},"required":false}},{"name":"Network","in":"formData","style":"json","schema":{"description":"网络配置。\n\n> 如需使用该参数，请提交工单。","type":"object","properties":{"StrategyType":{"description":"网络策略类型。","type":"string","required":false,"enumValueTitles":{"Mixed":"混合模式，单VPC、双网卡+独立公网IP","Shared":"共享模式，单网卡、NAT网管访问公网"},"example":"Shared"},"Routes":{"description":"路由配置。仅当网络策略类型（`StrategyType`）的值为混合模式（`Mixed`）时可配置。","type":"array","items":{"description":"路由配置。","type":"object","properties":{"Destination":{"description":"访问目标。CIDR格式。","type":"string","required":false,"example":"139.196.XX.XX/32"},"Mode":{"description":"网络出口模式。","type":"string","required":false,"enumValueTitles":{"Shared":"通过NAT网管访问"},"example":"Shared"}},"required":false},"required":false},"IpExpireMinutes":{"description":"公网IP地址使用时长超过这个值时，在下次登录时就会触发IP地址更新。最小值为60。单位为分钟。","type":"integer","format":"int32","required":false,"minimum":"60","example":"60"},"DomainRules":{"description":"域名规则配置。","type":"array","items":{"description":"域名规则。","type":"object","properties":{"Domain":{"description":"域名。","type":"string","required":false,"example":"www.example.com"},"Policy":{"description":"策略值。","type":"string","required":false,"enumValueTitles":{"allow":"允许访问","block":"禁止访问"},"example":"block"}},"required":false},"required":false}},"required":false}},{"name":"StoragePolicy","in":"formData","style":"json","schema":{"description":"存储策略。","type":"object","properties":{"StorageTypeList":{"description":"存储类型列表。","type":"array","items":{"description":"存储类型。","type":"string","required":false,"enumValueTitles":{"OFF":"关闭","PDS":"网盘与相册服务（Drive and Photo Service）"},"example":"PDS"},"required":false}},"required":false}},{"name":"PreOpenAppId","in":"formData","schema":{"description":"预开的AppId。","type":"string","required":false,"example":"cag-b2ronxxd****"}},{"name":"RuntimePolicy","in":"formData","style":"json","schema":{"description":"运行时策略。","type":"object","properties":{"SessionType":{"description":"会话类型。","type":"string","required":false,"enumValueTitles":{"CONSOLE":"Console会话","NORMAL":"RDP会话"},"example":"NORMAL"},"DebugMode":{"description":"是否开启调试模式。如需调用`GetDebugAppInstance`和`CreateImageFromAppInstanceGroup`，则必须将此字段设为`ON`。","type":"string","required":false,"enumValueTitles":{"OFF":"关闭","ON":"开启"},"example":"OFF"}},"required":false}},{"name":"SecurityPolicy","in":"formData","style":"json","schema":{"description":"安全策略。","type":"object","properties":{"ResetAfterUnbind":{"description":"解绑后是否重置。","type":"boolean","required":false,"enumValueTitles":{"true":"重置","false":"不重置"},"example":"true"},"SkipUserAuthCheck":{"description":"是否跳过用户授权校验。","type":"boolean","required":false,"enumValueTitles":{"true":"不校验","false":"校验 [默认值]"},"example":"false"}},"required":false}},{"name":"UserDefinePolicy","in":"query","style":"json","schema":{"description":"用户自定义策略","type":"object","properties":{"CustomConfig":{"description":"自定义策略内容，需要满足镜像版本规范，如需使用该参数，请提交工单申请开启白名单。","type":"string","required":false,"example":"[{\"target\":\"agent\",\"config\":{\"abc\":\"xxx\"}}]"}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"1CBAFFAB-B697-4049-A9B1-67E1FC5F****"},"AppInstanceGroupModel":{"description":"交付组。","type":"object","properties":{"AppInstanceGroupId":{"description":"交付组ID。","type":"string","example":"aig-9ciijz60n4xsv****"},"OrderId":{"description":"订单ID。","type":"string","example":"12345****"},"NodePoolId":{"description":"资源组ID。如果同时创建了资源组，则返回该参数。","type":"string","example":"rg-ew7va2g1wl3vm****"}}}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"1CBAFFAB-B697-4049-A9B1-67E1FC5F****\\\",\\n  \\\"AppInstanceGroupModel\\\": {\\n    \\\"AppInstanceGroupId\\\": \\\"aig-9ciijz60n4xsv****\\\",\\n    \\\"OrderId\\\": \\\"12345****\\\",\\n    \\\"NodePoolId\\\": \\\"rg-ew7va2g1wl3vm****\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"创建交付组","description":"请确保在使用该接口前，已充分了解无影云应用的[计费方式和价格](~~426039~~)。\n\n交付组是向终端用户交付云应用的逻辑分组，包括底层依赖的云应用资源、包含云应用的镜像、资源管理策略以及用户分配设置等。详情参见[发布交付组](~~426046~~)。"}