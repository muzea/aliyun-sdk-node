{"summary":"获取云产品日志采集的采集规则。","path":"/collectionpolicy/{policyName}","methods":["get"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"195429","abilityTreeNodes":["FEATUREsls9NGCVR"]},"parameters":[{"name":"policyName","in":"path","schema":{"description":"规则名称。","type":"string","required":true,"example":"your_log_policy\n","maxLength":63,"minLength":3}},{"name":"productCode","in":"query","schema":{"description":"产品编码。","type":"string","required":false,"example":"oss"}},{"name":"dataCode","in":"query","schema":{"description":"日志类型编码。","type":"string","required":false,"example":"access_log"}}],"responses":{"200":{"headers":{"Content-Length":{"schema":{"title":"响应内容长度。","type":"string"}},"Content-Type":{"schema":{"title":"返回的响应体的内容格式。","type":"string"}},"x-log-requestid":{"schema":{"title":"返回的响应体的内容格式。","type":"string"}},"Server":{"schema":{"title":"服务器名称。","type":"string"}},"Date":{"schema":{"title":"返回响应的时间。","type":"string"}},"Connection":{"schema":{"title":"是否长链接。取值包括：  close：不是长链接，则每个HTTP请求都会重新建立TCP连接。 keep-alive：长链接，TCP连接建立后保持连接状态，节省连接所需时间和带宽。","type":"string"}}},"schema":{"title":"Schema of Response","description":"返回结构体。","type":"object","properties":{"collectionPolicy":{"description":"返回规则。","type":"object","properties":{"policyName":{"description":"规则名称。","type":"string","example":"your_log_policy"},"enabled":{"description":"是否开启。","type":"boolean","example":"true\n"},"productCode":{"description":"产品编码。","type":"string","example":"oss"},"dataCode":{"description":"日志类型编码。","type":"string","example":"access_log"},"policyConfig":{"description":"采集规则配置。","type":"object","properties":{"resourceMode":{"description":"资源采集模式。","type":"string","example":"all"},"regions":{"description":"实例所属的地域集合，支持通配符。","type":"array","items":{"description":"地域ID。","type":"string","example":"cn-hangzhou"}},"instanceIds":{"description":"实例ID集合。","type":"array","items":{"description":"实例ID。","type":"string","example":"your-test-bucket1\n"}},"resourceTags":{"description":"资源标签。","type":"object","example":"{\"tag1\":\"value1\",\"tag2\":\"value2\"}"}}},"centralizeEnabled":{"description":"是否开启中心化存储。","type":"boolean","example":"false"},"centralizeConfig":{"description":"中心化转投配置。","type":"object","properties":{"destRegion":{"description":"中心化转投目的地域。","type":"string","example":"cn-beijing\n"},"destProject":{"description":"中心化转投目的项目。","type":"string","example":"your-sls-project-in-beijing\n"},"destLogstore":{"description":"中心化转投目的日志库。","type":"string","example":"your-sls-logstore-in-beijing\n"},"destTTL":{"description":"中心化转投目的天数。","type":"integer","format":"int32","example":"your-sls-logstore-ttl\n"}}},"resourceDirectory":{"description":"资源目录配置, 如有配置，否则为空","type":"object","properties":{"accountGroupType":{"description":"在该资源目录下，全选模式all或自定义模式custom","type":"string","example":"all,custom"},"members":{"description":"当资源目录配置为custom模式时，对应的成员账号列表","type":"array","items":{"description":"阿里云账号Uid","type":"string","example":"165***********50"}}}},"dataConfig":{"description":"当且仅当日志类型为全局日志类型时支持的配置，例如productCode为sls时的场景。否则为空。","type":"object","properties":{"dataRegion":{"description":"当且仅当日志类型为全局日志类型时支持的配置，例如productCode为sls时的场景，表示首次配置时全局日志将被采集到对应地域。","type":"string","example":"cn-beijing"},"dataProject":{"description":"当且仅当日志类型为全局日志类型时有效，例如productCode为sls时的场景，如果为空，表示日志被采集到该账号在特定dataRegion下的默认专属的Project中。","type":"string","example":"\"\""}}},"internalPolicy":{"description":"是否是内置规则策略，内置规则不允许修改、删除。","type":"boolean","example":"false"},"policyUid":{"description":"规则所属的账号阿里云账号Uid，如果该规则由资源目录管理员或者资源目录委派管理员创建，则为其阿里云账号Uid。","type":"string","example":"148***********50\n"}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"collectionPolicy\\\": {\\n    \\\"policyName\\\": \\\"your_log_policy\\\",\\n    \\\"enabled\\\": true,\\n    \\\"productCode\\\": \\\"oss\\\",\\n    \\\"dataCode\\\": \\\"access_log\\\",\\n    \\\"policyConfig\\\": {\\n      \\\"resourceMode\\\": \\\"all\\\",\\n      \\\"regions\\\": [\\n        \\\"cn-hangzhou\\\"\\n      ],\\n      \\\"instanceIds\\\": [\\n        \\\"your-test-bucket1\\\\n\\\"\\n      ],\\n      \\\"resourceTags\\\": {\\n        \\\"tag1\\\": \\\"value1\\\",\\n        \\\"tag2\\\": \\\"value2\\\"\\n      }\\n    },\\n    \\\"centralizeEnabled\\\": false,\\n    \\\"centralizeConfig\\\": {\\n      \\\"destRegion\\\": \\\"cn-beijing\\\\n\\\",\\n      \\\"destProject\\\": \\\"your-sls-project-in-beijing\\\\n\\\",\\n      \\\"destLogstore\\\": \\\"your-sls-logstore-in-beijing\\\\n\\\",\\n      \\\"destTTL\\\": 0\\n    },\\n    \\\"resourceDirectory\\\": {\\n      \\\"accountGroupType\\\": \\\"all,custom\\\",\\n      \\\"members\\\": [\\n        \\\"165***********50\\\"\\n      ]\\n    },\\n    \\\"dataConfig\\\": {\\n      \\\"dataRegion\\\": \\\"cn-beijing\\\",\\n      \\\"dataProject\\\": \\\"\\\\\\\"\\\\\\\"\\\"\\n    },\\n    \\\"internalPolicy\\\": false,\\n    \\\"policyUid\\\": \\\"148***********50\\\\n\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"获取云产品日志采集的采集规则","description":"该接口服务地址只能是华东 2（上海）或新加坡。"}