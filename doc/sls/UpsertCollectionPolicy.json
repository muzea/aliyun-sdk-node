{"summary":"创建云产品日志采集的采集规则，从而实现云产品日志的自动化采集。","path":"/collectionpolicy","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":[],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free","abilityTreeCode":"192469","abilityTreeNodes":["FEATUREsls9NGCVR"]},"parameters":[{"name":"body","in":"body","style":"json","schema":{"description":"请求结构体。","type":"object","properties":{"policyName":{"description":"规则名称，最短3个字符，最长63个字符，必须以字母开头。","type":"string","required":true,"example":"your_log_policy","maxLength":63,"minLength":3},"productCode":{"description":"产品编码。","type":"string","required":true,"example":"oss"},"dataCode":{"description":"日志类型编码。","type":"string","required":true,"example":"access_log"},"enabled":{"description":"是否开启。","type":"boolean","required":true,"example":"true","default":"false"},"policyConfig":{"description":"采集规则配置。","type":"object","properties":{"resourceMode":{"description":"资源采集模式。如果配置all表示会采集账号下的全部实例到默认日志库，如果配置attributeMode表示会按照实例地域属性和资源标签进行过滤，如果配置instanceMode表示会按照实例ID进行过滤。","type":"string","required":true,"example":"all","default":"all","enum":["all","instanceMode","attributeMode"]},"resourceTags":{"description":"资源标签，当且仅当resourceMode为attributeMode时有效。\n如果资源标签过滤项为空，表示无需按照资源标签过滤，实例全部满足资源标签这一过滤条件，否则只采集资源标签属性全部满足该资源标签配置的实例。\n资源标签和实例所属的地域集合，共同作用，只有全部满足时才会采集该实例对象。","type":"object","required":false,"example":"{\"tag1\":\"value1\",“tag2\":\"value2\"}"},"regions":{"description":"实例所属的地域集合，当且仅当resourceMode为attributeMode时有效，支持通配符。如果地域集合过滤项为空数组，表示无需按照地域过滤，实例全部满足地域集合这一过滤条件，否则只采集地域属性在该地域集合中的实例。实例所属的地域集合和资源标签，共同作用，只有全部满足时才会采集该实例对象。","type":"array","items":{"description":"地域ID。","type":"string","required":false,"example":"cn-hangzhou"},"required":false},"instanceIds":{"description":"实例ID集合，当且仅当resourceMode为instanceMode时有效。只采集实例ID在该实例ID集合中的实例。","type":"array","items":{"description":"实例ID。","type":"string","required":false,"example":"your-test-bucket1"},"required":false}},"required":true},"centralizeEnabled":{"description":"是否开启中心化转投，默认false。","type":"boolean","required":false,"example":"false","default":"false"},"centralizeConfig":{"description":"中心化转投配置。","type":"object","properties":{"destRegion":{"description":"中心化转投目的地域。","type":"string","required":false,"example":"cn-beijing"},"destProject":{"description":"中心化转投目的项目，其地域属性应和destRegion保持一致。","type":"string","required":false,"example":"your-sls-project-in-beijing"},"destLogstore":{"description":"中心化转投目的日志库，其地域属性应和destRegion保持一致，并且归属destProject下。","type":"string","required":false,"example":"your-sls-logstore-in-beijing"},"destTTL":{"description":"中心化转投目的天数，当且仅当中心化转投目的日志库不存在首次创建时有效。","type":"integer","format":"int32","required":false,"example":"your-sls-logstore-ttl"}},"required":false},"dataConfig":{"description":"当且仅当日志类型为全局日志类型时支持配置，例如productCode为sls时的场景，表示首次配置时全局日志将被采集到对应地域等。","type":"object","properties":{"dataRegion":{"description":"当且仅当日志类型为全局日志类型时支持配置，例如productCode为sls时的场景，表示首次配置时全局日志将被采集到对应地域。","type":"string","required":false,"example":"cn-beijing"}},"required":false},"resourceDirectory":{"description":"资源目录配置，账号必须已经开通资源目录，且为管理员或者委派管理员身份","type":"object","properties":{"accountGroupType":{"description":"支持该资源目录下，全选模式all和自定义模式custom","type":"string","required":false,"example":"all,custom"},"members":{"description":"当资源目录配置为custom模式时，对应的成员账号列表","type":"array","items":{"description":"成员账号阿里云Uid","type":"string","required":false,"example":"165***********50"},"required":false}},"required":false}},"required":false}}],"responses":{"200":{"headers":{"Content-Type":{"schema":{"title":"返回的响应体的内容格式。","type":"string"}},"Content-Length":{"schema":{"title":"响应内容长度。","type":"string"}},"Date":{"schema":{"title":"返回响应的时间。","type":"string"}},"Connection":{"schema":{"title":"是否长链接。取值包括：  close：不是长链接，则每个HTTP请求都会重新建立TCP连接。 keep-alive：长链接，TCP连接建立后保持连接状态，节省连接所需时间和带宽。","type":"string"}},"x-log-requestid":{"schema":{"title":"服务端产生的标识，该请求的唯一ID。","type":"string"}},"Server":{"schema":{"title":"服务器名称。","type":"string"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{}\",\"type\":\"json\"}]","title":"创建云产品日志采集的采集规则","description":"该接口服务地址只能是华东 2（上海）或新加坡。"}