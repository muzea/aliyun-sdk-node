{"summary":"列出云产品日志采集的采集规则。","path":"/collectionpolicy","methods":["get"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list","riskType":"none","chargeType":"free","abilityTreeCode":"192483","abilityTreeNodes":["FEATUREsls9NGCVR"]},"parameters":[{"name":"productCode","in":"query","schema":{"description":"产品编码。","type":"string","required":false,"example":"oss"}},{"name":"dataCode","in":"query","schema":{"description":"日志类型编码。","type":"string","required":false,"example":"access_log"}},{"name":"policyName","in":"query","schema":{"description":"规则名称。","type":"string","required":false,"example":"your_log_policy\n"}},{"name":"size","in":"query","allowEmptyValue":true,"schema":{"description":"分页查询时，设置的每页行数。默认值为 50，最多返回 100 个 规则信息。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"1","example":"50","default":"50"}},{"name":"offset","in":"query","allowEmptyValue":true,"schema":{"description":"查询开始行，默认值为 0。","type":"integer","format":"int32","required":false,"minimum":"0","example":"0","default":"0"}},{"name":"instanceId","in":"query","schema":{"description":"实例ID。如果配置实例ID，则可以根据实例ID反向查询实例命中的规则，必须和productCode、dataCode结合使用。","type":"string","required":false,"example":"your-test-bucket1\n"}},{"name":"centralProject","in":"query","schema":{"description":"中心化转投目的Project。如果配置中心化转投目的Project，则可以根据Project反向查询有多少规则配置了中心化转投到该centralProejct下。","type":"string","required":false,"example":"your-central-project1"}}],"responses":{"200":{"headers":{"Content-Type":{"schema":{"title":"返回的响应体的内容格式。","type":"string"}},"Server":{"schema":{"title":"服务器名称。","type":"string"}},"Content-Length":{"schema":{"title":"响应内容长度。","type":"string"}},"Date":{"schema":{"title":"返回响应的时间。","type":"string"}},"Connection":{"schema":{"title":"是否长链接。取值包括：  close：不是长链接，则每个HTTP请求都会重新建立TCP连接。 keep-alive：长链接，TCP连接建立后保持连接状态，节省连接所需时间和带宽。","type":"string"}},"x-log-requestid":{"schema":{"title":"服务端产生的标识，该请求的唯一ID。","type":"string"}}},"schema":{"title":"Schema of Response","description":"返回结构体。","type":"object","properties":{"totalCount":{"description":"总数据条数。","type":"integer","format":"int32","example":"1"},"currentCount":{"description":"当前页数据条数。","type":"integer","format":"int32","example":"1"},"data":{"description":"当前查询条件下按照分页配置返回的规则数据。","type":"array","items":{"description":"规则详情。","type":"object","properties":{"productCode":{"description":"产品编码。","type":"string","example":"oss"},"dataCode":{"description":"日志类型编码。","type":"string","example":"access_log"},"policyName":{"description":"规则名称。","type":"string","example":"your_log_policy"},"enabled":{"description":"是否开启。","type":"boolean","example":"true"},"policyConfig":{"description":"采集规则配置。","type":"object","properties":{"resourceMode":{"description":"资源采集模式。","type":"string","example":"all"},"regions":{"description":"实例所属的地域集合。","type":"array","items":{"description":"地域ID。","type":"string","example":"cn-hangzhou"}},"instanceIds":{"description":"实例ID集合。","type":"array","items":{"description":"实例ID。","type":"string","example":"your-test-bucket1\n"}},"resourceTags":{"description":"资源标签。","type":"object","example":"{\"tag1\":\"value1\",\"tag2\":\"value2\"}"}}},"centralizeEnabled":{"description":"是否开启中心化转投。","type":"boolean","example":"false"},"centralizeConfig":{"description":"中心化转投配置。","type":"object","properties":{"destRegion":{"description":"中心化转投目的地域。","type":"string","example":"cn-beijing\n"},"destProject":{"description":"中心化转投目的项目。","type":"string","example":"your-sls-project-in-beijing\n"},"destLogstore":{"description":"中心化转投目的日志库。","type":"string","example":"your-sls-logstore-in-beijing\n"},"destTTL":{"description":"中心化转投目的存储天数。","type":"integer","format":"int32","example":"your-sls-logstore-ttl\n"}}},"resourceDirectory":{"description":"资源目录配置, 如有配置，否则为空","type":"object","properties":{"accountGroupType":{"description":"在该资源目录下，全选模式all或自定义模式custom","type":"string","example":"all,custom"},"members":{"description":"当资源目录配置为custom模式时，对应的成员账号列表","type":"array","items":{"description":"阿里云账号Uid","type":"string","example":"165***********50"}}}},"dataConfig":{"description":"当且仅当日志类型为全局日志类型时支持配置，例如productCode为sls时的场景。否则为空。","type":"object","properties":{"dataRegion":{"description":"当且仅当日志类型为全局日志类型时支持的配置，例如productCode为sls时的场景，表示首次配置时全局日志将被采集到对应地域。","type":"string","example":"cn-hangzhou"},"dataProject":{"description":"当且仅当日志类型为全局日志类型时有效，例如productCode为sls时的场景，如果为空，表示日志被采集到该账号在特定dataRegion下的默认专属的Project中。","type":"string","example":"\"\""}}},"internalPolicy":{"description":"是否是内置规则策略，内置规则不允许修改、删除。","type":"boolean","example":"false"},"policyUid":{"description":"规则所属的账号阿里云账号Uid，如果该规则由资源目录管理员或者资源目录委派管理员创建，则为其阿里云账号Uid。","type":"string","example":"148***********50"}}}},"statistics":{"description":"当前查询条件下返回的统计数据。","type":"array","items":{"description":"按照productCode的规则统计结果","type":"object","properties":{"productCode":{"description":"产品编码。","type":"string","example":"oss"},"policySourceList":{"description":"规则来源列表。","type":"array","items":{"description":"规则来源对象。","type":"object","properties":{"policyUid":{"description":"规则所属的账号阿里云账号Uid，如果该规则由资源目录管理员或者资源目录委派管理员创建，则为其阿里云账号Uid。","type":"string","example":"148***********50"},"policyName":{"description":"规则名称","type":"string","example":"policy_name1_from148"}}}}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"totalCount\\\": 1,\\n  \\\"currentCount\\\": 1,\\n  \\\"data\\\": [\\n    {\\n      \\\"productCode\\\": \\\"oss\\\",\\n      \\\"dataCode\\\": \\\"access_log\\\",\\n      \\\"policyName\\\": \\\"your_log_policy\\\",\\n      \\\"enabled\\\": true,\\n      \\\"policyConfig\\\": {\\n        \\\"resourceMode\\\": \\\"all\\\",\\n        \\\"regions\\\": [\\n          \\\"cn-hangzhou\\\"\\n        ],\\n        \\\"instanceIds\\\": [\\n          \\\"your-test-bucket1\\\\n\\\"\\n        ],\\n        \\\"resourceTags\\\": {\\n          \\\"tag1\\\": \\\"value1\\\",\\n          \\\"tag2\\\": \\\"value2\\\"\\n        }\\n      },\\n      \\\"centralizeEnabled\\\": false,\\n      \\\"centralizeConfig\\\": {\\n        \\\"destRegion\\\": \\\"cn-beijing\\\\n\\\",\\n        \\\"destProject\\\": \\\"your-sls-project-in-beijing\\\\n\\\",\\n        \\\"destLogstore\\\": \\\"your-sls-logstore-in-beijing\\\\n\\\",\\n        \\\"destTTL\\\": 0\\n      },\\n      \\\"resourceDirectory\\\": {\\n        \\\"accountGroupType\\\": \\\"all,custom\\\",\\n        \\\"members\\\": [\\n          \\\"165***********50\\\"\\n        ]\\n      },\\n      \\\"dataConfig\\\": {\\n        \\\"dataRegion\\\": \\\"cn-hangzhou\\\",\\n        \\\"dataProject\\\": \\\"\\\\\\\"\\\\\\\"\\\"\\n      },\\n      \\\"internalPolicy\\\": false,\\n      \\\"policyUid\\\": \\\"148***********50\\\"\\n    }\\n  ],\\n  \\\"statistics\\\": [\\n    {\\n      \\\"productCode\\\": \\\"oss\\\",\\n      \\\"policySourceList\\\": [\\n        {\\n          \\\"policyUid\\\": \\\"148***********50\\\",\\n          \\\"policyName\\\": \\\"policy_name1_from148\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"列出云产品日志采集的采集规则","description":"该接口服务地址只能是华东 2（上海）或新加坡。"}