{"summary":"为KMS实例中的凭据钥设置凭据策略。","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"206088","abilityTreeNodes":["FEATUREkms52EQP9"]},"parameters":[{"name":"SecretName","in":"query","schema":{"title":"","description":"凭据名称或凭据资源名称（ARN）。\n> 访问其他阿里云账号下的凭据时，必须输入凭据ARN。凭据ARN的格式为`acs:kms:${region}:${account}:secret/${secret-name}`。","type":"string","required":true,"example":"secret_test"}},{"name":"PolicyName","in":"query","schema":{"description":"凭据策略名称。仅支持固定取值default。","type":"string","required":false,"example":"default"}},{"name":"Policy","in":"query","schema":{"description":"凭据策略的具体内容，JSON格式。最大长度为32768个字节。\n\n凭据策略内容包含：\n\n- Version：凭据策略的版本，目前版本仅支持设置为1。\n- Statement：凭据策略的语句，每个凭据策略包含一个或多个语句。\n\n凭据策略格式为：\n\n```\n{\n    \"Version\": \"1\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable RAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n              \"RAM\": \"acs:ram::123456789012:root\"\n            }\n            \"Action\": [\n                \"kms:*\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        }\n    ]\n}\n```\n\nStatement详细介绍：\n- Sid：可选，表示自定义的语句标识符。内容长度小于等于128字符，支持的字符为：大写英文字母（A-Z）、小写英文字母（a-z）、数字（0-9），特殊字符（ _/+=.@-）。\n- Effect：必选，表示是允许还是拒绝该策略语句中的权限。取值为：Allow或Deny。\n\n- Principal：必选，表示权限策略的授权主体，支持设置为当前阿里云账号（即凭据所属的阿里云账号），当前阿里云账号下的RAM用户、RAM角色，其他阿里云账号下的RAM用户、RAM角色。\n\n- Action：必选，表示要允许或拒绝的API操作，内容必须以\"kms:\"开头。操作权限列表的范围，请参见[凭据策略概述](~~2716465~~)。如果您设置了列表外的操作，设置后也不会生效。\n\n- Resource：必选，取值只能是*，表示本KMS凭据。\n\n>授权给其他阿里云账号下的RAM用户、RAM角色后，您仍需在访问控制RAM侧，使用该RAM用户、RAM角色的阿里云账号为其授权使用该凭据，RAM用户、RAM角色才能使用该凭据。集体操作，请参见[密钥管理服务自定义权限策略参考](~~480682~~)、[为RAM用户授权](~~116146~~)、[为RAM角色授权](~~116147~~)。\n","type":"string","required":true,"example":"{\"Version\":\"1\",\"Statement\": [{\"Sid\":\"kms default secret policy\",\"Effect\":\"Allow\",\"Principal\":{\"RAM\": [\"acs:ram::119285303511****:*\"]},\"Action\":[\"kms:*\"],\"Resource\": [\"*\"] }] }"}}],"responses":{"200":{"schema":{"title":"","description":"","type":"object","properties":{"RequestId":{"title":"","description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"381D5D33-BB8F-395F-8EE4-AE3BB4B523C8"}}}}},"errorCodes":{"400":[{"errorCode":"MissingParameter","errorMessage":"The parameter needed but no provided."},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is not valid."},{"errorCode":"Forbidden.NoPermission","errorMessage":"This operation is forbidden by permission system."},{"errorCode":"Forbidden.KeyPolicyUnSupported","errorMessage":"The specified key does not support key policy."},{"errorCode":"Rejected.ShareQuotaExceedLimit","errorMessage":"Instance Share Quota Exceed Limit."}],"403":[{"errorCode":"Forbidden.DKMSInstanceStateInvalid","errorMessage":"The DKMS instance state is invalid."}],"404":[{"errorCode":"Forbidden.ResourceNotFound","errorMessage":"Resource not found."},{"errorCode":"Forbidden.KeyNotFound","errorMessage":"The specified Key is not found."}],"503":[{"errorCode":"SerivceUnvailableTemporary","errorMessage":"Service Unvailable Temporary"}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"381D5D33-BB8F-395F-8EE4-AE3BB4B523C8\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SetSecretPolicyResponse>\\n    <RequestId>381D5D33-BB8F-395F-8EE4-AE3BB4B523C8</RequestId>\\n</SetSecretPolicyResponse>\",\"errorExample\":\"\"}]","title":"SetSecretPolicy","description":"关于凭据策略的详细介绍，请参见[凭据策略概述](~~2716465~~)。"}