{"methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"Name","in":"query","schema":{"description":"权限策略名称。","type":"string","required":true,"docRequired":true,"example":"policy_test"}},{"name":"Description","in":"query","schema":{"description":"描述信息。","type":"string","required":false,"example":"policy  description"}},{"name":"KmsInstance","in":"query","schema":{"description":"权限策略的作用域。即要访问的KMS实例。","type":"string","required":false,"example":"kst-hzz634e67d126u9p9****"}},{"name":"Permissions","in":"query","schema":{"description":"权限策略支持的操作。取值：\n\n- RbacPermission/Template/CryptoServiceKeyUser：可以对KMS实例进行密码运算操作。\n\n- RbacPermission/Template/CryptoServiceSecretUser：可以对KMS实例进行凭据相关操作。\n\n支持同时选择这两种操作。\n","type":"string","required":true,"docRequired":true,"example":"[\"RbacPermission/Template/CryptoServiceKeyUser\", \"RbacPermission/Template/CryptoServiceSecretUser\"]"}},{"name":"Resources","in":"query","schema":{"description":"允许访问的密钥和凭据。\n\n- 密钥：格式为`key/${KeyId}`，如果允许访问当前KMS实例的所有密钥请输入key/*。\n\n- 凭据：格式为`secret/${SecretName}`，如果允许访问当前KMS实例的所有凭据请输入secret/*。","type":"string","required":true,"docRequired":true,"example":"[\"secret/acs/ram/user/ram-secret\", \"secret/acs/ram/user/acr-master\", \"key/key-hzz63d9c8d3dfv8cv****\"]"}},{"name":"AccessControlRules","in":"query","schema":{"description":"网络控制规则名称。\n\n>查询已创建的网络控制规则，请参见[ListNetworkRules](~~2539433~~)。","type":"string","required":false,"example":"{\"NetworkRules\":[\"kst-hzz62ee817bvyyr5x****.efkd\",\"kst-hzz62ee817bvyyr5x****.eyyp\"]}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"3bf02f7a-015b-4f34-be0f-c4543fda2d33"},"Arn":{"description":"权限策略的ARN。","type":"string","example":"acs:kms:cn-hangzhou:119285303511****:policy/policy_test"},"Name":{"description":"权限策略名称。","type":"string","example":"policy_test"},"Description":{"description":"描述信息。","type":"string","example":"policy  description"},"KmsInstance":{"description":"权限策略的作用域。","type":"string","example":"kst-hzz634e67d126u9p9****"},"Permissions":{"description":"权限策略支持的操作。","type":"string","example":"[\"RbacPermission/Template/CryptoServiceKeyUser\", \"RbacPermission/Template/CryptoServiceSecretUser\"]"},"Resources":{"description":"允许访问的密钥和凭据。\n\n- `key/*`表示允许访问当前KMS实例的所有密钥。\n\n- `secret/*`表示允许访问当前KMS实例的所有凭据。","type":"string","example":"[\"secret/acs/ram/user/ram-secret\", \"secret/acs/ram/user/acr-master\", \"key/key-hzz63d9c8d3dfv8cv****\"]"},"AccessControlRules":{"description":"网络控制规则名称。","type":"string","example":"{\"NetworkRules\":[\"kst-hzz62ee817bvyyr5x****.efkd\",\"kst-hzz62ee817bvyyr5x****.eyyp\"]}"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is not valid."}],"404":[{"errorCode":"InvalidAccessKeyId.NotFound","errorMessage":"The Access Key ID provided does not exist in our records."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"3bf02f7a-015b-4f34-be0f-c4543fda2d33\\\",\\n  \\\"Arn\\\": \\\"acs:kms:cn-hangzhou:119285303511****:policy/policy_test\\\",\\n  \\\"Name\\\": \\\"policy_test\\\",\\n  \\\"Description\\\": \\\"policy  description\\\",\\n  \\\"KmsInstance\\\": \\\"kst-hzz634e67d126u9p9****\\\",\\n  \\\"Permissions\\\": \\\"[\\\\\\\"RbacPermission/Template/CryptoServiceKeyUser\\\\\\\", \\\\\\\"RbacPermission/Template/CryptoServiceSecretUser\\\\\\\"]\\\",\\n  \\\"Resources\\\": \\\"[\\\\\\\"secret/acs/ram/user/ram-secret\\\\\\\", \\\\\\\"secret/acs/ram/user/acr-master\\\\\\\", \\\\\\\"key/key-hzz63d9c8d3dfv8cv****\\\\\\\"]\\\",\\n  \\\"AccessControlRules\\\": \\\"{\\\\\\\"NetworkRules\\\\\\\":[\\\\\\\"kst-hzz62ee817bvyyr5x****.efkd\\\\\\\",\\\\\\\"kst-hzz62ee817bvyyr5x****.eyyp\\\\\\\"]}\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreatePolicyResponse>\\n    <RequestId>3bf02f7a-015b-4f34-be0f-c4543fda2d33</RequestId>\\n    <Arn>acs:kms:cn-hangzhou:119285303511****:policy/policy_test</Arn>\\n    <Name>policy_test</Name>\\n    <Description>policy  description</Description>\\n    <KmsInstance>kst-hzz634e67d126u9p9****</KmsInstance>\\n    <Permissions>[\\\"RbacPermission/Template/CryptoServiceKeyUser\\\", \\\"RbacPermission/Template/CryptoServiceSecretUser\\\"]</Permissions>\\n    <Resources>[\\\"secret/acs/ram/user/ram-secret\\\", \\\"secret/acs/ram/user/acr-master\\\", \\\"key/key-hzz63d9c8d3dfv8cv****\\\"]</Resources>\\n    <AccessControlRules>{\\\"NetworkRules\\\":[\\\"kst-hzz62ee817bvyyr5x****.efkd\\\",\\\"kst-hzz62ee817bvyyr5x****.eyyp\\\"]}</AccessControlRules>\\n</CreatePolicyResponse>\",\"errorExample\":\"\"}]","title":"创建访问策略","summary":"创建一个权限策略，设置允许应用访问的密钥和凭据。","description":"### 使用说明\n自建应用进行密码运算操作、获取凭据值前，需要通过应用身份凭证（ClientKey）访问KMS实例。创建应用接入点AAP和身份凭证（ClientKey）的整体流程如下：\n\n1. 创建网络控制规则：设置允许访问KMS的私网IP或私网网段。更多信息，请参见[CreateNetworkRule](~~2539407~~)。\n2. 创建权限策略：设置允许应用访问的密钥和凭据，并绑定网络控制规则。即本文介绍的内容。\n3. 创建应用接入点：设置认证方式，并绑定权限策略。更多信息，请参见[CreateApplicationAccessPoint](~~2539467~~)。\n4. 创建应用身份凭证（ClientKey）：设置ClientKey的加密口令、有效期，并绑定应用接入点。更多信息，请参见[CreateClientKey](~~2539509~~)。"}