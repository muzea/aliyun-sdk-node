{"summary":"并存入凭据的初始版本。","methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"54548","abilityTreeNodes":["FEATUREkms52EQP9"]},"parameters":[{"name":"SecretName","in":"query","schema":{"description":"凭据名称。  \n长度不超过192个字符，可包含中文、英文字母、数字、下划线（_）、正斜线（/）、加号（+）、等号（=）、半角句号（.）、短划线（-）和字符（@），其中中文的字符长度不超过64个。不同类型的凭据名称要求如下：  \n\n- 当SecretType取值为Generic（通用凭据）或Rds（RDS凭据）时，不能以`acs/`开头。  \n\n- 当SecretType取值为RAMCredentials（RAM凭据）时，使用固定值`$Auto`。此时KMS自动生成凭据名称，以`acs/ram/user/`开头，包含RAM用户显示名称。\n\n- 当SecretType取值为ECS（ECS凭据）时，必须以`acs/ecs/`开头。","type":"string","required":true,"docRequired":true,"example":"mydbconninfo"}},{"name":"VersionId","in":"query","schema":{"description":"初始版本的版本号，版本号在该凭据内唯一。\n长度不超过64个字符。","type":"string","required":true,"docRequired":true,"example":"v1"}},{"name":"EncryptionKeyId","in":"query","schema":{"description":"用于加密凭据值的密钥ID。\n\n> 密钥和凭据需要属于同一个KMS实例，且密钥必须为对称密钥。","type":"string","required":false,"docRequired":false,"example":"key-gzz63ff0db5hg3qje****","default":""}},{"name":"SecretData","in":"query","schema":{"description":"凭据值。长度不超过30720字节（30KB）。KMS使用指定的密钥对其加密后，存入初始版本中。\n\n- 当SecretType取值为Generic（通用凭据）时，您可以自定义凭据值。\n\n- 当SecretType取值为Rds（RDS凭据）时，凭据值格式为：`{\"Accounts\":[{\"AccountName\":\"\",\"AccountPassword\":\"\"}]}`。其中，`AccountName`为RDS实例的账号名称，`AccountPassword`为RDS实例的账号口令。  \n\n- 当SecretType取值为RAMCredentials（RAM凭据）时，凭据值格式为：`{\"AccessKeys\":[{\"AccessKeyId\":\"\",\"AccessKeySecret\":\"\"}]}`。其中，`AccessKeyId`是访问密钥ID，`AccessKeySecret`是访问密钥内容。您需要指定RAM用户的所有AccessKey。\n\n- 当SecretType取值为ECS（ECS凭据）时，凭据值格式为：  \n\n   - 当ExtendedConfig参数中SecretSubType取值为Password时：`{\"UserName\":\"\",\"Password\": \"\"}`。其中，`UserName`为登录ECS实例的用户名，`Password`为登录ECS实例的密码。  \n\n   - 当ExtendedConfig参数中SecretSubType取值为SSHKey时：`{\"UserName\":\"\",\"PublicKey\": \"\", \"PrivateKey\": \"\"}`。其中，`PublicKey`为登录ECS实例的SSH格式公钥，`PrivateKey`为登录ECS实例的私钥。","type":"string","required":true,"docRequired":true,"example":"{\"Accounts\":[{\"AccountName\":\"user1\",\"AccountPassword\":\"****\"}]}"}},{"name":"SecretDataType","in":"query","schema":{"description":"凭据值类型。取值：\n- text（默认值）：文本类型\n- binary：二进制类型\n\n> 当SecretType取值为Rds、RAMCredentials或ECS时，SecretDataType取值只能为text。","type":"string","required":false,"docRequired":false,"example":"text","default":"text","enum":["text","binary"]}},{"name":"Description","in":"query","schema":{"description":"凭据的描述信息。","type":"string","required":false,"docRequired":false,"example":"mydbinfo"}},{"name":"Tags","in":"query","schema":{"description":"凭据的标签。每个标签由一个键值对（Key:Value）组成，包含标签键（Key）、标签值（Value）。\n\n标签建和标签值的格式：最多支持128个字符，可以包含英文大小写字母、数字、正斜线（/）、反斜线（\\）、下划线（_）、短划线（-）、半角句号（.）、加号（+）、等于号（=）、半角冒号（:）、字符at（@）。\n\n- 标签键不能以aliyun或acs:开头。\n\n- 每个凭据最多可以设置20个标签键值对。","type":"string","required":false,"docRequired":false,"example":"[{\\\"TagKey\\\":\\\"key1\\\",\\\"TagValue\\\":\\\"val1\\\"},{\\\"TagKey\\\":\\\"key2\\\",\\\"TagValue\\\":\\\"val2\\\"}]"}},{"name":"SecretType","in":"query","schema":{"description":"凭据类型。取值：\n\n- Generic（默认值）：通用凭据。  \n- Rds：RDS凭据。  \n\n- RAMCredentials：RAM凭据。  \n\n- ECS：ECS凭据。\n","type":"string","required":false,"example":"Rds"}},{"name":"ExtendedConfig","in":"query","style":"json","schema":{"description":"凭据的拓展配置，用于指定特定凭据类型的属性。长度不超过1024个字符。\n\n- 当SecretType取值为Generic（通用凭据）时，忽略该参数。\n\n- 当SecretType取值为Rds（RDS凭据）时，需要指定ExtendedConfig的如下参数：\n - SecretSubType（必填）：凭据子类型。取值：  \n\n     - SingleUser：指定凭据管家以单账号模式RDS凭据。凭据轮转时，指定账号的口令会被重置为新的随机口令。\n     - DoubleUsers：指定凭据管家以双账号模式RDS凭据，ACSCurrent和ACSPrevious分别引用其中一个账号。凭据轮转时，ACSPrevious引用账号的口令会被重置为新的随机口令，随后凭据管家交换ACSCurrent和ACSPrevious对RDS账号的引用。\n - DBInstanceId（必填）：指定RDS账号所在的RDS实例ID。\n - CustomData（可选）：自定义数据。取值为JSON格式的键值对，最多不超过10个键值对，多个键值对用半角逗号（,）间隔。取值示例：`{\"Key1\": \"v1\", \"fds\":\"fdsf\"}`。默认值为空`{}`。  \n- 当SecretType取值为RAMCredentials（RAM凭据）时，需要指定ExtendedConfig的如下参数：\n - SecretSubType（必填）：凭据子类型。取值：  RamUserAccessKey。\n - UserName（必填）：RAM用户名称。\n - CustomData（可选）：自定义数据。取值为JSON格式的键值对，最多不超过10个键值对，多个键值对用半角逗号（,）间隔。默认值为空`{}`。  \n- 当SecretType取值为ECS（ECS凭据）时，需要指定ExtendedConfig的如下参数：\n - SecretSubType（必填）：凭据子类型。取值：  \n\n     - Password：ECS口令。\n     - SSHKey：ECS SSH公私钥。\n - RegionId（必填）：ECS实例所在地域ID。  \n - InstanceId（必填）：ECS实例ID。\n - CustomData（可选）：自定义数据。取值为JSON格式的键值对，最多不超过10个键值对，多个键值对用半角逗号（,）间隔。默认值为空`{}`。    \n  \n\n> 当SecretType取值为Rds、RAMCredentials或ECS时，必须设置该参数。","type":"object","required":false,"example":"{\"SecretSubType\":\"SingleUser\", \"DBInstanceId\":\"rm-bp1b3dd3a506e****\" ,\"CustomData\":{\"Key1\": \"v1\", \"fds\":\"fdsf\"}}"}},{"name":"EnableAutomaticRotation","in":"query","schema":{"description":"是否开启自动轮转，取值：\n- true：开启自动轮转。\n- false（默认值）：不开启自动轮转。\n\n\n> 当SecretType取值为Rds（RDS凭据）、RAMCredentials（RAM凭据）或ECS（ECS凭据）时，该参数有效。当SecretType取值为Generic（通用凭据）时，不支持自动轮转，您可通过[PutSecretValue](~~154503~~)操作手工轮转。","type":"boolean","required":false,"example":"true"}},{"name":"RotationInterval","in":"query","schema":{"description":"自动轮转的周期。取值范围：6小时~8,760小时（365天）。  \n格式为`integer[unit]`，其中`integer`表示时间长度，`unit`表示时间单位。  \nunit取值：d（天）、h（小时）、m（分钟）、s（秒）。例如：7d或者604,800s均表示7天的周期。  \n\n> 仅当EnableAutomaticRotation取值为true时，必须设置该参数，否则无需设置。","type":"string","required":false,"example":"30d"}},{"name":"DKMSInstanceId","in":"query","schema":{"description":"KMS实例的实例ID。","type":"string","required":false,"example":"kst-bjj62d8f5e0sgtx8h****"}},{"name":"Policy","in":"query","allowEmptyValue":true,"schema":{"description":"凭据策略的具体内容，JSON格式。最大长度为32768个字节。\n\n关于凭据策略的详细介绍，请参见[凭据策略概述](~~2716465~~)。不输入该参数时，使用默认凭据策略。\n\n凭据策略内容包含：\n\n- Version：凭据策略的版本，目前版本仅支持设置为1。\n- Statement：凭据策略的语句，每个凭据策略包含一个或多个语句。\n\n凭据策略格式为：\n\n```\n{\n    \"Version\": \"1\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable RAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n              \"RAM\": \"acs:ram::123456789012:root\"\n            }\n            \"Action\": [\n                \"kms:*\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        }\n    ]\n}\n```\n\nStatement详细介绍：\n- Sid：可选，表示自定义的语句标识符。内容长度小于等于128字符，支持的字符为：大写英文字母（A-Z）、小写英文字母（a-z）、数字（0-9），特殊字符（ _/+=.@-）。\n- Effect：必选，表示是允许还是拒绝该策略语句中的权限。取值为：Allow或Deny。\n\n- Principal：必选，表示权限策略的授权主体，支持设置为当前阿里云账号（即密钥所属的阿里云账号），当前阿里云账号下的RAM用户、RAM角色，其他阿里云账号下的RAM用户、RAM角色。\n\n- Action：必选，表示要允许或拒绝的API操作，内容必须以\"kms:\"开头。操作权限列表的范围，请参见[凭据策略概述](~~2716465~~)。如果您设置了列表外的操作，设置后也不会生效。\n\n- Resource：必选，取值只能是*，表示本KMS凭据。\n\n>授权给其他阿里云账号下的RAM用户、RAM角色后，您仍需在访问控制RAM侧，使用该RAM用户、RAM角色的阿里云账号为其授权使用该凭据，RAM用户、RAM角色才能使用该凭据。集体操作，请参见[密钥管理服务自定义权限策略参考](~~480682~~)、[为RAM用户授权](~~116146~~)、[为RAM角色授权](~~116147~~)。\n","type":"string","required":false,"example":"{\"Version\":\"1\",\"Statement\": [{\"Sid\":\"kms default secret policy\",\"Effect\":\"Allow\",\"Principal\":{\"RAM\": [\"acs:ram::119285303511****:*\"]},\"Action\":[\"kms:*\"],\"Resource\": [\"*\"] }] }"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"3bf02f7a-015b-4f93-be0f-cc043fda2dd3"},"AutomaticRotation":{"description":"是否开启自动轮转。取值：\n- Enabled：开启自动轮转。\n- Disabled：不开启自动轮转。\n- Invalid：轮转状态异常，凭据管家无法为您自动轮转。\n\n> SecretType取值为Rds、RAMCredentials或ECS时，返回该参数。","type":"string","example":"Enabled"},"SecretName":{"description":"凭据名称。","type":"string","example":"mydbconninfo"},"VersionId":{"description":"凭据版本号。","type":"string","example":"v1"},"NextRotationDate":{"description":"下一次轮转的时间。  \n> 当自动轮转开启时，返回该参数。","type":"string","example":"2023-07-06T18:22:03Z"},"SecretType":{"description":"凭据类型。取值：\n\n- Generic：通用凭据。  \n- Rds：RDS凭据。  \n\n- RAMCredentials：RAM凭据。  \n\n- ECS：ECS凭据。\n\n","type":"string","example":"Rds"},"RotationInterval":{"description":"凭据自动轮转的周期。    \n格式为`integer[unit]`，其中`integer`表示时间长度，`unit`表示时间单位。 `unit`取值：s（秒）。例如：7天的轮转周期为604800s。\n\n> 当自动轮转开启时，返回该参数。","type":"string","example":"604800s"},"Arn":{"description":"阿里云资源名称。","type":"string","example":"acs:kms:cn-hangzhou:154035569884****:secret/mydbconninfo"},"ExtendedConfig":{"description":"凭据的拓展配置。  \n\n> 当SecretType取值为Rds、RAMCredentials或ECS时，返回该参数。\n","type":"string","example":"{\\\"SecretSubType\\\":\\\"SingleUser\\\", \\\"DBInstanceId\\\":\\\"rm-uf667446pc955****\\\",  \\\"CustomData\\\":\"Key1\": \"v1\", \"fds\":\"fdsf\"} }"},"DKMSInstanceId":{"description":"KMS实例的实例ID。","type":"string","example":"kst-bjj62d8f5e0sgtx8h****"}}}}},"errorCodes":{"400":[{"errorCode":"UnsupportedOperation","errorMessage":"This action is not supported."},{"errorCode":"Rejected.LimitExceeded","errorMessage":"The request was rejected because user create resource limit was exceeded"},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is not valid."},{"errorCode":"Rejected.ShareQuotaExceedLimit","errorMessage":"Instance Share Quota Exceed Limit."}],"403":[{"errorCode":"Forbidden.DKMSInstanceNotFound","errorMessage":"The specified DKMS Instance is not found."}],"404":[{"errorCode":"Forbidden.ResourceNotFound","errorMessage":"The resource is not found."}],"409":[{"errorCode":"Rejected.ResourceExist","errorMessage":"The resource already exists."},{"errorCode":"Rejected.ResourceInDeleteWindow","errorMessage":"The secret is planned to be deleted."}],"500":[{"errorCode":"InternalFailure","errorMessage":"Internal  Failure"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"3bf02f7a-015b-4f93-be0f-cc043fda2dd3\\\",\\n  \\\"AutomaticRotation\\\": \\\"Enabled\\\",\\n  \\\"SecretName\\\": \\\"mydbconninfo\\\",\\n  \\\"VersionId\\\": \\\"v1\\\",\\n  \\\"NextRotationDate\\\": \\\"2023-07-06T18:22:03Z\\\",\\n  \\\"SecretType\\\": \\\"Rds\\\",\\n  \\\"RotationInterval\\\": \\\"604800s\\\",\\n  \\\"Arn\\\": \\\"acs:kms:cn-hangzhou:154035569884****:secret/mydbconninfo\\\",\\n  \\\"ExtendedConfig\\\": \\\"{\\\\\\\\\\\\\\\"SecretSubType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"SingleUser\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"DBInstanceId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"rm-uf667446pc955****\\\\\\\\\\\\\\\",  \\\\\\\\\\\\\\\"CustomData\\\\\\\\\\\\\\\":\\\\\\\"Key1\\\\\\\": \\\\\\\"v1\\\\\\\", \\\\\\\"fds\\\\\\\":\\\\\\\"fdsf\\\\\\\"} }\\\",\\n  \\\"DKMSInstanceId\\\": \\\"kst-bjj62d8f5e0sgtx8h****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateSecretResponse>\\n    <RequestId>3bf02f7a-015b-4f93-be0f-cc043fda2dd3</RequestId>\\n    <AutomaticRotation>Enabled</AutomaticRotation>\\n    <SecretName>mydbconninfo</SecretName>\\n    <VersionId>v1</VersionId>\\n    <NextRotationDate>2023-07-06T18:22:03Z</NextRotationDate>\\n    <SecretType>Rds</SecretType>\\n    <RotationInterval>604800s</RotationInterval>\\n    <Arn>acs:kms:cn-hangzhou:154035569884****:secret/mydbconninfo</Arn>\\n    <ExtendedConfig>{\\\\\\\"SecretSubType\\\\\\\":\\\\\\\"SingleUser\\\\\\\", \\\\\\\"DBInstanceId\\\\\\\":\\\\\\\"rm-uf667446pc955****\\\\\\\",  \\\\\\\"CustomData\\\\\\\":\\\"Key1\\\": \\\"v1\\\", \\\"fds\\\":\\\"fdsf\\\"} }</ExtendedConfig>\\n    <DKMSInstanceId>kst-bjj62d8f5e0sgtx8h****</DKMSInstanceId>\\n</CreateSecretResponse>\",\"errorExample\":\"\"}]","title":"创建凭据","description":"您需要指定凭据名称、初始版本的凭据值和版本号。初始版本的状态被标记为ACSCurrent。\n\nKMS使用您指定的密钥对凭据值进行加密保护，密钥和凭据需要属于同一个KMS实例，且密钥必须为对称密钥。\n\n>KMS对每个版本的凭据值进行加密，凭据名称、版本号、版本的状态标记等元数据不会被加密。\n\n您对凭据值进行加密前，需要具备密钥的`kms:GenerateDataKey`权限。    \n\n本文将提供一个示例，创建一个名称为`mydbconninfo`、初始版本号`VersionId`为`v1`、凭据值`SecretData`为`{\"Accounts\":[{\"AccountName\":\"user1\",\"AccountPassword\":\"****\"}]}`的RDS凭据。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~69007~~)。","responseParamsDescription":" ","extraInfo":" "}