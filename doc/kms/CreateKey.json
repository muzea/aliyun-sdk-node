{"summary":"调用CreateKey接口创建一个主密钥。","methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"54546","abilityTreeNodes":["FEATUREkmsZ5VV9Q"]},"parameters":[{"name":"Description","in":"query","schema":{"description":"密钥的描述。  \n长度为0~8192个字符。","type":"string","required":false,"example":"key description example"}},{"name":"KeyUsage","in":"query","schema":{"description":"密钥的用途。取值：  \n- ENCRYPT/DECRYPT：数据加密和解密。\n- SIGN/VERIFY：产生和验证数字签名。\n\n默认值：如果密钥支持签名验签，默认值为SIGN/VERIFY，否则默认值为ENCRYPT/DECRYPT。\n                           ","type":"string","required":false,"example":"ENCRYPT/DECRYPT","default":"ENCRYPT/DECRYPT"}},{"name":"Origin","in":"query","schema":{"description":"密钥材料来源。取值：  \n- Aliyun_KMS（默认值）：密钥材料由阿里云KMS生成。\n- EXTERNAL：密钥材料由您自行导入。\n\n\n> - 请注意区分大小写。\n- 默认密钥（主密钥）支持选择Aliyun_KMS或EXTERNAL；软件密钥管理实例中的密钥仅支持选择Aliyun_KMS；硬件密钥管理实例中的密钥支持选择Aliyun_KMS或EXTERNAL。\n- 如果选择EXTERNAL，您需要自行导入密钥材料。具体操作，请参见[导入对称密钥材料](~~607841~~)或[导入非对称密钥材料](~~608827~~)。","type":"string","required":false,"example":"Aliyun_KMS"}},{"name":"ProtectionLevel","in":"query","schema":{"description":"您无需输入本参数，KMS会为您的密钥设置合适的保护级别。\n\n密钥的保护级别，取值：  \n- SOFTWARE\n- HSM\n\n>- 如果指定了DKMSInstanceId：本参数输入后不生效。当实例为KMS软件密钥管理实例时，密钥保护级别为SOFTWARE；当实例为KMS硬件密钥管理实例时，密钥保护级别为HSM。\n- 如果未指定DKMSInstanceId：建议您不输入，由KMS设置。当KMS在该地域有托管密码机时，本参数将设置HSM，否则为SOFTWARE。更多信息，请参见[托管密码机概述](~~125803~~)。","type":"string","required":false,"example":"SOFTWARE"}},{"name":"EnableAutomaticRotation","in":"query","schema":{"description":"是否开启密钥自动轮转。取值：  \n- true：开启\n- false（默认值）：不开启\n\n仅当密钥所属的密钥管理类型支持自动轮转时，该参数值有效。具体内容，请参见[密钥轮转](~~2358146~~)。\n","type":"boolean","required":false,"example":"true"}},{"name":"RotationInterval","in":"query","schema":{"description":"自动轮转的时间周期。格式为integer\\[unit]，其中integer表示时间长度，unit表示时间单位。合法的unit单位为：d（天）、h（小时）、m（分钟）、s（秒）。7d或者604800s均表示7天的周期。\n\n- 当密钥为默认密钥时，取值为365天。\n\n- 当密钥为软件密钥时，取值为7~365天。\n\n- 当密钥为硬件密钥时，不支持自动轮转。\n\n> 当EnableAutomaticRotation参数为true时，必须设置此参数。","type":"string","required":false,"example":"365d"}},{"name":"KeySpec","in":"query","schema":{"description":"密钥规格，不同密钥管理类型的取值不同。关于密钥规格、遵循的标准、密钥算法的详细介绍，请参见[密钥管理类型和密钥规格](~~480161~~)。\n\n> 不输入参数值时，密钥规格默认为Aliyun\\_AES_256。\n\n","type":"string","required":false,"example":"Aliyun_AES_256"}},{"name":"DKMSInstanceId","in":"query","schema":{"description":"KMS实例的实例ID。\n\n>当您需要为KMS实例创建密钥时，必须指定本参数。当您需要创建默认密钥（主密钥）时，不需要指定本参数。\n","type":"string","required":false,"example":"kst-bjj62d8f5e0sgtx8h****"}},{"name":"Tags","in":"query","allowEmptyValue":true,"schema":{"description":"为密钥绑定标签。每个标签由一个键值对（Key:Value）组成，包含标签键（Key）、标签值（Value）。\n\n最多输入20个标签。输入多个标签时，格式为`[{\"TagKey\":\"key1\",\"TagValue\":\"value1\"},{\"TagKey\":\"key2\",\"TagValue\":\"value2\"},...]`。\n\n每个标签键（Key）和每个标签值（Value）最多支持128个字符，可以包含英文大小写字母、数字、正斜线（/）、反斜线（\\）、下划线（_）、短划线（-）、半角句号（.）、加号（+）、等于号（=）、半角冒号（:）、字符at（@）。\n>标签键不能以aliyun和acs:开头。","type":"string","required":false,"example":"[{\"TagKey\":\"disk-encryption\",\"TagValue\":\"true\"}]"}},{"name":"Policy","in":"query","allowEmptyValue":false,"schema":{"title":"","description":"密钥策略的具体内容，JSON格式。最大长度为32768个字节。\n关于密钥策略的详细介绍，请参见[密钥策略概述](~~2716468~~)。不输入该参数时，使用默认凭据策略。\n\n密钥策略内容包含：\n\n- Version：密钥策略的版本，目前版本仅支持设置为1。\n- Statement：密钥策略的语句，每个密钥策略包含一个或多个语句。\n\n密钥策略格式为：\n\n```\n{\n    \"Version\": \"1\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Enable RAM User Permissions\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n              \"RAM\": \"acs:ram::112890462****:root\"\n            }\n            \"Action\": [\n                \"kms:*\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        }\n    ]\n}\n```\n\nStatement详细介绍：\n- Sid：可选，表示自定义的语句标识符。内容长度小于等于128字符，支持的字符为：大写英文字母（A-Z）、小写英文字母（a-z）、数字（0-9），特殊字符（ _/+=.@-）。\n- Effect：必选，表示是允许还是拒绝该策略语句中的权限。取值为：Allow或Deny。\n\n- Principal：必选，表示权限策略的授权主体，支持设置为当前阿里云账号（即密钥所属的阿里云账号），当前阿里云账号下的RAM用户、RAM角色，其他阿里云账号下的RAM用户、RAM角色。\n\n- Action：必选，表示要允许或拒绝的API操作，内容必须以\"kms:\"开头。操作权限列表的范围，请参见[密钥策略概述](~~2716468~~)。如果您设置了列表外的操作，设置后也不会生效。\n\n- Resource：必选，取值只能是*，表示本KMS密钥。\n\n>授权给其他阿里云账号下的RAM用户、RAM角色后，您仍需在访问控制RAM侧，使用该RAM用户、RAM角色的阿里云账号为其授权使用该密钥，RAM用户、RAM角色才能使用该密钥。集体操作，请参见[密钥管理服务自定义权限策略参考](~~480682~~)、[为RAM用户授权](~~116146~~)、[为RAM角色授权](~~116147~~)。\n","type":"string","required":false,"example":"{\"Statement\":[{\"Action\":[\"kms:*\"],\"Effect\":\"Allow\",\"Principal\":{\"RAM\":[\"acs:ram::119285303511****:*\"]},\"Resource\":[\"*\"],\"Sid\":\"kms default key policy\"},{\"Action\":[\"kms:List*\",\"kms:Describe*\",\"kms:Create*\",\"kms:Enable*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Set*\",\"kms:Update*\",\"kms:Delete*\",\"kms:Cancel*\",\"kms:TagResource\",\"kms:UntagResource\",\"kms:ImportKeyMaterial\",\"kms:ScheduleKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"RAM\":[\"acs:ram::119285303511****:user/for_test_policy\"]},\"Resource\":[\"*\"]}],\"Version\":\"1\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次调用请求的ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"381D5D33-BB8F-395F-8EE4-AE3BB4B523C4"},"KeyMetadata":{"description":"密钥的元数据。","type":"object","properties":{"KeyId":{"description":"密钥的全局唯一标识符。","type":"string","example":"key-hzz62f1cb66fa42qo****"},"NextRotationDate":{"description":"密钥下一次轮转的时间。  \n\n仅当AutomaticRotation参数值为Enabled或Suspended时，才返回该值。","type":"string","example":"2024-03-25T10:00:00Z"},"KeyState":{"description":"密钥的状态。  \n更多信息，请参见[用户主密钥的状态对API调用的影响](~~44211~~)。","type":"string","example":"Enabled"},"RotationInterval":{"description":"密钥自动轮转的周期。单位为秒，格式为整数值后加上字符s。例如：7天的轮转周期为604800s。\n\n仅当AutomaticRotation参数值为Enabled或Suspended时，才返回该值。","type":"string","example":"31536000s"},"Arn":{"description":"密钥的ARN。","type":"string","example":"acs:kms:cn-qingdao:154035569884****:key/key-hzz62f1cb66fa42qo****"},"Creator":{"description":"密钥的创建者。","type":"string","example":"154035569884****"},"LastRotationDate":{"description":"最近一次轮转的时间（UTC）。  \n如果是新创建密钥，则为初始密钥版本生成时间。","type":"string","example":"2023-03-25T10:00:00Z"},"DeleteDate":{"description":"密钥的预计删除时间。 更多信息，请参见[ScheduleKeyDeletion](~~601417~~)。\n\n仅当KeyState值为PendingDeletion时，才返回该参数。","type":"string","example":"2025-03-25T10:00:00Z"},"PrimaryKeyVersion":{"description":"密钥的当前主版本标识符。  \n","type":"string","example":"7ce1d081-06cb-42e6-aab6-5c5de030****"},"Description":{"description":"密钥的描述。","type":"string","example":"key description example"},"KeySpec":{"description":"密钥的规格。","type":"string","example":"Aliyun_AES_256"},"Origin":{"description":"密钥材料来源。\n","type":"string","example":"Aliyun_KMS"},"MaterialExpireTime":{"description":"密钥材料的过期时间（UTC）。  \n当该值为空时，表示密钥材料不会过期。","type":"string","example":"2025-03-25T10:00:00Z"},"AutomaticRotation":{"description":"是否开启了密钥自动轮转，取值：\n\n- Enabled：自动轮转处于开启状态。\n- Disabled：自动轮转处于未开启状态。\n- Suspended：自动轮转被暂停执行。","type":"string","example":"Enabled"},"ProtectionLevel":{"description":"密钥的保护级别。","type":"string","example":"SOFTWARE"},"KeyUsage":{"description":"密钥的用途。","type":"string","example":"ENCRYPT/DECRYPT"},"CreationDate":{"description":"密钥创建的日期和时间（UTC）。","type":"string","example":"2024-03-25T10:00:00Z"},"DKMSInstanceId":{"description":"KMS实例的实例ID。","type":"string","example":"kst-bjj62d8f5e0sgtx8h****"}}}}}}},"errorCodes":{"400":[{"errorCode":"Rejected.LimitExceeded","errorMessage":"The request was rejected because user create resource limit was exceeded"},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is not valid."},{"errorCode":"UnsupportedOperation","errorMessage":"This action is not supported."},{"errorCode":"Forbidden.NoPermission","errorMessage":"This operation is forbidden by permission system."},{"errorCode":"Rejected.ShareQuotaExceedLimit","errorMessage":"Instance Share Quota Exceed Limit."}],"403":[{"errorCode":"Forbidden.DKMSInstanceNotFound","errorMessage":"The specified DKMS Instance is not found."}],"500":[{"errorCode":"InternalFailure","errorMessage":"Internal  Failure"}],"503":[{"errorCode":"SerivceUnvailableTemporary","errorMessage":"Service Unvailable Temporary"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"381D5D33-BB8F-395F-8EE4-AE3BB4B523C4\\\",\\n  \\\"KeyMetadata\\\": {\\n    \\\"KeyId\\\": \\\"key-hzz62f1cb66fa42qo****\\\",\\n    \\\"NextRotationDate\\\": \\\"2024-03-25T10:00:00Z\\\",\\n    \\\"KeyState\\\": \\\"Enabled\\\",\\n    \\\"RotationInterval\\\": \\\"31536000s\\\",\\n    \\\"Arn\\\": \\\"acs:kms:cn-qingdao:154035569884****:key/key-hzz62f1cb66fa42qo****\\\",\\n    \\\"Creator\\\": \\\"154035569884****\\\",\\n    \\\"LastRotationDate\\\": \\\"2023-03-25T10:00:00Z\\\",\\n    \\\"DeleteDate\\\": \\\"2025-03-25T10:00:00Z\\\",\\n    \\\"PrimaryKeyVersion\\\": \\\"7ce1d081-06cb-42e6-aab6-5c5de030****\\\",\\n    \\\"Description\\\": \\\"key description example\\\",\\n    \\\"KeySpec\\\": \\\"Aliyun_AES_256\\\",\\n    \\\"Origin\\\": \\\"Aliyun_KMS\\\",\\n    \\\"MaterialExpireTime\\\": \\\"2025-03-25T10:00:00Z\\\",\\n    \\\"AutomaticRotation\\\": \\\"Enabled\\\",\\n    \\\"ProtectionLevel\\\": \\\"SOFTWARE\\\",\\n    \\\"KeyUsage\\\": \\\"ENCRYPT/DECRYPT\\\",\\n    \\\"CreationDate\\\": \\\"2024-03-25T10:00:00Z\\\",\\n    \\\"DKMSInstanceId\\\": \\\"kst-bjj62d8f5e0sgtx8h****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateKeyResponse>\\n    <RequestId>381D5D33-BB8F-395F-8EE4-AE3BB4B523C4</RequestId>\\n    <KeyMetadata>\\n        <KeyId>key-hzz62f1cb66fa42qo****</KeyId>\\n        <NextRotationDate>2024-03-25T10:00:00Z</NextRotationDate>\\n        <KeyState>Enabled</KeyState>\\n        <RotationInterval>31536000s</RotationInterval>\\n        <Arn>acs:kms:cn-qingdao:154035569884****:key/key-hzz62f1cb66fa42qo****</Arn>\\n        <Creator>154035569884****</Creator>\\n        <LastRotationDate>2023-03-25T10:00:00Z</LastRotationDate>\\n        <DeleteDate>2025-03-25T10:00:00Z</DeleteDate>\\n        <PrimaryKeyVersion>7ce1d081-06cb-42e6-aab6-5c5de030****</PrimaryKeyVersion>\\n        <Description>key description example</Description>\\n        <KeySpec>Aliyun_AES_256</KeySpec>\\n        <Origin>Aliyun_KMS</Origin>\\n        <MaterialExpireTime>2025-03-25T10:00:00Z</MaterialExpireTime>\\n        <AutomaticRotation>Enabled</AutomaticRotation>\\n        <ProtectionLevel>SOFTWARE</ProtectionLevel>\\n        <KeyUsage>ENCRYPT/DECRYPT</KeyUsage>\\n        <CreationDate>2024-03-25T10:00:00Z</CreationDate>\\n        <DKMSInstanceId>kst-bjj62d8f5e0sgtx8h****</DKMSInstanceId>\\n    </KeyMetadata>\\n</CreateKeyResponse>\",\"errorExample\":\"\"}]","title":"创建一个主密钥","description":"阿里云KMS支持常见的对称密钥规格和非对称密钥规格。具体内容，请参见[密钥管理类型和密钥规格](~~480161~~)。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~69007~~)。","responseParamsDescription":" ","extraInfo":" "}