{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{},"parameters":[{"name":"OrgId","in":"formData","schema":{"description":"数据来源机构代码。","type":"string","required":true,"example":"0001"}},{"name":"OrgName","in":"formData","schema":{"description":"数据来源机构名称。","type":"string","required":true,"example":"weiyi"}},{"name":"SessionId","in":"formData","schema":{"description":"会话ID。首次发送主诉信息时无需填写SessionId，当**QuestionType**为`chiefComplaint`时算首次问诊。首次调用后返回结果中显示对应SessionId，后续问诊时SessionId为必填项。即当**QuestionType**非`chiefComplaint`时，此项为必填项。\n\n> 一次问诊对应一个SessionId，一次问诊会有多轮次对话，每个轮次都对应当前这个问诊的唯一SessionId。问诊有效期为24小时，24小时后SessionId失效。","type":"string","required":false,"example":"d1f6a6c2444f4c01adfadd413938e5c7"}},{"name":"Department","in":"formData","schema":{"description":"代表医院科室。\n\n> 当前服务版本仅支持**皮肤科**。","type":"string","required":true,"example":"皮肤科"}},{"name":"QuestionType","in":"formData","schema":{"description":"问题类型。取值如下：\n\n- chiefComplaint：主诉\n- age：年龄\n- bodyParts：部位\n- symptoms：症状\n- complications：并发症\n- diseaseCourse：病程\n- diseaseHistory：疾病史\n- medications：用药史\n- allegries：过敏史\n- images：皮损图片\n- reports：报告\n\n> 首次问诊，**QuestionType**不能为空，且必须为`images`类型，**sessionId**可为空。","type":"string","required":true,"example":"chiefComplaint"}},{"name":"AnswerImageURLList","in":"formData","style":"repeatList","schema":{"description":"待检测皮肤病图像的URL地址列表。最多支持添加50条。","type":"array","items":{"description":"1","type":"object","properties":{"AnswerImageURL":{"description":"待检测皮肤病图像的URL地址。最多支持添加50条。推荐使用上海地域的OSS链接，对于文件在本地或者非上海地域OSS链接的情况，请参见[文件URL处理](~~155645~~)。\n\n> 当**QuestionType**为`images`时必填。**AnswerImageURL**和**AnswerImageData**建议二选一，当与Base64编码方式共存时，URL方式优先。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。","type":"string","required":false,"example":"https://viapi-oss.oss-cn-shanghai.aliyuncs.com/doc/imageprocess/roseola.jpeg","isFileTransferUrl":true}},"required":false},"required":false,"maxItems":50}},{"name":"AnswerImageDataList","in":"formData","style":"repeatList","schema":{"description":"待检测皮肤病图像的Base64编码字符串列表。最多支持添加50条。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。","type":"array","items":{"description":"1","type":"object","properties":{"AnswerImageData":{"description":"待检测皮肤病图像的Base64编码字符串。最多支持添加50条。文件的Base64编码处理操作，请参见[文件Base64处理](~~468191~~)。\n> 当**QuestionType**为`images`时必填。**AnswerImageURL**和**AnswerImageData**建议二选一，当与URL方式共存时，URL方式优先。","type":"string","required":false,"example":"iVBORw0KGgoAAAANSUhEUgAAAoAAAAHJCAIAAACaEB9NAAEAAElEQVR4nNT9Wb****"}},"required":false},"required":false,"maxItems":50}},{"name":"AnswerTextList","in":"formData","style":"repeatList","schema":{"description":"患者的主诉或回答列表。最多支持添加50条。","type":"array","items":{"description":"1","type":"object","properties":{"AnswerText":{"description":"患者的主诉或回答列表。最多支持添加50条。","type":"string","required":false,"example":"起了好多红疙瘩流脓，痒死了，晚上痒的最厉害，怎么办啊？"}},"required":false},"required":false,"maxItems":50}}],"responses":{"200":{"schema":{"description":"1","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"BFF7EEC3-F6B5-4387-AC1D-BB095A1A02E4"},"Data":{"description":"返回的结果数据内容。","type":"object","properties":{"SessionId":{"description":"会话ID。","type":"string","example":"d1f6a6c2444f4c01adfadd413938e5c7"},"QuestionType":{"description":"问题类型。","type":"string","example":"age"},"Question":{"description":"补充追问问题。当**QuestionType**为`images`时，无返回值。","type":"string","example":"你好，还需要你补充些其他信息，年龄多大了？"},"AnswerType":{"description":"选项类型。默认为text。\n\n- text：文本\n- single：单选\n- multiple：多选","type":"string","example":"text"},"Options":{"description":"单选和多选问题的选项。当**AnswerType**为`single`或`multiple`时有返回值，为`text`时无返回值。","type":"array","items":{"description":"问题选项。","type":"string","example":"\"发烧\",\"呼吸困难\",\"关节疼痛\",\"腹泻\",\"头痛\",\"无\""}},"Reports":{"description":"预问诊信息结构化报表。当**QuestionType**为`images`时（即问诊流程最后一步），才有返回值。","type":"object","additionalProperties":{"type":"string","description":"预问诊信息结构化报表。\nReports中对应的key-value值如下表所示。","example":"\"diagResults\": [         \"多形红斑\",         \"玫瑰糠疹\",         \"急性荨麻疹\"       ],       \"diagProb\": {         \"多形红斑\": 0.992,         \"急性荨麻疹\": 0.0019,         \"玫瑰糠疹\": 0.0053       }"}}}}}}}},"errorCodes":{"400":[{"errorCode":"ParameterError","errorMessage":"The parameter is invalid. Please check again."}],"403":[{"errorCode":"AuthFailed","errorMessage":"An error occurred while performing authorization. Please check your RAM configuration."}],"408":[{"errorCode":"Timeout","errorMessage":"The request has timed out."}],"503":[{"errorCode":"ServiceUnavailable","errorMessage":"The service is unavailable."}]},"staticInfo":{},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"BFF7EEC3-F6B5-4387-AC1D-BB095A1A02E4\\\",\\n  \\\"Data\\\": {\\n    \\\"SessionId\\\": \\\"d1f6a6c2444f4c01adfadd413938e5c7\\\",\\n    \\\"QuestionType\\\": \\\"age\\\",\\n    \\\"Question\\\": \\\"你好，还需要你补充些其他信息，年龄多大了？\\\",\\n    \\\"AnswerType\\\": \\\"text\\\",\\n    \\\"Options\\\": [\\n      \\\"\\\\\\\"发烧\\\\\\\",\\\\\\\"呼吸困难\\\\\\\",\\\\\\\"关节疼痛\\\\\\\",\\\\\\\"腹泻\\\\\\\",\\\\\\\"头痛\\\\\\\",\\\\\\\"无\\\\\\\"\\\"\\n    ],\\n    \\\"Reports\\\": {\\n      \\\"key\\\": \\\"\\\\\\\"diagResults\\\\\\\": [         \\\\\\\"多形红斑\\\\\\\",         \\\\\\\"玫瑰糠疹\\\\\\\",         \\\\\\\"急性荨麻疹\\\\\\\"       ],       \\\\\\\"diagProb\\\\\\\": {         \\\\\\\"多形红斑\\\\\\\": 0.992,         \\\\\\\"急性荨麻疹\\\\\\\": 0.0019,         \\\\\\\"玫瑰糠疹\\\\\\\": 0.0053       }\\\"\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<RunMedQAResponse>\\n    <RequestId>5AC38357-6B32-508E-A8AE-3BB891A6D2E8</RequestId>\\n    <Data>\\n        <QuestionType>chiefComplaint</QuestionType>\\n        <Reports>\\n            <bbox>\\n                <score>0.8148</score>\\n                <y1>1</y1>\\n                <x1>20</x1>\\n                <y2>355</y2>\\n                <x2>534</x2>\\n            </bbox>\\n            <diagResults>多形红斑</diagResults>\\n            <diagResults>玫瑰糠疹</diagResults>\\n            <diagResults>急性荨麻疹</diagResults>\\n            <diagProb>\\n                <多形红斑>0.992</多形红斑>\\n                <急性荨麻疹>0.0019</急性荨麻疹>\\n                <玫瑰糠疹>0.0053</玫瑰糠疹>\\n            </diagProb>\\n        </Reports>\\n        <Question>请描述一下您的病情？</Question>\\n        <AnswerType>text</AnswerType>\\n        <SessionId>7fa1fcaa9a5845d5906f5648d6de284f</SessionId>\\n    </Data>\\n    <Code/>\\n</RunMedQAResponse>\",\"errorExample\":\"\"}]","title":"医学智能问答","summary":"本文介绍医学智能问答RunMedQA的语法及示例。","description":"## 功能描述 \n医学智能问答能力面向皮肤病预问诊场景，通过多轮对话和图像收集的方式，完成皮肤病相关的预问诊信息收集，并输出结构化的预问诊报告，预测潜在皮肤病。采集的问诊信息主要包括以下内容：\n\n- 基本信息，如主诉、年龄、部位等。\n- 病情，如症状、并发症、病程等。\n- 病史相关，如疾病史、用药史、过敏史等。\n- 非结构化信息，如皮损图片等。\n\n> - 您可以进入[在线咨询](https://www.aliyun.com/core/online-consult?from=aZgW6LJHr2)获取在线人工帮助。\n- 阿里云视觉智能开放平台视觉AI能力API接入、接口使用或问题咨询等，请通过钉钉群（23109592）加入阿里云视觉智能开放平台咨询群联系我们。\n\n## 应用场景\n面向皮肤病预问诊场景，采用多轮对话的方式，完成问诊信息采集。\n\n## 特色优势\n- 会话流程简洁、智能，便于集成到用户应用中。\n- 问诊信息抽取能力准确高效，结合多模态皮肤病预测技术，自动化生成病例报告和潜在疾病诊断，可有效降低问诊时间成本。\n\n## 接入指引\n1. 注册阿里云账号：打开[阿里云官网](https://www.aliyun.com)，在阿里云官网右上角，单击**立即注册**，按照操作提示完成账号注册。\n2. 开通能力：请确保您已开通[图像分析处理](https://vision.aliyun.com/imageprocess)，若未开通服务请[立即开通](https://common-buy.aliyun.com/?commodityCode=viapi_imageprocess_public_cn#/open )。\n3. 创建AccessKey：请确保您已[创建AccessKey](~~175144~~)，如果您使用的是子账号AccessKey，您需要给子账号赋予AliyunVIAPIFullAccess权限，具体操作，请参见[RAM授权](~~145025~~)。\n4. 在线调试（可选）：您可以通过[OpenAPI Explorer](https://next.api.aliyun.com/api/imageprocess/2020-03-20/RunMedQA?lang=JAVA)在线调试能力，查看完整的调用示例代码及SDK依赖信息，也可以下载完整的工程。\n5. 开发接入步骤：\n- 在[SDK总览](~~145033~~)中选择您要接入使用的SDK语言。\n- 在对应语言的SDK文档中找到AI类目为图像分析处理（imageprocess）的SDK包进行安装。\n- 参考文档中提供的示例代码进行适当修改后调用。\n\n6. 客户端直接调用：该能力常用的客户端调用方式包括以下几种。\n- [Web前端直接调用](~~467779~~)\n- [小程序场景下直接调用](~~467780~~)\n- [Android端直接调用](~~467781~~)\n- [iOS端直接调用](~~467782~~)\n\n## 输入限制\n\n- 图像格式：JPEG、JPG、PNG、BMP。\n- 图像大小：不超过3 MB。\n- 图像分辨率：大于256×256像素，小于2048×2048像素。\n- URL地址中不能包含中文字符。\n- 问题内容字数不能超过500字。","responseParamsDescription":"## 参数补充说明\n| key              | value类型   | 是否有返回值             | 中文描述 |\n| ---------------- | ------------- | ------------------------------ | -------- |\n| symptoms         | List<String>  | 是                            | 症状   |\n| complications    | List<String>  | 是                            | 并发症 |\n| diseaseHistory   | List<String>  | 是                            | 疾病史 |\n| medications      | List<String>  | 是                            | 用药史 |\n| allegries        | List<String>  | 是                            | 过敏史 |\n| bodyParts        | List<String>  | 是                            | 部位   |\n| diseaseCourse    | List<String>  | 是                            | 病程   |\n| age              | List<String>  | 是                            | 年龄   |\n| formDistribution | List<String>  | 否（非模板必须，算法抽取出的） | 形态分布 |\n| images           | List<String>  | 是                            | 图片   |\n| diagResults      | List<String>  | 是                            | 诊断结果 |\n| diagProb         | Map           | 是                            | 诊断概率 |\n| bbox             | List<Obeject> | 是                            | 病灶区域 |\n\n## SDK参考\n阿里云视觉AI图像分析处理类目下的医学智能问答能力推荐使用SDK调用，支持多种编程语言，调用时请选择AI类目为图像分析处理（imageprocess）的SDK包，文件参数通过SDK调用可支持本地文件及任意URL，具体可参见[SDK总览](~~145033~~)。","extraInfo":"## 错误码\n关于医学智能问答的错误码。详情请参见[常见错误码](~~159693~~)。\n\n## 安全声明\n- 请确保上传的图片或文件来源符合相应的法律法规。\n- 通过体验调试上传的临时文件有效期为1小时，在24小时后会被系统自动清理删除。"}