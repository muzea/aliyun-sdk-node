{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":" 实例ID。 \n> 如果是分片集群实例，您还需要配置`NodeId`。","type":"string","required":true,"example":"dds-bp1fc7e65108****"}},{"name":"NodeId","in":"query","schema":{"description":" Shard节点ID。 \n\n> 如果`DBInstanceId`配置的是分片集群实例的ID，需要配置该参数。","type":"string","required":false,"example":"d-bp18b06ebc21****"}},{"name":"StartTime","in":"query","schema":{"description":" 查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":true,"example":"2021-08-15T14:13Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。\n\n> - 必须晚于查询开始时间。\n> - 查询结束时间距查询开始时间不得超过24个小时，超过则调用失败。","type":"string","required":true,"example":"2021-08-16T14:13Z"}},{"name":"DBName","in":"query","schema":{"description":"数据库名。","type":"string","required":false,"example":"mongodbtest"}},{"name":"QueryKeywords","in":"query","schema":{"description":"查询关键字，多个关键字以空格分隔，不超过10个关键字。","type":"string","required":false,"example":"test test1"}},{"name":"LogicalOperator","in":"query","schema":{"description":"关键字搜索的逻辑操作， 默认值为and。","type":"string","required":false,"example":"and","default":"and","enum":["and","or"]}},{"name":"PageSize","in":"query","schema":{"description":" 每页记录数，取值范围为**30**~**100**。 ","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"30","example":"30","default":"30"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，取值为大于0且不超过Integer数据类型的最大值，默认值为**1**。","type":"integer","format":"int32","required":false,"maximum":"2147483647","minimum":"1","example":"1","default":"1"}},{"name":"OrderType","in":"query","schema":{"description":"按时间的升降序对查询到的慢日志进行排序。取值如下：\n- asc：按时间升序排序。\n- desc：按时间降序排序。","type":"string","required":false,"example":"asc","default":"desc","enum":["desc","asc"]}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。\n","type":"string","required":false,"example":"rg-acfmyiu4ekp****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"TotalRecordCount":{"description":" 总记录数。 ","type":"integer","format":"int32","example":"1"},"PageRecordCount":{"description":"本页慢操作日志明细的个数。","type":"integer","format":"int32","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"8076C4BA-DDBD-529C-BFF4-D8620C3F****"},"PageNumber":{"description":"页码，取值为大于0且不超过Integer数据类型的最大值，默认值为**1**。","type":"integer","format":"int32","example":"1"},"Items":{"type":"object","properties":{"LogRecords":{"description":"慢日志明细列表。","type":"array","items":{"type":"object","properties":{"ExecutionStartTime":{"description":"操作执行的开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2019-02-25T 01:41:28Z"},"HostAddress":{"description":"连接数据库的主机地址。","type":"string","example":"192.168.XX.XX"},"QueryTimes":{"description":"该语句的执行时长，单位为毫秒。","type":"string","example":"600"},"TableName":{"description":"MongoDB的集合名称。","type":"string","example":"C1"},"SQLText":{"description":"慢操作执行的语句。","type":"string","example":"{\\\"op\\\":\\\"query\\\",\\\"ns\\\":\\\"mongodbtest.customer\\\",\\\"query\\\":{\\\"find\\\":\\\"customer\\\",\\\"filter\\\":{\\\"name\\\":\\\"jack\\\"}}}"},"ReturnRowCounts":{"description":"返回行数。","type":"integer","format":"int64","example":"0"},"KeysExamined":{"description":"索引扫描行数。","type":"integer","format":"int64","example":"0"},"DBName":{"description":"数据库名。","type":"string","example":"mongodbtest"},"DocsExamined":{"description":"该操作执行时扫描的文档数。","type":"integer","format":"int64","example":"1000000"},"AccountName":{"description":"执行该操作的数据库用户名。","type":"string","example":"test"}}}}}},"Engine":{"description":"当前数据库的引擎类型。","type":"string","example":"MongoDB"}}}}},"errorCodes":{"400":[{"errorCode":"IncorrectCharacterType","errorMessage":"Current DB instance CharacterType does not support this operation."},{"errorCode":"InvalidParameterCombination","errorMessage":"The end time must be greater than the start time"},{"errorCode":"InvalidStartTime.Malformed","errorMessage":"The Specified parameter StartTime is not valid."},{"errorCode":"InvalidEndTime.Malformed","errorMessage":"The Specified parameter EndTime is not valid."}],"403":[{"errorCode":"LogApiFrequencyExceeded","errorMessage":"Exceeding the allowed frequency of log api."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TotalRecordCount\\\": 1,\\n  \\\"PageRecordCount\\\": 1,\\n  \\\"RequestId\\\": \\\"8076C4BA-DDBD-529C-BFF4-D8620C3F****\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"Items\\\": {\\n    \\\"LogRecords\\\": [\\n      {\\n        \\\"ExecutionStartTime\\\": \\\"2019-02-25T 01:41:28Z\\\",\\n        \\\"HostAddress\\\": \\\"192.168.XX.XX\\\",\\n        \\\"QueryTimes\\\": \\\"600\\\",\\n        \\\"TableName\\\": \\\"C1\\\",\\n        \\\"SQLText\\\": \\\"{\\\\\\\\\\\\\\\"op\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"query\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ns\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"mongodbtest.customer\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"query\\\\\\\\\\\\\\\":{\\\\\\\\\\\\\\\"find\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"customer\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"filter\\\\\\\\\\\\\\\":{\\\\\\\\\\\\\\\"name\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"jack\\\\\\\\\\\\\\\"}}}\\\",\\n        \\\"ReturnRowCounts\\\": 0,\\n        \\\"KeysExamined\\\": 0,\\n        \\\"DBName\\\": \\\"mongodbtest\\\",\\n        \\\"DocsExamined\\\": 1000000,\\n        \\\"AccountName\\\": \\\"test\\\"\\n      }\\n    ]\\n  },\\n  \\\"Engine\\\": \\\"MongoDB\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSlowLogRecordsResponse>\\n    <TotalRecordCount>1</TotalRecordCount>\\n    <PageRecordCount>1</PageRecordCount>\\n    <RequestId>8076C4BA-DDBD-529C-BFF4-D8620C3F****</RequestId>\\n    <PageNumber>1</PageNumber>\\n    <Items>\\n        <LogRecords>\\n            <TableName>$cmd</TableName>\\n            <QueryTimes>944</QueryTimes>\\n            <ExecutionStartTime>2021-08-15T21:08:36Z</ExecutionStartTime>\\n            <DBName>admin</DBName>\\n            <HostAddress>11.61.195.204</HostAddress>\\n            <SQLText>{\\\"op\\\":\\\"command\\\",\\\"ns\\\":\\\"admin.$cmd\\\",\\\"command\\\":{\\\"isMaster\\\":1,\\\"client\\\":{\\\"driver\\\":{\\\"name\\\":\\\"mgo\\\",\\\"version\\\":\\\"vinllen\\\"},\\\"os\\\":{\\\"type\\\":\\\"linux\\\",\\\"architecture\\\":\\\"amd64\\\"}},\\\"$readPreference\\\":{\\\"mode\\\":\\\"secondaryPreferred\\\"},\\\"$db\\\":\\\"admin\\\"},\\\"numYield\\\":0,\\\"locks\\\":{},\\\"flowControl\\\":{},\\\"responseLength\\\":748,\\\"protocol\\\":\\\"op_query\\\",\\\"millis\\\":944,\\\"replRole\\\":{\\\"stateStr\\\":\\\"SECONDARY\\\",\\\"_id\\\":1}}</SQLText>\\n        </LogRecords>\\n    </Items>\\n    <Engine>MongoDB</Engine>\\n</DescribeSlowLogRecordsResponse>\",\"errorExample\":\"\"}]","title":"查询实例运行出现的慢操作日志明细","summary":"查询MongoDB实例运行出现的慢日志明细。","description":"- 本接口仅适用于规格类型为**通用型本地盘版**,**独享型本地盘版**和**独享型云盘版**实例。\n- 本接口限制每分钟调用30次，如超过这个限制会被限流，请勿高频调用。如需高频调用，请使用Logstore，详情请参见[管理Logstore](~~48990~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}