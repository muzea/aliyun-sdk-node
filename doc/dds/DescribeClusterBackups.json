{"summary":"查询云数据库 MongoDB 版云盘版分片集群的集群备份集列表。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","riskType":"none","chargeType":"free","abilityTreeCode":"190126","abilityTreeNodes":["FEATUREmongodbPMIDED"]},"parameters":[{"name":"DBInstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"dds-bp16cb162771****"}},{"name":"BackupId","in":"query","schema":{"description":"集群备份ID。","type":"string","required":false,"example":"5664****"}},{"name":"PageNo","in":"query","schema":{"description":"分页页号。默认值为**1**，取值范围为正整数。","type":"integer","format":"int32","required":false,"minimum":"1","example":"1","default":"1"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值：\n\n- **30**（默认值）\n- **50**\n- **100**","type":"integer","format":"int32","required":false,"example":"30","default":"20","enum":["30","50","100","10","20","5"]}},{"name":"StartTime","in":"query","schema":{"description":"查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":false,"example":"2019-03-13T12:11Z"}},{"name":"EndTime","in":"query","schema":{"description":"查询结束时间，必须晚于查询开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm</i>Z（UTC时间）。","type":"string","required":false,"example":"2019-03-14T13:10Z"}},{"name":"IsOnlyGetClusterBackUp","in":"query","schema":{"title":"","description":"是否查询集群备份下的子节点信息。取值说明：\n- **true**：只返回集群备份基本信息，不返回全量的子节点的备份信息。\n- **false**（默认 ）：返回全量的子节点的备份信息。","type":"boolean","required":false,"example":"true","default":"flase"}},{"name":"SrcRegion","in":"query","schema":{"description":"实例所在地域。\n\n> - 查询已释放实例的备份集列表式，该参数必填。\n> - 查询异地备份时，该参数必填。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"DestRegion","in":"query","schema":{"description":"异地备份所在地域。\n\n> 查询异地备份时，该参数必填。","type":"string","required":false,"example":"cn-shanghai"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"2F42BB4E-461F-5B55-A37C-53B1141C****"},"MaxResults":{"title":"MaxResults本次请求所返回的最大记录条数","description":"本次请求所返回的最大记录条数。","type":"integer","format":"int32","example":"10"},"PageNumber":{"title":"第几页，同请求参数","description":"页码。","type":"integer","format":"int32","example":"1"},"PageSize":{"title":"一页最大多少条记录，同请求参数","description":"每页最大记录数量。","type":"integer","format":"int32","example":"30"},"ClusterBackups":{"title":"集群备份集列表，一个集群备份里面包含各个节点的备份集","description":"集群备份集列表，一个集群备份里面包含各个节点的备份集。","type":"array","items":{"description":"集群备份集列表，一个集群备份里面包含各个节点的备份集。","type":"object","properties":{"IsAvail":{"title":"集群备份集是否有效，子节点的备份集未完成或者失败时，为0","description":"集群备份集是否有效，取值说明：\n- **1**：集群的备份集有效。\n- **0**：子节点的备份集未完成或者失败。","type":"integer","format":"int32","example":"1"},"ClusterBackupId":{"title":"集群备份集ID","description":"集群备份集ID。","type":"string","example":"cb-o8c2ugnxo26kx***"},"ClusterBackupStatus":{"title":"集群备份集状态","description":"集群备份集状态。","type":"string","example":"OK"},"ClusterBackupStartTime":{"description":"集群备份开始时间。","type":"string","example":"2023-10-16T19:33:20Z"},"ClusterBackupSize":{"title":"集群备份集大小","description":"集群备份集大小，单位为Byte。","type":"string","example":"107374182400"},"ClusterBackupEndTime":{"description":"集群备份结束时间。","type":"string","example":"2023-10-16T19:33:20Z"},"ClusterBackupMode":{"description":"集群备份模式。","type":"string","example":"Automated"},"ExtraInfo":{"description":"补充信息，为JSON格式。","type":"object","properties":{"RegistryFromHistory":{"title":"为1表示从历史备份集中迁移过来","description":"是否来自于历史备份集，为**1**则表示是从历史备份集迁移过来的。","type":"string","example":"1"}}},"Backups":{"title":"单个集群备份集下，各个子节点的备份集集合","description":"单个集群备份集下，各个子节点的备份集集合。","type":"array","items":{"description":"单个集群备份集下，各个子节点的备份集集合。","type":"object","properties":{"BackupId":{"description":"备份ID。","type":"string","example":"738025367"},"InstanceName":{"description":"MongoDB分片名称。","type":"string","example":"d-bp16cb162771****\n"},"BackupDownloadURL":{"description":"备份文件的外网下载地址，若当前不可下载，则返回为空字符串。","type":"string","example":"http://oss.com/xxx"},"BackupIntranetDownloadURL":{"description":"内网下载地址，若当前不可下载，则返回空值。","type":"string","example":"http://oss.com/xxx"},"BackupStartTime":{"description":"本次备份开始时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2023-10-16T19:33:20Z"},"BackupEndTime":{"description":"本次备份结束时间，格式为<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。","type":"string","example":"2023-10-16T19:33:20Z"},"BackupSize":{"description":"备份文件大小，单位为Byte。","type":"string","example":"77544597650"},"IsAvail":{"description":"备份集是否可用，取值说明：\n* **0**：不可用。\n* **1**：可用。","type":"string","example":"1"},"BackupStatus":{"description":"备份状态，取值说明：\n- **Success**：备份成功。\n- **Failed**：备份失败。","type":"string","example":"Success"},"BackupName":{"description":"备份名称。","type":"string","example":"12345678.tar.gz"},"ExtraInfo":{"description":"备份关联的实例节点信息。","type":"object","properties":{"NodeId":{"description":"节点ID。","type":"string","example":"d-2ze75ab1fa5d****"},"StorageSize":{"description":"节点的存储空间大小，单位为MB。","type":"string","example":"20480"},"InstanceClass":{"description":"节点规格。","type":"string","example":"mdb.shard.4x.large.d"},"NodeType":{"description":"节点类型。","type":"string","example":"db"}}}}}},"Progress":{"title":"备份进度，仅正在运行的备份才会显示进度","description":"备份进度，单位为%。\n仅正在运行的备份才会显示进度。","type":"string","example":"50"},"AttachLogStatus":{"description":"备份的状态，取值如下：\n- **Init**：初始化。\n- **No_Need**：无附加日志备份。\n- **Running**：附加日志备份中。\n- **Ready**：附加日志备份完成。\n- **Failed**：附加日志备份失败。\n\n> 当**ClusterBackupStatus**参数（集群备份集的状态）的值为OK时，仅表示全量备份阶段执行成功了，对于开启了日志备份的集群实例，想要使用按时间点恢复或满足一致性恢复的效果时，需要附加日志备份完成。","type":"string","example":"Ready"}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidStartTime.Malformed","errorMessage":"The Specified parameter StartTime is not valid."},{"errorCode":"InvalidEndTime.Malformed","errorMessage":"The Specified parameter EndTime is not valid."},{"errorCode":"InvalidStartTimeAndEndTime.Malformed","errorMessage":"The Specified parameter StartTime or EndTime is not valid."},{"errorCode":"InvalidPageSize.Malformed","errorMessage":"The specified  parameter PageSize is not valid."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2F42BB4E-461F-5B55-A37C-53B1141C****\\\",\\n  \\\"MaxResults\\\": 10,\\n  \\\"PageNumber\\\": 1,\\n  \\\"PageSize\\\": 30,\\n  \\\"ClusterBackups\\\": [\\n    {\\n      \\\"IsAvail\\\": 1,\\n      \\\"ClusterBackupId\\\": \\\"cb-o8c2ugnxo26kx***\\\",\\n      \\\"ClusterBackupStatus\\\": \\\"OK\\\",\\n      \\\"ClusterBackupStartTime\\\": \\\"2023-10-16T19:33:20Z\\\",\\n      \\\"ClusterBackupSize\\\": \\\"107374182400\\\",\\n      \\\"ClusterBackupEndTime\\\": \\\"2023-10-16T19:33:20Z\\\",\\n      \\\"ClusterBackupMode\\\": \\\"Automated\\\",\\n      \\\"ExtraInfo\\\": {\\n        \\\"RegistryFromHistory\\\": \\\"1\\\"\\n      },\\n      \\\"Backups\\\": [\\n        {\\n          \\\"BackupId\\\": \\\"738025367\\\",\\n          \\\"InstanceName\\\": \\\"d-bp16cb162771****\\\\n\\\",\\n          \\\"BackupDownloadURL\\\": \\\"http://oss.com/xxx\\\",\\n          \\\"BackupIntranetDownloadURL\\\": \\\"http://oss.com/xxx\\\",\\n          \\\"BackupStartTime\\\": \\\"2023-10-16T19:33:20Z\\\",\\n          \\\"BackupEndTime\\\": \\\"2023-10-16T19:33:20Z\\\",\\n          \\\"BackupSize\\\": \\\"77544597650\\\",\\n          \\\"IsAvail\\\": \\\"1\\\",\\n          \\\"BackupStatus\\\": \\\"Success\\\",\\n          \\\"BackupName\\\": \\\"12345678.tar.gz\\\",\\n          \\\"ExtraInfo\\\": {\\n            \\\"NodeId\\\": \\\"d-2ze75ab1fa5d****\\\",\\n            \\\"StorageSize\\\": \\\"20480\\\",\\n            \\\"InstanceClass\\\": \\\"mdb.shard.4x.large.d\\\",\\n            \\\"NodeType\\\": \\\"db\\\"\\n          }\\n        }\\n      ],\\n      \\\"Progress\\\": \\\"50\\\",\\n      \\\"AttachLogStatus\\\": \\\"Ready\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询集群备份集列表","description":"2023年10月19日前新建的云盘版分片集群实例，在调用前本接口前，需要调用 \n[TransferClusterBackup](~~2587931~~) 接口，完成分片备份到集群备份的转换。\n\n2023年10月19日之后新建的云盘版分片集群实例，默认使用集群备份。"}