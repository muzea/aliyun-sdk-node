{"summary":"根据 SQLID 查询诊断系统存储的 SQL 执行计划信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"TenantId","in":"formData","schema":{"title":"租户ID","description":"租户 ID。","type":"string","required":true,"docRequired":true,"example":"t2mr3oae0****"}},{"name":"SQLId","in":"formData","schema":{"title":"SQLID","description":"SQLID。","type":"string","required":true,"docRequired":true,"example":"8D6E84****0B8FB1823D199E2CA1****"}}],"responses":{"200":{"schema":{"title":"请求的返回结果","description":"请求的返回结果。","type":"object","properties":{"RequestId":{"title":"请求ID","description":"请求 ID。","type":"string","example":"EE205C00-30E4-XXXX-XXXX-87E3A8A2AA0C"},"SQLPlans":{"title":"执行计划信息","description":"执行计划列表信息。","type":"array","items":{"description":"执行计划列表信息。","type":"object","properties":{"HitCount":{"title":"命中次数","description":"命中次数。","type":"integer","format":"int32","example":"3"},"OutlineData":{"title":"Outline数据","description":"Outline 数据。","type":"string","example":"/*+ BEGIN_OUTLINE_DATA FULL(@\\\"SEL$1\\\" \\\"testdb1.bmsql_order_line\\\"@\\\"SEL$1\\\") END_OUTLINE_DATA*/"},"AvgExecutionMS":{"title":"平均执行时间 (ms)","description":"平均执行时间 (ms)。","type":"number","format":"float","example":"1"},"PlanUnionHash":{"title":"SQL执行计划在诊断系统内部的唯一标识","description":"SQL 执行计划在诊断系统内部的唯一标识。","type":"string","example":"859ef7ee****b23ac98cdeb2476f****"},"OutlineId":{"title":"OutlineID","description":"OutlineID。","type":"integer","format":"int64","example":"-1"},"AvgExecutionTimeMS":{"title":"平均执行时间","description":"数据库使用此执行计划的平均执行时间，单位毫秒。","type":"integer","format":"int64","example":"288"},"PlanId":{"title":"SQL执行计划在数据库内部的ID","description":"SQL 执行计划在数据库内部的 ID。","type":"integer","format":"int32","example":"9114"},"OutlineTime":{"title":"绑定时间","description":"绑定时间。","type":"integer","format":"int64","example":"1641492303000"},"OutlineTimeUTCString":{"title":"绑定时间(零时区)","description":"绑定时间（零时区）。","type":"string","example":"2022-01-06T18:05:03Z"},"PlanFull":{"title":"SQL的完整执行计划","description":"SQL 的完整执行计划。","type":"string","example":"PHY_TABLE_SCAN | bmsql_order_line | 40 ******"},"NodeIp":{"title":"节点ip","description":"节点 IP。","type":"string","example":"i-bp16niirq4zdmgvm****"},"MergedVersion":{"title":"合并版本","description":"合并版本。","type":"integer","format":"int32","example":"132"},"QuerySQL":{"title":"查询sql","description":"查询 sql。","type":"string","example":"SELECT ol_i_id, ***, *** FROM aaa"},"FirstLoadTimeUTCString":{"title":"首次加载时间(零时区)","description":"首次加载时间（零时区）。","type":"string","example":"2022-01-06T18:05:03Z"},"FirstLoadTime":{"title":"首次加载时间","description":"首次加载时间。","type":"integer","format":"int64","example":"1641492303000"},"PlanInfo":{"title":"计划信息","description":"计划信息。","type":"string","example":"PHY_TABLE_SCAN"}}}}}}}},"errorCodes":{"2014":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"EE205C00-30E4-XXXX-XXXX-87E3A8A2AA0C\\\",\\n  \\\"SQLPlans\\\": [\\n    {\\n      \\\"HitCount\\\": 3,\\n      \\\"OutlineData\\\": \\\"/*+ BEGIN_OUTLINE_DATA FULL(@\\\\\\\\\\\\\\\"SEL$1\\\\\\\\\\\\\\\" \\\\\\\\\\\\\\\"testdb1.bmsql_order_line\\\\\\\\\\\\\\\"@\\\\\\\\\\\\\\\"SEL$1\\\\\\\\\\\\\\\") END_OUTLINE_DATA*/\\\",\\n      \\\"AvgExecutionMS\\\": 1,\\n      \\\"PlanUnionHash\\\": \\\"859ef7ee****b23ac98cdeb2476f****\\\",\\n      \\\"OutlineId\\\": -1,\\n      \\\"AvgExecutionTimeMS\\\": 288,\\n      \\\"PlanId\\\": 9114,\\n      \\\"OutlineTime\\\": 1641492303000,\\n      \\\"OutlineTimeUTCString\\\": \\\"2022-01-06T18:05:03Z\\\",\\n      \\\"PlanFull\\\": \\\"PHY_TABLE_SCAN | bmsql_order_line | 40 ******\\\",\\n      \\\"NodeIp\\\": \\\"i-bp16niirq4zdmgvm****\\\",\\n      \\\"MergedVersion\\\": 132,\\n      \\\"QuerySQL\\\": \\\"SELECT ol_i_id, ***, *** FROM aaa\\\",\\n      \\\"FirstLoadTimeUTCString\\\": \\\"2022-01-06T18:05:03Z\\\",\\n      \\\"FirstLoadTime\\\": 1641492303000,\\n      \\\"PlanInfo\\\": \\\"PHY_TABLE_SCAN\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSQLPlansResponse>\\n    <RequestId>EE205C00-30E4-XXXX-XXXX-87E3A8A2AA0C</RequestId>\\n    <SQLPlans>\\n        <HitCount>3</HitCount>\\n        <OutlineData>/*+ BEGIN_OUTLINE_DATA FULL(@\\\\\\\"SEL$1\\\\\\\" \\\\\\\"testdb1.bmsql_order_line\\\\\\\"@\\\\\\\"SEL$1\\\\\\\") END_OUTLINE_DATA*/</OutlineData>\\n        <AvgExecutionMS>1</AvgExecutionMS>\\n        <PlanUnionHash>859ef7ee****b23ac98cdeb2476f****</PlanUnionHash>\\n        <OutlineId>-1</OutlineId>\\n        <AvgExecutionTimeMS>288</AvgExecutionTimeMS>\\n        <PlanId>9114</PlanId>\\n        <OutlineTime>1641492303000</OutlineTime>\\n        <OutlineTimeUTCString>2022-01-06T18:05:03Z</OutlineTimeUTCString>\\n        <PlanFull>PHY_TABLE_SCAN | bmsql_order_line | 40 ******</PlanFull>\\n        <NodeIp>i-bp16niirq4zdmgvm****</NodeIp>\\n        <MergedVersion>132</MergedVersion>\\n        <QuerySQL>SELECT ol_i_id, ***, *** FROM aaa</QuerySQL>\\n        <FirstLoadTimeUTCString>2022-01-06T18:05:03Z</FirstLoadTimeUTCString>\\n        <FirstLoadTime>1641492303000</FirstLoadTime>\\n        <PlanInfo>PHY_TABLE_SCAN</PlanInfo>\\n    </SQLPlans>\\n</DescribeSQLPlansResponse>\",\"errorExample\":\"\"}]","title":"查询 SQL 执行计划","description":"为优化用户体验，云数据库对 SQL 诊断功能进行了升级，本接口已下线并由新的接口替代，详情请参见 <props=\"china\">[【通知】云数据库诊断管理 API 接口下线](https://help.aliyun.com/document_detail/2352272.html?spm=a2c4g.292641.0.0.8d3622f8LtqWiM)</props><props=\"intl\">[【通知】云数据库诊断管理 API 接口下线](https://www.alibabacloud.com/help/zh/apsaradb-for-oceanbase/latest/notice-cloud-database-diagnosis-management-api-interface-downline)</props>。"}