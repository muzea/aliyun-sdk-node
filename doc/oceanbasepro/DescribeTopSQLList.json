{"summary":"查询诊断系统采集到的 SQL 执行性能数据列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list"},"parameters":[{"name":"TenantId","in":"formData","schema":{"title":"租户ID","description":"租户 ID。","type":"string","required":true,"docRequired":true,"example":"t2mr3oae0****"}},{"name":"StartTime","in":"formData","schema":{"title":"起始时间。","description":"查询 TOPSQL 参数的起始时间。  \n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2021-06-13T15:40:43Z"}},{"name":"EndTime","in":"formData","schema":{"title":"结束时间。","description":"查询 TOPSQL 参数的结束时间。  \n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2021-09-13T15:40:43Z"}},{"name":"DbName","in":"formData","schema":{"title":"数据库名称","description":"数据库名称。","type":"string","required":false,"docRequired":false,"example":"testdb"}},{"name":"SearchKeyWord","in":"formData","schema":{"title":"关键字查询","description":"关键字查询。","type":"string","required":false,"example":"update"}},{"name":"SearchParameter","in":"formData","schema":{"title":"参数查询","description":"参数查询。","type":"string","required":false,"example":"cputime"}},{"name":"SearchRule","in":"formData","schema":{"title":"查询规则","description":"查询规则。","type":"string","required":false,"example":">"}},{"name":"SearchValue","in":"formData","schema":{"title":"查询值","description":"查询值。","type":"string","required":false,"example":"0.01"}},{"name":"SQLId","in":"formData","schema":{"title":"SQLID","description":"SQLID。","type":"string","required":false,"example":"8D6E84****0B8FB1823D199E2CA1****"}},{"name":"NodeIp","in":"formData","schema":{"title":"节点ip","description":"节点 IP。","type":"string","required":false,"example":"i-bp19y05uq6xpacyqnlrc"}},{"name":"PageNumber","in":"formData","schema":{"title":"分页查询的页码。 起始值：1 默认值：1","description":"分页查询的页码。\n- 起始值：1。\n- 默认值：1。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PageSize","in":"formData","schema":{"title":"分页查询时设置的每页行数。 最大值：100 默认值：10","description":"分页查询时设置的每页行数。  \n- 最大值：100。  \n- 默认值：10。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"FilterCondition","in":"formData","style":"json","schema":{"title":"过滤条件","description":"过滤条件。","type":"object","required":false,"example":"[dbName:sys]"}},{"name":"SortColumn","in":"formData","schema":{"title":"排序列","description":"排序列。","type":"string","required":false,"example":"cputime"}},{"name":"SortOrder","in":"formData","schema":{"title":"排序规则","description":"排序规则。","type":"string","required":false,"example":"desc"}}],"responses":{"200":{"schema":{"title":"请求的返回结果","description":"请求的返回结果。","type":"object","properties":{"TotalCount":{"title":"总数量","description":"总数量。","type":"integer","format":"int64","example":"9"},"RequestId":{"title":"请求ID","description":"请求 ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"TopSQLList":{"title":"TOPSQL列表","description":"TOPSQL 列表。","type":"array","items":{"description":"请求的返回结果。","type":"object","properties":{"Key":{"title":"返回数据序号","description":"返回数据序号。","type":"integer","format":"int64","example":"1"},"ExecPerSecond":{"title":"每秒次数","description":"每秒次数。","type":"number","format":"float","example":"163.0"},"SQLText":{"title":"sql文本","description":"SQL 文本。","type":"string","example":"SELECT  ****   FROM ****   WHERE **** = ? AND **** = ?   ORDER BY **** ASC"},"MaxCpuTime":{"title":"最大CPU时间","description":"最大 CPU 时间，单位 ms。","type":"number","format":"float","example":"257.967"},"BlockCacheHit":{"title":"BlockCache命中次数","description":"BlockCache 命中次数。","type":"integer","format":"int64","example":"14"},"DecodeTime":{"title":"解码等待","description":"解码等待时间，单位 ms。","type":"number","format":"float","example":"0.0"},"RemotePlans":{"title":"远程计划数","description":"远程计划数。","type":"integer","format":"int64","example":"0"},"RPCCount":{"title":"RPC次数","description":"RPC 次数。","type":"integer","format":"int64","example":"0"},"NetWaitTime":{"title":"网络等待","description":"网络等待时间，单位 ms。","type":"number","format":"float","example":"0.0"},"DiskRead":{"title":"物理读","description":"物理读。","type":"integer","format":"int64","example":"0"},"NodeIp":{"title":"节点IP","description":"节点 IP。","type":"string","example":"i-bp18qljorblo8es*****"},"ConcurrencyWaitTime":{"title":"并发等待","description":"并发等待时间，单位 ms。","type":"number","format":"float","example":"0.0"},"MemstoreReadRowCount":{"title":"读内存行数","description":"读内存行数。","type":"integer","format":"int64","example":"527"},"DbName":{"title":"数据库名","description":"数据库名。","type":"string","example":"testdb"},"AppWaitTime":{"title":"客户端等待","description":"客户端等待时间，单位 ms。","type":"number","format":"float","example":"0.0"},"ElapsedTime":{"title":"平均响应时间","description":"平均响应时间，单位 ms。","type":"number","format":"float","example":"76.382"},"MissPlans":{"title":"未命中计划次数","description":"未命中计划次数。","type":"integer","format":"int64","example":"0"},"AffectedRows":{"title":"影响行数","description":"影响行数。","type":"integer","format":"int64","example":"0"},"ScheduleTime":{"title":"调度时间","description":"调度时间，单位 ms。","type":"number","format":"float","example":"0.0"},"Event":{"title":"等待事件","description":"等待事件。","type":"string","example":"mysql response wait client"},"TotalWaitTime":{"title":"内部等待","description":"内部等待时间，单位 ms。","type":"number","format":"float","example":"10.966"},"ReturnRows":{"title":"返回行数","description":"返回行数。","type":"integer","format":"int64","example":"1"},"ExecuteTime":{"title":"内部执行时间","description":"内部执行时间，单位 ms。","type":"number","format":"float","example":"61.044"},"UserName":{"title":"用户名","description":"用户名。","type":"string","example":"tester"},"Executions":{"title":"执行次数","description":"执行次数。","type":"integer","format":"int64","example":"89403"},"GetPlanTime":{"title":"硬解析时间","description":"硬解析时间，单位 ms。","type":"number","format":"float","example":"0.052"},"CpuTime":{"title":"平均CPU时间","description":"平均 CPU 时间，单位 ms。","type":"number","format":"float","example":"50.13"},"MaxElapsedTime":{"title":"最大响应时间","description":"最大响应时间，单位 ms。","type":"number","format":"float","example":"260.044"},"SQLType":{"title":"sql类型","description":"SQL 类型。","type":"integer","format":"int64","example":"1"},"BlockIndexCacheHit":{"title":"BlockIndexCache命中次数","description":"BlockIndexCache 命中次数。","type":"integer","format":"int64","example":"4"},"RetryCount":{"title":"重试次数","description":"重试次数。","type":"integer","format":"int64","example":"0"},"SQLId":{"title":"SQLID","description":"SQLID。","type":"string","example":"8D6E84****0B8FB1823D199E2CA1****"},"ClientIp":{"title":"客户端IP","description":"客户端 IP。","type":"string","example":"1*2.***.1*3.***"},"BloomFilterCacheHit":{"title":"BloomFilterCache命中次数","description":"BloomFilterCache 命中次数。","type":"integer","format":"int64","example":"0"},"IOWaitTime":{"title":"IO等待","description":"IO 等待时间，单位 ms。","type":"number","format":"float","example":"0.0"},"FailTimes":{"title":"失败次数","description":"失败次数。","type":"integer","format":"int64","example":"0"},"QueueTime":{"title":"队列等待","description":"队列等待时间，单位 ms。","type":"number","format":"float","example":"15.275"},"RowCacheHit":{"title":"RowCache命中次数","description":"RowCache 命中次数。","type":"integer","format":"int64","example":"0"},"LogicalRead":{"title":"逻辑读","description":"SQL 在所选时间段内平均逻辑读次数。  \n包含读各个 cache 模块次数、磁盘 IO 次数，为衡量 SQL 过滤性的重要指标。  \n\n> <br> “逻辑读/返回行数”比例越大，说明过滤性越差。通常是由 SQL 写入内容、表索引创建和 SQL 执行计划不标准等原因引起。","type":"integer","format":"int64","example":"19"},"SsstoreReadRowCount":{"title":"读磁盘行数","description":"读磁盘行数。","type":"integer","format":"int64","example":"43086"}}}}}}}},"errorCodes":{"2014":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TotalCount\\\": 9,\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"TopSQLList\\\": [\\n    {\\n      \\\"Key\\\": 1,\\n      \\\"ExecPerSecond\\\": 163,\\n      \\\"SQLText\\\": \\\"SELECT  ****   FROM ****   WHERE **** = ? AND **** = ?   ORDER BY **** ASC\\\",\\n      \\\"MaxCpuTime\\\": 257.967,\\n      \\\"BlockCacheHit\\\": 14,\\n      \\\"DecodeTime\\\": 0,\\n      \\\"RemotePlans\\\": 0,\\n      \\\"RPCCount\\\": 0,\\n      \\\"NetWaitTime\\\": 0,\\n      \\\"DiskRead\\\": 0,\\n      \\\"NodeIp\\\": \\\"i-bp18qljorblo8es*****\\\",\\n      \\\"ConcurrencyWaitTime\\\": 0,\\n      \\\"MemstoreReadRowCount\\\": 527,\\n      \\\"DbName\\\": \\\"testdb\\\",\\n      \\\"AppWaitTime\\\": 0,\\n      \\\"ElapsedTime\\\": 76.382,\\n      \\\"MissPlans\\\": 0,\\n      \\\"AffectedRows\\\": 0,\\n      \\\"ScheduleTime\\\": 0,\\n      \\\"Event\\\": \\\"mysql response wait client\\\",\\n      \\\"TotalWaitTime\\\": 10.966,\\n      \\\"ReturnRows\\\": 1,\\n      \\\"ExecuteTime\\\": 61.044,\\n      \\\"UserName\\\": \\\"tester\\\",\\n      \\\"Executions\\\": 89403,\\n      \\\"GetPlanTime\\\": 0.052,\\n      \\\"CpuTime\\\": 50.13,\\n      \\\"MaxElapsedTime\\\": 260.044,\\n      \\\"SQLType\\\": 1,\\n      \\\"BlockIndexCacheHit\\\": 4,\\n      \\\"RetryCount\\\": 0,\\n      \\\"SQLId\\\": \\\"8D6E84****0B8FB1823D199E2CA1****\\\",\\n      \\\"ClientIp\\\": \\\"1*2.***.1*3.***\\\",\\n      \\\"BloomFilterCacheHit\\\": 0,\\n      \\\"IOWaitTime\\\": 0,\\n      \\\"FailTimes\\\": 0,\\n      \\\"QueueTime\\\": 15.275,\\n      \\\"RowCacheHit\\\": 0,\\n      \\\"LogicalRead\\\": 19,\\n      \\\"SsstoreReadRowCount\\\": 43086\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeTopSQLListResponse>\\n    <TotalCount>9</TotalCount>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <TopSQLList>\\n        <Key>1</Key>\\n        <ExecPerSecond>163</ExecPerSecond>\\n        <SQLText>SELECT  ****   FROM ****   WHERE **** = ? AND **** = ?   ORDER BY **** ASC</SQLText>\\n        <MaxCpuTime>257.967</MaxCpuTime>\\n        <BlockCacheHit>14</BlockCacheHit>\\n        <DecodeTime>0</DecodeTime>\\n        <RemotePlans>0</RemotePlans>\\n        <RPCCount>0</RPCCount>\\n        <NetWaitTime>0</NetWaitTime>\\n        <DiskRead>0</DiskRead>\\n        <NodeIp>i-bp18qljorblo8es*****</NodeIp>\\n        <ConcurrencyWaitTime>0</ConcurrencyWaitTime>\\n        <MemstoreReadRowCount>527</MemstoreReadRowCount>\\n        <DbName>testdb</DbName>\\n        <AppWaitTime>0</AppWaitTime>\\n        <ElapsedTime>76.382</ElapsedTime>\\n        <MissPlans>0</MissPlans>\\n        <AffectedRows>0</AffectedRows>\\n        <ScheduleTime>0</ScheduleTime>\\n        <Event>mysql response wait client</Event>\\n        <TotalWaitTime>10.966</TotalWaitTime>\\n        <ReturnRows>1</ReturnRows>\\n        <ExecuteTime>61.044</ExecuteTime>\\n        <UserName>tester</UserName>\\n        <Executions>89403</Executions>\\n        <GetPlanTime>0.052</GetPlanTime>\\n        <CpuTime>50.13</CpuTime>\\n        <MaxElapsedTime>260.044</MaxElapsedTime>\\n        <SQLType>1</SQLType>\\n        <BlockIndexCacheHit>4</BlockIndexCacheHit>\\n        <RetryCount>0</RetryCount>\\n        <SQLId>8D6E84****0B8FB1823D199E2CA1****</SQLId>\\n        <ClientIp>1*2.***.1*3.***</ClientIp>\\n        <BloomFilterCacheHit>0</BloomFilterCacheHit>\\n        <IOWaitTime>0</IOWaitTime>\\n        <FailTimes>0</FailTimes>\\n        <QueueTime>15.275</QueueTime>\\n        <RowCacheHit>0</RowCacheHit>\\n        <LogicalRead>19</LogicalRead>\\n        <SsstoreReadRowCount>43086</SsstoreReadRowCount>\\n    </TopSQLList>\\n</DescribeTopSQLListResponse>\",\"errorExample\":\"\"}]","title":"查询 TopSQL 列表","description":"为优化用户体验，云数据库对 SQL 诊断功能进行了升级，本接口已下线并由新的接口替代，详情请参见 <props=\"china\">[【通知】云数据库诊断管理 API 接口下线](https://help.aliyun.com/document_detail/2352272.html?spm=a2c4g.292641.0.0.8d3622f8LtqWiM)</props><props=\"intl\">[【通知】云数据库诊断管理 API 接口下线](https://www.alibabacloud.com/help/zh/apsaradb-for-oceanbase/latest/notice-cloud-database-diagnosis-management-api-interface-downline)</props>。"}