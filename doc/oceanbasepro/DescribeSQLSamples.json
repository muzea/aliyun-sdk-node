{"summary":"查询慢 SQL 执行明细的采样数据。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"OceanBase 集群 ID。","type":"string","required":false,"example":"ob317v4uif****"}},{"name":"TenantId","in":"formData","schema":{"description":"租户 ID。","type":"string","required":false,"example":"t4louaeei****"}},{"name":"StartTime","in":"formData","schema":{"description":"查看慢 SQL 执行的起始时间。\n\n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2023-04-12T04:38:38Z"}},{"name":"EndTime","in":"formData","schema":{"description":"查看慢 SQL 执行的结束时间。\n\n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2023-04-12T05:38:38Z"}},{"name":"DbName","in":"formData","schema":{"description":"数据库名称。","type":"string","required":true,"docRequired":true,"example":"test_db"}},{"name":"SqlId","in":"formData","schema":{"description":"SQL ID。","type":"string","required":true,"docRequired":true,"example":"8D6E84****0B8FB1823D199E2CA1****"}},{"name":"ReturnSqlText","in":"formData","schema":{"type":"boolean","required":false}}],"responses":{"200":{"schema":{"title":"","description":"请求的返回参数。","type":"object","properties":{"RequestId":{"title":"","description":"请求 ID。","type":"string","example":"EE205C00-30E4-****-****-87E3A8A2AA0C"},"Data":{"description":"慢 SQL 执行明细的采样信息列表。","type":"array","items":{"description":"慢 SQL 执行明细的采样信息。","type":"object","properties":{"RequestId":{"title":"RequestId","description":"请求 ID。","type":"string","example":"EE205C00-30E4-****-****-87E3A8A2AA0C"},"TraceId":{"title":"TraceId","description":"跟踪 ID。","type":"string","example":"YB42C****-0005E303D1****-0-0"},"RequestTime":{"title":"SQL的请求时间","description":"SQL 的请求时间。","type":"string","example":"2023-04-12T04:46:38Z"},"Server":{"title":"String\tSQL执行所在的Server（svr_ip:svr_port）","description":"SQL 执行所在的 Server。","type":"string","example":"i-bp1db1****8uemejio"},"ClientIp":{"title":"客户端Ip","description":"客户端 IP。","type":"string","example":"i-bp1db****38uemejio"},"ClientPort":{"title":"客户端Port","description":"客户端端口。","type":"string","example":"4****"},"DbName":{"title":"SQL访问的数据库","description":"数据库名称。","type":"string","example":"test_db"},"UserName":{"title":"SQL的用户","description":"用户名。","type":"string","example":"test_user"},"SqlType":{"title":"SQL的类型","description":"SQL 类型。","type":"string","example":"select"},"PlanId":{"title":"执行计划Id","description":"执行计划 ID。","type":"number","format":"double","example":"590****"},"AffectedRows":{"title":"期间内平均更新行数","description":"期间内平均更新行数。","type":"number","format":"double","example":"10000.0"},"ReturnRows":{"title":"期间内平均返回行数","description":"期间内平均返回行数。","type":"number","format":"double","example":"0.0"},"PartitionCount":{"title":"期间内平均访问分区数","description":"期间内平均访问分区数。","type":"number","format":"double","example":"1.0"},"RetCode":{"title":"结果码","description":"结果码。","type":"number","format":"double","example":"0"},"WaitEvent":{"title":"期间内的最长等待事件","description":"期间内的最长等待事件。","type":"string","example":"none"},"WaitTime":{"title":"等待时间（毫秒)","description":"等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"WaitCount":{"title":"等待次数","description":"等待次数。","type":"number","format":"double","example":"0.0"},"RpcCount":{"title":"发送RPC次数","description":"发送 RPC 次数。","type":"number","format":"double","example":"8.0"},"PlanType":{"title":"计划类型","description":"计划类型。","type":"string","example":"LOCAL"},"Inner":{"title":"是否内部SQL","description":"是否内部 SQL。","type":"boolean","example":"false"},"ExecutorRpc":{"description":"是否发起 RPC。","type":"boolean","example":"0.0"},"HitPlan":{"description":"是否命中执行计划。","type":"boolean","example":"true"},"ElapsedTime":{"title":"响应时间（毫秒）","description":"响应时间（毫秒）。","type":"number","format":"double","example":"2182.66"},"CpuTime":{"title":"CPU时间（毫秒）","description":"CPU 时间（毫秒）。","type":"number","format":"double","example":"3377.57"},"NetTime":{"title":"网络传输时间（毫秒）","description":"网络传输时间（毫秒）。","type":"number","format":"double","example":"0.0"},"NetWaitTime":{"title":"网络入队时间（毫秒）","description":"网络入队时间（毫秒）。","type":"number","format":"double","example":"0.0"},"QueueTime":{"title":"排队时间（毫秒）","description":"排队时间（毫秒）。","type":"number","format":"double","example":"0.02"},"DecodeTime":{"title":"语法解析时间（毫秒）","description":"语法解析时间（毫秒）。","type":"number","format":"double","example":"0.0"},"GetPlanTime":{"title":"计划生成时间（毫秒）","description":"计划生成时间（毫秒）。","type":"number","format":"double","example":"0.19"},"ExecuteTime":{"title":"计划执行时间（毫秒）","description":"计划执行时间（毫秒）。","type":"number","format":"double","example":"8262.01"},"ApplicationWaitTime":{"title":"Application事件等待时间（毫秒）","description":"Application 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"ConcurrencyWaitTime":{"title":"Concurrency事件等待时间（毫秒）","description":"Concurrency 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"UserIoWaitTime":{"title":"UserIO事件等待时间（毫秒）","description":"UserIO 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"ScheduleTime":{"title":"Schedule事件等待时间（毫秒）","description":"Schedule 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"RowCacheHit":{"title":"RowCache命中次数","description":"RowCache 命中次数。","type":"number","format":"double","example":"498.0"},"BloomFilterCacheHit":{"title":"BloomFilterCache命中次数","description":"BloomFilterCache 命中次数。","type":"number","format":"double","example":"0.0"},"BlockCacheHit":{"title":"BlockCache命中次数","description":"BlockCache 命中次数。","type":"number","format":"double","example":"99279.0"},"BlockIndexCacheHit":{"title":"BlockIndexCache命中次数\n磁盘读次数","description":"BlockIndexCache 命中次数\n磁盘读次数。","type":"number","format":"double","example":"142514.0"},"DiskReads":{"title":"磁盘读次数","description":"磁盘读次数。","type":"number","format":"double","example":"96972.0"},"RetryCount":{"title":"重试次数","description":"重试次数。","type":"number","format":"double","example":"0"},"TableScan":{"description":"是否全表扫描。","type":"boolean","example":"false"},"ConsistencyLevel":{"title":"一致性级别","description":"一致性级别。","type":"string","example":"3"},"MemstoreReadRows":{"title":"Memstore读行数","description":"Memstore 读行数。","type":"number","format":"double","example":"0"},"ExpectedWorkerCount":{"title":"并行度","description":"并行度。","type":"number","format":"double","example":"0"},"UsedWorkerCount":{"title":"sql实际执行线程数","description":"SQL 实际执行线程数。","type":"number","format":"double","example":"0"},"SsstoreReadRows":{"title":"Ssstore读行数","description":"Ssstore 读行数。","type":"number","format":"double","example":"986190"},"ObServerId":{"title":"server  ID","description":"server  ID。","type":"number","format":"double","example":"2"},"ObUserId":{"title":"用户ID","description":"用户 ID。","type":"number","format":"double","example":"100010"},"ObDbId":{"title":"数据库ID","description":"数据库 ID。","type":"number","format":"double","example":"11006111****4828"},"Statement":{"title":"参数化SQL文本","description":"参数化 SQL 文本。","type":"string","example":"select a from b"},"TransHash":{"title":"transaction hash","description":"transaction hash。","type":"string","example":"1219****927****73791"},"FullSqlText":{"type":"string"},"SqlText":{"type":"string"}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"EE205C00-30E4-****-****-87E3A8A2AA0C\\\",\\n  \\\"Data\\\": [\\n    {\\n      \\\"RequestId\\\": \\\"EE205C00-30E4-****-****-87E3A8A2AA0C\\\",\\n      \\\"TraceId\\\": \\\"YB42C****-0005E303D1****-0-0\\\",\\n      \\\"RequestTime\\\": \\\"2023-04-12T04:46:38Z\\\",\\n      \\\"Server\\\": \\\"i-bp1db1****8uemejio\\\",\\n      \\\"ClientIp\\\": \\\"i-bp1db****38uemejio\\\",\\n      \\\"ClientPort\\\": \\\"4****\\\",\\n      \\\"DbName\\\": \\\"test_db\\\",\\n      \\\"UserName\\\": \\\"test_user\\\",\\n      \\\"SqlType\\\": \\\"select\\\",\\n      \\\"PlanId\\\": 0,\\n      \\\"AffectedRows\\\": 10000,\\n      \\\"ReturnRows\\\": 0,\\n      \\\"PartitionCount\\\": 1,\\n      \\\"RetCode\\\": 0,\\n      \\\"WaitEvent\\\": \\\"none\\\",\\n      \\\"WaitTime\\\": 0,\\n      \\\"WaitCount\\\": 0,\\n      \\\"RpcCount\\\": 8,\\n      \\\"PlanType\\\": \\\"LOCAL\\\",\\n      \\\"Inner\\\": false,\\n      \\\"ExecutorRpc\\\": true,\\n      \\\"HitPlan\\\": true,\\n      \\\"ElapsedTime\\\": 2182.66,\\n      \\\"CpuTime\\\": 3377.57,\\n      \\\"NetTime\\\": 0,\\n      \\\"NetWaitTime\\\": 0,\\n      \\\"QueueTime\\\": 0.02,\\n      \\\"DecodeTime\\\": 0,\\n      \\\"GetPlanTime\\\": 0.19,\\n      \\\"ExecuteTime\\\": 8262.01,\\n      \\\"ApplicationWaitTime\\\": 0,\\n      \\\"ConcurrencyWaitTime\\\": 0,\\n      \\\"UserIoWaitTime\\\": 0,\\n      \\\"ScheduleTime\\\": 0,\\n      \\\"RowCacheHit\\\": 498,\\n      \\\"BloomFilterCacheHit\\\": 0,\\n      \\\"BlockCacheHit\\\": 99279,\\n      \\\"BlockIndexCacheHit\\\": 142514,\\n      \\\"DiskReads\\\": 96972,\\n      \\\"RetryCount\\\": 0,\\n      \\\"TableScan\\\": false,\\n      \\\"ConsistencyLevel\\\": \\\"3\\\",\\n      \\\"MemstoreReadRows\\\": 0,\\n      \\\"ExpectedWorkerCount\\\": 0,\\n      \\\"UsedWorkerCount\\\": 0,\\n      \\\"SsstoreReadRows\\\": 986190,\\n      \\\"ObServerId\\\": 2,\\n      \\\"ObUserId\\\": 100010,\\n      \\\"ObDbId\\\": 0,\\n      \\\"Statement\\\": \\\"select a from b\\\",\\n      \\\"TransHash\\\": \\\"1219****927****73791\\\",\\n      \\\"FullSqlText\\\": \\\"\\\",\\n      \\\"SqlText\\\": \\\"\\\"\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询慢 SQL 执行明细的采样数据"}