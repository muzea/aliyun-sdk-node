{"summary":"查询 SQL 执行历史信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"InstanceId","in":"formData","schema":{"description":"OceanBase 集群 ID。","type":"string","required":true,"docRequired":true,"example":"ob317v4uif****"}},{"name":"TenantId","in":"formData","schema":{"description":"租户 ID。","type":"string","required":true,"docRequired":true,"example":"t4louaeei****"}},{"name":"StartTime","in":"formData","schema":{"description":"查看 SQL 执行历史参数的起始时间。  \n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2023-04-12T04:38:38Z"}},{"name":"EndTime","in":"formData","schema":{"description":"查看 SQL 执行历史参数的结束时间。\n\n该时间只支持 UTC 时间，格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"docRequired":true,"example":"2023-04-12T05:38:38Z"}},{"name":"DbName","in":"formData","schema":{"description":"数据库名称。","type":"string","required":false,"example":"test_db"}},{"name":"SqlId","in":"formData","schema":{"description":"SQL ID。","type":"string","required":true,"docRequired":true,"example":"8D6E84****0B8FB1823D199E2CA1****"}},{"name":"NodeIp","in":"formData","schema":{"description":"节点 IP。","type":"string","required":false,"example":"i-bp19y05uq6x*********"}},{"name":"AcceptLanguage","in":"formData","schema":{"description":"返回信息的语言类型：\n\n- zh：中文\n- en：英文","type":"string","required":false,"example":"zh-CN"}},{"name":"DynamicSql","in":"formData","schema":{"title":"是否动态SQL","type":"boolean"}}],"responses":{"200":{"schema":{"title":"","description":"请求的返回结果。","type":"object","properties":{"RequestId":{"title":"","description":"请求 ID。","type":"string","example":"EE205C00-30E4-****-****-87E3A8A2AA0C"},"Data":{"description":"SQL 执行历史信息列表。","type":"array","items":{"description":"SQL 执行历史信息。","type":"object","properties":{"SQLId":{"title":"SQL ID","description":"SQL ID","type":"string","example":"8D6E84****0B8FB1823D199E2CA1****"},"DbName":{"title":"数据库名","description":"数据库名称。","type":"string","example":"test_db"},"AvgAffectedRows":{"title":"期间内平均更新行数","description":"期间内平均更新行数。","type":"integer","format":"int64","example":"9978.75"},"AvgBlockCacheHit":{"title":"期间内的平均BlockCache命中次数","description":"期间内的平均 BlockCache 命中次数。","type":"integer","format":"int64","example":"0.0"},"AvgBlockIndexCacheHit":{"title":"期间内的平均BlockIndexCache命中次数","description":"期间内的平均 BlockIndexCache 命中次数。","type":"integer","format":"int64","example":"0.0"},"AvgBloomFilterCacheHit":{"title":"期间内的平均BloomFilterCache命中次数","description":"期间内的平均 BloomFilterCache 命中次数。","type":"integer","format":"int64","example":"0.0"},"Executions":{"title":"期间内的总执行次数","description":"期间内的总执行次数。","type":"integer","format":"int64","example":"1"},"FailCount":{"title":"期间内的总错误次数","description":"期间内的总错误次数。","type":"integer","format":"int64","example":"0"},"AvgRpcCount":{"title":"期间内的平均发送RPC次数","description":"期间内的平均发送 RPC 次数。","type":"integer","format":"int64","example":"8.0"},"RemotePlans":{"title":"远程计划数","description":"远程计划数。","type":"integer","format":"int64","example":"0"},"MissPlans":{"title":"未命中计划次数","description":"未命中计划次数。","type":"integer","format":"int64","example":"0"},"AvgReturnRows":{"title":"期间内平均返回行数","description":"期间内平均返回行数。","type":"integer","format":"int64","example":"0.0"},"AvgLogicalReads":{"title":"期间内平均逻辑读","description":"期间内平均逻辑读。","type":"integer","format":"int64","example":"0.0"},"RetryCount":{"title":"期间内的总计重试次数","description":"期间内的总计重试次数。","type":"integer","format":"int64","example":"0"},"AvgRowCacheHit":{"title":"期间内的平均RowCache命中次数","description":"期间内的平均 RowCache 命中次数。","type":"integer","format":"int64","example":"0.0"},"AvgDiskReads":{"title":"期间内的平均物理读次数","description":"期间内的平均物理读次数。","type":"integer","format":"int64","example":"0.0"},"AvgMemstoreReadRows":{"title":"期间内的平均Memstore读行数","description":"期间内的平均 Memstore 读行数。","type":"integer","format":"int64","example":"0.0"},"AvgSsstoreReadRows":{"title":"期间内的平均SsStore读行数","description":"期间内的平均SsStore读行数","type":"integer","format":"int64","example":"0.0"},"AvgApplicationWaitTime":{"title":"客户端等待\t期间内的平均Application事件等待时间（毫秒）","description":"客户端等待期间内的平均 Application 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"AvgElapsedTime":{"title":"期间内的平均响应时间（毫秒）","description":"期间内的平均响应时间（毫秒）。","type":"number","format":"double","example":"1876.78"},"AvgExecuteTime":{"title":"期间内的平均计划执行时间（毫秒）","description":"期间内的平均计划执行时间（毫秒）。","type":"number","format":"double","example":"1895.7"},"AvgQueueTime":{"title":"期间内的平均排队时间（毫秒）","description":"期间内的平均排队时间（毫秒）。","type":"number","format":"double","example":"0.01"},"AvgConcurrencyWaitTime":{"title":"期间内的平均Concurrency事件等待时间（毫秒）","description":"期间内的平均 Concurrency 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"AvgCpuTime":{"title":"期间内的平均CPU时间（毫秒）","description":"期间内的平均 CPU 时间（毫秒）。","type":"number","format":"double","example":"1875.34"},"AvgDecodeTime":{"title":"期间内的平均语法解析时间（毫秒）","description":"期间内的平均语法解析时间（毫秒）。","type":"number","format":"double","example":"0.0"},"AvgNetWaitTime":{"title":"网络等待\t期间内的平均网络入队时间（毫秒）","description":"网络等待期间内的平均网络入队时间（毫秒）。","type":"number","format":"double","example":"0.0"},"AvgUserIoWaitTime":{"title":"期间内的平均UserIO事件等待时间（毫秒）","description":"期间内的平均 UserIO 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"AvgGetPlanTime":{"title":"期间内的平均计划生成时间（毫秒）","description":"期间内的平均计划生成时间（毫秒）。","type":"number","format":"double","example":"0.0"},"MaxElapsedTime":{"title":"最大响应时间","description":"最大响应时间。","type":"number","format":"double","example":"13643.3"},"SumWaitTime":{"title":"内部等待\t期间内的总等待时间（毫秒）","description":"内部等待期间内的总等待时间（毫秒）。","type":"number","format":"double","example":"9421.73"},"AvgScheduleTime":{"title":"调度时间\t期间内的平均Schedule事件等待时间（毫秒）","description":"调度时间期间内的平均 Schedule 事件等待时间（毫秒）。","type":"number","format":"double","example":"0.0"},"MaxCpuTime":{"title":"最大 CPU 时间","description":"最大 CPU 时间。","type":"number","format":"double","example":"13641.9"},"SumElapsedTime":{"description":"期间内的总响应时间（毫秒）。","type":"number","format":"double","example":"11452126.36"},"Timestamp":{"title":"采样时间点","description":"采样时间点。","type":"string","example":"2023-04-12T04:46:38Z"},"Server":{"title":"SQL执行所在的Server（svr_ip:svr_port, 兼容tars","description":"SQL 执行所在的 Server。","type":"string","example":"i-bp1db1****8uemejio"},"UserName":{"title":"userName, 兼容tars","description":"用户名。","type":"string","example":"test_user"},"AvgPartitionCount":{"title":"期间内平均访问分区数","description":"期间内平均访问分区数。","type":"number","format":"double","example":"1"},"FailPercentage":{"title":"期间内的错误百分比","description":"期间内的错误百分比。","type":"number","format":"double","example":"0"},"RetCode4012Count":{"title":"期间内结果码4012的发生次数","description":"期间内结果码 4012 的发生次数。","type":"number","format":"double","example":"0"},"RetCode4013Count":{"title":"期间内结果码4013的发生次数","description":"期间内结果码 4013 的发生次数。","type":"number","format":"double","example":"0"},"RetCode5001Count":{"title":"期间内结果码5001的发生次数","description":"期间内结果码 5001 的发生次数。","type":"number","format":"double","example":"0"},"RetCode5024Count":{"title":"期间内结果码5024的发生次数","description":"期间内结果码 5024 的发生次数。","type":"number","format":"double","example":"0"},"RetCode5167Count":{"title":"期间内结果码5167的发生次数","description":"期间内结果码 5167 的发生次数。","type":"number","format":"double","example":"0"},"RetCode5217Count":{"title":"期间内结果码5217的发生次数","description":"期间内结果码 5217 的发生次数。","type":"number","format":"double","example":"0"},"RetCode6002Count":{"title":"期间内结果码6002的发生次数","description":"期间内结果码 6002 的发生次数。","type":"number","format":"double","example":"0"},"AvgWaitTime":{"title":"期间内的平均等待时间（毫秒）","description":"期间内的平均等待时间（毫秒）。","type":"number","format":"double","example":"1442.49"},"AvgWaitCount":{"title":"期间内的平均等待次数","description":"期间内的平均等待次数。","type":"number","format":"double","example":"0"},"LocalPlanPercentage":{"title":"期间内的本地计划百分比","description":"期间内的本地计划百分比。","type":"number","format":"double","example":"0"},"RemotePlanPercentage":{"title":"期间内的远程计划百分比","description":"期间内的远程计划百分比。","type":"number","format":"double","example":"0"},"DistPlanPercentage":{"title":"期间内的分布式计划百分比","description":"期间内的分布式计划百分比。","type":"number","format":"double","example":"100"},"AvgNetTime":{"title":"期间内的平均网络传输时间（毫秒）","description":"期间内的平均网络传输时间（毫秒）。","type":"number","format":"double","example":"8"},"AvgExecutorRpcCount":{"title":"期间内的平均执行RPC请求次数","description":"期间内的平均执行 RPC 请求次数。","type":"number","format":"double","example":"0"},"MissPlanPercentage":{"title":"期间内的计划命中率","description":"期间内的计划命中率。","type":"number","format":"double","example":"0"},"TableScanPercentage":{"title":"期间内的表扫描百分比","description":"期间内的表扫描百分比。","type":"number","format":"double","example":"0"},"StrongConsistencyPercentage":{"title":"期间内的强一致性事务百分比","description":"期间内的强一致性事务百分比。","type":"number","format":"double","example":"100"},"WeakConsistencyPercentage":{"title":"期间内的弱一致性事务百分比","description":"期间内的弱一致性事务百分比。","type":"number","format":"double","example":"0"},"MaxAffectedRows":{"title":"期间内最大更新行数","description":"期间内最大更新行数。","type":"number","format":"double","example":"10000"},"MaxReturnRows":{"title":"期间内最大返回行数","description":"期间内最大返回行数。","type":"number","format":"double","example":"0"},"MaxWaitTime":{"title":"期间内的最大等待时间（毫秒）","description":"期间内的最大等待时间（毫秒）。","type":"number","format":"double","example":"3.4"},"MaxApplicationWaitTime":{"title":"期间内的最大Application事件等待时间（毫秒）","description":"期间内的最大 Application 事件等待时间（毫秒）。","type":"number","format":"double","example":"0"},"MaxConcurrencyWaitTime":{"title":"期间内的最大Concurrency事件等待时间（毫秒）","description":"期间内的最大 Concurrency 事件等待时间（毫秒）。","type":"number","format":"double","example":"0"},"MaxUserIoWaitTime":{"title":"期间内的最大UserIO事件等待时间（毫秒）","description":"期间内的最大 UserIO 事件等待时间（毫秒）。","type":"number","format":"double","example":"0"},"MaxDiskReads":{"title":"期间内的最大物理读次数","description":"期间内的最大物理读次数。","type":"number","format":"double","example":"0"},"AvgExpectedWorkerCount":{"title":"期间内平均并行度","description":"期间内平均并行度。","type":"number","format":"double","example":"3"},"AvgUsedWorkerCount":{"title":"期间内sql平均使用线程数","description":"期间内 SQL 平均使用线程数。","type":"number","format":"double","example":"3"},"SumLogicalReads":{"title":"总逻辑读","description":"总逻辑读。","type":"number","format":"double","example":"0"},"ExecPs":{"description":"期间的平均每秒执行次数。","type":"number","format":"double","example":"0.31"},"AvgDbTime":{"type":"number","format":"double"},"SumDbTime":{"type":"number","format":"double"}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"EE205C00-30E4-****-****-87E3A8A2AA0C\\\",\\n  \\\"Data\\\": [\\n    {\\n      \\\"SQLId\\\": \\\"8D6E84****0B8FB1823D199E2CA1****\\\",\\n      \\\"DbName\\\": \\\"test_db\\\",\\n      \\\"AvgAffectedRows\\\": 9978.75,\\n      \\\"AvgBlockCacheHit\\\": 0,\\n      \\\"AvgBlockIndexCacheHit\\\": 0,\\n      \\\"AvgBloomFilterCacheHit\\\": 0,\\n      \\\"Executions\\\": 1,\\n      \\\"FailCount\\\": 0,\\n      \\\"AvgRpcCount\\\": 8,\\n      \\\"RemotePlans\\\": 0,\\n      \\\"MissPlans\\\": 0,\\n      \\\"AvgReturnRows\\\": 0,\\n      \\\"AvgLogicalReads\\\": 0,\\n      \\\"RetryCount\\\": 0,\\n      \\\"AvgRowCacheHit\\\": 0,\\n      \\\"AvgDiskReads\\\": 0,\\n      \\\"AvgMemstoreReadRows\\\": 0,\\n      \\\"AvgSsstoreReadRows\\\": 0,\\n      \\\"AvgApplicationWaitTime\\\": 0,\\n      \\\"AvgElapsedTime\\\": 1876.78,\\n      \\\"AvgExecuteTime\\\": 1895.7,\\n      \\\"AvgQueueTime\\\": 0.01,\\n      \\\"AvgConcurrencyWaitTime\\\": 0,\\n      \\\"AvgCpuTime\\\": 1875.34,\\n      \\\"AvgDecodeTime\\\": 0,\\n      \\\"AvgNetWaitTime\\\": 0,\\n      \\\"AvgUserIoWaitTime\\\": 0,\\n      \\\"AvgGetPlanTime\\\": 0,\\n      \\\"MaxElapsedTime\\\": 13643.3,\\n      \\\"SumWaitTime\\\": 9421.73,\\n      \\\"AvgScheduleTime\\\": 0,\\n      \\\"MaxCpuTime\\\": 13641.9,\\n      \\\"SumElapsedTime\\\": 11452126.36,\\n      \\\"Timestamp\\\": \\\"2023-04-12T04:46:38Z\\\",\\n      \\\"Server\\\": \\\"i-bp1db1****8uemejio\\\",\\n      \\\"UserName\\\": \\\"test_user\\\",\\n      \\\"AvgPartitionCount\\\": 1,\\n      \\\"FailPercentage\\\": 0,\\n      \\\"RetCode4012Count\\\": 0,\\n      \\\"RetCode4013Count\\\": 0,\\n      \\\"RetCode5001Count\\\": 0,\\n      \\\"RetCode5024Count\\\": 0,\\n      \\\"RetCode5167Count\\\": 0,\\n      \\\"RetCode5217Count\\\": 0,\\n      \\\"RetCode6002Count\\\": 0,\\n      \\\"AvgWaitTime\\\": 1442.49,\\n      \\\"AvgWaitCount\\\": 0,\\n      \\\"LocalPlanPercentage\\\": 0,\\n      \\\"RemotePlanPercentage\\\": 0,\\n      \\\"DistPlanPercentage\\\": 100,\\n      \\\"AvgNetTime\\\": 8,\\n      \\\"AvgExecutorRpcCount\\\": 0,\\n      \\\"MissPlanPercentage\\\": 0,\\n      \\\"TableScanPercentage\\\": 0,\\n      \\\"StrongConsistencyPercentage\\\": 100,\\n      \\\"WeakConsistencyPercentage\\\": 0,\\n      \\\"MaxAffectedRows\\\": 10000,\\n      \\\"MaxReturnRows\\\": 0,\\n      \\\"MaxWaitTime\\\": 3.4,\\n      \\\"MaxApplicationWaitTime\\\": 0,\\n      \\\"MaxConcurrencyWaitTime\\\": 0,\\n      \\\"MaxUserIoWaitTime\\\": 0,\\n      \\\"MaxDiskReads\\\": 0,\\n      \\\"AvgExpectedWorkerCount\\\": 3,\\n      \\\"AvgUsedWorkerCount\\\": 3,\\n      \\\"SumLogicalReads\\\": 0,\\n      \\\"ExecPs\\\": 0.31\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询 SQL 执行历史"}