{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"Namespace","in":"query","schema":{"description":"AHAS命名空间，默认为default，可以在控制台上创建不同namespace用于逻辑隔离。","type":"string","required":true,"docRequired":true,"example":"default"}},{"name":"AppName","in":"query","schema":{"description":"应用名（避免中文命名），若为EDAS应用，则AppName为EDAS中的App ID，可在EDAS控制台具体应用的基本信息页签中查看对应的ID。","type":"string","required":true,"docRequired":true,"example":"ahas-demo"}},{"name":"Resource","in":"query","schema":{"description":"REST或RPC接口名，需符合REST或RPC接口格式规范。","type":"string","required":true,"docRequired":true,"example":"handleService"}},{"name":"Strategy","in":"query","schema":{"description":"阈值类型，即降级的策略，取值为0时表示按慢调用比例降级，取值为1时表示按异常比例降级。","type":"integer","format":"int32","required":true,"docRequired":true,"example":"0"}},{"name":"Threshold","in":"query","schema":{"description":"阈值类型所对应的降级阈值，超过该值时会触发接口的降级。","type":"number","format":"float","required":true,"docRequired":true,"example":"0.6"}},{"name":"Enable","in":"query","schema":{"description":"规则是否开启。默认为false。","type":"boolean","required":false,"example":"true"}},{"name":"RecoveryTimeoutMs","in":"query","schema":{"description":"熔断时长。在该时间段内，该接口的请求都会快速失败，单位毫秒。","type":"integer","format":"int32","required":true,"docRequired":true,"example":"5000"}},{"name":"StatDurationMs","in":"query","schema":{"description":"统计窗口时长，单位毫秒。默认值为1000。","type":"integer","format":"int32","required":false,"example":"2000"}},{"name":"SlowRtMs","in":"query","schema":{"description":"慢调用RT。请求的响应时间超过该值时统计为慢调用。阈值类型为“慢调用比例”时需设置该字段。","type":"integer","format":"int32","required":false,"example":"2000"}},{"name":"MinRequestAmount","in":"query","schema":{"description":"触发熔断的最小请求数目，若当前统计窗口请求数小于此值，即使达到熔断条件规则也不会触发。默认值为5。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"HalfOpenBaseAmountPerStep","in":"query","schema":{"description":"熔断恢复每步最小通过数目，默认值为5。","type":"integer","format":"int32","required":false,"example":"5"}},{"name":"HalfOpenRecoveryStepNum","in":"query","schema":{"description":"熔断恢复阶段数，默认值为1。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"AhasRegionId","in":"query","schema":{"description":"地域","type":"string","required":false,"example":"cn-hangzhou"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"错误信息。","type":"string","example":"null"},"RequestId":{"description":"请求Request ID。","type":"string","example":"3FEEAD12-CE22-4EDE-A729-CE94EC070610"},"Data":{"description":"规则数据。","type":"object","properties":{"SlowRtMs":{"description":"慢调用RT。","type":"integer","format":"int32","example":"2000"},"HalfOpenRecoveryStepNum":{"description":"熔断恢复阶段数。","type":"integer","format":"int32","example":"1"},"Namespace":{"description":"命名空间。","type":"string","example":"default"},"StatDurationMs":{"description":"统计窗口时长。","type":"integer","format":"int32","example":"2000"},"RuleId":{"description":"规则ID。","type":"integer","format":"int64","example":"1"},"Strategy":{"description":"阈值类型。","type":"integer","format":"int32","example":"0"},"Resource":{"description":"资源名。","type":"string","example":"handleService"},"AppName":{"description":"应用名，若为EDAS应用，则AppName为EDAS中的App ID，可在EDAS控制台“具体应用>基本信息页签”中查看对应的ID。","type":"string","example":"ahas-demo"},"HalfOpenBaseAmountPerStep":{"description":"熔断恢复每步最小通过数目，默认值为5。","type":"integer","format":"int32","example":"5"},"RecoveryTimeoutMs":{"description":"熔断时长。","type":"integer","format":"int32","example":"5000"},"MinRequestAmount":{"description":"触发熔断的最小请求数。","type":"integer","format":"int32","example":"10"},"Threshold":{"description":"降级阈值。","type":"number","format":"float","example":"0.6"},"Enable":{"description":"规则是否开启。","type":"boolean","example":"true"}}},"Code":{"description":"错误码。","type":"string","example":"200"},"Success":{"description":"是否成功。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalArgument.AppName","errorMessage":"The specified AppName is invalid."},{"errorCode":"IllegalArgument.HalfOpenBaseAmountPerStep","errorMessage":"The specified HalfOpenBaseAmountPerStep is invalid."},{"errorCode":"IllegalArgument.HalfOpenRecoveryStepNum","errorMessage":"The specified HalfOpenRecoveryStepNum is invalid."},{"errorCode":"IllegalArgument.MinRequestAmount","errorMessage":"The specified MinRequestAmount is invalid."},{"errorCode":"IllegalArgument.Namespace","errorMessage":"The specified Namespace is invalid."},{"errorCode":"IllegalArgument.RecoveryTimeoutMs","errorMessage":"The specified RecoveryTimeoutMs is invalid."},{"errorCode":"IllegalArgument.Resource","errorMessage":"The specified Resource is invalid."},{"errorCode":"IllegalArgument.SlowRtMS","errorMessage":"The specified SlowRtMs is invalid."},{"errorCode":"IllegalArgument.StatDurationMs","errorMessage":"The specified StatDurationMs is invalid."},{"errorCode":"IllegalArgument.Strategy","errorMessage":"The specified Strategy is invalid."},{"errorCode":"IllegalArgument.Threshold","errorMessage":"The specified Threshold is invalid."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Message\\\": \\\"null\\\",\\n  \\\"RequestId\\\": \\\"3FEEAD12-CE22-4EDE-A729-CE94EC070610\\\",\\n  \\\"Data\\\": {\\n    \\\"SlowRtMs\\\": 2000,\\n    \\\"HalfOpenRecoveryStepNum\\\": 1,\\n    \\\"Namespace\\\": \\\"default\\\",\\n    \\\"StatDurationMs\\\": 2000,\\n    \\\"RuleId\\\": 1,\\n    \\\"Strategy\\\": 0,\\n    \\\"Resource\\\": \\\"handleService\\\",\\n    \\\"AppName\\\": \\\"ahas-demo\\\",\\n    \\\"HalfOpenBaseAmountPerStep\\\": 5,\\n    \\\"RecoveryTimeoutMs\\\": 5000,\\n    \\\"MinRequestAmount\\\": 10,\\n    \\\"Threshold\\\": 0.6,\\n    \\\"Enable\\\": true\\n  },\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDegradeRuleResponse>\\n    <Message>null</Message>\\n    <RequestId>3FEEAD12-CE22-4EDE-A729-CE94EC070610</RequestId>\\n    <Data>\\n        <SlowRtMs>2000</SlowRtMs>\\n        <HalfOpenRecoveryStepNum>1</HalfOpenRecoveryStepNum>\\n        <Namespace>default</Namespace>\\n        <StatDurationMs>2000</StatDurationMs>\\n        <RuleId>1</RuleId>\\n        <Strategy>0</Strategy>\\n        <Resource>handleService</Resource>\\n        <AppName>ahas-demo</AppName>\\n        <HalfOpenBaseAmountPerStep>5</HalfOpenBaseAmountPerStep>\\n        <RecoveryTimeoutMs>5000</RecoveryTimeoutMs>\\n        <MinRequestAmount>10</MinRequestAmount>\\n        <Threshold>0.6</Threshold>\\n        <Enable>true</Enable>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</CreateDegradeRuleResponse>\",\"errorExample\":\"\"}]","title":"创建降级规则","summary":"调用CreateDegradeRule接口创建降级规则。","requestParamsDescription":" 详细参数说明参照文档[降级规则](https://help.aliyun.com/document_detail/101078.html)。","responseParamsDescription":" ","extraInfo":" "}