{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"GroupId","in":"query","schema":{"description":"应用分组ID。","type":"integer","format":"int64","required":true,"example":"123456"}},{"name":"TaskName","in":"query","schema":{"description":"可用性监控任务名称。取值范围：4~100个字符，支持英文字母、数字、下划线（_）和汉字。","type":"string","required":true,"example":"task1"}},{"name":"TaskScope","in":"query","schema":{"description":"可用性监控任务的探测范围。取值：\n\n- GROUP：表示将当前应用分组内的所有ECS实例作为探测任务的探针。\n- GROUP_SPEC_INSTANCE：表示将当前应用分组内的指定ECS实例作为探测任务的探针。设置该参数时，需要同时设置InstanceList（发起探测的ECS实例列表）。","type":"string","required":false,"example":"GROUP","default":"GROUP"}},{"name":"TaskType","in":"query","schema":{"description":"可用性监控任务的探测类型。取值：\n\n- PING\n- TELNET\n- HTTP","type":"string","required":true,"example":"HTTP"}},{"name":"TaskOption.HttpURI","in":"query","schema":{"description":"HTTP、Telnet探测类型的探测URI地址。","type":"string","required":false,"example":"https://www.aliyun.com\ntelnet://127.0.0.1:80"}},{"name":"TaskOption.TelnetOrPingHost","in":"query","schema":{"description":"探测的域名或地址。\n>如果探测任务类型为PING，则需要设置该参数。","type":"string","required":false,"example":"www.aliyun.com"}},{"name":"TaskOption.HttpResponseCharset","in":"query","schema":{"description":"HTTP探测类型的响应字符集。\n\n> 仅支持UTF-8。","type":"string","required":false,"example":"UTF-8"}},{"name":"TaskOption.HttpPostContent","in":"query","schema":{"description":"HTTP探测类型探测请求的Post内容。","type":"string","required":false,"example":"params1=paramsValue1"}},{"name":"TaskOption.HttpResponseMatchContent","in":"query","schema":{"description":"匹配响应的内容。","type":"string","required":false,"example":"ok"}},{"name":"TaskOption.HttpMethod","in":"query","schema":{"description":"探测类型的方法。取值：\n\n- GET\n- POST\n- HEAD\n\n>如果任务的探测类型为HTTP，则需要设置该参数。","type":"string","required":false,"example":"GET"}},{"name":"TaskOption.HttpNegative","in":"query","schema":{"description":"匹配HTTP响应内容的报警规则。取值：\n- true：如果HTTP响应内容包含设置的报警规则，则报警。\n- false：如果HTTP响应内容不包含设置的报警规则，则报警。\n\n>如果任务的探测类型为HTTP，则该参数生效。","type":"boolean","required":false,"example":"true"}},{"name":"TaskOption.HttpHeader","in":"query","schema":{"description":"HTTP请求的Header。格式为`参数名:参数`，多个参数之间用回车符分隔，例如：\n```\nparams1:value1\nparams2:value2\n```","type":"string","required":false,"example":"token:testTokenValue"}},{"name":"TaskOption.Interval","in":"query","schema":{"description":"探测频率。单位：秒。取值：15、30、60、120、300、900、1800和3600。\n\n> 仅3.5.1及以上版本的云监控插件支持该参数。","type":"integer","format":"int32","required":false,"example":"60"}},{"name":"AlertConfig.NotifyType","in":"query","schema":{"description":"报警通知类型。取值：\n\n<props=\"china\">- 2：电话+短信+邮件+钉钉机器人。</props>\n\n<props=\"china\">- 1：短信+邮件+钉钉机器人。</props>\n\n<props=\"china\">- 0：邮件+钉钉机器人。</props>\n\n\n<props=\"intl\">0：邮件+钉钉机器人。</props>\n\n<props=\"partner\">0：邮件+钉钉机器人。</props>","type":"integer","format":"int32","required":true,"example":"0"}},{"name":"AlertConfig.StartTime","in":"query","schema":{"description":"报警生效的开始时间。取值范围：0~23。\n\n例如：`AlertConfig.StartTime`为0，`AlertConfig.EndTime`为22，表示报警生效时间为00:00:00至22:00:00。\n\n>如果报警不在生效时间内，则超过阈值也不会发送报警通知。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"AlertConfig.EndTime","in":"query","schema":{"description":"报警生效的结束时间。取值范围：0~23。\n\n例如：`AlertConfig.StartTime`为0，`AlertConfig.EndTime`为22，表示报警生效时间为00:00:00至22:00:00。\n\n>如果报警不在生效时间内，则超过阈值也不会发送报警通知。","type":"integer","format":"int32","required":false,"example":"22"}},{"name":"AlertConfig.SilenceTime","in":"query","schema":{"description":"通道沉默时间。单位：秒，默认值：86400（1天）。","type":"integer","format":"int32","required":false,"example":"86400"}},{"name":"AlertConfig.WebHook","in":"query","schema":{"description":"URL回调地址。","type":"string","required":false,"example":"https://www.aliyun.com/webhook.json"}},{"name":"AlertConfigEscalationList","in":"query","style":"repeatList","schema":{"description":"无。","type":"array","items":{"description":"无。","type":"object","properties":{"MetricName":{"description":"报警的监控项。N的取值范围：1~21。取值：\n\n- HttpStatus：HTTP状态码。\n- HttpLatency：HTTP等待时间。\n- TelnetStatus：Telnet状态码。\n- TelnetLatency：Telnet等待时间。\n- PingLostRate：Ping丢包率。","type":"string","required":true,"example":"HttpStatus"},"Value":{"description":"报警阈值。N的取值范围：1~21。","type":"string","required":false,"example":"90"},"Times":{"description":"报警重试次数。N的取值范围：1~21。","type":"integer","format":"int32","required":false,"example":"3"},"Operator":{"description":"报警规则比较符号。N的取值范围：1~21。取值：\n\n- `>`\n- `>=`\n- `<`\n- `<=`\n- `=`","type":"string","required":false,"example":">"},"Aggregate":{"description":"报警统计方法。N的取值范围：1~21。不同监控项的取值如下：\n\n- HttpStatus：Value。\n- HttpLatency：Average。\n- TelnetStatus：Value。\n- TelnetLatency：Average。\n- PingLostRate：Average。\n\n>状态码类的统计方法为原始值（Value），延时时间或丢包率的统计方法为平均值（Average）。","type":"string","required":false,"example":"Value"}},"required":false},"required":true,"maxItems":10}},{"name":"InstanceList","in":"query","style":"repeatList","schema":{"description":"发起探测的ECS实例列表。N的取值范围：1~21。\n\n> 当`TaskScope`为`GROUP_SPEC_INSTANCE`时，需要设置该参数。","type":"array","items":{"description":"发起探测的ECS实例列表。N的取值范围：1~21。\n\n> 当`TaskScope`为`GROUP_SPEC_INSTANCE`时，需要设置该参数。","type":"string","required":false,"example":"2"},"required":false,"example":"i-absdfkwl321****","maxItems":1000}},{"name":"AlertConfigTargetList","in":"query","style":"flat","schema":{"description":"报警触发目标。","type":"array","items":{"description":"报警触发目标。","type":"object","properties":{"Id":{"description":"报警触发目标ID。","type":"string","required":false,"example":"1"},"Arn":{"description":"资源ARN。格式为`acs:{云产品缩写}:{regionId}:{userId}:/{资源类型}/{资源名称}/message`。例如：`acs:mns:cn-hangzhou:120886317861****:/queues/test123/message`。参数说明如下：\n\n- {云产品缩写}：目前仅支持消息服务MNS。\n\n- {userId}：阿里云账号ID。\n\n- {regionId}：消息队列或主题所在地域。\n\n- {资源类型}`：接收报警的资源类型。取值：\n\n  - **queues**：队列。\n  - **topics**：主题。\n\n- {资源名称}：资源名称。\n\n  - 如果资源类型为**queues**，则资源名称为队列名称。\n  - 如果资源类型为**topics**，则资源名称为主题名称。\n\n\n\n ","type":"string","required":false,"example":"acs:mns:cn-hangzhou:120886317861****:/queues/test/message"},"Level":{"description":"报警级别。取值：\n\n- INFO：信息。\n- WARN：警告。\n- CRITICAL：紧急。","type":"string","required":false,"example":"[\"INFO\", \"WARN\", \"CRITICAL\"]"},"JsonParams":{"description":"报警回调的JSON格式参数。","type":"string","required":false,"example":"{\"customField1\":\"value1\",\"customField2\":\"$.name\"}"}},"required":false},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"状态码。\n\n>200表示成功。","type":"string","example":"200"},"Message":{"description":"错误信息。","type":"string","example":"The specified resource is not found."},"RequestId":{"description":"请求ID。","type":"string","example":"ACBDBB40-DFB6-4F4C-8957-51FFB233969C"},"TaskId":{"description":"可用性监控任务ID。","type":"integer","format":"int64","example":"12345"},"Success":{"description":"操作是否成功。取值：\n\n- true：成功。\n\n- false：失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"ParameterInvalid","errorMessage":"Illegal parameters."}],"403":[{"errorCode":"AccessForbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"ResourceNotFound","errorMessage":"%s"}],"409":[{"errorCode":"ResourceConflict","errorMessage":"Concurrent modification of resources."},{"errorCode":"ResourceExist","errorMessage":"Resources already exist."}],"412":[{"errorCode":"ResouceOverLimit","errorMessage":"The task over limit"}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"The specified resource is not found.\\\",\\n  \\\"RequestId\\\": \\\"ACBDBB40-DFB6-4F4C-8957-51FFB233969C\\\",\\n  \\\"TaskId\\\": 12345,\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateHostAvailabilityResponse>\\n\\t<TaskId>12345</TaskId>\\n\\t<RequestId>CDA78493-F10F-485F-98AD-B4C0B40AB225</RequestId>\\n\\t<Code>200</Code>\\n\\t<Success>true</Success>\\n</CreateHostAvailabilityResponse>\",\"errorExample\":\"\"}]","title":"创建可用性监控任务","summary":"调用CreateHostAvailability接口创建可用性监控任务。","description":"本文将提供一个示例，在应用分组`123456`中创建探测类型为`HTTP`的可用性监控任务`task1`，通过邮件和钉钉机器人给您发送报警。\n\n","requestParamsDescription":"关于公共请求参数的详情，请参见[公共参数](~~199331~~)。","responseParamsDescription":" ","extraInfo":" "}