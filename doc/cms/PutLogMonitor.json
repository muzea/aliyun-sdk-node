{"summary":"调用PutLogMonitor接口创建或修改日志监控。","methods":["post","put"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"LogId","in":"query","schema":{"description":"日志监控ID。","type":"string","required":false,"example":"16****"}},{"name":"SlsRegionId","in":"query","schema":{"description":"日志服务中日志项目（Project）所在地域。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"SlsProject","in":"query","schema":{"description":"日志服务中日志项目的名称。","type":"string","required":true,"example":"test-project"}},{"name":"SlsLogstore","in":"query","schema":{"description":"日志服务中日志库的名称。","type":"string","required":true,"example":"test-logstore"}},{"name":"MetricName","in":"query","schema":{"description":"监控项名称。关于云监控支持云服务的监控项，请参见[云产品监控项](~~163515~~)。","type":"string","required":true,"example":"cpu_total"}},{"name":"MetricExpress","in":"query","schema":{"description":"扩展字段。 扩展字段为统计方法中的结果提供四则运算的功能。\n\n例如：在统计方法中配置了HTTP状态码请求总数TotalNumber和HTTP状态码大于499的请求数5xxNumber，则可以通过扩展字段计算出服务端的错误率：5xxNumber/TotalNumber*100。\n\nJSON格式：{\"extend\":{\"errorPercent\":\"5xxNumber/TotalNumber*100\"}}。字段说明如下：\n\n- extend：必填字段。\n\n- errorPercent：计算结果生成新字段的别名，您可以根据真实情况自行命名。 \n\n- errorPercent：现有字段的计算表达式。","type":"string","required":false,"example":"{\"extend\":{\"errorPercent\":\"5XXNumber/TotalNumber*100\"}}"}},{"name":"GroupId","in":"query","schema":{"description":"应用分组ID。","type":"string","required":false,"example":"7301****"}},{"name":"ValueFilterRelation","in":"query","schema":{"description":"日志筛选的过滤条件。取值：\n\n- and：和。\n\n- or：或。\n\n> 本参数需要与`ValueFilter.N.Key`配合使用。","type":"string","required":true,"example":"and"}},{"name":"Tumblingwindows","in":"query","schema":{"description":"预计算窗口时间。单位：秒。云监控将在定义的预计算时间对数据做一次聚合计算。","type":"string","required":false,"example":"60,300"}},{"name":"Unit","in":"query","schema":{"description":"单位。","type":"string","required":false,"example":"Percent"}},{"name":"Aggregates","in":"query","style":"repeatList","schema":{"description":"聚合计算定义。","type":"array","items":{"type":"object","properties":{"FieldName":{"description":"聚合计算原始的字段名称。N的取值范围：1~10。","type":"string","required":true,"example":"sourceCount"},"Function":{"description":"在计算周期内根据选定的统计方法对日志数据进行聚合处理。N的取值范围：1~10。取值：\n- count：计数。\n- sum：求和。\n- avg：平均值。\n- max：最大值。\n- min：最小值。\n- countps：计算统计周期内指定字段求count后的每秒平均值。\n- sumps：计算统计周期内指定字段求sum后的每秒平均值。\n- distinct：去重后计算统计周期内指定字段出现的次数。","type":"string","required":true,"example":"count"},"Alias":{"description":"聚合计算别名。N的取值范围：1~10。","type":"string","required":true,"example":"Count"}},"required":false},"required":true,"maxItems":10}},{"name":"Groupbys","in":"query","style":"repeatList","schema":{"description":"对数据进行空间维度聚合。相当于SQL中的Group By，根据指定的维度，对监控数据进行分组。如果Group By不选择任何维度，则根据聚合方法对全部监控数据进行聚合。","type":"array","items":{"type":"object","properties":{"FieldName":{"description":"GroupBy字段名称。N的取值范围：1~10。 ","type":"string","required":false,"example":"cpu"},"Alias":{"description":"GroupBy别名。N的取值范围：1~10。","type":"string","required":false,"example":"CPUUtilization"}},"required":false},"required":false,"maxItems":10}},{"name":"ValueFilter","in":"query","style":"repeatList","schema":{"description":"筛选的过滤规则，配合ValueFilterRelation使用。相当于SQL中的Where条件。如果不填写，则表示对全部数据进行处理。例如：日志中有Level和Error字段，如果需要统计每分钟Error出现的次数，则统计方法可以定义为对Level求和，并且Level=Error。","type":"array","items":{"type":"object","properties":{"Key":{"description":"日志匹配的字段名名称。N的取值范围：1~10。","type":"string","required":false,"example":"lh_source"},"Value":{"description":"日志匹配的字段值。N的取值范围：1~10。","type":"string","required":false,"example":"test"},"Operator":{"description":"字段值的匹配方式。N的取值范围：1~10。取值：\n- `contain`：包含。\n- `notContain`：不包含。\n- `>`：大于。\n- `<`：小于。\n- `>=`：大于等于。\n- `<=`：小于等于。","type":"string","required":false,"example":"contain"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"状态码。\n\n> 200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息。结果如下：\n\n- 当操作成功时，返回`successful`。\n\n- 当操作失败时，返回错误信息，例如：`alias of aggreate must be set value.`。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"91561287-0802-5F9C-9BDE-404C50D41B06"},"LogId":{"description":"日志监控ID。","type":"string","example":"16****"},"Success":{"description":"操作是否成功。取值：\n\n- true：成功。\n\n- false：失败。","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"ParameterInvalid","errorMessage":"%s"},{"errorCode":"LimitorError","errorMessage":"Log monitor limit is not enough"}],"403":[{"errorCode":"AccessForbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"ResourceNotFound","errorMessage":"The specified resource is not found."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"91561287-0802-5F9C-9BDE-404C50D41B06\\\",\\n  \\\"LogId\\\": \\\"16****\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<PutLogMonitorResponse>\\r\\n\\t<Message>successful</Message>\\r\\n\\t<RequestId>91561287-0802-5F9C-9BDE-404C50D41B06</RequestId>\\r\\n\\t<Code>200</Code>\\r\\n\\t<LogId>16****</LogId>\\r\\n\\t<Success>true</Success>\\r\\n</PutLogMonitorResponse>\",\"errorExample\":\"\"}]","title":"创建或修改日志监控","description":"本文将提供一个示例，创建一个日志监控`cpu_total`。返回结果显示，创建日志监控成功，日志监控ID为`16****`。","requestParamsDescription":"关于公共请求参数的详情，请参见[公共参数](~~199331~~)。","responseParamsDescription":" ","extraInfo":" "}