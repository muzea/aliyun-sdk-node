{"summary":"调用CreateSiteMonitor接口创建站点监控任务。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"Address","in":"query","schema":{"description":"监控任务的URL或IP地址。","type":"string","required":true,"example":"https://www.aliyun.com"}},{"name":"TaskType","in":"query","schema":{"description":"监控任务的监控类型。\n\n目前站点监控任务的类型包括：HTTP（S）、PING、TCP、UDP、DNS、SMTP、POP3、FTP。","type":"string","required":true,"example":"HTTP"}},{"name":"TaskName","in":"query","schema":{"description":"监控任务的名称。\n\n长度4~100个字符，取值可包含英文字母、数字、下划线（_）和汉字。","type":"string","required":true,"example":"HanZhou_ECS1"}},{"name":"Interval","in":"query","schema":{"description":"监控频率。\n\n取值：1分钟、5分钟、15分钟、30分钟和60分钟。\n\n默认值：1分钟。","type":"string","required":false,"example":"1","default":"1"}},{"name":"IspCities","in":"query","schema":{"description":"探针信息。如果该参数取值为空，则系统随机选择3个探测点。\n\n格式为JSONArray，例如：`[{\"city\":\"546\",\"isp\":\"465\"},{\"city\":\"572\",\"isp\":\"465\"},{\"city\":\"738\",\"isp\":\"465\"}]`，分别对应北京、杭州、青岛。\n\n关于如何获取探测点信息，请参见[DescribeSiteMonitorISPCityList](~~115045~~)。","type":"string","required":false,"example":"[{\"city\":\"546\",\"isp\":\"465\"},{\"city\":\"572\",\"isp\":\"465\"},{\"city\":\"738\",\"isp\":\"465\"}]"}},{"name":"OptionsJson","in":"query","schema":{"description":"监控任务对应协议类型的高级扩展选项。不同监控任务的协议类型对应不同的扩展选项。","type":"string","required":false,"example":"{\"time_out\":5000}"}},{"name":"AlertIds","in":"query","schema":{"description":"报警规则ID。\n\n关于如何获取云监控中已存在的报警规则ID，请参见[DescribeMetricRuleList](~~114941~~)。\n\n","type":"string","required":false,"example":"SystemDefault_acs_ecs_dashboard_InternetOutRate_Percent"}},{"name":"CustomSchedule","in":"query","allowEmptyValue":true,"schema":{"description":"自定义探测周期。只能选择周一至周日的某个时间段进行探测。","type":"string","required":false,"example":"{\"start_hour\":0,\"end_hour\":24, \"days\":[0], \"time_zone\":\"Local\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"状态码。\n\n> 200表示成功。","type":"string","example":"200"},"Message":{"description":"返回信息。","type":"string","example":"Successful"},"RequestId":{"description":"请求ID。","type":"string","example":"68192f5d-0d45-4b98-9724-892813f86c71"},"Success":{"description":"操作是否成功。取值：\n\n- true：成功。\n\n- false：失败。","type":"string","example":"true"},"Data":{"description":"监控任务的结果详情。","type":"object","properties":{"AttachAlertResult":{"type":"object","properties":{"Contact":{"description":"关联已有报警规则的结果。","type":"array","items":{"description":"关联已有报警规则的结果。","type":"object","properties":{"Code":{"description":"关联报警规则的状态码。\n\n> 200表示成功。","type":"string","example":"200"},"Message":{"description":"关联报警规则的返回信息。","type":"string","example":"successful"},"RequestId":{"description":"关联报警规则的请求ID。","type":"string","example":"5dd33455-4f65-4b0c-9200-33d66f3f340b"},"Success":{"description":"关联报警规则是否成功。取值：\n\n- true：成功。\n\n- false：失败。","type":"string","example":"true"},"RuleId":{"description":"关联报警规则的ID。","type":"string","example":"SystemDefault_acs_ecs_dashboard_InternetOutRate_Percent"}}}}}}}},"CreateResultList":{"type":"object","properties":{"CreateResultList":{"description":"返回结果。\n\n当创建监控任务成功时，有返回结果；当创建监控任务失败时，无返回结果。","type":"array","items":{"description":"返回结果。\n\n当创建监控任务成功时，有返回结果；当创建监控任务失败时，无返回结果。","type":"object","properties":{"TaskId":{"description":"监控任务ID。","type":"string","example":"2c8dbdf9-a3ab-46a1-85a4-f094965e****"},"TaskName":{"description":"监控任务名称。","type":"string","example":"HanZhou_ECS1"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidQueryParameter","errorMessage":"%s"},{"errorCode":"IllegalAddress","errorMessage":"Illegal HTTP address"},{"errorCode":"OperationError","errorMessage":"Operation failed"},{"errorCode":"TaskNotExists","errorMessage":"Task does not exist"},{"errorCode":"OperatorInvalid","errorMessage":"Operator invalid"},{"errorCode":"OperatorCityInvalid","errorMessage":"Operator City invalid"},{"errorCode":"NameRepeat","errorMessage":"Task name repeat"},{"errorCode":"CreateAlarmError","errorMessage":"Create alarm error"},{"errorCode":"NameNotExists","errorMessage":"Task name not exists"}],"401":[{"errorCode":"AccessDeniedException","errorMessage":"You donot have sufficient access to perform this action."}],"402":[{"errorCode":"LimitExceeded","errorMessage":"The quota for this customer had been reached."}],"403":[{"errorCode":"Forbidden","errorMessage":"%s"},{"errorCode":"RestrictedUser","errorMessage":"The user's operation is restricted, please register NAAM product code"}],"406":[{"errorCode":"ExceedingQuota","errorMessage":"Exceeding quota limits."}],"409":[{"errorCode":"%s","errorMessage":"%s"}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}],"503":[{"errorCode":"%s","errorMessage":"%s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"Successful\\\",\\n  \\\"RequestId\\\": \\\"68192f5d-0d45-4b98-9724-892813f86c71\\\",\\n  \\\"Success\\\": \\\"true\\\",\\n  \\\"Data\\\": {\\n    \\\"AttachAlertResult\\\": {\\n      \\\"Contact\\\": [\\n        {\\n          \\\"Code\\\": \\\"200\\\",\\n          \\\"Message\\\": \\\"successful\\\",\\n          \\\"RequestId\\\": \\\"5dd33455-4f65-4b0c-9200-33d66f3f340b\\\",\\n          \\\"Success\\\": \\\"true\\\",\\n          \\\"RuleId\\\": \\\"SystemDefault_acs_ecs_dashboard_InternetOutRate_Percent\\\"\\n        }\\n      ]\\n    }\\n  },\\n  \\\"CreateResultList\\\": {\\n    \\\"CreateResultList\\\": [\\n      {\\n        \\\"TaskId\\\": \\\"2c8dbdf9-a3ab-46a1-85a4-f094965e****\\\",\\n        \\\"TaskName\\\": \\\"HanZhou_ECS1\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateSiteMonitorResponse>\\r\\n\\t<Message>successful</Message>\\r\\n\\t<RequestId>68192f5d-0d45-4b98-9724-892813f86c71</RequestId>\\r\\n\\t<Data>\\r\\n\\t\\t<AttachAlertResult>\\r\\n\\t\\t\\t<Contact>\\r\\n\\t\\t\\t\\t<Message>successful</Message>\\r\\n\\t\\t\\t\\t<RequestId>5dd33455-4f65-4b0c-9200-33d66f3f340b</RequestId>\\r\\n\\t\\t\\t\\t<RuleId>SystemDefault_acs_ecs_dashboard_InternetOutRate_Percent</RuleId>\\r\\n\\t\\t\\t\\t<Code>200</Code>\\r\\n\\t\\t\\t\\t<Success>true</Success>\\r\\n\\t\\t\\t</Contact>\\r\\n\\t\\t</AttachAlertResult>\\r\\n\\t</Data>\\r\\n\\t<Code>200</Code>\\r\\n\\t<CreateResultList>\\r\\n\\t\\t<CreateResultList>\\r\\n\\t\\t\\t<TaskId>2c8dbdf9-a3ab-46a1-85a4-f094965e****</TaskId>\\r\\n\\t\\t\\t<TaskName>HanZhou_ECS1</TaskName>\\r\\n\\t\\t</CreateResultList>\\r\\n\\t</CreateResultList>\\r\\n\\t<Success>true</Success>\\r\\n</CreateSiteMonitorResponse>\",\"errorExample\":\"\"}]","title":"创建站点监控任务","description":"本文将提供一个示例，创建一个站点监控任务`HanZhou_ECS1`，该监控任务的监控地址为`https://www.aliyun.com`、监控类型为`HTTPS`。","requestParamsDescription":"TaskType中HTTP（S）、PING、TCP、UDP、DNS、SMTP、POP3和FTP的高级参数的设置方法如下表所示。\n\n- HTTP（S）\n\n|参数 |类型 |描述|\n| ----- | -------------- | ----------- |\n|http_method |String |HTTP或HTTPS请求方式。支持三种请求方式：GET、POST、HEAD。默认值：GET。           |\n|header |String |换行符（\\n）分隔的自定义HTTP header。<br>每行Header格式需符合HTTP协议（使用半角冒号分隔的键值）。          |\n|cookie |String |Cookie和HTTP请求标准的写法一致。   |\n|request_content |String |请求内容。支持两种格式：JSON和表单。不提供时，请求中不含正文。 |\n|response_content |String |期望的回应内容。探测时会在HTTP服务器返回的前64个字节进行检查。        |\n|match_rule |String |0：回应中不含response_content时，探测成功。<br>1：回应中含response_content时，探测成功。      |\n|username |String |如果提供用户名，则会在HTTP请求中携带BasicAuth header。          |\n|password |String |HTTP或HTTPS请求验证密码。        |\n|time_out |int |超时时间。单位：毫秒。默认值：5 。      |\n|max_redirect |int |最大跳转次数。ECS探针默认5次，运营商探针默认2次。<br>如果需要禁止跳转，则将该参数设置为：0。<br>取值范围：0~50 。  |\n\n \n- PING\n\n|参数  |类型  |描述 |\n| ----- | -------------- | ----------- |\n|failure_rate |文本 |当PING失败率超过该参数时，探测失败，返回610（PingAllFail）或615（PingPartialFail）。<br>默认值：0.1。      |\n|ping_num |int |PING次数，默认值：10。<br>取值范围：1~100。    |\n\n- DNS\n\n|参数  |类型  |描述 |\n| ----- | -------------- | ----------- |\n|dns_server |string |DNS服务器地址，可以为域名或IP地址。   |\n|dns_type |string |DNS查询类型。取值：A、NS、CNAME、MX、TXT、ANY、AAAA。 |\n|expect_value |string |英文空白符分隔的期望值列表。   |\n|match_rule |string |期望值列表与DNS列表的关系，当不满足指定关系时，探测失败。  <br>空字符串或IN_DNS：期望值列表是DNS列表的子集。 <br>DNS_IN：DNS列表是期望值列表的子集。   <br>EQUAL：DNS列表与期望值列表相等。  <br>ANY：DNS列表与期望值列表有交集（交集不为空）。  |\n\n- FTP\n\n|参数  |类型  |描述 |\n| ----- | -------------- | ----------- |\n|port |int |FTP服务器端口号。如果不提供，则使用默认值。FTP默认值：21，FTPS默认值：990。 |\n|username |string |FTP用户名。 如果未提供，则匿名登录。 |\n|password |string |FTP密码。  |\n\n- POP3或SMTP\n\n|参数  |类型  |描述 |\n| ----- | -------------- | ----------- |\n|port |int |POP3或SMTP服务器的端口号。POP3默认值：110，POP3S默认值：995，SMTP默认值：25。 |\n|username |string |POP3或SMTP的用户名。POP3或SMTP的用户名和密码必填。  |\n|password |string |POP3或SMTP的密码。POP3或SMTP的用户名和密码必填。 |\n\n- TCP或UDP\n\n|参数  |类型  |描述 |\n| ----- | -------------- | ----------- |\n|port |int |TCP或UDP服务器的端口。 |\n|request_content |string |请求内容。当request_format为hex时，request_content内容为十六进制紧凑格式。 |\n|request_format |string |当request_format为其他值时，request_content作为普通字符串发送给TCP或UDP服务器。 |\n|response_content |string |回应内容。当TCP或UDP服务器返回的内容中不含response_content时，探测失败。<br>当response_format为hex时，response_content中的内容为十六进制紧凑格式。<br>当response_content为其他值时，response_content为普通字符串。 |\n","responseParamsDescription":" ","extraInfo":"\n\n\n"}