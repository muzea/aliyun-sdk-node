{"path":"/pop/v1/wam/appEnv","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":true,"parameters":[{"name":"EnvName","in":"formData","schema":{"description":"环境名称","type":"string","required":false,"example":"envTest"}},{"name":"EnvDescription","in":"formData","schema":{"description":"环境描述信息","type":"string","required":false,"example":"this is an env"}},{"name":"StackId","in":"formData","schema":{"description":"环境使用的技术栈ID，若指定了源环境ID或配置模板ID，此参数将被忽略，否则必须指定此参数","type":"string","required":false,"example":"ws-6c937c98a9c0296d0c48*****"}},{"name":"AppId","in":"formData","schema":{"description":"应用ID","type":"string","required":false,"example":"wa-6c937c98a9c0296d0c48*****"}},{"name":"PkgVersionId","in":"formData","schema":{"description":"部署包版本ID","type":"string","required":false,"example":"wp-6c937c98a9c0296d0c48*****"}},{"name":"OptionSettings","in":"formData","schema":{"description":"自定义配置项数据，JSON数组，包含以下字段：\n- `path`：配置项路径\n- `name`：配置项名称\n- `value`：配置值","type":"string","required":false,"example":"[{\"path\":\"resources.ecs.autoScaling\", \"name\":\"instanceNum\",\"value\":\"10\"},     {\"path\":\"application.option\", \"name\":\"port\",\"value\":\"8081\"}]"}},{"name":"ProfileName","in":"formData","schema":{"description":"初始化配置类型，可选以下值：\n - `HighAvailability`：高可用，该配置会将实例数设置为2，同时启用公网SLB\n - `StandAlone`：低成本，该配置会将实例数设置为1","type":"string","required":false,"example":"HighAvailability"}},{"name":"SourceEnvId","in":"formData","schema":{"description":"源环境ID，新创建的环境将克隆此环境的技术栈，配置项和部署包版本。\n","type":"string","required":false,"example":"we-6c937c98a9c0296d0c48*****"}},{"name":"TemplateId","in":"formData","schema":{"description":"源模版ID","type":"string","required":false,"example":"wct-5d1c0a5d913567334af*****"}},{"name":"DryRun","in":"formData","schema":{"description":"是否模拟变更\n- 若设定该参数为true，则不会创建变更，而是输出创建环境的操作步骤；否则会创建环境，并输出变更ID\n - 默认为false","type":"boolean","required":false,"example":"false"}},{"name":"ExtraProperties","in":"formData","schema":{"type":"string","required":false}},{"name":"RegionId","in":"query","schema":{"type":"string"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"响应消息，若成功请求为success","type":"string","example":"success"},"RequestId":{"description":"请求ID","type":"string","example":"8D69F3C4-EA43-49D5-875A-0893BF5*****"},"EnvChangeDetail":{"description":"环境变更信息","type":"object","properties":{"StartTime":{"description":"变更开始时间","type":"string","example":"1562666697684"},"ChangeId":{"description":"变更ID","type":"string","example":"wc-5d3e71642977ca5251e*****"},"EnvId":{"description":"环境ID","type":"string","example":"we-5d39b8ba6786bd4b149*****"},"Operations":{"type":"object","properties":{"Operation":{"description":"变更操作列表","type":"array","items":{"type":"object","properties":{"OperationDescription":{"description":"操作描述信息","type":"string","example":"Bind to VSwitch vsw-wz9gfawx1vxkimtj*****"},"OperationType":{"description":"操作类型","type":"string","example":"create"}}}}}}}},"Code":{"description":"响应代码，若成功请求为OK","type":"string","example":"OK"}}}}},"errorCodes":{"404":[{"errorCode":"ConfigOptionNotExists","errorMessage":"An error occurred while updating the configuration. The system did not locate the configuration item declared by the key."}],"500":[{"errorCode":"ResourceAuthFailed","errorMessage":"The specified resource does not exist or it does not belong to this Alibaba Cloud account."},{"errorCode":"EnvCreateFailed","errorMessage":"An error occurred while creating an environment."},{"errorCode":"OSSDisabled","errorMessage":"You have not activated the OSS service and cannot use the WebPlus service. Please go to the OSS console (https://oss.console.aliyun.com) to activate OSS and try again."},{"errorCode":"OSSApiCallFailed","errorMessage":"When initializing applications, updating configurations, or destroying applications, WebPlus attempts to communicate with OSS through API communication. An OSS service throw error occurred. The bucket or the file does not exist."},{"errorCode":"StackNotExists","errorMessage":"The declared software stack information does not exist."},{"errorCode":"AppNotExist","errorMessage":"A corresponding application was not found based on the application ID."},{"errorCode":"AppCategoryNotMatchWithStacks","errorMessage":"The application type declared in the application does not match the type of the software stack. Please make sure that the types are consistent and then try again."},{"errorCode":"StackContainsNoConfigOption","errorMessage":"An error occurred while modifying the configuration. The corresponding software stack does not contain any configuration items."},{"errorCode":"ChangingAReadonlyConfig","errorMessage":"An error occurred while modifying the configuration. You cannot modify a read-only configuration."},{"errorCode":"ConfigValueInvalid","errorMessage":"An error occurred while resolving the configuration values. Please make sure the value type and constraints is consistent with the declared type. Types currently supported by WebPlus are: String, Integer, List, Boolean, Float, Json."},{"errorCode":"AppPackageNotExists","errorMessage":"An application deployment package is required to create or update a deployment environment. For the first time of using WebPlus, we recommend that you use a sample project."},{"errorCode":"AppPackageOwnedByOthers","errorMessage":"The version of the deployment package used must be consistent with the application to which the environment belongs."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"OK\\\",\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"RequestId\\\": \\\"8D69F3C4-EA43-49D5-875A-0893BF5*****\\\",\\n  \\\"EnvChangeDetail\\\": {\\n    \\\"StartTime\\\": \\\"1562666697684\\\",\\n    \\\"EnvId\\\": \\\"we-5d39b8ba6786bd4b149*****\\\",\\n    \\\"ChangeId\\\": \\\"wc-5d3e71642977ca5251e*****\\\",\\n    \\\"Operations\\\": {\\n      \\\"Operation\\\": [\\n        {\\n          \\\"OperationType\\\": \\\"create\\\",\\n          \\\"OperationDescription\\\": \\\"Bind to VSwitch vsw-wz9gfawx1vxkimtj*****\\\"\\n        }\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\\n<CreateAppEnvResponse>\\n  <Message>success</Message>\\n  <RequestId>3E85CF06-071C-4A90-B7A1-2ACBA56*****</RequestId>\\n  <EnvChangeDetail>\\n    <Operations>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Bind to VPC vpc-wz9e6y22o3o91nuy*****</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Bind to VSwitch vsw-wz9gfawx1vxkimtj*****</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Create security group</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>update</OperationType>\\n        <OperationDescription>Update ESS scaling group</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Create 1 ECS instances and create instances with priority using the following instance specifications: ecs.t5-*****.small,ecs.*****.small,ecs.*****.tiny,ecs.*****.large (Creating resources may incur charges, please see //www.aliyun.com/price/product ?#/ecs/detail ECS Pricing></OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Setup platform services on ECS instance(s)</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>create</OperationType>\\n        <OperationDescription>Create monitor group</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>update</OperationType>\\n        <OperationDescription>Synchronous ECS instance(s) to monitor group</OperationDescription>\\n      </Operation>\\n      <Operation>\\n        <OperationType>update</OperationType>\\n        <OperationDescription>Change application on the instance(s)</OperationDescription>\\n      </Operation>\\n    </Operations>\\n  </EnvChangeDetail>\\n  <Code>OK</Code>\\n</CreateAppEnvResponse>\",\"errorExample\":\"\"}]","title":"创建部署环境","summary":"创建一个部署环境。","description":"- 选择从已有环境或配置模板快速创建一个部署环境，使用两种方式创建环境时，将使用所选择环境或配置模板的部署包版本来部署新环境。\n- 若不指定已有环境或配置模板，则必须指定技术栈ID和部署包版本ID。\n- 若同时指定源环境ID，配置模板ID与技术栈ID中的多个参数，将依照源环境ID，配置模板ID，技术栈ID的优先级顺序来创建新环境。\n- 此API被调用后若非模拟变更，则将返回此次创建的变更ID，可以使用此ID查询变更信息。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}