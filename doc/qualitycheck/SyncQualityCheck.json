{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"JsonStr","in":"query","schema":{"description":"完整JSON字符串信息，具体内容参见以下详细信息。","type":"string","required":true,"docRequired":true,"example":"{\"tid\":\"20200823-234234\",\"dialogue\":\"{}\"}"}},{"name":"BaseMeAgentId","in":"query","schema":{"title":"业务空间Id","description":"业务空间Id","type":"integer","format":"int64","required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"结果状态码，200表示成功，若为别的值则表示失败，调用方可根据此字段判断失败原因。","type":"string","example":"200"},"Message":{"description":"出错时表示出错详情，成功时为successful。","type":"string","example":"successful"},"RequestId":{"description":"请求唯一标识。","type":"string","example":"66E1ACB8-17B2-4BE8-8581-954A8*****"},"Success":{"description":"请求是否成功，调用方可根据此字段来判断请求是否成功：true表示成功；false/null表示失败。","type":"boolean","example":"true"},"Data":{"description":"返回结果，包含命中信息。","type":"object","properties":{"Score":{"description":"最终得分，满分100。","type":"integer","format":"int32","example":"100"},"TaskId":{"description":"任务ID。","type":"string","example":"66E1ACB866E1ACB8"},"Tid":{"description":"当前对话唯一标识。","type":"string","example":"20200876-66E1ACB8"},"BeginTime":{"description":"录音&对话发生的时间，格林威治时间1970年01月01日00时00分00秒到现在的毫秒数（即毫秒时间戳，例如：1584535485856）。","type":"integer","format":"int64","example":"1584535485856"},"Rules":{"description":"命中的规则列表，每一条为一个规则，只返回命中的规则信息和命中规则位置信息。","type":"array","items":{"type":"object","properties":{"RuleName":{"description":"命中的规则的名称。","type":"string","example":"禁用语"},"Rid":{"description":"命中的规则ID。","type":"string","example":"232232"},"Hit":{"description":"命中的句子列表，针对此接口，如果命中，为一条数据。","type":"array","items":{"type":"object","properties":{"HitKeyWords":{"description":"条件命中的关键词。","type":"array","items":{"type":"object","properties":{"To":{"description":"关键字的结束位置。","type":"integer","format":"int32","example":"4"},"From":{"description":"关键字的起始位置。","type":"integer","format":"int32","example":"1"},"Val":{"description":"关键字。","type":"string","example":"你好"},"Cid":{"description":"规则的条件ID。","type":"integer","format":"int32","example":"2312"},"Pid":{"description":"命中句子在全部对话中的下标值。","type":"integer","format":"int32","example":"4"}}}},"Phrase":{"description":"条件命中的对话内容。","type":"object","properties":{"Words":{"description":"对话内容。","type":"string","example":"你好请问有什么可以帮您的"},"Identity":{"description":"废弃字段，请忽略。","type":"string","example":"xxx"},"Begin":{"description":"本句相对于整个对话的开始时间，单位：毫秒。","type":"integer","format":"int64","example":"1230"},"EmotionValue":{"description":"本句的情绪值，0-10，值越大情绪越高。","type":"integer","format":"int32","example":"6"},"End":{"description":"本句相对于整个对话的结束时间，单位：毫秒。","type":"integer","format":"int64","example":"3440"},"SpeechRate":{"description":"本句语速，单位：字/分钟。","type":"integer","format":"int32","example":"233"},"Role":{"description":"本句的角色，取值：客服、客户。","type":"string","example":"客服"},"SilenceDuration":{"description":"废弃字段，请忽略。","type":"integer","format":"int32","example":"123"}}}}}}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"66E1ACB8-17B2-4BE8-8581-954A8*****\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Score\\\": 100,\\n    \\\"TaskId\\\": \\\"66E1ACB866E1ACB8\\\",\\n    \\\"Tid\\\": \\\"20200876-66E1ACB8\\\",\\n    \\\"BeginTime\\\": 1584535485856,\\n    \\\"Rules\\\": [\\n      {\\n        \\\"RuleName\\\": \\\"禁用语\\\",\\n        \\\"Rid\\\": \\\"232232\\\",\\n        \\\"Hit\\\": [\\n          {\\n            \\\"HitKeyWords\\\": [\\n              {\\n                \\\"To\\\": 4,\\n                \\\"From\\\": 1,\\n                \\\"Val\\\": \\\"你好\\\",\\n                \\\"Cid\\\": 2312,\\n                \\\"Pid\\\": 4\\n              }\\n            ],\\n            \\\"Phrase\\\": {\\n              \\\"Words\\\": \\\"你好请问有什么可以帮您的\\\",\\n              \\\"Identity\\\": \\\"xxx\\\",\\n              \\\"Begin\\\": 1230,\\n              \\\"EmotionValue\\\": 6,\\n              \\\"End\\\": 3440,\\n              \\\"SpeechRate\\\": 233,\\n              \\\"Role\\\": \\\"客服\\\",\\n              \\\"SilenceDuration\\\": 123\\n            }\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SyncQualityCheckResponse>\\n    <requestId>A0F9FF42-7905-4DC5-9B7E-00711C89AC90</requestId>\\n    <message>successful</message>\\n    <data>\\n        <taskId>20200706A0F9FF42-7905-4DC5-9B7E-00711C89AC90</taskId>\\n        <rules>\\n            <hit>\\n                <hitKeyWords>\\n                    <val>骚扰</val>\\n                    <pid>0</pid>\\n                    <from>11</from>\\n                    <to>13</to>\\n                    <cid>35630</cid>\\n                </hitKeyWords>\\n                <phrase>\\n                    <role>客户</role>\\n                    <words>嗯，你稍等一下。他总是骚扰我</words>\\n                    <begin>23910</begin>\\n                    <end>25780</end>\\n                    <identity>某客户</identity>\\n                    <emotionValue>6</emotionValue>\\n                </phrase>\\n            </hit>\\n            <rid>21552</rid>\\n        </rules>\\n        <tid>20200706-1</tid>\\n    </data>\\n    <code>200</code>\\n    <success>true</success>\\n</SyncQualityCheckResponse>\\n\",\"errorExample\":\"\"}]","title":"进行实时质检","summary":"进行热线实时质检。","description":"热线实时质检是在通话过程中，实时的将对话语音转写为对话文本，把文本传入到智能对话分析系统中进行实时质检，从而实时监测可能出现的潜在问题或风险，您可以实时的将对话文本及质检结果展示在客服人员工作台中（第三方系统）。区别于离线质检（调用UploadAudioData进行的质检或数据集质检，详见开发指南），离线质检均是在通话结束并且录音文件生成后进行的质检分析。\n\n**使用流程**\n\n需自行实现通话过程中将语音流实时转写为文本，或直接使用阿里云-云呼叫中心，云呼叫中心与智能对话分析进行了深度集成，可在通话过程中直接进行实时质检，无需进行API对接。\n\n若自行实现语音流转文本，在通话过程中，当一个角色说完一句话产生对话文本后，就需要调用该API：SyncQualityCheck进行实时质检，会同步返回该句话的质检结果。\n\n上传数据时可以携带技能组信息，然后通过**呼叫中心质检-配置管理**功能来配置不同技能组的通话使用不同的质检规则。\n\n通话结束后，您可以将录音文件存储在公网可访问的存储服务器中，调用录音信息维护API：UpdateSyncQualityCheckData，将录音名称、录音文件URL等信息提交到智能对话分析服务，这样质检员在复核时就可以播放录音了。\n\n通话结束后在**呼叫中心质检-结果展示-实时质检结果**中看到质检的结果，您也可以调用实时质检结果查询API:GetSyncResult获取质检结果。通过**评分大盘-实时大盘**，可查看客服、技能组、评分项的数据图表。\n\n**全文质检**\n\n质检规则中有十几种算子，有些算子分析时需要对话上下文（客服与客户的多轮对话），但实时质检是在通话过程中的质检，通常只有一个角色说的一句话的文本，部分算子不适用于实时质检，所以质检规则分为实时质检规则和全文质检规则：\n\n**实时质检规则**：进行实时质检时使用的规则，支持的算子类型有限，不支持指定算子的检测范围。\n\n**全文质检规则**：进行离线质检时使用的规则，支持全量算子类型，支持自定义指定算子的检测范围。\n\n进行了实时质检的通话，在通话结束后，此时已经有了完整的对话文本，此时可以对完整对话文本使用全文质检规则再次进行质检分析。如何启用实时质检后的全文质检功能？请查看呼叫中心质检-配置管理中关于全文质检的说明。","requestParamsDescription":"**jsonStr属性说明:**\n\n| 属性 | 值类型 | 是否必须 | 说明 |\n| :--- | :--- | :--- | :--- |\n| isSchemeData    | Integer | 否       | 是否将数据上传至新版智能对话分析，取值：0（否）；1（是），默认值为0。   |\n| uuid | String | 否 | 当前句子唯一标识，幂等用，重复请求会排重，排重有效期24小时 |\n| tid | String | 是 | 当前对话唯一标识（务必确保唯一性），可以理解为自有业务系统中的通话ID，后台会根据此标识，合并为一个完整的对话，长度至少8位，并且前8位是通话的发生时间（年月日），例如录音发生时间是2020年7月5日，那么前缀即为20200705，建议在前缀后再拼接上自有业务系统中的通话ID，例如：20200705-234890134。前缀时间必须在API调用时间的前一个月、后一小时范围内。 |\n| dialogue | Dialogue | 是 | 业务方的待检文本对话部分内容，一般是一句话，也可以是多句，具体内容参见下方的**jsonStr.dialogue属性说明。** |\n| dialogueStatus | Integer | 否 | 会话开始结束标识，1：开始，2：对话中。 |\n| beginTime | Long | 否 | 录音&对话的开始时间，格林威治时间1970年01月01日00时00分00秒到现在的毫秒数（即毫秒时间戳，例如：1584535485856），如果每次调用都传入，以第一次调用为准，若不指定，则会取当前时间。 |\n| customerServiceId | Long | 否 | 客服ID。可从控制台-基础设置-人员管理页面获取，正确填入客服ID，客服登录控制台页面时可以查看与自己关联的录音文件。 |\n| customerServiceName | String | 否 | 客服姓名。 |\n| skillGroupId | Long | 否 | 技能组ID。 |\n| skillGroupName | String | 否 | 技能组名称。 |\n| callType | Integer | 否 | 呼叫类型，可取值：1（呼出）（默认）；3（呼入）；4（其他） |\n| callee | String | 否 | 被叫号码，呼出时指的是客户号码，呼入时指的是客服号码。 |\n| caller | String | 否 | 主叫号码，呼出时指的是客服号码，呼入时指的是客户号码。 |\n| callId | String | 否 | 通话ID，可以是呼叫中心系统中的通话ID，或者其他可以标识通话的ID，存在转接时，坐席1~n，callid是相同的，tid不同。 |\n| business | String | 否 | 业务线名称，属于自定义数据，用于分类统计。 |\n| remark1 | String | 否 | 自定义数据1，可以存放与您业务相关的自定义字段，最大长度为32字符。 |\n| remark2 | String | 否 | 自定义数据2，可以存放与您业务相关的自定义字段，最大长度为32字符。 |\n| remark3 | String | 否 | 自定义数据3，可以存放与您业务相关的自定义字段，最大长度为32字符。 |\n\n\n**jsonStr.dialogue 属性说明:**\n\n| 属性 | 值类型 | 是否必须 | 说明 |\n| :--- | :--- | :--- | :--- |\n| role | String | 是 | 对话内容角色，取值：客服、客户、系统 |\n| identity | String | 否 | 对话角色的具体身份标识，比如客服ID，客户ID等 |\n| words | String | 是 | 这个角色说的一句话。仅支持UTF-8编码，例如Emoji表情并不是UTF-8编码，文本内容中请勿包含Emoji表情。 |\n| begin | Integer | 是 | 相对起始点的开始时间偏移，单位ms |\n| end | Integer | 是 | 相对起始点的结束时间偏移，单位ms |\n| emotionValue | Integer | 否 | 情绪能量值1-10，值越高情绪越强烈 |\n| speechRate | Integer | 否 | 本句的平均语速，单位为每分钟字数 |\n| silenceDuration | Integer | 否 | 本句与上一句之间的静音时长，单位为秒 |","responseParamsDescription":"**对话上下文句子说明**：一些复杂场景下，某个角色的一句话无法分析出是否存在违规，往往还需要之前的一些句子做上下文信息来做质检分析。目前上下文句子数量最大值默认为30句。打个比方，比如一通通话，当前已经说到了第40句，在第40句上传后，我们会向前再取29句，加上当前最新的第40句，一共30句来做质检分析。所以极端情况下，某些句子会进行30次质检分析，我们在返回质检结果时，会自动去重，也就是一个句子若多次命中同一个规则中的同一个条件，则只有在第一次命中时会返回该句的命中结果。","extraInfo":" "}