{"summary":"文本实时质检。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"JsonStr","in":"query","schema":{"description":"jsonStr是一个JSON字符串，里面是该接口所有的自定义参数，具体内容参见下方的**jsonStr属性说明**。","type":"string","required":true,"docRequired":true,"example":"{\"tickets\":xxx}"}},{"name":"BaseMeAgentId","in":"query","schema":{"title":"业务空间Id","description":"业务空间Id","type":"integer","format":"int64","required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"结果代码，**200**表示成功，若为别的值则表示失败，调用方可根据此字段判断失败原因。","type":"string","example":"200"},"Message":{"description":"出错时表示出错详情，成功时为**successful**。","type":"string","example":"successful"},"RequestId":{"description":"请求ID。","type":"string","example":"4987D326-83D9-4A42-B9A5-0B27F9B***"},"Success":{"description":"请求是否成功，调用方可根据此字段来判断请求是否成功：true表示成功；false/null表示失败。","type":"boolean","example":"true"},"Data":{"type":"object","properties":{"ResultInfo":{"description":"实时质检结果。","type":"array","items":{"type":"object","properties":{"Score":{"description":"质检得分，默认为100分，会根据规则所关联的评分项进行加减分。","type":"integer","format":"int32","example":"100"},"Rules":{"type":"object","properties":{"RuleHitInfo":{"description":"命中详情。","type":"array","items":{"description":"规则列表。","type":"object","properties":{"Tid":{"description":"文本ID，对应的是请求参数tickets中的tid。","type":"string","example":"88888888"},"Rid":{"description":"命中的规则ID。","type":"string","example":"801"},"Hit":{"type":"object","properties":{"ConditionHitInfo":{"description":"具体命中位置信息，以句子维度，返回命中句子中具体命中了什么规则中哪个条件，是哪几个字命中的。","type":"array","items":{"type":"object","properties":{"HitKeyWords":{"type":"object","properties":{"HitKeyWord":{"description":"返回当前句中是哪几个字命中了规则，也就是需要高亮展示的关键字。","type":"array","items":{"description":"条件命中的关键词。","type":"object","properties":{"To":{"description":"需要高亮展示的关键字到第几个字符结束，最大值为当句话字符总数减1。高亮的字不包含to，例如一句话为“不可能给你退货的”，from=0，to=3，那么需要高亮的关键字就是“不可能”三个字。","type":"integer","format":"int32","example":"1"},"From":{"description":"需要高亮展示的关键字从第几个字符开始，取值范围从0开始，最大值为当句话字符总数减1。高亮的字包含from。","type":"integer","format":"int32","example":"1"},"Val":{"description":"具体的关键字内容。","type":"string","example":"嗯"},"Tid":{"description":"文本ID，对应的是请求参数tickets中的tid。","type":"string","example":"1"},"Pid":{"description":"当前句子在所有句子中的下标值，即当前句子是请求参数中dialogue数组中的第几个，从0开始。","type":"integer","format":"int32","example":"1"}}}}}},"HitCids":{"type":"object","properties":{"CidItem":{"description":"当前句子命中的条件ID的列表。","type":"array","items":{"description":"当前句子命中的条件ID的列表。","type":"string","example":"[\"3265\"]"}}}},"Phrase":{"description":"当前命中规则的句子详情。","type":"object","properties":{"Words":{"description":"这个角色说的一句话。","type":"string","example":"你好"},"Identity":{"description":"对话角色的具体身份标识。","type":"string","example":"1"},"Begin":{"description":"本句话的开始时间，是相对起始点的开始时间偏移，单位ms。","type":"integer","format":"int64","example":"0"},"BeginTime":{"description":"这句话的开始时间，示例值：2019-11-25 15:37:16。","type":"string","example":"1564574"},"End":{"description":"本句话的结束时间，是相对起始点的结束时间偏移，单位ms。","type":"integer","format":"int64","example":"2090"},"Role":{"description":"对话内容角色，可能值：客服、客户、系统。","type":"string","example":"客服"}}}}}}}},"ConditionInfo":{"type":"object","properties":{"ConditionBasicInfo":{"description":"废弃字段，请忽略。","type":"array","items":{"description":"废弃字段，请忽略。","type":"object","properties":{"ConditionInfoCid":{"description":"废弃字段，请忽略。","type":"string","example":"xxx"}}}}}}}}}}},"HandScoreIdList":{"type":"object","properties":{"HandScoreIdList":{"description":"废弃字段，请忽略。","type":"array","items":{"description":"废弃字段，请忽略。","type":"string","example":"[]"}}}}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Message\\\": \\\"successful\\\",\\n  \\\"RequestId\\\": \\\"4987D326-83D9-4A42-B9A5-0B27F9B***\\\",\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"ResultInfo\\\": [\\n      {\\n        \\\"Score\\\": 100,\\n        \\\"Rules\\\": {\\n          \\\"RuleHitInfo\\\": [\\n            {\\n              \\\"Tid\\\": \\\"88888888\\\",\\n              \\\"Rid\\\": \\\"801\\\",\\n              \\\"Hit\\\": {\\n                \\\"ConditionHitInfo\\\": [\\n                  {\\n                    \\\"HitKeyWords\\\": {\\n                      \\\"HitKeyWord\\\": [\\n                        {\\n                          \\\"To\\\": 1,\\n                          \\\"From\\\": 1,\\n                          \\\"Val\\\": \\\"嗯\\\",\\n                          \\\"Tid\\\": \\\"1\\\",\\n                          \\\"Pid\\\": 1\\n                        }\\n                      ]\\n                    },\\n                    \\\"HitCids\\\": {\\n                      \\\"CidItem\\\": [\\n                        \\\"[\\\\\\\"3265\\\\\\\"]\\\"\\n                      ]\\n                    },\\n                    \\\"Phrase\\\": {\\n                      \\\"Words\\\": \\\"你好\\\",\\n                      \\\"Identity\\\": \\\"1\\\",\\n                      \\\"Begin\\\": 0,\\n                      \\\"BeginTime\\\": \\\"1564574\\\",\\n                      \\\"End\\\": 2090,\\n                      \\\"Role\\\": \\\"客服\\\"\\n                    }\\n                  }\\n                ]\\n              },\\n              \\\"ConditionInfo\\\": {\\n                \\\"ConditionBasicInfo\\\": [\\n                  {\\n                    \\\"ConditionInfoCid\\\": \\\"xxx\\\"\\n                  }\\n                ]\\n              }\\n            }\\n          ]\\n        },\\n        \\\"HandScoreIdList\\\": {\\n          \\\"HandScoreIdList\\\": [\\n            \\\"[]\\\"\\n          ]\\n        }\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UploadDataSyncResponse>\\n    <Message>successful</Message>\\n    <RequestId>4EFC3224-4E25-4019-AD06-63AC0***</RequestId>\\n    <Data>\\n        <ResultInfo>\\n            <Rules>\\n                <RuleHitInfo>\\n                    <Hit>\\n                        <ConditionHitInfo>\\n                            <HitKeyWords>\\n                                <HitKeyWord>\\n                                    <Val>你好</Val>\\n                                    <Pid>1</Pid>\\n                                    <From>2</From>\\n                                    <To>4</To>\\n                                    <Tid>4ef4f8a9-4910-4d46-a348-eabfb***</Tid>\\n                                </HitKeyWord>\\n                            </HitKeyWords>\\n                            <HitCids>\\n                                <CidItem>24196</CidItem>\\n                            </HitCids>\\n                            <Phrase>\\n                                <Role>客服</Role>\\n                                <Words>哎，你好。</Words>\\n                                <Begin>3820</Begin>\\n                                <End>4830</End>\\n                                <Identity>某客服</Identity>\\n                            </Phrase>\\n                        </ConditionHitInfo>\\n                    </Hit>\\n                    <Rid>15589</Rid>\\n                </RuleHitInfo>\\n                <RuleHitInfo>\\n                    <Hit>\\n                        <ConditionHitInfo>\\n                            <HitKeyWords>\\n                                <HitKeyWord>\\n                                    <Val>帮您</Val>\\n                                    <Pid>2</Pid>\\n                                    <From>5</From>\\n                                    <To>7</To>\\n                                    <Tid>4ef4f8a9-4910-4d46-a348-eabfb8e***</Tid>\\n                                </HitKeyWord>\\n                            </HitKeyWords>\\n                            <HitCids>\\n                                <CidItem>28208</CidItem>\\n                            </HitCids>\\n                            <Phrase>\\n                                <Role>客服</Role>\\n                                <Words>有什么可以帮您。</Words>\\n                                <Begin>6770</Begin>\\n                                <End>8540</End>\\n                                <Identity>某客服</Identity>\\n                            </Phrase>\\n                        </ConditionHitInfo>\\n                    </Hit>\\n                    <Rid>18128</Rid>\\n                </RuleHitInfo>\\n            </Rules>\\n            <Tid>4ef4f8a9-4910-4d46-a348-eabfb8***</Tid>\\n        </ResultInfo>\\n    </Data>\\n    <Code>200</Code>\\n    <Success>true</Success>\\n</UploadDataSyncResponse>\",\"errorExample\":\"\"}]","title":"文本实时质检","description":"将特定格式的待检文本数据推送到SCA，根据用户指定的规则对文本数据进行实时质检分析，并同步返回分析结果。相比于上传文本质检，上传文本质检通常是一个对话结束后，将完整的对话文本上传，而文本实时质检，可以在一个角色讲完一句话或多句话后，就推送到SCA进行分析，实时性更高。特殊说明：\n- 如果推送的文本是一个角色的一句话，因为缺少对话上下文，规则中的部分算子会失效，例如上下文重复检查、抢话检查、通话静音检查等。\n- 实时质检会同步返回分析结果，SCA不会保存调用记录，所以无法通过API查询质检结果。","requestParamsDescription":"## jsonStr属性说明：\n| 属性 | 值类型 | 是否必须 | 说明 |\n| :--- | :--- | :--- | :--- |\n| tickets | List | 是 | 待检文本数据信息，一次调用可以上传多段文本数据，详见下方的**tickets属性说明**。 |\n| commonRuleIds | List | 否 | 指定规则ID，若不指定，则使用所有规则进行分析，如果规则总数大于100，则最多使用规则列表前100条规则进行分析。强烈建议您指定质检规则，否则每次都使用大量规则进行分析，会增加接口返回的延时。（只能使用离线质检规则，不可使用实时质检规则） |\n\n## tickets 属性说明：\n| 属性 | 值类型 | 是否必须 | 说明 |\n| :--- | :--- | :--- | :--- |\n| tid | String | 是 | 本段文本的ID，可以使用对应的电话或工单数据ID，注意不要重复。 |\n| dialogue | List | 是 | 本段文本对话的详细内容，详见下方的**dialogue属性说明**。 |\n\n## dialogue 属性说明：\n| 属性 | 值类型 | 是否必须 | 说明 |\n| :--- | :--- | :--- | :--- |\n| role | String | 是 | 对话内容角色，取值：客服、客户。 |\n| identity | String | 否 | 对话角色的具体身份标识。 |\n| words | String | 是 | 这个角色说的一句话。 |\n| begin | Integer | 是 | 本句话的开始时间，是相对起始点的开始时间偏移，单位ms。 |\n| end | Integer | 是 | 本句话的结束时间，是相对起始点的结束时间偏移，单位ms。 |\n| beginTime | Date | 是 | 这句话的开始时间，示例值：2019-11-25 15:37:16。 |","responseParamsDescription":" ","extraInfo":" "}