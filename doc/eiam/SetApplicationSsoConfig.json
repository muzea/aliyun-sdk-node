{"summary":"设置一个EIAM应用的单点登录SSO配置属性。","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{},"parameters":[{"name":"InstanceId","in":"query","schema":{"title":"实例ID。","description":"实例ID。","type":"string","required":true,"example":"idaas_ue2jvisn35ea5lmthk267xxxxx","maxLength":64}},{"name":"ApplicationId","in":"query","schema":{"title":"应用ID。","description":"应用ID。","type":"string","required":true,"example":"app_mkv7rgt4d7i4u7zqtzev2mxxxx","maxLength":64}},{"name":"SamlSsoConfig","in":"query","style":"flat","schema":{"title":"SAML SSO配置","description":"SAML协议的应用SSO属性配置参数。","type":"object","properties":{"SpSsoAcsUrl":{"title":"SP的SSO地址","description":"应用（SP）的SAML断言消费地址。","type":"string","required":false,"example":"https://signin.aliyun.com/saml-role/sso"},"SpEntityId":{"title":"SP的EntityId","description":"应用（SP）的SAML的EntityId。","type":"string","required":false,"example":"urn:alibaba:cloudcomputing"},"NameIdFormat":{"title":"SAML标准的NameID格式","description":"SAML协议标准的NameID格式，取值可选范围：\n- urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified：未指定的，由应用自行决定解析NameID。\n- urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress：Email地址格式。\n- urn:oasis:names:tc:SAML:2.0:nameid-format:persistent：持久化的NameID。\n- urn:oasis:names:tc:SAML:2.0:nameid-format:transient：瞬时的NameID。","type":"string","required":false,"enumValueTitles":{"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified":"未指定的，默认值。","urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress":"Email地址格式","urn:oasis:names:tc:SAML:2.0:nameid-format:persistent":"持久化的。","urn:oasis:names:tc:SAML:2.0:nameid-format:transient":"瞬时的。"},"example":"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},"NameIdValueExpression":{"title":"NameId取值表单式","description":"SAML协议的NameID真实取值生成表达式。","type":"string","required":false,"example":"user.email"},"DefaultRelayState":{"title":"默认RelayState取值","description":"默认RelayState取值。当用户的单点登录SSO请求是由EIAM发起时，EIAM提供的SAML Response会指定RelayState为当前值。","type":"string","required":false,"example":"https://home.console.aliyun.com"},"SignatureAlgorithm":{"title":"SAML断言签名算法","description":"SAML断言签名算法。","type":"string","required":false,"enumValueTitles":{"RSA-SHA256":"RSA-SHA256算法"},"example":"RSA-SHA256"},"ResponseSigned":{"title":"response是否签名","description":"Response是否需要签名。ResponseSigned和AssertionSigned不能同时为false。\n- true：需要签名。\n- false：不需要签名。","type":"boolean","required":false,"example":"true"},"AssertionSigned":{"title":"assertion是否签名","description":"Assertion是否需要签名。ResponseSigned和AssertionSigned不能同时为false。\n- true：需要签名。\n- false：不需要签名。","type":"boolean","required":false,"example":"true"},"AttributeStatements":{"title":"SAML断言的属性配置","description":"在SAML断言中包含的额外用户属性配置。","type":"array","items":{"type":"object","properties":{"AttributeName":{"title":"SAML属性的Name","description":"SAML断言中属性的Name。","type":"string","required":false,"example":"https://www.aliyun.com/SAML-Role/Attributes/RoleSessionName"},"AttributeValueExpression":{"title":"SAML属性取值表达式","description":"SAML断言中的属性取值表达式。","type":"string","required":false,"example":"user.username"}},"required":false},"required":false,"example":""}},"required":false,"example":""}},{"name":"OidcSsoConfig","in":"query","style":"flat","schema":{"title":"OIDC SSO配置","description":"OIDC协议的应用SSO属性配置参数。","type":"object","properties":{"RedirectUris":{"title":"支持SSO回调的uri列表","description":"应用支持的RedirectUri列表。","type":"array","items":{"description":"应用支持的RedirectUri。","type":"string","required":false,"example":"https://example.com/oidc/login/callback"},"required":false,"example":""},"PostLogoutRedirectUris":{"title":"Logout回调Uri列表","description":"应用支持Logout登出回调地址列表。","type":"array","items":{"description":"应用的Logout登出回调白名单地址，应用发起Logout请求时可以指定post\\_logout\\_redirect\\_uri参数。","type":"string","required":false,"example":"https://example.com/oidc/logout/callback"},"required":false,"example":""},"GrantTypes":{"title":"支持的授权类型","description":"支持的OIDC协议授权模式列表。","type":"array","items":{"description":"支持的OIDC协议授权模式，取值可选范围：\n- authorization\\_code：授权码模式。\n- implicit：隐式模式。\n- refresh\\_token：令牌刷新模式。\n- urn:ietf:params:oauth:grant-type:device\\_code：设备模式。\n- password：密码模式。","type":"string","required":false,"example":"authorization_code"},"required":false,"example":"authorization_code"},"ResponseTypes":{"title":"隐式流支持的返回类型","description":"当OidcSsoConfig.GrantTypes包含指定implicit隐式模式后，应用支持的返回类型。","type":"array","items":{"description":"OIDC协议标准参数ResponseType，只有指定了GrantTypes包含implicit隐式模式才生效，取值可选范围：\n- token：只返回access token。\n- id\\_token：只返回id token。\n- token id\\_token：同时返回access token和id token。","type":"string","required":false,"example":"token id_token"},"required":false,"example":"token id_token"},"GrantScopes":{"title":"支持的api授权范围","description":"OIDC协议标准参数 scope，用于指定userinfo端点或者id_token可以返回的用户属性范围。","type":"array","items":{"description":"OIDC协议标准参数 scope，用于指定userinfo端点或者id_token可以返回的用户属性范围，取值可选范围：\n- openid：OIDC标准参数，用户唯一id。\n- profile：用户详细信息。\n- email：用户邮箱信息。\n- phone：用户手机信息。","type":"string","required":false,"example":"openid"},"required":false,"example":"profile，email"},"PasswordTotpMfaRequired":{"title":"密码模式是否强制需要TOTP二次认证","description":"密码模式是否强制需要TOTP二次认证，当且仅当OIDC协议应用指定的GrantTypes包含password模式才生效。","type":"boolean","required":false,"example":"true"},"PasswordAuthenticationSourceId":{"title":"密码模式使用的身份认证来源id","description":"密码模式使用的身份认证源ID，当且仅当OIDC协议应用指定的GrantTypes包含password模式才生效。","type":"string","required":false,"example":"ia_password"},"PkceRequired":{"title":"是否强制PKCE","description":"应用SSO是否强制要求PKCE（RFC 7636）。","type":"boolean","required":false,"example":"true"},"PkceChallengeMethods":{"title":"PKCE算法","description":"PKCE中计算Code Challenge的算法。","type":"array","items":{"description":"PKCE中计算Code Challenge的算法，取值可选范围：\n- plain：原文。\n- S256：SHA 256算法。","type":"string","required":false,"example":"S256"},"required":false,"example":"S256"},"AccessTokenEffectiveTime":{"title":"access token有效时间","description":"签发的access token有效时间，单位为秒，默认1200秒（20分钟）。","type":"integer","format":"int64","required":false,"example":"1200"},"CodeEffectiveTime":{"title":"code有效时间","description":"签发的code有效时间，单位为秒，默认为60秒（1分钟）。","type":"integer","format":"int64","required":false,"example":"60"},"IdTokenEffectiveTime":{"title":"id token有效时间","description":"签发的id token有效时间，单位为秒，默认为300秒（5分钟）。","type":"integer","format":"int64","required":false,"example":"300"},"RefreshTokenEffective":{"title":"refresh token有效时间","description":"签发的refresh token有效时间，单位为秒，默认为86400秒（1天）。","type":"integer","format":"int64","required":false,"example":"86400"},"CustomClaims":{"title":"自定义id token返回信息","description":"自定义id token返回包含的用户信息。","type":"array","items":{"type":"object","properties":{"ClaimName":{"title":"返回的claim名称","description":"返回的claim名称。","type":"string","required":false,"example":"\"Role\""},"ClaimValueExpression":{"title":"返回的claim取值表达式","description":"返回的claim取值表达式。","type":"string","required":false,"example":"user.dict.applicationRole"}},"required":false},"required":false,"example":""},"SubjectIdExpression":{"title":"自定义id token返回信息","description":"自定义id token返回的sub取值表达式。","type":"string","required":false,"example":"user.userid","maxLength":128,"default":"user.userid"}},"required":false,"example":""}},{"name":"InitLoginType","in":"query","schema":{"title":"初始化登录方式","description":"初始化单点登录SSO方式，取值可选范围：\n- only\\_app\\_init\\_sso：仅应用发起SSO，OIDC协议应用默认取值。当SAML应用指定为该方式时，InitLoginUrl必须指定。\n- idaas\\_or\\_app\\_init\\_sso：支持IDaaS门户或者应用发起SSO，SAML协议应用默认取值范围。当OIDC协议指定为该方式时，InitLoginUrl必须指定。","type":"string","required":false,"example":"only_app_init_sso"}},{"name":"InitLoginUrl","in":"query","schema":{"title":"仅only_app_init_sso情况下，SP指定的登录地址","description":"初始化单点登录SSO触发地址。\n当OIDC协议类型应用设置InitLoginType为idaas\\_or\\_app\\_init\\_sso时，必须指定该参数。\n当SAML协议类型应用设置InitLoginType为only\\_app\\_init\\_sso时，必须指定该参数。","type":"string","required":false,"example":"http://127.0.0.1:8000/start_login?enterprise_code=ABCDEF"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"title":"请求ID。","description":"请求ID。","type":"string","example":"0441BD79-92F3-53AA-8657-F8CE4A2B912A"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"0441BD79-92F3-53AA-8657-F8CE4A2B912A\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SetApplicationSsoConfigResponse>\\n    <RequestId>0441BD79-92F3-53AA-8657-F8CE4A2B912A</RequestId>\\n</SetApplicationSsoConfigResponse>\",\"errorExample\":\"\"}]","title":"设置一个EIAM应用的单点登录SSO配置","description":"在EIAM中，应用管理支持添加多种单点登录SSO协议（SAML 2.0和OIDC）的应用，但是一个应用支持的SSO协议只能有一种，且在创建时指定后不可更改。您根据当前的应用支持的SSO协议类型，指定对应的SSO配置属性参数。"}