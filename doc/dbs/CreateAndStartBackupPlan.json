{"summary":"该接口用于创建、配置并启动备份计划。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","systemTags":{"operationType":"create"},"parameters":[{"name":"BackupPlanId","in":"query","schema":{"description":"\t\n备份计划ID。","type":"string","required":false,"example":"dbstooi0*******"}},{"name":"Region","in":"query","schema":{"description":"DBS支持地域，可调用[DescribeRegions](~~437238~~)接口查看。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"InstanceClass","in":"query","schema":{"description":"备份计划的规格，取值：\n- **micro**\n- **small**\n- **medium**\n- **large**\n- **xlarge**\n\n> 规格越高，备份与恢复的性能越高。更多信息，请参见[规格说明](~~84372~~)。","type":"string","required":true,"example":"micro"}},{"name":"DatabaseType","in":"query","schema":{"description":"数据库类型，取值：\n- **MySQL**\n- **MSSQL**\n- **Oracle**\n- **MariaDB**\n- **PostgreSQL**\n- **DRDS**\n- **MongoDB**\n- **Redis**","type":"string","required":true,"example":"MySQL"}},{"name":"BackupMethod","in":"query","schema":{"description":"备份方式，取值：\n- **logical**：逻辑备份\n- **physical**：物理备份\n- **duplication**：转储备份","type":"string","required":true,"example":"logical"}},{"name":"Period","in":"query","schema":{"description":"指定预付费实例为包年或者包月类型，取值：\n- **Year**：包年\n- **Month**：包月","type":"string","required":false,"example":"Year"}},{"name":"UsedTime","in":"query","schema":{"description":"指定购买时长，取值：\n- 当参数**Period**为**Year**时，**UsedTime**取值为1~5。\n- 当参数**Period**为**Month**时，**UsedTime**取值为1~11。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PayType","in":"query","schema":{"description":"支付方式，取值：\n- **postpay**：后付费（按量付费）\n- **prepay**：预付费（包年包月）\n\n> 默认**prepay**，目前只有**BackupMethod**为**duplication**时支持**postpay**。","type":"string","required":false,"example":"postpay"}},{"name":"DatabaseRegion","in":"query","schema":{"description":"数据库地域。\n> 当**PayType**为**postpay**时，该参数必选。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"StorageRegion","in":"query","schema":{"description":"存储地域。\n> 当**PayType**为**postpay**时，该参数必选。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"InstanceType","in":"query","schema":{"description":"数据库实例类型，取值：\n- **RDS**\n- **PolarDB**\n- **DDS**：阿里云MongoDB\n- **Kvstore**：阿里云Redis\n- **Other**：通过IP:Port接入的数据库\n- **dg**：无公网IP:Port的自建数据库（通过数据库网关DG接入）\n> 当**PayType**为**postpay**时，必选。","type":"string","required":false,"example":"RDS"}},{"name":"StorageType","in":"query","schema":{"description":"该参数暂未开放使用。","type":"string","required":false,"example":"无"}},{"name":"FromApp","in":"query","schema":{"description":"用于备注请求来源，默认值为OpenApi，无需手动设置。","type":"string","required":false,"example":"OpenApi"}},{"name":"SourceEndpointInstanceType","in":"query","schema":{"description":"数据库所在位置，取值：\n- **RDS**\n- **ECS**\n- **Express**：通过专线/VPN网关/智能网关接入的数据库\n- **Agent**：通过备份网关接入的数据库\n- **DDS**：云MongoDB\n- **Other**：通过IP:Port直连的数据库\n- **dg**：无公网IP:Port的自建数据库（通过数据库网关DG接入）","type":"string","required":true,"example":"RDS"}},{"name":"SourceEndpointRegion","in":"query","schema":{"description":"数据库地域。\n> **SourceEndpoint**.**InstanceType**为**RDS**、**ECS**、**DDS**、**Express**、**Agent**时，该参数必传。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"SourceEndpointInstanceID","in":"query","schema":{"description":"数据库实例ID。\n\n> **SourceEndpoint**.**InstanceType**为**RDS**、**ECS**、**DDS**、**Express**时，该参数必传。\n","type":"string","required":false,"example":"rm-uf6wjk5xxxxxxxxxx"}},{"name":"SourceEndpointIP","in":"query","schema":{"description":"数据库连接地址。\n\n> **SourceEndpoint**.**InstanceType**为**express**、**agent**、**other**时，该参数必传。","type":"string","required":false,"example":"rm-uf6wjk5xxxxxxx.mysql.rds.aliyuncs.com"}},{"name":"SourceEndpointPort","in":"query","schema":{"description":"数据库端口。\n\n> **SourceEndpoint**.**InstanceType**为**express**、**agent**、**other**、**ECS**时，该参数必传。","type":"integer","format":"int32","required":false,"example":"3306"}},{"name":"SourceEndpointDatabaseName","in":"query","schema":{"description":"数据库名称。\n\n> 数据库类型为**PostgreSQL**、**MongoDB**时，该参数必传。","type":"string","required":false,"example":"testRDS"}},{"name":"SourceEndpointUserName","in":"query","schema":{"description":"数据库账号。\n\n> 数据库类型为**Redis**，或者数据库所在位置为**agent**且数据库类型为**MSSQL**时该参数非必须，其他场景均必传。","type":"string","required":false,"example":"testRDS"}},{"name":"SourceEndpointPassword","in":"query","schema":{"description":"密码。\n\n> 数据库类型为**Redis**，或者数据库所在位置为**agent**且数据库类型为**MSSQL**时该参数非必须，其他场景均必传。","type":"string","required":false,"example":"testPassword"}},{"name":"BackupGatewayId","in":"query","schema":{"description":"备份网关ID。\n\n> - **SourceEndpoint**.**InstanceType**为**agent**时，该参数必传。\n> - 如何创建备份网关，请参见[添加备份网关](~~93250~~)。\n> - 您可以通过[DescribeBackupGatewayList](~~437230~~)查看已有备份网关列表。","type":"integer","format":"int64","required":false,"example":"23313123312"}},{"name":"OSSBucketName","in":"query","schema":{"description":"OSS Bucket名称。\n默认：系统自动生成新的名称。","type":"string","required":false,"example":"TestOssBucket"}},{"name":"BackupObjects","in":"query","schema":{"description":"备份对象。","type":"string","required":false,"example":"[     {         \"DBName\":\"待备份库名\",         \"SchemaName\":\"待备份 Schema 名\",         \"TableIncludes\":[{             \"TableName\":\"待备份表表名\"         }],         \"TableExcludes\":[{             \"TableName\":\"待备份库名不需要备份表的表名\"         }]     } ]"}},{"name":"BackupPeriod","in":"query","schema":{"description":"全量备份周期，取值：\n- **Monday**：周一\n- **Tuesday**：周二\n- **Wednesday**：周三\n- **Thursday**：周四\n- **Friday**：周五\n- **Saturday**：周六\n- **Sunday**：周日\n\n> 支持选择多个取值，用英文逗号（,）分开。","type":"string","required":false,"example":"Monday"}},{"name":"BackupStartTime","in":"query","schema":{"description":"全量备份开始时间，格式为<i>HH:mm</i>（UTC时间）。","type":"string","required":false,"example":"14:22"}},{"name":"EnableBackupLog","in":"query","schema":{"description":"是否开启增量日志备份，取值：\n- **true**：开启\n- **false**：关闭","type":"boolean","required":false,"example":"true"}},{"name":"BackupLogIntervalSeconds","in":"query","schema":{"description":"增量时间间隔，以秒（s）为单位。\n> 仅选择**物理备份**时需要传入该参数。","type":"integer","format":"int32","required":false,"example":"1000"}},{"name":"BackupRetentionPeriod","in":"query","schema":{"description":"备份数据保留时间，取值：0~1825，默认为730天。","type":"integer","format":"int32","required":false,"example":"730"}},{"name":"DuplicationInfrequentAccessPeriod","in":"query","schema":{"description":"转为低频访问存储时间，默认为180天。","type":"integer","format":"int32","required":false,"example":"180"}},{"name":"DuplicationArchivePeriod","in":"query","schema":{"description":"转为归档冷备存储时间，默认为365天。","type":"integer","format":"int32","required":false,"example":"365"}},{"name":"BackupPlanName","in":"query","schema":{"description":"自定义备份计划名称。","type":"string","required":true,"example":"dbstooi0*******"}},{"name":"SourceEndpointOracleSID","in":"query","schema":{"description":"Oracle SID名称，数据库类型为Oracle时，该参数必传。","type":"string","required":false,"example":"test"}},{"name":"BackupStorageType","in":"query","schema":{"description":"内置存储类型：\n- 空（默认）：备份数据存储在用户OSS上。\n- system ：备份数据存储在DBS的内置OSS上。","type":"string","required":false,"example":"无"}},{"name":"BackupSpeedLimit","in":"query","schema":{"description":"磁盘IO限制， 单位为KB/s。\n> 该参数仅对MySQL物理备份生效。","type":"integer","format":"int64","required":false,"example":"262144"}},{"name":"BackupRateLimit","in":"query","schema":{"description":"网络带宽限制，单位为KB/s，最大允许10 GB。\n> 该参数仅对MySQL物理备份生效。","type":"integer","format":"int64","required":false,"example":"262144"}},{"name":"BackupStrategyType","in":"query","schema":{"description":"全量备份周期，取值：\n- **simple**：周期备份，和BackupPeriod、BackupStartTime配合使用。\n- **manual**：手动备份。\n\n> 默认为**simple**。","type":"string","required":false,"example":"simple"}},{"name":"CrossAliyunId","in":"query","schema":{"description":"跨阿里云账号备份的UID。","type":"string","required":false,"example":"1648821913******"}},{"name":"CrossRoleName","in":"query","schema":{"description":"跨阿里云账号备份的RAM角色名称。","type":"string","required":false,"example":"test123"}},{"name":"ClientToken","in":"query","schema":{"description":"用于保证请求的幂等性，防止重复提交请求。","type":"string","required":false,"example":"ASDASDASDSADASFCZXVZ"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-aekzecovzti****"}}],"responses":{"200":{"schema":{"description":"返回参数详情如下。","type":"object","properties":{"HttpStatusCode":{"description":"HTTP状态码。","type":"integer","format":"int32","example":"200"},"RequestId":{"description":"请求ID。","type":"string","example":"4F1888AC-1138-4995-B9FE-D2734F61C058"},"CreateBackupSet":{"description":"是否开启备份集，返回值如下：\n- **true**：开启\n- **false**：关闭","type":"boolean","example":"true"},"ErrCode":{"description":"错误码。","type":"string","example":"Param.NotFound"},"Success":{"description":"是否请求成功。","type":"boolean","example":"true"},"ErrMessage":{"description":"错误信息。","type":"string","example":"The specified parameter %s value is not valid."},"BackupPlanId":{"description":"备份计划ID。","type":"string","example":"dbs1hvb0wwwe****"},"OrderId":{"description":"订单ID。","type":"string","example":"2056157***"}}}}},"errorCodes":{"403":[{"errorCode":"Request.Forbidden","errorMessage":"Have no Permissions"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"HttpStatusCode\\\": 200,\\n  \\\"RequestId\\\": \\\"4F1888AC-1138-4995-B9FE-D2734F61C058\\\",\\n  \\\"CreateBackupSet\\\": true,\\n  \\\"ErrCode\\\": \\\"Param.NotFound\\\",\\n  \\\"Success\\\": true,\\n  \\\"ErrMessage\\\": \\\"The specified parameter %s value is not valid.\\\",\\n  \\\"BackupPlanId\\\": \\\"dbs1hvb0wwwe****\\\",\\n  \\\"OrderId\\\": \\\"2056157***\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateAndStartBackupPlanResponse>\\n    <RequestId>3321E2F6-98E3-4B81-ADEC-9FD1BC06249A</RequestId>\\n    <HttpStatusCode>200</HttpStatusCode>\\n    <BackupPlanId>dbs1hrlzt68t7ko1</BackupPlanId>\\n    <OrderId>208422747270728</OrderId>\\n    <Success>true</Success>\\n</CreateAndStartBackupPlanResponse>\",\"errorExample\":\"\"}]","title":"创建并启动备份计划","description":"请确保在使用该接口前，已充分了解数据库备份DBS产品的[收费方式和价格](~~70005~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}