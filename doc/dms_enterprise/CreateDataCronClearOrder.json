{"summary":"创建历史数据清理工单。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"Comment","in":"query","schema":{"description":"\n业务背景，以减少沟通成本。","type":"string","required":true,"example":"test"}},{"name":"RelatedUserList","in":"query","style":"json","schema":{"description":"相关人列表。","type":"array","items":{"description":"相关人ID，设置的相关人员可查看工单，并协同工作，非相关人员则不能查看工单（管理员、DBA除外）。","type":"integer","format":"int64","required":false,"example":"243253"},"required":false}},{"name":"Param","in":"query","style":"json","schema":{"description":"工单参数。","type":"object","properties":{"Classify":{"description":"数据变更原因。","type":"string","required":false,"example":"test"},"DbItemList":{"description":"变更的数据库列表。","type":"array","items":{"description":"数据库信息。","type":"object","properties":{"DbId":{"description":"数据库ID，可调用[SearchDatabases](~~141876~~)接口获取。","type":"integer","format":"int64","required":true,"example":"10****"},"Logic":{"description":"是否为逻辑库，取值：\n- **true**：是\n- **false**：否","type":"boolean","required":true,"example":"false"}},"required":false},"required":true},"CronFormat":{"description":"Crontab表达式，以便定期执行任务，更多信息，请参见[Crontab表达式](~~206581~~)。","type":"string","required":true,"example":"0 0 2 * * ?"},"CronClearItemList":{"description":"待清理的数据表列表。","type":"array","items":{"description":"待清理的数据表信息。","type":"object","properties":{"TableName":{"description":"表名，您可以调用[ListTables](~~141878~~)接口获取该参数。","type":"string","required":true,"example":"t1"},"ColumnName":{"description":"字段名。字段为日期类型。","type":"string","required":true,"example":"gmt_create"},"RemainDays":{"description":"保留时长，即历史数据清理的规则，单位为天。例如您配置为7天，DMS将在执行时删除7天前的数据。","type":"integer","format":"int64","required":true,"example":"7"},"TimeUnit":{"description":"时间精度类型，当选择字段为日期数值型存储时使用，取值：\n- **MILLISECONDS**：毫秒\n- **SECONDS**：秒","type":"string","required":false,"example":"MILLISECONDS","default":"MILLISECONDS","enum":["MILLISECONDS","SECONDS"]},"FilterSQL":{"description":"过滤条件。","type":"string","required":false,"example":"where 1 = 1"}},"required":false},"required":true},"specifyDuration":{"description":"是否指定执行时长，取值：\n- **true**：指定执行时长，到达指定时间后即停止执行。\n- **false**：不指定执行时长，直到清理结束。","type":"boolean","required":true,"example":"true"},"DurationHour":{"description":"执行时长，单位为小时。\n> 当**specifyDuration**参数为**true**时，该参数必填。","type":"integer","format":"int64","required":false,"example":"4"}},"required":true}},{"name":"AttachmentKey","in":"query","schema":{"description":"工单补充附件，对本次操作进行补充说明。\n\n您可以调用[GetUserUploadFileJob](~~206069~~)接口获取该参数。","type":"string","required":false,"example":"order_attachement.txt"}},{"name":"Tid","in":"query","schema":{"description":"租户ID。\n> 取自系统右上角头像处悬停展示的租户ID信息，详情请参见[查看租户信息](~~181330~~)。","type":"integer","format":"int64","required":false,"maximum":"9223372036854775807","minimum":"1","example":"123454324"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931"},"Success":{"description":"请求是否成功。","type":"boolean","example":"true"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"UnknownError"},"ErrorCode":{"description":"错误码。","type":"string","example":"UnknownError"},"CreateOrderResult":{"description":"工单创建结果。","type":"array","items":{"description":"工单号。","type":"integer","format":"int64","example":"1341532"}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931\\\",\\n  \\\"Success\\\": true,\\n  \\\"ErrorMessage\\\": \\\"UnknownError\\\",\\n  \\\"ErrorCode\\\": \\\"UnknownError\\\",\\n  \\\"CreateOrderResult\\\": [\\n    1341532\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDataCronClearOrderResponse>\\n    <RequestId>0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931</RequestId>\\n    <Success>true</Success>\\n    <CreateOrderResult>1341532</CreateOrderResult>\\n</CreateDataCronClearOrderResponse>\",\"errorExample\":\"\"}]","title":"创建历史数据清理工单","description":"目前仅支持安全协同管控模式的MySQL实例调用该接口。\n\n关于该功能的更多说明，请参见[历史数据清理](~~162507~~)。"}