{"summary":"创建无锁变更工单。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"Comment","in":"query","schema":{"description":"\n业务背景，以减少沟通成本。","type":"string","required":true,"example":"test"}},{"name":"RelatedUserList","in":"query","style":"json","schema":{"description":"相关人列表。","type":"array","items":{"description":"变更相关人的用户ID，设置的相关人员可查看工单，并协同工作，非相关人员则不能查看工单（管理员、DBA除外）。","type":"integer","format":"int64","required":false,"example":"51****"},"required":false}},{"name":"Param","in":"query","style":"json","schema":{"description":"工单参数。","type":"object","properties":{"Classify":{"description":"数据变更原因。","type":"string","required":false,"example":"test"},"ExecSQL":{"description":"变更SQL语句。\n","type":"string","required":true,"example":"delete from base_user where 1 = 1;"},"SqlType":{"description":"变更SQL的提交方式，取值如下：\n- **TEXT**：文本\n- **ATTACHMENT**：附件，暂不支持。","type":"string","required":true,"example":"TEXT","default":"TEXT","enum":["TEXT"]},"AttachmentName":{"description":"变更SQL附件Key，暂不支持该参数。","type":"string","required":false,"example":"test.sql"},"RollbackSQL":{"description":"回滚SQL语句。","type":"string","required":false,"example":"empty"},"RollbackAttachmentName":{"description":"回滚SQL附件Key，暂不支持该参数。","type":"string","required":false,"example":"test_rollback.sql"},"RollbackSqlType":{"description":"回滚SQL的提交方式，取值：\n- **TEXT**：文本\n- **ATTACHMENT**：附件，暂不支持。","type":"string","required":false,"example":"TEXT","enum":["TEXT","ATTACHMENT"]},"DbItemList":{"description":"变更的数据库列表。","type":"array","items":{"description":"数据库信息。","type":"object","properties":{"DbId":{"description":"数据库ID（DatabaseId），数据库分为物理库和逻辑库两种：\n- 物理库ID：可通过调用接口[ListDatabases](~~141873~~)或[SearchDatabase](~~141876~~)获取该参数的值。\n- 逻辑库ID：可通过调用接口[ListLogicDatabases](~~141874~~)或[SearchDatabase](~~141876~~)获取该参数的值。","type":"integer","format":"int64","required":true,"example":"1860****"},"Logic":{"description":"是否为逻辑库，取值如下：\n- **true**：逻辑库\n- **false**：物理库","type":"boolean","required":true,"example":"false"}},"required":false},"required":true},"ExecMode":{"description":"工单执行方式，取值如下：\n\n- **COMMITOR** : 审批通过后，提交者执行。\n- **AUTO** : 审批通过后，自动执行。\n- **LAST_AUDITOR** : 审批通过后，最后一个审批人执行。","type":"string","required":false,"example":"COMMITOR","default":"COMMITOR","enum":["COMMITOR","AUTO","LAST_AUDITOR"]}},"required":true}},{"name":"AttachmentKey","in":"query","schema":{"description":"工单附件Key，补充当前工单信息。可通过调用[GetUserUploadFileJob](~~206069~~)接口获取该参数的值。","type":"string","required":false,"example":"order_attachment.txt"}},{"name":"Tid","in":"query","schema":{"description":"租户ID，可通过调用接口[GetUserActiveTenant](~~198073~~)或[ListUserTenants](~~198074~~)获取该参数的值。","type":"integer","format":"int64","required":false,"maximum":"9223372036854775807","minimum":"1","example":"3***"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931"},"Success":{"description":"请求是否成功，返回值如下：\n- **true**：请求成功\n- **false**：请求失败","type":"boolean","example":"true"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"UnknownError"},"ErrorCode":{"description":"错误码。","type":"string","example":"UnknownError"},"CreateOrderResult":{"description":"工单创建结果。","type":"array","items":{"description":"工单号。","type":"integer","format":"int64","example":"134****"}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931\\\",\\n  \\\"Success\\\": true,\\n  \\\"ErrorMessage\\\": \\\"UnknownError\\\",\\n  \\\"ErrorCode\\\": \\\"UnknownError\\\",\\n  \\\"CreateOrderResult\\\": [\\n    0\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateFreeLockCorrectOrderResponse>\\n    <RequestId>0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931</RequestId>\\n    <Success>true</Success>\\n    <ErrorMessage>UnknownError</ErrorMessage>\\n    <ErrorCode>UnknownError</ErrorCode>\\n    <CreateOrderResult>1340000</CreateOrderResult>\\n</CreateFreeLockCorrectOrderResponse>\",\"errorExample\":\"\"}]","title":"创建无锁变更工单","description":"- 目前仅支持管控模式为安全协同的实例调用该API。更多信息，请参见[无锁数据变更](~~96145~~)、[无锁结构变更](~~98373~~)。\n- 成功调用CreateFreeLockCorrectOrder后，还需要调用[SubmitOrderApproval](~~465869~~)接口提交工单审批、[ApproveOrder](~~465870~~)接口审批工单以及[ExecuteDataCorrect](~~466296~~)接口执行数据变更。"}