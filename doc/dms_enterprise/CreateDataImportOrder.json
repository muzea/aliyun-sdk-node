{"summary":"创建数据导入工单。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"Comment","in":"query","schema":{"description":"\n数据导入的业务背景，以减少沟通成本。","type":"string","required":true,"example":"test"}},{"name":"RelatedUserList","in":"query","style":"json","schema":{"description":"相关人列表。","type":"array","items":{"description":"变更相关人的用户ID，设置的相关人员可查看工单，并协同工作，非相关人员则不能查看工单（管理员、DBA除外）。","type":"integer","format":"int64","required":false,"example":"51****"},"required":false}},{"name":"Param","in":"query","style":"json","schema":{"description":"工单参数。","type":"object","properties":{"Classify":{"description":"数据导入原因。","type":"string","required":false,"example":"test"},"AttachmentName":{"description":"导入数据的附件Key（AttachmentKey），可通过调用接口[GetUserUploadFileJob](~~206069~~)获取该参数的值。","type":"string","required":true,"example":"upload_big_file_test_orders"},"DbItemList":{"description":"待导入的数据库列表，当前仅支持导入一个库。","type":"array","items":{"description":"数据库信息。","type":"object","properties":{"DbId":{"description":"数据库ID（DatabaseId），数据库分为物理库和逻辑库两种：\n- 物理库ID：可通过调用接口[ListDatabases](~~141873~~)或[SearchDatabase](~~141876~~)获取该参数的值。\n- 逻辑库ID：可通过调用接口[ListLogicDatabases](~~141874~~)或[SearchDatabase](~~141876~~)获取该参数的值。","type":"integer","format":"int64","required":true,"example":"1860****"},"Logic":{"description":"是否为逻辑库，取值如下：\n- **true**：逻辑库\n- **false**：物理库\n\n> 如果取值为**true**，目标数据库必须为逻辑库。","type":"boolean","required":true,"example":"false"}},"required":false},"required":true},"FileType":{"description":"文件类型，取值如下：\n- **SQL**：SQL文件\n- **CSV**：CSV文件","type":"string","required":true,"example":"CSV","enum":["SQL","CSV","JSON"]},"FileEncoding":{"description":"文件编码，取值如下：\n- **AUTO**：自动识别\n- **UTF-8**：UTF8编码\n- **GBK**：GBK编码\n- **ISO-8859-1**：ISO-8859-1编码","type":"string","required":false,"example":"AUTO"},"TableName":{"description":"选择CSV格式文件导入数据的目标表。\n> 如果**FileType**为**CSV**，该参数必填。","type":"string","required":false,"example":"Table_text"},"InsertType":{"description":"插入类型，取值如下：\n\n- **INSERT**：插入数据时数据库会检查主键（PrimaryKey），如果出现重复会报错。\n-  **INSERT_IGNORE**：如果表中已经存在相同的记录，则忽略当前新数据。\n- **REPLACE_INTO**：如果表中已经有某行数据（根据主键或者唯一索引判断），则先删除此行数据，然后插入新的数据。\n\n> 如果**FileType**为**CSV**，该参数必填。","type":"string","required":false,"example":"INSERT","default":"INSERT","enum":["INSERT","INSERT_IGNORE","REPLACE_INTO"]},"CsvFirstRowIsColumnDef":{"description":"CSV格式的类型，取值如下：\n- **true**：CSV表格首行是字段名。\n- **false**：CSV表格首行是数据。\n\n> 如果**FileType**为**CSV**，该参数必填。","type":"boolean","required":false,"example":"true"},"IgnoreError":{"description":"是否忽略报错，取值如下：\n- **true**：忽略，遇到错误会跳过当前失败SQL脚本，继续执行。\n- **false**：不忽略，遇到出错则中断后面的SQL脚本，不再执行。","type":"boolean","required":false,"example":"false"},"ImportMode":{"description":"导入模式，取值如下：\n- **FAST_MODE**：极速模式，在执行阶段读取文件，将SQL语句直接执行到指定的目标库。该模式安全性相比安全模式要低，但是执行时效较高。\n- **SAFE_MODE**：安全模式，在预检查阶段会解析文件并将SQL或CSV数据缓存入库，执行时再从缓存库中读出来执行到指定的目标库。该模式安全性较好，但是执行时效相比极速模式要低。","type":"string","required":false,"example":"FAST_MODE","default":"SAFE_MODE","enum":["SAFE_MODE","FAST_MODE"]},"RollbackSQL":{"description":"回滚SQL语句。\n> 如果**RollbackSqlType**为**TEXT**，该参数必填。","type":"string","required":false,"example":"empty"},"RollbackAttachmentName":{"description":"回滚SQL附件Key（AttachmentKey），可通过调用接口[GetUserUploadFileJob](~~206069~~)获取该参数的值。\n\n> 如果**RollbackSqlType**为**ATTACHMENT**，该参数必填。","type":"string","required":false,"example":"rollback.sql"},"RollbackSqlType":{"description":"回滚SQL的提交方式，取值如下：\n- **TEXT**：文本\n- **ATTACHMENT**：附件","type":"string","required":false,"example":"TEXT","enum":["TEXT","ATTACHMENT"]}},"required":true}},{"name":"AttachmentKey","in":"query","schema":{"description":"工单附件Key，补充当前工单信息。可通过调用接口[GetUserUploadFileJob](~~206069~~)获取该参数的值。","type":"string","required":false,"example":"order_attachment.txt"}},{"name":"Tid","in":"query","schema":{"description":"租户ID，可通过调用接口[GetUserActiveTenant](~~198073~~)或[ListUserTenants](~~198074~~)获取该参数的值。","type":"integer","format":"int64","required":false,"maximum":"9223372036854775807","minimum":"1","example":"3***"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931"},"Success":{"description":"请求是否成功，返回值如下：\n- **true**：请求成功\n- **false**：请求失败","type":"boolean","example":"true"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"UnknownError"},"ErrorCode":{"description":"错误码。","type":"string","example":"UnknownError"},"CreateOrderResult":{"description":"工单创建结果。","type":"array","items":{"description":"工单号。","type":"integer","format":"int64","example":"1****"}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931\\\",\\n  \\\"Success\\\": true,\\n  \\\"ErrorMessage\\\": \\\"UnknownError\\\",\\n  \\\"ErrorCode\\\": \\\"UnknownError\\\",\\n  \\\"CreateOrderResult\\\": [\\n    0\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDataImportOrderResponse>\\n    <RequestId>0C1CB646-1DE4-4AD0-B4A4-7D47DD52E931</RequestId>\\n    <Success>true</Success>\\n    <CreateOrderResult>1****</CreateOrderResult>\\n</CreateDataImportOrderResponse>\",\"errorExample\":\"\"}]","title":"创建数据导入工单","description":"仅管控模式为安全协同的数据库实例可调用此API。\n\n关于该功能的更多说明，请参见[数据导入](~~161439~~)。"}