{"summary":"获取数据变更工单详细信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"12557","abilityTreeNodes":["FEATUREdmsILBT4A","FEATUREdms1AAQ1Q"]},"parameters":[{"name":"Tid","in":"query","schema":{"description":"租户ID，可通过调用接口[GetUserActiveTenant](~~198073~~)或[ListUserTenants](~~198074~~)获取该参数的值。","type":"integer","format":"int64","required":false,"example":"3***"}},{"name":"OrderId","in":"query","schema":{"description":"工单ID，可通过调用接口[ListOrders](~~144643~~)获取该参数的值。","type":"integer","format":"int64","required":true,"docRequired":true,"example":"420****"}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"427688B8-ADFB-4C4E-9D45-EF5C1FD6E23D"},"DataCorrectOrderDetail":{"description":"数据变更工单详情信息。","type":"object","properties":{"PreCheckDetail":{"type":"object","properties":{"TaskCheckDO":{"description":"预校验详情信息列表。","type":"array","items":{"description":"预校验详情信息。","type":"object","properties":{"UserTip":{"description":"校验步骤提示信息。","type":"string","example":"tip messsage"},"CheckStatus":{"description":"预校验状态，返回值如下：\n- **WAITING**：等待检查\n- **RUNNING**：检查中\n- **SUCCESS**：通过\n- **FAIL**：不通过","type":"string","example":"SUCCESS"},"CheckStep":{"description":"检查步骤，返回值如下：\n- **SQL_PARSE**：解析\n- **SQL_TYPE_CHECK**：类型检查\n- **PERMISSION_CHECK**：权限检查\n- **ROW_CHECK**：行数检查","type":"string","example":"PERMISSION_CHECK"}}}}}},"OrderDetail":{"description":"工单详情信息。","type":"object","properties":{"RbSQL":{"description":"回滚SQL。","type":"string","example":"empty"},"RbAttachmentName":{"description":"回滚SQL附件。","type":"string","example":"test"},"Classify":{"description":"变更原因分类。","type":"string","example":"test"},"ExeSQL":{"description":"执行的SQL语句。","type":"string","example":"update t1 set name = 'xxx' where id <= 100"},"EstimateAffectRows":{"description":"预估影响行数 。","type":"integer","format":"int64","example":"100"},"RbSQLType":{"description":"回滚SQL类型，返回值如下：\n- **TEXT**：文本\n-  **ATTACHMENT**：附件","type":"string","example":"text"},"ActualAffectRows":{"description":"系统校验的影响行数。","type":"integer","format":"int64","example":"100"},"IgnoreAffectRows":{"description":"是否忽略预校验，返回值如下：\n- **true**：忽略预校验\n- **false**：不忽略预校验","type":"boolean","example":"false"},"AttachmentName":{"description":"SQL附件。","type":"string","example":"xxx"},"SqlType":{"description":"SQL类型，返回值如下：\n- **TEXT**：文本\n-  **ATTACHMENT**：附件","type":"string","example":"text"},"IgnoreAffectRowsReason":{"description":"忽略预校验原因。","type":"string","example":"test"}}},"DatabaseList":{"type":"object","properties":{"Database":{"description":"变更库信息列表。","type":"array","items":{"type":"object","properties":{"DbId":{"description":"数据库ID。","type":"integer","format":"int32","example":"1860****"},"DbType":{"description":"数据库类型。","type":"string","example":"mysql"},"Logic":{"description":"是否为逻辑库，返回值如下：\n- **true**：逻辑库。\n- **false**：物理库。","type":"boolean","example":"false"},"SearchName":{"description":"数据库搜索名。","type":"string","example":"xxx@xxx:3306"},"EnvType":{"description":"环境类型，返回值如下：\n- product：生产环境\n- dev：开发环境\n- pre：预发环境\n- test：测试环境\n- sit：SIT环境\n- uat：UAT环境\n- pet：压测环境\n- stag：STAG环境","type":"string","example":"product"}}}}}},"Status":{"description":"数据变更工单特有的状态，返回值如下：\n> 此状态与工单状态码不完全等价，若需要得到工单状态，请通过[GetOrderBaseInfo](~~465868~~)返回的StatusCode属性获取。\n- **new**：新建。\n- **precheck**：预检查阶段。\n- **precheck_fail**：预检查失败。\n- **precheck_success**：预检查成功, 等待提交审批。\n- **toaudit**：审批中。\n- **approved**：审批通过。\n- **reject**：审批拒绝。\n- **waiting**：任务已提交，待调度处理。\n- **processing**：执行中。\n- **success**：执行成功。","type":"string","example":"approved"},"ExecMode":{"description":"工单执行方式，返回值如下：\n- **COMMITOR** : 审批通过后，提交者执行。\n- **AUTO** : 审批通过后，自动执行。\n- **LAST_AUDITOR** : 审批通过后，最后一个审批人执行。","type":"string","example":"COMMITOR"},"ConfigDetail":{"description":"工单配置信息，主要用于存储不同数据变更工单类型的差异化配置信息。","type":"object","properties":{"DetailType":{"description":"标识变更工单信息类型，取值和说明如下：\n- COMMON：普通数据变更。\n- CHUNK_DML：无锁变更。\n- BIG_FILE：数据导入。\n- CRON_CLEAR_DATA：历史数据清理。\n- PROCEDURE：可编程对象。","type":"string","example":"BIG_FILE"},"FileType":{"description":"当 DetailType为 BIG_FILE时，标识数据导入的文件类型，取值如下：\n- **SQL**：SQL文件。\n- **CSV**：CSV文件。\n- **EXCEL**：Excel文件。\n- **JSON**：JSON文件，仅MongoDB支持。","type":"string","example":"CSV"},"CsvTableName":{"description":"数据导入表名，仅当DetailType为BIG_FILE时有效，若FileType取值为SQL，则此属性为空。","type":"string","example":"tb_import_tb_name"},"FileEncoding":{"description":"文件编码，注意取值可能为空，为空则代表AUTO，取值如下：\n- **AUTO**：自动识别\n- **UTF-8**：UTF8编码\n- **GBK**：GBK编码\n- **ISO-8859-1**：ISO-8859-1编码","type":"string","example":"UTF-8"},"Cron":{"description":"是否为历史数据清理定时任务，预留字段，当且仅当DetailType为CRON_CLEAR_DATA有效。","type":"boolean","example":"true"},"CronCallTimes":{"description":"当DetailType为CRON_CLEAR_DATA时有效，表示已调度次数。","type":"integer","format":"int32","example":"0"},"CronFormat":{"description":"当DetailType为CRON_CLEAR_DATA时有效，表示定时任务Cron表达式。","type":"string","example":"0 0 2 * * ?"},"Duration":{"description":"当DetailType为CRON_CLEAR_DATA时有效，表示定时清理执行时长，单位为小时。当取值大于0，表示设置了清理时长。","type":"integer","format":"int32","example":"1"},"CronStatus":{"description":"定时任务状态，为空表示未调度，其他取值和说明如下：\n\n- PAUSE：调度暂停。\n- WAITING：待调度。\n- SUCCESS：调度完成。","type":"string","example":"SUCCESS"},"CronLastCallStartTime":{"description":"最近一次调度时间。","type":"string","example":"2024-04-19 02:00:00.0"},"CronNextCallTime":{"description":"下一次调度时间。仅当调度状态为SUCCESS时才会有显示。","type":"string","example":"2024-04-19 02:00:00\n"},"CurrentTaskId":{"description":"当前数据变更任务ID，保留字段，业务暂时不依赖。","type":"integer","format":"int64","example":"13***"},"ImportExtConfig":{"description":"当DetailType为BIG_FILE，即为数据导入工单时，此处提供数据导入附加配置信息。","type":"object","properties":{"InsertType":{"description":"插入类型，取值如下：\n\n- **INSERT**：插入数据时数据库会检查主键（PrimaryKey），如果出现重复会报错。\n-  **INSERT_IGNORE**：如果表中已经存在相同的记录，则忽略当前新数据。\n- **REPLACE_INTO**：如果表中已经有某行数据（根据主键或者唯一索引判断），则先删除此行数据，然后插入新的数据。\n\n> 如果FileType为CSV或者为EXCEL，该参数有效。","type":"string","example":"INSERT"},"CsvFirstRowIsColumnDef":{"description":"CSV格式的类型，取值如下：\n- **true**：CSV表格首行是字段名。\n- **false**：CSV表格首行是数据。\n\n> 如果**FileType**为**CSV**或者为**EXCEL**，该参数有效。","type":"boolean","example":"true"},"IgnoreError":{"description":"是否忽略报错，取值：\n- **true**：忽略，遇到错误会跳过当前失败SQL脚本，继续执行。\n- **false**：不忽略，遇到出错则中断后面的SQL脚本，不再执行。","type":"boolean","example":"false"},"ImportMode":{"description":"导入模式，取值如下：\n- **FAST_MODE**：极速模式，在执行阶段读取文件，将SQL语句直接执行到指定的目标库。该模式安全性相比安全模式要低，但是执行时效较高。\n- **SAFE_MODE**：安全模式，在预检查阶段会解析文件并将SQL或CSV数据缓存入库，执行时再从缓存库中读出来执行到指定的目标库。该模式安全性较好，但是执行时效相比极速模式要低。","type":"string","example":"FAST_MODE"}}},"CronExtConfig":{"description":"当且仅当DetailType为CRON_CLEAR_DATA，即为历史数据清理工单时，此处提供历史数据清理额外配置信息。","type":"object","properties":{"OptimizeTableAfterEveryClearTimes":{"description":"是否启用自动Optimize table，取值：\n\n- **0**：不启用。\n- **大于0**：启用，表示每隔多少次清理以后再进行Optimize table。","type":"integer","format":"int32","example":"0"},"CurrentClearTaskCount":{"description":"已进行自动optimize table的次数。仅当OptimizeTableAfterEveryClearTimes大于0时有效。","type":"integer","format":"int32","example":"0"}}}}}}},"ErrorCode":{"description":"错误码。","type":"string","example":"UnknownError"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"UnknownError"},"Success":{"description":"请求是否成功，返回值如下：\n- **true**：请求成功。\n- **false**：请求失败。","type":"boolean","example":"true"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"427688B8-ADFB-4C4E-9D45-EF5C1FD6E23D\\\",\\n  \\\"DataCorrectOrderDetail\\\": {\\n    \\\"PreCheckDetail\\\": {\\n      \\\"TaskCheckDO\\\": [\\n        {\\n          \\\"UserTip\\\": \\\"tip messsage\\\",\\n          \\\"CheckStatus\\\": \\\"SUCCESS\\\",\\n          \\\"CheckStep\\\": \\\"PERMISSION_CHECK\\\"\\n        }\\n      ]\\n    },\\n    \\\"OrderDetail\\\": {\\n      \\\"RbSQL\\\": \\\"empty\\\",\\n      \\\"RbAttachmentName\\\": \\\"test\\\",\\n      \\\"Classify\\\": \\\"test\\\",\\n      \\\"ExeSQL\\\": \\\"update t1 set name = 'xxx' where id <= 100\\\",\\n      \\\"EstimateAffectRows\\\": 100,\\n      \\\"RbSQLType\\\": \\\"text\\\",\\n      \\\"ActualAffectRows\\\": 100,\\n      \\\"IgnoreAffectRows\\\": false,\\n      \\\"AttachmentName\\\": \\\"xxx\\\",\\n      \\\"SqlType\\\": \\\"text\\\",\\n      \\\"IgnoreAffectRowsReason\\\": \\\"test\\\"\\n    },\\n    \\\"DatabaseList\\\": {\\n      \\\"Database\\\": [\\n        {\\n          \\\"DbId\\\": 0,\\n          \\\"DbType\\\": \\\"mysql\\\",\\n          \\\"Logic\\\": false,\\n          \\\"SearchName\\\": \\\"xxx@xxx:3306\\\",\\n          \\\"EnvType\\\": \\\"product\\\"\\n        }\\n      ]\\n    },\\n    \\\"Status\\\": \\\"approved\\\",\\n    \\\"ExecMode\\\": \\\"COMMITOR\\\",\\n    \\\"ConfigDetail\\\": {\\n      \\\"DetailType\\\": \\\"BIG_FILE\\\",\\n      \\\"FileType\\\": \\\"CSV\\\",\\n      \\\"CsvTableName\\\": \\\"tb_import_tb_name\\\",\\n      \\\"FileEncoding\\\": \\\"UTF-8\\\",\\n      \\\"Cron\\\": true,\\n      \\\"CronCallTimes\\\": 0,\\n      \\\"CronFormat\\\": \\\"0 0 2 * * ?\\\",\\n      \\\"Duration\\\": 1,\\n      \\\"CronStatus\\\": \\\"SUCCESS\\\",\\n      \\\"CronLastCallStartTime\\\": \\\"2024-04-19 02:00:00.0\\\",\\n      \\\"CronNextCallTime\\\": \\\"2024-04-19 02:00:00\\\\n\\\",\\n      \\\"CurrentTaskId\\\": 0,\\n      \\\"ImportExtConfig\\\": {\\n        \\\"InsertType\\\": \\\"INSERT\\\",\\n        \\\"CsvFirstRowIsColumnDef\\\": true,\\n        \\\"IgnoreError\\\": false,\\n        \\\"ImportMode\\\": \\\"FAST_MODE\\\"\\n      },\\n      \\\"CronExtConfig\\\": {\\n        \\\"OptimizeTableAfterEveryClearTimes\\\": 0,\\n        \\\"CurrentClearTaskCount\\\": 0\\n      }\\n    }\\n  },\\n  \\\"ErrorCode\\\": \\\"UnknownError\\\",\\n  \\\"ErrorMessage\\\": \\\"UnknownError\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetDataCorrectOrderDetailResponse>\\n    <RequestId>427688B8-ADFB-4C4E-9D45-EF5C1FD6E23D</RequestId>\\n    <DataCorrectOrderDetail>\\n        <PreCheckDetail>\\n            <UserTip>tip messsage</UserTip>\\n            <CheckStatus>SUCCESS</CheckStatus>\\n            <CheckStep>PERMISSION_CHECK</CheckStep>\\n        </PreCheckDetail>\\n        <OrderDetail>\\n            <RbSQL>empty</RbSQL>\\n            <RbAttachmentName>test</RbAttachmentName>\\n            <Classify>test</Classify>\\n            <ExeSQL>update t1 set name = 'xxx' where id &lt;= 100</ExeSQL>\\n            <EstimateAffectRows>100</EstimateAffectRows>\\n            <RbSQLType>text</RbSQLType>\\n            <ActualAffectRows>100</ActualAffectRows>\\n            <IgnoreAffectRows>false</IgnoreAffectRows>\\n            <AttachmentName>xxx</AttachmentName>\\n            <SqlType>text</SqlType>\\n            <IgnoreAffectRowsReason>test</IgnoreAffectRowsReason>\\n        </OrderDetail>\\n        <DatabaseList>\\n            <DbId>1860****</DbId>\\n            <DbType>mysql</DbType>\\n            <Logic>false</Logic>\\n            <SearchName>xxx@xxx:3306</SearchName>\\n            <EnvType>product</EnvType>\\n        </DatabaseList>\\n        <Status>approved</Status>\\n        <ExecMode>COMMITOR</ExecMode>\\n    </DataCorrectOrderDetail>\\n    <Success>true</Success>\\n</GetDataCorrectOrderDetailResponse>\",\"errorExample\":\"\"}]","title":"获取数据变更工单详细信息","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}