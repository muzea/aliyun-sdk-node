{"summary":"获取指定时间内的操作日志详情列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"Tid","in":"query","schema":{"description":"租户ID，可通过调用接口[GetUserActiveTenant](~~198073~~)或[ListUserTenants](~~198074~~)获取该参数的值。","type":"integer","format":"int64","required":false,"docRequired":false,"example":"3***"}},{"name":"Module","in":"query","schema":{"description":"功能模块，缺省则返回对应时间段内所有功能模块，取值如下：\n- **PERMISSION**：权限\n- **OWNER**：数据Owner\n- **SQL_CONSOLE**：SQL窗口\n- **SQL\\_CONSOLE\\_EXPORT**：SQL窗口结果导出\n- **DATA_CHANGE**：数据变更\n- **DATA_EXPORT**：数据导出\n- **SQL_REVIEW**：SQL审核\n- **DT_SYNC**：库表同步\n- **DT_DETAIL**：库表详情\n- **DB_TASK**：任务管理\n- **INSTANCE_MANAGE**：实例管理\n- **USER_MANAGE**：用户管理\n- **SECURITY_RULE**：安全规则\n- **CONFIG_MANAGE**：配置管理\n- **RESOURCE_AUTH**：资源授权\n- **ACCESS_WHITE_IP**：访问IP白名单\n- **NDDL**：结构设计\n- **DSQL_CONSOLE**：跨库数据查询\n- **DSQL_CONSOLE_EXPORT**：跨库查询结果导出\n- **DATA_TRACT**：数据追踪\n- **DATA_QUALITY**：数据质量\n- **DATALINK_MANAGE**：DBLink管理\n- **DATASEC_MANAGE**：敏感数据管理\n- **SELL**：售卖","type":"string","required":false,"example":"SECURITY_RULE"}},{"name":"StartTime","in":"query","schema":{"description":"开始时间，时间格式为yyyy-MM-DD HH:mm:ss。","type":"string","required":true,"docRequired":true,"example":"2022-03-23 10:00:00"}},{"name":"EndTime","in":"query","schema":{"description":"结束时间，时间格式为yyyy-MM-DD HH:mm:ss。","type":"string","required":true,"docRequired":true,"example":"2022-03-29 10:00:00"}},{"name":"PageSize","in":"query","schema":{"description":"每页记录数，取值如下：\n- 30\n- 50\n- 100","type":"integer","format":"int32","required":true,"docRequired":true,"example":"30"}},{"name":"PageNumber","in":"query","schema":{"description":"页码，从1开始。","type":"integer","format":"int32","required":true,"docRequired":true,"example":"1"}},{"name":"UserNick","in":"query","schema":{"description":"用户在DMS上的显示名。","type":"string","required":false,"example":"test_name"}},{"name":"DatabaseName","in":"query","schema":{"description":"数据库名称。","type":"string","required":false,"example":"dmstest@rm-bp1qb97d4b****.mysql.rds.aliyuncs.com:3306【poc_dev】"}}],"responses":{"200":{"schema":{"type":"object","properties":{"TotalCount":{"description":"操作日志总条数。","type":"integer","format":"int64","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"47D56208-DB1D-4FD3-BE32-300E43185488"},"ErrorCode":{"description":"错误码。","type":"string","example":"403"},"OpLogDetails":{"type":"object","properties":{"OpLogDetail":{"description":"操作日志详情列表。","type":"array","items":{"description":"操作日志详情。","type":"object","properties":{"Module":{"description":"功能模块。","type":"string","example":"安全规则"},"Database":{"description":"数据库访问地址。\n\n> - 仅实例类型为LocalInstance时有这个属性。\n> - 仅任务类型区域的各功能模块操作有这个属性。","type":"string","example":"dmstest@rm-bp1qb97d4b****.mysql.rds.aliyuncs.com:3306【poc_dev】"},"UserId":{"description":"用户UID。","type":"string","example":"22275482072787****"},"OpUserId":{"description":"操作人员的用户ID。","type":"integer","format":"int64","example":"51****"},"OpContent":{"description":"操作内容。","type":"string","example":"SELECT * FROM `orders` \\n LIMIT 20"},"UserNick":{"description":"用户显示名。","type":"string","example":"test_name"},"OrderId":{"description":"工单号或任务号。\n\n\n> 仅任务类型区域的各功能模块操作与系统管理任务管理功能模块的操作才有这个属性。\n","type":"integer","format":"int64","example":"509****"},"OpTime":{"description":"操作时间。","type":"string","example":"2022-03-28 16:45:19"}}}}}},"ErrorMessage":{"description":"错误消息。","type":"string","example":"UnknownError"},"Success":{"description":"请求是否成功，返回值如下：\n- **true**：请求成功\n- **false**：请求失败","type":"boolean","example":"true"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TotalCount\\\": 1,\\n  \\\"RequestId\\\": \\\"47D56208-DB1D-4FD3-BE32-300E43185488\\\",\\n  \\\"ErrorCode\\\": \\\"403\\\",\\n  \\\"OpLogDetails\\\": {\\n    \\\"OpLogDetail\\\": [\\n      {\\n        \\\"Module\\\": \\\"安全规则\\\",\\n        \\\"Database\\\": \\\"dmstest@rm-bp1qb97d4b****.mysql.rds.aliyuncs.com:3306【poc_dev】\\\",\\n        \\\"UserId\\\": \\\"22275482072787****\\\",\\n        \\\"OpUserId\\\": 0,\\n        \\\"OpContent\\\": \\\"SELECT * FROM `orders` \\\\\\\\n LIMIT 20\\\",\\n        \\\"UserNick\\\": \\\"test_name\\\",\\n        \\\"OrderId\\\": 0,\\n        \\\"OpTime\\\": \\\"2022-03-28 16:45:19\\\"\\n      }\\n    ]\\n  },\\n  \\\"ErrorMessage\\\": \\\"UnknownError\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetOpLogResponse>\\n    <TotalCount>1</TotalCount>\\n    <RequestId>47D56208-DB1D-4FD3-BE32-300E43185488</RequestId>\\n    <OpLogDetails>\\n        <OpUserId>51****</OpUserId>\\n        <UserId>22275482072787****</UserId>\\n        <Database>dmstest_prod_database@dmstest.rds...【测试实例】</Database>\\n        <OpContent>SELECT * FROM `orders` \\\\n LIMIT 20</OpContent>\\n        <UserNick>test_name</UserNick>\\n        <Module>安全规则</Module>\\n        <OpTime>2022-03-28 16:39:44</OpTime>\\n    </OpLogDetails>\\n    <Success>true</Success>\\n</GetOpLogResponse>\",\"errorExample\":\"\"}]","title":"获取指定时间内的操作日志详情列表","description":"仅用户角色为管理员、DBA或安全管理员，可调用[ListUsers](~~141938~~)或[GetUser](~~147098~~)接口获取用户角色（RoleIdList）。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"## SDK示例\n\nSDK使用基础信息参考：[阿里云Python SDK](~~315437~~)\n\n示例如下：\n\n```\nfrom aliyunsdkcore.client import AcsClient\nfrom aliyunsdkdms_enterprise.request.v20181101.GetOpLogRequest import GetOpLogRequest\nclient = AcsClient(\n    \"<your-access-key-id>\",\n   \"<your-access-key-secret>\",\n   \"<your-region-id>\"\n)\nrequest = GetOpLogRequest()\nrequest.set_Tid(\"请输入你的企业租户id\")\nrequest.set_StartTime(\"2018-11-20 00:00:00\")\nrequest.set_EndTime(\"2018-11-23 00:00:00\")\nrequest.set_PageNumber(1)\nrequest.set_PageSize(50)\nresponse = client.do_action_with_exception(request)\nprint response\n```"}