{"summary":"获取在DMS进行SQL操作的审计日志列表。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list"},"parameters":[{"name":"StartTime","in":"query","schema":{"description":"开始操作的时间。\n\n> 开始时间可模糊输入，时间格式为YYYY-MM-DD hh:mm:ss。","type":"string","required":true,"docRequired":true,"example":"2021-11-08 11:04:00"}},{"name":"EndTime","in":"query","schema":{"description":"结束操作的时间。\n> 结束时间可模糊输入，时间格式为YYYY-MM-DD hh:mm:ss，建议您输入的开始时间和结束时间间隔不要超过一天，方便分页拉取，提升效率。","type":"string","required":true,"docRequired":true,"example":"2021-11-08 11:00:00"}},{"name":"SearchName","in":"query","schema":{"description":"搜索名称。\n> 此处的搜索名称可输入数据库名，如果是实例级别的SQL操作，则可输入实例名称。","type":"string","required":false,"example":"test_SearchName"}},{"name":"OpUserName","in":"query","schema":{"description":"操作人昵称。","type":"string","required":false,"example":"test_OpUserName"}},{"name":"SqlType","in":"query","schema":{"description":"SQL类型，常见SQL类型取值说明如下：\n- **SELECT**：查询\n- **INSERT**：插入\n- **DELETE**：删除\n- **CREATE_TABLE**：创建表\n\n> 您可以在控制台页面上方**操作审计**->**SQL类型**中查看更多SQL类型取值。","type":"string","required":false,"example":"SELECT"}},{"name":"ExecState","in":"query","schema":{"description":"执行状态，取值说明如下：\n- **-1**：执行失败\n- **0**：暂未执行\n- **2**：执行中\n- **-2**：取消执行\n- **1**：执行成功","type":"string","required":false,"example":"1","enum":[]}},{"name":"PageSize","in":"query","schema":{"description":"每页数据量。最大值不超过100。","type":"integer","format":"int32","required":false,"docRequired":true,"maximum":"100","minimum":"1","example":"20","default":"20"}},{"name":"PageNumber","in":"query","schema":{"description":"开始页码。请输入合理的页码，若页码填写超过日志总页数，可能会操作总记录数不为0，但是操作审计日志列表信息为空的情况。","type":"integer","format":"int32","required":false,"docRequired":true,"exclusiveMaximum":false,"minimum":"1","example":"1"}},{"name":"Tid","in":"query","schema":{"description":"租户ID，可通过调用接口[GetUserActiveTenant](~~198073~~)获取该参数的值。","type":"integer","format":"int64","required":false,"maximum":"9223372036854775807","minimum":"1","example":"3***"}}],"responses":{"200":{"schema":{"type":"object","properties":{"TotalCount":{"description":"操作总记录数。","type":"integer","format":"int64","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"39BC9C86-95AE-58F2-9862-A7C3D896****"},"ErrorCode":{"description":"错误码。","type":"string","example":"MissingStartTime"},"ErrorMessage":{"description":"错误信息。","type":"string","example":"StartTime is mandatory for this action."},"Success":{"description":"请求是否成功，返回值如下：\n- **true**：请求成功\n- **false**：请求失败","type":"boolean","example":"true"},"SQLExecAuditLogList":{"type":"object","properties":{"SQLExecAuditLog":{"description":"SQL操作审计列表。","type":"array","items":{"description":"SQL操作审计信息。","type":"object","properties":{"OpTime":{"description":"操作时间。","type":"string","example":"2021-11-08 11:04:27"},"UserName":{"description":"操作人昵称。","type":"string","example":"test_UserName"},"UserId":{"description":"操作人ID。","type":"integer","format":"int64","example":"12****"},"InstanceName":{"description":"数据库名称。\n> 如果此处为实例级别的操作，则返回实例名称。","type":"string","example":"polar123@pc-bp1h9tgq4st9g****.mysql.polardb.rds.aliyuncs.com:3306【polar_qw_测试】"},"InstanceId":{"description":"实例ID。","type":"integer","format":"int64","example":"185***"},"SchemaName":{"description":"数据库名称。","type":"string","example":"polar123"},"DbId":{"description":"数据库ID。","type":"integer","format":"int64","example":"2157****"},"Logic":{"description":"是否为逻辑库，返回值说明如下：\n- **true**：逻辑库\n- **false**：物理库","type":"boolean","example":"false"},"SQLType":{"description":"SQL类型，常见SQL类型返回值说明如下：\n- **SELECT**：查询\n- **INSERT**：插入\n- **DELETE**：删除\n- **CREATE_TABLE**：创建表\n\n> 您可以在控制台页面上方**操作审计**->**SQL类型**中查看更多SQL类型返回值。","type":"string","example":"SELECT"},"SQL":{"description":"已执行的SQL语句。","type":"string","example":"SELECT * FROM `polar123`.`p_qw` ORDER BY `id` DESC"},"ExecState":{"description":"执行状态，返回值说明如下：\n- **FAIL**：执行失败\n- **NOEXE**：暂未执行\n- **RUNNING**：执行中\n- **CANCEL**：取消执行\n- **SUCCESS**：执行成功","type":"string","example":"SUCCESS"},"AffectRows":{"description":"表示执行SQL语句后返回的总行数。比如，SQL语句为查询语句，此参数返回的是查询数据的总行数。","type":"integer","format":"int64","example":"2"},"ElapsedTime":{"description":"操作耗时，单位为毫秒。","type":"integer","format":"int64","example":"18"},"Remark":{"description":"备注信息。","type":"string","example":"success"}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TotalCount\\\": 1,\\n  \\\"RequestId\\\": \\\"39BC9C86-95AE-58F2-9862-A7C3D896****\\\",\\n  \\\"ErrorCode\\\": \\\"MissingStartTime\\\",\\n  \\\"ErrorMessage\\\": \\\"StartTime is mandatory for this action.\\\",\\n  \\\"Success\\\": true,\\n  \\\"SQLExecAuditLogList\\\": {\\n    \\\"SQLExecAuditLog\\\": [\\n      {\\n        \\\"OpTime\\\": \\\"2021-11-08 11:04:27\\\",\\n        \\\"UserName\\\": \\\"test_UserName\\\",\\n        \\\"UserId\\\": 0,\\n        \\\"InstanceName\\\": \\\"polar123@pc-bp1h9tgq4st9g****.mysql.polardb.rds.aliyuncs.com:3306【polar_qw_测试】\\\",\\n        \\\"InstanceId\\\": 0,\\n        \\\"SchemaName\\\": \\\"polar123\\\",\\n        \\\"DbId\\\": 0,\\n        \\\"Logic\\\": false,\\n        \\\"SQLType\\\": \\\"SELECT\\\",\\n        \\\"SQL\\\": \\\"SELECT * FROM `polar123`.`p_qw` ORDER BY `id` DESC\\\",\\n        \\\"ExecState\\\": \\\"SUCCESS\\\",\\n        \\\"AffectRows\\\": 2,\\n        \\\"ElapsedTime\\\": 18,\\n        \\\"Remark\\\": \\\"success\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ListSQLExecAuditLogResponse>\\n    <TotalCount>1</TotalCount>\\n    <RequestId>39BC****-95AE-58F2-9862-A7C3D896****</RequestId>\\n    <Success>true</Success>\\n    <SQLExecAuditLogList>\\n        <SQLExecAuditLog>\\n            <UserName>test_UserName</UserName>\\n            <InstanceId>185****</InstanceId>\\n            <ElapsedTime>18</ElapsedTime>\\n            <ExecState>SUCCESS</ExecState>\\n            <OpTime>2021-11-08 11:04:27</OpTime>\\n            <SQL>SELECT * FROM `polar123`.`p_qw` ORDER BY `id` DESC</SQL>\\n            <Remark/>\\n            <InstanceName>polar123@pc-bp1h9tgq4st9g****.mysql.polardb.rds.aliyuncs.com:3306【polar_qw_测试】</InstanceName>\\n            <UserId>12****</UserId>\\n            <DbId>2157****</DbId>\\n            <Logic>false</Logic>\\n            <SQLType>SELECT</SQLType>\\n            <SchemaName>polar123</SchemaName>\\n            <AffectRows>2</AffectRows>\\n        </SQLExecAuditLog>\\n    </SQLExecAuditLogList>\\n</ListSQLExecAuditLogResponse>\",\"errorExample\":\"\"}]","title":"获取SQL审计日志列表"}