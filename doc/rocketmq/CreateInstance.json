{"summary":"创建云消息队列 RocketMQ 版5.x系列实例。","path":"/instances","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"clientToken","in":"query","schema":{"description":"用于保证请求的幂等性。由客户端生成该参数值，要保证在不同请求间唯一，最大不超过64个ASCII字符。","type":"string","required":false,"example":"c2c5d1274a8d4317a13bc5b0d4******"}},{"name":"body","in":"body","style":"json","schema":{"description":"body参数。","type":"object","properties":{"instanceName":{"title":"实例名称","description":"待创建的实例名称。\n\n不填写则以实例ID作为实例名称","type":"string","required":false,"example":"rmq-cn-72u3048uxxx"},"serviceCode":{"title":"服务编码","description":"实例所属的服务编码。消息队列RocketMQ版的服务编码为rmq。","type":"string","required":true,"example":"rmq","default":"rmq"},"seriesCode":{"title":"系列编码","description":"实例的主系列编码。主系列间的具体差异，请参见[产品选型](~~444722~~)。\n\n参数取值如下：\n- standard：标准版\n- ultimate：铂金版\n- professional：专业版\n\n><notice>实例创建成功后，主系列只支持单向变更，只升不降，变更方向为：标准版 > 专业版 > 铂金版。例如，只支持从标准版变更到专业版，不支持从专业版降为标准版。></notice>","type":"string","required":true,"enumValueTitles":{"standard":"标准版","ultimate":"铂金版","professional":"专业版"},"example":"standard"},"subSeriesCode":{"title":"子系列编码","description":"实例的子系列编码。子系列间具体差异，请参见[产品选型](~~444722~~)。\n\n参数取值如下：\n- cluster_ha：集群高可用版\n- single_node：单节点测试版\n\n<props=\"china\">- serverless：Serverless实例</props>\n\n主系列选择ultimate（铂金版）时，子系列只能选择为cluster_ha（集群高可用版）。\n><notice>实例创建成功后，子系列不支持变更。></notice>","type":"string","required":true,"enumValueTitles":{"serverless":"Serverless版","cluster_ha":"集群高可用版","single_node":"单节点测试版"},"example":"cluster_ha"},"paymentType":{"title":"付费类型,\n预付费：Subscription\n后付费：PayAsYouGo","description":"实例的付费类型。云消息队列 RocketMQ 版支持包年包月和按量付费两种类型。\n\n参数取值如下：\n- PayAsYouGo：按量付费，一种后付费模式，即先使用再付费。\n- Subscription：包年包月，一种预付费模式，即先付费再使用。\n\n具体信息，请参见[计费方式](~~427234~~)。","type":"string","required":true,"enumValueTitles":{"PayAsYouGo":"按量付费","Subscription":"包年包月"},"example":"Subscription","enum":["Subscription","PayAsYouGo"]},"period":{"title":"购买时长，只有预付费支持","description":"购买时长。仅当实例付费类型为Subscription（包年包月）时，该参数生效。\n\n取值范围如下：\n\n- 按月购买：1、2、3、4、5、6\n\n- 按年购买：1、2、3","type":"integer","format":"int32","required":false,"example":"3"},"periodUnit":{"title":"购买时长单位，只有预付费支持\n月：Month\n年：Year","description":"购买时长的最小周期单位。\n\n参数取值如下：\n- Month：按月购买\n- Year：按年购买","type":"string","required":false,"enumValueTitles":{"Month":"按月购买","Year":"按年购买"},"example":"Month","enum":["Month","Year"]},"autoRenew":{"title":"是否自动续费，只有预付费支持","description":"是否自动续费。仅当实例付费类型为Subscription（包年包月）时，该参数生效。\n\n- true：开启自动续费\n- false：不开启自动续费","type":"boolean","required":false,"enumValueTitles":{"true":"开启自动续费","false":"不开启自动续费"},"example":"true"},"autoRenewPeriod":{"title":"自动续费周期，只有预付费支持","description":"自动续费周期。仅当开启自动续费时该参数有效。单位：月。\n\n取值范围：\n\n- 按月续费：1、2、3、6、12","type":"integer","format":"int32","required":false,"example":"3"},"remark":{"title":"备注信息","description":"实例的备注信息。","type":"string","required":false,"example":"This is the remark for test."},"productInfo":{"title":"产品信息","description":"实例规格信息。","type":"object","properties":{"msgProcessSpec":{"title":"消息收发规格","description":"消息收发计算规格。具体消息收发TPS上限，请参见[实例规格](~~444715~~)。","type":"string","required":true,"example":"rmq.s2.2xlarge"},"sendReceiveRatio":{"title":"消息收发比例","description":"消息发送TPS占整个实例消息收发TPS总量的比例。\n\n例如，实例的消息收发TPS上限为1000次/秒，若消息发送占比为0.8，则消息发送TPS上限为800次/秒，消息接收TPS上限为200次/秒。\n\n取值范围：[0，1]，默认值为0.5。","type":"number","format":"float","required":false,"example":"0.5"},"autoScaling":{"title":"是否开启弹性伸缩","description":"是否开启规格外突发弹性能力。\n\n参数取值如下：\n\n- true：开启弹性能力\n- false：不开启弹性能力\n\n开启弹性突发能力后，云消息队列 RocketMQ 版允许该实例在一定范围内超过基础规格限制的TPS，且超过基础规格外的部分，需要收取额外的弹性规格费用。具体计费信息，请参见[计算能力费用](~~427237~~)。\n\n\n> 仅部分规格的实例支持开启弹性突发规格能力，具体支持的实例，请参见[实例规格](~~444715~~)。","type":"boolean","required":false,"enumValueTitles":{"true":"开启弹性能力","false":"不开启弹性能力"},"example":"true"},"messageRetentionTime":{"title":"消息保留时长","description":"消息保存时长。单位：小时。\n\n取值范围，请参见[使用限制](~~440347~~)>资源配额>消息保存时长的限制值。\n\n云消息队列 RocketMQ 版的消息存储完全实现Serverless弹性，按照实际存储空间收取费用，您可以通过调整消息保存时长来控制消息的存储容量。更多信息，请参见[存储费用](~~427238~~)。","type":"integer","format":"int32","required":false,"example":"72"},"chargeType":{"description":"计费模式。\n\n参数取值如下：\n\n- provisioned：预留\n- ondemand：弹性","type":"string","required":false,"example":"provisioned"},"intranetSpec":{"description":"废弃参数，您无需填写。","type":"string","required":false,"example":"xxxx"}},"required":false},"networkInfo":{"title":"网络信息","description":"网络配置信息。","type":"object","properties":{"vpcInfo":{"title":"专有网络信息","description":"专有网络配置信息。","type":"object","properties":{"vpcId":{"title":"专有网络ID","description":"待创建实例所关联的专有网络的ID。\n\n> 云消息队列 RocketMQ 版实例创建后，选择的VPC不支持变更。若要修改关联的VPC，您需要先释放已购买的云消息队列 RocketMQ 版实例，再重新购买。","type":"string","required":true,"example":"vpc-wz9qt50xhtj9krb******"},"vSwitchId":{"title":"交换机ID","description":"实例所关联的交换机ID，当有多个交换机时，请以“|“进行拼接。\n\n> 云消息队列 RocketMQ 版实例创建后，选择的交换机不支持变更。若要修改关联的交换机，您需要先释放已购买的云消息队列 RocketMQ 版实例，再重新购买。","type":"string","deprecated":true,"required":false,"example":"vsw-uf6gwtbn6etadpv*******"},"securityGroupIds":{"description":"安全组ID。","type":"string","required":false,"example":"sg-bp17hpmgz96tvnsdy6so"},"vSwitches":{"type":"array","items":{"type":"object","properties":{"vSwitchId":{"type":"string","required":false}},"required":false},"required":false}},"required":true},"internetInfo":{"title":"公网信息","description":"公网配置信息。","type":"object","properties":{"internetSpec":{"title":"是否开启公网\n开启：enable\n关闭：disable","description":"是否开通公网访问。\n\n参数取值如下：\n- enable：开启公网访问\n- disable：关闭公网访问\n\n实例默认支持VPC访问方式，若开启公网访问，云消息队列 RocketMQ 版会收取公网下行带宽费用。具体计费信息，请参见[公网访问费用](~~427240~~)。","type":"string","required":true,"enumValueTitles":{"enable":"开启公网访问","disable":"关闭公网访问"},"example":"disable"},"flowOutType":{"title":"公网计费类型\n固定带宽计费：payByBandwidth","description":"公网计费类型。\n\n参数取值如下：\n- payByBandwidth：固定带宽计费。开启公网访问时，设置为该参数取值。\n- payByTraffic：按流量计费。开启公网访问时，设置为该参数取值。\n- uninvolved：不涉及。关闭公网访问时，设置为该参数取值。","type":"string","required":true,"enumValueTitles":{"payByBandwidth":"固定带宽计费","payByTraffic":"按流量计费","uninvolved":"不涉及"},"example":"uninvolved"},"flowOutBandwidth":{"title":"公网带宽规格","description":"公网带宽规格。单位：Mb/s。\n\n只有在公网计费类型为按固定带宽计费的时候才需要填写。\n\n取值范围：[1 - 1000]。","type":"integer","format":"int32","required":false,"example":"100"},"ipWhitelist":{"title":"公网IP白名单列表","description":"公网访问IP白名单。仅公网接入点支持配置IP白名单，VPC接入点暂不支持。\n\n- 若不配置IP白名单，则默认放通所有IP地址段通过公网访问云消息队列 RocketMQ 版服务端。\n- 若配置IP白名单，则仅允许白名单内的IP地址通过公网访问云消息队列 RocketMQ 版服务端。","type":"array","items":{"title":"公网IP白名单","description":"公网访问白名单地址段。","type":"string","required":false,"example":"192.168.x.x/24"},"required":false}},"required":true}},"required":true},"commodityCode":{"description":"商品编码。\n\n<props=\"china\">- ons_rmqsub_public_cn：包年包月实例</props>\n\n<props=\"china\">- ons_rmqpost_public_cn：按量付费实例</props>\n\n<props=\"china\">- ons_rmqsrvlesspost_public_cn ：Serverless实例</props>\n\n<props=\"intl\">- ons_rmqpost_public_intl：按量付费</props>\n\n<props=\"intl\">- ons_rmqsub_public_intl：包年包月</props>","type":"string","required":false,"example":"ons_ rmqpost_public_cn"},"resourceGroupId":{"title":"资源组ID","description":"资源组ID。","type":"string","required":false,"example":"rg-aekzy6pist7uuna"}},"required":false}}],"responses":{"200":{"schema":{"title":"Result<String>","description":"返回数据。","type":"object","properties":{"requestId":{"title":"请求ID","description":"请求ID，每个请求ID都是唯一的，可用于排查和定位问题。","type":"string","example":"AF9A8B10-C426-530F-A0DD-96320B39****"},"success":{"title":"是否成功","description":"执行结果是否成功。","type":"boolean","example":"true"},"data":{"title":"返回结果","description":"返回已创建实例的ID。","type":"string","example":"rmq-cn-7e22ody****"},"code":{"title":"错误码","description":"错误码。","type":"string","example":"200"},"message":{"title":"错误信息","description":"错误信息。","type":"string","example":"Success"},"httpStatusCode":{"title":"HTTP状态码","description":"HTTP状态码。","type":"integer","format":"int32","example":"200"},"dynamicCode":{"title":"动态错误码","description":"动态错误码。","type":"string","example":"InstanceId"},"dynamicMessage":{"title":"动态错误信息","description":"动态错误信息。","type":"string","example":"instanceId"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"AF9A8B10-C426-530F-A0DD-96320B39****\\\",\\n  \\\"success\\\": true,\\n  \\\"data\\\": \\\"rmq-cn-7e22ody****\\\",\\n  \\\"code\\\": \\\"200\\\",\\n  \\\"message\\\": \\\"Success\\\",\\n  \\\"httpStatusCode\\\": 200,\\n  \\\"dynamicCode\\\": \\\"InstanceId\\\",\\n  \\\"dynamicMessage\\\": \\\"instanceId\\\"\\n}\",\"type\":\"json\"}]","title":"创建实例","description":"><notice>阿里云提供的OpenAPI属于管控类API，用于管理和查询阿里云服务的相关资源。仅推荐在管控链路集成，消息收发的核心数据链路中严禁依赖OpenAPI实现，否则可能会导致链路产生风险。></notice>"}