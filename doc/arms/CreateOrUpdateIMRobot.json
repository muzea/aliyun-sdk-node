{"summary":"创建或更新IM机器人。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"none","abilityTreeCode":"118628","abilityTreeNodes":["FEATUREarmsK5DKZM"]},"parameters":[{"name":"RobotId","in":"formData","schema":{"title":"告警机器人ID","description":"IM机器人ID。\n\n- 不填代表创建新的IM机器人。\n- 填写代表修改指定IM机器人信息。","type":"integer","format":"int64","required":false,"example":"123"}},{"name":"RobotName","in":"formData","schema":{"title":"告警机器人名称","description":"IM机器人名称。","type":"string","required":true,"example":"robot名称"}},{"name":"Type","in":"formData","schema":{"title":"告警机器人类型:dingding/wechat","description":"IM机器人类型：\n\n- `dingding`：钉钉机器人。\n- `wechat`：企业微信机器人。\n- `feishu`：飞书机器人。","type":"string","required":false,"example":"dingding"}},{"name":"RobotAddress","in":"formData","schema":{"title":"告警机器人地址","description":"IM机器人的Webhook地址。","type":"string","required":true,"example":"https://oapi.dingtalk.com/robot/send?access_token=e1a049121******"}},{"name":"DailyNoc","in":"formData","schema":{"title":"是否发送每日统计信息","description":"是否发送每日统计信息。\n\n- `false`（默认）：不发送统计信息。\n- `true`：发送统计信息。选择`true`后，**DailyNocTime**参数必填。","type":"boolean","required":false,"example":"true"}},{"name":"DailyNocTime","in":"formData","schema":{"title":"每日统计发送时间","description":"每日统计信息发送的时间点，使用半角逗号（,）分隔多个发送时间点，时间点格式为HH:SS。ARMS告警管理将在设置的时间点发送今日产生告警的总数、解决数和待解决数。","type":"string","required":false,"example":"09:30,17:00"}},{"name":"DingSignKey","in":"formData","schema":{"description":"钉钉签名密钥。如配置了密钥则会通过加签的方式进行钉钉认证。如果没有配置密钥，默认使用关键字白名单的方式进行认证，白名单关键字为**告警**。\n<props=\"china\">更多信息，请参见[钉钉官方文档](https://open.dingtalk.com/document/robots/customize-robot-security-settings)。</props>\n","type":"string","required":false,"example":"******"}},{"name":"Token","in":"formData","schema":{"description":"开启Outgoing机制需要的Token。\n","type":"string","required":false,"example":"1656558719183be1245ab44********"}},{"name":"EnableOutgoing","in":"formData","schema":{"description":"是否开启Outgoing机制。","type":"boolean","required":false,"example":"true"}},{"name":"CardTemplate","in":"formData","schema":{"title":"卡片模版配置信息","description":"告警卡片模版配置信息。模板中各参数含义请参见下方补充说明。","type":"string","required":false,"example":"{     \"button\": [         \"claim\",         \"close\",         \"follow\",         \"send_itsm\",         \"block\",         \"unResolvedIncident\"     ],     \"field\": [         {             \"fieldName\": \"alarmName\",             \"visible\": true         },         {             \"fieldName\": \"notificationPolicy\",             \"visible\": true         },         {             \"fieldName\": \"alarmContent\",             \"visible\": true         },         {             \"fieldName\": \"alarmTime\",             \"visible\": true         },         {             \"fieldName\": \"seriesChart\",             \"visible\": true         },         {             \"fieldName\": \"includeEvent\",             \"visible\": true         },         {             \"fieldName\": \"assigned\",             \"visible\": true         },         {             \"fieldName\": \"similarAlarm\",             \"visible\": true         },         {             \"fieldName\": \"operator\",             \"visible\": true         }     ] }"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"16AF921B-8187-489F-9913-43C808B4****"},"AlertRobot":{"description":"返回AlertRobot对象。","type":"object","properties":{"RobotId":{"title":"告警机器人ID","description":"IM机器人ID。填写该参数代表修改机器人信息。","type":"number","format":"float","example":"123"},"RobotName":{"title":"告警机器人名称","description":"IM机器人名称。","type":"string","example":"robot名称"},"Type":{"title":"告警机器人类型:dingding/wechat","description":"IM机器人类型：\n\n- `dingding`：钉钉机器人。\n- `wechat`：企业微信机器人。","type":"string","example":"dingding"},"RobotAddress":{"title":"告警机器人地址","description":"IM机器人的Webhook地址。","type":"string","example":"https://oapi.dingtalk.com/robot/send?access_token=e1a049121******"},"DailyNoc":{"title":"是否发送每日统计信息","description":"是否发送每日统计信息。\n\n- `false`（默认）：不发送统计信息。\n- `true`：发送统计信息。","type":"boolean","example":"true"},"DailyNocTime":{"title":"每日统计发送时间","description":"每日统计信息发送的时间点。ARMS告警管理将在设置的时间点发送今日产生告警的总数、解决数和待解决数。","type":"string","example":"09:30,17:00"},"Token":{"description":"开启Outgoing机制需要的Token。","type":"string","example":"1656558719183be1245ab44********\n"},"EnableOutgoing":{"description":"是否开启Outgoing机制。","type":"boolean","example":"true"},"CardTemplate":{"title":"卡片模版配置信息","description":"告警卡片模版配置信息。","type":"string","example":"{     \"button\": [         \"claim\",         \"close\",         \"follow\",         \"send_itsm\",         \"block\",         \"unResolvedIncident\"     ],     \"field\": [         {             \"fieldName\": \"alarmName\",             \"visible\": true         },         {             \"fieldName\": \"notificationPolicy\",             \"visible\": true         },         {             \"fieldName\": \"alarmContent\",             \"visible\": true         },         {             \"fieldName\": \"alarmTime\",             \"visible\": true         },         {             \"fieldName\": \"seriesChart\",             \"visible\": true         },         {             \"fieldName\": \"includeEvent\",             \"visible\": true         },         {             \"fieldName\": \"assigned\",             \"visible\": true         },         {             \"fieldName\": \"similarAlarm\",             \"visible\": true         },         {             \"fieldName\": \"operator\",             \"visible\": true         }     ] }"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"16AF921B-8187-489F-9913-43C808B4****\\\",\\n  \\\"AlertRobot\\\": {\\n    \\\"RobotId\\\": 123,\\n    \\\"RobotName\\\": \\\"robot名称\\\",\\n    \\\"Type\\\": \\\"dingding\\\",\\n    \\\"RobotAddress\\\": \\\"https://oapi.dingtalk.com/robot/send?access_token=e1a049121******\\\",\\n    \\\"DailyNoc\\\": true,\\n    \\\"DailyNocTime\\\": \\\"09:30,17:00\\\",\\n    \\\"Token\\\": \\\"1656558719183be1245ab44********\\\\n\\\",\\n    \\\"EnableOutgoing\\\": true,\\n    \\\"CardTemplate\\\": \\\"{     \\\\\\\"button\\\\\\\": [         \\\\\\\"claim\\\\\\\",         \\\\\\\"close\\\\\\\",         \\\\\\\"follow\\\\\\\",         \\\\\\\"send_itsm\\\\\\\",         \\\\\\\"block\\\\\\\",         \\\\\\\"unResolvedIncident\\\\\\\"     ],     \\\\\\\"field\\\\\\\": [         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"alarmName\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"notificationPolicy\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"alarmContent\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"alarmTime\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"seriesChart\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"includeEvent\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"assigned\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"similarAlarm\\\\\\\",             \\\\\\\"visible\\\\\\\": true         },         {             \\\\\\\"fieldName\\\\\\\": \\\\\\\"operator\\\\\\\",             \\\\\\\"visible\\\\\\\": true         }     ] }\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateOrUpdateIMRobotResponse>\\n    <RequestId>16AF921B-8187-489F-9913-43C808B4****</RequestId>\\n    <AlertRobot>\\n        <RobotId>123</RobotId>\\n        <RobotName>robot名称</RobotName>\\n        <Type>dingding</Type>\\n        <RobotAddress>https://oapi.dingtalk.com/robot/send?access_token=e1a049121******</RobotAddress>\\n        <DailyNoc>true</DailyNoc>\\n        <DailyNocTime>09:30,17:00</DailyNocTime>\\n    </AlertRobot>\\n</CreateOrUpdateIMRobotResponse>\",\"errorExample\":\"\"}]","title":"创建或更新IM机器人","requestParamsDescription":"### CardTemplate参数说明\n模板示例：\n```\n{\n    \"field\": [\n        {\n            \"fieldName\": \"alarmName\",\n            \"visible\": false\n        },\n        {\n            \"fieldName\": \"notificationPolicy\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"alarmContent\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"alarmTime\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"seriesChart\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"includeEvent\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"assigned\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"similarAlarm\",\n            \"visible\": true\n        },\n        {\n            \"fieldName\": \"operator\",\n            \"visible\": true\n        }\n    ],\n    \"button\": [\n        \"claim\",\n        \"close\",\n        \"block\",\n        \"send_itsm\",\n        \"unResolvedIncident\",\n        \"follow\"\n    ]\n}\n```\n\n- fieldName：告警卡片中的字段名称。包含字段如下：\n    - notificationPolicy：通知策略\n    - alarmName：告警名称 \n    - alarmContent：告警内容 \n    - alarmTime：告警时间 \n    - includeEvent：包含事件的数量 \n    - assigned：通知人 \n    - operator：告警处理人 \n    - similarAlarm：上次相似告警 \n    - seriesChart：告警指标趋势图 \n- visible：发送的告警卡片上对应字段内容是否可见。\n\n    - true：可见\n    - false：隐藏\n\n- button：卡片中的设置按钮，参数顺序对应卡片按钮顺序。按钮有以下几种：\n    - claim：认领告警按钮 \n    - close：解决告警按钮 \n    - follow：关注告警按钮 \n    - send_itsm：推送告警按钮 \n    - block：屏蔽告警按钮 \n    - unResolvedIncident：未解决告警按钮 "}