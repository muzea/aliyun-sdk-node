{"summary":"创建环境的ServiceMonitor。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"AliyunLang","in":"query","schema":{"title":"语言环境, 默认为中文 zh | en","description":"语言环境：\n\n- zh（默认）：中文\n- en：英文","type":"string","required":false,"enumValueTitles":{"en":"en","zh":"zh"},"example":"zh"}},{"name":"EnvironmentId","in":"query","schema":{"title":"环境实例ID","description":"环境实例ID。","type":"string","required":true,"docRequired":true,"example":"env-xxxxxx"}},{"name":"DryRun","in":"query","allowEmptyValue":true,"schema":{"title":"试运行：检查格式是否合法、是否能匹配到targets。","description":"试运行。检查格式是否合法、是否能匹配到targets。","type":"boolean","required":false,"docRequired":false,"example":"true"}},{"name":"ConfigYaml","in":"formData","schema":{"title":"示例：\n`\napiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  name: tomcat-demo\n  namespace: default\n  annotations:\n      arms.prometheus.io/discovery: 'true'\nspec:\n  endpoints:\n    - interval: 30s\n      path: /metrics\n      port: tomcat-monitor\n  namespaceSelector:\n    any: true\n  selector:\n    matchLabels:\n      app: tomcat\n`\n其中 arms.prometheus.io/discovery 必须存在，其值为“true”，表示serviceMonitor启用，否则表示停止。","description":"ServiceMonitor的YAML配置串。","type":"string","required":true,"docRequired":true,"example":"参见补充说明。"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"Id of the request","type":"string","example":"78901766-3806-4E96-8E47-CFEF59E4****"},"Code":{"description":"状态码。200表示成功。","type":"integer","format":"int32","example":"200"},"Data":{"description":"返回结构体。","type":"object","properties":{"MatchedMsg":{"title":"target匹配提示信息","description":"Target匹配提示信息。","type":"string","example":"匹配成功。"},"Namespace":{"description":"命名空间。","type":"string","example":"arms-prom"},"ServiceMonitorName":{"title":"成功创建的serviceMonitor名称","description":"成功创建的ServiceMonitor名称。","type":"string","example":"arms-admin1"},"MatchedTargetCount":{"description":"匹配出的target数量。","type":"integer","format":"int32","example":"1"}}},"Message":{"description":"返回结果的提示信息。","type":"string","example":"message"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"78901766-3806-4E96-8E47-CFEF59E4****\\\",\\n  \\\"Code\\\": 200,\\n  \\\"Data\\\": {\\n    \\\"MatchedMsg\\\": \\\"匹配成功。\\\",\\n    \\\"Namespace\\\": \\\"arms-prom\\\",\\n    \\\"ServiceMonitorName\\\": \\\"arms-admin1\\\",\\n    \\\"MatchedTargetCount\\\": 1\\n  },\\n  \\\"Message\\\": \\\"message\\\"\\n}\",\"type\":\"json\"}]","title":"创建环境的ServiceMonitor","requestParamsDescription":"ConfigYaml示例：\n```\napiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  name: arms-admin1\n  namespace: arms-prom\n  annotations:\n    arms.prometheus.io/discovery: 'true'\nspec:\n  endpoints:\n  - interval: 30s\n    port: operator\n    path: /metrics\n  - interval: 10s\n    port: operator1\n    path: /metrics\n  namespaceSelector:\n    any: true\n  selector:\n    matchLabels:\n     app: arms-prometheus-ack-arms-prometheus\n```\n其中 arms.prometheus.io/discovery 必须存在，其值为“true”，表示serviceMonitor启用，否则表示停止。"}