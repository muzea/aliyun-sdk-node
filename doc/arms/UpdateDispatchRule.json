{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"none","abilityTreeCode":"44519","abilityTreeNodes":["FEATUREarmsVBCGEE"]},"parameters":[{"name":"DispatchRule","in":"query","schema":{"description":"分派条件的配置JSON串。关于此字段的详细说明参见下文**关于参数DispatchRule的补充说明**。\n","type":"string","required":true,"docRequired":true,"example":"{   \"id\": 123,     \"system\": false,   \"ruleid\": 10282,   \"name\": \"Prometheus Alert\",   \"labelMatchExpressionGrid\": {     \"labelMatchExpressionGroups\": [       {         \"labelMatchExpressions\": [           {             \"key\": \"_aliyun_arms_involvedObject_kind\",             \"value\": \"app\",             \"operator\": \"eq\"           }         ]       }     ]   },   \"dispatchType\": \"CREATE_ALERT/DISCARD_ALERT\",   \"isRecover\": true,   \"groupRules\": [     {       \"groupId\": 1,       \"groupingFields\": [         \"alertname\"       ],       \"groupWait\": 10,       \"groupInterval\": 15,       \"repeatInterval\": 20     }   ],   \"notifyRules\": [     {       \"notifyObjects\": [         {           \"notifyType\": \"ARMS_CONTACT\",           \"name\": \"JohnDoe\",           \"notifyObjectId\": 1         },         {           \"notifyType\": \"ARMS_CONTACT_GROUP\",           \"name\": \"JohnDoe_group\",           \"notifyObjectId\": 2         }       ],       \"notifyChannels\":[\"dingTalk\",\"wechat\",\"webhook\",\"email\"]     },   ], }"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Success":{"description":"分派策略是否修改成功。\n\n- `true`：修改成功\n- `false`：修改失败","type":"boolean","example":"true"},"RequestId":{"description":"请求ID。","type":"string","example":"A5EC8221-08F2-4C95-9AF1-49FD998C****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Success\\\": true,\\n  \\\"RequestId\\\": \\\"A5EC8221-08F2-4C95-9AF1-49FD998C****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateDispatchRuleResponse>\\n    <RequestId>A5EC8221-08F2-4C95-9AF1-49FD998C****</RequestId>\\n    <Success>true</Success>\\n</UpdateDispatchRuleResponse>\",\"errorExample\":\"\"}]","title":"修改分派策略","summary":"调用UpdateDispatchRule接口修改分派策略。","description":"当前接口已不再维护，请使用新版告警管理的CreateOrUpdateNotificationPolicy接口创建或修改通知策略。","requestParamsDescription":"## 关于参数**DispatchRule**的补充说明\n**JSON串示例及说明**\n\n```\n{\n  \"id\": 123,           //分派策略ID。\n  \"system\": false,        //分派条件是否可编辑：true（不可编辑）、false（可编辑）。\n  \"ruleid\": 10282,           //分派规则ID。\n  \"name\": \"Prometheus Alert\",   //分派策略名称。\n  \"labelMatchExpressionGrid\": {\n    \"labelMatchExpressionGroups\": [     //设置分派条件。\n      {\n        \"labelMatchExpressions\": [\n          {\n            \"key\": \"_aliyun_arms_involvedObject_kind\",   //分派条件标签，详见下一节。\n            \"value\": \"app\",                              //标签取值。\n            \"operator\": \"eq\"                             //eq：等于；re：匹配正则。\n          }\n        ]\n      }\n    ]\n  },\n  \"dispatchType\": \"CREATE_ALERT/DISCARD_ALERT\",    //告警处理方式：CREATE_ALERT（就是生成报警），DISCARD_ALERT（丢弃报警事件，即不告警）\n  \"isRecover\": true,               //是否发生恢复的告警。true（发生），false（不发送）。\n  \"groupRules\": [                  //设置事件分组。\n    {\n      \"groupId\": 1,               //分组ID。\n      \"groupingFields\": [         //指定相同字段内容的事件分到一个组：设置分组字段，相同字段的告警内容会分别通过独立信息发送给处理人。\n        \"alertname\"\n      ],\n      \"groupWait\": 10,                 //分组等待时间：收到第一个告警后会等待设置的时间，等待分组时间后收到的所有告警会以一条信息发送给处理人。\n      \"groupInterval\": 15,             //分组间隔时间：在重复告警静默时间内，如果有新告警产生，等待设置的时间后就会直接发送新的告警信息。\n      \"repeatInterval\": 20             //重复告警静默时间：所有告警会以设置的时间间隔循环发送告警信息直至告警消失。\n    }\n  ],\n  \"notifyRules\": [            //设置通知规则。\n    {\n      \"notifyObjects\": [\n        {\n          \"notifyType\": \"ARMS_CONTACT\",     //ARMS_CONTACT：联系人；ARMS_CONTACT_GROUP：联系人组。\n          \"name\": \"JohnDoe\",                //联系人或联系人组的名称。\n          \"notifyObjectId\": 1               //联系人或联系人组的ID。\n        },\n        {\n          \"notifyType\": \"ARMS_CONTACT_GROUP\",\n          \"name\": \"JohnDoe_group\",\n          \"notifyObjectId\": 2\n        }\n      ],\n      \"notifyChannels\":[\"dingTalk\",\"wechat\",\"webhook\",\"email\"]     //通知方式：dingTalk（ 钉钉）、sms（短信）、webhook、email（邮件）、wechat（微信）。\n    },\n  ],\n}\n```\n\n\n\n**分派标签取值枚举**\n\n- `_aliyun_arms_userid`：用户ID\n- `_aliyun_arms_involvedObject_kind`：关联对象类型\n- `_aliyun_arms_involvedObject_id`：关联对象ID\n- `_aliyun_arms_involvedObject_name`：关联对象名称 \n- `_aliyun_arms_alert_name`：告警名称\n- `_aliyun_arms_alert_rule_id`：告警规则对应的ID\n- `_aliyun_arms_alert_type`：告警类型 \n- `_aliyun_arms_alert_level`：告警等级 \n\n\t","responseParamsDescription":" ","extraInfo":" "}