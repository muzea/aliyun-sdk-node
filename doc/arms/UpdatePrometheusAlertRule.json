{"summary":"调用UpdatePrometheusAlertRule接口更新Prometheus报警规则。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"AlertName","in":"query","schema":{"description":"告警规则名称。","type":"string","required":true,"docRequired":true,"example":"Prometheus_Alert"}},{"name":"ClusterId","in":"query","schema":{"description":"集群ID。","type":"string","required":true,"docRequired":true,"example":"c0bad479465464e1d8c1e641b0afb****"}},{"name":"Type","in":"query","schema":{"description":"自定义告警规则类型。","type":"string","required":false,"example":"Kubernetes组件告警"}},{"name":"NotifyType","in":"query","schema":{"description":"通知类型， 取值：\n\n- `ALERT_MANAGER`：通过告警运维中心通知。\n- `DISPATCH_RULE`：指定通知策略进行通知。","type":"string","required":false,"example":"ALERT_MANAGER"}},{"name":"DispatchRuleId","in":"query","schema":{"description":"通知策略ID，当**NotifyType**指定为`DISPATCH_RULE`时必填。","type":"integer","format":"int64","required":false,"example":"10282"}},{"name":"Expression","in":"query","schema":{"description":"告警表达式，需要使用PromQL语句。","type":"string","required":true,"docRequired":true,"example":"100 * (sum(rate(container_cpu_usage_seconds_total[1m])) by (pod_name) / sum(label_replace(kube_pod_container_resource_limits_cpu_cores, \\\"pod_name\\\", \\\"$1\\\", \\\"pod\\\", \\\"(.*)\\\")) by (pod_name))>75"}},{"name":"Duration","in":"query","schema":{"description":"持续时间，范围在1m~1440m，单位为分钟。","type":"string","required":true,"docRequired":true,"example":"1"}},{"name":"Message","in":"query","schema":{"description":"告警消息，支持按照{{$labels.xxx}}格式来引用标签。","type":"string","required":true,"docRequired":true,"example":"${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%"}},{"name":"Labels","in":"query","schema":{"description":"标签JSON串。需要设置标签的Name和Value。","type":"string","required":false,"example":"[{\"Value\": \"critical\",\"Name\": \"severity\"}]"}},{"name":"Annotations","in":"query","schema":{"description":"注释JSON串。需要设置注释的Name和Value。","type":"string","required":false,"example":"[{\"Value\": \"xxx\",\"Name\": \"description\"}]"}},{"name":"AlertId","in":"query","schema":{"description":"告警规则ID，您可以在ListPrometheusAlertRules API接口的返回数据中查看。","type":"integer","format":"int64","required":true,"docRequired":true,"example":"3888704"}},{"name":"Tags","in":"query","style":"repeatList","schema":{"description":"标签。","type":"array","items":{"description":"标签。","type":"object","properties":{"Key":{"description":"标签的键(key)。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"标签的值（value）。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":21}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"9FEA6D00-317F-45E3-9004-7FB8B0B7****"},"PrometheusAlertRule":{"description":"返回结构体。","type":"object","properties":{"Status":{"description":"告警规则启用状态，取值：\n\n- `1`：开启\n- `0`：关闭","type":"integer","format":"int32","example":"1"},"Type":{"description":"告警规则类型。","type":"string","example":"Kubernetes组件告警"},"NotifyType":{"description":"通知类型， 取值：\n\n- `ALERT_MANAGER`：通过报警运维中心通知。\n- `DISPATCH_RULE`：指定通知策略进行通知。","type":"string","example":"ALERT_MANAGER"},"Expression":{"description":"告警表达式。","type":"string","example":"100 * (sum(rate(container_cpu_usage_seconds_total[1m])) by (pod_name) / sum(label_replace(kube_pod_container_resource_limits_cpu_cores, \\\"pod_name\\\", \\\"$1\\\", \\\"pod\\\", \\\"(.*)\\\")) by (pod_name))>75"},"Message":{"description":"告警通知消息，支持按照{{$labels.xxx}}格式来引用标签。","type":"string","example":"${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%"},"Duration":{"description":"持续时间，范围在1m~1440m，单位为分钟。","type":"string","example":"1"},"DispatchRuleId":{"description":"通知策略ID。","type":"integer","format":"int64","example":"10282"},"AlertName":{"description":"告警规则名称。","type":"string","example":"Prometheus_Alert"},"AlertId":{"description":"告警规则ID。","type":"integer","format":"int64","example":"3888704"},"ClusterId":{"description":"集群ID。","type":"string","example":"c0bad479465464e1d8c1e641b0afb****"},"Labels":{"description":"告警规则的标签。","type":"array","items":{"type":"object","properties":{"Name":{"description":"标签的名称。","type":"string","example":"severity"},"Value":{"description":"标签的值。","type":"string","example":"critical"}}}},"Annotations":{"description":"告警规则的注释。","type":"array","items":{"type":"object","properties":{"Name":{"description":"注释的名称。","type":"string","example":"message"},"Value":{"description":"注释的值。","type":"string","example":"${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%"}}}}}},"Code":{"description":"状态码。200为成功，其他状态码为异常。","type":"integer","format":"int64","example":"200"},"Message":{"description":"返回信息。","type":"string","example":"success"},"Success":{"description":"操作是否成功：\n\n- `true`：操作成功\n- `false`：操作失败","type":"boolean","example":"True"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"9FEA6D00-317F-45E3-9004-7FB8B0B7****\\\",\\n  \\\"PrometheusAlertRule\\\": {\\n    \\\"Status\\\": 1,\\n    \\\"Type\\\": \\\"Kubernetes组件告警\\\",\\n    \\\"NotifyType\\\": \\\"ALERT_MANAGER\\\",\\n    \\\"Expression\\\": \\\"100 * (sum(rate(container_cpu_usage_seconds_total[1m])) by (pod_name) / sum(label_replace(kube_pod_container_resource_limits_cpu_cores, \\\\\\\\\\\\\\\"pod_name\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"$1\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"pod\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\"(.*)\\\\\\\\\\\\\\\")) by (pod_name))>75\\\",\\n    \\\"Message\\\": \\\"${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%\\\",\\n    \\\"Duration\\\": \\\"1\\\",\\n    \\\"DispatchRuleId\\\": 10282,\\n    \\\"AlertName\\\": \\\"Prometheus_Alert\\\",\\n    \\\"AlertId\\\": 3888704,\\n    \\\"ClusterId\\\": \\\"c0bad479465464e1d8c1e641b0afb****\\\",\\n    \\\"Labels\\\": [\\n      {\\n        \\\"Name\\\": \\\"severity\\\",\\n        \\\"Value\\\": \\\"critical\\\"\\n      }\\n    ],\\n    \\\"Annotations\\\": [\\n      {\\n        \\\"Name\\\": \\\"message\\\",\\n        \\\"Value\\\": \\\"${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%\\\"\\n      }\\n    ]\\n  },\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdatePrometheusAlertRuleResponse>\\n    <RequestId>9FEA6D00-317F-45E3-9004-7FB8B0B7****</RequestId>\\n    <PrometheusAlertRule>\\n        <Status>1</Status>\\n        <NotifyType>ALERT_MANAGER</NotifyType>\\n        <Type>Kubernetes组件告警</Type>\\n        <AlertId>3888704</AlertId>\\n        <AlertName>Prometheus_Alert</AlertName>\\n        <Message>${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%</Message>\\n        <ClusterId>c0bad479465464e1d8c1e641b0afb****</ClusterId>\\n        <Expression>100 * (sum(rate(container_cpu_usage_seconds_total[1m])) by (pod_name) / sum(label_replace(kube_pod_container_resource_limits_cpu_cores, \\\\\\\"pod_name\\\\\\\", \\\\\\\"$1\\\\\\\", \\\\\\\"pod\\\\\\\", \\\\\\\"(.*)\\\\\\\")) by (pod_name))&amp;gt;75</Expression>\\n        <DispatchRuleId>10282</DispatchRuleId>\\n        <Duration>1m</Duration>\\n        <Labels>\\n            <Value>critical</Value>\\n            <Name>severity</Name>\\n        </Labels>\\n        <Annotations>\\n            <Value>${{$labels.pod_name}}CPU使用率大于80%，当前值{{$value}}%</Value>\\n            <Name>message</Name>\\n        </Annotations>\\n    </PrometheusAlertRule>\\n</UpdatePrometheusAlertRuleResponse>\",\"errorExample\":\"\"}]","title":"\t更新告警规则","description":"UpdatePrometheusAlertRule接口已不再维护，请使用CreateOrUpdateAlertRule接口创建或修改告警规则。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}