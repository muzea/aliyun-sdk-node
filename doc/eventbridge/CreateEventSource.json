{"summary":"创建一个外部事件源。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"38588","abilityTreeNodes":["FEATUREeventbridgeR7SE45"]},"parameters":[{"name":"EventSourceName","in":"formData","schema":{"title":"事件源英文code","description":"事件源名称。","type":"string","required":true,"example":"myrabbitmq.sourc"}},{"name":"Description","in":"formData","schema":{"title":"事件源描述详情","description":"事件源描述详情。","type":"string","required":false,"example":"RabbitMQ事件源"}},{"name":"LinkedExternalSource","in":"formData","schema":{"title":"是否连接外部数据源","description":"是否连接外部数据源","type":"boolean","required":false}},{"name":"ExternalSourceType","in":"formData","schema":{"title":"外部数据源类型","description":"外部数据源类型","type":"string","format":"byte","required":false}},{"name":"ExternalSourceConfig","in":"formData","style":"json","schema":{"title":"外部数据源配置","description":"外部数据源配置","type":"object","required":false}},{"name":"EventBusName","in":"formData","schema":{"title":"绑定的总线","description":"与事件源绑定的事件总线的名称。","type":"string","required":true,"example":"my-event-bus"}},{"name":"SourceMNSParameters","in":"formData","style":"json","schema":{"description":"MNS事件源参数。选择MNS事件源时RegionId、IsBase64Decode和QueueName都是必填参数。","type":"object","properties":{"RegionId":{"description":"消息服务MNS的队列所在的地域。\n可以填写以下地域 ：cn-qingdao、cn-beijing、cn-zhangjiakou、cn-huhehaote、cn-wulanchabu、cn-hangzhou、cn-shanghai、cn-shenzhen、cn-guangzhou、cn-chengdu、cn-hongkong、ap-southeast-1、ap-southeast-2、ap-southeast-3、ap-southeast-5、ap-northeast-1、eu-central-1、us-west-1、us-east-1、ap-south-1、me-east-1和cn-north-2-gov-1","type":"string","required":false,"example":"cn-hangzhou"},"QueueName":{"description":"消息服务MNS的Queue的名称。","type":"string","required":false,"example":"MyQueue"},"IsBase64Decode":{"description":"是否开启Base64解码。填写为true，即开启Base64解码。只能填写true或者false。","type":"boolean","required":false,"example":"true"}},"required":false}},{"name":"SourceRocketMQParameters","in":"formData","style":"json","schema":{"description":"请求参数SourceRocketMQParameters。","type":"object","properties":{"RegionId":{"description":"消息队列RocketMQ版的实例所属地域。","type":"string","required":false,"example":"cn-hangzhou"},"InstanceId":{"description":"消息队列RocketMQ版的实例ID。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"MQ_INST_164901546557****_BAAN****\t"},"Topic":{"description":"消息队列RocketMQ版实例的Topic名称。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"mytopic"},"Tag":{"description":"消息的过滤标签。","type":"string","required":false,"example":"test"},"Offset":{"description":"消息的消费位点。取值说明如下：\nCONSUME_FROM_LAST_OFFSET：从最新位点开始消费。\nCONSUME_FROM_FIRST_OFFSET：从最早位点开始消费。\nCONSUME_FROM_TIMESTAMP：从指定时间点的位点开始消费。\n默认值：CONSUME_FROM_LAST_OFFSET。","type":"string","required":false,"example":"CONSUME_FROM_LAST_OFFSET"},"Timestamp":{"description":"时间戳。仅当参数Offset取值为CONSUME_FROM_TIMESTAMP时，该参数有效。","type":"integer","format":"int64","required":false,"example":"1636597951964"},"GroupID":{"description":"消息队列RocketMQ版的Group ID。","type":"string","required":false,"example":"GID-test"},"InstanceType":{"description":"实例类型 ：\n\n- 4.0实例填写：Cloud_4\n\n- 5.0实例填写：Cloud_5","type":"string","required":false,"example":"Cloud_4"},"InstanceNetwork":{"description":"无","type":"string","required":false,"example":"无"},"InstanceVpcId":{"description":"专有网络需要添加 ：vpcId","type":"string","required":false,"example":"vpc-bp1a4gmlk31hyg6pt****"},"InstanceVSwitchIds":{"description":"专有网络需要添加 ：vSwitchId","type":"string","required":false,"example":"vsw-bp10rbrt6rb6vrd89****"},"InstanceSecurityGroupId":{"description":"专有网络需要添加 ：securityGroupId","type":"string","required":false,"example":"sg-catalog-eventlist****"},"AuthType":{"description":"ACL或者不填。","type":"string","required":false,"example":"ACL"},"InstanceEndpoint":{"description":"实例接入点。","type":"string","required":false,"example":"registry-vpc****.aliyuncs.com\n"},"InstanceUsername":{"description":"实例用户名。","type":"string","required":false,"example":"root"},"InstancePassword":{"description":"实例密码。","type":"string","required":false,"example":"******"}},"required":false}},{"name":"SourceRabbitMQParameters","in":"formData","style":"json","schema":{"description":"请求参数SourceRabbitMQParameters","type":"object","properties":{"RegionId":{"description":"消息队列RabbitMQ版实例所在的地域。","type":"string","required":false,"example":"cn-hangzhou"},"InstanceId":{"description":"消息队列RabbitMQ版的实例的ID。更多信息，请参见使用限制。","type":"string","required":false,"example":"amqp-cn-nif22u74****\t"},"VirtualHostName":{"description":"消息队列RabbitMQ版实例的Vhost的名称。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"eb-connect\t"},"QueueName":{"description":"eb-connect\t消息队列RabbitMQ版实例的Queue的名称。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"demo"}},"required":false}},{"name":"SourceSLSParameters","in":"formData","style":"json","schema":{"description":"SourceSLSParameters","type":"object","properties":{"Project":{"description":"日志服务SLS的日志项目。","type":"string","required":false,"example":"test-project\t"},"LogStore":{"description":"日志服务SLS的日志库。","type":"string","required":false,"example":"test-logstore\t"},"ConsumePosition":{"description":"起始消费位点，可以选择最早或最新位点，分别对应“begin”，“end”，也可以从指定时间开始消费，以秒为单位。","type":"string","required":false,"example":"end"},"RoleName":{"description":"授权事件总线EventBridge使用此角色读取SLS日志内容时，需满足条件：在RAM控制台创建服务所使用的角色时，需要选择“阿里云服务”，并且“受信服务”需要选择“事件总线”。此角色权限策略可参考自定义事件源日志服务SLS。","type":"string","required":false,"example":"testRole"}},"required":false}},{"name":"SourceHttpEventParameters","in":"formData","style":"json","schema":{"description":"请求参数SourceHttpEventParameters","type":"object","properties":{"Type":{"description":"生成的Webhook支持的协议类型。取值说明如下：\n- HTTP\n- HTTPS\n- HTTP&HTTPS","type":"string","required":false,"example":"HTTPS"},"Method":{"description":"生成的Webhook支持的HTTP请求方法。可多选，可选范围如下：\n- GET\n- POST\n- PUT\n- PATCH\n- DELETE\n- HEAD\n- OPTIONS\n- TRACE\n- CONNECT","type":"array","items":{"description":"生成的Webhook支持的HTTP请求方法。可多选，可选范围如下：\n- GET\n- POST\n- PUT\n- PATCH\n- DELETE\n- HEAD\n- OPTIONS\n- TRACE\n- CONNECT","type":"string","required":false,"example":"GET"},"required":false},"SecurityConfig":{"description":"选择安全配置的类型。可选范围如下：\n- none：无需配置。\n- ip：IP网段。\n- referer：安全域名。","type":"string","required":false,"example":"none"},"Ip":{"description":"IP网段安全配置。仅在SecurityConfig取值为ip时，需要设置该参数。可填写IP地址段或IP地址。","type":"array","items":{"description":"IP网段安全配置。仅在SecurityConfig取值为ip时，需要设置该参数。可填写IP地址段或IP地址。","type":"string","required":false,"example":"10.0.0.0/8\t"},"required":false},"Referer":{"description":"安全域名配置。仅在SecurityConfig取值为referer时，需要设置该参数。可填写域名。","type":"array","items":{"description":"安全域名配置。仅在SecurityConfig取值为referer时，需要设置该参数。可填写域名。","type":"string","required":false,"example":"aliyundoc.com\t"},"required":false}},"required":false}},{"name":"SourceScheduledEventParameters","in":"formData","style":"json","schema":{"description":"请求参数SourceScheduledEventParameters","type":"object","properties":{"Schedule":{"description":"Cron表达式。","type":"string","required":false,"example":"10 * * * * *"},"TimeZone":{"description":"Cron执行时区。","type":"string","required":false,"example":"GMT+0:00"},"UserData":{"description":"JSON字符串","type":"string","required":false,"example":"{\"a\": \"b\"}\n"}},"required":false}},{"name":"SourceKafkaParameters","in":"formData","style":"json","schema":{"description":"请求参数SourceKafkaParameters","type":"object","properties":{"InstanceId":{"description":"实例ID。","type":"string","required":false,"example":"pc-2zehmg67txzuyuuwl****"},"ConsumerGroup":{"description":"订阅该Topic的消费者所对应的Group ID。","type":"string","required":false,"example":"wechat_peer_****"},"Topic":{"description":"Topic名称。","type":"string","required":false,"example":"prod_ma_dispatch_center_call_re****"},"OffsetReset":{"description":"消费位点。","type":"string","required":false,"example":"latest"},"RegionId":{"description":"地域ID。","type":"string","required":false,"example":"cn-hangzhou"},"MaximumTasks":{"description":"并发配额（消费者数）","type":"integer","format":"int32","required":false,"example":"1"},"Network":{"description":"网络配置 ：Default（默认网络）和PublicNetwork（自建网络）。","type":"string","required":false,"example":"Default"},"SecurityGroupId":{"description":"如果是自建网络需要添加：安全组id","type":"string","required":false,"example":"sg-8vbf66aoyp0wfzrz****"},"VSwitchIds":{"description":"如果是自建网络需要添加：vSwitchId","type":"string","required":false,"example":"vsw-bp127azpeirmwu4q9****"},"VpcId":{"description":"如果是自建网络需要添加：vpcId","type":"string","required":false,"example":"vpc-2ze5ejm986a73qq3v****"}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"错误信息。","type":"string","example":" Remote error. requestId: [A8EFABD2-95B9-1C46-9E01-xxxx], error code: [CreateRelatedResourceFailed], message: [Create related resource failed, EntityNotExist.Role : The role not exists: xxxx. \\r\\nRequestId : xxxx-168C-54ED-8FEB-BF11CB70AEB7]   "},"RequestId":{"description":"请求id。","type":"string","example":"2922208e-e1c6-43ee-bfd1-aca50263bc8a"},"Data":{"description":"返回数据。","type":"object","properties":{"EventSourceARN":{"title":"资源ARN","description":"资源ARN。","type":"string","example":"acs:eventbridge:cn-hangzhou:164901546557****:eventbus/my-event-bus/eventsource/mymns.source"}}},"Code":{"description":"接口返回码：\n- Success：表示成功。                                 \n- 其它：表示错误码。\n错误码详情，请参见错误码。","type":"string","example":"Success"},"Success":{"description":"操作成功返回true。","type":"boolean","example":"true"}}}}},"errorCodes":{"403":[{"errorCode":"ServiceNotEnable","errorMessage":"Service not enable"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\" Remote error. requestId: [A8EFABD2-95B9-1C46-9E01-xxxx], error code: [CreateRelatedResourceFailed], message: [Create related resource failed, EntityNotExist.Role : The role not exists: xxxx. \\\\\\\\r\\\\\\\\nRequestId : xxxx-168C-54ED-8FEB-BF11CB70AEB7]   \\\",\\n  \\\"RequestId\\\": \\\"2922208e-e1c6-43ee-bfd1-aca50263bc8a\\\",\\n  \\\"Data\\\": {\\n    \\\"EventSourceARN\\\": \\\"acs:eventbridge:cn-hangzhou:164901546557****:eventbus/my-event-bus/eventsource/mymns.source\\\"\\n  },\\n  \\\"Code\\\": \\\"Success\\\",\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"创建一个事件源","description":"创建一个外部事件源。","requestParamsDescription":"请求示例\n`POST /openapi/createEventSource HTTP/1.1\nHost: 164901546557****.eventbridge.cn-hangzhou.aliyuncs.com\nDate: Sat, 18 Apr 2020 05:30:41 GMT\nx-eventbridge-version: 2020-04-01\nAuthorization: acs vZ3VL0SuJdHi****:Jo2PbT******azYAYoYslKLvWzg=\nContent-Type: application/json;charset=UTF-8\nContent-Length: 26\n\n{\n    \"EventSourceName\":\"myRabbitMQ.source\",\n    \"Description\":\"RabbitMQ事件源\",\n    \"SourceRabbitMQParameters\":{\n        \"RegionId\":\"cn-hangzhou\",\n        \"InstanceId\":\"amqp-cn-nif22u74****\",\n        \"VirtualHostName\":\"eb-connect\",\n        \"QueueName\":\"demo\"\n    },\n    \"EventBusName\":\"my-event-bus\"\n}`"}