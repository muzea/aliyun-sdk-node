{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"38627","abilityTreeNodes":["FEATUREeventbridgeS2QNZ9"]},"parameters":[{"name":"EventBusName","in":"query","schema":{"description":"事件总线名称。","type":"string","required":true,"docRequired":true,"example":"MyEventBus"}},{"name":"Description","in":"query","schema":{"description":"事件总线的描述","type":"string","required":false,"example":"MNS的过滤规则"}},{"name":"RuleName","in":"query","schema":{"description":"事件规则的名称","type":"string","required":true,"docRequired":true,"example":"MNSRule"}},{"name":"Status","in":"query","schema":{"description":"规则的状态。取值说明如下：\nENABLE：规则已启用。规则默认状态。\nDISABLE：规则已禁用。","type":"string","required":false,"example":"ENABLE"}},{"name":"FilterPattern","in":"query","schema":{"description":"事件模式，JSON格式。取值说明如下：\nstringEqual模式。\nstringExpression模式 。\n每个field最多5个expression（map结构）。\n\n每个field最多5个expression（map结构）。","type":"string","required":true,"example":"{\\\"source\\\": [{\\\"prefix\\\": \\\"acs.\\\"}],\\\"type\\\": [{\\\"prefix\\\":\\\"oss:ObjectReplication\\\"}],\\\"subject\\\":[{\\\"prefix\\\":\\\"acs:oss:cn-hangzhou:123456789098****:my-movie-bucket/\\\", \\\"suffix\\\":\\\".txt\\\"}]}"}},{"name":"EventTargets","in":"query","style":"json","schema":{"description":"事件目标列表。","type":"array","items":{"description":"事件目标。","type":"object","properties":{"Id":{"description":"自定义事件目标Id。","type":"string","required":true,"example":"Mlm123456JHd2RsRoKw\n"},"Type":{"description":"事件目标类型。更多信息，请参见[事件目标参数](~~185887~~)。","type":"string","required":true,"example":"acs.mns.queue\t"},"Endpoint":{"description":"投递端点链接。","type":"string","required":false,"example":"acs:mns:cn-hangzhou:123456789098****:queues/myqueue\t"},"PushRetryStrategy":{"description":"推送重试策略。取值说明如下：\nBACKOFF_RETRY：退避重试策略。重试3次，每次重试的间隔时间是10秒到20秒之间的随机值。\nEXPONENTIAL_DECAY_RETRY：指数衰减重试。重试176次，每次重试的间隔时间指数递增至512秒，总计重试时间为1天；每次重试的具体间隔为：1，2，4，8，16，32，64，128，256，512，512...512秒（共167个512）。","type":"string","required":false,"example":"BACKOFF_RETRY"},"DeadLetterQueue":{"description":"死信队列。未处理或者超过重试次数的事件会被写入死信队列。当前死信队列支持的队列类型有消息队列RocketMQ版、消息服务MNS、消息队列Kafka版和EventBridge事件总线。","type":"object","properties":{"Arn":{"description":"死信队列的Arn，未处理或超过重试次数的事件会被写入死信队列。支持消息服务MNS和消息队列RocketMQ版。","type":"string","required":false,"example":"acs:mns:cn-hangzhou:123456789098****:/queues/deadletterqueue\n或\nacs:mq:cn-hangzhou:123456789098****:/instances/MQ_INST_123456789098****_BX8QbBPL/topic/deadlettertopic\n或\nacs:alikafka:cn-hangzhou:123456789098****:instance/alikafka_post-cn-123456/topic/deadlettertopic\n或\nacs:eventbridge:cn-hangzhou:123456789098****:eventbus/deadletterbus\n"}},"required":false},"ErrorsTolerance":{"description":"容错策略。取值说明如下：\nALL：允许容错。允许异常容错，当异常发生时不会阻塞执行，超过重试策略后会根据配置将消息投递至死信队列或直接丢弃。\nNONE：禁止容错。不允许容错，当异常发生并超过重试策略配置时会阻塞执行。","type":"string","required":false,"example":"ALL"},"ParamList":{"description":"事件目标的参数。","type":"array","items":{"description":"事件目标的参数。","type":"object","properties":{"ResourceKey":{"description":"事件目标的资源参数。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"body"},"Form":{"description":"事件目标参数的格式。更多信息，请参见[使用限制](~~163289~~)。","type":"string","required":false,"example":"TEMPLATE"},"Value":{"description":"事件目标参数的值。","type":"string","required":false,"example":"{\\\"key\\\"=\\\"value\\\"}"},"Template":{"description":"事件目标参数模板样式。","type":"string","required":false,"example":"The value of ${key} is ${value}!\t"}},"required":false},"required":false}},"required":false},"required":false,"docRequired":true}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"错误信息","type":"string","example":"Remote error. requestId: [xxxx], error code: [xxx], message: [The target in event rule is invalid! Endpoint is xxx"},"RequestId":{"description":"请求id。","type":"string","example":"1AD6D598-7506-5D2C-81EA-30E3241A903A"},"Data":{"description":"返回数据","type":"object","properties":{"RuleARN":{"description":"事件规则的ARN，用于授权。","type":"string","example":"acs:eventbridge:cn-hangzhou:123456789098****:eventbus/default/rule/MNSRule"}}},"Code":{"description":"接口返回码：Success：表示成功。                                 其它：表示错误码。错误码详情，请参见错误码。","type":"string","example":"Success"},"Success":{"description":"操作成功返回true。","type":"boolean","example":"true"}}}}},"errorCodes":{"403":[{"errorCode":"ServiceNotEnable","errorMessage":"Service not enable"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\"Remote error. requestId: [xxxx], error code: [xxx], message: [The target in event rule is invalid! Endpoint is xxx\\\",\\n  \\\"RequestId\\\": \\\"1AD6D598-7506-5D2C-81EA-30E3241A903A\\\",\\n  \\\"Data\\\": {\\n    \\\"RuleARN\\\": \\\"acs:eventbridge:cn-hangzhou:123456789098****:eventbus/default/rule/MNSRule\\\"\\n  },\\n  \\\"Code\\\": \\\"Success\\\",\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"创建一个事件规则","summary":"创建一个事件规则。","description":"创建一个事件规则。","requestParamsDescription":"请求示例\n\nPOST /openapi/createRule HTTP/1.1\nHost: 123456789098****.eventbridge.cn-hangzhou.aliyuncs.com\nDate: Sat, 18 Apr 2020 05:30:41 GMT\nx-eventbridge-version: 2020-04-01\nAuthorization: acs vZ3VL0SuJdHi****:Jo2PbT******azYAYoYslKLvWzg=\nContent-Type: application/json;charset=UTF-8\nContent-Length: 26\n\n{\n    \"EventBusName\":\"default\",\n    \"RuleName\":\"MNSRule\",\n    \"Description\":\"MNS的过滤规则\",\n    \"Status\":\"ENABLE\",\n    \"filterPattern\":\"{\\\"source\\\": [{\\\"prefix\\\": \\\"acs.\\\"}],\\\"type\\\": [{\\\"prefix\\\":\\\"oss:ObjectReplication\\\"}],\\\"subject\\\":[{\\\"prefix\\\":\\\"acs:oss:cn-hangzhou:123456789098****:my-movie-bucket/\\\", \\\"suffix\\\":\\\".txt\\\"}]}\",\n    \"Targets\":[\n        {\n            \"Id\":\"1\",\n            \"Type\":\"acs.mns.queue\",\n            \"Endpoint\":\"acs:mns:cn-hangzhou:123456789098****:queues/myqueue\",\n            \"PushRetryStrategy\":\"BACKOFF_RETRY\",\n            \"DeadLetterQueue\":{\n            \"Arn\":\"acs:mns:cn-hangzhou:123456789098****:/queues/rule-deadletterqueue\"\n            },\n            \"ParamList\":[\n                {\n                    \"resourceKey\":\"queue\",\n                    \"form\":\"CONSTANT\",\n                    \"value\":\"myqueue\"\n                },\n                {\n                    \"resourceKey\":\"body\",\n                    \"form\":\"TEMPLATE\",\n                    \"value\":\"{\\\"key\\\"=\\\"value\\\"}\",\n                    \"template\":\"The value of ${key} is ${value}!\"\n                }\n            ]\n        }\n    ]\n}"}