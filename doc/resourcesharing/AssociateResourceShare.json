{"methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"ResourceShareId","in":"query","schema":{"description":"共享单元ID。","type":"string","required":true,"docRequired":true,"example":"rs-6GRmdD3X****"}},{"name":"Resources","in":"query","style":"repeatList","schema":{"description":"资源列表。","type":"array","items":{"description":"资源列表。","type":"object","properties":{"ResourceType":{"description":"共享资源类型。\n\nN的取值范围：1~5，即每次最多添加5个共享资源。\n\n支持共享的资源类型，请参见[支持资源共享的云服务](~~450526~~)。\n\n> `Resources.N.ResourceId`与`Resources.N.ResourceType`成对出现，需要同时设置。","type":"string","required":false,"example":"VSwitch"},"ResourceId":{"description":"共享资源ID。\n\nN的取值范围：1~5，即每次最多添加5个共享资源。\n\n> Resources.N.ResourceId与Resources.N.ResourceType成对出现，需要同时设置。","type":"string","required":false,"example":"vsw-bp183p93qs667muql****"}},"required":false},"required":false,"maxItems":20}},{"name":"Targets","in":"query","style":"repeatList","schema":{"description":"资源使用者。","type":"array","items":{"description":"资源使用者。取值：\n\n- 当`AllowExternalTargets`为`false`时，即仅允许资源目录内共享时，资源使用者可以为资源目录ID、资源夹ID或成员ID。\n- 当`AllowExternalTargets`为`true`时，即允许共享给任意账号时，资源使用者可以为阿里云账号ID、资源目录ID、资源夹ID、成员ID或阿里云服务。\n\n更多信息，请参见[资源共享方式](~~160622~~)、[查看资源目录ID](~~111217~~)、[查看资源夹ID](~~111223~~)或[查看成员ID](~~111624~~)。\n\nN的取值范围：1~5，即每次最多添加5个资源使用者。","type":"string","required":false,"example":"172050525300****"},"required":false,"example":"172050525300****","maxItems":20}},{"name":"PermissionNames","in":"query","style":"repeatList","schema":{"description":"共享权限名称。为空时，系统自动绑定资源类型关联的默认权限。具体信息，请参见[权限库](~~465474~~)。","type":"array","items":{"description":"共享权限名称。为空时，系统自动绑定资源类型关联的默认权限。具体信息，请参见[权限库](~~465474~~)。","type":"string","required":false,"example":"AliyunRSDefaultPermissionVSwitch"},"required":false,"maxItems":20}},{"name":"TargetProperties","in":"query","style":"flat","schema":{"description":"资源使用者属性。\n> 仅当资源使用者为阿里云服务时可以设置该参数。","type":"array","items":{"description":"资源使用者属性。\n> 仅当资源使用者为阿里云服务时可以设置该参数。","type":"object","properties":{"TargetId":{"description":"资源使用者ID。\n\n> `TargetProperties.N.TargetId`与`TargetProperties.N.Property`成对出现，需要同时设置。","type":"string","required":false,"example":"172050525300****"},"Property":{"description":"资源使用者属性参数。例如：您可以设置资源共享的时间段。`timeRangeType`取值：\n- timeRange：指定时间段。\n- day：全天。\n> `TargetProperties.N.TargetId`与`TargetProperties.N.Property`成对出现，需要同时设置。","type":"string","required":false,"example":"{\n    \"timeRange\":{\n        \"timeRangeType\":\"timeRange\",\n        \"beginAtTime\":\"00:00\",\n        \"timezone\":\"UTC+8\",\n        \"endAtTime\":\"19:59\"\n    }\n}"}},"required":false},"required":false}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"111FB84A-60A9-403E-9067-E55D7EE95BD1"},"ResourceShareAssociations":{"description":"共享单元关联的共享资源或资源使用者信息。","type":"array","items":{"description":"共享单元关联的共享资源或资源使用者信息。","type":"object","properties":{"UpdateTime":{"description":"更新关联的时间。存在以下两种情况：\n\n- 当关联类型`AssociationType`为资源`Resource`时，该参数为更新资源的时间。\n- 当关联类型`AssociationType`为资源使用者`Target`时，该参数为更新资源使用者的时间。","type":"string","example":"2020-12-04T09:40:41.246Z"},"EntityId":{"description":"关联实体ID。取值：\n\n- 当关联类型`AssociationType`为资源`Resource`时，该参数为资源ID。\n- 当关联类型`AssociationType`为资源使用者`Target` 时，该参数为资源使用者ID。","type":"string","example":"vsw-bp183p93qs667muql****"},"ResourceShareName":{"description":"共享单元名称。","type":"string","example":"test"},"CreateTime":{"description":"关联的时间。存在以下两种情况：\n\n- 当关联类型`AssociationType`为资源`Resource`时，该参数为添加资源的时间。\n- 当关联类型`AssociationType`为资源使用者`Target`时，该参数为添加资源使用者的时间。","type":"string","example":"2020-12-04T09:40:41.246Z"},"EntityType":{"description":"关联实体类型。取值：\n\n- 当关联实体为资源时，该参数为资源类型。更多信息，请参见[支持资源共享的云服务](~~450526~~)。\n- 当关联实体为资源使用者时，该参数为`Account`。","type":"string","example":"VSwitch"},"ResourceShareId":{"description":"共享单元ID。","type":"string","example":"rs-6GRmdD3X****"},"AssociationStatusMessage":{"description":"关联失败的原因。","type":"string","example":"The reason for the association failure."},"AssociationType":{"description":"关联类型。取值：\n\n- Resource：资源。\n- Target：资源使用者。\n","type":"string","example":"Resource"},"AssociationStatus":{"description":"关联状态。取值：\n\n- Associating：关联中。\n- Associated：已关联。\n- Failed：关联失败。\n- Disassociating：分离中。\n- Disassociated：已分离。\n\n> `Failed`和`Disassociated`状态的记录，会在48~96小时内被系统自动删除。","type":"string","example":"Associating"},"TargetProperty":{"description":"资源使用者属性。例如：资源共享的时间段。\n>  仅当资源使用者为阿里云服务时返回设置该参数。","type":"string","example":"{\n    \"plan\":{\n        \"timeRangeType\":\"timeRange\",\n        \"beginAtTime\":\"00:00\",\n        \"timezone\":\"UTC+8\",\n        \"endAtTime\":\"19:59\"\n    }\n}"}}}}}}}},"errorCodes":{"400":[{"errorCode":"MissingParameter.ResourceShareId","errorMessage":"You must specify ResourceShareId."},{"errorCode":"InvalidParameter.ResourceShareId","errorMessage":"The ResourceShareId is invalid."},{"errorCode":"InvalidParameter.Resources","errorMessage":"The Resources is invalid."},{"errorCode":"InvalidParameter.Resources.Duplicate","errorMessage":"The Resources contains duplicate values."},{"errorCode":"InvalidParameter.Resources.Length","errorMessage":"The maximum number of Resources exceeds 5."},{"errorCode":"InvalidParameter.Targets","errorMessage":"The Targets is invalid."},{"errorCode":"InvalidParameter.Targets.Duplicate","errorMessage":"The Targets contains duplicate values."},{"errorCode":"InvalidParameter.Targets.Length","errorMessage":"The maximum number of Targets exceeds 5."},{"errorCode":"InvalidTarget","errorMessage":"The shared target does not exist in the resource directory."},{"errorCode":"ResourceAndTargetBothEmpty","errorMessage":"Either a resource or a shared target must be specified."},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is invalid."},{"errorCode":"InvalidParameter.ResourceType","errorMessage":"The ResourceType is invalid."},{"errorCode":"InvalidParameter.PermissionNames.Duplicate","errorMessage":"The PermissionNames duplicate values."},{"errorCode":"InvalidParameter.PermissionNames.Length","errorMessage":"The maximum length of PermissionNames exceeds quota limit."},{"errorCode":"InvalidParameter.TargetProperties","errorMessage":"The TargetProperties is invalid."},{"errorCode":"InvalidParameter.TargetProperties.Duplicate","errorMessage":"The TargetProperties contains duplicate values."},{"errorCode":"InvalidParameter.TargetProperties.Length","errorMessage":"The TargetProperties beyond the length limit."}],"404":[{"errorCode":"EntityNotExists.ResourceShare","errorMessage":"The resource share does not exist in the current account."},{"errorCode":"EntityNotExists.Permission","errorMessage":"The resource share permission does not exist."}],"409":[{"errorCode":"NotEnableSharingWithResourceDirectory","errorMessage":"You have not enabled sharing with your Resource Directory."},{"errorCode":"AccountNotInResourceDirectory","errorMessage":"The account is not a master or a member of a resource directory."},{"errorCode":"ResourceShareStatusMismatchAction","errorMessage":"The status of the resource share does not allow the specified operation."},{"errorCode":"QuotaExceeded.SharedResource.Count","errorMessage":"The maximum number of shared resources per account  exceeds the limit."},{"errorCode":"ShareWithYourself","errorMessage":"You cannot share resources with yourself."},{"errorCode":"AssociateConflict","errorMessage":"You cannot perform the operation while disassociation operation is being performed."},{"errorCode":"NotManagementAccount","errorMessage":"Only the management account of the service is allowed to share such resources."},{"errorCode":"QuotaExceeded.PendingInvitations","errorMessage":"The maximum number of pending invitations exceeds the limit."},{"errorCode":"InvalidTarget.LegalEntityMismatch","errorMessage":"The target account does not have the same legal entity as the resource owner account."},{"errorCode":"ExternalTargetsNotAllowed.ResourceType","errorMessage":"The resource share includes resource types that cannot be shared with accounts outside the resource directory."},{"errorCode":"InvalidTarget.SiteMismatch","errorMessage":"Cross-site resource sharing is not supported."},{"errorCode":"NotSupport.Service.ExistInOtherResourceShare","errorMessage":"The resource type has been shared to the target service through other resourceShare. Please share it in the same resourceShare."},{"errorCode":"NotSupport.Service.AssociateConflict","errorMessage":"The same resource cannot be shared repeatedly to the target service."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"111FB84A-60A9-403E-9067-E55D7EE95BD1\\\",\\n  \\\"ResourceShareAssociations\\\": [\\n    {\\n      \\\"UpdateTime\\\": \\\"2020-12-04T09:40:41.246Z\\\",\\n      \\\"EntityId\\\": \\\"vsw-bp183p93qs667muql****\\\",\\n      \\\"ResourceShareName\\\": \\\"test\\\",\\n      \\\"CreateTime\\\": \\\"2020-12-04T09:40:41.246Z\\\",\\n      \\\"EntityType\\\": \\\"VSwitch\\\",\\n      \\\"ResourceShareId\\\": \\\"rs-6GRmdD3X****\\\",\\n      \\\"AssociationStatusMessage\\\": \\\"The reason for the association failure.\\\",\\n      \\\"AssociationType\\\": \\\"Resource\\\",\\n      \\\"AssociationStatus\\\": \\\"Associating\\\",\\n      \\\"TargetProperty\\\": \\\"{\\\\n    \\\\\\\"plan\\\\\\\":{\\\\n        \\\\\\\"timeRangeType\\\\\\\":\\\\\\\"timeRange\\\\\\\",\\\\n        \\\\\\\"beginAtTime\\\\\\\":\\\\\\\"00:00\\\\\\\",\\\\n        \\\\\\\"timezone\\\\\\\":\\\\\\\"UTC+8\\\\\\\",\\\\n        \\\\\\\"endAtTime\\\\\\\":\\\\\\\"19:59\\\\\\\"\\\\n    }\\\\n}\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\\r\\n<AssociateResourceShareResponse>\\r\\n\\t<ResourceShareAssociations>\\r\\n\\t\\t<ResourceShareId>rs-6GRmdD3X****</ResourceShareId>\\r\\n\\t\\t<EntityId>vsw-bp183p93qs667muql****</EntityId>\\r\\n\\t\\t<EntityType>VSwitch</EntityType>\\r\\n\\t\\t<AssociationStatusMessage></AssociationStatusMessage>\\r\\n\\t\\t<AssociationType>Resource</AssociationType>\\r\\n\\t\\t<CreateTime>2020-12-04T09:40:41.246Z</CreateTime>\\r\\n\\t\\t<UpdateTime>2020-12-04T09:40:41.246Z</UpdateTime>\\r\\n\\t\\t<ResourceShareName>test</ResourceShareName>\\r\\n\\t\\t<AssociationStatus>Associating</AssociationStatus>\\r\\n\\t</ResourceShareAssociations>\\r\\n\\t<ResourceShareAssociations>\\r\\n\\t\\t<ResourceShareId>rs-6GRmdD3X****</ResourceShareId>\\r\\n\\t\\t<EntityId>172050525300****</EntityId>\\r\\n\\t\\t<EntityType>Account</EntityType>\\r\\n\\t\\t<AssociationStatusMessage></AssociationStatusMessage>\\r\\n\\t\\t<AssociationType>Target</AssociationType>\\r\\n\\t\\t<CreateTime>2020-12-04T09:40:41.250Z</CreateTime>\\r\\n\\t\\t<UpdateTime>2020-12-04T09:40:41.250Z</UpdateTime>\\r\\n\\t\\t<ResourceShareName>test1</ResourceShareName>\\r\\n\\t\\t<AssociationStatus>Associating</AssociationStatus>\\r\\n\\t</ResourceShareAssociations>\\r\\n\\t<RequestId>111FB84A-60A9-403E-9067-E55D7EE95BD1</RequestId>\\r\\n</AssociateResourceShareResponse>\\t\\r\\n\",\"errorExample\":\"\"}]","title":"关联共享资源或资源使用者","summary":"为共享单元关联共享资源或资源使用者。","description":"本文将提供一个示例，在`cn-hangzhou`地域的共享单元`rs-6GRmdD3X****`中，添加共享资源VPC交换机`vsw-bp183p93qs667muql****`，将其共享给资源目录内的成员`172050525300****`。"}