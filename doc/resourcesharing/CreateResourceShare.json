{"summary":"创建共享单元。","methods":["post","get"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"ResourceShareName","in":"query","schema":{"description":"共享单元名称。\n\n长度范围：1~50个字符。\n\n格式：允许输入英文字母、数字、中文、半角句号（.）、下划线（_）或短划线（-）。","type":"string","required":true,"docRequired":true,"example":"test"}},{"name":"Resources","in":"query","style":"repeatList","schema":{"description":"共享资源列表。","type":"array","items":{"description":"共享资源列表。","type":"object","properties":{"ResourceType":{"description":"共享资源类型。\n\nN的取值范围：1~5，即每次最多添加5个共享资源。\n\n支持共享的资源类型，请参见[支持资源共享的云服务](~~450526~~)。\n\n> `Resources.N.ResourceId`与`Resources.N.ResourceType`成对出现，需要同时设置。\n","type":"string","required":false,"example":"VSwitch"},"ResourceId":{"description":"共享资源ID。\n\nN的取值范围：1~5，即每次最多添加5个共享资源。\n\n> `Resources.N.ResourceId`与`Resources.N.ResourceType`成对出现，需要同时设置。","type":"string","required":false,"example":"vsw-bp183p93qs667muql****"}},"required":false},"required":false,"maxItems":20}},{"name":"Targets","in":"query","style":"repeatList","schema":{"description":"资源使用者。","type":"array","items":{"description":"资源使用者。取值：\n\n- 当`AllowExternalTargets`为`false`时，资源使用者可以为资源目录ID、资源夹ID或成员ID。\n- 当`AllowExternalTargets`为`true`时，资源使用者可以为阿里云账号ID、资源目录ID、资源夹ID、成员ID或阿里云服务。\n\n更多信息，请参见[资源共享方式](~~160622~~)、[查看资源目录ID](~~111217~~)、[查看资源夹ID](~~111223~~)或[查看成员ID](~~111624~~)。\n\nN的取值范围：1~5，即每次最多添加5个资源使用者。","type":"string","required":false,"example":"172050525300****"},"required":false,"example":"172050525300****","maxItems":20}},{"name":"PermissionNames","in":"query","style":"repeatList","schema":{"description":"共享权限名称。为空时，系统自动绑定资源类型关联的默认权限。具体信息，请参见[权限库](~~465474~~)。","type":"array","items":{"description":"共享权限名称。为空时，系统自动绑定资源类型关联的默认权限。具体信息，请参见[权限库](~~465474~~)。","type":"string","required":false,"example":"AliyunRSDefaultPermissionVSwitch"},"required":false,"maxItems":20}},{"name":"AllowExternalTargets","in":"query","schema":{"description":"是否允许共享给资源目录外的账号。取值：\n\n- false（默认值）：仅允许资源目录内共享。\n- true：允许共享给任意账号。","type":"boolean","required":false,"example":"false"}},{"name":"TargetProperties","in":"query","style":"flat","schema":{"description":"资源使用者属性。\n> 仅当资源使用者为阿里云服务时可以设置该参数。","type":"array","items":{"description":"资源使用者属性。\n> 仅当资源使用者为阿里云服务时可以设置该参数。","type":"object","properties":{"TargetId":{"description":"资源使用者ID。\n\n> `TargetProperties.N.TargetId`与`TargetProperties.N.Property`成对出现，需要同时设置。","type":"string","required":false,"example":"172050525300****"},"Property":{"description":"资源使用者属性参数。例如：您可以设置资源共享的时间段。`timeRangeType`取值：\n- timeRange：指定时间段。\n- day：全天。\n> `TargetProperties.N.TargetId`与`TargetProperties.N.Property`成对出现，需要同时设置。","type":"string","required":false,"example":"{\n    \"timeRange\":{\n        \"timeRangeType\":\"timeRange\",\n        \"beginAtTime\":\"00:00\",\n        \"timezone\":\"UTC+8\",\n        \"endAtTime\":\"19:59\"\n    }\n}"}},"required":false},"required":false}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"2C3FA051-61DC-4F3E-81E9-E4830524DF4B"},"ResourceShare":{"description":"共享单元信息。","type":"object","properties":{"UpdateTime":{"description":"共享单元更新时间。","type":"string","example":"2020-12-03T08:02:22.413Z"},"ResourceShareName":{"description":"共享单元名称。","type":"string","example":"test"},"ResourceShareOwner":{"description":"共享单元归属者。","type":"string","example":"151266687691****"},"CreateTime":{"description":"共享单元创建时间。","type":"string","example":"2020-12-03T08:02:22.413Z"},"ResourceShareId":{"description":"共享单元ID。","type":"string","example":"rs-qSkW1HBY****"},"ResourceShareStatus":{"description":"共享单元状态。取值：\n\n- Active：已启用。\n- Pending：待确认。\n- Deleting：删除中。\n- Deleted：已删除。\n\n> Deleted状态的共享单元记录，会在48~96小时内被系统自动删除。","type":"string","example":"Active"},"AllowExternalTargets":{"description":"是否允许共享给资源目录外的账号。取值：\n\n- false：仅允许资源目录内共享。\n- true：允许共享给任意账号。","type":"boolean","example":"false"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.ResourceShareName","errorMessage":"The ResourceShareName is invalid."},{"errorCode":"InvalidParameter.ResourceShareName.Length","errorMessage":"The maximum length of ResourceShareName exceeds 50 characters."},{"errorCode":"InvalidParameter.Resources","errorMessage":"The Resources is invalid."},{"errorCode":"InvalidParameter.Resources.Duplicate","errorMessage":"The Resources contains duplicate values."},{"errorCode":"InvalidParameter.Resources.Length","errorMessage":"The maximum number of Resources exceeds 5."},{"errorCode":"InvalidParameter.Targets","errorMessage":"The Targets is invalid."},{"errorCode":"InvalidParameter.Targets.Duplicate","errorMessage":"The Targets contains duplicate values."},{"errorCode":"InvalidParameter.Targets.Length","errorMessage":"The maximum number of Targets exceeds 5."},{"errorCode":"InvalidTarget","errorMessage":"The shared target does not exist in the resource directory."},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is invalid."},{"errorCode":"MissingParameter.ResourceShareName","errorMessage":"You must specify ResourceShareName."},{"errorCode":"InvalidParameter.ResourceType","errorMessage":"The ResourceType is invalid."},{"errorCode":"InvalidParameter.PermissionNames.Duplicate","errorMessage":"The PermissionNames duplicate values."},{"errorCode":"InvalidParameter.PermissionNames.Length","errorMessage":"The maximum length of PermissionNames exceeds quota limit."},{"errorCode":"InvalidParameter.TargetProperties","errorMessage":"The TargetProperties is invalid."},{"errorCode":"InvalidParameter.TargetProperties.Duplicate","errorMessage":"The TargetProperties contains duplicate values."},{"errorCode":"InvalidParameter.TargetProperties.Length","errorMessage":"The TargetProperties beyond the length limit."}],"404":[{"errorCode":"EntityNotExists.Permission","errorMessage":"The resource share permission does not exist."}],"409":[{"errorCode":"NotEnableSharingWithResourceDirectory","errorMessage":"You have not enabled sharing with your Resource Directory."},{"errorCode":"AccountNotInResourceDirectory","errorMessage":"The account is not a master or a member of a resource directory."},{"errorCode":"QuotaExceeded.ResourceShare.Count","errorMessage":"The maximum number of ResourceShare exceeds the limit."},{"errorCode":"EntityAlreadyExists.ResourceShare","errorMessage":"The specified resource share ID already exists."},{"errorCode":"QuotaExceeded.SharedResource.Count","errorMessage":"The maximum number of shared resources per account  exceeds the limit."},{"errorCode":"ShareWithYourself","errorMessage":"You cannot share resources with yourself."},{"errorCode":"NotManagementAccount","errorMessage":"Only the management account of the service is allowed to share such resources."},{"errorCode":"QuotaExceeded.PendingInvitations","errorMessage":"The maximum number of pending invitations exceeds the limit."},{"errorCode":"InvalidTarget.LegalEntityMismatch","errorMessage":"The target account does not have the same legal entity as the resource owner account."},{"errorCode":"ExternalTargetsNotAllowed.ResourceType","errorMessage":"The resource share includes resource types that cannot be shared with accounts outside the resource directory."},{"errorCode":"InvalidTarget.SiteMismatch","errorMessage":"Cross-site resource sharing is not supported."},{"errorCode":"NotSupport.Service.ExistInOtherResourceShare","errorMessage":"The resource type has been shared to the target service through other resourceShare. Please share it in the same resourceShare."},{"errorCode":"NotSupport.Service.AssociateConflict","errorMessage":"The same resource cannot be shared repeatedly to the target service."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2C3FA051-61DC-4F3E-81E9-E4830524DF4B\\\",\\n  \\\"ResourceShare\\\": {\\n    \\\"UpdateTime\\\": \\\"2020-12-03T08:02:22.413Z\\\",\\n    \\\"ResourceShareName\\\": \\\"test\\\",\\n    \\\"ResourceShareOwner\\\": \\\"151266687691****\\\",\\n    \\\"CreateTime\\\": \\\"2020-12-03T08:02:22.413Z\\\",\\n    \\\"ResourceShareId\\\": \\\"rs-qSkW1HBY****\\\",\\n    \\\"ResourceShareStatus\\\": \\\"Active\\\",\\n    \\\"AllowExternalTargets\\\": false\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateResourceShareResponse>\\n    <RequestId>2C3FA051-61DC-4F3E-81E9-E4830524DF4B</RequestId>\\n    <ResourceShare>\\n        <ResourceShareId>rs-qSkW1HBY****</ResourceShareId>\\n        <ResourceShareName>test</ResourceShareName>\\n        <ResourceShareStatus>Active</ResourceShareStatus>\\n        <CreateTime>2020-12-03T08:02:22.413Z</CreateTime>\\n        <UpdateTime>2020-12-03T08:02:22.413Z</UpdateTime>\\n        <ResourceShareOwner>151266687691****</ResourceShareOwner>\\n        <AllowExternalTargets>false</AllowExternalTargets>\\n    </ResourceShare>\\n</CreateResourceShareResponse>\",\"errorExample\":\"\"}]","title":"创建共享单元","description":"阿里云资源共享（Resource Sharing）支持将一个账号下的指定资源共享给一个或多个目标账号使用。更多信息，请参见[资源共享概述](~~160622~~)。\n\n本文将提供一个示例，在`cn-hangzhou`地域，使用资源目录管理账号创建一个名为`test`的共享单元，将VPC交换机`vsw-bp183p93qs667muql****`共享给资源目录内的成员`172050525300****`。"}