{"summary":"修改防护策略。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","systemTags":{"operationType":"update","abilityTreeCode":"201472","abilityTreeNodes":["FEATUREddosRWSV1C"]},"parameters":[{"name":"Id","in":"query","schema":{"description":"策略ID。","type":"string","required":true,"example":"c52c2fa6-fdac-40c4-8753-be7c********"}},{"name":"ActionType","in":"query","schema":{"description":"动作类型。取值\n\n- **10**：表示修改名称（`Name`必填）。\n- **11**：表示修改黑名单超时时间（`BlackIpListExpireAt`必填）。仅IP防护策略支持。\n- **12**：表示修改DDoS高防回源地址加白开关（`WhitenGfbrNets`必填）。仅IP防护策略支持。\n- **13**：表示修改禁用ICMP协议开关（`EnableDropIcmp`必填）。仅IP防护策略支持。\n- **20**：表示添加黑白名单（`WhiteIpList`和`BlackIpList`选填）。仅IP防护策略支持。\n- **21**：表示删除黑白名单（`WhiteIpList`和`BlackIpList`选填）。仅IP防护策略支持。\n- **22**：表示清空白名单。仅IP防护策略支持。\n- **23**：表示清空黑名单。仅IP防护策略支持。\n- **30**：表示修改AI智能防护开关和等级（`EnableIntelligence`和`IntelligenceLevel`必填）。仅IP防护策略支持。\n- **31**：表示修改区域封禁配置（`RegionBlockCountryList`和`RegionBlockProvinceList`选填）。仅IP防护策略支持。\n- **32**：表示修改源限速配置（`SourceLimit`和`SourceBlockList`必填）。仅IP防护策略支持。\n- **33**：表示修改反射端口过滤（`ReflectBlockUdpPortList`必填）。仅IP防护策略支持。\n- **40**：表示创建端口封禁规则（`PortRuleList`必填）。仅IP防护策略支持。\n- **41**：表示修改端口封禁规则（`PortRuleList`必填）。仅IP防护策略支持。\n- **42**：表示删除端口封禁规则（`PortRuleList`必填）。仅IP防护策略支持。\n- **50**：表示创建指纹过滤规则（`FingerPrintRuleList`必填）。仅IP防护策略支持。\n- **51**：表示修改指纹过滤规则（`FingerPrintRuleList`必填）。仅IP防护策略支持。\n- **52**：表示删除指纹过滤规则（`FingerPrintRuleList`必填）。仅IP防护策略支持。\n- **60**：表示修改端口防护开关（`EnableL4Defense`必填）。仅端口防护策略支持。\n- **61**：表示创建端口防护规则（`L4RuleList`必填）。仅端口防护策略支持。\n- **62**：表示修改端口防护规则（`L4RuleList`必填）。仅端口防护策略支持。\n- **63**：表示删除端口防护规则（`L4RuleList`必填）。仅端口防护策略支持。","type":"integer","format":"int32","required":true,"example":"11"}},{"name":"Name","in":"query","schema":{"description":"策略名称。","type":"string","required":false,"example":"demo**"}},{"name":"Content","in":"query","style":"json","schema":{"description":"策略内容。","type":"object","properties":{"BlackIpListExpireAt":{"description":"IP黑名单超时时间（unix时间戳）。","type":"integer","format":"int64","required":false,"example":"1716878000"},"EnableIntelligence":{"description":"是否开启AI智能防护。","type":"boolean","required":false,"example":"true"},"IntelligenceLevel":{"description":"AI智能防护的防护等级。取值：\n\n- **default**：表示正常。\n- **hard**：表示严格。\n- **weak**：表示宽松。","type":"string","required":false,"example":"default","enum":["default","weak","hard"]},"WhitenGfbrNets":{"description":"是否开启DDoS高防（中国内地&非中国内地）回源地址加白。","type":"boolean","required":false,"example":"false"},"EnableDropIcmp":{"description":"是否禁用ICMP协议。","type":"boolean","required":false,"example":"true"},"RegionBlockCountryList":{"description":"区域封禁的国家列表。","type":"array","items":{"description":"区域封禁的国家代号。","type":"integer","format":"int32","required":false,"maximum":"241","minimum":"1","example":"11"},"required":false,"maxItems":241,"minItems":1},"RegionBlockProvinceList":{"description":"区域封禁的省份列表。","type":"array","items":{"description":"区域封禁的省份代号。","type":"integer","format":"int32","required":false,"maximum":"82","minimum":"1","example":"2"},"required":false,"maxItems":35,"minItems":1},"SourceLimit":{"description":"源限速。","type":"object","properties":{"Pps":{"description":"源PPS限速，单位Packet/s。","type":"integer","format":"int32","required":false,"maximum":"500000","minimum":"32","example":"64"},"Bps":{"description":"源带宽限速，单位Byte/s。","type":"integer","format":"int32","required":false,"maximum":"268435456","minimum":"1024","example":"2048"},"SynPps":{"description":"源SYN PPS限速，单位Packet/s。","type":"integer","format":"int32","required":false,"maximum":"100000","minimum":"1","example":"64"},"SynBps":{"description":"源SYN 带宽限速，单位Byte/s。","type":"integer","format":"int32","required":false,"maximum":"268435456","minimum":"1024","example":"2048"}},"required":false},"SourceBlockList":{"description":"源限速拉黑列表。","type":"array","items":{"type":"object","properties":{"Type":{"description":"源限速类型。取值：\n\n- **3**：表示源PPS限速。\n\n- **4**：表示源带宽限速。\n\n- **5**：表示源SYN PPS限速。\n\n- **6**：表示源SYN 带宽限速。","type":"integer","format":"int32","required":true,"example":"3","enum":["3","4","5","6"]},"BlockExpireSeconds":{"description":"源IP加入黑名单的时长。单位秒。","type":"integer","format":"int32","required":true,"maximum":"2592000","minimum":"60","example":"120"},"EverySeconds":{"description":"源限速拉黑的统计周期，单位秒。","type":"integer","format":"int32","required":true,"maximum":"1200","minimum":"60","example":"60"},"ExceedLimitTimes":{"description":"源IP在1个统计周期内超过限速值的次数。","type":"integer","format":"int32","required":true,"maximum":"1200","minimum":"1","example":"5"}},"required":false},"required":false,"maxItems":4},"ReflectBlockUdpPortList":{"description":"反射攻击防护过滤的端口列表。","type":"array","items":{"description":"反射攻击防护过滤的端口。\n> 仅支持UDP","type":"integer","format":"int32","required":false,"maximum":"65535","minimum":"0","example":"123"},"required":false,"maxItems":128,"minItems":1},"PortRuleList":{"description":"端口封禁规则列表。","type":"array","items":{"type":"object","properties":{"Id":{"description":"规则ID。","type":"string","required":false,"example":"c52c2fa6-fdac-40c4-8753-be7c*********"},"Protocol":{"description":"协议类型。取值：\n\n- **tcp**：表示传输控制协议。\n- **udp**：表示用户数据报协议。","type":"string","required":true,"example":"tcp","enum":["tcp","udp"]},"SrcPortStart":{"description":"源端口范围的起始值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"0"},"SrcPortEnd":{"description":"源端口范围的结束值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"65535"},"DstPortStart":{"description":"目的端口范围的起始值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"0"},"DstPortEnd":{"description":"目的端口范围的结束值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"65535"},"MatchAction":{"description":"匹配动作。取值：\n\n- **drop**：表示丢弃。","type":"string","required":true,"example":"drop","enum":["drop"]},"SeqNo":{"description":"生效顺序号，使用整数表示。\n>数字越小，越靠前生效。","type":"integer","format":"int32","required":true,"maximum":"100","minimum":"1","example":"1"}},"required":false},"required":false},"FingerPrintRuleList":{"description":"指纹过滤规则列表。","type":"array","items":{"type":"object","properties":{"Id":{"description":"规则ID。","type":"string","required":false,"example":"5fbe941f-a0cf-4a49-9c7c-8fac********"},"Protocol":{"description":"协议类型。取值：\n\n- **tcp**：表示传输控制协议。\n- **udp**：表示用户数据报协议。","type":"string","required":true,"example":"udp","enum":["tcp","udp"]},"SrcPortStart":{"description":"源端口范围的开始值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"0"},"SrcPortEnd":{"description":"源端口范围的结束值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"65535"},"DstPortStart":{"description":"目的端口范围的起始值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"0"},"DstPortEnd":{"description":"目的端口范围的结束值。取值范围：**0**~**65535**。","type":"integer","format":"int32","required":true,"maximum":"65535","minimum":"0","example":"65535"},"MinPktLen":{"description":"最小包长，取值范围：**1**~**1500**。","type":"integer","format":"int32","required":true,"maximum":"1500","minimum":"0","example":"1"},"MaxPktLen":{"description":"最大包长，取值范围：**1**~**1500**。","type":"integer","format":"int32","required":true,"maximum":"1500","minimum":"0","example":"1500"},"Offset":{"description":"偏移量，取值范围：**0**~**1500**。","type":"integer","format":"int32","required":false,"maximum":"1500","minimum":"0","example":"0"},"PayloadBytes":{"description":"检测载荷。使用十六进制字符串格式表示。","type":"string","required":false,"example":"abcd","maxLength":32,"minLength":2,"pattern":"^([0-9a-fA-f]{2}){1,15}$"},"MatchAction":{"description":"匹配动作。取值：\n\n- **accept**：表示放行满足指纹特征的流量。\n- **drop**：表示丢弃满足指纹特征的流量。\n- **ip_rate**：表示对满足指纹特征的流量来源IP进行访问限速。限速值通过**RateValue**参数设置。\n- **session_rate**：表示对满足指纹特征的流量来源会话进行访问限速。限速值通过**RateValue**参数设置。","type":"string","required":true,"example":"drop","enum":["drop","accept","ip_rate","session_rate"]},"RateValue":{"description":"限速值。取值范围：**1**~**100000**。\n\n> 匹配后动作为源IP限速或者源Session限速时（**MacthAction**为**ip_rate**或**session_rate**），必须填写该参数。","type":"integer","format":"int32","required":false,"maximum":"100000","minimum":"1","example":"100"},"SeqNo":{"description":"生效顺序号，使用整数表示。\n>数字越小，越靠前生效。","type":"integer","format":"int32","required":true,"maximum":"100","minimum":"1","example":"1"}},"required":false},"required":false},"EnableL4Defense":{"description":"是否开启端口防护。","type":"boolean","required":false},"L4RuleList":{"description":"端口防护规则列表。","type":"array","items":{"type":"object","properties":{"Name":{"description":"规则名称。","type":"string","required":true,"example":"test****","maxLength":32,"minLength":1},"Priority":{"description":"规则优先级。取值范围：**1**~**100**。\n\n> 数字越小，优先级越高。","type":"integer","format":"int32","required":true,"maximum":"100","minimum":"1","example":"1"},"Method":{"description":"规则类型。取值：\n\n- **char**：表示字符串匹配。\n\n- **hex**：表示十六进制匹配。","type":"string","required":true,"example":"char","enum":["hex","char"]},"Match":{"description":"逻辑符。取值：\n\n- **0**：表示命中执行动作。\n\n- **1**：表示未命中执行动作。","type":"string","required":true,"example":"0","enum":["0","1"]},"Action":{"description":"动作。取值：\n\n- **2**： 表示丢弃。","type":"string","required":true,"example":"2","enum":["1","2"]},"Limited":{"description":"会话流启动规则匹配的最小字节数，取值范围：**0**~**2048**","type":"integer","format":"int32","required":true,"maximum":"2048","exclusiveMaximum":true,"minimum":"0","example":"0"},"ConditionList":{"description":"检测条件列表。","type":"array","items":{"type":"object","properties":{"Arg":{"description":"检测内容。\n> 规则类型为**char**，必须为ASCII字符串；规则类型为**hex**，必须为十六进制字符串。最大长度2048。","type":"string","required":true,"example":"abcd","maxLength":4096,"minLength":1},"Position":{"description":"检测起始位置。取值范围：**0**~**2047**。","type":"integer","format":"int32","required":true,"maximum":"2047","minimum":"0","example":"0"},"Depth":{"description":"检测窗口长度，取值范围：**1**~**2048**。","type":"integer","format":"int32","required":true,"maximum":"2048","minimum":"1","example":"1200"}},"required":false},"required":true,"maxItems":5,"minItems":1}},"required":false},"required":false},"WhiteIpList":{"description":"IP白名单列表。","type":"array","items":{"description":"IP白名单。","type":"string","required":false,"example":"1.1.1.*"},"required":false,"maxItems":2000,"minItems":1},"BlackIpList":{"description":"IP黑名单列表。","type":"array","items":{"description":"IP黑名单。","type":"string","required":false,"example":"2.2.2.*"},"required":false,"maxItems":2000,"minItems":1}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"本次调用请求的 ID，是由阿里云为该请求生成的唯一标识符，可用于排查和定位问题。","type":"string","example":"B4B379C2-9319-4C6B-B579-FE36831****"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B4B379C2-9319-4C6B-B579-FE36831****\\\"\\n}\",\"type\":\"json\"}]","title":"修改防护策略"}