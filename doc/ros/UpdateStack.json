{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"12722","abilityTreeNodes":["FEATURErosZVIFJW"]},"parameters":[{"name":"StackId","in":"query","schema":{"description":"资源栈ID。","type":"string","required":true,"docRequired":true,"example":"4a6c9851-3b0f-4f5f-b4ca-a14bf691****"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。此参数值由客户端生成，并且必须全局唯一。  \n长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。  \n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"docRequired":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"StackPolicyDuringUpdateBody","in":"query","schema":{"description":"临时覆盖资源栈策略主体的结构。长度为1~16,384个字节。  \n如果要更新受保护的资源，请在更新期间指定临时覆盖资源栈策略。如果未指定资源栈策略，将使用与资源栈关联的当前策略。  \n此参数仅在更改集类型为UPDATE时生效。您只能指定以下参数之一：\n- StackPolicyBody\n- StackPolicyURL\n- StackPolicyDuringUpdateBody\n- StackPolicyDuringUpdateURL","type":"string","required":false,"docRequired":false,"example":"{\"Statement\": [{\"Effect\": \"Allow\", \"Action\": \"Update:*\", \"Principal\": \"*\", \"Resource\": \"*\"}]}"}},{"name":"TimeoutInMinutes","in":"query","schema":{"description":"更新资源栈的超时时间。  \n  \n- 默认值：60。\n\n- 单位：分钟。\n\n","type":"integer","format":"int64","required":false,"docRequired":false,"example":"10"}},{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。 如果长度较大，则建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免URL过长而导致请求失败。 \n> 您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"{\"ROSTemplateFormatVersion\": \"2015-09-01\"}"}},{"name":"StackPolicyURL","in":"query","schema":{"description":"包含资源栈策略的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/stack-policy/demo、oss://ros/stack-policy/demo?RegionId=cn-hangzhou）的策略，策略的文件最大值为16,384个字节。如未指定OSS地域，默认与接口参数RegionId相同。   \n\n> 您仅能指定StackPolicyBody或StackPolicyURL其中一个参数。\n  \nURL最大长度为1350个字节。","type":"string","required":false,"docRequired":false,"example":"oss://ros-stack-policy/demo"}},{"name":"StackPolicyDuringUpdateURL","in":"query","schema":{"description":"更新资源栈策略的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/stack-policy/demo、oss://ros/stack-policy/demo?RegionId=cn-hangzhou）中的策略，策略的文件最大值为16,384个字节。  \n\n>  如未指定OSS地域，默认与接口参数RegionId相同。     \n  \nURL最大长度为1350个字节。\n\n如果要更新受保护的资源，请在更新期间指定临时覆盖资源栈策略。如果未指定资源栈策略，则将使用与资源栈关联的当前策略。此参数仅在更改集类型为UPDATE时生效。您只能指定以下参数之一：\n- StackPolicyBody\n- StackPolicyURL\n- StackPolicyDuringUpdateBody\n- StackPolicyDuringUpdateURL","type":"string","required":false,"docRequired":false,"example":"oss://ros-stack-policy/demo"}},{"name":"StackPolicyBody","in":"query","schema":{"description":"资源栈策略主体的结构，长度为1~16,384个字节。  \n\n> 您仅能指定StackPolicyBody或StackPolicyURL其中一个参数。","type":"string","required":false,"docRequired":false,"example":"{\"Statement\": [{\"Action\": \"Update:*\", \"Resource\": \"*\", \"Effect\": \"Allow\", \"Principal\": \"*\"}]}"}},{"name":"UsePreviousParameters","in":"query","schema":{"description":"未传递的参数是否使用上次传递的值。\n\n取值：  \n\n- true：未传递的参数使用上次传递的值。\n\n- false：未传递的参数不使用上次传递的值。","type":"boolean","required":false,"docRequired":false,"example":"true"}},{"name":"RegionId","in":"query","schema":{"description":"资源栈所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-beijing"}},{"name":"DisableRollback","in":"query","schema":{"description":"资源栈更新失败时，是否强制回滚。\n\n取值：  \n\n- true：强制回滚。\n\n- false（默认值）：不强制回滚。","type":"boolean","deprecated":true,"required":false,"docRequired":false,"example":"false"}},{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于HTTP Web服务器（HTTP或HTTPS）或阿里云OSS存储空间中的模板（1~524,288个字节）。OSS存储空间的URL，例如oss://ros/template/demo或oss://ros/template/demo?RegionId=cn-hangzhou。如未指定OSS地域，默认与接口参数RegionId相同。\n\n> 您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"oss://ros-template/demo"}},{"name":"RamRoleName","in":"query","schema":{"description":"RAM角色名称。ROS会扮演该角色创建资源栈，使用角色的凭证代表用户进行接口调用。   \nROS始终将此角色用于资源栈上将进行的操作。只要用户有权在资源栈上进行操作，即使用户无权使用角色，ROS也会使用此角色，确保角色授予最少的权限。关于如何使用RAM角色，请参见[使用资源栈角色](~~2568025~~)。  \n如果用户未指定该值，ROS将使用以前与资源栈关联的角色。如果没有可用角色，ROS将使用从您的用户凭证中生成的临时凭证。  \nRAM角色名称最大长度为64个字节。","type":"string","required":false,"example":"test-role"}},{"name":"ReplacementOption","in":"query","schema":{"description":"是否使用替换更新。当资源属性不支持修改更新时，可以使用替换更新改变资源属性。替换更新会删除资源后重新创建资源，新资源物理ID会发生变化。\n\n取值：\n- Enabled：允许替换更新。\n- Disabled（默认）：不允许替换更新。\n\n> 修改更新的优先级高于替换更新。\n\n","type":"string","required":false,"example":"Disabled"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。\n\n> 您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数的名称。如果未指定参数的名称和取值，ROS将使用模板中指定的默认值。  \nN的最大值为200。  \n\n> Parameters为可选参数。如果需要指定Parameters，则Parameters.N.ParameterKey和Parameters.N.ParameterValue必须同时指定。","type":"string","required":true,"example":"Amount"},"ParameterValue":{"description":"参数值。N的最大值为200。  \n\n> Parameters为可选参数。如果需要指定Parameters，则Parameters.N.ParameterKey和Parameters.N.ParameterValue必须同时指定。","type":"string","required":true,"example":"12"}},"required":false},"required":false,"maxItems":200}},{"name":"Tags","in":"query","style":"repeatList","schema":{"description":"资源栈的标签。","type":"array","items":{"type":"object","properties":{"Key":{"description":"资源栈的标签键。  \nN的取值范围为1~20。   \n\n> Tags为可选参数。如果需要指定Tags，则Tags.N.Key必须指定。- 此标签会传递到资源栈中每个支持标签的资源中。更多信息，请参见[标签传递](~~201421~~)。","type":"string","required":true,"example":"usage"},"Value":{"description":"资源栈的标签值。  \nN的取值范围为1~20。\n\n> 此标签会传递到资源栈中每个支持标签的资源中。更多信息，请参见[标签传递](~~201421~~)。","type":"string","required":false,"example":"test"}},"required":false},"required":false,"maxItems":20}},{"name":"Parallelism","in":"query","schema":{"description":"资源最大并发数。\n\n默认为空，用户可以输入大于等于零的整数。\n\n> - 若设置为大于零的整数，则使用该整数。  \n>- 若设置为零，对于ROS类型资源栈不限制，Terraform类型资源栈使用Terraform默认值（通常为10）。\n>- 若不设置，则使用上次操作时的设置；若上次操作时未设置，对于ROS类型资源栈不限制，Terraform类型资源栈使用Terraform默认值（通常为10）。\n>- 若设置了该值，将与资源栈进行关联，影响资源栈的后续操作。","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-acfmxazb4ph6aiy****"}},{"name":"DryRun","in":"query","schema":{"description":"此次请求是否只进行检验。取值：\n\n- true：只做校验，不会实际执行。\n- false（默认）：会实际执行，更新资源栈。\n\n> 更新资源栈时，若没有改动：DryRun为false时，会报错，错误码为NotSupported；DryRun为true时，不会报错。","type":"boolean","required":false,"example":"false"}},{"name":"DryRunOptions","in":"query","style":"repeatList","schema":{"description":"校验选项列表。列表最大长度为1。\n> 仅在DryRun为true时生效。","type":"array","items":{"description":"校验选项。取值：\n\n- ParameterAnalysis.ConsiderCondition：参数分析时，考虑条件的影响。如果需要进行参数分析，建议使用该选项。否则，条件会进行计算，计算时涉及的参数的取值为资源栈更新前参数的值。\n> 该选项仅对ROS类型资源栈生效。\n\n- ParameterAnalysis.Disabled：禁用参数分析。设置该选项后在DryRunResult中不会返回Parameters*字段。","type":"string","required":false,"example":"ParameterAnalysis.ConsiderCondition"},"required":false,"maxItems":1}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B288A0BE-D927-4888-B0F7-B35EF84B6E6F"},"StackId":{"description":"资源栈ID。","type":"string","example":"4a6c9851-3b0f-4f5f-b4ca-a14bf691****"},"DryRunResult":{"description":"校验结果。仅在DryRun为true时返回。","type":"object","properties":{"ParametersAllowedToBeModified":{"description":"允许修改的参数。","type":"array","items":{"description":"允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值，修改该参数不会引发校验错误。","type":"string","example":"param1"}},"ParametersConditionallyAllowedToBeModified":{"description":"可能允许修改的参数。","type":"array","items":{"description":"可能允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值，修改该参数是否引发校验错误，取决于参数的取值。","type":"string","example":"param2"}},"ParametersUncertainlyAllowedToBeModified":{"description":"不确定是否允许修改的参数。","type":"array","items":{"description":"不确定是否允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定修改该参数是否会引发校验错误。","type":"string","example":"param3"}},"ParametersNotAllowedToBeModified":{"description":"不允许修改的参数。","type":"array","items":{"description":"不允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发校验错误。","type":"string","example":"param4"}},"ParametersCauseInterruptionIfModified":{"description":"一定会引发资源中断的参数的列表。\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"一定会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发资源中断。","type":"string","example":"param1"}},"ParametersConditionallyCauseInterruptionIfModified":{"description":"可能会引发资源中断的参数的列表。\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"可能会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值，修改该参数可能会引发资源中断，取决于参数的取值和资源的更新行为。","type":"string","example":"param2"}},"ParametersUncertainlyCauseInterruptionIfModified":{"description":"不确定是否会引发资源中断的参数的列表。\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"不确定是否会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定该参数是否会引发资源中断。","type":"string","example":"param3"}},"ParametersCauseReplacementIfModified":{"description":"一定会引发资源替换更新的参数的列表。\n\n> - 仅在ReplacementOption为Enabled时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"一定会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发资源替换更新。","type":"string","example":"param5"}},"ParametersConditionallyCauseReplacementIfModified":{"description":"可能会引发资源替换更新的参数的列表。\n> - 仅在ReplacementOption为Enabled时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"可能会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值可能会引发资源替换更新，取决于参数的取值。","type":"string","example":"param6"}},"ParametersUncertainlyCauseReplacementIfModified":{"description":"不确定是否会引发资源替换更新的参数的列表。\n\n> - 仅在ReplacementOption为Enabled时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"不确定是否会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定该参数是否会引发资源替换更新。","type":"string","example":"param7"}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B288A0BE-D927-4888-B0F7-B35EF84B6E6F\\\",\\n  \\\"StackId\\\": \\\"4a6c9851-3b0f-4f5f-b4ca-a14bf691****\\\",\\n  \\\"DryRunResult\\\": {\\n    \\\"ParametersAllowedToBeModified\\\": [\\n      \\\"param1\\\"\\n    ],\\n    \\\"ParametersConditionallyAllowedToBeModified\\\": [\\n      \\\"param2\\\"\\n    ],\\n    \\\"ParametersUncertainlyAllowedToBeModified\\\": [\\n      \\\"param3\\\"\\n    ],\\n    \\\"ParametersNotAllowedToBeModified\\\": [\\n      \\\"param4\\\"\\n    ],\\n    \\\"ParametersCauseInterruptionIfModified\\\": [\\n      \\\"param1\\\"\\n    ],\\n    \\\"ParametersConditionallyCauseInterruptionIfModified\\\": [\\n      \\\"param2\\\"\\n    ],\\n    \\\"ParametersUncertainlyCauseInterruptionIfModified\\\": [\\n      \\\"param3\\\"\\n    ],\\n    \\\"ParametersCauseReplacementIfModified\\\": [\\n      \\\"param5\\\"\\n    ],\\n    \\\"ParametersConditionallyCauseReplacementIfModified\\\": [\\n      \\\"param6\\\"\\n    ],\\n    \\\"ParametersUncertainlyCauseReplacementIfModified\\\": [\\n      \\\"param7\\\"\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateStackResponse>\\n    <StackId>4a6c9851-3b0f-4f5f-b4ca-a14bf691****</StackId>\\n    <RequestId>B288A0BE-D927-4888-B0F7-B35EF84B6E6F</RequestId>\\n</UpdateStackResponse>\\n\",\"errorExample\":\"\"}]","title":"更新资源栈","summary":"更新已创建资源栈的资源信息。","description":"请求中Parameters和UsePreviousParameters取值相关。若Parameters中未指定模板中定义的参数：  \n\n- 当UsePreviousParameters取值为false时：如果模板中参数有默认值，则使用默认值；如果模板中参数没有默认值，则需要在Parameters中指定该参数。  \n\n- 当UsePreviousParameters取值为true时：如果创建资源栈时指定了该参数，则使用指定值；如果创建资源栈时未指定该参数，参数在模板中有默认值，则使用默认值。  \n\n  \n本文将提供一个示例，将北京地域ID为`4a6c9851-3b0f-4f5f-b4ca-a14bf691****`的资源栈的模板内容更新为`{\"ROSTemplateFormatVersion\": \"2015-09-01\"}`。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":" ","extraInfo":"| HttpCode | 错误码 | 错误信息 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| 400 | CircularDependency | Circular Dependency Found: {reason}. |模板包含循环引用。reason为具体原因。 |\n| 400 | InvalidSchema | {reason}. | 模板格式不正确。reason为具体原因。 |\n| 400 | InvalidTemplateAttribute | The Referenced Attribute ({resource} {name}) is incorrect. |模板包含不正确的资源属性（输出）引用。resource为资源名，name为属性名。 |\n| 400 | InvalidTemplatePropertyType | The specified value type of ({resource} {section}) is incorrect. |模板字段定义的资源类型不正确。resource为资源名，section为字段名。 |\n| 400 | InvalidTemplateReference | The specified reference \"{name}\" (in {referencer}) is incorrect. |模板包含不正确的引用。name为引用名，referencer为引用者。 |\n| 400 | InvalidTemplateSection | The template section is invalid: {section}. |模板包含无效的字段。section为字段名。 |\n| 400 | InvalidTemplateVersion | The template version is invalid: {reason}. |模板版本不正确。reason为具体原因。 |\n| 400 | StackPolicyValidationFailed | Action denied by stack policy: {reason}. |未通过资源栈策略校验。reason为具体原因。 |\n| 400 | StackValidationFailed | {reason}. |资源栈校验失败。reason为具体原因。 |\n| 400 | UnknownUserParameter | The Parameter ({name}) was not defined in template. |传递的参数在模板中未定义。name为参数名。 |\n| 400 | UserParameterMissing | The Parameter {name} was not provided. |参数在模板中已定义，但未传递值。name为参数名。 |\n| 404 | StackNotFound | The Stack ({name}) could not be found. |资源栈不存在。name为资源栈名称或ID。 |\n| 409 | ActionInProgress | Stack {name} already has an action ({action}) in progress. |资源栈在变更中。name为资源栈名称或ID，action为具体的变更操作。 |\n| 404 | TemplateNotFound |The Tempalte ({ ID }) could not be found. |模板不存在。ID为模板ID。 |\n| 404 | TemplateNotFound |The Template { ID } with version { version } could not be found. |模板或指定版本不存在。ID为模板ID，version为模板版本。 |"}