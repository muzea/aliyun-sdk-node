{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"DisableRollback","in":"query","schema":{"description":"当创建资源栈失败时，是否禁用回滚。取值：\n\n- true：禁用回滚，即当创建资源栈失败时不进行回滚。\n- false（默认值）：不禁用回滚，即当创建资源栈失败时进行回滚。\n","type":"boolean","required":false,"docRequired":false,"example":"false"}},{"name":"TimeoutInMinutes","in":"query","schema":{"description":"创建资源栈的超时时间。\n\n单位：分钟。\n\n默认值：60。","type":"integer","format":"int64","required":false,"docRequired":false,"example":"60"}},{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。如果长度较长，则建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免因URL过长而导致请求失败。 \n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"{\"ROSTemplateFormatVersion\":\"2015-09-01\"}"}},{"name":"StackPolicyURL","in":"query","schema":{"description":"包含资源栈策略的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/stack-policy/demo、oss://ros/stack-policy/demo?RegionId=cn-hangzhou）中的策略，策略文件最大长度为16,384个字节。如未指定OSS地域，默认与RegionId取值相同。 \n\n> 您仅能指定StackPolicyBody和StackPolicyURL其中一个参数。  \n  \nURL最大长度为1350个字节。","type":"string","required":false,"docRequired":false,"example":"oss://ros-stack-policy/demo"}},{"name":"RegionId","in":"query","schema":{"description":"资源栈所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"StackPolicyBody","in":"query","schema":{"description":"包含资源栈策略主体的结构，长度为1~16,384个字节。  \n\n> 您仅能指定StackPolicyBody和StackPolicyURL其中一个参数。  ","type":"string","required":false,"docRequired":false,"example":"{\"Statement\": [{\"Action\": \"Update:*\", \"Resource\": \"*\", \"Effect\": \"Allow\", \"Principal\": \"*\"}]}"}},{"name":"StackName","in":"query","schema":{"description":"资源栈名称。预览创建资源栈。\n长度不超过255个字符，必须以数字或英文字母开头，可包含数字、英文字母、短划线（-）和下划线（_）。\n> 您必须且仅能指定StackName或StackId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"MyStack"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。该值由客户端生成，并且必须是全局唯一的。   \n长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。   \n更多详情，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"docRequired":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/stack-policy/demo、oss://ros/stack-policy/demo?RegionId=cn-hangzhou）中的模板，模板的最大长度为524,288个字节。如未指定OSS地域，默认与RegionId取值相同。 \n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"oss://ros-template/demo"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数名称。如果未指定参数名称和参数值，ROS将使用模板中指定的默认值。N的最大值为200。  \n\n> 若指定了Parameters，则Parameters.N.ParameterKey为必选参数。","type":"string","required":true,"example":"ALIYUN::AccountId"},"ParameterValue":{"description":"参数值。N的最大值为200。  \n\n> 若指定了Parameters，则Parameters.N.ParameterValue为必选参数。","type":"string","required":true,"example":"151266687691****"}},"required":false},"required":false,"maxItems":200}},{"name":"Parallelism","in":"query","schema":{"description":"资源最大并发数。仅对Terraform类型资源栈生效。\n\n默认为空，用户可以输入大于等于零的整数。\n\n>若设置为大于零的整数，则使用该整数；若设置为零或者不设置，则使用Terraform默认值（通常为10）。  \n","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"TemplateScratchId","in":"query","schema":{"description":"资源场景ID。\n\n关于如何获取资源场景ID，请参见[ListTemplateScratches](~~363050~~)。\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"example":"ts-aa9c62feab844a6b****"}},{"name":"TemplateScratchRegionId","in":"query","schema":{"description":"资源场景所属的地域ID，默认与RegionId取值相同。\n\n您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"StackId","in":"query","schema":{"description":"资源栈ID。预览更新资源栈。\n\n> - 您必须且仅能指定StackName或StackId其中一个参数。\n> -  预览创建或更新资源栈的场景中不支持预览嵌套资源栈中的资源。","type":"string","required":false,"example":"4a6c9851-3b0f-4f5f-b4ca-a14bf691****"}},{"name":"EnablePreConfig","in":"query","schema":{"description":"是否获取合规预检参数。\n\n取值：\n\n- true：获取合规预检参数。\n\n- false（默认值）：不获取合规预检参数。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"headers":{},"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B288A0BE-D927-4888-B0F7-B35EF84B6E6F"},"Stack":{"description":"资源栈预览数据。","type":"object","properties":{"TemplateDescription":{"description":"模板描述。","type":"string","example":"One ECS instance."},"Parameters":{"description":"资源栈参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数名称。","type":"string","example":"ALIYUN::AccountId"},"ParameterValue":{"description":"参数值。","type":"string","example":"151266687691****"}}}},"Description":{"description":"资源栈描述。","type":"string","example":"One ECS instance."},"DisableRollback":{"description":"是否禁用回滚。","type":"boolean","example":"false"},"StackName":{"description":"资源栈名称。","type":"string","example":"MyStack"},"TimeoutInMinutes":{"description":"超时时间。\n\n单位：分钟。","type":"integer","format":"int32","example":"60"},"StackPolicyBody":{"description":"资源栈策略内容。","type":"object","example":"{   \"Statement\": [     {       \"Action\": \"Update:*\",       \"Resource\": \"*\",       \"Effect\": \"Allow\",       \"Principal\": \"*\"     },     {       \"Action\": \"Update:*\",       \"Resource\": \"LogicalResourceId/apple1\",       \"Effect\": \"Deny\",       \"Principal\": \"*\"     }   ] }"},"Resources":{"description":"资源栈中的资源列表。","type":"array","items":{"type":"object","properties":{"LogicalResourceId":{"description":"资源逻辑ID。","type":"string","example":"WebServer"},"AcsResourceType":{"description":"ACS资源类型。","type":"string","example":"ACS::ECS::Instance"},"ResourceType":{"description":"资源类型。","type":"string","example":"ALIYUN::ECS::Instance"},"Description":{"description":"资源描述。","type":"string","example":"ECS instance."},"Stack":{"description":"子资源栈信息。数据结构同整个返回值。","type":"object","example":"{}"},"RequiredBy":{"description":"资源栈依赖的资源。","type":"array","items":{"description":"资源栈依赖的资源。","type":"string","example":"[\"Resource1\", \"Resource2\"]"}},"Properties":{"description":"资源属性。","type":"object","example":"{   \"DiskMappings\": [     {       \"Category\": \"cloud_ssd\",       \"Size\": \"20\"     }   ],   \"SystemDisk_Category\": \"cloud_ssd\",   \"InstanceChargeType\": \"PostPaid\",   \"AutoRenew\": \"False\",   \"WillReplace\": true,   \"ImageId\": \"centos_7\",   \"InstanceType\": \"ecs.g6.large\",   \"AllocatePublicIP\": true,   \"AutoRenewPeriod\": 1,   \"IoOptimized\": \"optimized\",   \"ZoneId\": \"cn-beijing-g\",   \"VSwitchId\": \"\",   \"SecurityGroupId\": \"\",   \"Period\": 1,   \"InternetChargeType\": \"PayByTraffic\",   \"SystemDiskCategory\": \"cloud_efficiency\",   \"InternetMaxBandwidthOut\": 1,   \"VpcId\": \"\",   \"InternetMaxBandwidthIn\": 200,   \"PeriodUnit\": \"Month\" }"},"Action":{"description":"资源行为。取值：\n- Add：增加资源。\n- Modify：修改资源。\n- Remove：删除资源。\n- None：无变化。","type":"string","example":"Add"},"Replacement":{"description":"模板是否为替换更新。取值：\n- True：替换更新。\n- False：修改更新。\n- Conditional：可能是替换更新，模板运行时才能确定。\n\n> 仅当Action取值为Modify时，返回本参数。","type":"string","example":"False"},"PhysicalResourceId":{"description":"资源物理ID。\n\n当Action为Modify或Remove时，返回本参数。","type":"string","example":"i-a1b2c3***"}}}},"RegionId":{"description":"资源栈所在地域。","type":"string","example":"cn-hangzhou"},"Log":{"description":"资源栈相关输出日志。","type":"object","properties":{"TerraformLogs":{"description":"Terraform输出日志。仅Terraform类型资源栈返回该参数。\n\n> 该参数表示预览资源栈的日志。","type":"array","items":{"type":"object","properties":{"Command":{"description":"执行的Terraform命令名称。取值：\n\n- apply\n\n- plan\n\n- destroy\n\n- version\n\n关于命令含义的更多信息，请参见[Command](https://www.terraform.io/cli/commands)。","type":"string","example":"apply"},"Stream":{"description":"输出流。取值：\n\n- stdout：标准输出。\n\n- stderr：标准错误。","type":"string","example":"stdout"},"Content":{"description":"当前命令在当前输出流中输出的内容。","type":"string","example":"Apply complete! Resources: 42 added, 0 changed, 0 destroyed."}}}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B288A0BE-D927-4888-B0F7-B35EF84B6E6F\\\",\\n  \\\"Stack\\\": {\\n    \\\"TemplateDescription\\\": \\\"One ECS instance.\\\",\\n    \\\"Parameters\\\": [\\n      {\\n        \\\"ParameterKey\\\": \\\"ALIYUN::AccountId\\\",\\n        \\\"ParameterValue\\\": \\\"151266687691****\\\"\\n      }\\n    ],\\n    \\\"Description\\\": \\\"One ECS instance.\\\",\\n    \\\"DisableRollback\\\": false,\\n    \\\"StackName\\\": \\\"MyStack\\\",\\n    \\\"TimeoutInMinutes\\\": 60,\\n    \\\"StackPolicyBody\\\": {\\n      \\\"Statement\\\": [\\n        {\\n          \\\"Action\\\": \\\"Update:*\\\",\\n          \\\"Resource\\\": \\\"*\\\",\\n          \\\"Effect\\\": \\\"Allow\\\",\\n          \\\"Principal\\\": \\\"*\\\"\\n        },\\n        {\\n          \\\"Action\\\": \\\"Update:*\\\",\\n          \\\"Resource\\\": \\\"LogicalResourceId/apple1\\\",\\n          \\\"Effect\\\": \\\"Deny\\\",\\n          \\\"Principal\\\": \\\"*\\\"\\n        }\\n      ]\\n    },\\n    \\\"Resources\\\": [\\n      {\\n        \\\"LogicalResourceId\\\": \\\"WebServer\\\",\\n        \\\"AcsResourceType\\\": \\\"ACS::ECS::Instance\\\",\\n        \\\"ResourceType\\\": \\\"ALIYUN::ECS::Instance\\\",\\n        \\\"Description\\\": \\\"ECS instance.\\\",\\n        \\\"Stack\\\": {},\\n        \\\"RequiredBy\\\": [\\n          \\\"[\\\\\\\"Resource1\\\\\\\", \\\\\\\"Resource2\\\\\\\"]\\\"\\n        ],\\n        \\\"Properties\\\": {\\n          \\\"DiskMappings\\\": [\\n            {\\n              \\\"Category\\\": \\\"cloud_ssd\\\",\\n              \\\"Size\\\": \\\"20\\\"\\n            }\\n          ],\\n          \\\"SystemDisk_Category\\\": \\\"cloud_ssd\\\",\\n          \\\"InstanceChargeType\\\": \\\"PostPaid\\\",\\n          \\\"AutoRenew\\\": \\\"False\\\",\\n          \\\"WillReplace\\\": true,\\n          \\\"ImageId\\\": \\\"centos_7\\\",\\n          \\\"InstanceType\\\": \\\"ecs.g6.large\\\",\\n          \\\"AllocatePublicIP\\\": true,\\n          \\\"AutoRenewPeriod\\\": 1,\\n          \\\"IoOptimized\\\": \\\"optimized\\\",\\n          \\\"ZoneId\\\": \\\"cn-beijing-g\\\",\\n          \\\"VSwitchId\\\": \\\"\\\",\\n          \\\"SecurityGroupId\\\": \\\"\\\",\\n          \\\"Period\\\": 1,\\n          \\\"InternetChargeType\\\": \\\"PayByTraffic\\\",\\n          \\\"SystemDiskCategory\\\": \\\"cloud_efficiency\\\",\\n          \\\"InternetMaxBandwidthOut\\\": 1,\\n          \\\"VpcId\\\": \\\"\\\",\\n          \\\"InternetMaxBandwidthIn\\\": 200,\\n          \\\"PeriodUnit\\\": \\\"Month\\\"\\n        },\\n        \\\"Action\\\": \\\"Add\\\",\\n        \\\"Replacement\\\": \\\"False\\\",\\n        \\\"PhysicalResourceId\\\": \\\"i-a1b2c3***\\\"\\n      }\\n    ],\\n    \\\"RegionId\\\": \\\"cn-hangzhou\\\",\\n    \\\"Log\\\": {\\n      \\\"TerraformLogs\\\": [\\n        {\\n          \\\"Command\\\": \\\"apply\\\",\\n          \\\"Stream\\\": \\\"stdout\\\",\\n          \\\"Content\\\": \\\"Apply complete! Resources: 42 added, 0 changed, 0 destroyed.\\\"\\n        }\\n      ]\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<PreviewStackResponse>\\n    <RequestId>B288A0BE-D927-4888-B0F7-B35EF84B6E6F</RequestId>\\n    <Stack>\\n        <TemplateDescription>One ECS instance.</TemplateDescription>\\n        <Parameters>\\n            <ParameterKey>ALIYUN::AccountId</ParameterKey>\\n            <ParameterValue>151266687691****</ParameterValue>\\n        </Parameters>\\n        <Description>One ECS instance.</Description>\\n        <DisableRollback>false</DisableRollback>\\n        <StackName>MyStack</StackName>\\n        <TimeoutInMinutes>60</TimeoutInMinutes>\\n        <Resources>\\n            <LogicalResourceId>WebServer</LogicalResourceId>\\n            <AcsResourceType>ACS::ECS::Instance</AcsResourceType>\\n            <ResourceType>ALIYUN::ECS::Instance</ResourceType>\\n            <Description>ECS instance.</Description>\\n            <RequiredBy>[\\\"Resource1\\\", \\\"Resource2\\\"]</RequiredBy>\\n            <Action>Add</Action>\\n            <Replacement>False</Replacement>\\n        </Resources>\\n        <RegionId>cn-hangzhou</RegionId>\\n        <Log>\\n            <TerraformLogs>\\n                <Command>apply</Command>\\n                <Stream>stdout</Stream>\\n                <Content>Apply complete! Resources: 42 added, 0 changed, 0 destroyed.</Content>\\n            </TerraformLogs>\\n        </Log>\\n    </Stack>\\n</PreviewStackResponse>\",\"errorExample\":\"\"}]","title":"预览指定模板将要创建的资源栈信息","summary":"预览指定模板将要创建的资源栈信息，验证模板资源的准确性。","description":"本文将提供一个示例，在杭州地域创建并预览一个名为`MyStack`的资源栈，该资源栈的模板`TemplateBody`设置为`{\"ROSTemplateFormatVersion\":\"2015-09-01\"}`。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":" ","extraInfo":" 访问[公共错误码](~~131033~~)查看更多错误码。\n| HttpCode | 错误码 | 错误信息 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| 400 |  CircularDependency |Circular Dependency Found: {reason}. |模板包含循环引用。reason为具体原因。 |\n| 400 | InvalidSchema | {reason}. |模板格式不正确。reason为具体原因。 |\n| 400 | InvalidTemplateAttribute |The Referenced Attribute ({resource} {name}) is incorrect. |模板包含不正确的资源属性（输出）引用。resource为资源名，name为属性名。 |\n| 400 | InvalidTemplatePropertyType |The specified value type of ({resource} {section}) is incorrect. |模板资源定义中的字段类型不正确。resource为资源名，section为字段名。 |\n| 400 | InvalidTemplateReference |The specified reference \"{name}\" (in {referencer}) is incorrect. |模板包含不正确的引用。name为引用名，referencer为引用者。 |\n| 400 | InvalidTemplateSection |The template section is invalid: {section}. |模板包含无效的字段。section为字段名。 |\n| 400 | InvalidTemplateVersion |The template version is invalid: {reason}. |模板版本不正确。reason为具体原因。 |\n| 400 | StackValidationFailed | {reason}. |资源栈校验失败。reason为具体原因。 |\n| 400 | UnknownUserParameter |The Parameter ({name}) was not defined in template. |传递的参数在模板中未定义。name为参数名。 |\n| 400 | UserParameterMissing |The Parameter {name} was not provided. |参数在模板中已定义，但未传递值。name为参数名。 |\n| 409 | StackExists |The Stack ({name}) already exists. |同名资源栈已存在。name为资源栈名称。 |\n| 404 | TemplateNotFound |The Template ({ ID }) could not be found. |模板不存在。ID为模板ID。 |\n| 404 | TemplateNotFound |The Template { ID } with version { version } could not be found. |模板或指定版本不存在。ID为模板ID，version为模板版本。 |"}