{"summary":"调用GetTemplateParameterConstraints接口查询模板参数的取值。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。如果长度较长，则建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免因URL过长而导致请求失败。\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"{\n  \"ROSTemplateFormatVersion\": \"2015-09-01\",\n  \"Parameters\": {\n    \"ZoneInfo\": {\n      \"Type\": \"String\"\n    },\n    \"InstanceType\": {\n      \"Type\": \"String\"\n    }\n  },\n  \"Resources\": {\n    \"ECS\": {\n      \"Type\": \"ALIYUN::ECS::Instance\",\n      \"Properties\": {\n        \"ZoneId\": {\n          \"Ref\": \"ZoneInfo\"\n        },\n        \"InstanceType\": {\n          \"Ref\": \"InstanceType\"\n        }\n      }\n    }\n  }\n}"}},{"name":"RegionId","in":"query","schema":{"description":"地域ID。  \n您可以调用[DescribeRegions](~~131035~~)接口查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/template/demo或oss://ros/template/demo?RegionId=cn-hangzhou）中的模板，模板的最大长度为524,288个字节。如未指定OSS地域，默认与接口参数RegionId相同。\n> 您必须且仅能指定TemplateBody、TemplateURL和TemplateId其中一个参数。  ","type":"string","required":false,"docRequired":false,"example":"oss://ros-template/demo"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。  \n> 您必须且仅能指定TemplateBody、TemplateURL和TemplateId其中一个参数。  \n","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。如果不指定，默认取最新版本。  \n\n> TemplateVersion仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"模板中已定义的参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"模板中已定义的参数的名称。\n\n> Parameters为可选参数。若指定了Parameters，则ParameterKey为必选参数。","type":"string","required":true,"example":"ZoneInfo"},"ParameterValue":{"description":"模板中已定义的参数的取值。\n\n> Parameters为可选参数。若指定了Parameters，则ParameterValue为必选参数。","type":"string","required":true,"example":"cn-hangzhou-h"}},"required":false},"required":false,"maxItems":200}},{"name":"ParametersKeyFilter","in":"query","style":"json","schema":{"description":"需要查询的参数列表。","type":"array","items":{"description":"需要查询的参数。","type":"string","required":false,"example":"ZoneInfo"},"required":false,"docRequired":false,"maxItems":200,"minItems":1}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。\n该值由客户端生成，并且必须是全局唯一的。长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。\n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ParametersOrder","in":"query","style":"json","schema":{"description":"参数依赖关系。","type":"array","items":{"description":"参数依赖关系的顺序。\n\n> 默认按照模板中`Metadata`参数的依赖关系。","type":"string","required":false,"example":"[\"ZoneId\", \"InstanceType\"]"},"required":false,"maxItems":100,"minItems":0}},{"name":"StackId","in":"query","schema":{"description":"资源栈ID。\n\n当填写此参数时，表示查询变配场景的参数约束。","type":"string","required":false,"example":"c754d2a4-28f1-46df-b557-9586173a****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"9816785B-BCF8-514D-8B76-C1EC2BC954FC"},"ParameterConstraints":{"description":"参数约束信息。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数的名称。","type":"string","example":"ZoneInfo"},"Type":{"description":"参数的类型。","type":"string","example":"String"},"AllowedValues":{"description":"参数的取值列表。","type":"array","items":{"description":"参数的取值。","type":"string","example":"cn-hangzhou-h"}},"Behavior":{"description":"参数的行为。取值：\n\n- NoLimit：无限制，此参数没有取值限制。\n\n- NotSupport：不支持，此参数不支持查询取值。\n\n- QueryError：查询失败。\n\n> 当查询结果没有返回AllowedValues时，会额外返回Behavior和BehaviorReason，说明参数的行为和原因。","type":"string","example":"NoLimit"},"BehaviorReason":{"description":"参数行为出现的原因。","type":"string","example":"No resource property refer to the parameter"},"AssociationParameterNames":{"description":"关联参数列表。","type":"array","items":{"description":"关联参数名称的列表。","type":"string","example":"InstanceType"}},"IllegalValueByParameterConstraints":{"description":"不符合参数约束的值列表。\n\n> 当查询结果有返回AllowedValues时，会额外返回IllegalValueByParameterConstraints和IllegalValueByRules，说明被参数约束和模板规则过滤掉的不合法的值。","type":"array","items":{"description":"不符合参数约束的值。\n> 当查询结果返回`AllowedValues`时，会同时返回被参数约束和模板规则过滤掉的不合法的值`IllegalValueByParameterConstraints`和`IllegalValueByRules`。","type":"any","example":"cn-hangzhou-h"}},"IllegalValueByRules":{"description":"不符合模板规则的值列表。\n\n> 当查询结果有返回AllowedValues时，会额外返回IllegalValueByParameterConstraints和IllegalValueByRules，说明被参数约束和模板规则过滤掉的不合法的值。","type":"array","items":{"description":"不符合模板规则的值。\n> 当查询结果返回`AllowedValues`时，会同时返回被参数约束和模板规则过滤掉的不合法的值`IllegalValueByParameterConstraints`和`IllegalValueByRules`。","type":"any","example":"cn-hangzhou-h"}},"NotSupportResources":{"description":"不支持的资源详情。","type":"array","items":{"description":"不支持的资源详情。\n\n当`Behavior`取值为`NotSupport`时，返回该信息。","type":"object","properties":{"ResourceType":{"description":"资源类型。","type":"string","example":"ALIYUN::ECS::InstanceGroup"},"PropertyName":{"description":"资源属性名称。","type":"string","example":"InstanceName"}}}},"QueryErrors":{"description":"查询失败的详情。","type":"array","items":{"description":"查询失败的详情。\n\n当`Behavior`取值为`QueryError`时，返回该信息。","type":"object","properties":{"ErrorMessage":{"description":"错误详情。","type":"string","example":"ALIYUN::ECS::InstanceGroup"},"ResourceName":{"description":"资源名称。","type":"string","example":"MyECS"},"ResourceType":{"description":"资源类型。","type":"string","example":"InstanceType is needed while query DataDisk"}}}},"OriginalConstraints":{"description":"原始约束信息。","type":"array","items":{"description":"原始约束信息。","type":"object","properties":{"ResourceName":{"description":"模板中定义的资源名称。","type":"string","example":"MyECS"},"AllowedValues":{"description":"参数的取值列表。","type":"array","items":{"description":"参数的取值。","type":"any","example":"cn-hangzhou-a"}},"ResourceType":{"description":"资源类型。","type":"string","example":"ALIYUN::ECS::InstanceGroup\n"},"PropertyName":{"description":"属性名称。","type":"string","example":"ZoneId"}}}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"9816785B-BCF8-514D-8B76-C1EC2BC954FC\\\",\\n  \\\"ParameterConstraints\\\": [\\n    {\\n      \\\"ParameterKey\\\": \\\"ZoneInfo\\\",\\n      \\\"Type\\\": \\\"String\\\",\\n      \\\"AllowedValues\\\": [\\n        \\\"cn-hangzhou-h\\\"\\n      ],\\n      \\\"Behavior\\\": \\\"NoLimit\\\",\\n      \\\"BehaviorReason\\\": \\\"No resource property refer to the parameter\\\",\\n      \\\"AssociationParameterNames\\\": [\\n        \\\"InstanceType\\\"\\n      ],\\n      \\\"IllegalValueByParameterConstraints\\\": [\\n        \\\"cn-hangzhou-h\\\"\\n      ],\\n      \\\"IllegalValueByRules\\\": [\\n        \\\"cn-hangzhou-h\\\"\\n      ],\\n      \\\"NotSupportResources\\\": [\\n        {\\n          \\\"ResourceType\\\": \\\"ALIYUN::ECS::InstanceGroup\\\",\\n          \\\"PropertyName\\\": \\\"InstanceName\\\"\\n        }\\n      ],\\n      \\\"QueryErrors\\\": [\\n        {\\n          \\\"ErrorMessage\\\": \\\"ALIYUN::ECS::InstanceGroup\\\",\\n          \\\"ResourceName\\\": \\\"MyECS\\\",\\n          \\\"ResourceType\\\": \\\"InstanceType is needed while query DataDisk\\\"\\n        }\\n      ],\\n      \\\"OriginalConstraints\\\": [\\n        {\\n          \\\"ResourceName\\\": \\\"MyECS\\\",\\n          \\\"AllowedValues\\\": [\\n            \\\"cn-hangzhou-a\\\"\\n          ],\\n          \\\"ResourceType\\\": \\\"ALIYUN::ECS::InstanceGroup\\\\n\\\",\\n          \\\"PropertyName\\\": \\\"ZoneId\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetTemplateParameterConstraintsResponse>\\n    <RequestId>9816785B-BCF8-514D-8B76-C1EC2BC954FC</RequestId>\\n    <ParameterConstraints>\\n        <ParameterKey>ZoneInfo</ParameterKey>\\n        <Type>String</Type>\\n        <AllowedValues>cn-hangzhou-i</AllowedValues>\\n        <AllowedValues>cn-hangzhou-k</AllowedValues>\\n        <AllowedValues>cn-hangzhou-d</AllowedValues>\\n        <AssociationParameterNames>InstanceType</AssociationParameterNames>\\n        <IllegalValueByParameterConstraints>cn-hangzhou-h</IllegalValueByParameterConstraints>\\n        <IllegalValueByRules>cn-hangzhou-h</IllegalValueByRules>\\n    </ParameterConstraints>\\n</GetTemplateParameterConstraintsResponse>\",\"errorExample\":\"\"}]","title":"获取模版参数约束","description":"### 使用说明  \n\n本文将提供一个示例，查询杭州地域模板`{\n  \"ROSTemplateFormatVersion\": \"2015-09-01\",\n  \"Parameters\": {\n    \"ZoneInfo\": {\n      \"Type\": \"String\"\n    },\n    \"InstanceType\": {\n      \"Type\": \"String\"\n    }\n  },\n  \"Resources\": {\n    \"ECS\": {\n      \"Type\": \"ALIYUN::ECS::Instance\",\n      \"Properties\": {\n        \"ZoneId\": {\n          \"Ref\": \"ZoneInfo\"\n        },\n        \"InstanceType\": {\n          \"Ref\": \"InstanceType\"\n        }\n      }\n    }\n  }\n}`中参数`ZoneInfo`的取值。\n\n关于本接口支持查询的参数和模板内容，请参见[参数约束查询](~~432820~~)。"}