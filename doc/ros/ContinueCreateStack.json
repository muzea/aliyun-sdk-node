{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"StackId","in":"query","schema":{"description":"资源栈ID。","type":"string","required":true,"docRequired":true,"example":"4a6c9851-3b0f-4f5f-b4ca-a14bf691****"}},{"name":"RegionId","in":"query","schema":{"description":"资源栈所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"RamRoleName","in":"query","schema":{"description":"RAM角色名称。ROS会扮演该角色创建资源栈，使用角色的凭证代表用户进行接口调用。   \nROS始终将此角色用于资源栈上将进行的操作。只要用户有权在资源栈上进行操作，即使用户无权使用角色，ROS也会使用此角色，确保角色授予最少的权限。  \n如果用户未指定该值，ROS将使用以前与资源栈关联的角色。如果没有可用角色，ROS将使用从您的用户凭证中生成的临时凭证。  \nRAM角色名称最大长度为64个字节。","type":"string","required":false,"example":"test-role"}},{"name":"Mode","in":"query","schema":{"description":"继续创建模式，取值：\n- Recreate（默认值）：\n  \n  您仅需继续创建如下4类资源，其它资源无需继续创建：\n    - 创建失败的资源。\n    - 指定继续创建的资源（RecreatingResources.N）。\n    - 依赖于指定继续创建的资源（RecreatingResources.N）的资源。\n    - 未创建的资源。\n>RecreatingResources.N、TemplateBody、TemplateURL、Parameters参数仅在此模式下生效。\n\n- Ignore：\n  - 忽略并丢弃所有创建失败的资源、未创建的资源，直接把资源栈标记为成功。\n  - 模板内容会发生变化。\n>该模式仅ROS类型资源栈可用。","type":"string","required":false,"example":"Recreate"}},{"name":"TemplateBody","in":"query","schema":{"description":"模板的结构。长度为1~524288个字节。   \n如果长度较大，建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免URL过长而导致请求失败。   \n\nROS模板限制如下：\n- 只能修改模板的Description、Metadata、Resources、Outputs、Rules部分。\n- 不能增加或删除Section（模板内容的第一层）。\n- 模板的Resources部分限制如下：\n  - 对于不继续创建的资源，既不能删除，也不能修改其模板内容。\n  - 对于继续创建的资源，既可以删除，也可以修改其模板内容。\n  - 可以增加新资源。\n> - 该参数仅在Mode为Recreate时生效。  \n> - 您仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。若都不指定，则使用原有模板。","type":"string","required":false,"example":"{\"ROSTemplateFormatVersion\": \"2015-09-01\"}"}},{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储桶（例如：oss://ros/template/demo、oss://ros/template/demo?RegionId=cn-hangzhou）中的模板，模板最大为524288个字节。   \n\n如果OSS地域未指定，默认与接口参数RegionId相同。\n  \n> - 该参数仅在Mode为Recreate时生效，模板限制与TemplateBody相同。  \n> - 您仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。若都不指定，则使用原有模板。","type":"string","required":false,"example":"oss://ros-template/demo"}},{"name":"DryRun","in":"query","schema":{"description":"此次请求是否只进行检验。取值：\n\n- true：只做校验，不会实际执行。\n- false（默认）：会实际执行，继续创建资源栈。\n","type":"boolean","required":false,"example":"false"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。\n\n> - 当`Mode`取值为`Recreate`时，本参数生效。模板限制与`TemplateBody`相同。\n> - 您仅能指定`TemplateBody`、`TemplateURL`或`TemplateId`其中一个参数。若都不指定，则使用原有模板。","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"RecreatingResources","in":"query","style":"repeatList","schema":{"description":"创建失败的资源将会被继续创建。您可以指定额外需要继续创建的资源列表，ROS会继续创建所有依赖于其的资源。\n>该参数仅ROS类型资源栈可用。","type":"array","items":{"description":"创建失败的资源将会被继续创建。您可以指定额外需要继续创建的资源列表，ROS会继续创建所有依赖于其的资源。\n>该参数仅在ROS类型的资源栈中可用。","type":"string","required":false,"example":"WebServer"},"required":false,"example":"WebServer","maxItems":200}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"覆盖的模板参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"覆盖的模板参数的名称。如果未指定特定参数的名称和值，ROS将使用上一次创建时的取值。N的最大值为200。\n\n> 该参数仅在Mode为Recreate时生效。","type":"string","required":true,"example":"Amount"},"ParameterValue":{"description":"覆盖的模板参数的值。N的最大值为200。\n\n对于ROS类型资源栈，覆盖的模板参数限制如下：\n- 不能引发模板Conditions部分中任何Condition的值的变化，由true变false，或由false变true。\n- 覆盖参数不能被不继续创建的资源引用。\n\n>该参数仅在Mode为Recreate时生效。","type":"string","required":true,"example":"12"}},"required":false},"required":false,"maxItems":200}},{"name":"Parallelism","in":"query","schema":{"description":"资源最大并发数。\n\n默认为空，用户可以输入大于等于零的整数。\n\n> - 若设置为大于零的整数，则使用该整数。  \n> - 若设置为零，对于ROS类型资源栈则不限制，Terraform类型资源栈使用Terraform默认值（通常为10）。\n> - 若不设置，则使用上次操作时的设置；若上次操作时未设置，对于ROS类型资源栈则不限制，Terraform类型资源栈使用Terraform默认值（通常为10）。\n> - 若设置了该值，将与资源栈进行关联，影响资源栈的后续操作。","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"RecreatingOptions","in":"query","style":"repeatList","schema":{"description":"重新创建选项。","type":"array","items":{"description":"重新创建选项。当`Mode`取值为`Recreate`时，本参数生效。可选值：\n\n- TryToFixSignalFailureByRerunEcsCommand：尝试修复已存在的信号失败。当ALIYUN::ROS::WaitCondition类型资源创建失败时，找到与之关联且创建成功的ALIYUN::ECS::RunCommand和ALIYUN::ECS::Invocation类型的资源，对这些资源及依赖其的资源进行重建。\n>仅对ROS类型的资源栈生效。\n\n- IgnoreExistingSignalFailure：忽略已存在的信号失败。如果之前存在创建失败的ALIYUN::ROS::WaitCondition类型的资源，新一次的创建过程中会直接创建成功。\n>仅对ROS类型的资源栈生效。\n\n- AutoRecreatingResources：自动重新创建模板内容或引用参数发生变化的资源，包括依赖其的资源。使用该选项，可以简化RecreatingResources.N参数的设置，但也可能造成意料之外的资源重建。\n>仅对ROS类型的资源栈生效。\n\n- CreateNewPrepaidInstance：当您继续创建实例时，对于创建失败或创建成功但指定要重新创建的资源，如果该资源是**预付费**类型，ROS会创建一个**新实例**。\n>- 仅对ROS类型的资源栈生效。\n> - 如果您已创建旧实例，则该实例不会被删除，因为预付费实例**无法删除**。\n> - 默认情况下（未设置CreateNewPrepaidInstance），在该场景中，如果已创建旧实例，则ROS会尝试复用已创建的实例。复用存在一定的限制，资源属性通常不允许修改或只有少量属性允许修改。","type":"string","required":false,"example":"CreateNewPrepaidInstance"},"required":false,"maxItems":5}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B288A0BE-D927-4888-B0F7-B35EF84B6E6"},"StackId":{"description":"资源栈ID。","type":"string","example":"4a6c9851-3b0f-4f5f-b4ca-a14bf691****"},"DryRunResult":{"description":"校验结果。","type":"object","properties":{"ParametersAllowedToBeModified":{"description":"允许修改的参数。","type":"array","items":{"description":"允许修改的参数。修改参数不会引发校验错误。\n> 仅在DryRun为`true`时返回，结果与Mode、Template*、RecreatingResources.N、RecreatingOptions.N相关。","type":"string","example":"description"}},"ParametersConditionallyAllowedToBeModified":{"description":"可能允许修改的参数。","type":"array","items":{"description":"可能允许修改的参数。\n\n修改参数是否引起校验错误，取决于参数的取值。\n> 仅在DryRun为`true`时返回，结果与Mode、Template*、RecreatingResources.N、RecreatingOptions.N相关。","type":"string","example":"name"}},"ParametersNotAllowedToBeModified":{"description":"不允许修改的参数。","type":"array","items":{"description":"不允许修改的参数。修改参数一定会引发校验错误。\n> 仅在DryRun为`true`时返回，结果与Mode、Template*、RecreatingResources.N、RecreatingOptions.N相关。","type":"string","example":"cidr"}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B288A0BE-D927-4888-B0F7-B35EF84B6E6\\\",\\n  \\\"StackId\\\": \\\"4a6c9851-3b0f-4f5f-b4ca-a14bf691****\\\",\\n  \\\"DryRunResult\\\": {\\n    \\\"ParametersAllowedToBeModified\\\": [\\n      \\\"description\\\"\\n    ],\\n    \\\"ParametersConditionallyAllowedToBeModified\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"ParametersNotAllowedToBeModified\\\": [\\n      \\\"cidr\\\"\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ContinueCreateStackResponse>\\n    <RequestId>B288A0BE-D927-4888-B0F7-B35EF84B6E6</RequestId>\\n    <StackId>4a6c9851-3b0f-4f5f-b4ca-a14bf691****</StackId>\\n</ContinueCreateStackResponse>\",\"errorExample\":\"\"}]","title":"重新创建资源栈","summary":"资源栈创建失败后，继续创建资源栈。","description":"本文将提供一个示例，对杭州地域ID为`4a6c9851-3b0f-4f5f-b4ca-a14bf691****`的创建失败的资源栈进行继续创建。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":" ","extraInfo":"| HttpCode | 错误码 | 错误信息 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| 400 | CircularDependency | Circular Dependency Found: {reason}. |模板包含循环引用，reason为具体原因。 |\n| 400 | InvalidSchema | {reason}. |模板格式不正确，reason为具体原因。 |\n| 400 | InvalidTemplateAttribute | The Referenced Attribute ({resource} {name}) is incorrect. |模板包含不正确的资源属性（输出）引用，resource为资源名，name为属性名。 |\n| 400 | InvalidTemplatePropertyType | The specified value type of ({resource} {section}) is incorrect. |模板资源定义中，字段类型不正确，resource为资源名，section为字段名。 |\n| 400 | InvalidTemplateReference | The specified reference \"{name}\" (in {referencer}) is incorrect. |模板包含不正确的引用，name为引用名，referencer为引用者。 |\n| 400 | InvalidTemplateSection | The template section is invalid: {section}. |模板包含无效的字段，section为字段名。 |\n| 400 | InvalidTemplateVersion | The template version is invalid: {reason}. |模板版本不正确，reason为具体原因。 |\n| 400 | StackValidationFailed | {reason}. |资源栈校验失败，reason为具体原因。 |\n| 400 | UnknownUserParameter | The Parameter ({name}) was not defined in template. |传递的参数在模板中未定义，name为参数名。 |\n| 400 | UserParameterMissing | The Parameter {name} was not provided. |参数在模板中已定义，但未传递值，name为参数名。 |\n| 400 | ContinueCreateStackValidationFailed | {reason}. |继续创建资源栈校验失败，reason为具体原因。|\n| 404 | ResourceNotFound | The Resource ({name}) could not be found in Stack {stack}. |资源栈中不存某资源。name为资源名，stack为资源栈名称或ID。 |\n| 404 | StackNotFound | The Stack ({name}) could not be found. |资源栈不存在。name为资源栈名称或ID。 |\n| 409 | ActionInProgress | Stack {name} already has an action ({action}) in progress. |资源栈在变更中。name为资源栈名称或ID，action为变更操作。 |\n| 404 | TemplateNotFound |The Tempalte ({ ID }) could not be found. |模板不存在。ID为模板ID。 |\n| 404 | TemplateNotFound |The Template { ID } with version { version } could not be found. |模板或指定版本不存在。ID为模板ID，version为模板版本。 |"}