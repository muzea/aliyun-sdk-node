{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"资源场景所属的地域ID。\n\n您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"TemplateScratchId","in":"query","schema":{"description":"资源场景ID。\n\n当您输入的资源场景ID为不同的场景类型时，可选的请求参数属性也不同。更多信息，请参见下列的请求参数补充说明。\n\n> 您可以调用[ListTemplateScratches - 查询资源场景列表](~~610832~~)查看资源场景ID。","type":"string","required":true,"docRequired":true,"example":"ts-7f7a704cf71c49a6****"}},{"name":"Description","in":"query","schema":{"description":"资源场景说明。","type":"string","required":false,"docRequired":false,"example":"复制VPC资源。"}},{"name":"SourceResources","in":"query","style":"json","schema":{"description":"源资源。\n\n\n\n> SourceResources、SourceTag和SourceResourceGroup参数仅需设置其中一个。","type":"array","items":{"description":"源资源。\n\n如果TemplateScratchType为ArchitectureDetection，设置本参数意味着探查出以指定的源资源为起点的所有资源的架构数据。例如，指定CLB实例ID，会探查出其所关联的ECS实例、vSwitch、VPC等资源架构数据。\n\n最多支持设置200个源资源。如果TemplateScratchType为ArchitectureDetection，最多设置20个源资源。","type":"object","properties":{"ResourceId":{"description":"资源ID。","type":"string","required":true,"example":"vpc-bp1m6fww66xbntjyc****"},"ResourceType":{"description":"资源类型。","type":"string","required":true,"example":"ALIYUN::ECS::VPC"}},"required":false},"required":false,"docRequired":false}},{"name":"SourceTag","in":"query","style":"json","schema":{"description":"源标签。\n> SourceResources、SourceTag和SourceResourceGroup参数仅需设置其中一个。","type":"object","properties":{"ResourceTags":{"description":"源标签，其中键为标签键，值为标签值。 \n\n如果只希望指定标签键，则值需设置为空字符串，例如：{\"TagKey\": \"\"}。\n\n最多支持设置10个源标签。如果TemplateScratchType为ArchitectureDetection，最多设置5个源标签。","type":"object","required":true,"example":"{\"a\": \"b\"}"},"ResourceTypeFilter":{"description":"资源类型筛选器。","type":"array","items":{"description":"资源类型筛选器。若指定了资源类型列表，则表示扫描指定资源类型且包含指定标签的资源；反之，则表示扫描所有包含指定标签的资源。\n\n最多支持20个资源类型。","type":"string","required":false,"example":"ALIYUN::ECS::VPC"},"required":false}},"required":false,"docRequired":false}},{"name":"SourceResourceGroup","in":"query","style":"json","schema":{"description":"源资源组。\n> SourceResources、SourceTag和SourceResourceGroup参数仅需设置其中一个。","type":"object","properties":{"ResourceGroupId":{"description":"源资源组ID。","type":"string","required":true,"example":"rg-acfmzawhxxc****"},"ResourceTypeFilter":{"description":"资源类型筛选器。","type":"array","items":{"description":"资源类型筛选器。若指定了资源类型列表，则表示扫描指定资源类型且在指定资源组中的资源；反之，则表示扫描所有在指定资源组中的资源。\n\n最多支持20个资源类型。","type":"string","required":false,"example":"ALIYUN::ECS::VPC"},"required":false}},"required":false,"docRequired":false}},{"name":"PreferenceParameters","in":"query","style":"json","schema":{"description":"资源场景配置参数。","type":"array","items":{"description":"资源场景配置参数。","type":"object","properties":{"ParameterKey":{"description":"参数名称。\n\n关于取值的更多信息，请参见**请求参数补充说明**。\n\n> - PreferenceParameters为可选参数。如果需要指定PreferenceParameters，则ParameterKey和ParameterValue必须同时指定。\n> - 当TemplateScratchType取值为ResourceImport时，必须指定ParameterKey为DeletionPolicy。","type":"string","required":true,"example":"DeletionPolicy"},"ParameterValue":{"description":"参数值。取值与ParameterKey对应。\n\n关于取值的更多信息，请参见**请求参数补充说明**。\n\n> PreferenceParameters为可选参数。如果需要指定PreferenceParameters，则ParameterKey和ParameterValue必须同时指定。","type":"string","required":true,"example":"Retain"}},"required":false},"required":false,"docRequired":false}},{"name":"LogicalIdStrategy","in":"query","schema":{"description":"逻辑ID生成策略，取值：\n\n- LongTypePrefixAndIndexSuffix：长类型前缀+索引后缀。\n\n- LongTypePrefixAndHashSuffix：长类型前缀+哈希后缀。\n\n- ShortTypePrefixAndHashSuffix：短类型前缀+哈希后缀。\n\n> 默认值为LongTypePrefixAndIndexSuffix。如果TemplateScratchType为ArchitectureDetection，默认值为LongTypePrefixAndHashSuffix。","type":"string","required":false,"docRequired":false,"example":"LongTypePrefixAndIndexSuffix"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。该值由客户端生成，并且必须是全局唯一的。长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。 \n\n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ExecutionMode","in":"query","schema":{"description":"执行模式，取值：\n\n- Async（默认值）：异步执行。\n\n- Sync：同步执行。\n\n> 如果资源范围较大，同步执行的时间会比较长，推荐同时指定ClientToken，以避免超时问题。","type":"string","required":false,"example":"Sync"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。 ","type":"string","required":false,"example":"rg-acfmxazb4ph6aiy****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"221DA822-B8CF-50DF-A9D2-BA197BF97BD5"},"TemplateScratchId":{"description":"资源场景ID。","type":"string","example":"ts-7f7a704cf71c49a6****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"221DA822-B8CF-50DF-A9D2-BA197BF97BD5\\\",\\n  \\\"TemplateScratchId\\\": \\\"ts-7f7a704cf71c49a6****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateTemplateScratchResponse>\\n    <RequestId>221DA822-B8CF-50DF-A9D2-BA197BF97BD5</RequestId>\\n    <TemplateScratchId>ts-7f7a704cf71c49a6****</TemplateScratchId>\\n</UpdateTemplateScratchResponse>\",\"errorExample\":\"\"}]","title":"更新资源场景","summary":"更新资源场景。","description":"### 资源复制场景\n您可以对资源场景内容进行修改，且修改后的内容不会对之前复制生成的资源栈产生影响。\n您还可以调用[GenerateTemplateByScratch - 为资源场景生成模板](~~610829~~)接口为资源场景生成模板。\n### 资源迁移场景\n- 当您仅迁移资源并未删除源资源时，如果您对资源场景进行更新，您可以通过删除源资源操作纳管更新后的资源场景内容。您还可以调用[GenerateTemplateByScratch - 为资源场景生成模板](~~610829~~)接口为资源场景生成新的模板。\n  > 请确保待删除的源资源不存在除资源场景外的资源关系，否则删除不成功。\n- 当您在迁移资源后并选择删除源资源时，如果您对资源场景进行更新，您仅可以调用[GenerateTemplateByScratch为资源场景生成模板](~~610829~~)接口为资源场景生成新的模板。\n### 资源纳管场景\n当您在纳管资源后更新资源场景内容，您仅可以调用[GenerateTemplateByScratch - 为资源场景生成模板](~~610829~~)接口为资源场景生成新的模板。\n### 资源探查场景\n当您更新资源探查场景内容后，ROS会从资源中心获取最新的数据并渲染出架构图。\n\n\n\n\n本文将提供一个示例，将杭州地域的资源场景`ts-7f7a704cf71c49a6****`中的VPC资源ID更新为`vpc-bp1m6fww66xbntjyc****`。","requestParamsDescription":"### 请求参数补充说明\n\n关于公共请求参数的详情，请参见[公共参数](~~131957~~)。\n\n请求参数中，不同类型的资源场景支持的ParameterKey、ParameterValue不同。\n#### 资源复制场景\n当TemplateScratchId参数取值为资源复制场景ID，支持的ParameterKey、ParameterValue如下：\n\n|ParameterKey |ParameterValue |\n| ------ | ------ |\n|DeletionPolicy |资源删除策略，取值：<br>Retain：保留。将资源复制到资源栈后，在删除此资源栈时，保留原有资源。<br>Delete：删除。将资源复制到资源栈后，在删除此资源栈时，默认删除原有资源；若在删除确认框中选择保留部分资源，则删除未选择保留的资源。 |\n|RegionId |希望复制到的目标地域。若不指定，默认为当前地域。<br>示例：cn-shanghai。 |\n|ZoneId |希望复制到的目标可用区。若不指定，当同地域复制时，复制出的资源和源资源可用区保持一致；当跨地域复制时，会筛选出所有资源均支持的可用区。<br>示例：cn-shanghai-b。 |\n|VpcId |希望复制到的目标专有网络。若不指定，当同地域复制时，复制出的资源和源资源专有网络保持一致；当跨地域复制时，会在目标地域自动创建专有网络。<br>示例：vpc-bp1hye0s8b69xokfu****。 |\n|VSwitchId |希望复制到的目标交换机。若不指定，当同地域复制时，复制出的资源和源资源交换机保持一致；当跨地域复制时，会在目标地域自动创建交换机。<br>示例：vsw-bp11ufkwqwggtm1cj****。 |\n|InstanceDataReplication |是否复制ECS实例数据，取值：<br>true：复制ECS实例数据。当同地域复制时，会为源实例构建自定义镜像，以此镜像创建新实例；当跨地域复制时，会为源实例构建自定义镜像，并拷贝至目标地域，以新镜像创建新实例。<br>false：不复制ECS实例数据。 |\n\n> 当您指定ParameterKey为InstanceDataReplication、ParameterValue为true时，为了确保数据一致性，请您停止源实例后再复制资源。\n\n#### 资源纳管场景\n当TemplateScratchId参数取值为资源纳管场景ID，支持的ParameterKey、ParameterValue如下：\n\n  > 资源纳管类型的资源场景，必须指定ParameterKey为DeletionPolicy。\n\n|ParameterKey |ParameterValue |\n| ------ | ------ |\n|DeletionPolicy |资源删除策略，取值：<br>Retain：保留。将资源纳管至资源栈后，在删除此资源栈时，保留原有资源。<br>Delete：删除。将资源纳管至资源栈后，在删除此资源栈时，默认删除原有资源；若在删除确认框中选择保留部分资源，则删除未选择保留的资源。 |\n\n#### 资源探查场景\n当TemplateScratchId参数取值为资源探查场景ID，支持的ParameterKey、ParameterValue如下：\n\n|ParameterKey |ParameterValue |\n| ------ | ------ |\n|RegionIds |一个或多个地域，使用\",\"分隔。如果不指定，则为当前资源场景的地域。不允许同时指定本参数和SourceResources。 |"}