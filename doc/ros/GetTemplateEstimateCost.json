{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get"},"parameters":[{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于Web服务器（HTTP或HTTPS）或阿里云OSS存储空间（例如：oss://ros/stack-policy/demo、oss://ros/stack-policy/demo?RegionId=cn-hangzhou）中的模板，模板的最大长度为524,288个字节。如未指定OSS地域，默认与RegionId取值相同。 \n\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"oss://ros-template/demo"}},{"name":"RegionId","in":"query","schema":{"description":"资源栈所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。如果长度较长，则建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免因URL过长而导致请求失败。\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"ROSTemplateFormatVersion: '2015-09-01'\\nResources:\\n  vpc:\\n    Type: ALIYUN::ECS::VPC"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。 该值由客户端生成，并且必须全局唯一。   \n长度不超过64个字符。可包含英文字母、数字、短划线（-）和下划线（_）。   \n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"docRequired":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。\n\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"参数。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数的名称。如果未指定模板中定义的参数名称和参数值，ROS将使用模板中指定的默认值。  \nN的最大值为：200。\n取值示例：\n\n- Parameters.1.ParameterKey：`Name`。\n\n- Parameters.2.ParameterKey：`Netmode`。\n\n\n> Parameters为可选参数。如果需要指定Parameters，则Parameters.N.ParameterKey和Parameters.N.ParameterValue必须同时指定。","type":"string","required":true,"example":"Name"},"ParameterValue":{"description":"参数值。  \nN的最大值为：200。\n取值示例：\n\n- Parameters.1.ParameterValue：`DemoEip`。\n\n- Parameters.2.ParameterValue：`public`。\n\n\n> Parameters为可选参数。如果需要指定Parameters，则Parameters.N.ParameterKey和Parameters.N.ParameterValue必须同时指定。","type":"string","required":true,"example":"DemoEip"}},"required":false},"required":false,"maxItems":200}},{"name":"TemplateScratchId","in":"query","schema":{"description":"资源场景ID。\n\n关于如何获取资源场景ID，请参见[ListTemplateScratches](~~363050~~)。\n\n> 您必须且仅能指定TemplateBody、TemplateURL、TemplateId和TemplateScratchId其中一个参数。","type":"string","required":false,"example":"ts-aa9c62feab844a6b****"}},{"name":"TemplateScratchRegionId","in":"query","schema":{"description":"资源场景所属的地域ID，默认与RegionId取值相同。\n\n您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"StackId","in":"query","schema":{"description":"资源栈ID。\n\n当填写此参数时，表示查询变配场景的预估价格。\n\n假设指定资源栈中仅有一个ECS实例，且规格是ecs.s6-c1m2.large。询价使用的新模板将规格改为ecs.s6-c1m1.small（降配），并新增一个RDS实例。则询价结果为ECS实例变配价格（本例由于是降配，则是退款）和新购RDS实例的价格总和。","type":"string","required":false,"example":"c754d2a4-28f1-46df-b557-9586173a****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"6DEA36EF-C97D-5658-A4AC-4F5DB08D1A89"},"Resources":{"description":"资源详情。","type":"object","example":"{\n  \"NewEip\": {\n    \"Type\": \"ALIYUN::VPC::EIP\",\n    \"Success\": true,\n    \"Result\": {\n      \"Order\": {\n        \"TaxAmount\": 0.0,\n        \"Currency\": \"CNY\",\n        \"RuleIds\": [\n          \"102204102264****\"\n        ],\n        \"TradeAmount\": 87.5,\n        \"OriginalAmount\": 125.0,\n        \"DiscountAmount\": 37.5\n      },\n      \"OrderSupplement\": {\n        \"ChargeType\": \"PrePaid\",\n        \"Period\": 1,\n        \"Quantity\": 1,\n        \"PriceType\": \"Total\",\n        \"PeriodUnit\": \"Month\"\n      },\n      \"InquiryType\": \"Buy\",\n      \"Rules\": {\n        \"Rule\": [\n          {\n            \"RuleDescId\": \"102204102264****\",\n            \"Name\": \"合同优惠_整单_7.0折\"\n          }\n        ]\n      }\n    }\n  }\n}"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"6DEA36EF-C97D-5658-A4AC-4F5DB08D1A89\\\",\\n  \\\"Resources\\\": {\\n    \\\"NewEip\\\": {\\n      \\\"Type\\\": \\\"ALIYUN::VPC::EIP\\\",\\n      \\\"Success\\\": true,\\n      \\\"Result\\\": {\\n        \\\"Order\\\": {\\n          \\\"TaxAmount\\\": 0,\\n          \\\"Currency\\\": \\\"CNY\\\",\\n          \\\"RuleIds\\\": [\\n            \\\"102204102264****\\\"\\n          ],\\n          \\\"TradeAmount\\\": 87.5,\\n          \\\"OriginalAmount\\\": 125,\\n          \\\"DiscountAmount\\\": 37.5\\n        },\\n        \\\"OrderSupplement\\\": {\\n          \\\"ChargeType\\\": \\\"PrePaid\\\",\\n          \\\"Period\\\": 1,\\n          \\\"Quantity\\\": 1,\\n          \\\"PriceType\\\": \\\"Total\\\",\\n          \\\"PeriodUnit\\\": \\\"Month\\\"\\n        },\\n        \\\"InquiryType\\\": \\\"Buy\\\",\\n        \\\"Rules\\\": {\\n          \\\"Rule\\\": [\\n            {\\n              \\\"RuleDescId\\\": \\\"102204102264****\\\",\\n              \\\"Name\\\": \\\"合同优惠_整单_7.0折\\\"\\n            }\\n          ]\\n        }\\n      }\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetTemplateEstimateCostResponse>\\n    <RequestId>6DEA36EF-C97D-5658-A4AC-4F5DB08D1A89</RequestId>\\n    <Resources>\\n        <NewEip>\\n            <Type>ALIYUN::VPC::EIP</Type>\\n            <Success>true</Success>\\n            <Result>\\n                <Order>\\n                    <TaxAmount>0</TaxAmount>\\n                    <TradeCycleAmount>0</TradeCycleAmount>\\n                    <RiCycleAmount>0</RiCycleAmount>\\n                    <Currency>CNY</Currency>\\n                    <TotalCostAmount>109.37</TotalCostAmount>\\n                    <RuleIds>102204102264****</RuleIds>\\n                    <TradeAmount>109.37</TradeAmount>\\n                    <DiscountCycleAmount>0</DiscountCycleAmount>\\n                    <OriginalAmount>125</OriginalAmount>\\n                    <DiscountAmount>15.63</DiscountAmount>\\n                </Order>\\n                <OrderSupplement>\\n                    <ChargeType>PrePaid</ChargeType>\\n                    <Period>1</Period>\\n                    <Quantity>1</Quantity>\\n                    <PriceType>Total</PriceType>\\n                    <PeriodUnit>Month</PeriodUnit>\\n                </OrderSupplement>\\n                <OrderDetails>\\n                    <ModuleCode>bandwidth</ModuleCode>\\n                    <ModuleName>带宽</ModuleName>\\n                    <Currency>CNY</Currency>\\n                    <TradeAmount>109.37</TradeAmount>\\n                    <OriginalAmount>125</OriginalAmount>\\n                    <DiscountAmount>15.63</DiscountAmount>\\n                </OrderDetails>\\n                <Rules>\\n                    <Rule>\\n                        <RuleDescId>102204102264****</RuleDescId>\\n                        <Name>合同优惠_整单_8.750折</Name>\\n                    </Rule>\\n                </Rules>\\n            </Result>\\n        </NewEip>\\n    </Resources>\\n</GetTemplateEstimateCostResponse>\",\"errorExample\":\"\"}]","title":"查询模板中创建资源的预估价格","summary":"通过指定模板和模板参数查询创建资源栈的预估价格。","description":"- ROS模板支持询价的资源，请参见[预估资源价格](~~203165~~)的**支持询价的资源类型**章节。\n\n- Terraform模板支持询价的资源，请参见[Terraform支持的功能和资源](~~184389~~)的**ROS资源支持情况**章节。\n\n本文将提供一个示例，查询模板中创建的EIP资源的预估价格。\n示例如下：\n```\n{\n  \"ROSTemplateFormatVersion\": \"2015-09-01\",\n  \"Parameters\": {\n    \"Isp\": {\n      \"Type\": \"String\",\n      \"Default\": \"BGP\"\n    },\n    \"Name\": {\n      \"Type\": \"String\",\n      \"Default\": \"test\"\n    },\n    \"Netmode\": {\n      \"Type\": \"String\",\n      \"Default\": \"public\"\n    },\n    \"Bandwidth\": {\n      \"Type\": \"Number\",\n      \"Default\": 5\n    }\n  },\n  \"Resources\": {\n    \"NewEip\": {\n      \"Type\": \"ALIYUN::VPC::EIP\",\n      \"Properties\": {\n        \"InstanceChargeType\": \"Prepaid\",\n        \"PricingCycle\": \"Month\",\n        \"Isp\": {\n          \"Ref\": \"Isp\"\n        },\n        \"Period\": 1,\n        \"DeletionProtection\": false,\n        \"AutoPay\": false,\n        \"Name\": {\n          \"Ref\": \"Name\"\n        },\n        \"InternetChargeType\": \"PayByTraffic\",\n        \"Netmode\": {\n          \"Ref\": \"Netmode\"\n        },\n        \"Bandwidth\": {\n          \"Ref\": \"Bandwidth\"\n        }\n      }\n    }\n  }\n}\n```","requestParamsDescription":"关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":"Resources各参数含义如下所示。\n\n| 名称 | 类型 | 示例值| 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| Order | | | 订单信息。 |\n| - Currency | String |CNY | 货币单位。取值：<br>CNY：该值仅适用于中国站。<br>USD：该值仅适用于国际站。 |\n| - OriginalAmount | Float | 125.0 | 原价。 |\n| - DiscountAmount | Float | 15.63 | 抵扣金额。 |\n| - TradeAmount | Float | 109.37 | 最终价，为原价减去折扣。 |\n| - TaxAmount | Float |0.0 | 可选税额。 |\n| - Coupons | Array | {\"Coupon\": []} | 可选促销。 |\n| - RuleIds | Array | [102204102264****] | 活动规则列表。 |\n| InquiryType | String |Buy | 询价类型。取值：<br>Buy：新购询价。<br>ModificationBuy：变配询价。 |\n| Rules | | | 活动规则。 |\n| - Rule | | | 活动规则。 |\n| - - Name | String | 合同优惠\\_整单\\_8.750 折 | 活动规则名称。 |\n| - - RuleDescId | Long | 102204102264\\*\\*\\*\\* | 活动规则ID。 |\n| OrderSupplement | | | 订单补充信息。 |\n| - AutoRenew | Boolean | false | 是否自动续费。取值：<br>true：自动续费。<br>false：不自动续费。 |\n| - ChargeType | String | PrePaid | 付费方式。 |\n| - Period | Long |1 | 计费时长。 |\n| - PeriodUnit | String | Month | 包年包月计费方式的时长单位。取值：<br>Year：年。<br>Month：月。 |\n| - PriceType | String | Total | 价格类型。 |\n| - Quantity | Long |1 | 数量。 |","extraInfo":"| HttpCode | 错误码 | 错误信息 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| 400 |CircularDependency |Circular Dependency Found: {reason}. |模板包含循环引用。reason为具体原因。 |\n| 400 |InvalidSchema |{reason}. |模板格式不正确。reason为具体原因。 |\n| 400 |InvalidTemplateAttribute |The Referenced Attribute ({resource} {name}) is incorrect. |模板包含不正确的资源属性（输出）引用。resource为资源名，name为属性名。 |\n| 400 |InvalidTemplatePropertyType |The specified value type of ({resource} {section}) is incorrect. |模板资源定义中的字段类型不正确。resource为资源名，section为字段名。 |\n| 400 |InvalidTemplateReference |The specified reference \"{name}\" (in {referencer}) is incorrect. |模板包含不正确的引用。name为引用名，referencer为引用者。 |\n| 400 |InvalidTemplateSection |The template section is invalid: {section}. |模板包含无效的字段。section为字段名。 |\n| 400 |InvalidTemplateVersion |The template version is invalid: {reason}. |模板版本不正确。reason为具体原因。 |\n| 400 |StackValidationFailed |{reason}. |资源栈校验失败。reason为具体原因。 |\n| 400 |UnknownUserParameter |The Parameter ({name}) was not defined in template. |传递的参数在模板中未定义。name为参数名。 |\n| 400 |UserParameterMissing |The Parameter {name} was not provided. |参数在模板中已定义，但未传递值。name为参数名。 |\n| 404 |TemplateNotFound |The Template ({ ID }) could not be found. |模板不存在。ID为模板ID。 |\n| 404 |TemplateNotFound |The Template { ID } with version { version } could not be found. |模板或指定版本不存在。ID为模板ID，version为模板版本。 |"}