{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"69533","abilityTreeNodes":["FEATURErosUSKZAD","FEATURErosHDIJ7A","FEATURErosSKHQLM"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"资源场景所属的地域ID。\n\n您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"TemplateScratchType","in":"query","schema":{"description":"资源场景类型，取值：\n\n- ArchitectureReplication：资源复制。\n\n- ArchitectureDetection：资源探查。\n\n- ResourceImport：资源纳管。\n\n- ResourceMigration：资源迁移。\n\n> 当TemplateScratchType参数取值不同时，请求参数补充说明中可选的参数属性也不同。 更多信息，请参见下方的**请求参数补充说明**。","type":"string","required":true,"docRequired":true,"example":"ArchitectureReplication"}},{"name":"Description","in":"query","schema":{"description":"资源场景说明。","type":"string","required":false,"docRequired":false,"example":"复制VPC资源。"}},{"name":"SourceResources","in":"query","style":"json","schema":{"description":"源资源。\n\n如果TemplateScratchType为ArchitectureDetection，设置本参数意味着探查出以指定的源资源为起点的所有资源的架构数据。例如，指定CLB实例ID，会探查出其所关联的ECS实例、vSwitch、VPC等资源架构数据。\n\n最多支持设置200个源资源。如果TemplateScratchType为ArchitectureDetection，最多设置20个源资源。","type":"array","items":{"description":"源资源。","type":"object","properties":{"ResourceId":{"description":"资源ID。","type":"string","required":true,"example":"vpc-bp1m6fww66xbntjyc****"},"ResourceType":{"description":"资源类型。","type":"string","required":true,"example":"ALIYUN::ECS::VPC"},"RegionId":{"description":"资源所属的地域ID。\n\n您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。\n\n> - 仅在TemplateScratchType为ArchitectureDetection时生效。\n> - 全局资源的地域为`global`。例如，ALIYUN::CDN::Domain是全局资源，资源所属的地域ID为`global`。","type":"string","required":false,"example":"cn-beijing"},"RelatedResourceTypeFilter":{"description":"相关资源类型过滤列表。","type":"array","items":{"description":"过滤资源类型。","type":"string","required":false,"example":"ALIYUN::ECS::VPC"},"required":false}},"required":false},"required":false,"docRequired":false}},{"name":"SourceTag","in":"query","style":"json","schema":{"description":"源标签。","type":"object","properties":{"ResourceTags":{"description":"源标签，其中键为标签键，值为标签值。\n如果只希望指定标签键，则值需设置为空字符串，例如：`{\"TagKey\": \"\"}`。\n\n最多支持设置10个源标签。如果TemplateScratchType为ArchitectureDetection，最多设置5个源标签。","type":"object","required":true,"example":"{\"a\": \"b\"}"},"ResourceTypeFilter":{"description":"资源类型筛选器。","type":"array","items":{"description":"资源类型筛选器。若指定了资源类型列表，则表示扫描指定资源类型且包含指定标签的资源；反之，则表示扫描所有包含指定标签的资源。\n\n最多支持20个资源类型。","type":"string","required":false,"example":"ALIYUN::ECS::VPC"},"required":false}},"required":false,"docRequired":false}},{"name":"SourceResourceGroup","in":"query","style":"json","schema":{"description":"源资源组。","type":"object","properties":{"ResourceGroupId":{"description":"源资源组ID。","type":"string","required":true,"example":"rg-acfmzawhxxc****"},"ResourceTypeFilter":{"description":"资源类型筛选器。","type":"array","items":{"description":"资源类型筛选器。若指定了资源类型列表，则表示扫描指定资源类型且在指定资源组的资源；反之，则表示扫描所有在指定资源组的资源。\n\n最多支持20个资源类型。","type":"string","required":false,"example":"ALIYUN::ECS::VPC"},"required":false}},"required":false,"docRequired":false}},{"name":"PreferenceParameters","in":"query","style":"json","schema":{"description":"资源场景配置参数。\n","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数名称。\n\n关于取值的更多信息，请参见下列的**请求参数补充说明**。\n\n> - PreferenceParameters为可选参数。如果需要指定PreferenceParameters，则ParameterKey和ParameterValue必须同时指定。\n> - 当TemplateScratchType取值为ResourceImport时，必须指定ParameterKey为DeletionPolicy。","type":"string","required":true,"example":"DeletionPolicy"},"ParameterValue":{"description":"参数值。取值与ParameterKey对应。\n\n关于取值的更多信息，请参见下列的**请求参数补充说明**。\n\n> PreferenceParameters为可选参数。如果需要指定PreferenceParameters，则ParameterKey和ParameterValue必须同时指定。","type":"string","required":true,"example":"Retain"}},"required":false},"required":false,"docRequired":false}},{"name":"LogicalIdStrategy","in":"query","schema":{"description":"逻辑ID生成策略，取值：\n\n- LongTypePrefixAndIndexSuffix：长类型前缀+索引后缀。\n\n- LongTypePrefixAndHashSuffix：长类型前缀+哈希后缀。\n\n- ShortTypePrefixAndHashSuffix：短类型前缀+哈希后缀。\n\n> 默认值为LongTypePrefixAndIndexSuffix。如果TemplateScratchType为ArchitectureDetection，默认值为LongTypePrefixAndHashSuffix。","type":"string","required":false,"docRequired":false,"example":"LongTypePrefixAndIndexSuffix"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。该值由客户端生成，并且必须是全局唯一的。长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。 \n\n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ExecutionMode","in":"query","schema":{"description":"执行模式，取值：\n\n- Async（默认值）：异步执行。\n\n- Sync：同步执行。\n\n> 如果资源范围较大，同步执行的时间会比较长，推荐同时指定ClientToken，以避免超时问题。","type":"string","required":false,"example":"Sync"}},{"name":"Tags","in":"query","style":"repeatList","schema":{"description":"资源场景的标签。","type":"array","items":{"type":"object","properties":{"Key":{"description":"资源场景的标签键。\n\n> Tags为可选参数。如果需要指定Tags，则Tags.N.Key必须指定。","type":"string","required":true,"example":"usage"},"Value":{"description":"资源场景的标签值。","type":"string","required":false,"example":"test"}},"required":false},"required":false,"maxItems":20}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。如果不指定该参数，资源场景将加入默认资源组。","type":"string","required":false,"example":"rg-acfmxazb4ph6aiy****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"84980977-22F0-5421-B30D-B201311D5DCF"},"TemplateScratchId":{"description":"资源场景ID。","type":"string","example":"ts-7f7a704cf71c49a6****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"84980977-22F0-5421-B30D-B201311D5DCF\\\",\\n  \\\"TemplateScratchId\\\": \\\"ts-7f7a704cf71c49a6****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateTemplateScratchResponse>\\n    <RequestId>84980977-22F0-5421-B30D-B201311D5DCF</RequestId>\\n    <TemplateScratchId>ts-7f7a704cf71c49a6****</TemplateScratchId>\\n</CreateTemplateScratchResponse>\",\"errorExample\":\"\"}]","title":"创建资源场景","summary":"创建资源场景。","description":"### 使用限制\n仅部分资源类型支持资源场景功能。更多信息，请参见[支持资源场景的资源类型](~~353175~~l)。\n\n### 使用说明\n通过资源场景功能，您可以在可视化界面上选择资源范围，并对一组资源进行复制、纳管等操作，从而简化资源管理。关于资源场景的更多信息，请参见[概览](~~352074~~)。\n#### 资源复制场景\n如果您需要复制一组资源及其依赖关系，可以通过创建资源复制场景复制指定范围内的所有资源，生成一套架构完全相同的资源。更多信息，请参见[资源复制场景](~~353133~~)。\n#### 资源探查场景\n如果您当前创建的资源之间关系错综复杂，您可以通过创建资源探查场景预览整体资源架构，或者以特定资源为起点的资源架构，从而方便管理资源。更多信息，请参见[资源探查场景](~~2591901~~)。\n#### 资源纳管场景\n如果您需要将一组现有资源导入到一个新的资源栈中进行统一管理，可以创建资源纳管类型的资源场景。更多信息，请参见[资源纳管场景](~~353163~~)。\n#### 资源迁移场景\n如果您需要迁移一组资源及其依赖关系，可以创建资源迁移类型的资源场景，在资源场景中迁移资源、生成资源栈，通过资源栈查看迁移进度，待迁移完成后，您还可以删除源资源。更多信息，请参见[资源迁移场景](~~379902~~)。\n\n\n\n本文将提供一个示例，为您在杭州地域创建一个资源复制类型的资源场景，用于复制专有网络`vpc-bp1m6fww66xbntjyc****`。","requestParamsDescription":"### 请求参数补充说明\n关于公共请求参数的详情，请参见[公共参数](~~131957~~)。\n\n当`TemplateScratchType`参数的取值不同，下列对应支持的ParameterKey、ParameterValue也不同。\n#### 资源复制场景\n当TemplateScratchType取值为ArchitectureReplication时，资源复制类型的资源场景支持的ParameterKey、ParameterValue如下：\n|**ParameterKey** |**ParameterValue** |\n| ------ | ------ |\n|DeletionPolicy |资源删除策略，取值：<br>Retain：保留。将资源复制到资源栈后，在删除此资源栈时，保留原有资源。<br>Delete：删除。将资源复制到资源栈后，在删除此资源栈时，默认删除原有资源；若在删除确认框中选择保留部分资源，则删除未选择保留的资源。 |\n|RegionId |希望复制到的目标地域ID。若不指定，默认为当前地域。<br>示例：cn-shanghai。 |\n|ZoneId |希望复制到的目标可用区ID。若不指定，当同地域复制时，复制出的资源和源资源可用区保持一致；当跨地域复制时，会筛选出所有资源均支持的可用区。<br>示例：cn-shanghai-b。 |\n|VpcId |希望复制到的目标专有网络ID。若不指定，当同地域复制时，复制出的资源和源资源专有网络保持一致；当跨地域复制时，会在目标地域自动创建专有网络。<br>示例：vpc-bp1hye0s8b69xokfu****。 |\n|VSwitchId |希望复制到的目标交换机ID。若不指定，当同地域复制时，复制出的资源和源资源交换机保持一致；当跨地域复制时，会在目标地域自动创建交换机。<br>示例：vsw-bp11ufkwqwggtm1cj****。 |\n|NamePrefix |资源名称前缀，默认无前缀。长度2-32个字符。 |\n|DisableNameUnique |是否禁用名称自动唯一。默认不禁用，会针对名称唯一性的资源（如Bucket）自动添加8位随机码确保复制出的资源的名称唯一性。 |\n|InstanceDataReplication |是否复制ECS实例数据，默认false。取值：<ul><li>true：复制ECS实例数据。当同地域复制时，会为源实例构建自定义镜像，以此镜像创建新实例；当跨地域复制时，会为源实例构建自定义镜像，并拷贝至目标地域，以新镜像创建新实例。</li><li>false：不复制ECS实例数据。</li></ul> |\n|InstancePeriod |希望复制的ECS预付费实例的付费时长，默认同源实例。 |\n|InstancePeriodUnit |希望复制的ECS预付费实例的付费周期，默认同源实例。取值：<ul><li>Week：周。</li><li>Month：月。</li><li>Year：年。</li></ul> |\n|InstanceAmount |希望复制的ECS实例数量，仅在源资源为单个ECS实例时生效。 |\n|RamAttachedPolicyReplication |是否复制关联的RAM策略，默认false。取值：<ul><li>true：true：复制RAM用户、角色、组所关联的策略。</li><li>false：不复制关联的RAM策略。</li></ul> |\n|SlbListenerProtocols |传统型负载均衡实例监听协议，用来限定复制的监听协议，可设置一个或多个，使用英文逗号分隔，默认为不限定。取值：<ul><li>tcp</li><li>udp</li><li>http</li><li>https</li></ul>示例：tcp,udp。 |\n\n> 当您指定ParameterKey为InstanceDataReplication、ParameterValue为true时，为了确保数据一致性，请您停止源实例后再复制资源。\n\n#### 资源探查场景\n当ArchitectureReplication参数取值为ArchitectureDetection时，资源探查类型的资源场景支持的ParameterKey、ParameterValue如下：\n\n|**ParameterKey** |**ParameterValue** |\n| ------ | ------ |\n|RegionIds |一个或多个地域，使用\",\"分隔。支持全局地域`global`。如果不指定，则为当前资源场景的地域。 |\n\n#### 资源纳管场景\n当ArchitectureDetection参数取值为ResourceImport时，资源纳管类型的资源场景支持的ParameterKey、ParameterValue如下：\n> 资源纳管类型的资源场景，必须指定ParameterKey为DeletionPolicy。\n\n|**ParameterKey** |**ParameterValue** |\n| ------ | ------ |\n|DeletionPolicy |资源删除策略，取值：<br>Retain：保留。将资源纳管至资源栈后，在删除此资源栈时，保留原有资源。<br>Delete：删除。将资源纳管至资源栈后，在删除此资源栈时，默认删除原有资源；若在删除确认框中选择保留部分资源，则删除未选择保留的资源。 |\n|SlbListenerProtocols |传统型负载均衡实例监听协议，用来限定纳管的监听协议，可设置一个或多个，使用英文逗号分隔，默认为不限定。取值：<ul><li>tcp</li><li>udp</li><li>http</li><li>https</li></ul>示例：tcp,udp。 |\n\n#### 资源迁移场景\n当ArchitectureDetection参数的取值为ResourceMigration时，资源迁移类型的资源场景支持的ParameterKey、ParameterValue如下：\n|**ParameterKey** |**ParameterValue** |\n| ------ | ------ |\n|RegionId |希望复制到的目标地域ID。若不指定，默认为当前地域。<br>示例：cn-shanghai。 |\n|ZoneId |希望复制到的目标可用区ID。若不指定，当同地域复制时，复制出的资源和源资源可用区保持一致；当跨地域复制时，会筛选出所有资源均支持的可用区。<br>示例：cn-shanghai-b。 |\n|VpcId |希望复制到的目标专有网络ID。若不指定，当同地域复制时，复制出的资源和源资源专有网络保持一致；当跨地域复制时，会在目标地域自动创建专有网络。<br>示例：vpc-bp1hye0s8b69xokfu****。 |\n|VSwitchId |希望复制到的目标交换机ID。若不指定，当同地域复制时，复制出的资源和源资源交换机保持一致；当跨地域复制时，会在目标地域自动创建交换机。<br>示例：vsw-bp11ufkwqwggtm1cj****。 |\n|InstanceDataReplication |是否复制ECS实例数据，取值：<br>true：复制ECS实例数据。当同地域复制时，会为源实例构建自定义镜像，以此镜像创建新实例；当跨地域复制时，会为源实例构建自定义镜像，并拷贝至目标地域，以新镜像创建新实例。<br>false：不复制ECS实例数据。 |"}