{"summary":"通过指定模板地址或模板内容验证将要创建资源栈的模板。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get","abilityTreeCode":"12727","abilityTreeNodes":["FEATURErosU14OAJ"]},"parameters":[{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于HTTP Web服务器或阿里云OSS存储空间（例如：oss://ros/template/demo、oss://ros/template/demo?RegionId=cn-hangzhou）中的模板，模板最大为524,288个字节。   \n\n> 如果OSS地域未指定，默认与接口参数RegionId相同。\n   \n您可以指定TemplateBody或TemplateURL参数，但不能同时指定。   \nURL的最大长度为：1024个字节。","type":"string","required":false,"docRequired":false,"example":"oss://ros/template/demo"}},{"name":"RegionId","in":"query","schema":{"description":"资源栈模板所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。","type":"string","required":false,"docRequired":false,"example":"cn-hangzhou"}},{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。   \n如果长度较大，建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免URL过长而导致请求失败。   \n您可以指定TemplateBody或TemplateURL参数，但不能同时指定。","type":"string","required":false,"docRequired":false,"example":"{\"ROSTemplateFormatVersion\":\"2015-09-01\"}"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。该值由客户端生成，并且必须是全局唯一的。 \n\n长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。 \n\n更多信息，请参见[如何保证幂等性](~~134212~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ValidationOption","in":"query","schema":{"description":"是否对模板开启额外校验。取值：\n\n- None（默认值）：不开启额外校验。\n\n- EnableTerraformValidation：对于Terraform类型模板，使用Terraform CLI的`terraform validate`命令开启额外校验。\n\n- EnableFastTerraformValidation：对于Terraform类型模板，使用一种类似于Terraform CLI的`terraform validate`命令开启额外校验。\n  \n> EnableFastTerraformValidation与EnableTerraformValidation相比速度较快，但校验完整性稍有不足。","type":"string","required":false,"example":"None"}},{"name":"UpdateInfoOptions","in":"query","style":"repeatList","schema":{"description":"更新信息选项列表。列表最大长度为2。","type":"array","items":{"description":"更新信息选项，用于控制资源栈更新的相关信息的生成。取值：\n\n- Disabled：不生成资源栈更新的相关信息。\n\n- ConsiderCondition：生成资源栈更新的相关信息时，考虑条件的影响。建议使用该选项。否则，条件会进行计算，计算时涉及的参数的取值为参数的默认值或null。\n\n- EnableReplacement：生成资源栈更新的相关信息时，考虑替换更新的影响。","type":"string","required":false,"enumValueTitles":{"ConsiderCondition":"ConsiderCondition","EnableReplacement":"EnableReplacement","Disabled":"Disabled"},"example":"ConsiderCondition"},"required":false,"maxItems":2}}],"responses":{"200":{"schema":{"type":"object","properties":{"Description":{"description":"描述此资源栈模板的相关信息。","type":"string","example":"No description"},"Parameters":{"description":"输入参数列表。","type":"array","items":{"description":"输入参数。  \n输入参数中，定义了通过此模板创建资源栈时需要指定的参数，这些参数用来指定每次资源栈创建的细节，例如：用户名、密码、环境相关的ECS规格等。","type":"object","example":"[{\"Description\": \"\", \"Label\": \"param_integer\", \"NoEcho\": \"false\", \"ParameterKey\": \"param_integer\", \"Type\": \"Number\"},{ \"Description\": \"\", \"Label\": \"param_float\", \"NoEcho\": \"false\", \"ParameterKey\": \"param_float\", \"Type\": \"Number\"}]"}},"RequestId":{"description":"请求ID。","type":"string","example":"B288A0BE-D927-4888-B0F7-B35EF84B6E6F"},"Outputs":{"description":"模板输出列表。","type":"array","items":{"type":"object","properties":{"OutputKey":{"description":"模板输出名称。","type":"string","example":"instance_id"},"Description":{"description":"模板输出描述。","type":"string","example":"The instance ID of my ECS."},"Label":{"description":"模板输出别名。","type":"string","example":"Instance ID"}}}},"ResourceTypes":{"description":"模板中用到的资源类型信息。","type":"object","properties":{"Resources":{"description":"普通资源类型列表（已去重）。","type":"array","items":{"description":"普通资源类型。","type":"string","example":"ALIYUN::ECS::InstanceGroup"}},"DataSources":{"description":"数据源资源类型列表（已去重）。","type":"array","items":{"description":"数据源资源类型。","type":"string","example":"DATASOURCE::VPC::Vpcs"}}}},"Resources":{"description":"模板中定义的普通资源列表。\n\n> - 对于ROS模板，资源定义中包含`Count`字段的资源不会展开。\n>- 对于Terraform模板，资源定义中包含`count`或`for_each`的资源不会展开。","type":"array","items":{"type":"object","properties":{"ResourceType":{"description":"普通资源类型。","type":"string","example":"ALIYUN::ECS::InstanceGroup"},"ResourcePath":{"description":"普通资源路径。通常与资源名称相同。\n","type":"string","example":"server"},"LogicalResourceIdPattern":{"description":"普通资源逻辑ID的字符串匹配模式。\n\n对于ROS模板，存在如下两种情况：\n- 资源定义中不包含`Count`字段：假定模板中定义的资源名称为`server`，则该字段取值为`server`，对应的`ResourcePath`为`server`。\n- 资源定义中包含`Count`字段：假定模板中定义的资源名称为`server`，则该字段取值为`server[*]`，对应的`ResourcePath`为`server`。\n\n对于Terraform模板中的资源和[模块](https://www.terraform.io/language/modules)，存在如下两种情况：\n- 定义中不包含[`count`](https://www.terraform.io/language/meta-arguments/count)和[`for_each`](https://www.terraform.io/language/meta-arguments/for_each)：假定名称为`server`，则该字段取值为`server`，对应的`ResourcePath`为`server`。\n- 定义中包含[`count`](https://www.terraform.io/language/meta-arguments/count)或[`for_each`](https://www.terraform.io/language/meta-arguments/for_each)：假定名称为`server`，则该字段取值为`server[*]`，对应的`ResourcePath`为`server`。\n\n\nTerraform模板示例如下：\n- 顶层模块中的资源：\n    - `server`：未使用`count`和`for_each`，对应的`ResourcePath`为`server`。\n    - `server[*]`：使用了`count`或`for_each`，对应的`ResourcePath`为`server`。\n- 子模块中的资源：\n    - `app.server`：`app`模块未使用`count`和`for_each`，`server`资源未使用`count`和`for_each`，对应的`ResourcePath`为`app.server`。\n    - `app.server[*]`：`app`模块未使用`count`和`for_each`，`server`资源使用了`count`或`for_each`，对应的`ResourcePath`为`app.server`。\n    - `app[*].server`：`app`模块使用了`count`或`for_each`，`server`资源未使用`count`和`for_each`，对应的`ResourcePath`为`app.server`。\n    - `app[*].server[*]`：`app`模块使用了`count`或`for_each`，`server`资源使用了`count`或`for_each`，对应的`ResourcePath`为`app.server`。\n    - `app.app_group[*].server`：`app`模块未使用`count`和`for_each`，`app_group`模块使用了`count`或`for_each`（`app_group`模块是`app`模块的子模块），`server`资源未使用`count`和`for_each`，对应的`ResourcePath`为`app.app_group.server`。\n","type":"string","example":"server"}}}},"UpdateInfo":{"description":"资源栈更新的相关信息。若UpdateInfoOptions包含Disabled，则不返回。","type":"object","properties":{"ParametersAllowedToBeModified":{"description":"允许修改的参数的列表。","type":"array","items":{"description":"允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值不会引发校验错误。","type":"string","example":"param1"}},"ParametersCauseInterruptionIfModified":{"description":"一定会引发资源中断的参数的列表。\n\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"一定会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发资源中断。","type":"string","example":"param1"}},"ParametersConditionallyAllowedToBeModified":{"description":"可能允许修改的参数的列表。","type":"array","items":{"description":"可能允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值，修改该参数是否引发校验错误，取决于参数的取值。","type":"string","example":"param2"}},"ParametersConditionallyCauseInterruptionIfModified":{"description":"可能会引发资源中断的参数的列表。\n\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"可能会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值可能会引发资源中断，取决于参数的取值和资源的更新行为。","type":"string","example":"param2"}},"ParametersNotAllowedToBeModified":{"description":"不允许修改的参数的列表。","type":"array","items":{"description":"不允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发校验错误。","type":"string","example":"param3"}},"ParametersUncertainlyAllowedToBeModified":{"description":"不确定是否允许修改的参数的列表。","type":"array","items":{"description":"不确定是否允许修改的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定修改该参数是否会引发校验错误。","type":"string","example":"param4"}},"ParametersUncertainlyCauseInterruptionIfModified":{"description":"不确定是否会引发资源中断的参数的列表。\n\n> - 目前仅支持少量资源类型。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"不确定是否会引发资源中断的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定该参数是否会引发资源中断。","type":"string","example":"param4"}},"ParametersCauseReplacementIfModified":{"description":"一定会引发资源替换更新的参数的列表。\n\n> - 仅在UpdateInfoOptions包含EnableReplacement时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"一定会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值一定会引发资源替换更新。","type":"string","example":"param5"}},"ParametersConditionallyCauseReplacementIfModified":{"description":"可能会引发资源替换更新的参数的列表。\n\n> - 仅在UpdateInfoOptions包含EnableReplacement时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"可能会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值可能会引发资源替换更新，取决于参数的取值。","type":"string","example":"param6"}},"ParametersUncertainlyCauseReplacementIfModified":{"description":"不确定是否会引发资源替换更新的参数的列表。\n\n> - 仅在UpdateInfoOptions包含EnableReplacement时返回。\n> - 仅适用于更新ROS类型资源栈。","type":"array","items":{"description":"不确定是否会引发资源替换更新的参数。更新资源栈时，若模板保持不变，仅修改参数取值，运行时才能确定该参数是否会引发资源替换更新。","type":"string","example":"param7"}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Description\\\": \\\"No description\\\",\\n  \\\"Parameters\\\": [\\n    [\\n      {\\n        \\\"Description\\\": \\\"\\\",\\n        \\\"Label\\\": \\\"param_integer\\\",\\n        \\\"NoEcho\\\": \\\"false\\\",\\n        \\\"ParameterKey\\\": \\\"param_integer\\\",\\n        \\\"Type\\\": \\\"Number\\\"\\n      },\\n      {\\n        \\\"Description\\\": \\\"\\\",\\n        \\\"Label\\\": \\\"param_float\\\",\\n        \\\"NoEcho\\\": \\\"false\\\",\\n        \\\"ParameterKey\\\": \\\"param_float\\\",\\n        \\\"Type\\\": \\\"Number\\\"\\n      }\\n    ]\\n  ],\\n  \\\"RequestId\\\": \\\"B288A0BE-D927-4888-B0F7-B35EF84B6E6F\\\",\\n  \\\"Outputs\\\": [\\n    {\\n      \\\"OutputKey\\\": \\\"instance_id\\\",\\n      \\\"Description\\\": \\\"The instance ID of my ECS.\\\",\\n      \\\"Label\\\": \\\"Instance ID\\\"\\n    }\\n  ],\\n  \\\"ResourceTypes\\\": {\\n    \\\"Resources\\\": [\\n      \\\"ALIYUN::ECS::InstanceGroup\\\"\\n    ],\\n    \\\"DataSources\\\": [\\n      \\\"DATASOURCE::VPC::Vpcs\\\"\\n    ]\\n  },\\n  \\\"Resources\\\": [\\n    {\\n      \\\"ResourceType\\\": \\\"ALIYUN::ECS::InstanceGroup\\\",\\n      \\\"ResourcePath\\\": \\\"server\\\",\\n      \\\"LogicalResourceIdPattern\\\": \\\"server\\\"\\n    }\\n  ],\\n  \\\"UpdateInfo\\\": {\\n    \\\"ParametersAllowedToBeModified\\\": [\\n      \\\"param1\\\"\\n    ],\\n    \\\"ParametersCauseInterruptionIfModified\\\": [\\n      \\\"param1\\\"\\n    ],\\n    \\\"ParametersConditionallyAllowedToBeModified\\\": [\\n      \\\"param2\\\"\\n    ],\\n    \\\"ParametersConditionallyCauseInterruptionIfModified\\\": [\\n      \\\"param2\\\"\\n    ],\\n    \\\"ParametersNotAllowedToBeModified\\\": [\\n      \\\"param3\\\"\\n    ],\\n    \\\"ParametersUncertainlyAllowedToBeModified\\\": [\\n      \\\"param4\\\"\\n    ],\\n    \\\"ParametersUncertainlyCauseInterruptionIfModified\\\": [\\n      \\\"param4\\\"\\n    ],\\n    \\\"ParametersCauseReplacementIfModified\\\": [\\n      \\\"param5\\\"\\n    ],\\n    \\\"ParametersConditionallyCauseReplacementIfModified\\\": [\\n      \\\"param6\\\"\\n    ],\\n    \\\"ParametersUncertainlyCauseReplacementIfModified\\\": [\\n      \\\"param7\\\"\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ValidateTemplateResponse>\\n    <Description>No description</Description>\\n    <Parameters>\\n        <Description/>\\n        <Label>param_integer</Label>\\n        <NoEcho>false</NoEcho>\\n        <ParameterKey>param_integer</ParameterKey>\\n        <Type>Number</Type>\\n    </Parameters>\\n    <Parameters>\\n        <Description/>\\n        <Label>param_float</Label>\\n        <NoEcho>false</NoEcho>\\n        <ParameterKey>param_float</ParameterKey>\\n        <Type>Number</Type>\\n    </Parameters>\\n    <RequestId>B288A0BE-D927-4888-B0F7-B35EF84B6E6F</RequestId>\\n    <Outputs>\\n        <OutputKey>instance_id</OutputKey>\\n        <Description>The instance ID of my ECS.</Description>\\n    </Outputs>\\n    <ResourceTypes>\\n        <Resources>ALIYUN::ECS::InstanceGroup</Resources>\\n        <DataSources>DATASOURCE::VPC::Vpcs</DataSources>\\n    </ResourceTypes>\\n</ValidateTemplateResponse>\",\"errorExample\":\"\"}]","title":"验证将要创建资源栈的模板","description":"该接口不涉及用户数据，只对模板进行校验，无需进行RAM鉴权。\n\n本文将提供一个示例，验证将要创建资源栈的模板，包含模板主体的文件的位置`TemplateURL`为`oss://ros/template/demo`。","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":" ","extraInfo":"| 错误代码 | 错误信息 | HTTP状态码 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| InvalidTemplate |{reason}. | 400 |模板不正确，reason为具体原因。 |\n| IInvalidParameter |{reason}. | 400 |模板参数不正确，reason为具体原因。 |"}