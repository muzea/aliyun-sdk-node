{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"资源栈组所属的地域ID。您可以调用[DescribeRegions](~~131035~~)查看最新的阿里云地域列表。\n","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"StackGroupName","in":"query","schema":{"description":"资源栈组名称。名称在单个地域内唯一。   \n长度不超过255个字符，必须以数字或英文字母开头，可包含数字、英文字母、短划线（-）和下划线（_）。\n","type":"string","required":true,"docRequired":true,"example":"MyStackGroup"}},{"name":"Description","in":"query","schema":{"description":"资源栈组描述。\n\n长度为1~256个字符。\n","type":"string","required":false,"docRequired":false,"example":"My Stack Group"}},{"name":"AccountIds","in":"query","style":"json","schema":{"description":"使用自助管理权限模式部署资源栈的目标账号ID列表。最多支持添加20个目标账号ID。\n\n","type":"array","items":{"description":"使用自助管理权限模式部署资源栈的目标账号ID列表。最多支持添加20个目标账号ID。\n\n","type":"string","required":false,"example":"[\"151266687691****\",\"141261387191****\"]"},"required":false,"example":"[\"12****\"]"}},{"name":"RegionIds","in":"query","style":"json","schema":{"description":"目标执行地域列表。最多支持添加20个地域。\n\n","type":"array","items":{"description":"目标执行地域列表。最多支持添加20个地域。\n\n","type":"string","required":false,"example":"[\"cn-hangzhou\",\"cn-beijing\"]"},"required":false,"example":"[\"cn-hangzhou\", \"cn-beijing\"]"}},{"name":"TemplateBody","in":"formData","schema":{"description":"模板主体的结构。长度为1~524,288个字节。如果长度较大，则建议通过HTTP POST+Body Param的方式，将参数放在请求体中进行传递，避免因URL过长而导致请求失败。                                                               \n>您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。","type":"string","required":false,"docRequired":false,"example":"{\"ROSTemplateFormatVersion\": \"2015-09-01\"}"}},{"name":"TemplateURL","in":"query","schema":{"description":"包含模板主体的文件的位置。URL必须指向位于HTTP Web服务器（HTTP或HTTPS）或阿里云OSS存储桶中的模板（1~524,288个字节）。OSS存储桶的URL，例如oss://ros/template/demo或oss://ros/template/demo?RegionId=cn-hangzhou。如未指定OSS地域，默认与接口参数RegionId相同。\n\n> 您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。\n","type":"string","required":false,"docRequired":false,"example":"oss://ros-template/demo"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求的幂等性。该值由客户端生成，并且必须是全局唯一的。   \n长度不超过64个字符，可包含英文字母、数字、短划线（-）和下划线（_）。   \n更多信息，请参见[如何保证幂等性](~~134212~~)。\n","type":"string","required":false,"docRequired":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"OperationDescription","in":"query","schema":{"description":"更新资源栈组的操作描述。\n","type":"string","required":false,"docRequired":false,"example":"Update stack instances in hangzhou"}},{"name":"OperationPreferences","in":"query","style":"json","schema":{"description":"更新资源栈组的操作设置。\n\n包含以下参数：\n\n- {\"FailureToleranceCount\": N}\n\n  容错数。每个地域中资源栈可以失败的账号数，超过该数字将停止该地域中的操作。如果停止了一个地域中的操作，此操作在其他地域中不继续执行。\n  \n   N的取值范围：0~20。\n\n   若不指定FailureToleranceCount，则默认为0。\n\n- {\"FailureTolerancePercentage\": N}\n\n   容错百分比。每个地域中资源栈可以失败的账号数占总账号数的百分比，超过该百分比将停止该地域中的操作。\n\n   N的取值范围：0~100。百分比不是整数时，ROS会向下取整。\n\n   若不指定FailureTolerancePercentage，则默认为0。\n\n- {\"MaxConcurrentCount\": N}\n\n   最大并发账号数。每个地域中可同时部署资源栈的账号数。\n\n   N的取值范围：1~20。\n\n   若不指定MaxConcurrentCount，则默认为1。\n\n- {\"MaxConcurrentPercentage\": N}最大并发账号百分比。\n\n   每个地域中可同时部署资源栈的账号数占总账号数的百分比。\n\n   N的取值范围：1~100。百分比不是整数时，ROS会向下取整。\n\n   若不指定MaxConcurrentPercentage，则默认为1。\n- {\"RegionConcurrencyType\": N}\n部署资源栈实例的地域级别并发类型，取值：\n     - SEQUENTIAL （默认值）： 根据地域顺序依次在指定的每个地域部署，同一时间只在一个地域部署。\n\n     - PARALLEL ：在所有指定的地域内并行部署。\n\n多个参数之间用半角逗号（,）分隔。\n\n> - 不能同时指定MaxConcurrentCount和MaxConcurrentPercentage。  \n>- 不能同时指定FailureToleranceCount和FailureTolerancePercentage。","type":"object","required":false,"docRequired":false,"example":"{\"FailureToleranceCount\": 1,\"MaxConcurrentCount\": 2}"}},{"name":"AdministrationRoleName","in":"query","schema":{"description":"创建具有自助管理权限的资源栈组时，需指定的供ROS扮演的RAM管理员角色名称。若不指定，则使用AliyunROSStackGroupAdministrationRole作为默认值。ROS以该角色身份进一步扮演执行角色（AliyunROSStackGroupExecutionRole）来操作资源栈组中资源栈实例所对应的资源栈。\n\n长度为1~64个字符，可包含英文字母、数字和短划线（-）。","type":"string","required":false,"docRequired":false,"example":"AliyunROSStackGroupAdministrationRole"}},{"name":"ExecutionRoleName","in":"query","schema":{"description":"创建具有自助管理权限的资源栈组时，需指定的供管理员角色（AliyunROSStackGroupAdministrationRole）扮演的RAM执行角色名称。若不指定，则使用AliyunROSStackGroupExecutionRole作为默认值。ROS以该角色身份来操作资源栈组中资源栈实例所对应的资源栈。\n\n长度为1~64个字符，可包含英文字母、数字和短划线（-）。","type":"string","required":false,"docRequired":false,"example":"AliyunROSStackGroupExecutionRole"}},{"name":"TemplateId","in":"query","schema":{"description":"模板ID。支持共享模板和私有模板。\n\n> 您必须且仅能指定TemplateBody、TemplateURL或TemplateId其中一个参数。","type":"string","required":false,"example":"5ecd1e10-b0e9-4389-a565-e4c15efc****"}},{"name":"TemplateVersion","in":"query","schema":{"description":"模板版本。若不指定，默认取最新版本。\n\n>TemplateVersion仅在指定TemplateId时生效。","type":"string","required":false,"example":"v1"}},{"name":"Parameters","in":"query","style":"repeatList","schema":{"description":"资源栈组参数列表。","type":"array","items":{"type":"object","properties":{"ParameterKey":{"description":"参数的名称。若未指定参数的名称和值，则ROS将使用模板中指定的默认值。\n\nN最大值为200。  \n\n> Parameters为可选参数。若指定了Parameters，则Parameters.N.ParameterKey为必选参数。","type":"string","required":true,"example":"Amount"},"ParameterValue":{"description":"参数的值。\n\nN最大值为200。  \n\n> Parameters为可选参数。若指定了Parameters，则Parameters.N.ParameterValue为必选参数。","type":"string","required":true,"example":"1"}},"required":false},"required":false,"maxItems":200}},{"name":"PermissionModel","in":"query","schema":{"description":"授权模式。\n\n取值：\n\n- SELF_MANAGED（默认值）：自助管理权限模式。使用该模式时，您需要事先在管理员账号和目标账号中手动创建RAM角色，建立二者的信任关系，然后在目标账号中部署资源栈。\n\n- SERVICE_MANAGED：服务管理权限模式。使用该模式时，ROS会为管理员账号和目标账号自动创建服务关联角色，管理员账号通过服务关联角色在目标账号中部署资源栈。\n\n> - 如果当前资源栈组下已有资源栈实例，则不允许更换授权模式。\n>- 当您使用服务管理权限模式部署资源栈时，当前账号必须是资源目录的企业管理账号或委派管理员账号，且已开启可信访问。更多信息，请参见[设置委派管理员账号](~~308253~~)和[开启可信访问](~~298229~~)。","type":"string","required":false,"example":"SELF_MANAGED"}},{"name":"AutoDeployment","in":"query","style":"json","schema":{"description":"自动部署设置信息。\n\n>仅当PermissionModel为SERVICE_MANAGED时，需要指定该参数。","type":"object","properties":{"Enabled":{"description":"启用或者禁用自动部署。\n\n取值：\n\n- true：启用自动部署。启用自动部署后，如果目标资源夹中新增了成员账号，资源栈组会自动将资源栈实例部署到该账号。如果目标资源夹中删除了成员账号，则资源栈组会自动删除该账号中的资源栈实例。\n\n- false：禁用自动部署。禁用自动部署后，目标资源夹中成员账号变动时资源栈实例不会发生变化。","type":"boolean","required":true,"docRequired":true,"example":"true"},"RetainStacksOnAccountRemoval":{"description":"目标资源夹中删除成员账号时，是否保留成员账号中的资源栈。\n\n取值：\n\n- true：保留资源栈。\n\n- false：删除资源栈。\n\n>当Enabled为true时，RetainStacksOnAccountRemoval必选。","type":"boolean","required":false,"example":"true"}},"required":false,"example":"{\"Enabled\": true, \"RetainStacksOnAccountRemoval\": true}"}},{"name":"DeploymentTargets","in":"query","style":"json","schema":{"description":"使用服务管理权限模式更新资源栈的部署目标。","type":"object","properties":{"RdFolderIds":{"description":"资源目录的资源夹ID列表。","type":"array","items":{"description":"资源目录的资源夹ID列表。最多支持添加5个资源夹ID。\n\n您需要至少指定RdFolderIds和AccountIds其中一个参数，具体如下：\n\n- 如果您指定了RdFolderIds，而未指定AccountIds，则会在指定资源夹的所有成员账号中部署资源栈。如果您选择的是Root资源夹，则会在整个资源目录的所有成员账号中部署资源栈。\n\n- 如果您指定了AccountIds，而未指定RdFolderIds，则会在指定成员账号列表中部署资源栈。\n\n- 当两者同时指定时，AccountIds账号需属于RdFolderIds所指定的资源夹列表，则会在指定成员账号列表中部署资源栈。\n\n>您可以在**资源管理**控制台的**概览**页面查看资源夹ID。具体操作，请参见[查看资源夹基本信息](~~111223~~)。\n\n","type":"string","required":false,"example":"[\"fd-4PvlVLOL8v\"]"},"required":false},"AccountIds":{"description":"资源目录中的成员账号ID列表。最多支持添加20个成员账号ID。\n\n>您可以在**资源管理**控制台的**概览**页面查看成员账号ID。具体操作，请参见[查看成员详情](~~111624~~)。","type":"array","items":{"description":"资源目录中的成员账号ID列表。最多支持添加20个成员账号ID。\n\n>您可以在**资源管理**控制台的**概览**页面查看成员账号ID。具体操作，请参见[查看成员详情](~~111624~~)。","type":"string","required":false,"example":"[\"151266687691****\",\"141261387191****\"]"},"required":false}},"required":false,"example":"{\"RdFolderIds\": [\"fd-4PvlVLOL8v\"]}"}},{"name":"Capabilities","in":"query","style":"repeatList","schema":{"description":"资源栈组选项列表，最大长度为1。","type":"array","items":{"description":"源栈组选项。可选值：ExpandModules，在当前账号展开模块。\n\n> - 仅在模板中使用到模块时生效。\n>- 默认不在当前账号展开模块，要求所有部署目标账号中存在相关模块。如果在当前账号展开模块，则要求当前账号存在相关模块。","type":"string","required":false,"example":"ExpandModules"},"required":false,"maxItems":1}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"14A07460-EBE7-47CA-9757-12CC4761D47A"},"OperationId":{"description":"操作ID。","type":"string","example":"6da106ca-1784-4a6f-a7e1-e723863d****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"14A07460-EBE7-47CA-9757-12CC4761D47A\\\",\\n  \\\"OperationId\\\": \\\"6da106ca-1784-4a6f-a7e1-e723863d****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateStackGroupResponse>\\n    <RequestId>14A07460-EBE7-47CA-9757-12CC4761D47A</RequestId>\\n    <OperationId>6da106ca-1784-4a6f-a7e1-e723863d****</OperationId>\\n</UpdateStackGroupResponse>\",\"errorExample\":\"\"}]","title":"更新资源栈组","summary":"更新已创建的资源栈组。","description":"本文将提供一个示例，将杭州地域已有的自助管理权限模式的资源栈组`MyStackGroup`的模板更新为`{\"ROSTemplateFormatVersion\": \"2015-09-01\"}`。\n","requestParamsDescription":" 关于公共请求参数的详情，请参见[公共参数](~~131957~~)。","responseParamsDescription":" ","extraInfo":" | 错误代码 | 错误信息 | HTTP状态码 | 描述 |\n| ------------- | ------------- | ------------- | ------------- |\n| CircularDependency | Circular Dependency Found: {reason}.| 400  |模板包含循环引用。reason为具体原因。 |\n| InvalidSchema | {reason}. | 400 | 模板格式不正确。reason为具体原因。 |\n| InvalidTemplateAttribute | The Referenced Attribute ({resource} {name}) is incorrect. | 400 |模板包含不正确的资源属性（输出）引用。resource为资源名，name为属性名。 |\n| InvalidTemplatePropertyType | The specified value type of ({resource} {section}) is incorrect. | 400 |模板资源定义的字段类型不正确。resource为资源名，section为字段名。 |\n| InvalidTemplateReference | The specified reference \"{name}\" (in {referencer}) is incorrect. | 400 |模板包含不正确的引用。name为引用名，referencer为引用者。 |\n| InvalidTemplateSection | The template section is invalid: {section}. | 400 |模板包含无效的字段。section为字段名。 |\n| InvalidTemplateVersion | The template version is invalid: {reason}.| 400  |模板版本不正确。reason为具体原因。 |\n| UnknownUserParameter | The Parameter ({name}) was not defined in template. | 400 |传递的参数在模板中未定义。name为参数名。 |\n| UserParameterMissing | The Parameter {name} was not provided. | 400 |参数在模板中已定义，但未传递值。name为参数名。 |\n| StackGroupOperationInProgress | Another Operation on StackGroup ({name})s is in progress. | 409 | 资源栈组存在进行中的操作。name为资源栈组名称。 |\n| TemplateNotFound |The Tempalte ({ ID }) could not be found. | 404 |模板不存在。ID为模板ID。 |\n| TemplateNotFound |The Template { ID } with version { version } could not be found. | 404 |模板或指定版本不存在。ID为模板ID，version为模板版本。 |"}