{"summary":"调用ModifyTunnelAttribute接口修改高可用VPN的隧道配置信息。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","riskType":"none","chargeType":"free"},"parameters":[{"name":"ClientToken","in":"query","allowEmptyValue":true,"schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-0016e04115b"}},{"name":"TunnelOptionsSpecification","in":"query","style":"flat","schema":{"description":"修改隧道的配置。","type":"object","properties":{"EnableDpd":{"description":"是否开启DPD（对等体存活检测）功能。取值：\n\n- **true**：开启DPD功能。隧道发起端会发送DPD报文用来检测对端的设备是否存活，如果在设定时间内未收到正确回应则认为对端已经断线，隧道将删除ISAKMP SA和相应的IPsec SA，隧道同样也会被删除。\n\n- **false**：不开启DPD功能，隧道发起端不会发送DPD探测报文。","type":"boolean","required":false,"example":"true"},"EnableNatTraversal":{"description":"是否开启NAT穿越功能。取值：\n\n- **true**：开启NAT穿越功能。开启后，IKE协商过程会删除对UDP端口号的验证过程，同时实现对VPN隧道中NAT网关设备的发现功能。\n\n- **false**：不开启NAT穿越功能。","type":"boolean","required":false,"example":"true"},"RemoteCaCertificate":{"description":"在国密型VPN网关下使用IPsec连接时，对端的CA证书。","type":"string","required":false,"example":"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----"},"TunnelBgpConfig":{"description":"修改隧道的BGP配置。\n\n如果隧道之前并未开启BGP功能，您需要调用[ModifyVpnConnectionAttribute](~~120381~~)接口为隧道开启BGP功能并添加BGP配置。","type":"object","properties":{"LocalAsn":{"description":"隧道本端自治系统号。自治系统号取值范围：**1**~**4294967295**。","type":"integer","format":"int64","required":false,"example":"65530"},"LocalBgpIp":{"description":"隧道本端的BGP IP地址。该地址需是**TunnelCidr**内的一个IP地址。 ","type":"string","required":false,"example":"169.254.11.1"},"TunnelCidr":{"description":"隧道本端BGP IP地址所属网段。\n\n该网段需是一个在169.254.0.0/16内的掩码长度为30的网段。","type":"string","required":false,"example":"169.254.11.0/30"}},"required":false},"TunnelIkeConfig":{"description":"修改隧道IKE阶段（第一阶段）配置。","type":"object","properties":{"IkeAuthAlg":{"description":"第一阶段协商的认证算法。\n\n- 如果IPsec关联的是普通型VPN网关，则取值为：**md5**、**sha1**、**sha256**、**sha384**或**sha512**。\n- 如果IPsec关联的是国密型VPN网关，则取值为：**sm3**。","type":"string","required":false,"example":"sha1"},"IkeEncAlg":{"description":"第一阶段协商的加密算法。\n\n- 如果IPsec关联的是普通型VPN网关，则取值为：**aes**、**aes192**、**aes256**、**des**或**3des**。  \n- 如果IPsec关联的是国密型VPN网关，则取值为：**sm4**。","type":"string","required":false,"example":"aes"},"IkeLifetime":{"description":"第一阶段协商出的SA的生存周期。单位：秒。取值范围：**0~86400**。","type":"integer","format":"int64","required":false,"example":"86400"},"IkeMode":{"description":"IKE版本的协商模式。取值：\n\n- **main**：主模式，协商过程安全性高。\n- **aggressive**：野蛮模式，协商快速且协商成功率高。","type":"string","required":false,"example":"main"},"IkePfs":{"description":"第一阶段协商使用的Diffie-Hellman密钥交换算法。取值：**group1**、**group2**、**group5**、**group14**。","type":"string","required":false,"example":"group2"},"IkeVersion":{"description":"IKE协议的版本。取值：**ikev1**或**ikev2**。 ","type":"string","required":false,"example":"ikev2"},"LocalId":{"description":"隧道本端的标识。长度限制为100个字符，支持FQDN和IP格式。默认值为隧道的IP地址。 ","type":"string","required":false,"example":"47.XX.XX.87"},"Psk":{"description":"预共享密钥，用于隧道及对端之间的身份认证。\n    \n   - 密钥长度为1~100个字符，支持数字、大小写英文字母以及以下字符。```~!`@#$%^&*()_-+={}[]|;:',.<>/?```\n   - 若您未指定预共享密钥，系统会随机生成一个16位的字符串作为预共享密钥。您可以调用[DescribeVpnConnection](~~120374~~)接口查询系统自动生成的预共享密钥。\n   > 隧道及隧道对端配置的预共享密钥必须一致，否则系统无法成功建立隧道。 ","type":"string","required":false,"example":"123456****"},"RemoteId":{"description":"隧道对端的标识。长度限制为100个字符，支持FQDN和IP格式。默认值为隧道关联的用户网关实例的IP地址。 ","type":"string","required":false,"example":"47.XX.XX.207"}},"required":false},"TunnelIpsecConfig":{"description":"修改隧道IPsec阶段（第二阶段）的配置。","type":"object","properties":{"IpsecAuthAlg":{"description":"第二阶段协商的认证算法。\n\n- 如果IPsec关联的是普通型VPN网关，则取值为：**md5**、**sha1**、**sha256**、**sha384**或**sha512**。\n- 如果IPsec关联的是国密型VPN网关，则取值为：**sm3**。","type":"string","required":false,"example":"sha1"},"IpsecEncAlg":{"description":"第二阶段协商的加密算法。\n\n- 如果IPsec关联的是普通型VPN网关，则取值为：**aes**、**aes192**、**aes256**、**des**或**3des**。  \n- 如果IPsec关联的是国密型VPN网关，则取值为：**sm4**。","type":"string","required":false,"example":"aes"},"IpsecLifetime":{"description":"第二阶段协商出的SA的生存周期。单位：秒。取值范围：**0~86400**。","type":"integer","format":"int64","required":false,"example":"86400"},"IpsecPfs":{"description":"第二阶段协商使用的Diffie-Hellman密钥交换算法。取值：**disabled**、**group1**、**group2**、**group5**、**group14**。   \n","type":"string","required":false,"example":"group2"}},"required":false}},"required":false}},{"name":"RegionId","in":"query","schema":{"description":"IPsec连接所属的地域ID。\n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。  ","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"VpnConnectionId","in":"query","schema":{"description":"IPsec连接ID。","type":"string","required":true,"example":"vco-gw69vm1i71y354****"}},{"name":"TunnelId","in":"query","allowEmptyValue":false,"schema":{"description":"隧道ID。","type":"string","required":true,"example":"tun-gbyz2e070xzo93****"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"TunnelId":{"description":"隧道ID。","type":"string","example":"tun-gbyz2e070xzo93****"},"RequestId":{"description":"请求ID。","type":"string","example":"E6F36FF0-9544-3AEE-8673-A4647D50064C"},"TunnelIkeConfig":{"description":"隧道IKE阶段（第一阶段）配置。","type":"object","properties":{"IkeAuthAlg":{"description":"IKE认证算法。","type":"string","example":"sha1"},"IkeEncAlg":{"description":"IKE加密算法。","type":"string","example":"aes"},"IkeLifetime":{"description":"IKE生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IkeMode":{"description":"IKE协商模式。\n\n- **main**：主模式，协商过程安全性高。\n- **aggressive**：野蛮模式，协商快速且协商成功率高。","type":"string","example":"main"},"IkePfs":{"description":"DH分组。","type":"string","example":"group2"},"IkeVersion":{"description":"IKE协议版本。\n\n- **ikev1**\n- **ikev2**\n\n相对于IKEv1版本，IKEv2版本简化了SA的协商过程并且对于多网段的场景提供了更好的支持。","type":"string","example":"ikev2"},"LocalId":{"description":"隧道本端的标识。支持FQDN和IP格式，默认值为当前隧道的IP地址。","type":"string","example":"47.XX.XX.87"},"Psk":{"description":"预共享密钥。","type":"string","example":"123456****"},"RemoteId":{"description":"隧道对端的标识。支持FQDN和IP格式，默认值为隧道关联的用户网关实例的IP地址。","type":"string","example":"47.XX.XX.207"}}},"TunnelIpsecConfig":{"description":"隧道IPsec阶段（第二阶段）的配置。","type":"object","properties":{"IpsecAuthAlg":{"description":"IPsec认证算法。","type":"string","example":"sha1"},"IpsecEncAlg":{"description":"IPsec加密算法。","type":"string","example":"aes"},"IpsecLifetime":{"description":"IPsec生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IpsecPfs":{"description":"DH分组。","type":"string","example":"group2"}}},"TunnelBgpConfig":{"description":"隧道的BGP配置信息。","type":"object","properties":{"EnableBgp":{"description":"BGP的开启状态。\n\n- **true**：已开启。\n\n- **false**：未开启。","type":"boolean","example":"true"},"LocalAsn":{"description":"隧道本端的自治系统号。","type":"integer","format":"int64","example":"65530"},"LocalBgpIp":{"description":"隧道本端的BGP IP地址。","type":"string","example":"169.254.11.1"},"PeerAsn":{"description":"隧道对端的自治系统号。","type":"integer","format":"int64","example":"65531"},"PeerBgpIp":{"description":"隧道对端的BGP IP地址。","type":"string","example":"169.254.11.2"},"TunnelCidr":{"description":"隧道BGP IP地址所属网段。","type":"string","example":"169.254.11.0/30"}}},"EnableNatTraversal":{"description":"是否已开启NAT穿越功能。取值：\n\n- **false**：未开启。\n\n- **true**：已开启。","type":"boolean","example":"true"},"EnableDpd":{"description":"是否已开启DPD（对等体存活检测）功能。\n\n- **false**：未开启。\n\n- **true**：已开启。","type":"boolean","example":"true"},"RemoteCaCertificate":{"description":"国密型VPN网关创建IPsec连接时，对端的CA证书。","type":"string","example":"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----"},"CustomerGatewayId":{"description":"隧道关联的用户网关实例ID。","type":"string","example":"cgw-p0wx48ayhrygitm80****"},"Role":{"description":"隧道的角色。\n\n- **master**：表示主隧道。\n- **slave**：表示备隧道。","type":"string","example":"master"},"ZoneNo":{"description":"隧道所属的可用区。","type":"string","example":"cn-hangzhou-h"},"InternetIp":{"description":"隧道的IP地址。","type":"string","example":"47.XX.XX.87"},"State":{"description":"隧道的状态。\n\n- **active**：表示隧道状态可用。\n- **updating**：表示隧道正在更新中。\n- **deleting**：表示隧道正在删除中。","type":"string","example":"active"}}}}},"errorCodes":{"400":[{"errorCode":"VpnGateway.Configuring","errorMessage":"The specified service is configuring."},{"errorCode":"VpnGateway.FinancialLocked","errorMessage":"The specified service is financial locked."},{"errorCode":"InvalidName","errorMessage":"The name is not valid"},{"errorCode":"VpnRouteEntry.AlreadyExists","errorMessage":"The specified route entry is already exist."},{"errorCode":"VpnRouteEntry.Conflict","errorMessage":"The specified route entry has conflict."},{"errorCode":"NotSupportVpnConnectionParameter.IpsecPfs","errorMessage":"The specified vpn connection ipsec Ipsec Pfs is not support."},{"errorCode":"NotSupportVpnConnectionParameter.IpsecAuthAlg","errorMessage":"The specified vpn connection ipsec Auth Alg is not support."},{"errorCode":"VpnConnectionParamInvalid.SameVpnAndCgwDifferentIkeConfigs","errorMessage":"IPSec connections associated with the same user gateway and VPN gateway should have the same pre-shared key and IKE configuration."},{"errorCode":"VpnConnectionParamInvalid.SameVpnAndCgwTrafficSelectorOverlap","errorMessage":"Traffic selectors of IPSec connections associated with the same user gateway and VPN gateway should not overlap."},{"errorCode":"IllegalParam.LocalAsn","errorMessage":"The param of LocalAsn is illegal"},{"errorCode":"IllegalParam.LocalBgpIp","errorMessage":"The specified LocalBgpIp is invalid."},{"errorCode":"VpnGateway.task.conflict","errorMessage":"The VPN is in the configuration state, please wait a while before operating."},{"errorCode":"ModifyIkeV1WithMultiRoutes.Invalid","errorMessage":"Failed to modify VPN connection parameters. Multi-network is configured while using IkeV1 protocol."}],"403":[{"errorCode":"Forbbiden.SubUser","errorMessage":"User not authorized to operate on the specified resource as your account is created by another user."},{"errorCode":"Forbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"InvalidVpnConnectionInstanceId.NotFound","errorMessage":"The specified vpn connection instance id does not exist."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TunnelId\\\": \\\"tun-gbyz2e070xzo93****\\\",\\n  \\\"RequestId\\\": \\\"E6F36FF0-9544-3AEE-8673-A4647D50064C\\\",\\n  \\\"TunnelIkeConfig\\\": {\\n    \\\"IkeAuthAlg\\\": \\\"sha1\\\",\\n    \\\"IkeEncAlg\\\": \\\"aes\\\",\\n    \\\"IkeLifetime\\\": 86400,\\n    \\\"IkeMode\\\": \\\"main\\\",\\n    \\\"IkePfs\\\": \\\"group2\\\",\\n    \\\"IkeVersion\\\": \\\"ikev2\\\",\\n    \\\"LocalId\\\": \\\"47.XX.XX.87\\\",\\n    \\\"Psk\\\": \\\"123456****\\\",\\n    \\\"RemoteId\\\": \\\"47.XX.XX.207\\\"\\n  },\\n  \\\"TunnelIpsecConfig\\\": {\\n    \\\"IpsecAuthAlg\\\": \\\"sha1\\\",\\n    \\\"IpsecEncAlg\\\": \\\"aes\\\",\\n    \\\"IpsecLifetime\\\": 86400,\\n    \\\"IpsecPfs\\\": \\\"group2\\\"\\n  },\\n  \\\"TunnelBgpConfig\\\": {\\n    \\\"EnableBgp\\\": true,\\n    \\\"LocalAsn\\\": 65530,\\n    \\\"LocalBgpIp\\\": \\\"169.254.11.1\\\",\\n    \\\"PeerAsn\\\": 65531,\\n    \\\"PeerBgpIp\\\": \\\"169.254.11.2\\\",\\n    \\\"TunnelCidr\\\": \\\"169.254.11.0/30\\\"\\n  },\\n  \\\"EnableNatTraversal\\\": true,\\n  \\\"EnableDpd\\\": true,\\n  \\\"RemoteCaCertificate\\\": \\\"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----\\\",\\n  \\\"CustomerGatewayId\\\": \\\"cgw-p0wx48ayhrygitm80****\\\",\\n  \\\"Role\\\": \\\"master\\\",\\n  \\\"ZoneNo\\\": \\\"cn-hangzhou-h\\\",\\n  \\\"InternetIp\\\": \\\"47.XX.XX.87\\\",\\n  \\\"State\\\": \\\"active\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ModifyTunnelAttributeResponse>\\n    <TunnelId>tun-gbyz2e070xzo93****</TunnelId>\\n    <RequestId>E6F36FF0-9544-3AEE-8673-A4647D50064C</RequestId>\\n    <TunnelIkeConfig>\\n        <IkeAuthAlg>sha1</IkeAuthAlg>\\n        <IkeEncAlg>aes</IkeEncAlg>\\n        <IkeLifetime>86400</IkeLifetime>\\n        <IkeMode>main</IkeMode>\\n        <IkePfs>group2</IkePfs>\\n        <IkeVersion>ikev2</IkeVersion>\\n        <LocalId>47.XX.XX.87</LocalId>\\n        <Psk>123456****</Psk>\\n        <RemoteId>47.XX.XX.207</RemoteId>\\n    </TunnelIkeConfig>\\n    <TunnelIpsecConfig>\\n        <IpsecAuthAlg>sha1</IpsecAuthAlg>\\n        <IpsecEncAlg>aes</IpsecEncAlg>\\n        <IpsecLifetime>86400</IpsecLifetime>\\n        <IpsecPfs>group2</IpsecPfs>\\n    </TunnelIpsecConfig>\\n    <TunnelBgpConfig>\\n        <EnableBgp>true</EnableBgp>\\n        <LocalAsn>65530</LocalAsn>\\n        <LocalBgpIp>169.254.11.1</LocalBgpIp>\\n        <PeerAsn>65531</PeerAsn>\\n        <PeerBgpIp>169.254.11.2</PeerBgpIp>\\n        <TunnelCidr>169.254.11.0/30</TunnelCidr>\\n    </TunnelBgpConfig>\\n    <EnableNatTraversal>true</EnableNatTraversal>\\n    <EnableDpd>true</EnableDpd>\\n    <RemoteCaCertificate>-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----</RemoteCaCertificate>\\n    <CustomerGatewayId>cgw-p0wx48ayhrygitm80****</CustomerGatewayId>\\n    <Role>master</Role>\\n    <ZoneNo>ap-southeast-2b</ZoneNo>\\n    <InternetIp>47.XX.XX.87</InternetIp>\\n    <State>active</State>\\n</ModifyTunnelAttributeResponse>\",\"errorExample\":\"\"}]","title":"修改VPN隧道信息"}