{"summary":"调用CreateVSwitchCidrReservation接口创建交换机预留网段。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free"},"parameters":[{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"资源标签","type":"array","items":{"description":"标签信息。","type":"object","properties":{"Key":{"description":"资源的标签键。最多支持输入20个标签键。如需传入该值，则不能输入空字符串。\n\n一个标签键最多支持128个字符，不能以aliyun和acs:开头，不能包含http://或者https://。","type":"string","required":false,"example":"FinanceDept"},"Value":{"description":"资源的标签值。最多支持输入20个标签值。如需传入该值，可以输入空字符串。\n\n最多支持128个字符，不能以aliyun和acs:开头，不能包含http://或者https://。","type":"string","required":false,"example":"FinanceJoshua"}},"required":false},"required":false,"maxItems":21}},{"name":"VSwitchId","in":"query","schema":{"description":"要创建的交换机预留网段所属的交换机ID。","type":"string","required":true,"example":"vsw-25navfgbue4g****"}},{"name":"VSwitchCidrReservationName","in":"query","schema":{"description":"交换机预留网段的名称。\n\n名称长度为2~128个字符，以英文字母或中文开头，可包含数字、下划线（_）和短划线（-）。","type":"string","required":false,"example":"ReservationName"}},{"name":"VSwitchCidrReservationDescription","in":"query","schema":{"description":"交换机预留网段的描述信息。不填则为空，默认值为空。\n\n描述长度为2~256个字符，以英文字母或中文开头，不能以`http://`和`https://`开头。","type":"string","required":false,"example":"ReservationDescription"}},{"name":"IpVersion","in":"query","schema":{"description":"交换机预留网段的IP版本。取值：\n\n- **IPv4** （默认值）：IPv4版本。\n- **IPv6**：IPv6版本。\n\n","type":"string","required":false,"example":"IPv4"}},{"name":"VSwitchCidrReservationMask","in":"query","schema":{"description":"交换机预留网段的掩码。\n\n- 当**IpVersion**取值为**IPv4**时，交换机预留网段的掩码长度范围必须要大于所属交换机的IPv4网段掩码长度且最大不超过28。\n- 当**IpVersion**取值为**IPv6**时，交换机预留网段的掩码长度范围必须要大于所属交换机的IPv6网段掩码长度且最大不超过80。\n\n> - **VSwitchCidrReservationMask**参数和**VSwitchCidrReservationCidr**参数必须输入一个。\n> - 当您在交换机下添加预留网段后，该预留网段不能包含交换机对应的VPC的系统保留地址。","type":"string","required":false,"example":"28"}},{"name":"VSwitchCidrReservationCidr","in":"query","schema":{"description":"交换机预留网段。\n\n- 当**IpVersion**取值为**IPv4**时，交换机预留网段必须是其所属交换机IPv4网段的真子集且网段的掩码长度不超过28。\n- 当**IpVersion**取值为**IPv6**时，交换机预留网段必须是其所属交换机IPv6网段的真子集且网段的掩码长度不超过80。\n\n> - **VSwitchCidrReservationMask**参数和**VSwitchCidrReservationCidr**参数必须输入一个。\n> - 当您在交换机下添加预留网段后，该预留网段不能包含交换机对应的VPC的系统保留地址。","type":"string","required":false,"example":"192.168.1.64/28"}},{"name":"VSwitchCidrReservationType","in":"query","schema":{"description":"交换机预留网段的类型。取值：**prefix**，表示按段分配地址。\n\n> 用户及云服务自动为弹性网卡ENI（Elastic Network Interface）分配网段时，必须从预留地址段分配。如果预留地址段的地址已经分配完，则系统会报错。\n","type":"string","required":false,"example":"prefix"}},{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"DryRun","in":"query","schema":{"description":"是否只预检此次请求。取值：\n- **true**：发送检查请求，不会创建交换机预留网段。检查项包括是否填写了必需参数、请求格式、业务限制。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。\n- **false**（默认值）：发送正常请求，通过检查后返回HTTP 2xx状态码并直接进行创建。","type":"boolean","required":false,"example":"false"}},{"name":"RegionId","in":"query","schema":{"description":"交换机所在的地域ID。\n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。\n\n","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}}],"responses":{"200":{"schema":{"description":"交换机预留网段的实例ID。","type":"object","properties":{"VSwitchCidrReservationId":{"description":"交换机预留网段的实例ID。","type":"string","example":"vcr-bp1m12saqteraw3rp****"},"RequestId":{"description":"请求ID。","type":"string","example":"54B48E3D-DF70-471B-AA93-08E683A1B45"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalParamFormat","errorMessage":"IllegalParamFormat"},{"errorCode":"IllegalParamFormat.VSwitchCidrReservationCidr","errorMessage":"The param format of VSwitchCidrReservationCidr is illegal."},{"errorCode":"ResourceNotFound.VSwitch","errorMessage":"The specified resource of VSwitch is not found."},{"errorCode":"UnsupportedFeature.ReservedType","errorMessage":"The specified ReservedType is not supported."},{"errorCode":"UnsupportedFeature.VSwitchIpv6","errorMessage":"The ipv6 feature of  switch is not supported."},{"errorCode":"OperationFailed.VSwitchCidrReservationCidr","errorMessage":"The specified VSwitchCidrReservationCidr conflicts with existed cidr reservation or vswitch cidr."},{"errorCode":"MissingParam.CidrReservationMaskOrCidrReservationCidr","errorMessage":"Either VSwitchCidrReservationMask or VSwitchCidrReservationCidr should be specified."},{"errorCode":"UnsupportedRegion","errorMessage":"UnsupportedRegion"},{"errorCode":"UnsupportedFeature.VpcAdvancedFeature","errorMessage":"UnsupportedFeature.VpcAdvancedFeature"},{"errorCode":"QuotaExceeded.VSwitchCidrReservationMask","errorMessage":"The quota of VSwitchCidrReservationMask is exceeded."},{"errorCode":"QuotaExceeded.CidrReservationCount","errorMessage":"The quota of VSwitchCidrReservation is exceeded."},{"errorCode":"Conflict.CidrReservationMaskAndCidrReservationCidr","errorMessage":"The specified VSwitchCidrReservationMask and  VSwitchCidrReservationCidr is conflict."},{"errorCode":"OperationFailed.CidrNotEnoughInVSwitch","errorMessage":"No enough cidr to allocate in this vswitch."},{"errorCode":"OperationFailed.SystemReservedIpContained","errorMessage":"The specified VSwitchCidrReservationCidr cannot contain system reserved IP addresses."},{"errorCode":"OperationFailed.AlreadyUsedIpContained","errorMessage":"The specified VSwitchCidrReservationCidr cannot contain already used IP addresses."},{"errorCode":"IncorrectStatus.VSWITCH","errorMessage":"The status of the specified VSwitch is invalid."},{"errorCode":"IllegalParam.VSwitchCidrReservationMask","errorMessage":"The specified VSwitchCidrReservationMask must be at least 2 bits greater than the vSwitch mask."}]},"staticInfo":{"returnType":"asynchronous","callback":"Vpc::2016-04-28::ListVSwitchCidrReservations","callbackInterval":3,"maxCallbackTimes":10},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"VSwitchCidrReservationId\\\": \\\"vcr-bp1m12saqteraw3rp****\\\",\\n  \\\"RequestId\\\": \\\"54B48E3D-DF70-471B-AA93-08E683A1B45\\\"\\n}\",\"type\":\"json\"}]","title":"创建交换机预留网段","description":"调用该接口创建交换机预留网段时，请注意以下事项：\n- VPC中单个交换机IPv4、IPv6最大预留网段数目均为10个。\n- 当您在交换机下添加预留网段后，该预留网段不能包含交换机对应的VPC的系统保留地址。\n- **CreateVSwitchCidrReservation**接口属于异步接口，即系统会返回一个实例ID，但该交换机预留网段尚未创建完成，系统后台任务仍在进行中。您可以调用\n[ListVSwitchCidrReservations](~~610155~~)查询交换机预留网段的创建状态：\n    - 当交换机预留网段处于**Assigning**状态时，表示交换机预留网段正在分配中。\n    - 当交换机预留网段处于**Assigned**状态时，表示交换机预留网段已分配。\n- 当您分配IPv4版本的交换机预留网段时，该交换机的第1个和最后3个IP地址为系统保留地址。这4个保留地址不会被分配出去。\n- 当您分配IPv6版本的交换机预留网段时，该交换机的第1个和最后9个IP地址为系统保留地址。这10个保留地址不会被分配出去。\n以IPv4预留网段为例，例如交换机网段为192.168.1.0/24，则系统保留地址为192.168.1.0、192.168.1.253、192.168.1.254和192.168.1.255，分配的预留网段中不能包含这4个IP地址在内。"}