{"summary":"调用CreateNatGateway接口创建增强型公网NAT网关或VPC NAT网关。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"NAT网关所在的地域ID。\n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"VpcId","in":"query","schema":{"description":"需要创建NAT网关的VPC的ID。","type":"string","required":true,"docRequired":true,"example":"vpc-bp1di7uewzmtvfuq8****"}},{"name":"Name","in":"query","schema":{"description":"NAT网关的名称。\n\n名称长度为2~128个字符，以大小写字母或中文开头，可包含数字、下划线（_）和短划线（-）。\n\n如果没有指定该参数，系统会为NAT网关创建默认的名称。","type":"string","required":false,"example":"fortest"}},{"name":"Description","in":"query","schema":{"description":"NAT网关的描述。\n\n描述可以为空；或填写2~256个字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"testnat"}},{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n由客户端生成该参数值，要保证在不同请求间唯一。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**可能不一样。","type":"string","required":false,"example":"5A2CFF0E-5718-45B5-9D4D-70B3FF3898"}},{"name":"Spec","in":"query","schema":{"description":"包年包月公网NAT网关已停止新购，该参数不再使用。\n","type":"string","required":false,"example":"无效参数"}},{"name":"InstanceChargeType","in":"query","schema":{"description":"NAT网关的付费模式，取值：\n\n**PostPaid**（默认值）：按量付费。\n          \n更多信息，请参见[公网NAT网关计费](~~48126~~)和[VPC NAT网关计费](~~270913~~)。","type":"string","required":false,"example":"PostPaid"}},{"name":"PricingCycle","in":"query","schema":{"description":"包年包月公网NAT网关已停止新购，该参数不再使用。","type":"string","required":false,"example":"无效参数"}},{"name":"Duration","in":"query","schema":{"description":"包年包月公网NAT网关已停止新购，该参数不再使用。","type":"string","required":false,"example":"无效参数"}},{"name":"AutoPay","in":"query","schema":{"description":"包年包月公网NAT网关已停止新购，该参数不再使用。","type":"boolean","required":false,"example":"无效参数"}},{"name":"VSwitchId","in":"query","schema":{"description":"NAT网关所属的交换机的ID。\n\n创建NAT网关时，您必须指定NAT网关所属的交换机，系统会为NAT网关分配一个交换机内的空闲私网IP地址。\n\n- 如果您要在存量交换机中创建NAT网关，请确保交换机所属的可用区支持创建NAT网关，且交换机有可用的IP。\n\n- 如果您还未创建交换机，请先在支持创建NAT网关的可用区创建交换机，然后再指定NAT网关所属的交换机。\n\n> 您可以通过[ListEnhanhcedNatGatewayAvailableZones](~~182292~~)接口查询NAT网关的资源可用区，通过[DescribeVSwitches](~~35748~~)接口查询交换机中的可用IP数。\n","type":"string","required":false,"docRequired":true,"example":"vsw-bp1e3se98n9fq8hle****"}},{"name":"NatType","in":"query","schema":{"description":"NAT网关的类型，取值：**Enhanced**，增强型NAT网关。\n","type":"string","required":false,"docRequired":true,"example":"Enhanced"}},{"name":"InternetChargeType","in":"query","schema":{"description":"NAT网关的计费类型，取值：**PayByLcu**，表示按使用量计费。\n\n\n\n","type":"string","required":false,"example":"PayByLcu"}},{"name":"NetworkType","in":"query","schema":{"description":"创建的NAT网关类型，取值：\n\n- **internet**：公网NAT网关。\n\n- **intranet**：VPC NAT网关。","type":"string","required":false,"docRequired":false,"example":"internet"}},{"name":"SecurityProtectionEnabled","in":"query","schema":{"description":"是否开启防火墙功能，取值：\n\n- **false**（默认值）：不开启。\n><notice> 该参数已弃用。></notice>","type":"boolean","deprecated":true,"required":false,"example":"false"}},{"name":"IcmpReplyEnabled","in":"query","schema":{"description":"是否开启ICMP代回。取值：\n\n- **true**（默认值）：开启。\n- **false**：不开启。\n\n","type":"boolean","required":false,"example":"true"}},{"name":"EipBindMode","in":"query","allowEmptyValue":false,"schema":{"title":"NAT：NAT模式，支持SNAT/访问DANT，最多支持绑定50个EIP，支持ingress routing;\nMULTI_BINDED：多EIP网卡可见模式。","description":"NAT网关的EIP绑定模式，取值：\n- **MULTI_BINDED**（默认值）：多EIP网卡可见模式。\n- **NAT**：EIP普通模式，兼容IPv4网关。\n  > NAT网关的EIP绑定模式为EIP普通模式时，EIP将占用NAT网关所在交换机的一个私网IP，请确保NAT网关所在交换机内私网IP地址充足，如果NAT网关所在的交换机没有可用的空闲私网地址时，将无法绑定新的EIP。NAT网关的EIP绑定模式为EIP普通模式时，NAT网关支持绑定的EIP数量上限为50个。","type":"string","required":false,"example":"MULTI_BINDED","default":"MULTI_BINDED","enum":[]}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"type":"object","properties":{"Key":{"description":"标签键。API调用时使用Tag.N.Key的形式，N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以aliyun或acs:开头，不能包含http://或https://。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"标签值。API调用时使用Tag.N.Value的形式，N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以aliyun或acs:开头，不能包含http://或https://。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":21}}],"responses":{"200":{"schema":{"description":"返回数据结构体。","type":"object","properties":{"NatGatewayId":{"description":"创建的NAT网关的实例ID。\n","type":"string","example":"ngw-112za33e4****"},"RequestId":{"description":"请求ID。","type":"string","example":"2315DEB7-5E92-423A-91F7-4C1EC9AD97C3"},"ForwardTableIds":{"type":"object","properties":{"ForwardTableId":{"description":"DNAT列表。","type":"array","items":{"description":"DNAT列表。","type":"string","example":"ftb-11tc6xgmv****"}}}},"SnatTableIds":{"type":"object","properties":{"SnatTableId":{"description":"SNAT列表。","type":"array","items":{"description":"SNAT列表。","type":"string","example":"stb-SnatTableIds****"}}}},"FullNatTableIds":{"type":"object","properties":{"FullNatTableId":{"description":"FULLNAT列表。","type":"array","items":{"description":"FULLNAT列表。","type":"string","example":"fulltb-gw88z7hhlv43rmb26****"}}}}}}}},"errorCodes":{"400":[{"errorCode":"Forbidden.NatPayBySpec","errorMessage":"Pay-by-specification NAT is no longer supported. Newly purchased pay-as-you-go NAT gateways only support the pay-by-CU metering method."},{"errorCode":"UnsupportedFeature.PrivateLink","errorMessage":"The feature of %s is not supported."},{"errorCode":"DependencyViolation.FullNatEntry","errorMessage":"The specified resource of %s depends on %s, so the operation cannot be completed."},{"errorCode":"UnsupportedFeature.InternetChargeType","errorMessage":"The feature of InternetChargeType is not supported."},{"errorCode":"InvalidVPCStatus","errorMessage":"vpc incorrect status."},{"errorCode":"InvalidNatGatewayName.MalFormed","errorMessage":"NatGateway name is not valid."},{"errorCode":"InvalidNatGatewayDescription.MalFormed","errorMessage":"NatGateway description is not valid."},{"errorCode":"MissingParameter.BandwidthPackage","errorMessage":"only support one BandwidthPackage be created with NatGateway."},{"errorCode":"OperationDenied","errorMessage":"The user cannot allow to create natgw, please call PD to authorize"},{"errorCode":"RouterEntryConflict.Duplicated","errorMessage":"A route entry already exists, which CIDR is '0.0.0.0/0'"},{"errorCode":"MissingParameter","errorMessage":"Miss mandatory parameter."},{"errorCode":"QuotaExceeded.BandwidthPackageIps","errorMessage":"The specified ipCount exceeded quota."},{"errorCode":"AllocateIpFailed","errorMessage":"Alloc bandwidthPackage ips failed, maybe no available ip."},{"errorCode":"InvalidParameter.Name.Malformed","errorMessage":"The specified Name is not valid."},{"errorCode":"InvalidParameter.Description.Malformed","errorMessage":"The specified Description is not valid."},{"errorCode":"ZONE_NO_AVAILABLE_IP","errorMessage":"The Zone have no available ip."},{"errorCode":"ParameterIllegal","errorMessage":"ipCount,bandwidth parameter invalid"},{"errorCode":"InvalidParameter.BandwidthPackage.n.ISP.ValueNotSupport","errorMessage":"The specified ISP of BandwidthPackage is not valid."},{"errorCode":"InvalidNatGatewayId.NotFound","errorMessage":"The NatGatewayId not exist."},{"errorCode":"VswitchStatusError","errorMessage":"The VSwitch is creating ."},{"errorCode":"VpcStatusError","errorMessage":"The Vpc is creating ."},{"errorCode":"InvalidParameter.Spec.ValueNotSupported","errorMessage":"The specified Spec is not valid."},{"errorCode":"TaskConflict","errorMessage":"The operation is too frequent, TaskConflict."},{"errorCode":"COMMODITY.INVALID_COMPONENT","errorMessage":"The instance component is invalid."},{"errorCode":"CreateNatGateway.RouteConflict.DynamicRoute","errorMessage":"Route conflict exists in routing table."},{"errorCode":"OperationUnsupported.MultiNatGateway","errorMessage":"More than one natGateway per vpc is unsupported."},{"errorCode":"Forbidden.CheckEntryRuleQuota","errorMessage":"Route entry quota rule check error."},{"errorCode":"OperationFailed.UnpaidBillsExist","errorMessage":"The account has unpaid bills. Please pay your overdue bill first."},{"errorCode":"IncorrectStatus.RouteEntry","errorMessage":"Specified routeEntry status error."},{"errorCode":"OperationFailed.RiskControl","errorMessage":"Risk control check failed."},{"errorCode":"IncorrectStatus.RouteTableStatus","errorMessage":"%s"},{"errorCode":"OperationFailed.TokenVerfiy","errorMessage":"Token verify failed."},{"errorCode":"%s","errorMessage":"%s"},{"errorCode":"IllegalParam.Name","errorMessage":"The specified Name is invalid, shorter than 2 characters."},{"errorCode":"OperationFailed.EnhancedQuotaExceed","errorMessage":"Enhanced nat gateway per vpc quota is exceeded"},{"errorCode":"OrderError.NoAvailablePaymentMethod","errorMessage":"%s"},{"errorCode":"OrderError.BasicInfoUncompleted","errorMessage":"%s"},{"errorCode":"OperationUnsupported.EnhancedCURegion","errorMessage":"%s"},{"errorCode":"NoPermission.CreateServiceLinkedRole","errorMessage":"You are not authorized to create service linked role"},{"errorCode":"OperationUnsupported.EnhancedRegion","errorMessage":"%s"},{"errorCode":"OperationFailed.EnhancedInventoryNotEnough","errorMessage":"Operation failed because inventory is not enough."},{"errorCode":"OperationFailed.VswNotBelongToVpc","errorMessage":"Operation failed because the specified VSwitch is not bound to the same VPC with NAT gateway."},{"errorCode":"OperationFailed.EnhancedUserIsUnAuthorized","errorMessage":"Operation failed because the user is not authorized to create an enhanced NAT gateway."},{"errorCode":"OperationUnsupported.PrePaidPyByLcu","errorMessage":"The operation failed because the subscription NAT gateway does not support the pay-by-LCU billing method."},{"errorCode":"OperationFailed.NormalInventoryNotEnough","errorMessage":"Standard NAT gateways are no longer offered. You can create enhanced NAT gateways and set the correct natType."},{"errorCode":"OperationFailed.VSwitchNoAvailableIp","errorMessage":"Operation failed because the specified vswitch does not have availabe ip."},{"errorCode":"OperationFailed.EnhancedCheckInventory","errorMessage":"Operation failed because check inventory result is unexpected."},{"errorCode":"UnsupportedFeature.IcmpReplyEnabled","errorMessage":"The feature of IcmpReplyEnabled is not supported."},{"errorCode":"UnsupportedFeature.SecurityProtectionEnabled","errorMessage":"The feature of SecurityProtectionEnabled is not supported."},{"errorCode":"OperationFailed.RegionConvert","errorMessage":"Operation failed because do not find region info."},{"errorCode":"UnsupportedFeature.VpcNat","errorMessage":"The feature of VpcNat is not supported."},{"errorCode":"InvalidVSWITCHID.NotFound","errorMessage":"The specified resource of %s is not found."},{"errorCode":"Forbidden.OperateShareResource","errorMessage":"Operate share resource  is forbidden."},{"errorCode":"IncorrectStatus.VSWITCH","errorMessage":"The status of VSWITCH is incorrect."},{"errorCode":"OperationFailed.VpcNatGatewayInventoryNotEnough","errorMessage":"The operation is failed because of inventory is not enough."},{"errorCode":"OperationFailed.VpcNatGatewayCheckInventory","errorMessage":"The operation is failed because of check inventory result is unexpected"},{"errorCode":"ExclusiveParam.%sAnd%s","errorMessage":"The param of %s and %s are mutually exclusive."},{"errorCode":"SecurityGroupType.NotSupported","errorMessage":"The specified security group type is not supported."},{"errorCode":"SecurityGroup.NotExist","errorMessage":"The specified security group is not exist."},{"errorCode":"OperationFailed.ContainForbiddenLabel","errorMessage":"There is a label that prohibits ordering, please contact your distributor for processing."},{"errorCode":"OperationDenied.PrePaidInstance","errorMessage":"The operation is not allowed because prepaid instance is no longer supported."},{"errorCode":"UnsupportedFeature.Geneve","errorMessage":"The feature of Geneve is not supported."}],"404":[{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The specified RegionId does not exist in our records."},{"errorCode":"InvalidVpcId.NotFound","errorMessage":"Specified value of VpcId is not found in our record."},{"errorCode":"InvalidZoneId.NotFound","errorMessage":"Specified value of ZoneId is not exists."},{"errorCode":"VPC_ONLY_CAN_CREATE_ONE_NAT_GATEWAY","errorMessage":"NatGateway in one vpc support only one."},{"errorCode":"OperationFailed.CrateEntryTimeOut","errorMessage":"Operation failed because create custom routeEntry timeout."},{"errorCode":"Forbidden.CreateSpecialSpecNatGateway","errorMessage":"You are not authorized to create special spec nat gateway."},{"errorCode":"UnsupportedZoneForFwNat","errorMessage":"The zone is unsupported for FW NAT."}],"500":[{"errorCode":"OrderError.NatGateway","errorMessage":"The Account failed to create order."},{"errorCode":"OperationFailed.NoAvailableResource","errorMessage":"The Zone have no available resource."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"NatGatewayId\\\": \\\"ngw-112za33e4****\\\",\\n  \\\"RequestId\\\": \\\"2315DEB7-5E92-423A-91F7-4C1EC9AD97C3\\\",\\n  \\\"ForwardTableIds\\\": {\\n    \\\"ForwardTableId\\\": [\\n      \\\"ftb-11tc6xgmv****\\\"\\n    ]\\n  },\\n  \\\"SnatTableIds\\\": {\\n    \\\"SnatTableId\\\": [\\n      \\\"stb-SnatTableIds****\\\"\\n    ]\\n  },\\n  \\\"FullNatTableIds\\\": {\\n    \\\"FullNatTableId\\\": [\\n      \\\"fulltb-gw88z7hhlv43rmb26****\\\"\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateNatGatewayResponse>\\n    <NatGatewayId>ngw-112za33e4****</NatGatewayId>\\n    <RequestId>2315DEB7-5E92-423A-91F7-4C1EC9AD97C3</RequestId>\\n    <ForwardTableIds>ftb-11tc6xgmv****</ForwardTableIds>\\n    <SnatTableIds>stb-SnatTableIds****</SnatTableIds>\\n    <FullNatTableIds>fulltb-gw88z7hhlv43rmb26****</FullNatTableIds>\\n</CreateNatGatewayResponse>\",\"errorExample\":\"\"}]","title":"创建NAT网关","description":"在调用本接口时，请了解以下内容：\n\n- 首次创建NAT网关时，系统会自动创建一个名称为AliyunServiceRoleForNatgw的服务关联角色，并且为该角色添加名称为AliyunServiceRolePolicyForNatgw的权限策略，授予NAT网关拥有访问其他云资源的权限。更多信息，请参见[服务关联角色](~~174251~~)。\n\n- 增强型公网NAT网关创建后，系统会在VPC的路由表中自动添加一条目标网段为0.0.0.0/0，下一跳为NAT网关的路由条目，用于将流量路由到NAT网关。\n\n- **CreateNatGateway**接口属于异步接口，即系统会先返回一个NAT网关（公网NAT网关或VPC NAT网关）实例ID，但该NAT网关实例并未创建完成，系统后台的创建任务仍在进行。您可以调用[DescribeNatGateways](~~36054~~)查询NAT网关的状态。\n\n    - 当NAT网关处于**Creating**状态时，表示NAT网关正在创建中，在该状态下，您只能执行查询操作，不能执行其他操作。\n\n    - 当NAT网关处于**Available**状态时，表示NAT网关创建完成。\n \n NAT网关创建一般需要1~3分钟，请您耐心等待。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}