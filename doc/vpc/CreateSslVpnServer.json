{"summary":"调用CreateSslVpnServer接口创建SSL-VPN服务端。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free"},"parameters":[{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-0016e04115b"}},{"name":"RegionId","in":"query","schema":{"description":"VPN网关所在的地域ID。 \n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。  ","type":"string","required":true,"docRequired":true,"example":"cn-shanghai"}},{"name":"VpnGatewayId","in":"query","schema":{"description":" VPN网关的ID。 ","type":"string","required":true,"docRequired":true,"example":"vpn-bp1hgim8by0kc9nga****"}},{"name":"Name","in":"query","schema":{"description":"SSL-VPN服务端的名称。  \n\n长度为1～100个字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"sslvpnname"}},{"name":"ClientIpPool","in":"query","schema":{"description":"客户端网段。\n\n是给客户端虚拟网卡分配访问地址的地址段，不是指客户端已有的内网网段。\n\n当客户端通过SSL-VPN连接访问本端时，VPN网关会从指定的客户端网段中分配一个IP地址给客户端使用，客户端将会使用分配的IP地址访问云上资源。\n\n在您指定客户端网段时需保证客户端网段所包含的IP地址个数是当前VPN网关SSL连接数的4倍及以上。\n<details>\n<summary>单击查看原因。</summary>\n例如您指定的客户端网段为192.168.0.0/24，系统在为客户端分配IP地址时，会先从192.168.0.0/24网段中划分出一个子网掩码为30的子网段，例如192.168.0.4/30，然后从192.168.0.4/30中分配一个IP地址供客户端使用，剩余三个IP地址会被系统占用以保证网络通信，此时一个客户端会耗费4个IP地址。因此，为保证您的客户端均能分配到IP地址，请确保您指定的客户端网段所包含的IP地址个数是VPN网关SSL连接数的4倍及以上。\n</details>\n\n<details>\n<summary>单击查看不支持配置的网段。</summary>\n\n- 100.64.0.0~100.127.255.255\n- 127.0.0.0~127.255.255.255\n- 169.254.0.0~169.254.255.255\n- 224.0.0.0~239.255.255.255\n- 255.0.0.0~255.255.255.255\n\n</details>\n\n<details>\n<summary>单击查看每个SSL连接数建议的客户端网段。</summary>\n\n- 若SSL连接数为5，则客户端网段的子网掩码位数建议小于或等于27。例如：10.0.0.0/27、10.0.0.0/26。\n- 若SSL连接数为10，则客户端网段的子网掩码位数建议小于或等于26。例如：10.0.0.0/26、10.0.0.0/25。\n- 若SSL连接数为20，则客户端网段的子网掩码位数建议小于或等于25。例如：10.0.0.0/25、10.0.0.0/24。\n- 若SSL连接数为50，则客户端网段的子网掩码位数建议小于或等于24。例如：10.0.0.0/24、10.0.0.0/23。\n- 若SSL连接数为100，则客户端网段的子网掩码位数建议小于或等于23。例如：10.0.0.0/23、10.0.0.0/22。\n- 若SSL连接数为200，则客户端网段的子网掩码位数建议小于或等于22。例如：10.0.0.0/22、10.0.0.0/21。\n- 若SSL连接数为500，则客户端网段的子网掩码位数建议小于或等于21。例如：10.0.0.0/21、10.0.0.0/20。\n- 若SSL连接数为1000，则客户端网段的子网掩码位数建议小于或等于20。例如：10.0.0.0/20、10.0.0.0/19。\n\n</details>\n\n> - 客户端网段的子网掩码位数在16至29位之间。\n> - 请确保客户端网段和本端网段不冲突。\n> - 在指定客户端网段时，建议您使用10.0.0.0/8、172.16.0.0/12和192.168.0.0/16网段及其子网网段。如果您的客户端网段需要指定为公网网段，您需要将公网网段设置为VPC的用户网段，以确保VPC可以访问到该公网网段。关于用户网段的更多信息，请参见[专有网络FAQ](~~185311~~)。\n> - 创建SSL服务端后，系统后台会自动将客户端网段的路由添加在VPC实例的路由表中（控制台默认不显示），请勿再手动将客户端网段的路由添加到VPC实例的路由表，否则会导致SSL-VPN连接流量传输异常。","type":"string","required":true,"docRequired":true,"example":"192.168.1.0/24"}},{"name":"LocalSubnet","in":"query","schema":{"description":"本端网段。\n\n是客户端通过SSL-VPN连接要访问的地址段。\n\n本端网段可以是VPC的网段、交换机的网段、通过专线和VPC互连的IDC的网段、云服务如对象存储服务OSS（Object Storage Service）等的网段。\n\n本端网段的子网掩码位数在8至32位之间。以下网段不支持指定为本端网段：\n\n- 100.64.0.0~100.127.255.255\n- 127.0.0.0~127.255.255.255\n- 169.254.0.0~169.254.255.255\n- 224.0.0.0~239.255.255.255\n- 255.0.0.0~255.255.255.255","type":"string","required":true,"docRequired":true,"example":"10.0.0.0/8"}},{"name":"Proto","in":"query","schema":{"description":"SSL-VPN服务端所使用的协议，取值：\n\n- **TCP**（默认值）：TCP协议。\n\n- **UDP**：UDP协议。","type":"string","required":false,"example":"UDP"}},{"name":"Cipher","in":"query","schema":{"description":"SSL-VPN连接使用的加密算法。\n\n- 如果客户端使用Tunnelblick软件或2.4.0及以上版本的OpenVPN软件，则SSL服务端和客户端之间动态协商加密算法，会优先使用双方均支持的最高安全级别的加密算法。您为SSL服务端指定的加密算法不生效。\n\n- 如果客户端使用2.4.0之前版本的OpenVPN软件，则SSL服务端和客户端将使用您为SSL服务端指定的加密算法。SSL服务端支持指定以下加密算法：\n\n  - **AES-128-CBC**（默认值）：AES-128-CBC算法。\n\n  - **AES-192-CBC**：AES-192-CBC算法。\n\n  - **AES-256-CBC**：AES-256-CBC算法。\n\n  - **none**：不使用加密算法。","type":"string","required":false,"example":"AES-128-CBC"}},{"name":"Port","in":"query","schema":{"description":"SSL-VPN服务端所使用的端口。端口取值范围：**1**~**65535**。默认值：**1194**。\n\n不支持使用以下端口：**22**、**2222**、**22222**、**9000**、**9001**、**9002**、**7505**、**80**、**443**、**53**、**68**、**123**、**4510**、**4560**、**500**、**4500**。","type":"integer","format":"int32","required":false,"example":"1194"}},{"name":"Compress","in":"query","schema":{"description":"指定是否对通信进行压缩， 取值：\n\n- **true**：对通信进行压缩。\n\n- **false**（默认值）：对通信不进行压缩。","type":"boolean","required":false,"example":"false"}},{"name":"EnableMultiFactorAuth","in":"query","schema":{"description":"是否开启双因子认证。如果您选择开启双因子认证功能，您还需要配置`IDaaSInstanceId`、`IDaaSRegionId`和`IDaaSApplicationId`。取值：\n\n- **true**：开启。\n\n- **false**（默认值）：不开启。\n\n>- 如果您是首次使用双因子认证功能，请先完成[授权](https://ram.console.aliyun.com/role/authorization?request=%7B%22Services%22%3A%5B%7B%22Service%22%3A%22VPN%22%2C%22Roles%22%3A%5B%7B%22RoleName%22%3A%22AliyunVpnAccessingIdaasRole%22%2C%22TemplateId%22%3A%22IdaasRole%22%7D%5D%7D%5D%2C%22ReturnUrl%22%3A%22https%3A%2F%2Fvpc.console.aliyun.com%2Fsslvpn%2Fcn-shanghai%2Fvpn-servers%22%7D)后再创建SSL服务端。\n>- IDaaS EIAM 1.0实例不再支持新购。如果您的阿里云账号下存在IDaaS EIAM 1.0实例，开启双因子认证功能后，依旧支持绑定IDaaS EIAM 1.0实例。如果您的阿里云账号下不存在IDaaS EIAM 1.0实例，开启双因子认证功能后，仅支持绑定IDaaS EIAM 2.0实例。","type":"boolean","required":false,"example":"false"}},{"name":"IDaaSInstanceId","in":"query","schema":{"description":"IDaaS EIAM实例ID。","type":"string","required":false,"example":"idaas-cn-hangzhou-p****"}},{"name":"IDaaSRegionId","in":"query","schema":{"description":"IDaaS EIAM实例所属地域ID。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"IDaaSApplicationId","in":"query","schema":{"description":"IDaaS应用ID。\n\n- 如果您绑定的是IDaaS EIAM 2.0实例，需输入IDaaS应用ID。\n- 如果您绑定的是IDaaS EIAM 1.0实例，无需输入IDaaS应用ID。","type":"string","required":false,"example":"app_my6g4qmvnwxzj2f****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"SslVpnServerId":{"description":"SSL-VPN服务端的ID。","type":"string","example":"vss-bp18q7hzj6largv4v****"},"RequestId":{"description":"请求ID。","type":"string","example":"E98A9651-7098-40C7-8F85-C818D1EBBA85"},"Name":{"description":"SSL-VPN服务端的名称。","type":"string","example":"test"}}}}},"errorCodes":{"400":[{"errorCode":"Resource.QuotaFull","errorMessage":"The quota of resource is full"},{"errorCode":"InvalidName","errorMessage":"The name is not valid"},{"errorCode":"VpnGateway.Configuring","errorMessage":"The specified service is configuring."},{"errorCode":"VpnGateway.FinancialLocked","errorMessage":"The specified service is financial locked."},{"errorCode":"SslVpnServer.AlreadyExist","errorMessage":"The SSL VPN server of specified vpn gateway already exists."},{"errorCode":"VpnRouteEntry.Conflict","errorMessage":"The specified route entry has conflict."},{"errorCode":"IpConflict","errorMessage":"Client IP pool conflict with local IP range."},{"errorCode":"SslVpnServer.AddRouteError","errorMessage":"Add route error whose destination is client IP pool, please check vpc route entry and relevant quota."},{"errorCode":"ClientIpPool.NetmaskInvalid","errorMessage":"The netmask length of client IP pool must be greater than or equal to 16 and less than or equal to 29."},{"errorCode":"ClientIpPool.SubnetInvalid","errorMessage":"The specified client IP pool cannot be used."},{"errorCode":"MissingParameter.IDaaSInstanceId","errorMessage":"The input parameter IDaaSInstanceId is mandatory when enable multi-factor authentication."},{"errorCode":"OperationFailed.NoRamPermission","errorMessage":"Vpn Service has no permission to operate your IDaaS instances."},{"errorCode":"OperationUnsupported.NotSupportMultiFactorAuth","errorMessage":"Current version of the VPN does not support multi-factor authentication."},{"errorCode":"QuotaExceeded.VpnRouteEntry","errorMessage":"The number of route entries to the VPN gateway in the VPC routing table has reached the quota limit."},{"errorCode":"SystemBusy","errorMessage":"The system is busy. Please try again later."},{"errorCode":"SslVpnServerPort.Illegal","errorMessage":"The server port is not in the range of [1-65535]."},{"errorCode":"EnableHaCheck.SslVpnServerClientCidrContainsVpcRouteDest","errorMessage":"Ssl vpn client cidr contains vpc route prefix. The vpc route prefix is %s."},{"errorCode":"VpnGateway.SslVpnDisabled","errorMessage":"The VPN gateway has not enabled SSL VPN."},{"errorCode":"IllegalParam.LocalSubnet","errorMessage":"The specified \"LocalSubnet\" (%s) is invalid."},{"errorCode":"IllegalParam.IDaaSApplicationId","errorMessage":"The specified IDaaS application Id is not illegal, the application instance needs to be created based on the dedicated SSL VPN template."},{"errorCode":"SslVpnIDaaS2.NotSupport","errorMessage":"Current version of the VPN does not support IDaaS2.0."},{"errorCode":"MissingParam.IDaaSApplicationId","errorMessage":"The input parameter IDaaSApplicationId is mandatory when enable multi-factor authentication."},{"errorCode":"MissingParam.IDaaSRegionId","errorMessage":"The input parameter IDaaSRegionId is mandatory when enable multi-factor authentication."}],"403":[{"errorCode":"Forbbiden.SubUser","errorMessage":"User not authorized to operate on the specified resource as your account is created by another user."},{"errorCode":"Forbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The specified region is not found during access authentication."},{"errorCode":"InvalidVpnGatewayInstanceId.NotFound","errorMessage":"The specified vpn gateway instance id does not exist."},{"errorCode":"InvalidIDaaSInstanceId.NotFound","errorMessage":"The specified IDaaS instance ID does not exist."},{"errorCode":"InvalidIDaaSApplicationId.NotFound","errorMessage":"The specified IDaaS application Id does not exist."}]},"staticInfo":{"returnType":"asynchronous","callback":"Vpc::2016-04-28::DescribeVpnGateway","callbackInterval":2000,"maxCallbackTimes":60},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"SslVpnServerId\\\": \\\"vss-bp18q7hzj6largv4v****\\\",\\n  \\\"RequestId\\\": \\\"E98A9651-7098-40C7-8F85-C818D1EBBA85\\\",\\n  \\\"Name\\\": \\\"test\\\"\\n}\",\"errorExample\":\"{\\n  \\\"RequestId\\\": \\\"E98A9651-7098-40C7-8F85-C818D1EBBA85\\\",\\n  \\\"SslVpnServerId\\\": \\\"vss-bp18q7hzj6largv4vk2fe\\\",\\n  \\\"Name\\\": \\\"test\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<CreateSslVpnServerResponse>\\n    <RequestId>E98A9651-7098-40C7-8F85-C818D1EBBA85</RequestId>\\n    <SslVpnServerId>vss-bp18q7hzj6largv4v****</SslVpnServerId>\\n    <Name>test</Name>\\n</CreateSslVpnServerResponse>\",\"errorExample\":\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" ?>\\n<CreateSslVpnServerResponse>\\n    <RequestId>E98A9651-7098-40C7-8F85-C818D1EBBA85</RequestId>\\n    <SslVpnServerId>vss-bp18q7hzj6largv4vk2fe</SslVpnServerId>\\n    <Name>test</Name>\\n</CreateSslVpnServerResponse>\"}]","title":"创建SSL-VPN服务端","description":"- **CreateSslVpnServer**接口属于异步接口，即系统先返回一个实例ID，但该SSL-VPN服务端尚未创建成功，系统后台的创建任务仍在进行。您可以调用[DescribeVpnGateway](~~2794055~~)查询VPN网关实例的状态，来确定SSL-VPN服务端的创建状态：\n    - 当VPN网关实例处于**updating**状态时，表示SSL-VPN服务端正在创建中。\n    - 当VPN网关实例处于**active**状态时，表示SSL-VPN服务端创建成功。\n- **CreateSslVpnServer**接口不支持在同一VPN网关下并发创建SSL-VPN服务端。\n\n### 前提条件\n\n- 您已经创建了VPN网关且VPN网关已开启SSL-VPN功能。具体操作，请参见[CreateVpnGateway](~~2794049~~)。\n- 如果您需要为SSL服务端开启双因子认证功能，请先确保VPN网关实例支持该功能，您可能需要升级VPN网关实例。更多信息，请参见[SSL-VPN双因子认证支持IDaaS EIAM 2.0](~~2785320~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}