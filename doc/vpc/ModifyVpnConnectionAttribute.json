{"summary":"调用ModifyVpnConnectionAttribute接口修改IPsec连接的配置信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","riskType":"none","chargeType":"free"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"IPsec连接所在的地域ID。 \n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。  ","type":"string","required":true,"docRequired":true,"example":" cn-shanghai"}},{"name":"ClientToken","in":"query","schema":{"description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n> 若您未指定，则系统自动使用API请求的**RequestId**作为**ClientToken**标识。每次API请求的**RequestId**不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-0016e04115b"}},{"name":"VpnConnectionId","in":"query","schema":{"description":"IPsec连接的ID。","type":"string","required":true,"docRequired":true,"example":"vco-bp1bbi27hojx80nck****"}},{"name":"Name","in":"query","schema":{"description":"IPsec连接的名称。  \n\n长度为1～100个字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"nametest"}},{"name":"LocalSubnet","in":"query","schema":{"description":"需要和本地数据中心互连的VPC侧的网段，用于第二阶段协商。\n\n多个网段之间用半角逗号（,）分隔，例如：192.168.1.0/24,192.168.2.0/24。\n\n关于IPsec连接路由模式的说明：\n\n- 如果**LocalSubnet**和**RemoteSubnet**均输入为0.0.0.0/0，则表示您使用目的路由模式。\n- 如果**LocalSubnet**和**RemoteSubnet**均输入具体的网段，则表示您使用感兴趣流模式。","type":"string","required":false,"example":"10.1.1.0/24,10.1.2.0/24"}},{"name":"RemoteSubnet","in":"query","schema":{"description":"本地数据中心侧的网段，用于第二阶段协商。\n\n多个网段之间用半角逗号（,）分隔，例如：192.168.3.0/24,192.168.4.0/24。\n\n关于IPsec连接路由模式的说明：\n\n- 如果**LocalSubnet**和**RemoteSubnet**均输入为0.0.0.0/0，则表示您使用目的路由模式。\n- 如果**LocalSubnet**和**RemoteSubnet**均输入具体的网段，则表示您使用感兴趣流模式。","type":"string","required":false,"example":"10.2.1.0/24,10.2.2.0/24"}},{"name":"EffectImmediately","in":"query","schema":{"description":"选择IPsec连接的配置是否立即生效。取值：\n           \n- **true**：是，配置完成后系统立即进行IPsec协议协商。\n   \n- **false**：否，当有流量进入时系统才进行IPsec协议协商。","type":"boolean","required":false,"example":"false"}},{"name":"IkeConfig","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n第一阶段协商的配置信息： \n           \n- **IkeConfig.Psk**：预共享密钥，用于VPN网关与本地数据中心之间的身份认证。\n\n    - 密钥长度为1~100个字符，支持数字、大小写英文字母以及以下字符。```~!`@#$%^&*()_-+={}[]|;:',.<>/?```\n    - 若您未指定预共享密钥，系统会随机生成一个16位的字符串作为预共享密钥。您可以调用[DescribeVpnConnection](~~2526951~~)接口查询系统自动生成的预共享密钥。\n    > IPsec连接侧的预共享密钥需和本地数据中心侧的认证密钥一致，否则本地数据中心和VPN网关之间无法建立连接。 \n\n- **IkeConfig.IkeVersion**：IKE协议的版本。取值：**ikev1**或**ikev2**。 \n\n    相对于IKEv1版本，IKEv2版本简化了SA的协商过程并且对于多网段的场景提供了更好的支持。\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则IKE版本仅支持**ikev1**。</ph></props>\n\n- **IkeConfig.IkeMode**：IKE版本的协商模式。取值：**main**或**aggressive**。   \n    - **main**：主模式，协商过程安全性高。\n    - **aggressive**：野蛮模式，协商快速且协商成功率高。\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则协商模式仅支持**main**。</ph></props>\n\n- **IkeConfig.IkeEncAlg**：第一阶段协商的加密算法。\n\n    <props=\"intl\"><ph>取值：**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值为**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm4**。</ph></props>\n\n- **IkeConfig.IkeAuthAlg**：第一阶段协商的认证算法。\n\n    <props=\"intl\"><ph>取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm3**。</ph></props>\n\n- **IkeConfig.IkePfs**：第一阶段协商使用的Diffie-Hellman密钥交换算法。取值：**group1**、**group2**、**group5**、**group14**。\n\n- **IkeConfig.IkeLifetime**：第一阶段协商出的SA的生存周期。单位：秒。取值范围：**0~86400**。\n\n- **IkeConfig.LocalId**：VPN网关的标识。长度限制为100个字符。默认值为VPN网关的IP地址。 \n\n- **IkeConfig.RemoteId**：用户网关的标识。长度限制为100个字符。默认值为用户网关的IP地址。","type":"string","required":false,"example":"{\"Psk\":\"pgw6dy7d1i8i****\",\"IkeVersion\":\"ikev1\",\"IkeMode\":\"main\",\"IkeEncAlg\":\"aes\",\"IkeAuthAlg\":\"sha1\",\"IkePfs\":\"group2\",\"IkeLifetime\":86400,\"LocalId\":\"116.64.XX.XX\",\"RemoteId\":\"139.18.XX.XX\"}"}},{"name":"IpsecConfig","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n第二阶段协商的配置信息： \n\n- **IpsecConfig.IpsecEncAlg**：第二阶段协商的加密算法。\n\n    <props=\"intl\"><ph>取值：**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值为**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm4**。</ph></props>\n\n- **IpsecConfig. IpsecAuthAlg**：第二阶段协商的认证算法。\n\n    <props=\"intl\"><ph>取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n    <props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm3**。</ph></props>\n\n- **IpsecConfig. IpsecPfs**：转发所有协议的报文，第一阶段协商使用的Diffie-Hellman密钥交换算法。取值：**disabled**、**group1**、**group2**、**group5**、**group14**。   \n\n- **IpsecConfig. IpsecLifetime**：第二阶段协商出的SA的生存周期。单位：秒。取值范围：**0~86400**。","type":"string","required":false,"example":"{\"IpsecEncAlg\":\"aes\",\"IpsecAuthAlg\":\"sha1\",\"IpsecPfs\":\"group2\",\"IpsecLifetime\":86400}"}},{"name":"HealthCheckConfig","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n健康检查配置信息：\n\n- **HealthCheckConfig.enable**：是否开启健康检查。取值：**true**或**false**。\n\n- **HealthCheckConfig.dip**：健康检查的目的IP地址。\n\n- **HealthCheckConfig.sip**：健康检查的源IP地址。\n\n- **HealthCheckConfig.interval**：健康检查的重试间隔时间，单位：秒。\n\n- **HealthCheckConfig.retry**：健康检查的重试发包次数。","type":"string","required":false,"example":"{\"enable\":\"true\",\"dip\":\"192.168.1.1\",\"sip\":\"10.1.1.1\",\"interval\":\"3\",\"retry\":\"3\"}"}},{"name":"AutoConfigRoute","in":"query","schema":{"description":"是否自动发布路由。取值：\n\n- **true**：自动发布。\n   \n- **false**：不自动发布。   ","type":"boolean","required":false,"example":"true"}},{"name":"EnableDpd","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n是否开启DPD（对等体存活检测）功能。取值：\n\n- **true**：开启DPD功能。IPsec发起端会发送DPD报文用来检测对端的设备是否存活，如果在设定时间内未收到正确回应则认为对端已经断线，IPsec将删除ISAKMP SA和相应的IPsec SA，安全隧道同样也会被删除。\n\n- **false**：不开启DPD功能，IPsec发起端不会发送DPD探测报文。","type":"boolean","required":false,"example":"true"}},{"name":"EnableNatTraversal","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n是否开启NAT穿越功能。取值：\n\n- **true**：开启NAT穿越功能。开启后，IKE协商过程会删除对UDP端口号的验证过程，同时实现对VPN隧道中NAT网关设备的发现功能。\n\n- **false**：不开启NAT穿越功能。","type":"boolean","required":false,"example":"true"}},{"name":"BgpConfig","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\nBGP的配置信息：\n\n- **BgpConfig.EnableBgp**：是否开启BGP功能。取值：**true**或**false**。\n\n- **BgpConfig.LocalAsn**：阿里云侧的自治系统号。自治系统号取值范围：**1**~**4294967295**。  \n\n   支持按照两段位的格式进行输入，即：前16位比特.后16位比特。每个段位使用十进制输入。\n\n    例如输入123.456，则表示自治系统号：123*65536+456=8061384。\n\n- **BgpConfig.TunnelCidr**：IPsec隧道网段。该网段需是一个在169.254.0.0/16内的掩码长度为30的网段。\n\n    > 一个VPN网关实例下每个IPsec连接的IPsec隧道网段需保持唯一。\n\n- **LocalBgpIp**：阿里云侧的BGP地址。该地址为IPsec隧道网段内的一个IP地址。 \n\n> - 当您的VPN网关启用BGP动态路由功能时需要配置该参数。\n>- 在添加BGP配置前，建议您先了解BGP动态路由功能的工作机制和使用限制。更多信息，请参见[VPN网关支持BGP动态路由公告\n](~~170235~~)。\n>- 建议您使用自治系统号的私有号码与阿里云建立BGP连接。自治系统号的私有号码范围请自行查阅文档。","type":"string","required":false,"example":"{\"EnableBgp\":\"true\",\"LocalAsn\":\"65530\",\"TunnelCidr\":\"169.254.11.0/30\",\"LocalBgpIp\":\"169.254.11.1\"}"}},{"name":"RemoteCaCertificate","in":"query","schema":{"description":"修改单隧道模式的IPsec-VPN连接时支持配置该参数。\n\n如果当前VPN网关实例为国密型VPN网关，您可以修改对端的CA证书。\n\n如果当前VPN网关实例为普通型VPN网关，不支持配置本参数。","type":"string","required":false,"example":"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----"}},{"name":"TunnelOptionsSpecification","in":"formData","allowEmptyValue":true,"style":"flat","schema":{"description":"修改隧道的配置。\n\n仅修改双隧道模式的IPsec-VPN连接时支持配置**TunnelOptionsSpecification**数组下的参数。您可以同时修改IPsec-VPN连接主隧道和备隧道的配置。","type":"array","items":{"description":"修改双隧道模式的IPsec-VPN连接时支持配置**TunnelOptionsSpecification**数组下的参数。您可以同时修改IPsec-VPN连接主隧道和备隧道的配置。\n\n修改隧道配置。\n\n","type":"object","properties":{"TunnelId":{"description":"修改双隧道模式的IPsec-VPN连接时支持配置**TunnelOptionsSpecification**数组下的参数。您可以同时修改IPsec-VPN连接主隧道和备隧道的配置。\n\n隧道ID。","type":"string","required":false,"example":"tun-opsqc4d97wni27****"},"Role":{"description":"隧道的角色。\n\n- **master**：表示当前隧道为主隧道。\n- **slave**：表示当前隧道为备隧道。","type":"string","required":false,"example":"master"},"EnableDpd":{"description":"是否为隧道开启DPD（对等体存活检测）功能。取值：\n\n- **true**：开启DPD功能。IPsec发起端会发送DPD报文用来检测对端的设备是否存活，如果在设定时间内未收到正确回应则认为对端已经断线，IPsec将删除ISAKMP SA和相应的IPsec SA，安全隧道同样也会被删除。\n\n- **false**：不开启DPD功能，IPsec发起端不会发送DPD探测报文。","type":"boolean","required":false,"example":"true"},"EnableNatTraversal":{"description":"是否为隧道开启NAT穿越功能。取值：\n\n- **true**：开启NAT穿越功能。开启后，IKE协商过程会删除对UDP端口号的验证过程，同时实现对VPN隧道中NAT网关设备的发现功能。\n\n- **false**：不开启NAT穿越功能。","type":"boolean","required":false,"example":"true"},"RemoteCaCertificate":{"description":"如果当前VPN网关实例为国密型VPN网关，您可以隧道修改对端的CA证书。\n\n如果当前VPN网关实例为普通型VPN网关，不支持配置本参数。","type":"string","required":false,"example":"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----"},"TunnelBgpConfig":{"description":"修改隧道的BGP配置。","type":"object","properties":{"LocalAsn":{"description":"隧道本端（阿里云侧）的自治系统号。自治系统号取值范围：**1**~**4294967295**。默认值：**45104**。\n\n> - 当您为IPsec连接开启BGP功能后（即指定**EnableTunnelsBgp**参数的值为**true**）支持配置或修改本参数。\n>- 在添加BGP配置前，建议您先了解BGP动态路由功能的工作机制和使用限制。更多信息，请参见[VPN网关支持BGP动态路由公告](~~170235~~)。\n>- 建议您使用自治系统号的私有号码与阿里云建立BGP连接。自治系统号的私有号码范围请自行查阅文档。","type":"integer","format":"int64","required":false,"example":"65530"},"LocalBgpIp":{"description":"隧道本端（阿里云侧）的BGP地址。该地址为BGP网段内的一个IP地址。 ","type":"string","required":false,"example":"169.254.10.1"},"TunnelCidr":{"description":"隧道的BGP网段。该网段需是一个在169.254.0.0/16内的掩码长度为30的网段。\n\n>在一个VPN网关实例下，每个隧道的BGP网段需保持唯一。","type":"string","required":false,"example":"169.254.10.0/30"}},"required":false},"TunnelIkeConfig":{"description":"第一阶段协商的配置信息。","type":"object","properties":{"IkeAuthAlg":{"description":"第一阶段协商的认证算法。\n\n<props=\"intl\"><ph>取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm3**。</ph></props>","type":"string","required":false,"example":"md5"},"IkeEncAlg":{"description":"第一阶段协商的加密算法。\n\n<props=\"intl\"><ph>取值：**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值为**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm4**。</ph></props>","type":"string","required":false,"example":"aes"},"IkeLifetime":{"description":"第一阶段协商出的SA的生存周期。单位：秒。取值范围：**0**~**86400**。","type":"integer","format":"int64","required":false,"example":"86400"},"IkeMode":{"description":"IKE版本的协商模式。取值：\n\n- **main**：主模式，协商过程安全性高。\n- **aggressive**：野蛮模式，协商快速且协商成功率高。\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则协商模式仅支持**main**。</ph></props>","type":"string","required":false,"example":"main"},"IkePfs":{"description":"第一阶段协商使用的Diffie-Hellman密钥交换算法。取值：**group1**、**group2**、**group5**、**group14**。","type":"string","required":false,"example":"group2"},"IkeVersion":{"description":"IKE协议的版本。取值：**ikev1**或**ikev2**。\n\n相对于IKEv1版本，IKEv2版本简化了SA的协商过程并且对于多网段的场景提供了更好的支持。\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则IKE版本仅支持**ikev1**。</ph></props>","type":"string","required":false,"example":"ikev1"},"LocalId":{"description":"隧道本端（阿里云侧）的标识，用于第一阶段的协商。长度限制为100个字符。默认值为隧道的IP地址。\n\n**LocalId**支持FQDN格式，如果您使用FQDN格式，协商模式建议选择为**aggressive**（野蛮模式）。","type":"string","required":false,"example":"47.21.XX.XX"},"Psk":{"description":"预共享密钥，用于隧道与隧道对端之间的身份认证。\n\n- 密钥长度为1~100个字符，支持数字、大小写英文字母以及以下字符。```~!\\`@#$%^&*()_-+={}[]|;:',.<>/?```\n\n- 若您未指定预共享密钥，系统会随机生成一个16位的字符串作为预共享密钥。您可以调用[DescribeVpnConnection](~~2526951~~)接口查询系统自动生成的预共享密钥。     \n\n> 隧道及隧道对端的预共享密钥需一致，否则系统无法正常建立隧道。","type":"string","required":false,"example":"123456****"},"RemoteId":{"description":"隧道对端的标识，用于第一阶段的协商。长度限制为100个字符。默认值为隧道关联的用户网关的IP地址。\n\n**RemoteId**支持FQDN格式，如果您使用FQDN格式，协商模式建议选择为**aggressive**（野蛮模式）。","type":"string","required":false,"example":"47.42.XX.XX"}},"required":false},"TunnelIpsecConfig":{"description":"第二阶段协商的配置信息。 ","type":"object","properties":{"IpsecAuthAlg":{"description":"第二阶段协商的认证算法。\n\n<props=\"intl\"><ph>取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值：**md5**、**sha1**、**sha256**、**sha384**、**sha512**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm3**。</ph></props>","type":"string","required":false,"example":"md5"},"IpsecEncAlg":{"description":"第二阶段协商的加密算法。\n\n<props=\"intl\"><ph>取值：**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为普通型，则取值为**aes**、**aes192**、**aes256**、**des**或**3des**。</ph></props>\n\n<props=\"china\"><ph>如果VPN网关实例类型为国密型，则仅取值：**sm4**。</ph></props>","type":"string","required":false,"example":"aes"},"IpsecLifetime":{"description":"第二阶段协商出的SA的生存周期。单位：秒。取值范围：**0**~**86400**。","type":"integer","format":"int32","required":false,"example":"86400"},"IpsecPfs":{"description":"第二阶段协商使用的Diffie-Hellman密钥交换算法。\n\n取值：**disabled**、**group1**、**group2**、**group5**、**group14**。","type":"string","required":false,"example":"group2"}},"required":false}},"required":false},"required":false}},{"name":"EnableTunnelsBgp","in":"query","allowEmptyValue":true,"schema":{"description":"修改双隧道模式的IPsec-VPN连接时支持配置该参数。\n\n是否为隧道开启BGP功能。取值：**true**或**false**。","type":"boolean","required":false,"example":"true"}}],"responses":{"200":{"schema":{"description":"返回结果。","type":"object","properties":{"EnableNatTraversal":{"description":"IPsec连接是否已开启NAT穿越功能。取值：\n\n- **false**：未开启。\n\n- **true**：已开启。\n\n仅单隧道模式的IPsec-VPN连接会返回该参数。","type":"boolean","example":"true"},"CreateTime":{"description":"IPsec连接的创建时间戳。单位：毫秒。\n\n时间戳的格式采用Unix时间戳，表示从格林威治时间1970年01月01日00时00分00秒至创建IPsec连接时的总时长。\n\n","type":"integer","format":"int64","example":"1492753817000"},"EffectImmediately":{"description":"IPsec连接的配置是否立即生效。\n\n- **true**：是，配置完成后系统立即进行IPsec协议协商。\n   \n- **false**：否，当有流量进入时系统才进行IPsec协议协商。","type":"boolean","example":"false"},"VpnGatewayId":{"description":"VPN网关实例的ID。","type":"string","example":"vpn-bp1q8bgx4xnkm2ogj****"},"LocalSubnet":{"description":"VPC侧的网段。","type":"string","example":"10.1.1.0/24,10.1.2.0/24"},"RequestId":{"description":"请求ID。","type":"string","example":"7DB79D0C-5F27-4AB5-995B-79BE55102F90"},"VpnConnectionId":{"description":"IPsec连接的ID。","type":"string","example":"vco-bp1bbi27hojx80nck****"},"Description":{"description":"IPsec连接的描述信息。","type":"string","example":"description"},"RemoteSubnet":{"description":"本地数据中心侧的网段。","type":"string","example":"10.2.1.0/24,10.2.2.0/24"},"CustomerGatewayId":{"description":"IPsec连接关联的用户网关ID。\n\n仅单隧道模式的IPsec-VPN连接会返回该参数。","type":"string","example":"cgw-p0w2jemrcj5u61un8****"},"Name":{"description":"IPsec连接的名称。","type":"string","example":"nametest"},"EnableDpd":{"description":"IPsec连接是否已开启DPD（对等体存活检测）功能。\n\n- **false**：未开启。\n\n- **true**：已开启。\n\n仅单隧道模式的IPsec-VPN连接会返回该参数。","type":"boolean","example":"true"},"IkeConfig":{"description":"第一阶段协商的配置。\n\n仅单隧道模式的IPsec-VPN连接会返回**IkeConfig**数组下的参数。","type":"object","properties":{"RemoteId":{"description":"本地数据中心侧的标识。支持FQDN和IP格式，默认为当前选取的用户网关的IP地址。","type":"string","example":"139.18.XX.XX"},"IkeLifetime":{"description":"IKE阶段生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IkeEncAlg":{"description":"IKE阶段加密算法。","type":"string","example":"aes"},"LocalId":{"description":"VPC侧的标识。支持FQDN和IP格式，默认为当前选取的VPN网关的IP地址。","type":"string","example":"116.64.XX.XX"},"IkeMode":{"description":"IKE协商模式。\n\n- **main**：主模式，协商过程安全性高。\n- **aggressive**：野蛮模式，协商快速且协商成功率高。","type":"string","example":"main"},"IkeVersion":{"description":"IKE协议版本。\n\n- **ikev1**\n- **ikev2**\n\n相对于IKEv1版本，IKEv2版本简化了SA的协商过程并且对于多网段的场景提供了更好的支持。","type":"string","example":"ikev1"},"IkePfs":{"description":"IKE阶段DH分组。","type":"string","example":"group2"},"Psk":{"description":"预共享密钥。","type":"string","example":"pgw6dy7d1i8i****"},"IkeAuthAlg":{"description":"IKE阶段认证算法。","type":"string","example":"sha1"}}},"IpsecConfig":{"description":"第二阶段协商的配置。\n\n仅单隧道模式的IPsec-VPN连接会返回**IpsecConfig**数组下的参数。","type":"object","properties":{"IpsecAuthAlg":{"description":"IPsec阶段认证算法。","type":"string","example":"sha1"},"IpsecLifetime":{"description":"IPsec阶段生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IpsecEncAlg":{"description":"IPsec阶段加密算法。","type":"string","example":"aes"},"IpsecPfs":{"description":"IPsec阶段DH分组。","type":"string","example":"group2"}}},"VcoHealthCheck":{"description":"健康检查配置。\n\n仅单隧道模式的IPsec-VPN连接会返回**VcoHealthCheck**数组下的参数。","type":"object","properties":{"Dip":{"description":"目标IP。","type":"string","example":"192.168.1.1"},"Interval":{"description":"健康检查的重试间隔时间，单位：秒。","type":"integer","format":"int32","example":"3"},"Retry":{"description":"健康检查的重试发包次数。","type":"integer","format":"int32","example":"3"},"Sip":{"description":"源IP。","type":"string","example":"10.1.1.1"},"Enable":{"description":"IPsec连接是否已开启健康检查功能。\n\n- **true**：已开启。\n\n- **false**：未开启。","type":"string","example":"true"}}},"VpnBgpConfig":{"description":"BGP配置信息。\n\n仅单隧道模式的IPsec-VPN连接会返回**VpnBgpConfig**数组下的参数。\n\n","type":"object","properties":{"Status":{"description":"BGP的协商状态。\n\n- **success**：正常。\n\n- **false**：异常。","type":"string","example":"success"},"PeerBgpIp":{"description":"本地IDC侧的BGP地址。","type":"string","example":"169.254.11.2"},"TunnelCidr":{"description":"IPsec连接的BGP网段。","type":"string","example":"169.254.11.0/30"},"EnableBgp":{"description":"BGP的开启状态。\n\n- **true**：已开启。\n\n- **false**：未开启。","type":"string","example":"true"},"LocalBgpIp":{"description":"阿里云侧的BGP地址。","type":"string","example":"169.254.11.1"},"PeerAsn":{"description":"本地数据中心侧的自治系统号。","type":"integer","format":"int32","example":"65531"},"LocalAsn":{"description":"阿里云侧的自治系统号。","type":"integer","format":"int32","example":"65530"}}},"TunnelOptionsSpecification":{"type":"object","properties":{"TunnelOptions":{"description":"IPsec连接的隧道配置信息。\n\n仅双隧道模式的IPsec-VPN连接会返回**TunnelOptionsSpecification**数组下的参数。","type":"array","items":{"description":"隧道的配置信息。","type":"object","properties":{"CustomerGatewayId":{"description":"隧道关联的用户网关ID。","type":"string","example":"cgw-p0wy363lucf1uyae8****"},"EnableDpd":{"description":"隧道是否已开启DPD（对等体存活检测）功能。\n- **false**：未开启。\n- **true**：已开启。","type":"boolean","example":"true"},"EnableNatTraversal":{"description":"隧道是否已开启NAT穿越功能。\n\n- **false**：未开启。\n- **true**：已开启。","type":"boolean","example":"true"},"InternetIp":{"description":"隧道阿里云侧网关IP地址。","type":"string","example":"47.21.XX.XX"},"RemoteCaCertificate":{"description":"隧道对端的CA证书。\n\n仅VPN网关实例的类型为国密型时才会返回当前参数。","type":"string","example":"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----"},"Role":{"description":"隧道的角色。\n\n- **master**：表示当前隧道为主隧道。\n- **slave**：表示当前隧道为备隧道。","type":"string","example":"master"},"State":{"description":"隧道的状态。\n\n- **active**：状态正常。\n- **updating**：更新中。\n- **deleting**：删除中。","type":"string","example":"active"},"TunnelBgpConfig":{"description":"隧道的BGP配置信息。","type":"object","properties":{"LocalAsn":{"description":"隧道本端（阿里云侧）的自治系统号。","type":"integer","format":"int64","example":"65530"},"LocalBgpIp":{"description":"隧道本端（阿里云侧）的BGP地址。","type":"string","example":"169.254.10.1"},"PeerAsn":{"description":"隧道对端的自治系统号。","type":"integer","format":"int64","example":"65531"},"PeerBgpIp":{"description":"隧道对端的BGP地址。","type":"string","example":"169.254.10.2"},"TunnelCidr":{"description":"隧道的BGP网段。","type":"string","example":"169.254.10.0/30"}}},"TunnelId":{"description":"隧道ID。","type":"string","example":"tun-opsqc4d97wni27****"},"TunnelIkeConfig":{"description":"第一阶段协商的配置。","type":"object","properties":{"IkeAuthAlg":{"description":"IKE阶段认证算法。","type":"string","example":"sha1"},"IkeEncAlg":{"description":"IKE阶段加密算法。","type":"string","example":"aes"},"IkeLifetime":{"description":"IKE阶段生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IkeMode":{"description":"IKE协商模式。\n\n- **main**：主模式，协商过程安全性高。\n- **aggressive**：野蛮模式，协商快速且协商成功率高。","type":"string","example":"main"},"IkePfs":{"description":"IKE阶段DH分组。","type":"string","example":"group2"},"IkeVersion":{"description":"IKE协议版本。","type":"string","example":"ikev1"},"LocalId":{"description":"隧道本端（阿里云侧）的标识。","type":"string","example":"47.21.XX.XX"},"Psk":{"description":"预共享密钥。","type":"string","example":"123456****"},"RemoteId":{"description":"隧道对端的标识。","type":"string","example":"47.42.XX.XX"}}},"TunnelIpsecConfig":{"description":"第二阶段协商的配置。","type":"object","properties":{"IpsecAuthAlg":{"description":"IPsec阶段认证算法。","type":"string","example":"sha1"},"IpsecEncAlg":{"description":"IPsec阶段加密算法。","type":"string","example":"aes"},"IpsecLifetime":{"description":"IPsec阶段生存时间。单位：秒。","type":"integer","format":"int64","example":"86400"},"IpsecPfs":{"description":"IPsec阶段DH分组。","type":"string","example":"group2"}}},"ZoneNo":{"description":"隧道部署的可用区。","type":"string","example":"ap-southeast-5a"}}}}}},"EnableTunnelsBgp":{"description":"隧道BGP的开启状态。\n\n- **true**：已开启。\n- **false**：未开启。\n\n仅双隧道模式的IPsec-VPN连接会返回该参数。","type":"boolean","example":"true"},"ResourceGroupId":{"description":"IPsec连接所属的资源组ID。\n\nIPsec连接与其关联的VPN网关实例的资源组相同。您可以调用[ListResourceGroups](~~158855~~)接口查询资源组信息。","type":"string","example":"rg-acfmzs372yg****"}}}}},"errorCodes":{"400":[{"errorCode":"VpnGateway.Configuring","errorMessage":"The specified service is configuring."},{"errorCode":"VpnGateway.FinancialLocked","errorMessage":"The specified service is financial locked."},{"errorCode":"InvalidName","errorMessage":"The name is not valid"},{"errorCode":"VpnRouteEntry.AlreadyExists","errorMessage":"The specified route entry is already exist."},{"errorCode":"VpnRouteEntry.Conflict","errorMessage":"The specified route entry has conflict."},{"errorCode":"NotSupportVpnConnectionParameter.IpsecPfs","errorMessage":"The specified vpn connection ipsec Ipsec Pfs is not support."},{"errorCode":"NotSupportVpnConnectionParameter.IpsecAuthAlg","errorMessage":"The specified vpn connection ipsec Auth Alg is not support."},{"errorCode":"VpnRouteEntry.ConflictSSL","errorMessage":"The specified route entry has conflict with SSL client."},{"errorCode":"VpnRouteEntry.BackupRoute","errorMessage":"Validate backup route entry failed."},{"errorCode":"VpnRouteEntry.InvalidWeight","errorMessage":"Invalid route entry weight value."},{"errorCode":"QuotaExceeded.PBR","errorMessage":"The policy-based routes has reached the upper limit."},{"errorCode":"OperationUnsupported.SetDPD","errorMessage":"Current version of the VPN does not support setting DPD."},{"errorCode":"OperationUnsupported.SetNatTraversal","errorMessage":"Current version of the VPN does not support setting NAT traversal."},{"errorCode":"QuotaExceeded.PolicyBasedRoute","errorMessage":"The maximum number of policy-based routes is exceeded. Existing routes: %s. Routes to be created: %s. Maximum routes: %s."},{"errorCode":"MissingParameter.TunnelCidr","errorMessage":"The parameter TunnelCidr is mandatory when BGP is enabled."},{"errorCode":"OperationUnsupported.EnableBgp","errorMessage":"Current version of the VPN does not support enable BGP."},{"errorCode":"MissingParam.CustomerGatewayAsn","errorMessage":"Asn of customer gateway is mandatory when BGP is enabled."},{"errorCode":"IllegalParam.LocalAsn","errorMessage":"The specified LocalAsn is invalid."},{"errorCode":"IllegalParam.BgpConfig","errorMessage":"The specified BgpConfig is invalid."},{"errorCode":"IllegalParam.EnableBgp","errorMessage":"VPN connection must enable BGP when VPN gateway has enabled BGP."},{"errorCode":"IllegalParam.TunnelCidr","errorMessage":"The specified TunnelCidr is invalid."},{"errorCode":"InvalidLocalBgpIp.Malformed","errorMessage":"The specified LocalBgpIp is malformed."},{"errorCode":"IllegalParam.LocalBgpIp","errorMessage":"The specified LocalBgpIp is invalid."},{"errorCode":"IllegalParam.LocalSubnet","errorMessage":"The specified \"LocalSubnet\" (%s) is invalid."},{"errorCode":"IllegalParam.RemoteSubnet","errorMessage":"The specified \"RemoteSubnet\" (%s) is invalid."},{"errorCode":"OperationFailed.CenLevelNotSupport","errorMessage":"When the VPC to which the VPN gateway belongs is attached to a FULL-mode CEN, the VPN gateway cannot enable BGP."},{"errorCode":"InvalidTunnelCidr.Malformed","errorMessage":"The specified TunnelCidr is malformed."},{"errorCode":"CustomerGateway.ConflictRouteEntry","errorMessage":"The specified customer gateway has conflict with route entry."},{"errorCode":"VpnTask.CONFLICT","errorMessage":"Vpn task has conflict."},{"errorCode":"OperationFailed.RouteConflictWithIPsecServer","errorMessage":"Operation failed because the route to create conflicts with the client IP pool of the IPsec server."},{"errorCode":"IllegalParam.TunnelId","errorMessage":"The specified TunnelId is invalid."},{"errorCode":"IllegalParam.Role","errorMessage":"The specified Role is invalid."},{"errorCode":"VpnConnectionParamInvalid.SameVpnAndCgwDifferentIkeConfigs","errorMessage":"IPSec connections associated with the same user gateway and VPN gateway should have the same pre-shared key and IKE configuration."},{"errorCode":"VpnConnectionParamInvalid.SameVpnAndCgwTrafficSelectorOverlap","errorMessage":"Traffic selectors of IPSec connections associated with the same user gateway and VPN gateway should not overlap."},{"errorCode":"ModifyIkeV1WithMultiRoutes.Invalid","errorMessage":"Failed to modify VPN connection parameters. Multi-network is configured while using IkeV1 protocol."}],"403":[{"errorCode":"Forbbiden.SubUser","errorMessage":"User not authorized to operate on the specified resource as your account is created by another user."},{"errorCode":"Forbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"InvalidVpnConnectionInstanceId.NotFound","errorMessage":"The specified vpn connection instance id does not exist."}],"500":[{"errorCode":"OperationFailed.RouteConflictWithIPsecServer","errorMessage":"Operation failed because the specified route conflicts with IPsec server."}]},"staticInfo":{"returnType":"asynchronous","callback":"Vpc::2016-04-28::DescribeVpnGateway","callbackInterval":2000,"maxCallbackTimes":30},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"EnableNatTraversal\\\": true,\\n  \\\"CreateTime\\\": 1492753817000,\\n  \\\"EffectImmediately\\\": false,\\n  \\\"VpnGatewayId\\\": \\\"vpn-bp1q8bgx4xnkm2ogj****\\\",\\n  \\\"LocalSubnet\\\": \\\"10.1.1.0/24,10.1.2.0/24\\\",\\n  \\\"RequestId\\\": \\\"7DB79D0C-5F27-4AB5-995B-79BE55102F90\\\",\\n  \\\"VpnConnectionId\\\": \\\"vco-bp1bbi27hojx80nck****\\\",\\n  \\\"Description\\\": \\\"description\\\",\\n  \\\"RemoteSubnet\\\": \\\"10.2.1.0/24,10.2.2.0/24\\\",\\n  \\\"CustomerGatewayId\\\": \\\"cgw-p0w2jemrcj5u61un8****\\\",\\n  \\\"Name\\\": \\\"nametest\\\",\\n  \\\"EnableDpd\\\": true,\\n  \\\"IkeConfig\\\": {\\n    \\\"RemoteId\\\": \\\"139.18.XX.XX\\\",\\n    \\\"IkeLifetime\\\": 86400,\\n    \\\"IkeEncAlg\\\": \\\"aes\\\",\\n    \\\"LocalId\\\": \\\"116.64.XX.XX\\\",\\n    \\\"IkeMode\\\": \\\"main\\\",\\n    \\\"IkeVersion\\\": \\\"ikev1\\\",\\n    \\\"IkePfs\\\": \\\"group2\\\",\\n    \\\"Psk\\\": \\\"pgw6dy7d1i8i****\\\",\\n    \\\"IkeAuthAlg\\\": \\\"sha1\\\"\\n  },\\n  \\\"IpsecConfig\\\": {\\n    \\\"IpsecAuthAlg\\\": \\\"sha1\\\",\\n    \\\"IpsecLifetime\\\": 86400,\\n    \\\"IpsecEncAlg\\\": \\\"aes\\\",\\n    \\\"IpsecPfs\\\": \\\"group2\\\"\\n  },\\n  \\\"VcoHealthCheck\\\": {\\n    \\\"Dip\\\": \\\"192.168.1.1\\\",\\n    \\\"Interval\\\": 3,\\n    \\\"Retry\\\": 3,\\n    \\\"Sip\\\": \\\"10.1.1.1\\\",\\n    \\\"Enable\\\": \\\"true\\\"\\n  },\\n  \\\"VpnBgpConfig\\\": {\\n    \\\"Status\\\": \\\"success\\\",\\n    \\\"PeerBgpIp\\\": \\\"169.254.11.2\\\",\\n    \\\"TunnelCidr\\\": \\\"169.254.11.0/30\\\",\\n    \\\"EnableBgp\\\": \\\"true\\\",\\n    \\\"LocalBgpIp\\\": \\\"169.254.11.1\\\",\\n    \\\"PeerAsn\\\": 65531,\\n    \\\"LocalAsn\\\": 65530\\n  },\\n  \\\"TunnelOptionsSpecification\\\": {\\n    \\\"TunnelOptions\\\": [\\n      {\\n        \\\"CustomerGatewayId\\\": \\\"cgw-p0wy363lucf1uyae8****\\\",\\n        \\\"EnableDpd\\\": true,\\n        \\\"EnableNatTraversal\\\": true,\\n        \\\"InternetIp\\\": \\\"47.21.XX.XX\\\",\\n        \\\"RemoteCaCertificate\\\": \\\"-----BEGIN CERTIFICATE----- MIIB7zCCAZW**** -----END CERTIFICATE-----\\\",\\n        \\\"Role\\\": \\\"master\\\",\\n        \\\"State\\\": \\\"active\\\",\\n        \\\"TunnelBgpConfig\\\": {\\n          \\\"LocalAsn\\\": 65530,\\n          \\\"LocalBgpIp\\\": \\\"169.254.10.1\\\",\\n          \\\"PeerAsn\\\": 65531,\\n          \\\"PeerBgpIp\\\": \\\"169.254.10.2\\\",\\n          \\\"TunnelCidr\\\": \\\"169.254.10.0/30\\\"\\n        },\\n        \\\"TunnelId\\\": \\\"tun-opsqc4d97wni27****\\\",\\n        \\\"TunnelIkeConfig\\\": {\\n          \\\"IkeAuthAlg\\\": \\\"sha1\\\",\\n          \\\"IkeEncAlg\\\": \\\"aes\\\",\\n          \\\"IkeLifetime\\\": 86400,\\n          \\\"IkeMode\\\": \\\"main\\\",\\n          \\\"IkePfs\\\": \\\"group2\\\",\\n          \\\"IkeVersion\\\": \\\"ikev1\\\",\\n          \\\"LocalId\\\": \\\"47.21.XX.XX\\\",\\n          \\\"Psk\\\": \\\"123456****\\\",\\n          \\\"RemoteId\\\": \\\"47.42.XX.XX\\\"\\n        },\\n        \\\"TunnelIpsecConfig\\\": {\\n          \\\"IpsecAuthAlg\\\": \\\"sha1\\\",\\n          \\\"IpsecEncAlg\\\": \\\"aes\\\",\\n          \\\"IpsecLifetime\\\": 86400,\\n          \\\"IpsecPfs\\\": \\\"group2\\\"\\n        },\\n        \\\"ZoneNo\\\": \\\"ap-southeast-5a\\\"\\n      }\\n    ]\\n  },\\n  \\\"EnableTunnelsBgp\\\": true,\\n  \\\"ResourceGroupId\\\": \\\"rg-acfmzs372yg****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ModifyVpnConnectionAttributeResponse>\\n    <EnableNatTraversal>true</EnableNatTraversal>\\n    <CreateTime>1492753817000</CreateTime>\\n    <EffectImmediately>false</EffectImmediately>\\n    <VpnGatewayId>vpn-bp1q8bgx4xnkm2ogj****</VpnGatewayId>\\n    <LocalSubnet>10.1.1.0/24,10.1.2.0/24</LocalSubnet>\\n    <RequestId>7DB79D0C-5F27-4AB5-995B-79BE55102F90</RequestId>\\n    <VpnConnectionId>vco-bp1bbi27hojx80nck****</VpnConnectionId>\\n    <Description>description</Description>\\n    <RemoteSubnet>10.2.1.0/24,10.2.2.0/24</RemoteSubnet>\\n    <CustomerGatewayId>cgw-p0w2jemrcj5u61un8****</CustomerGatewayId>\\n    <Name>nametest</Name>\\n    <EnableDpd>true</EnableDpd>\\n    <IkeConfig>\\n        <RemoteId>139.18.XX.XX</RemoteId>\\n        <IkeLifetime>86400</IkeLifetime>\\n        <IkeEncAlg>aes</IkeEncAlg>\\n        <LocalId>116.64.XX.XX</LocalId>\\n        <IkeMode>main</IkeMode>\\n        <IkeVersion>ikev1</IkeVersion>\\n        <IkePfs>group2</IkePfs>\\n        <Psk>pgw6dy7d1i8i****</Psk>\\n        <IkeAuthAlg>sha1</IkeAuthAlg>\\n    </IkeConfig>\\n    <IpsecConfig>\\n        <IpsecAuthAlg>sha1</IpsecAuthAlg>\\n        <IpsecLifetime>86400</IpsecLifetime>\\n        <IpsecEncAlg>aes</IpsecEncAlg>\\n        <IpsecPfs>group2</IpsecPfs>\\n    </IpsecConfig>\\n    <VcoHealthCheck>\\n        <Dip>192.168.1.1</Dip>\\n        <Interval>3</Interval>\\n        <Retry>3</Retry>\\n        <Sip>10.1.1.1</Sip>\\n        <Enable>true</Enable>\\n    </VcoHealthCheck>\\n    <VpnBgpConfig>\\n        <Status>success</Status>\\n        <PeerBgpIp>169.254.11.2</PeerBgpIp>\\n        <TunnelCidr>169.254.11.0/30</TunnelCidr>\\n        <EnableBgp>true</EnableBgp>\\n        <LocalBgpIp>169.254.11.1</LocalBgpIp>\\n        <PeerAsn>65531</PeerAsn>\\n        <LocalAsn>65530</LocalAsn>\\n    </VpnBgpConfig>\\n</ModifyVpnConnectionAttributeResponse>\",\"errorExample\":\"\"}]","title":"修改IPsec连接的配置信息","description":"- 如果要修改双隧道模式的IPsec-VPN连接，调用`ModifyVpnConnectionAttribute`接口时除支持配置必填参数外，还支持配置以下请求参数：\n\n   **ClientToken**、**Name**、 **LocalSubnet**、**RemoteSubnet**、**EffectImmediately**、**AutoConfigRoute**、**TunnelOptionsSpecification**数组、**EnableTunnelsBgp**。\n\n- 如果要修改单隧道模式的IPsec-VPN连接，调用`ModifyVpnConnectionAttribute`接口时除支持配置必填参数外，还支持配置以下请求参数：\n\n     **ClientToken**、**Name**、**LocalSubnet**、**RemoteSubnet**、**EffectImmediately**、**IkeConfig**、**IpsecConfig**、**HealthCheckConfig**、**AutoConfigRoute**、**EnableDpd**、**EnableNatTraversal**、**BgpConfig**、**RemoteCaCertificate**。\n\n- **ModifyVpnConnectionAttribute**接口属于异步接口，即系统返回一个请求ID，但该IPsec连接的配置信息未修改成功，系统后台的修改任务仍在进行。您可以调用[DescribeVpnGateway](~~73720~~)查询VPN网关实例状态，来确定IPsec连接的配置信息的修改状态：\n    - 当VPN网关实例处于**updating**状态时，表示IPsec连接的配置信息正在修改中。\n    - 当VPN网关实例处于**active**状态时，表示IPsec连接的配置信息修改成功。\n- **ModifyVpnConnectionAttribute**接口不支持在同一VPN网关下并发修改IPsec连接的配置信息。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}