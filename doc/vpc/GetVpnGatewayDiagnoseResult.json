{"summary":"调用GetVpnGatewayDiagnoseResult接口查询VPN网关实例的一键诊断结果。","description":"调用**GetVpnGatewayDiagnoseResult**接口时，除必填参数外，**DiagnoseId**和**VpnGatewayId**参数需至少输入一个。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"RegionId","in":"query","schema":{"title":"RegionId","description":"VPN网关实例所属的地域ID。\n\n您可以通过调用[DescribeRegions](~~36063~~)接口获取地域ID。  ","type":"string","required":true,"example":"cn-qingdao"}},{"name":"DiagnoseId","in":"query","schema":{"title":"DiagnoseId","description":"诊断ID。\n\n在您[DiagnoseVpnGateway](~~469751~~)调用接口时，系统会返回对应的诊断ID。","type":"string","required":false,"example":"vpndgn-uf6kuxbe3iv028k3s****"}},{"name":"VpnGatewayId","in":"query","schema":{"title":"VpnGatewayId","description":"VPN网关实例ID。\n\n","type":"string","required":false,"example":"vpn-uf6fzwp0ck3frwtbk****"}},{"name":"ClientToken","in":"query","schema":{"title":"system param","description":"客户端Token，用于保证请求的幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符。\n\n>若您未指定，则系统自动使用API请求的RequestId作为ClientToken标识。每次API请求的RequestId不一样。","type":"string","required":false,"example":"02fb3da4-130e-11e9-8e44-001****"}}],"responses":{"200":{"schema":{"title":"Schema object","description":"返回结果。","type":"object","properties":{"BeginTime":{"title":"FinishTime","description":"诊断开始的时间。\n\n时间按照ISO8601标准表示，并使用UTC时间。格式为：`YYYY-MM-DDThh:mm:ssZ`。","type":"string","example":"2022-12-15T05:28:57Z"},"DiagnoseId":{"title":"DiagnoseId","description":"诊断ID。","type":"string","example":"vpndgn-uf6sgneym02lxyuv4****"},"DiagnoseResult":{"title":"DiagnoseResult","description":"诊断项信息列表。","type":"array","items":{"description":"诊断项信息。","type":"object","properties":{"DiagnoseName":{"title":"diagnoseName","description":"诊断项。\n\n- **RouteEntryConflict**：路由冲突。\n- **VpnRouteQuota**：VPN网关目的路由配额。\n- **VpnIPsecQuota**：VPN网关IPsec连接配额。\n- **VpnPbrRouteQuota**：VPN网关策略路由配额。\n- **VcoConfigConsistency**：IPsec配置一致性。\n- **VcoUserInternetIpConnectivity**：用户网关公网连通性。\n- **VcoPrivateConnectivity**：私网连通性。\n\n关于每个诊断项的说明信息，请参见[一键诊断背景信息](~~190330~~)。\n","type":"string","example":"RouteEntryConflict"},"DiagnoseResultDescription":{"title":"DiagnoseResultDescription","description":"诊断项的诊断结果。\n\n针对每个诊断项，接口会返回不同的信息，说明如下：\n\n- **RouteEntryConflict**：系统会返回对应路由冲突的信息。\n- **VpnRouteQuota**：\n    - **quotaName**：目的路由配额ID。\n    - **quantity**：当前VPN网关实例支持创建的目的路由条目数量。\n    - **used**：当前VPN网关实例已创建的目的路由条目数量。\n- **VpnIPsecQuota**：\n    - **quotaName**：IPsec连接配额ID。\n    - **quantity**：当前VPN网关实例支持创建的IPsec连接数量。\n    - **used**：当前VPN网关实例已创建的IPsec连接数量。\n- **VpnPbrRouteQuota**：\n    - **quotaName**：策略路由配额ID。\n    - **quantity**：当前VPN网关实例支持创建的策略路由条目数量。\n    - **used**：当前VPN网关实例已创建的策略路由条目数量。\n- **VcoConfigConsistency**：\n    - **vcoLackConf**：系统无法获取IPsec连接对端的配置。\n    - **vcoRunningConf**：IPsec连接对端已添加的配置信息。\n    - **vcoDiffConf**：IPsec连接侧（本端）和对端不一致的配置列表。\n    - **vcoConf**：IPsec连接侧（本端）已添加的配置信息。\n- **VcoUserInternetIpConnectivity**：\n    - **targetIp**：用户网关的公网IP地址。\n    - **rtt**：系统访问用户网关公网IP地址时的时延。单位：ms。\n    - **lossRate**：系统访问用户网关公网IP地址时的丢包率。\n- **VcoPrivateConnectivity**：\n    - **targetIp**：源IP地址。\n    - **srcIp**：目的IP地址。\n    - **rtt**：源IP地址访问目的IP地址时的时延。单位：ms。\n    - **lossRate**：源IP地址访问目的IP地址时的丢包率。\n\n","type":"string","example":"{\\\"targetIp\\\":\\\"192.168.0.1\\\",\\\"srcIp\\\":\\\"192.168.1.1\\\",\\\"rtt\\\":-1.0,\\\"lossRate\\\":100.0}"},"DiagnoseResultLevel":{"title":"DiagnoseResultLevel","description":"诊断项的诊断结果级别。\n\n- **normal**：正常。\n- **warning**：警告。\n- **error**：异常。\n\n关于每个诊断项对应的每个诊断结果级别的说明，请参见[一键诊断背景信息](~~190330~~)。","type":"string","example":"normal"}}}},"FinishTime":{"title":"FinishTime","description":"诊断结束的时间。\n\n时间按照ISO8601标准表示，并使用UTC时间。格式为：`YYYY-MM-DDThh:mm:ssZ`。","type":"string","example":"2022-12-15T05:29:08Z"},"FinishedCount":{"title":"FinishedCount","description":"已完成诊断的诊断项数量。","type":"integer","format":"int32","example":"7"},"RequestId":{"title":"RequestId","description":"请求ID。","type":"string","example":"312C4D5A-6563-5FC6-8C6E-A43A5A316FEB"},"ResourceInstanceId":{"title":"ResourceInstanceId","description":"诊断的资源ID。","type":"string","example":"vco-uf6huqsu63azl7mdp****"},"ResourceType":{"title":"ResourceType","description":"诊断的资源类型。\n\n取值：**IPsec**，表示IPsec连接。","type":"string","example":"IPsec"},"TotalCount":{"title":"TotalCount","description":"诊断项总数。","type":"integer","format":"int32","example":"7"},"VpnGatewayId":{"title":"VpnGatewayId","description":"VPN网关实例ID。\n","type":"string","example":"vpn-uf6fzwp0ck3frwtbk****"}}}}},"errorCodes":{"400":[{"errorCode":"param_error","errorMessage":"The param is must be in ..."},{"errorCode":"MissingParam.DiagnoseInfo","errorMessage":"The VPN gateway ID and diagnose ID cannot be empty at the same time."},{"errorCode":"VpnGateway.Configuring","errorMessage":"The specified service is configuring."},{"errorCode":"IncorrectStatus.DiagnoseTimeout","errorMessage":"Diagnose failed because of timeout."},{"errorCode":"IncorrectStatus.VpnConnectionDeleted","errorMessage":"Diagnose failed because the VPN connection has been deleted."}],"403":[{"errorCode":"Forbidden","errorMessage":"User not authorized to operate on the specified resource."}],"404":[{"errorCode":"InvalidDiagnoseId.NotFound","errorMessage":"The specified diagnose ID [%s] does not exist."},{"errorCode":"InvalidVpnGatewayId.NotFound","errorMessage":"The specified VPN gateway [%s] does not have any diagnoses."},{"errorCode":"InvalidVpnGatewayInstanceId.NotFound","errorMessage":"The specified vpn gateway instance id does not exist."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"BeginTime\\\": \\\"2022-12-15T05:28:57Z\\\",\\n  \\\"DiagnoseId\\\": \\\"vpndgn-uf6sgneym02lxyuv4****\\\",\\n  \\\"DiagnoseResult\\\": [\\n    {\\n      \\\"DiagnoseName\\\": \\\"RouteEntryConflict\\\",\\n      \\\"DiagnoseResultDescription\\\": \\\"{\\\\\\\\\\\\\\\"targetIp\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"192.168.0.1\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"srcIp\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"192.168.1.1\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"rtt\\\\\\\\\\\\\\\":-1.0,\\\\\\\\\\\\\\\"lossRate\\\\\\\\\\\\\\\":100.0}\\\",\\n      \\\"DiagnoseResultLevel\\\": \\\"normal\\\"\\n    }\\n  ],\\n  \\\"FinishTime\\\": \\\"2022-12-15T05:29:08Z\\\",\\n  \\\"FinishedCount\\\": 7,\\n  \\\"RequestId\\\": \\\"312C4D5A-6563-5FC6-8C6E-A43A5A316FEB\\\",\\n  \\\"ResourceInstanceId\\\": \\\"vco-uf6huqsu63azl7mdp****\\\",\\n  \\\"ResourceType\\\": \\\"IPsec\\\",\\n  \\\"TotalCount\\\": 7,\\n  \\\"VpnGatewayId\\\": \\\"vpn-uf6fzwp0ck3frwtbk****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetVpnGatewayDiagnoseResultResponse>\\n    <TotalCount>7</TotalCount>\\n    <FinishTime>2022-12-15T05:29:08Z</FinishTime>\\n    <RequestId>312C4D5A-6563-5FC6-8C6E-A43A5A316FEB</RequestId>\\n    <VpnGatewayId>vpn-uf6fzwp0ck3frwtbk****</VpnGatewayId>\\n    <FinishedCount>7</FinishedCount>\\n    <DiagnoseId>vpndgn-uf6sgneym02lxyuv4****</DiagnoseId>\\n    <BeginTime>2022-12-15T05:28:57Z</BeginTime>\\n    <ResourceType>IPsec</ResourceType>\\n    <ResourceInstanceId>vco-uf6huqsu63azl7mdp****</ResourceInstanceId>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>normal</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>No routing conflict</DiagnoseResultDescription>\\n        <DiagnoseName>RouteEntryConflict</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>normal</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"quotaName\\\":\\\"vpn_route_entry_quota\\\",\\\"quantity\\\":\\\"30\\\",\\\"used\\\":\\\"0\\\"}</DiagnoseResultDescription>\\n        <DiagnoseName>VpnRouteQuota</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>normal</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"quotaName\\\":\\\"vpn_quota_ipsec_connetcions_num\\\",\\\"quantity\\\":\\\"10\\\",\\\"used\\\":\\\"1\\\"}</DiagnoseResultDescription>\\n        <DiagnoseName>VpnIPsecQuota</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>normal</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"quotaName\\\":\\\"vpn_pbr_route_entry_quota\\\",\\\"quantity\\\":\\\"20\\\",\\\"used\\\":\\\"0\\\"}</DiagnoseResultDescription>\\n        <DiagnoseName>VpnPbrRouteQuota</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>warning</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"vcoLackConf\\\":[\\\"leftid\\\",\\\"rightid\\\",\\\"right\\\",\\\"leftsubnets\\\",\\\"rightsubnets\\\",\\\"ike_auth_alg\\\",\\\"ike_enc_alg\\\",\\\"ike_lifetime\\\",\\\"ipsec_auth_alg\\\",\\\"ipsec_enc_alg\\\",\\\"ipsec_lifetime\\\",\\\"nat_traversal\\\",\\\"dpd\\\",\\\"ike_pfs\\\",\\\"ipsec_pfs\\\"],\\\"vcoRunningConf\\\":{},\\\"vcoDiffConf\\\":{},\\\"vcoConf\\\":{\\\"ipsec_lifetime\\\":\\\"86400\\\",\\\"ike_pfs\\\":\\\"group2\\\",\\\"ike_enc_alg\\\":\\\"aes\\\",\\\"leftsubnets\\\":\\\"0.0.0.0/0\\\",\\\"nat_traversal\\\":\\\"true\\\",\\\"leftid\\\":\\\"47.XX.XX.15\\\",\\\"right\\\":\\\"1.XX.XX.1\\\",\\\"rightsubnets\\\":\\\"0.0.0.0/0\\\",\\\"ipsec_pfs\\\":\\\"group2\\\",\\\"ike_auth_alg\\\":\\\"sha1\\\",\\\"ike_lifetime\\\":\\\"86400\\\",\\\"rightid\\\":\\\"1.XX.XX.1\\\",\\\"dpd\\\":\\\"true\\\",\\\"ipsec_auth_alg\\\":\\\"sha1\\\",\\\"ipsec_enc_alg\\\":\\\"aes\\\"}}</DiagnoseResultDescription>\\n        <DiagnoseName>VcoConfigConsistency</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>error</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"targetIp\\\":\\\"1.XX.XX.1\\\",\\\"rtt\\\":-1.0,\\\"lossRate\\\":100.0}</DiagnoseResultDescription>\\n        <DiagnoseName>VcoUserInternetIpConnectivity</DiagnoseName>\\n    </DiagnoseResult>\\n    <DiagnoseResult>\\n        <DiagnoseResultLevel>error</DiagnoseResultLevel>\\n        <DiagnoseResultDescription>{\\\"targetIp\\\":\\\"192.168.0.1\\\",\\\"srcIp\\\":\\\"192.168.1.1\\\",\\\"rtt\\\":-1.0,\\\"lossRate\\\":100.0}</DiagnoseResultDescription>\\n        <DiagnoseName>VcoPrivateConnectivity</DiagnoseName>\\n    </DiagnoseResult>\\n</GetVpnGatewayDiagnoseResultResponse>\",\"errorExample\":\"\"}]","title":"查询VPN网关实例的一键诊断结果"}