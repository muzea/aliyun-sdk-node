{"summary":"修改标签路由规则。","methods":["post"],"schemes":["http","https"],"tags":["msc"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"Region","in":"query","schema":{"description":"地域。","type":"string","required":false,"docRequired":true,"example":"cn-hangzhou"}},{"name":"Namespace","in":"query","schema":{"title":"应用所属的MSE命名空间","description":"应用所属的MSE命名空间","type":"string","required":false,"example":"default","maxLength":64}},{"name":"AppName","in":"query","schema":{"title":"应用名字","description":"应用名字","type":"string","required":false,"example":"example-app","maxLength":64}},{"name":"AppId","in":"query","schema":{"description":"应用ID。","type":"string","deprecated":true,"required":true,"docRequired":true,"example":"h5pohqu3gd@xxx"}},{"name":"Rules","in":"query","style":"json","schema":{"title":"key为标签名。","description":"路由规则。","type":"object","required":false,"additionalProperties":{"type":"object","properties":{"Status":{"type":"integer","format":"int32","required":false,"description":"状态。","enumValueTitles":{"0":"未生效","1":"生效","2":"失效"},"example":"0"},"Rate":{"type":"integer","format":"int32","required":false,"example":"10","description":"百分比。"},"Enable":{"type":"boolean","required":false,"example":"true","description":"是否开启。"},"Tag":{"type":"string","required":false,"description":"这个路由规则的环境。","example":"gray"},"Name":{"title":"路由规则名称。","description":"路由规则名称。","type":"string","required":false,"example":"gray"},"Id":{"type":"integer","format":"int64","required":false,"example":"1","description":"规则ID。"},"InstanceNum":{"type":"integer","format":"int32","required":false,"description":"实例数量。","example":"10"},"Rules":{"title":"规则信息。","description":"规则信息。","type":"object","properties":{"springcloud":{"title":"springcloud规则。","description":"springcloud规则。","type":"array","items":{"type":"object","properties":{"condition":{"title":"下面 items 各项中的逻辑运算关系。可选 AND 或者 OR。","description":"下面 items 各项中的逻辑运算关系。可选 AND 或者 OR。","type":"string","required":false,"example":"AND"},"restItems":{"type":"array","items":{"type":"object","properties":{"datum":{"type":"string","required":false,"example":"10","description":"rawvalue 等操作符需要比较的值。"},"operator":{"title":"操作符。rawvalue 表示直接比较，mode 表示取模，list 表示白名单。","description":"操作符。rawvalue 表示直接比较，mode 表示取模，list 表示白名单。","type":"string","required":false,"example":"rawvalue"},"nameList":{"type":"array","items":{"type":"string","required":false,"description":"名称。","example":"test1"},"required":false,"description":"list 操作符需要的字段。"},"cond":{"title":"比较符号，可取 >=, <=, >, <, == 。","description":"比较符号，可取 >=, <=, >, <, == 。","type":"string","required":false,"example":"=="},"divisor":{"type":"integer","format":"int32","required":false,"example":"30","description":"mod 操作符需要的字段，除数。"},"remainder":{"type":"integer","format":"int32","required":false,"description":"百分比操作需要的字段，百分比值。","example":"30"},"rate":{"title":"比例规则，20% 的流量路由到该标签对应的节点。","description":"比例规则，20% 的流量路由到该标签对应的节点。","type":"integer","format":"int32","required":false,"example":"20"},"type":{"type":"string","required":false,"example":"test","description":"类型。"},"name":{"type":"string","required":false,"example":"key","description":"名称。"},"value":{"type":"any","required":false,"example":"test","description":"值。"}},"required":false},"required":false},"triggerPolicy":{"type":"string","required":false,"enumValueTitles":{"PERCENT":"比例规则","CONTENT":"内容匹配规则"},"example":"CONTENT","description":"策略类型。"},"enable":{"type":"boolean","required":false,"description":"是否开启。","example":"true"},"appId":{"type":"string","required":false,"example":"***@***","description":"应用ID。"},"priority":{"type":"integer","format":"int32","required":false,"description":"优先级。","example":"1"},"tags":{"type":"array","items":{"type":"string","required":false,"example":"gray","description":"标签。"},"required":false,"description":"标签列表。"},"paths":{"type":"array","items":{"type":"string","required":false,"example":"/hello","description":"路径。"},"required":false,"description":"路径列表。"},"path":{"type":"string","required":false,"description":"路径。","example":"/hello"}},"required":false},"required":false},"dubbo":{"title":"dubbo 规则。","description":"dubbo 规则。","type":"array","items":{"type":"object","properties":{"appId":{"type":"string","required":false,"description":"应用ID。","example":"***@***\n"},"tags":{"type":"array","items":{"type":"string","required":false,"example":"gray","description":"标签。"},"required":false,"description":"标签列表。"},"triggerPolicy":{"type":"string","required":false,"description":"策略类型。","example":"CONTENT"},"serviceName":{"title":"服务名（接口）。","description":"服务名（接口）。","type":"string","required":false,"example":"HelloService"},"group":{"title":"dubbo服务分组。","description":"dubbo服务分组。","type":"string","required":false,"example":"default"},"version":{"title":"dubbo服务版本。","description":"dubbo服务版本。","type":"string","required":false,"example":"1.0.0"},"methodName":{"title":"dubbo服务的方法名。","description":"dubbo服务的方法名。","type":"string","required":false,"example":"hello"},"paramTypes":{"type":"array","items":{"type":"string","required":false,"example":"int","description":"参数类型。"},"required":false,"description":"参数类型列表。"},"condition":{"title":"下面 items 各项中的逻辑运算关系。可选 AND 或者 OR。","description":"下面 items 各项中的逻辑运算关系。可选 AND 或者 OR。","type":"string","required":false,"example":"AND"},"argumentItems":{"type":"array","items":{"type":"object","properties":{"operator":{"title":"操作符。rawvalue 表示直接比较，mode 表示取模，list 表示白名单。","description":"操作符。rawvalue 表示直接比较，mode 表示取模，list 表示白名单。","type":"string","required":false,"example":"rawvalue"},"nameList":{"type":"array","items":{"type":"string","required":false,"description":"名称。","example":"demo"},"required":false,"description":"名称列表。"},"datum":{"type":"string","required":false,"description":"rawvalue 等操作符需要比较的值。","example":"30\n"},"cond":{"title":"比较符号，可取 >=, <=, >, <, == 。","description":"比较符号，可取 >=, <=, >, <, == 。","type":"string","required":false,"example":"=="},"divisor":{"type":"integer","format":"int32","required":false,"description":"mod 操作符需要的字段，除数。","example":"30\n"},"remainder":{"type":"integer","format":"int32","required":false,"example":"30\n","description":"百分比操作需要的字段，百分比值。"},"rate":{"type":"integer","format":"int32","required":false,"description":"比例规则，20% 的流量路由到该标签对应的节点。","example":"10"},"index":{"title":"参数位置，从0开始。","description":"参数位置，从0开始。","type":"integer","format":"int32","required":false,"example":"0"},"expr":{"title":"表达式，见其他字段解释。","description":"表达式，见其他字段解释。","type":"string","required":false},"value":{"title":"比较的值。表达式得到的值会跟这个值比较。如果 operator 是 list 白名单，value 的值用 \\\",\\\" 分隔，比如 1,2,3。","description":"比较的值。表达式得到的值会跟这个值比较。如果 operator 是 list 白名单，value 的值用 \\\",\\\" 分隔，比如 1,2,3。","type":"any","required":false,"example":"1,2,3"}},"required":false,"description":"参数内容。"},"required":false,"description":"参数内容列表。"}},"required":false,"description":"规则内容。"},"required":false}},"required":false}}}}},{"name":"NamespaceId","in":"query","schema":{"description":"命名空间ID，可以不填。","type":"string","required":false,"example":"12233****"}},{"name":"Enable","in":"query","schema":{"description":"是否开启。","type":"boolean","required":false,"example":"true"}},{"name":"AcceptLanguage","in":"query","schema":{"title":"返回结果显示的语言。取值：zh（默认值）：中文，en：英文","description":"返回信息的语言类型：\n\n- zh：中文\n- en：英文","type":"string","required":false,"example":"zh"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"description":"响应信息。","type":"string","example":"success"},"RequestId":{"description":"请求ID。","type":"string","example":"316F5F64-F73D-42DC-8632-01E308B6****"},"Data":{"description":"数据概览","type":"array","items":{"description":"数据概览","type":"object","properties":{"Status":{"description":"生效状态","type":"integer","format":"int32","example":"1"},"InstanceNum":{"description":"实例数量","type":"integer","format":"int32","example":"1"},"Remove":{"description":"是否删除成功。","type":"boolean"},"CarryData":{"description":"是否为主键。","type":"boolean","example":"true"},"Tag":{"description":"标签。","type":"string","example":"gray"},"Name":{"description":"策略名称","type":"string","example":"test"},"Rules":{"description":"标签规则","type":"string","example":"{\\\"_base\\\": {\\\"rate\\\": 100, \\\"remove\\\": true}, \\\"blue\\\": {\\\"rate\\\": 0}}"},"Id":{"description":"主键ID。","type":"integer","format":"int64","example":"12"},"Rate":{"description":"比例","type":"integer","format":"int32","example":"10"},"Enable":{"description":"开启或关闭。\n\n- `true`：开启。\n- `false`：关闭。","type":"boolean","example":"true"}}}},"Success":{"description":"请求结果","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalRequest","errorMessage":"Invalid request:%s"},{"errorCode":"InvalidParameter","errorMessage":"Parameter error:%s"}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation:%s"}],"404":[{"errorCode":"NotFound","errorMessage":"Not found:%s"}],"500":[{"errorCode":"InternalError","errorMessage":"Console error. Try again later:%s"}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"RequestId\\\": \\\"316F5F64-F73D-42DC-8632-01E308B6****\\\",\\n  \\\"Data\\\": [\\n    {\\n      \\\"Status\\\": 1,\\n      \\\"InstanceNum\\\": 1,\\n      \\\"Remove\\\": true,\\n      \\\"CarryData\\\": true,\\n      \\\"Tag\\\": \\\"gray\\\",\\n      \\\"Name\\\": \\\"test\\\",\\n      \\\"Rules\\\": \\\"{\\\\\\\\\\\\\\\"_base\\\\\\\\\\\\\\\": {\\\\\\\\\\\\\\\"rate\\\\\\\\\\\\\\\": 100, \\\\\\\\\\\\\\\"remove\\\\\\\\\\\\\\\": true}, \\\\\\\\\\\\\\\"blue\\\\\\\\\\\\\\\": {\\\\\\\\\\\\\\\"rate\\\\\\\\\\\\\\\": 0}}\\\",\\n      \\\"Id\\\": 12,\\n      \\\"Rate\\\": 10,\\n      \\\"Enable\\\": true\\n    }\\n  ],\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"修改标签路由规则"}