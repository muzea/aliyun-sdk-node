{"summary":"获取网关鉴权详情。","methods":["get","post"],"schemes":["http","https"],"tags":["gateway"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"get","abilityTreeCode":"37108","abilityTreeNodes":["FEATUREmseFZIQVY"]},"parameters":[{"name":"Id","in":"query","schema":{"title":"鉴权ID","description":"鉴权ID","type":"integer","format":"int64","required":false,"example":"1100"}},{"name":"GatewayId","in":"query","schema":{"title":"网关ID（和网关唯一ID二选一）","description":"网关ID（和网关唯一ID二选一）","type":"integer","format":"int64","required":false,"example":"2274"}},{"name":"GatewayUniqueId","in":"query","schema":{"title":"网关唯一ID（和网关ID二选一，网关唯一ID不为空时优先使用网关唯一ID查询）","description":"网关唯一ID（和网关ID二选一，网关唯一ID不为空时优先使用网关唯一ID查询）","type":"string","required":false,"example":"gw-6f0dbd108a0249d2b675b3ef50b*****"}},{"name":"AcceptLanguage","in":"query","schema":{"title":"返回结果显示的语言。取值：zh（默认值）：中文，en：英文","description":"返回结果显示的语言。取值：\n* zh（默认值）：中文\n* en：英文","type":"string","required":false,"example":"zh"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"请求ID","description":"请求ID","type":"string","example":"9C96CDF8-9E6C-XXXX-XXXX-8F87A10117E6"},"HttpStatusCode":{"title":"HTTP 状态码。","description":"HTTP 状态码。","type":"integer","format":"int32","example":"200"},"Message":{"title":"信息。","description":"信息。","type":"string","example":"OK"},"Code":{"title":"用于和Success同步，当Success为true时，Code为200","description":"用于和Success同步，当Success为true时，Code为200","type":"integer","format":"int32","example":"200"},"Success":{"title":"请求是否成功","description":"请求是否成功","type":"boolean","example":"true"},"Data":{"title":"鉴权详情","description":"鉴权详情","type":"object","properties":{"Id":{"title":"鉴权ID","description":"鉴权ID","type":"integer","format":"int64","example":"1100"},"Name":{"title":"鉴权名称","description":"鉴权名称","type":"string","example":"test"},"GatewayUniqueId":{"title":"鉴权所属网关的唯一ID","description":"鉴权所属网关的唯一ID","type":"string","example":"gw-6f0dbd108a0249d2b675b3ef50b*****"},"GatewayId":{"title":"鉴权所属网关的ID","description":"鉴权所属网关的ID","type":"integer","format":"int64","example":"2274"},"Type":{"title":"鉴权类型：\n\n- JWT\n- OIDC\n- IDaaS\n- ExternalAuthZ（自建的鉴权服务）","description":"鉴权类型：\n\n- JWT\n- OIDC\n- IDaaS\n- ExternalAuthZ（自建的鉴权服务）","type":"string","example":"JWT"},"Issuer":{"title":"鉴权类型为JWT/OIDC时使用：\n\n- JWT：表示JWT claims 的iss(issuer)，即签发人。\n- OIDC：表示OIDC claims 的iss(issuer)，即签发人","description":"鉴权类型为JWT/OIDC时使用：\n\n- JWT：表示JWT claims 的iss(issuer)，即签发人。\n- OIDC：表示OIDC claims 的iss(issuer)，即签发人","type":"string","example":"https://example.com/auth"},"Jwks":{"title":"JWT公钥，JSON格式","description":"JWT公钥，JSON格式","type":"string","example":"{\\n  \\\"keys\\\":[\\n    {\\n      \\\"kty\\\": \\\"RSA\\\",\\n      \\\"e\\\": \\\"AQAB\\\",\\n      \\\"use\\\": \\\"sig\\\",\\n      \\\"kid\\\": \\\"1rGufmH1YN8rqM9ZOLgo7eEST3AnL89Y-m-XGFioLoA\\\",\\n      \\\"alg\\\": \\\"RS256\\\",\\n      \\\"n\\\": \\\"rM2GIc0YTMqwNCwXnjKbW5QndkCEZgyLu3uQUnyZF7HvMTekiTvQg_39mg3dV1eaYYkYfZBogyroJBqAQXhk6VVCxlBjFVp2xstJPVWngMOOlcafwN_BKdN-EQ06O_Uu__e7gNKI3DunkNk0cNaFETE7d4meRYyTlgEzYgsrW05_ufR0BKoddL3E5JsCpUxRjH9ICbodBx0U74W6Dcci-R2EA1DBrEcboE6n90uoJs6UJNriAK_71nAsYonihU5aQFFnyPTkJHfRwHK6JlME6rn-b-rpLSpdyc6U1nOFZP2DEpz8U5FrYoLYSZIU-MQGxDhCnGc_rxl2IyP9B2qcCQ\\\"\\n    }\\n  ]\\n}\\n"},"IsWhite":{"title":"授权黑白名单模式：\n\n- true：白名单模式（名单中的 hosts + paths 不需要校验即可访问，其余都需要校验）\n- false：黑名单模式（名单中的 hosts + paths 需要校验，其余可直接访问）","description":"授权黑白名单模式：\n\n- true：白名单模式（名单中的 hosts + paths 不需要校验即可访问，其余都需要校验）\n- false：黑名单模式（名单中的 hosts + paths 需要校验，其余可直接访问）","type":"boolean","example":"true"},"GmtCreate":{"title":"鉴权创建的GMT时间","description":"鉴权创建的GMT时间","type":"string","example":"2024-02-19T02:41:03.000+0000"},"GmtModified":{"title":"鉴权修改的GMT时间","description":"鉴权修改的GMT时间","type":"string","example":"2024-02-19T02:41:03.000+0000"},"TokenPosition":{"title":"JWT Token类型：\n\n- HEADER：通过Header传输","description":"JWT Token类型：\n\n- HEADER：通过Header传输","type":"string","example":"HEADER"},"TokenName":{"title":"JWT Token保存的位置","description":"JWT Token保存的位置","type":"string","example":"Authorization"},"TokenNamePrefix":{"title":"JWT Token的前缀","description":"JWT Token的前缀","type":"string","example":"Bearer "},"TokenPass":{"title":"是否透传Token","description":"是否透传Token","type":"boolean","example":"true"},"Status":{"title":"鉴权是否开启","description":"鉴权是否开启","type":"boolean","example":"false"},"RedirectUrl":{"title":"授权成功后的重定向地址（OIDC/IDaaS使用，需要与OIDC/IDaaS中配置的重定向地址保持一致。）","description":"授权成功后的重定向地址（OIDC/IDaaS使用，需要与OIDC/IDaaS中配置的重定向地址保持一致。）","type":"string","example":"https://yourdomain/path"},"ClientId":{"title":"服务注册的应用ID（OIDC/IDaaS使用）。","description":"服务注册的应用ID（OIDC/IDaaS使用）。","type":"string","example":"example-app"},"ClientSecret":{"title":"服务注册的应用Secret（OIDC/IDaaS使用）。","description":"服务注册的应用Secret（OIDC/IDaaS使用）。","type":"string","example":"xxxxx"},"CookieDomain":{"title":"Cookie的域名，认证通过后会将Cookie发送到指定的域名，保持登录状态（OIDC/IDaaS使用）。","description":"Cookie的域名，认证通过后会将Cookie发送到指定的域名，保持登录状态（OIDC/IDaaS使用）。","type":"string","example":"hello.com"},"ScopesList":{"title":"OIDC 作用域（OIDC 使用）。","description":"OIDC作用域（OIDC使用）。","type":"string","example":"[\"openid\",\"email\"]"},"LoginUrl":{"title":"IDaaS实例用户登录页地址（IDaaS使用）。","description":"IDaaS实例用户登录页地址（IDaaS使用）。","type":"string","example":"https://daxxxxcn.aliyunidaas.com/"},"Sub":{"title":"鉴权类型为JWT时使用；JWT claims 的sub(subject)，即主体。","description":"鉴权类型为JWT时使用；JWT claims 的sub(subject)，即主体。","type":"string","example":"https://example.com/auth"},"ExternalAuthZ":{"title":"自定义鉴权信息","description":"自定义鉴权信息","type":"object","properties":{"ServiceId":{"title":"鉴权服务ID","description":"鉴权服务ID","type":"integer","format":"int64","example":"15300"},"PrefixPath":{"title":"鉴权API的Path","description":"鉴权API的Path","type":"string","example":"/auth"},"TokenKey":{"title":"Token位置，表示Token位于请求报文中哪个Header中，常见的有Authorization和Cookie","description":"Token位置，表示Token位于请求报文中哪个Header中，常见的有Authorization和Cookie","type":"string","example":"Authorization"},"AllowRequestHeaders":{"title":"允许的请求头部","description":"允许的请求头部","type":"array","items":{"description":"允许的请求头名称。","type":"string","example":"x-req"}},"AllowUpstreamHeaders":{"title":"允许的响应头部","description":"允许的响应头部","type":"array","items":{"description":"允许的响应头名称。","type":"string","example":"x-resp"}},"Timeout":{"title":"鉴权服务的超时时间，单位：秒","description":"鉴权服务的超时时间，单位：秒","type":"integer","format":"int32","example":"10"},"IsRestrict":{"title":"自定义鉴权模式：\n\n- true：严格模式，当鉴权服务不可用时（鉴权服务建立连接失败或者返回5xx请求），网关拒绝客户端请求\n- false：宽松模式，当鉴权服务不可用时（鉴权服务建立连接失败或者返回5xx请求），网关放过客户端请求","description":"自定义鉴权模式：\n\n- true：严格模式，当鉴权服务不可用时（鉴权服务建立连接失败或者返回5xx请求），网关拒绝客户端请求\n- false：宽松模式，当鉴权服务不可用时（鉴权服务建立连接失败或者返回5xx请求），网关放过客户端请求","type":"boolean","example":"true"},"Service":{"title":"鉴权服务信息","description":"鉴权服务信息","type":"object","properties":{"Name":{"title":"鉴权服务名称","description":"鉴权服务名称","type":"string","example":" httpbin-auth-service"},"SourceType":{"title":"鉴权服务来源类型","description":"鉴权服务来源类型","type":"string","example":"K8s"},"GroupName":{"title":"鉴权服务所属的分组","description":"鉴权服务所属的分组","type":"string","example":"test"},"Namespace":{"title":"鉴权服务命名空间","description":"鉴权服务命名空间","type":"string","example":"default"}}},"WithRequestBody":{"title":"是否允许携带Body","description":"是否允许携带Body","type":"boolean","example":"true"},"BodyMaxBytes":{"title":"Body的最大字节数","description":"Body的最大字节数","type":"integer","format":"int32","example":"4000000"}}},"ResourceList":{"title":"鉴权的授权规则列表，多个规则条件之间是“或”关系，规则条件内的多个匹配项之间是“与”关系。","description":"鉴权的授权规则列表，多个规则条件之间是“或”关系，规则条件内的多个匹配项之间是“与”关系。","type":"array","items":{"description":"鉴权的授权规则。","type":"object","properties":{"Id":{"title":"授权规则ID","description":"授权规则ID","type":"integer","format":"int64","example":"1303"},"AuthId":{"title":"规则所归属鉴权的ID","description":"规则所归属鉴权的ID","type":"integer","format":"int64","example":"2274"},"DomainId":{"title":"规则内域名的ID","description":"规则内域名的ID","type":"integer","format":"int64","example":"1765"},"DomainName":{"title":"规则内的域名","description":"规则内的域名","type":"string","example":"example.com"},"Path":{"title":"规则的匹配路径","description":"规则的匹配路径","type":"string","example":"/test"},"IsWhite":{"title":"授权黑白名单模式：\n\n- true：白名单模式（名单中的 hosts + paths 不需要校验即可访问，其余都需要校验）\n- false：黑名单模式（名单中的 hosts + paths 需要校验，其余可直接访问）","description":"授权黑白名单模式：\n\n- true：白名单模式（名单中的 hosts + paths 不需要校验即可访问，其余都需要校验）\n- false：黑名单模式（名单中的 hosts + paths 需要校验，其余可直接访问）","type":"boolean","example":"true"},"GatewayId":{"title":"规则所属网关的ID","description":"规则所属网关的ID","type":"integer","format":"int64","example":"2274"},"GatewayUniqueId":{"title":"规则所属网关的唯一ID","description":"规则所属网关的唯一ID","type":"string","example":"gw-6f0dbd108a0249d2b675b3ef50b*****"},"GmtCreate":{"title":"授权规则的创建GMT时间","description":"授权规则的创建GMT时间","type":"string","example":"2024-02-19T03:32:38.000+0000"},"GmtModified":{"title":"授权规则的修改GMT时间","description":"授权规则的修改GMT时间","type":"string","example":"2024-02-19T03:32:38.000+0000"},"MatchType":{"title":"请求Path的匹配类型：\n\n- EQUAL：精确匹配\n- PRE：前缀匹配\n- ERGULAR：正则匹配","description":"请求Path的匹配类型：\n\n- EQUAL：精确匹配\n- PRE：前缀匹配\n- ERGULAR：正则匹配","type":"string","example":"EQUAL"},"IgnoreCase":{"title":"路径是否开启大小写敏感\n\n- true：开启大小写敏感\n- false：关闭大小写敏感","description":"路径是否开启大小写敏感\n\n- true：开启大小写敏感\n- false：关闭大小写敏感","type":"boolean","example":"true"},"AuthResourceHeaderList":{"title":"规则的请求头（当前仅供自定义鉴权使用）","description":"规则的请求头（当前仅供自定义鉴权使用）","type":"array","items":{"type":"object","properties":{"HeaderKey":{"title":"请求头名称","description":"请求头名称","type":"string","example":"x-req"},"HeaderMethod":{"title":"匹配条件：\n\n- EQUAL：等于\n- NOT_EQUAL：不等于\n- EXIST：存在\n- NOT_EXIST：不存在\n- INCLUDE：包含\n- EXCLUDE：不包含\n- PREFIX：前缀\n- SUFFIX：后缀\n- REGREX：正则","description":"匹配条件：\n\n- EQUAL：等于\n- NOT_EQUAL：不等于\n- EXIST：存在\n- NOT_EXIST：不存在\n- INCLUDE：包含\n- EXCLUDE：不包含\n- PREFIX：前缀\n- SUFFIX：后缀\n- REGREX：正则","type":"string","example":"EQUAL"},"HeaderValue":{"title":"请求头的值","description":"请求头的值","type":"string","example":"123"}}}}}}},"AuthResourceMode":{"title":"授权资源模式：\n\n- 0：简单模式\n- 1：复杂模式","description":"授权资源模式：\n\n- 0：简单模式\n- 1：复杂模式","type":"integer","format":"int32","example":"0"},"AuthResourceConfig":{"title":"复杂模式的YAML配置","description":"复杂模式的YAML配置","type":"string","example":"permissions:\n  - not_rule:\n      or_rules:\n        rules:\n        - and_rules:\n            rules:\n            - url_path:\n                path:\n                  ignore_case: false\n                  prefix: /version\n        - and_rules:\n            rules:\n            - url_path:\n                path:\n                  ignore_case: false\n                  prefix: /header"}}}}}}},"errorCodes":{"400":[{"errorCode":"IllegalRequest","errorMessage":"Invalid request:%s"},{"errorCode":"InvalidParameter","errorMessage":"Parameter error:%s"}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation:%s"}],"404":[{"errorCode":"NotFound","errorMessage":"Not found:%s"}],"500":[{"errorCode":"InternalError","errorMessage":"Console error. Try again later:%s"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"9C96CDF8-9E6C-XXXX-XXXX-8F87A10117E6\\\",\\n  \\\"HttpStatusCode\\\": 200,\\n  \\\"Message\\\": \\\"OK\\\",\\n  \\\"Code\\\": 200,\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Id\\\": 1100,\\n    \\\"Name\\\": \\\"test\\\",\\n    \\\"GatewayUniqueId\\\": \\\"gw-6f0dbd108a0249d2b675b3ef50b*****\\\",\\n    \\\"GatewayId\\\": 2274,\\n    \\\"Type\\\": \\\"JWT\\\",\\n    \\\"Issuer\\\": \\\"https://example.com/auth\\\",\\n    \\\"Jwks\\\": \\\"{\\\\\\\\n  \\\\\\\\\\\\\\\"keys\\\\\\\\\\\\\\\":[\\\\\\\\n    {\\\\\\\\n      \\\\\\\\\\\\\\\"kty\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"RSA\\\\\\\\\\\\\\\",\\\\\\\\n      \\\\\\\\\\\\\\\"e\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"AQAB\\\\\\\\\\\\\\\",\\\\\\\\n      \\\\\\\\\\\\\\\"use\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"sig\\\\\\\\\\\\\\\",\\\\\\\\n      \\\\\\\\\\\\\\\"kid\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"1rGufmH1YN8rqM9ZOLgo7eEST3AnL89Y-m-XGFioLoA\\\\\\\\\\\\\\\",\\\\\\\\n      \\\\\\\\\\\\\\\"alg\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"RS256\\\\\\\\\\\\\\\",\\\\\\\\n      \\\\\\\\\\\\\\\"n\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"rM2GIc0YTMqwNCwXnjKbW5QndkCEZgyLu3uQUnyZF7HvMTekiTvQg_39mg3dV1eaYYkYfZBogyroJBqAQXhk6VVCxlBjFVp2xstJPVWngMOOlcafwN_BKdN-EQ06O_Uu__e7gNKI3DunkNk0cNaFETE7d4meRYyTlgEzYgsrW05_ufR0BKoddL3E5JsCpUxRjH9ICbodBx0U74W6Dcci-R2EA1DBrEcboE6n90uoJs6UJNriAK_71nAsYonihU5aQFFnyPTkJHfRwHK6JlME6rn-b-rpLSpdyc6U1nOFZP2DEpz8U5FrYoLYSZIU-MQGxDhCnGc_rxl2IyP9B2qcCQ\\\\\\\\\\\\\\\"\\\\\\\\n    }\\\\\\\\n  ]\\\\\\\\n}\\\\\\\\n\\\",\\n    \\\"IsWhite\\\": true,\\n    \\\"GmtCreate\\\": \\\"2024-02-19T02:41:03.000+0000\\\",\\n    \\\"GmtModified\\\": \\\"2024-02-19T02:41:03.000+0000\\\",\\n    \\\"TokenPosition\\\": \\\"HEADER\\\",\\n    \\\"TokenName\\\": \\\"Authorization\\\",\\n    \\\"TokenNamePrefix\\\": \\\"Bearer \\\",\\n    \\\"TokenPass\\\": true,\\n    \\\"Status\\\": false,\\n    \\\"RedirectUrl\\\": \\\"https://yourdomain/path\\\",\\n    \\\"ClientId\\\": \\\"example-app\\\",\\n    \\\"ClientSecret\\\": \\\"xxxxx\\\",\\n    \\\"CookieDomain\\\": \\\"hello.com\\\",\\n    \\\"ScopesList\\\": \\\"[\\\\\\\"openid\\\\\\\",\\\\\\\"email\\\\\\\"]\\\",\\n    \\\"LoginUrl\\\": \\\"https://daxxxxcn.aliyunidaas.com/\\\",\\n    \\\"Sub\\\": \\\"https://example.com/auth\\\",\\n    \\\"ExternalAuthZ\\\": {\\n      \\\"ServiceId\\\": 15300,\\n      \\\"PrefixPath\\\": \\\"/auth\\\",\\n      \\\"TokenKey\\\": \\\"Authorization\\\",\\n      \\\"AllowRequestHeaders\\\": [\\n        \\\"x-req\\\"\\n      ],\\n      \\\"AllowUpstreamHeaders\\\": [\\n        \\\"x-resp\\\"\\n      ],\\n      \\\"Timeout\\\": 10,\\n      \\\"IsRestrict\\\": true,\\n      \\\"Service\\\": {\\n        \\\"Name\\\": \\\" httpbin-auth-service\\\",\\n        \\\"SourceType\\\": \\\"K8s\\\",\\n        \\\"GroupName\\\": \\\"test\\\",\\n        \\\"Namespace\\\": \\\"default\\\"\\n      },\\n      \\\"WithRequestBody\\\": true,\\n      \\\"BodyMaxBytes\\\": 4000000\\n    },\\n    \\\"ResourceList\\\": [\\n      {\\n        \\\"Id\\\": 1303,\\n        \\\"AuthId\\\": 2274,\\n        \\\"DomainId\\\": 1765,\\n        \\\"DomainName\\\": \\\"example.com\\\",\\n        \\\"Path\\\": \\\"/test\\\",\\n        \\\"IsWhite\\\": true,\\n        \\\"GatewayId\\\": 2274,\\n        \\\"GatewayUniqueId\\\": \\\"gw-6f0dbd108a0249d2b675b3ef50b*****\\\",\\n        \\\"GmtCreate\\\": \\\"2024-02-19T03:32:38.000+0000\\\",\\n        \\\"GmtModified\\\": \\\"2024-02-19T03:32:38.000+0000\\\",\\n        \\\"MatchType\\\": \\\"EQUAL\\\",\\n        \\\"IgnoreCase\\\": true,\\n        \\\"AuthResourceHeaderList\\\": [\\n          {\\n            \\\"HeaderKey\\\": \\\"x-req\\\",\\n            \\\"HeaderMethod\\\": \\\"EQUAL\\\",\\n            \\\"HeaderValue\\\": \\\"123\\\"\\n          }\\n        ]\\n      }\\n    ],\\n    \\\"AuthResourceMode\\\": 0,\\n    \\\"AuthResourceConfig\\\": \\\"permissions:\\\\n  - not_rule:\\\\n      or_rules:\\\\n        rules:\\\\n        - and_rules:\\\\n            rules:\\\\n            - url_path:\\\\n                path:\\\\n                  ignore_case: false\\\\n                  prefix: /version\\\\n        - and_rules:\\\\n            rules:\\\\n            - url_path:\\\\n                path:\\\\n                  ignore_case: false\\\\n                  prefix: /header\\\"\\n  }\\n}\",\"type\":\"json\"}]","title":"获取网关鉴权详情"}