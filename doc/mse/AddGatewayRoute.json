{"summary":"添加网关路由。","methods":["post","get"],"schemes":["http","https"],"tags":["gateway"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{},"parameters":[{"name":"GatewayId","in":"query","schema":{"description":"网关ID。","type":"integer","format":"int64","required":false,"example":"526"}},{"name":"Name","in":"query","schema":{"description":"路由名称。","type":"string","required":true,"docRequired":true,"example":"test"}},{"name":"RouteOrder","in":"query","schema":{"description":"路由顺序。（数值越小优先级越高）","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"Predicates","in":"query","style":"json","schema":{"description":"匹配规则。","type":"object","properties":{"PathPredicates":{"description":"路由匹配。","type":"object","properties":{"Path":{"description":"路径。","type":"string","required":false,"example":"/test"},"Type":{"description":"路由匹配：\n\n- 前缀：PRE。\n- 精确：EQUAL。\n- 正则：ERGULAR。","type":"string","required":false,"enumValueTitles":{},"example":"PRE"},"IgnoreCase":{"description":"忽略大小写。","type":"boolean","required":false,"example":"true"}},"required":false},"MethodPredicates":{"description":"方法匹配。","type":"array","items":{"description":"具体方法。","type":"string","required":false,"example":"GET"},"required":false},"HeaderPredicates":{"description":"请求头匹配。","type":"array","items":{"description":"请求头。","type":"object","properties":{"Key":{"description":"请求头Key。","type":"string","required":false,"example":"debug"},"Value":{"description":"对应的Value。","type":"string","required":false,"example":"test"},"Type":{"description":"匹配类型。","type":"string","required":false,"example":"PRE"}},"required":false},"required":false},"QueryPredicates":{"description":"URL参数匹配。","type":"array","items":{"description":"URL参数。","type":"object","properties":{"Key":{"description":"参数名。","type":"string","required":false,"example":"userid"},"Value":{"description":"匹配值。","type":"string","required":false,"example":"test"},"Type":{"description":"匹配类型。","type":"string","required":false,"example":"PRE"}},"required":false},"required":false}},"required":false}},{"name":"Services","in":"query","style":"json","schema":{"description":"服务列表。","type":"array","items":{"description":"服务列表。","type":"object","properties":{"ServiceId":{"description":"服务ID。","type":"integer","format":"int64","required":false,"example":"353"},"Percent":{"description":"权重百分比。","type":"integer","format":"int32","required":false,"example":"80"},"Version":{"description":"服务版本。","type":"string","required":false,"example":"v1"},"Name":{"description":"名称。","type":"string","required":false,"example":"user"},"SourceType":{"description":"来源类型。","type":"string","required":false,"example":"MSE"},"Namespace":{"description":"服务所在命名空间。","type":"string","required":false,"example":"default"},"GroupName":{"description":"服务分组名称。","type":"string","required":false,"example":"test"},"AgreementType":{"description":"协议类型。","type":"string","required":false,"example":"DUBBO"},"HttpDubboTranscoder":{"description":"Dubbo协议转换体。","type":"object","properties":{"DubboServiceName":{"description":"Dubbo服务名称。","type":"string","required":false,"example":"org.apache.dubbo.samples.basic.api.DemoService"},"DubboServiceVersion":{"description":"Dubbot服务版本。","type":"string","required":false,"example":"0.0.0"},"DubboServiceGroup":{"description":"服务组。","type":"string","required":false,"example":"无"},"MothedMapList":{"description":"Dubbo转发规则列表。","type":"array","items":{"description":"方法映射。","type":"object","properties":{"DubboMothedName":{"description":"Dubbo方法名。","type":"string","required":false,"example":"sayHello"},"HttpMothed":{"description":"Http方法。\n> 支持http方法参数值。\n> - ALL_GET。\n> - ALL_POST。\n> - ALL_PUT。\n> - ALL_DELETE。\n> - ALL_PATCH。\n","type":"string","required":false,"example":"ALL_GET"},"Mothedpath":{"description":"方法匹配路径。","type":"string","required":false,"example":"/mytestzbk/sayhello"},"PassThroughAllHeaders":{"description":"Header透传类型。\n> 透传类型枚举值。\n> - 透传所有：PASS_ALL。\n> - 不透传：PASS_NOT。\n> - 指定参数：PASS_ASSIGN。\n","type":"string","required":false,"example":"PASS_NOT"},"PassThroughList":{"description":"指定透传Header列表","type":"array","items":{"description":"指定Header透传值。","type":"string","required":false,"example":"x-forward"},"required":false},"ParamMapsList":{"description":"参数映射列表。","type":"array","items":{"description":"参数映射体。","type":"object","properties":{"ExtractKeySpec":{"description":"入参位置。\n> 入参位置枚举值。\n> - 请求参数：`ALL_QUERY_PARAMETER`\n- 请求头：`ALL_HEADER`\n- 请求路径：`ALL_PATH`\n- 请求体：`ALL_BODY`\n","type":"string","required":false,"example":"ALL_QUERY_PARAMETER"},"ExtractKey":{"description":"入参位提取Key。","type":"string","required":false,"example":"name"},"MappingType":{"description":"后端参数类型。","type":"string","required":false,"example":"java.lang.String"}},"required":false},"required":false}},"required":false},"required":false}},"required":false},"ServicePort":{"description":"服务端口。","type":"integer","format":"int32","required":false,"example":"443"}},"required":false},"required":false}},{"name":"DomainId","in":"query","schema":{"description":"域名ID。","type":"integer","format":"int64","required":false,"example":"20"}},{"name":"DestinationType","in":"query","schema":{"description":"目标服务类型。\n- Single：单服务\n- Multiple：多服务\n- VersionOriented：标签路由\n- Mock：Mock\n- Redirect：重定向","type":"string","required":false,"enumValueTitles":{"VersionOriented":"VersionOriented","Multiple":"Multiple","Single":"Single","Redirect":"Redirect","Mock":"Mock"},"example":"Multiple"}},{"name":"DirectResponseJSON","in":"query","style":"json","schema":{"description":"Mock响应配置。","type":"object","properties":{"Code":{"description":"Mock返回码。","type":"integer","format":"int64","required":false,"example":"403"},"Body":{"description":"Mock返回值。","type":"string","required":false,"example":"hello"}},"required":false}},{"name":"GatewayUniqueId","in":"query","schema":{"description":"网关唯一标识ID。","type":"string","required":true,"docRequired":true,"example":"gw-492af9b04bb4474cae9d645be8*****"}},{"name":"DomainIdListJSON","in":"query","schema":{"description":"域名列表。","type":"string","required":true,"docRequired":true,"example":"[0,94]"}},{"name":"RedirectJSON","in":"query","style":"json","schema":{"description":"重定向配置。","type":"object","properties":{"Code":{"description":"返回码。","type":"integer","format":"int32","required":false,"example":"302"},"Host":{"description":"重定向主机名。","type":"string","required":false,"example":"test.com"},"Path":{"description":"重定向路径。","type":"string","required":false,"example":"/test"}},"required":false}},{"name":"EnableWaf","in":"query","schema":{"description":"是否开启WAF。","type":"boolean","required":false,"example":"true"}},{"name":"Fallback","in":"query","schema":{"description":"是否开启Fallback服务。","type":"boolean","required":false,"example":"true"}},{"name":"FallbackServices","in":"query","style":"json","schema":{"description":"Fallback服务。","type":"array","items":{"type":"object","properties":{"ServiceId":{"description":"服务ID。","type":"integer","format":"int64","required":false,"example":"353"},"Percent":{"description":"权重百分比。","type":"integer","format":"int32","required":false,"example":"80"},"Version":{"description":"服务版本。","type":"string","required":false,"example":"v1"},"Name":{"description":"名称。","type":"string","required":false,"example":"user"},"SourceType":{"description":"来源类型。","type":"string","required":false,"example":"MSE"},"Namespace":{"description":"服务所在命名空间。","type":"string","required":false,"example":"default"},"GroupName":{"description":"服务分组名称。","type":"string","required":false,"example":"test"},"AgreementType":{"description":"协议类型。","type":"string","required":false,"example":"DUBBO"},"ServicePort":{"description":"服务端口。","type":"integer","format":"int32","required":false,"example":"443"}},"required":false},"required":false}},{"name":"RouteType","in":"query","schema":{"description":"路由类型：\n\nOp：管控路由。","type":"string","required":false,"example":"Op"}},{"name":"Policies","in":"query","schema":{"description":"路由策略Json字符串。","type":"string","required":false,"example":"{\"CORS\":\"{\\\"allowMethods\\\":\\\"GET,POST,PUT,DELETE,HEAD,OPTIONS,PATCH\\\",\\\"allowHeaders\\\":\\\"*\\\",\\\"exposeHeaders\\\":\\\"*\\\",\\\"unitNum\\\":12,\\\"allowCredentials\\\":true,\\\"status\\\":\\\"off\\\",\\\"allowOrigins\\\":\\\"*\\\",\\\"timeUnit\\\":\\\"h\\\"}\",\"Timeout\":\"{\\\"unitNum\\\":10,\\\"timeUnit\\\":\\\"s\\\",\\\"status\\\":\\\"off\\\"}\",\"Retry\":\"{\\\"attempts\\\":2,\\\"retryOn\\\":[\\\"5xx\\\"],\\\"status\\\":\\\"off\\\"}\",\"HTTPRewrite\":\"{\\\"pathType\\\":\\\"EQUAL\\\",\\\"path\\\":\\\"/o\\\",\\\"status\\\":\\\"off\\\"}\",\"Waf\":\"{\\\"enabled\\\":false}\",\"HeaderOp\":\"{\\\"status\\\":\\\"off\\\",\\\"headerOpItems\\\":[{\\\"directionType\\\":\\\"Request\\\",\\\"opType\\\":\\\"Add\\\",\\\"key\\\":\\\"kkk\\\",\\\"value\\\":\\\"ll\\\"}]}\"}"}},{"name":"Description","in":"query","schema":{"title":"路由描述","description":"路由描述","type":"string","required":false,"example":"a route for xxx"}},{"name":"AcceptLanguage","in":"query","schema":{"title":"返回结果显示的语言。取值：zh（默认值）：中文，en：英文","description":"返回信息的语言类型：\n\n- zh：中文\n- en：英文","type":"string","required":false,"example":"zh"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"数据结构。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"03A3E2F4-6804-5663-9D5D-2EC47A1*****"},"HttpStatusCode":{"description":"HTTP状态码。\n","type":"integer","format":"int32","example":"200"},"Message":{"description":"响应信息。","type":"string","example":"请求处理成功"},"Code":{"description":"返回代码。","type":"integer","format":"int32","example":"200"},"Success":{"description":"请求结果，取值如下：\n- `true`：请求成功。\n- `false`：请求失败。","type":"boolean","example":"true"},"Data":{"description":"创建的路由ID。","type":"integer","format":"int64","example":"555"},"ErrorCode":{"description":"错误码。\n\n- InvalidParameter：参数错误：缺失、格式不对\n- IllegalRequest：请求非法：参数越权\n- NoPermission：权限专用\n- NotFound：资源404\n- InternalError：内部错误","type":"string","example":"InvalidParameter"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalRequest","errorMessage":"Invalid request:%s"},{"errorCode":"InvalidParameter","errorMessage":"Parameter error:%s"}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation:%s"}],"404":[{"errorCode":"NotFound","errorMessage":"Not found:%s"}],"500":[{"errorCode":"InternalError","errorMessage":"Console error. Try again later:%s"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"03A3E2F4-6804-5663-9D5D-2EC47A1*****\\\",\\n  \\\"HttpStatusCode\\\": 200,\\n  \\\"Message\\\": \\\"请求处理成功\\\",\\n  \\\"Code\\\": 200,\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": 555,\\n  \\\"ErrorCode\\\": \\\"InvalidParameter\\\"\\n}\",\"type\":\"json\"}]","title":"添加网关路由"}