{"summary":"创建熔断规则。","methods":["post","get"],"schemes":["http","https"],"tags":["msc"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"167810","abilityTreeNodes":["FEATUREmse6JRV3O"]},"parameters":[{"name":"Namespace","in":"query","schema":{"title":"应用所属的微服务命名空间。","description":"应用所属的微服务命名空间。","type":"string","required":true,"docRequired":true,"example":"default"}},{"name":"AppName","in":"query","schema":{"title":"应用名称。","description":"应用名称。","type":"string","required":true,"docRequired":true,"example":"spring-cloud-a"}},{"name":"Threshold","in":"query","schema":{"title":"熔断比例阈值：触发熔断的比例阈值，取值范围为0 - 1，代表0% - 100%。","description":"熔断比例阈值：触发熔断的比例阈值，取值范围为0 - 1，代表0% - 100%。","type":"number","format":"float","required":true,"docRequired":true,"example":"0.8"}},{"name":"Enable","in":"query","schema":{"title":"规则的启用状态。","description":"规则的启用状态。","type":"boolean","required":true,"enumValueTitles":{"true":"启用","false":"关闭"},"example":"true"}},{"name":"Resource","in":"query","schema":{"title":"接口名称：适用该规则的应用资源。需要与控制台接口详情处接口名称一致。","description":"接口名称：适用该规则的应用资源。需要与控制台接口详情处接口名称一致。","type":"string","required":true,"docRequired":true,"example":"/a"}},{"name":"AppId","in":"query","schema":{"title":"应用ID。","description":"应用ID。","type":"string","required":false,"example":"hkhon1po62@c3df23522bXXXXX"}},{"name":"RegionId","in":"query","schema":{"title":"集群所在地域。","description":"集群所在地域。","type":"string","required":false,"example":"cn-hangzhou"}},{"name":"Strategy","in":"query","schema":{"title":"阈值类型：选择以慢调用比例或异常比例作为阈值。","description":"阈值类型：选择以慢调用比例或异常比例作为阈值。","type":"integer","format":"int32","required":true,"enumValueTitles":{"0":"慢调用比例","1":"异常比例"},"example":"0"}},{"name":"RetryTimeoutMs","in":"query","schema":{"title":"熔断时长（单位毫秒）：即熔断触发后持续的时间。资源进入熔断状态后，在配置的熔断时长内，请求都会快速失败。取值需要为1000的整数倍，默认值为10000，即10秒。","description":"熔断时长（单位毫秒）：即熔断触发后持续的时间。资源进入熔断状态后，在配置的熔断时长内，请求都会快速失败。取值需要为1000的整数倍，默认值为10000，即10秒。","type":"integer","format":"int32","required":false,"example":"10000"}},{"name":"StatIntervalMs","in":"query","schema":{"title":"统计窗口时长（单位毫秒）：统计的时间窗口长度，取值范围为1秒~120分钟。默认值为20000，即20秒。","description":"统计窗口时长（单位毫秒）：统计的时间窗口长度，取值范围为1秒~120分钟。默认值为20000，即20秒。","type":"integer","format":"int32","required":false,"example":"20000"}},{"name":"MaxAllowedRtMs","in":"query","schema":{"title":"慢调用RT（单位毫秒）：超过该时长则判定为慢请求，阈值类型为慢调用比例时必填。","description":"慢调用RT（单位毫秒）：超过该时长则判定为慢请求，阈值类型为慢调用比例时必填。","type":"integer","format":"int32","required":false,"example":"200"}},{"name":"MinRequestAmount","in":"query","schema":{"title":"触发熔断的最小请求数目，若当前统计窗口请求数小于此值，即使达到熔断条件规则也不会触发。默认值为10。","description":"触发熔断的最小请求数目，若当前统计窗口请求数小于此值，即使达到熔断条件规则也不会触发。默认值为10。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"HalfOpenBaseAmountPerStep","in":"query","schema":{"title":"熔断恢复每步最小通过数目，默认值为1。","description":"熔断恢复每步最小通过数目，默认值为1。","type":"integer","format":"int32","required":false,"example":"5"}},{"name":"HalfOpenRecoveryStepNum","in":"query","schema":{"title":"熔断恢复阶段数，默认值为1。","description":"熔断恢复阶段数，默认值为1。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"ResourceType","in":"query","schema":{"description":"资源类型。","type":"integer","format":"int32","required":false,"enumValueTitles":{"0":"自定义接口","1":"WEB","2":"RPC","3":"ROUTE","4":"SQL"},"example":"0","enum":["0","1","2","4","3"]}},{"name":"AcceptLanguage","in":"query","schema":{"title":"返回结果显示的语言。取值：zh（默认值）：中文，en：英文","description":"返回信息的语言类型：\n\n- zh：中文\n- en：英文","type":"string","required":false,"example":"zh"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Message":{"title":"响应信息。","description":"响应信息。","type":"string","example":"OK"},"RequestId":{"title":"请求ID。","description":"请求ID。","type":"string","example":"EE5C32A1-BC0E-4B79-817C-103E4EDF****"},"Code":{"title":"响应码。","description":"响应码。","type":"string","example":"200"},"Data":{"title":"规则信息。","description":"规则信息。","type":"object","properties":{"Namespace":{"title":"应用所属的微服务命空间。","description":"应用所属的微服务命空间。","type":"string","example":"default"},"Id":{"title":"规则ID。","description":"规则ID。","type":"integer","format":"int64","example":"1"},"AppName":{"title":"应用名称。","description":"应用名称。","type":"string","example":"spring-cloud-a"},"Resource":{"title":"接口名称：适用该规则的应用资源。需要与控制台接口详情处接口名称一致。","description":"接口名称：适用该规则的应用资源。需要与控制台接口详情处接口名称一致。","type":"string","example":"/a"},"StatIntervalMs":{"title":"统计窗口时长（单位毫秒）：统计的时间窗口长度，取值范围为1秒~120分钟。","description":"统计窗口时长（单位毫秒）：统计的时间窗口长度，取值范围为1秒~120分钟。","type":"integer","format":"int32","example":"20000"},"Threshold":{"title":"熔断比例阈值：触发熔断的比例阈值，取值范围为0 - 1，代表0% - 100%。","description":"熔断比例阈值：触发熔断的比例阈值，取值范围为0 - 1，代表0% - 100%。","type":"number","format":"float","example":"0.8"},"Enable":{"title":"规则的启用状态。","description":"规则的启用状态。","type":"boolean","example":"true"},"Strategy":{"title":"阈值类型：选择以慢调用比例或异常比例作为阈值。","description":"阈值类型：选择以慢调用比例或异常比例作为阈值。","type":"integer","format":"int32","enumValueTitles":{"0":"慢调用比例","1":"异常比例"},"example":"0"},"RetryTimeoutMs":{"title":"熔断时长（单位毫秒）：即熔断触发后持续的时间。资源进入熔断状态后，在配置的熔断时长内，请求都会快速失败。","description":"熔断时长（单位毫秒）：即熔断触发后持续的时间。资源进入熔断状态后，在配置的熔断时长内，请求都会快速失败。","type":"integer","format":"int32","example":"10000"},"AppId":{"title":"应用ID。","description":"应用ID。","type":"string","example":"hkhon1po62@c3df23522bXXXXX"},"RegionId":{"title":"集群所在地域。","description":"集群所在地域。","type":"string","example":"cn-hangzhou"},"MaxAllowedRtMs":{"title":"慢调用RT（单位毫秒）：超过该时长则判定为慢请求，阈值类型为慢调用比例时必填。","description":"慢调用RT（单位毫秒）：阈值类型为慢调用比例时，超过该时长则判定为慢请求。","type":"integer","format":"int32","example":"200"},"MinRequestAmount":{"title":"触发熔断的最小请求数目，若当前统计窗口请求数小于此值，即使达到熔断条件规则也不会触发。","description":"触发熔断的最小请求数目，若当前统计窗口请求数小于此值，即使达到熔断条件规则也不会触发。","type":"integer","format":"int32","example":"10"},"HalfOpenBaseAmountPerStep":{"title":"熔断恢复每步最小通过数目。","description":"熔断恢复每步最小通过数目。","type":"integer","format":"int32","example":"5"},"HalfOpenRecoveryStepNum":{"title":"熔断恢复阶段数。","description":"熔断恢复阶段数。","type":"integer","format":"int32","example":"1"}}},"Success":{"title":"请求结果。","description":"请求结果。","type":"boolean","enumValueTitles":{"true":"请求成功","false":"请求失败"},"example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalRequest","errorMessage":"Invalid request:%s"},{"errorCode":"InvalidParameter","errorMessage":"Parameter error:%s"}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation:%s"}],"404":[{"errorCode":"NotFound","errorMessage":"Not found:%s"}],"500":[{"errorCode":"InternalError","errorMessage":"Console error. Try again later:%s"}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"Message\\\": \\\"OK\\\",\\n  \\\"RequestId\\\": \\\"EE5C32A1-BC0E-4B79-817C-103E4EDF****\\\",\\n  \\\"Code\\\": \\\"200\\\",\\n  \\\"Data\\\": {\\n    \\\"Namespace\\\": \\\"default\\\",\\n    \\\"Id\\\": 1,\\n    \\\"AppName\\\": \\\"spring-cloud-a\\\",\\n    \\\"Resource\\\": \\\"/a\\\",\\n    \\\"StatIntervalMs\\\": 20000,\\n    \\\"Threshold\\\": 0.8,\\n    \\\"Enable\\\": true,\\n    \\\"Strategy\\\": 0,\\n    \\\"RetryTimeoutMs\\\": 10000,\\n    \\\"AppId\\\": \\\"hkhon1po62@c3df23522bXXXXX\\\",\\n    \\\"RegionId\\\": \\\"cn-hangzhou\\\",\\n    \\\"MaxAllowedRtMs\\\": 200,\\n    \\\"MinRequestAmount\\\": 10,\\n    \\\"HalfOpenBaseAmountPerStep\\\": 5,\\n    \\\"HalfOpenRecoveryStepNum\\\": 1\\n  },\\n  \\\"Success\\\": true\\n}\",\"type\":\"json\"}]","title":"创建熔断规则"}