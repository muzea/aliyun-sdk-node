{"summary":"更新路由waf状态。","methods":["get","post"],"schemes":["http","https"],"tags":["gateway"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update"},"parameters":[{"name":"RouteId","in":"query","schema":{"description":"路由条目ID。","type":"integer","format":"int64","required":true,"docRequired":true,"example":"645"}},{"name":"GatewayUniqueId","in":"query","schema":{"description":"网关唯一ID。","type":"string","required":true,"docRequired":true,"example":"gw-86575c0bc9f04ecfbacb92b8e392****"}},{"name":"AcceptLanguage","in":"query","schema":{"description":"返回信息的语言类型：\n\n- zh：中文\n- en：英文","type":"string","required":false,"example":"zh"}},{"name":"EnableWaf","in":"query","schema":{"description":"是否开启WAF。","type":"boolean","required":true,"docRequired":true,"example":"true"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"ID of the Request。","type":"string","example":"7466566F-F30F-4A29-965D-3E0AF21D****"},"HttpStatusCode":{"description":"HTTP状态码。","type":"integer","format":"int32","example":"200"},"Message":{"description":"响应信息。","type":"string","example":"success"},"Code":{"description":"状态码。说明200表示成功。","type":"integer","format":"int32","example":"200"},"Success":{"description":"请求结果，取值如下：\n- `true`：请求成功。\n- `false`：请求失败。","type":"boolean","example":"true"},"Data":{"description":"返回数据。","type":"object","properties":{"Id":{"description":"路由ID。","type":"integer","format":"int64","example":"12"},"Name":{"description":"消息路由名称。","type":"string","example":"test"},"GatewayUniqueId":{"description":"网关唯一ID。","type":"string","example":"gw-7ea3da97b96543e19f6c597cd4a9****"},"GatewayId":{"description":"网关ID。","type":"integer","format":"int64","example":"102"},"DefaultServiceId":{"description":"默认服务ID。","type":"integer","format":"int64","example":"1"},"DefaultServiceName":{"description":"默认服务名称。","type":"string","example":"test"},"Status":{"description":"路由状态。","type":"integer","format":"int32","example":"1"},"GmtCreate":{"description":"创建时间。","type":"string","example":"2022-01-26T09:52:41.000+0000"},"GmtModified":{"description":"修改日期。\n\n","type":"string","example":"2022-02-24T06:08:29.230+0000"},"RouteOrder":{"description":"路由顺序。","type":"integer","format":"int32","example":"1"},"Predicates":{"description":"匹配规则。","type":"string","example":"{\\\"PathPredicates\\\":{\\\"Path\\\":\\\"/metas\\\",\\\"Type\\\":\\\"PRE\\\",\\\"IgnoreCase\\\":false}}"},"RoutePredicates":{"description":"路由匹配。","type":"object","properties":{"PathPredicates":{"description":"路由匹配。","type":"object","properties":{"Path":{"description":"路径。","type":"string","example":"/zookeeper/mmgw/unlogined/common.getBu"},"Type":{"description":"匹配类型。","type":"string","example":"PRE"},"IgnoreCase":{"description":"是否忽略大小写。","type":"boolean","example":"true"}}},"MethodPredicates":{"description":"匹配方法。","type":"array","items":{"description":"方法。","type":"string","example":"GET"}},"HeaderPredicates":{"description":"请求头匹配规则。","type":"array","items":{"description":"请求头。","type":"object","properties":{"Key":{"description":"请求头KEY。","type":"string","example":"alibo"},"Value":{"description":"值。","type":"string","example":"200"},"Type":{"description":"匹配类型。","type":"string","example":"PRE"}}}},"QueryPredicates":{"description":"参数匹配规则。","type":"array","items":{"description":"参数。","type":"object","properties":{"Key":{"description":"参数名称。","type":"string","example":"instanceId"},"Value":{"description":"匹配值。","type":"string","example":"test"},"Type":{"description":"类型。","type":"string","example":"PRE"}}}}}},"DomainId":{"description":"域名ID。","type":"integer","format":"int64","example":"235"},"DomainName":{"description":"域名。","type":"string","example":"nbhamster.com"},"Services":{"description":"服务。","type":"string","example":"[{\\\"Percent\\\":100,\\\"ServiceId\\\":126}]"},"RouteServices":{"description":"服务。","type":"array","items":{"description":"服务。","type":"object","properties":{"ServiceId":{"description":"服务id。","type":"integer","format":"int64","example":"547"},"ServiceName":{"description":"服务名称。","type":"string","example":"b-service"},"Percent":{"description":"权重。","type":"integer","format":"int32","example":"80"},"Version":{"description":"服务版本。","type":"string","example":"v1"},"Name":{"description":"服务名称。","type":"string","example":"test-aixue-gray"},"SourceType":{"description":"服务来源。","type":"string","example":"K8S"},"Namespace":{"description":"命名空间。","type":"string","example":"default"},"GroupName":{"description":"服务分组名称。","type":"string","example":"DEFAULT_GROUP"}}}},"HTTPRewrite":{"description":"重写策略信息。","type":"object","properties":{"Status":{"description":"HTTP状态。","type":"string","example":"off"},"Path":{"description":"HTTP请求路径。","type":"string","example":"/test/client"},"Host":{"description":"域名。","type":"string","example":"aliyuncs.com"},"PathType":{"description":"HTTP请求路径类型。","type":"string","example":"PRE"},"Pattern":{"description":"匹配Pattern。","type":"string","example":"/test"},"Substitution":{"description":"替换。","type":"string","example":"test"}}},"HeaderOp":{"description":"Header设置信息。","type":"object","properties":{"Status":{"description":"状态。","type":"string","example":"off"},"HeaderOpItems":{"description":"设置策略。","type":"array","items":{"description":"设置策略。","type":"object","properties":{"DirectionType":{"description":"请求或者响应。","type":"string","example":"Response"},"OpType":{"description":"操作类型。","type":"string","example":"Add"},"Key":{"description":"Header Key。","type":"string","example":"debug"},"Value":{"description":"设置值。","type":"string","example":"test"}}}}}},"DestinationType":{"description":"目标服务类型。","type":"string","example":"Single"},"DirectResponse":{"description":"Mock信息。","type":"object","properties":{"Code":{"description":"返回值。","type":"integer","format":"int32","example":"200"},"Body":{"description":"Mock返回值。","type":"string","example":"[{\\\"key\\\":\\\"h68d13466.sqa.eu95\\\",\\\"dims\\\":\\\"groupName=All}]"}}},"Cors":{"description":"跨域配置。","type":"object","properties":{"Status":{"description":"状态。","type":"string","example":"off"},"AllowOrigins":{"description":"跨域。","type":"string","example":"*"},"AllowMethods":{"description":"跨域方法。","type":"string","example":"GET,POST,PUT,DELETE,HEAD,OPTIONS,PATCH"},"AllowHeaders":{"description":"跨域Header。","type":"string","example":"*"},"ExposeHeaders":{"description":"响应头。","type":"string","example":"*"},"TimeUnit":{"description":"时间单位。","type":"string","example":"s"},"UnitNum":{"description":"时间数。","type":"integer","format":"int64","example":"1"},"AllowCredentials":{"description":"允许携带凭证。","type":"boolean","example":"true"}}},"Timeout":{"description":"超时配置。","type":"object","properties":{"UnitNum":{"description":"时间数。","type":"integer","format":"int32","example":"10"},"TimeUnit":{"description":"时间单位。","type":"string","example":"s"},"Status":{"description":"状态。","type":"string","example":"off"}}},"Retry":{"description":"重试配置。","type":"object","properties":{"Attempts":{"description":"给定请求允许的重试次数。","type":"integer","format":"int32","example":"1"},"RetryOn":{"description":"重试条件。","type":"array","items":{"description":"重试条件。","type":"string","example":"5xx"}},"HttpCodes":{"description":"HTTP状态码。","type":"array","items":{"description":"HTTP状态码。","type":"string","example":"500"}},"Status":{"description":"重试状态。","type":"string","example":"on"}}},"DomainIdList":{"description":"域名ID列表。","type":"array","items":{"description":"域名ID列表。","type":"integer","format":"int64","example":"1"}},"DomainNameList":{"description":"域名列表。","type":"array","items":{"description":"域名列表。","type":"string","example":"test.com"}},"Redirect":{"description":"重定向配置。","type":"object","properties":{"Code":{"description":"响应码。","type":"integer","format":"int32","example":"200"},"Host":{"description":"主机。","type":"string","example":"ww.al.c"},"Path":{"description":"路径。","type":"string","example":"/"}}},"EnableWaf":{"description":"是否开启WAF。","type":"boolean","example":"0"}}}}}}},"errorCodes":{"400":[{"errorCode":"IllegalRequest","errorMessage":"Invalid request:%s"},{"errorCode":"InvalidParameter","errorMessage":"Parameter error:%s"}],"403":[{"errorCode":"NoPermission","errorMessage":"You are not authorized to perform this operation:%s"}],"404":[{"errorCode":"NotFound","errorMessage":"Not found:%s"}],"500":[{"errorCode":"InternalError","errorMessage":"Console error. Try again later:%s"}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"7466566F-F30F-4A29-965D-3E0AF21D****\\\",\\n  \\\"HttpStatusCode\\\": 200,\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"Code\\\": 200,\\n  \\\"Success\\\": true,\\n  \\\"Data\\\": {\\n    \\\"Id\\\": 12,\\n    \\\"Name\\\": \\\"test\\\",\\n    \\\"GatewayUniqueId\\\": \\\"gw-7ea3da97b96543e19f6c597cd4a9****\\\",\\n    \\\"GatewayId\\\": 102,\\n    \\\"DefaultServiceId\\\": 1,\\n    \\\"DefaultServiceName\\\": \\\"test\\\",\\n    \\\"Status\\\": 1,\\n    \\\"GmtCreate\\\": \\\"2022-01-26T09:52:41.000+0000\\\",\\n    \\\"GmtModified\\\": \\\"2022-02-24T06:08:29.230+0000\\\",\\n    \\\"RouteOrder\\\": 1,\\n    \\\"Predicates\\\": \\\"{\\\\\\\\\\\\\\\"PathPredicates\\\\\\\\\\\\\\\":{\\\\\\\\\\\\\\\"Path\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"/metas\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Type\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"PRE\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"IgnoreCase\\\\\\\\\\\\\\\":false}}\\\",\\n    \\\"RoutePredicates\\\": {\\n      \\\"PathPredicates\\\": {\\n        \\\"Path\\\": \\\"/zookeeper/mmgw/unlogined/common.getBu\\\",\\n        \\\"Type\\\": \\\"PRE\\\",\\n        \\\"IgnoreCase\\\": true\\n      },\\n      \\\"MethodPredicates\\\": [\\n        \\\"GET\\\"\\n      ],\\n      \\\"HeaderPredicates\\\": [\\n        {\\n          \\\"Key\\\": \\\"alibo\\\",\\n          \\\"Value\\\": \\\"200\\\",\\n          \\\"Type\\\": \\\"PRE\\\"\\n        }\\n      ],\\n      \\\"QueryPredicates\\\": [\\n        {\\n          \\\"Key\\\": \\\"instanceId\\\",\\n          \\\"Value\\\": \\\"test\\\",\\n          \\\"Type\\\": \\\"PRE\\\"\\n        }\\n      ]\\n    },\\n    \\\"DomainId\\\": 235,\\n    \\\"DomainName\\\": \\\"nbhamster.com\\\",\\n    \\\"Services\\\": \\\"[{\\\\\\\\\\\\\\\"Percent\\\\\\\\\\\\\\\":100,\\\\\\\\\\\\\\\"ServiceId\\\\\\\\\\\\\\\":126}]\\\",\\n    \\\"RouteServices\\\": [\\n      {\\n        \\\"ServiceId\\\": 547,\\n        \\\"ServiceName\\\": \\\"b-service\\\",\\n        \\\"Percent\\\": 80,\\n        \\\"Version\\\": \\\"v1\\\",\\n        \\\"Name\\\": \\\"test-aixue-gray\\\",\\n        \\\"SourceType\\\": \\\"K8S\\\",\\n        \\\"Namespace\\\": \\\"default\\\",\\n        \\\"GroupName\\\": \\\"DEFAULT_GROUP\\\"\\n      }\\n    ],\\n    \\\"HTTPRewrite\\\": {\\n      \\\"Status\\\": \\\"off\\\",\\n      \\\"Path\\\": \\\"/test/client\\\",\\n      \\\"Host\\\": \\\"aliyuncs.com\\\",\\n      \\\"PathType\\\": \\\"PRE\\\",\\n      \\\"Pattern\\\": \\\"/test\\\",\\n      \\\"Substitution\\\": \\\"test\\\"\\n    },\\n    \\\"HeaderOp\\\": {\\n      \\\"Status\\\": \\\"off\\\",\\n      \\\"HeaderOpItems\\\": [\\n        {\\n          \\\"DirectionType\\\": \\\"Response\\\",\\n          \\\"OpType\\\": \\\"Add\\\",\\n          \\\"Key\\\": \\\"debug\\\",\\n          \\\"Value\\\": \\\"test\\\"\\n        }\\n      ]\\n    },\\n    \\\"DestinationType\\\": \\\"Single\\\",\\n    \\\"DirectResponse\\\": {\\n      \\\"Code\\\": 200,\\n      \\\"Body\\\": \\\"[{\\\\\\\\\\\\\\\"key\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"h68d13466.sqa.eu95\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"dims\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"groupName=All}]\\\"\\n    },\\n    \\\"Cors\\\": {\\n      \\\"Status\\\": \\\"off\\\",\\n      \\\"AllowOrigins\\\": \\\"*\\\",\\n      \\\"AllowMethods\\\": \\\"GET,POST,PUT,DELETE,HEAD,OPTIONS,PATCH\\\",\\n      \\\"AllowHeaders\\\": \\\"*\\\",\\n      \\\"ExposeHeaders\\\": \\\"*\\\",\\n      \\\"TimeUnit\\\": \\\"s\\\",\\n      \\\"UnitNum\\\": 1,\\n      \\\"AllowCredentials\\\": true\\n    },\\n    \\\"Timeout\\\": {\\n      \\\"UnitNum\\\": 10,\\n      \\\"TimeUnit\\\": \\\"s\\\",\\n      \\\"Status\\\": \\\"off\\\"\\n    },\\n    \\\"Retry\\\": {\\n      \\\"Attempts\\\": 1,\\n      \\\"RetryOn\\\": [\\n        \\\"5xx\\\"\\n      ],\\n      \\\"HttpCodes\\\": [\\n        \\\"500\\\"\\n      ],\\n      \\\"Status\\\": \\\"on\\\"\\n    },\\n    \\\"DomainIdList\\\": [\\n      1\\n    ],\\n    \\\"DomainNameList\\\": [\\n      \\\"test.com\\\"\\n    ],\\n    \\\"Redirect\\\": {\\n      \\\"Code\\\": 200,\\n      \\\"Host\\\": \\\"ww.al.c\\\",\\n      \\\"Path\\\": \\\"/\\\"\\n    },\\n    \\\"EnableWaf\\\": true\\n  }\\n}\",\"type\":\"json\"}]","title":"更新路由防护状态"}