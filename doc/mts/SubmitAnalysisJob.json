{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{},"parameters":[{"name":"Input","in":"query","schema":{"description":"作业输入，JSON对象。需在OSS控制台Bucket授权页面将Bucket读权限授权给媒体转码服务。更多信息请参见[参数详情](~~29253~~)。\n\n> OSS的地域需要与当前MPS所在地域保持一致。","type":"string","required":true,"example":"{\"Bucket\":\"example-bucket\",\"Location\":\"oss-cn-hangzhou\",\"Object\":\"example.flv\"}"}},{"name":"AnalysisConfig","in":"query","schema":{"description":"模板分析作业配置，根据您的实际需要按需设置。更多参数信息请参见[参数详情](~~29253~~)。","type":"string","required":false,"example":"{\"QualityControl\":{\"RateQuality\":25,\"MethodStreaming\":\"network\"}}"}},{"name":"UserData","in":"query","schema":{"description":"用户自定义数据，可以使用中英文、数字、中划线（-）等，不能以特殊字符开头，最大长度1024个字节。","type":"string","required":false,"example":"testid-001"}},{"name":"PipelineId","in":"query","schema":{"description":"管道ID，可以通过**MPS控制台**>**全局设置**>**管道**查看。如果需要异步通知，须保证此管道绑定了可用的消息主题。","type":"string","required":true,"example":"bb558c1cc25b45309aab5be44d19****"}},{"name":"Priority","in":"query","schema":{"description":"任务在其对应管道内的转码优先级。\n\n- 取值范围：**\\[1,10\\]**，10为最高优先级。\n- 默认值：**6**。","type":"string","required":false,"example":"10"}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"B52658D4-07AB-43CD-82B0-210958A65E23"},"AnalysisJob":{"description":"系统预置模板分析作业。","type":"object","properties":{"CreationTime":{"description":"作业添加时间。","type":"string","example":"2014-01-10T12:00:00Z"},"Percent":{"description":"转码进度。","type":"integer","format":"int64","example":"100"},"State":{"description":"作业状态。\n\n- **Submitted**：已提交。\n\n- **Analyzing**：分析中。\n\n- **Success**：分析成功。\n\n- **Fail**：分析失败。","type":"string","example":"Success"},"AnalysisConfig":{"description":"作业配置。","type":"object","properties":{"QualityControl":{"description":"输出质量控制。","type":"object","properties":{"MethodStreaming":{"description":"播放方式。\n\n- **network**：在线。\n\n- **local**：本地。\n\n- 默认值：**network**。","type":"string","example":"network"},"RateQuality":{"description":"输出质量等级。","type":"string","example":"50"}}},"PropertiesControl":{"description":"属性控制。","type":"object","properties":{"Deinterlace":{"description":"强制扫描模式判定。\n\n- **Auto**：自动。\n- **Force**：强制做deinterlace。\n- **None**：强制不做deinterlace。","type":"string","example":"Force"},"Crop":{"description":"视频裁切配置。","type":"object","properties":{"Top":{"description":"裁切上边距。\n\n> 若**Mode**为Auto或None，则此值失效。","type":"string","example":"8"},"Width":{"description":"裁切后宽。\n\n> 若**Mode**为Auto或None，则此值失效。","type":"string","example":"8"},"Height":{"description":"裁切后高。\n\n> 若**Mode**为Auto或None，则此值失效。","type":"string","example":"8"},"Left":{"description":"裁切左边距。\n\n> 若**Mode**为Auto或None，则此值失效。","type":"string","example":"8"},"Mode":{"description":"裁切方式。取值：\n\n- **Auto**：自动（默认）。\n- **Force**：强制。\n- **None**：强制不做。","type":"string","example":"Auto"}}}}}}},"Message":{"description":"分析失败时错误信息。","type":"string","example":"The resource operated \\\"PipelineId\\\" cannot be found"},"Priority":{"description":"任务在其对应管道内的优先级。\n\n- 取值范围：**\\[1,10\\]**。10为最高优先级。\n\n- 默认值：**10**。","type":"string","example":"10"},"MNSMessageResult":{"description":"MNS通知用户作业完成的结果。","type":"object","properties":{"MessageId":{"description":"成功时消息ID。分析失败时不返回此参数。","type":"string","example":"3ca84a39a9024f19853b21be9cf9****"},"ErrorMessage":{"description":"失败时错误信息。分析成功时不返回此参数。","type":"string","example":"The resource operated \\\"PipelineId\\\" cannot be found"},"ErrorCode":{"description":"失败时错误码。分析成功时不返回此参数。","type":"string","example":"InvalidParameter.ResourceNotFound"}}},"TemplateList":{"type":"object","properties":{"Template":{"description":"作业输出的预置模板列表。","type":"array","items":{"description":"作业输出的预置模板详细信息。","type":"object","properties":{"Video":{"description":"视频编解码配置。","type":"object","properties":{"Bufsize":{"description":"缓冲区大小。\n\n- 单位：Kb。\n- 默认值：**6000**。","type":"string","example":"5000"},"Degrain":{"description":"独立去噪算法强度。","type":"string","example":"5"},"BitrateBnd":{"description":"视频平均码率范围。","type":"object","properties":{"Max":{"description":"总码率上限。单位：Kbps。","type":"string","example":"20"},"Min":{"description":"总码率下限。单位：Kbps。","type":"string","example":"10"}}},"PixFmt":{"description":"视频颜色格式。包含yuv420p，yuvj420p等标准颜色格式。","type":"string","example":"yuvj420p"},"Codec":{"description":"编解码格式。默认值：**H.264**。","type":"string","example":"H.264"},"Height":{"description":"视频高。\n- 单位：px。\n- 默认值：**视频原始高度**。","type":"string","example":"1880"},"Qscale":{"description":"视频质量控制度。","type":"string","example":"15"},"Bitrate":{"description":"视频平均码率。单位：Kbps。","type":"string","example":"10"},"Maxrate":{"description":"视频码率峰值。单位：Kbps。","type":"string","example":"10"},"Profile":{"description":"编码级别。\n\n- **baseline**：针对移动设备。\n- **main**：针对标准分辨率设备。\n- **high**：针对高分辨率设备。\n\n- 默认值：**high**。","type":"string","example":"baseline"},"Crf":{"description":"码率-质量控制因子。\n\n- 默认值：编码格式为H264，默认值为**23**。编码格式为H265，默认值为**26**。\n\n- 如果设置了Crf，则Bitrate的设置失效。","type":"string","example":"27"},"Gop":{"description":"关键帧间最大帧数。默认值：**250**。","type":"string","example":"1"},"Width":{"description":"视频宽。\n\n- 单位：px。\n- 默认值：**视频原始宽度**。","type":"string","example":"1990"},"Fps":{"description":"帧率。\n\n- 当输入文件帧率超过60时取60。\n- 默认值：取**输入文件帧率**。","type":"string","example":"60"},"Preset":{"description":"视频算法器预置。支持veryfast（超快）、fast（快）、medium（中等）、slow（慢）、slower（超慢）。默认值：**medium**。","type":"string","example":"medium"},"ScanMode":{"description":"扫描模式。取值：\n\n- **interlaced**：交叉扫描。\n\n- **progressive**：顺序扫描。","type":"string","example":"progressive"}}},"TransConfig":{"description":"转码通用配置。","type":"object","properties":{"TransMode":{"description":"转码模式。取值：onepass、twopass、CBR。默认值：**onepass**。","type":"string","example":"onepass"}}},"State":{"description":"模板的状态。\n\n- **Normal**：正常。\n\n- **Deleted**：已删除。","type":"string","example":"Normal"},"MuxConfig":{"description":"转码封包配置。","type":"object","properties":{"Gif":{"description":"gif格式。","type":"object","properties":{"FinalDelay":{"description":"gif的loop间隔，单位为百分之一秒，比如500代表间隔为5秒。\n","type":"string","example":"0"},"Loop":{"description":"gif与webp循环次数，默认不循环。","type":"string","example":"0"}}},"Segment":{"description":"切片配置。","type":"object","properties":{"Duration":{"description":"分片时长。单位：秒。","type":"string","example":"60"}}}}},"Name":{"description":"模板名称。","type":"string","example":"FLV-UD"},"Audio":{"description":"音频编解码配置。","type":"object","properties":{"Profile":{"description":"音频编码预置。当**Codec**为**aac**时可取值：aac_low、aac_he、aac_he_v2、aac_ld、aac_eld。","type":"string","example":"aac_low"},"Codec":{"description":"音频编解码格式。默认值：**aac**。","type":"string","example":"mp3"},"Samplerate":{"description":"采样率。\n\n- 单位：Hz。\n- 默认值：**44100**。","type":"string","example":"32000"},"Qscale":{"description":"音频质量控制度。","type":"string","example":"10"},"Channels":{"description":"声道数。默认值：**2**。","type":"string","example":"1"},"Bitrate":{"description":"输出文件的音频码率。\n\n- 单位：Kbps。\n- 默认值：**128**。","type":"string","example":"8"}}},"Id":{"description":"转码模板ID。","type":"string","example":"S00000000-00****"},"Container":{"description":"容器。","type":"object","properties":{"Format":{"description":"容器格式。","type":"string","example":"flv"}}}}}}}},"UserData":{"description":"用户自定义数据。","type":"string","example":"testid-001"},"Code":{"description":"分析失败时错误码。分析成功时不返回此参数。","type":"string","example":"InvalidParameter.ResourceNotFound"},"InputFile":{"description":"作业输入。","type":"object","properties":{"Object":{"description":"OSS的Object。","type":"string","example":"example.flv"},"Location":{"description":"OSS的服务区域。","type":"string","example":"oss-cn-hangzhou"},"Bucket":{"description":"OSS的Bucket。","type":"string","example":"example-bucket"}}},"PipelineId":{"description":"管道ID。","type":"string","example":"bb558c1cc25b45309aab5be44d19****"},"Id":{"description":"模板分析作业ID。","type":"string","example":"57f6aa3f84824309bcba67231b40****"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"B52658D4-07AB-43CD-82B0-210958A65E23\\\",\\n  \\\"AnalysisJob\\\": {\\n    \\\"CreationTime\\\": \\\"2014-01-10T12:00:00Z\\\",\\n    \\\"Percent\\\": 100,\\n    \\\"State\\\": \\\"Success\\\",\\n    \\\"AnalysisConfig\\\": {\\n      \\\"QualityControl\\\": {\\n        \\\"MethodStreaming\\\": \\\"network\\\",\\n        \\\"RateQuality\\\": \\\"50\\\"\\n      },\\n      \\\"PropertiesControl\\\": {\\n        \\\"Deinterlace\\\": \\\"Force\\\",\\n        \\\"Crop\\\": {\\n          \\\"Top\\\": \\\"8\\\",\\n          \\\"Width\\\": \\\"8\\\",\\n          \\\"Height\\\": \\\"8\\\",\\n          \\\"Left\\\": \\\"8\\\",\\n          \\\"Mode\\\": \\\"Auto\\\"\\n        }\\n      }\\n    },\\n    \\\"Message\\\": \\\"The resource operated \\\\\\\\\\\\\\\"PipelineId\\\\\\\\\\\\\\\" cannot be found\\\",\\n    \\\"Priority\\\": \\\"10\\\",\\n    \\\"MNSMessageResult\\\": {\\n      \\\"MessageId\\\": \\\"3ca84a39a9024f19853b21be9cf9****\\\",\\n      \\\"ErrorMessage\\\": \\\"The resource operated \\\\\\\\\\\\\\\"PipelineId\\\\\\\\\\\\\\\" cannot be found\\\",\\n      \\\"ErrorCode\\\": \\\"InvalidParameter.ResourceNotFound\\\"\\n    },\\n    \\\"TemplateList\\\": {\\n      \\\"Template\\\": [\\n        {\\n          \\\"Video\\\": {\\n            \\\"Bufsize\\\": \\\"5000\\\",\\n            \\\"Degrain\\\": \\\"5\\\",\\n            \\\"BitrateBnd\\\": {\\n              \\\"Max\\\": \\\"20\\\",\\n              \\\"Min\\\": \\\"10\\\"\\n            },\\n            \\\"PixFmt\\\": \\\"yuvj420p\\\",\\n            \\\"Codec\\\": \\\"H.264\\\",\\n            \\\"Height\\\": \\\"1880\\\",\\n            \\\"Qscale\\\": \\\"15\\\",\\n            \\\"Bitrate\\\": \\\"10\\\",\\n            \\\"Maxrate\\\": \\\"10\\\",\\n            \\\"Profile\\\": \\\"baseline\\\",\\n            \\\"Crf\\\": \\\"27\\\",\\n            \\\"Gop\\\": \\\"1\\\",\\n            \\\"Width\\\": \\\"1990\\\",\\n            \\\"Fps\\\": \\\"60\\\",\\n            \\\"Preset\\\": \\\"medium\\\",\\n            \\\"ScanMode\\\": \\\"progressive\\\"\\n          },\\n          \\\"TransConfig\\\": {\\n            \\\"TransMode\\\": \\\"onepass\\\"\\n          },\\n          \\\"State\\\": \\\"Normal\\\",\\n          \\\"MuxConfig\\\": {\\n            \\\"Gif\\\": {\\n              \\\"FinalDelay\\\": \\\"0\\\",\\n              \\\"Loop\\\": \\\"0\\\"\\n            },\\n            \\\"Segment\\\": {\\n              \\\"Duration\\\": \\\"60\\\"\\n            }\\n          },\\n          \\\"Name\\\": \\\"FLV-UD\\\",\\n          \\\"Audio\\\": {\\n            \\\"Profile\\\": \\\"aac_low\\\",\\n            \\\"Codec\\\": \\\"mp3\\\",\\n            \\\"Samplerate\\\": \\\"32000\\\",\\n            \\\"Qscale\\\": \\\"10\\\",\\n            \\\"Channels\\\": \\\"1\\\",\\n            \\\"Bitrate\\\": \\\"8\\\"\\n          },\\n          \\\"Id\\\": \\\"S00000000-00****\\\",\\n          \\\"Container\\\": {\\n            \\\"Format\\\": \\\"flv\\\"\\n          }\\n        }\\n      ]\\n    },\\n    \\\"UserData\\\": \\\"testid-001\\\",\\n    \\\"Code\\\": \\\"InvalidParameter.ResourceNotFound\\\",\\n    \\\"InputFile\\\": {\\n      \\\"Object\\\": \\\"example.flv\\\",\\n      \\\"Location\\\": \\\"oss-cn-hangzhou\\\",\\n      \\\"Bucket\\\": \\\"example-bucket\\\"\\n    },\\n    \\\"PipelineId\\\": \\\"bb558c1cc25b45309aab5be44d19****\\\",\\n    \\\"Id\\\": \\\"57f6aa3f84824309bcba67231b40****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SubmitAnalysisJobResponse>\\n    <RequestId>B52658D4-07AB-43CD-82B0-210958A65E23</RequestId>\\n    <AnalysisJob>\\n        <CreationTime>2014-01-10T12:00:00Z</CreationTime>\\n        <Percent>100</Percent>\\n        <State>Success</State>\\n        <AnalysisConfig>\\n            <QualityControl>\\n                <MethodStreaming>network</MethodStreaming>\\n                <RateQuality>50</RateQuality>\\n            </QualityControl>\\n            <PropertiesControl>\\n                <Deinterlace>Force</Deinterlace>\\n                <Crop>\\n                    <Top>8</Top>\\n                    <Width>8</Width>\\n                    <Height>8</Height>\\n                    <Left>8</Left>\\n                    <Mode>Auto</Mode>\\n                </Crop>\\n            </PropertiesControl>\\n        </AnalysisConfig>\\n        <Message>The resource operated \\\\\\\"PipelineId\\\\\\\" cannot be found</Message>\\n        <Priority>10</Priority>\\n        <MNSMessageResult>\\n            <MessageId>3ca84a39a9024f19853b21be9cf9****</MessageId>\\n        </MNSMessageResult>\\n        <TemplateList>\\n            <Video>\\n                <Bufsize>5000</Bufsize>\\n                <Degrain>5</Degrain>\\n                <BitrateBnd>\\n                    <Max>20</Max>\\n                    <Min>10</Min>\\n                </BitrateBnd>\\n                <PixFmt>yuvj420p</PixFmt>\\n                <Codec>H.264</Codec>\\n                <Height>1880</Height>\\n                <Qscale>15</Qscale>\\n                <Bitrate>10</Bitrate>\\n                <Maxrate>10</Maxrate>\\n                <Profile>baseline</Profile>\\n                <Crf>27</Crf>\\n                <Gop>1</Gop>\\n                <Width>1990</Width>\\n                <Fps>60</Fps>\\n                <Preset>medium</Preset>\\n                <ScanMode>progressive</ScanMode>\\n            </Video>\\n            <TransConfig>\\n                <TransMode>onepass</TransMode>\\n            </TransConfig>\\n            <State>Normal</State>\\n            <MuxConfig>\\n                <Gif>\\n                    <FinalDelay>0</FinalDelay>\\n                    <Loop>0</Loop>\\n                </Gif>\\n                <Segment>\\n                    <Duration>60</Duration>\\n                </Segment>\\n            </MuxConfig>\\n            <Name>FLV-UD</Name>\\n            <Audio>\\n                <Profile>aac_low</Profile>\\n                <Codec>mp3</Codec>\\n                <Samplerate>32000</Samplerate>\\n                <Qscale>10</Qscale>\\n                <Channels>1</Channels>\\n                <Bitrate>8</Bitrate>\\n            </Audio>\\n            <Id>S00000000-00****</Id>\\n            <Container>\\n                <Format>flv</Format>\\n            </Container>\\n        </TemplateList>\\n        <UserData>testid-001</UserData>\\n        <InputFile>\\n            <Object>example.flv</Object>\\n            <Location>oss-cn-hangzhou</Location>\\n            <Bucket>example-bucket</Bucket>\\n        </InputFile>\\n        <PipelineId>bb558c1cc25b45309aab5be44d19****</PipelineId>\\n        <Id>57f6aa3f84824309bcba67231b40****</Id>\\n    </AnalysisJob>\\n</SubmitAnalysisJobResponse>\",\"errorExample\":\"\"}]","title":"提交预置模板分析作业","summary":"提交预置模板分析作业。","description":"- 通过本接口提交作业以后，媒体处理服务会对输入文件进行智能分析，推荐出适合输入文件的预置模板，可通过[查询模板分析作业](~~29224~~)接口得到模板分析作业结果，也可使用异步通知机制。\n- 预置模板分析的结果只保留半个月（从得到结果时算起），半个月后将被删除。如果半个月后再使用推荐的预置模板提交作业将返回转码作业失败，失败的错误码为：`AnalysisResultNotFound`。\n\n### QPS限制\n本接口的单用户QPS限制为100次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~342832~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}