{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update"},"parameters":[{"name":"TemplateId","in":"query","schema":{"description":"模板ID。可以从[新增自定义转码模板](~~213306~~)的返回参数中获取。","type":"string","required":true,"example":"16f01ad6175e4230ac42bb5182cd****"}},{"name":"Name","in":"query","schema":{"description":"模板名称。最大长度128字节。","type":"string","required":true,"example":"MPS-example"}},{"name":"Container","in":"query","schema":{"description":"容器，JSON对象。默认值：**mp4**\n\n- 视频转码支持flv、mp4、HLS（m3u8+ts）、MPEG-DASH（MPD+fMP4）。\n\n- 音频转码支持mp3、mp4、ogg、flac、m4a。\n\n- 图片支持gif、WEBP。\n\n更多信息请参见参数详情[Container详情](~~29253~~)。\n","type":"string","required":false,"example":"{\"Format\":\"mp4\"}"}},{"name":"Video","in":"query","schema":{"description":"视频流配置，JSON对象。更多信息请参见参数详情[Video详情](~~29253~~)。","type":"string","required":false,"example":"{\"Codec\":\"H.264\",\"Profile\":\"high\",\"Bitrate\":\"500\",\"Crf\":\"15\",\"Width\":\"256\",\"Height\":\"800\",\"Fps\":\"25\",\"Gop\":\"10\"}"}},{"name":"Audio","in":"query","schema":{"description":"音频流配置，JSON对象。更多信息请参见参数详情[Audio详情](~~29253~~)。","type":"string","required":false,"example":"{\"Codec\":\"aac\",\"Samplerate\":\"44100\",\"Bitrate\":\"500\",\"Channels\":\"2\"}"}},{"name":"MuxConfig","in":"query","schema":{"description":"封包配置，JSON对象。更多信息请参见参数详情[MuxConfig详情](~~29253~~)。","type":"string","required":false,"example":"{\"Segment\":{\"Duration\":\"10\"}}"}},{"name":"TransConfig","in":"query","schema":{"description":"转码通用配置，JSON对象。更多信息请参见参数详情[TransConfig](~~29253~~)。","type":"string","required":false,"example":"{\"TransMode\":\"onepass\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"5E4FB22E-B9EA-4E24-8FFC-B407EA71QW21"},"Template":{"description":"转码模板类型。","type":"object","properties":{"Video":{"description":"视频编解码配置。\n","type":"object","properties":{"LongShortMode":{"description":"是否开启横竖屏自适应（即：长短边模式）。\n\n- 转码输出的宽对应输入片源的长边（竖屏为片源的高），高对应输入视频的短边（竖屏为片源的宽）。\n- **true**表示开启。\n- **false**表示关闭。\n- 默认值：**false**。","type":"string","example":"false"},"Bufsize":{"description":"缓冲区大小。\n\n- 单位：Kb。\n- 默认值：**6000**。","type":"string","example":"6000"},"Degrain":{"description":"视频质量控制度。","type":"string","example":"10"},"BitrateBnd":{"description":"视频平均码率范围。","type":"object","properties":{"Max":{"description":"总码率上限。单位：Kbps。","type":"string","example":"500"},"Min":{"description":"总码率下限。单位：Kbps。","type":"string","example":"100"}}},"PixFmt":{"description":"视频颜色格式。范围：yuv420p、yuvj420p等标准颜色格式。","type":"string","example":"yuv420p"},"Pad":{"description":"视频贴黑边。  \n\n- 参数格式：width:height:left:top。\n\n- 示例：1280:800:0:140。","type":"string","example":"1280:800:0:140"},"Codec":{"description":"编解码格式。默认值：**H.264**。","type":"string","example":"H.264"},"Height":{"description":"高。\n\n- 单位：px。\n- 默认值：**视频原始高度**。","type":"string","example":"800"},"Qscale":{"description":"独立去噪算法强度。","type":"string","example":"1"},"Crop":{"description":"视频画面裁切。支持2种方式：\n- **自动检测黑边并裁切**：设置为“border”。\n- **自定义裁切**：自定义格式进行裁剪。参数格式：width:height:left:top。示例：1280:800:0:140。","type":"string","example":"border"},"Bitrate":{"description":"视频平均码率。单位：Kbps。","type":"string","example":"200"},"Maxrate":{"description":"视频码率峰值。单位：(Kbps)。","type":"string","example":"500"},"MaxFps":{"description":"最大帧率。","type":"string","example":"60"},"Profile":{"description":"编码级别。\n\n- **baseline**：针对移动设备。\n- **main**：针对标准分辨率设备。\n- **high**：针对高分辨率设备。\n- 默认值：**high**。","type":"string","example":"high"},"Crf":{"description":"码率-质量控制因子。\n\n- 默认值：编码格式为H264，默认值为**23**。编码格式为H265，默认值为**26**。\n- 如果设置了Crf，则Bitrate的设置失效。","type":"string","example":"15"},"Remove":{"description":"是否删除视频流\t\n\n- **true**表示删除。\n- **false**表示保留。\n- 默认值：**false**。","type":"string","example":"false"},"Gop":{"description":"关键帧间最大帧数。默认值：**250**。","type":"string","example":"10"},"Width":{"description":"视频宽。\n\n- 单位：px。\n- 默认值：**视频原始宽度**。","type":"string","example":"256"},"Fps":{"description":"帧率。\n\n- 当输入文件帧率超过60时取60。\n- 默认值：取**输入文件帧率**。","type":"string","example":"25"},"Preset":{"description":"视频算法器预置。默认值：**medium**。可选值：\n\n- **veryfast**：超快。\n\n- **fast**：快。\n\n- **medium**：中等。\n\n- **slow**：慢。\n\n- **slower**：超慢。","type":"string","example":"medium"},"ScanMode":{"description":"扫描模式。可选值：\n\n- **interlaced**：交叉扫描。\n\n- **progressive**：顺序扫描。","type":"string","example":"interlaced"},"ResoPriority":{"description":"分辨率调整优先级","type":"string","example":"1"},"Hdr2sdr":{"description":"是否开启hdr2sdr功能。启用时会把hdr的视频转成sdr。","type":"string","example":"true"},"NarrowBand":{"description":"窄带高清设置参数。","type":"object","properties":{"Version":{"description":"窄带高清版本，可选值：1.0 。","type":"string","example":"1.0"},"Abrmax":{"description":"动态码率上限，设置后平均码率范围 (0, 1000000]。","type":"number","format":"float","example":"3000"},"MaxAbrRatio":{"description":"码率上限最大倍率，设置后 abrmax 不会超过视频源码率的 x 倍。范围 (0, 1.0]。","type":"number","format":"float","example":"1.0"}}}}},"TransConfig":{"description":"转码通用配置。\n","type":"object","properties":{"IsCheckAudioBitrate":{"description":"是否检查音频码率。当输出音频码率大于媒体源音频码率时，则视为输出音频码率等于媒体源音频码率，即设置的音频码率参数不会生效。此值优先级小于IsCheckAudioBitrateFail。\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：\n    - 参数为空，并且codec和输入源不一样：false。\n    - 参数为空，并且codec和输入源一样：true。","type":"string","example":"false"},"TransMode":{"description":"转码模式。默认值：**onepass**。可选范围：\n\n- **onepass**\n\n- **twopass**\n\n- **CBR**","type":"string","example":"onepass"},"IsCheckReso":{"description":"是否检查分辨率。如果输出分辨率大于输入分辨率（判断条件是宽或高），则输出分辨率等于输入分辨率。\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：**false**。","type":"string","example":"false"},"IsCheckVideoBitrateFail":{"description":"是否检查视频码率。此值优先级大于IsCheckVideoBitrate。\n\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：**false**。\n","type":"string","example":"false"},"AdjDarMethod":{"description":"分辨率改写方式。默认值：**none**。可选值：\n\n- rescale：范围拉伸\n\n- crop：批量裁剪\n\n- none：不改变。","type":"string","example":"none"},"IsCheckVideoBitrate":{"description":"是否检查视频码率。如果视频输出码率大于视频输入码率，则视频输出码率等于视频输入码率。\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：**false**。","type":"string","example":"false"},"IsCheckResoFail":{"description":"是否检查分辨率。如果输出分辨率大于输入分辨率（判断条件是宽或高），则返回转码失败。\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：**false**。","type":"string","example":"false"},"IsCheckAudioBitrateFail":{"description":"是否检查音频码率。此值优先级大于IsCheckAudioBitrate。\n\n- **true**表示检查。\n- **false**表示不检查。\n- 默认值：**false**。\n","type":"string","example":"false"}}},"State":{"description":"模板的状态。\n\n- **Normal**：正常。\n\n- **Deleted**：已删除。","type":"string","example":"Normal"},"MuxConfig":{"description":"转码封包配置。\n","type":"object","properties":{"Webp":{"description":"Webp对应的封包配置。","type":"object","properties":{"Loop":{"description":"循环次数。","type":"string","example":"0"}}},"Gif":{"description":"Gif对应的封包配置。","type":"object","properties":{"FinalDelay":{"description":"终帧暂停时间。单位：毫秒（ms）。","type":"string","example":"false"},"DitherMode":{"description":"调色板颜色抖动方式。抖动算法可选值为sierra算法和bayer算法。","type":"string","example":"bayer"},"Loop":{"description":"循环次数。","type":"string","example":"0"},"IsCustomPalette":{"description":"自定义调色板功能。","type":"string","example":"0"}}},"Segment":{"description":"切片配置。\n","type":"object","properties":{"Duration":{"description":"分片时长。单位：秒（s）。","type":"string","example":"10"}}}}},"Name":{"description":"模板名称。\n","type":"string","example":"MPS-example"},"Audio":{"description":"音频编解码配置。\n","type":"object","properties":{"Profile":{"description":"音频编码预置。当**Codec**为**aac**时可选值：\n\n- **aac_low**\n\n- **aac_he**\n\n- **aac_he_v2**\n\n- **aac_ld**\n\n- **aac_eld**","type":"string","example":"aac_low"},"Remove":{"description":"是否删除音频流。\n\n- **true**表示删除。\n- **false**表示保留。\n- 默认值：**false**。","type":"string","example":"false"},"Codec":{"description":"音频编解码格式。默认值：**aac**。可选值：\n\n- **aac**\n\n- **mp3**\n\n- **vorbis**\n\n- **flac** ","type":"string","example":"aac"},"Samplerate":{"description":"采样率。\n\n- 单位：Hz。\n- 默认值：**44100**。","type":"string","example":"44100"},"Qscale":{"description":"独立去噪算法强度。","type":"string","example":"1"},"Channels":{"description":"声道数。默认值：**2**。","type":"string","example":"2"},"Bitrate":{"description":"输出文件的音频码率。\n\n- 取值范围：**\\[8,1000\\]**。\n- 单位：Kbps。\n- 默认值：**128**。","type":"string","example":"500"},"Volume":{"description":"音量控制。","type":"object","properties":{"Method":{"description":"音量调整方式。可取值：\n\n- **auto**：自动调整。\n- **dynamic**：动态调整。\n\n- **linear**：线性调整。","type":"string","example":"auto"},"TruePeak":{"description":"最大峰值。\n- 当指定Method为dynamic时生效。\n- 单位：db。\n- 值范围：[-9,0]。\n- 默认值：-1。","type":"string","example":"-1"},"IntegratedLoudnessTarget":{"description":"目标音量。\n- 当指定Method为dynamic时生效。\n- 单位：db。\n- 值范围：[-70,-5]。\n- 默认值：-6。","type":"string","example":"-6"},"Level":{"description":"相对输入音频的音量提升的幅度。\n- 当指定Method为linear时生效。\n- 单位：db。\n- 值范围：不超过20db。\n- 默认值：-20db。","type":"string","example":"-20"},"LoudnessRangeTarget":{"description":"相对目标音量的波动范围。\n- 当指定Method为dynamic时生效。\n- 单位：db。\n- 值范围：[1,20]。\n- 默认值：8。","type":"string","example":"8"},"PeakLevel":{"title":"音量调整系数。\n\n当指定Method为adaptive时生效。\n\n值范围：[0,1]。\n\n默认值：0.9。","description":"音量调整系数。\n\n当指定Method为adaptive时生效。\n\n值范围：[0,1]。\n\n默认值：0.9。","type":"string","example":"0.9"}}}}},"Id":{"description":"转码模板ID。","type":"string","example":"16f01ad6175e4230ac42bb5182cd****"},"Container":{"description":"容器。\n","type":"object","properties":{"Format":{"description":"容器格式。","type":"string","example":"mp4"}}}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"5E4FB22E-B9EA-4E24-8FFC-B407EA71QW21\\\",\\n  \\\"Template\\\": {\\n    \\\"Video\\\": {\\n      \\\"LongShortMode\\\": \\\"false\\\",\\n      \\\"Bufsize\\\": \\\"6000\\\",\\n      \\\"Degrain\\\": \\\"10\\\",\\n      \\\"BitrateBnd\\\": {\\n        \\\"Max\\\": \\\"500\\\",\\n        \\\"Min\\\": \\\"100\\\"\\n      },\\n      \\\"PixFmt\\\": \\\"yuv420p\\\",\\n      \\\"Pad\\\": \\\"1280:800:0:140\\\",\\n      \\\"Codec\\\": \\\"H.264\\\",\\n      \\\"Height\\\": \\\"800\\\",\\n      \\\"Qscale\\\": \\\"1\\\",\\n      \\\"Crop\\\": \\\"border\\\",\\n      \\\"Bitrate\\\": \\\"200\\\",\\n      \\\"Maxrate\\\": \\\"500\\\",\\n      \\\"MaxFps\\\": \\\"60\\\",\\n      \\\"Profile\\\": \\\"high\\\",\\n      \\\"Crf\\\": \\\"15\\\",\\n      \\\"Remove\\\": \\\"false\\\",\\n      \\\"Gop\\\": \\\"10\\\",\\n      \\\"Width\\\": \\\"256\\\",\\n      \\\"Fps\\\": \\\"25\\\",\\n      \\\"Preset\\\": \\\"medium\\\",\\n      \\\"ScanMode\\\": \\\"interlaced\\\",\\n      \\\"ResoPriority\\\": \\\"1\\\",\\n      \\\"Hdr2sdr\\\": \\\"true\\\",\\n      \\\"NarrowBand\\\": {\\n        \\\"Version\\\": \\\"1.0\\\",\\n        \\\"Abrmax\\\": 3000,\\n        \\\"MaxAbrRatio\\\": 1\\n      }\\n    },\\n    \\\"TransConfig\\\": {\\n      \\\"IsCheckAudioBitrate\\\": \\\"false\\\",\\n      \\\"TransMode\\\": \\\"onepass\\\",\\n      \\\"IsCheckReso\\\": \\\"false\\\",\\n      \\\"IsCheckVideoBitrateFail\\\": \\\"false\\\",\\n      \\\"AdjDarMethod\\\": \\\"none\\\",\\n      \\\"IsCheckVideoBitrate\\\": \\\"false\\\",\\n      \\\"IsCheckResoFail\\\": \\\"false\\\",\\n      \\\"IsCheckAudioBitrateFail\\\": \\\"false\\\"\\n    },\\n    \\\"State\\\": \\\"Normal\\\",\\n    \\\"MuxConfig\\\": {\\n      \\\"Webp\\\": {\\n        \\\"Loop\\\": \\\"0\\\"\\n      },\\n      \\\"Gif\\\": {\\n        \\\"FinalDelay\\\": \\\"false\\\",\\n        \\\"DitherMode\\\": \\\"bayer\\\",\\n        \\\"Loop\\\": \\\"0\\\",\\n        \\\"IsCustomPalette\\\": \\\"0\\\"\\n      },\\n      \\\"Segment\\\": {\\n        \\\"Duration\\\": \\\"10\\\"\\n      }\\n    },\\n    \\\"Name\\\": \\\"MPS-example\\\",\\n    \\\"Audio\\\": {\\n      \\\"Profile\\\": \\\"aac_low\\\",\\n      \\\"Remove\\\": \\\"false\\\",\\n      \\\"Codec\\\": \\\"aac\\\",\\n      \\\"Samplerate\\\": \\\"44100\\\",\\n      \\\"Qscale\\\": \\\"1\\\",\\n      \\\"Channels\\\": \\\"2\\\",\\n      \\\"Bitrate\\\": \\\"500\\\",\\n      \\\"Volume\\\": {\\n        \\\"Method\\\": \\\"auto\\\",\\n        \\\"TruePeak\\\": \\\"-1\\\",\\n        \\\"IntegratedLoudnessTarget\\\": \\\"-6\\\",\\n        \\\"Level\\\": \\\"-20\\\",\\n        \\\"LoudnessRangeTarget\\\": \\\"8\\\",\\n        \\\"PeakLevel\\\": \\\"0.9\\\"\\n      }\\n    },\\n    \\\"Id\\\": \\\"16f01ad6175e4230ac42bb5182cd****\\\",\\n    \\\"Container\\\": {\\n      \\\"Format\\\": \\\"mp4\\\"\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateTemplateResponse>\\n    <RequestId>5E4FB22E-B9EA-4E24-8FFC-B407EA71QW21</RequestId>\\n    <Template>\\n        <Video>\\n            <LongShortMode>false</LongShortMode>\\n            <Bufsize>6000</Bufsize>\\n            <Degrain>10</Degrain>\\n            <BitrateBnd>\\n                <Max>500</Max>\\n                <Min>100</Min>\\n            </BitrateBnd>\\n            <PixFmt>yuv420p</PixFmt>\\n            <Pad>1280:800:0:140</Pad>\\n            <Codec>H.264</Codec>\\n            <Height>800</Height>\\n            <Qscale>1</Qscale>\\n            <Crop>border</Crop>\\n            <Bitrate>200</Bitrate>\\n            <Maxrate>500</Maxrate>\\n            <MaxFps>60</MaxFps>\\n            <Profile>high</Profile>\\n            <Crf>15</Crf>\\n            <Remove>false</Remove>\\n            <Gop>10</Gop>\\n            <Width>256</Width>\\n            <Fps>25</Fps>\\n            <Preset>medium</Preset>\\n            <ScanMode>interlaced</ScanMode>\\n            <ResoPriority>1</ResoPriority>\\n        </Video>\\n        <TransConfig>\\n            <IsCheckAudioBitrate>false</IsCheckAudioBitrate>\\n            <TransMode>onepass</TransMode>\\n            <IsCheckReso>false</IsCheckReso>\\n            <IsCheckVideoBitrateFail>false</IsCheckVideoBitrateFail>\\n            <AdjDarMethod>none</AdjDarMethod>\\n            <IsCheckVideoBitrate>false</IsCheckVideoBitrate>\\n            <IsCheckResoFail>false</IsCheckResoFail>\\n            <IsCheckAudioBitrateFail>false</IsCheckAudioBitrateFail>\\n        </TransConfig>\\n        <State>Normal</State>\\n        <MuxConfig>\\n            <Webp>\\n                <Loop>0</Loop>\\n            </Webp>\\n            <Gif>\\n                <FinalDelay>false</FinalDelay>\\n                <DitherMode>bayer</DitherMode>\\n                <Loop>0</Loop>\\n                <IsCustomPalette>0</IsCustomPalette>\\n            </Gif>\\n            <Segment>\\n                <Duration>10</Duration>\\n            </Segment>\\n        </MuxConfig>\\n        <Name>MPS-example</Name>\\n        <Audio>\\n            <Profile>aac_low</Profile>\\n            <Remove>false</Remove>\\n            <Codec>aac</Codec>\\n            <Samplerate>44100</Samplerate>\\n            <Qscale>1</Qscale>\\n            <Channels>2</Channels>\\n            <Bitrate>500</Bitrate>\\n        </Audio>\\n        <Id>16f01ad6175e4230ac42bb5182cd****</Id>\\n        <Container>\\n            <Format>mp4</Format>\\n        </Container>\\n    </Template>\\n</UpdateTemplateResponse>\",\"errorExample\":\"\"}]","title":"更新自定义转码模版","summary":"更新自定义转码模板设置。","description":"如果有状态为“已提交”的作业指定使用该自定义模板，则相应的转码模板信息不能被更新。\n\n### QPS限制\n本接口的单用户QPS限制为100次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~342832~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}