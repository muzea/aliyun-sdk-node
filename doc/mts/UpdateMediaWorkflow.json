{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update","abilityTreeCode":"25042","abilityTreeNodes":["FEATUREmts0IG2Y5"]},"parameters":[{"name":"MediaWorkflowId","in":"query","schema":{"description":"需要更新的媒体工作流ID，可以通过**MPS控制台** > **工作流管理** > **工作流设置**获取。","type":"string","required":true,"example":"6307eb0d3f85477882d205aa040f****"}},{"name":"Topology","in":"query","schema":{"description":"更新的媒体工作流拓扑结构。JSON对象，包括活动列表及活动依赖。 \n\n> OSS的地域需要与当前MPS所在地域保持一致。","type":"string","required":true,"example":"{\n      \"Activities\": {\n            \"Act-Start\": {\n                  \"Parameters\": {\n                        \"PipelineId\": \"130266f58161436a80bf07cb12c8****\",\n                        \"InputFile\": \"{\\\"Bucket\\\": \\\"example-bucket-****\\\",\\\"Location\\\": \\\"cn-shanghai\\\"}\"\n                  },\n                  \"Type\": \"Start\"\n            },\n            \"Act-Report\": {\n                  \"Parameters\": {},\n                  \"Type\": \"Report\"\n            },\n            \"Act-Transcode-M3U8\": {\n                  \"Parameters\": {\n                        \"Outputs\": \"[{\\\"Object\\\":\\\"transcode/{ObjectPrefix}{FileName}\\\",\\\"TemplateId\\\": \\\"957d1719ee85ed6527b90cf62726****\\\"}]\",\n                        \"OutputBucket\": \"example-bucket-****\",\n                        \"OutputLocation\": \"cn-shanghai\"\n                  },\n                  \"Type\": \"Transcode\"\n            }\n      },\n      \"Dependencies\": {\n            \"Act-Start\": [\n                  \"Act-Transcode-M3U8\"\n            ],\n            \"Act-Report\": [],\n            \"Act-Transcode-M3U8\": [\n                  \"Act-Report\"\n            ]\n      }\n}"}},{"name":"Name","in":"query","schema":{"type":"string","required":false}},{"name":"TriggerMode","in":"query","schema":{"type":"string","required":false}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"7D752035-97DA-54E5-88E2-E8405EEA****"},"MediaWorkflow":{"description":"媒体工作流详细信息。","type":"object","properties":{"CreationTime":{"description":"创建时间。","type":"string","example":"2016-04-01T05:29:38Z"},"MediaWorkflowId":{"description":"更新的媒体工作流ID。","type":"string","example":"6307eb0d3f85477882d205aa040f****"},"State":{"description":"媒体工作流状态。可取值：\n\n- **Inactive**：已停用。\n\n- **Active**：已启用。","type":"string","example":"Active"},"TriggerMode":{"description":"触发模式。可取值：\n\n- **OssAutoTrigger**：自动触发。\n\n- **NotInAuto**：不自动触发。","type":"string","example":"OssAutoTrigger"},"Name":{"description":"媒体工作流名称。","type":"string","example":"examp-mediaworkflow-****"},"Topology":{"description":"媒体工作流拓扑结构。","type":"string","example":"{\n      \"Activities\": {\n            \"Act-Start\": {\n                  \"Parameters\": {\n                        \"PipelineId\": \"130266f58161436a80bf07cb12c8****\",\n                        \"InputFile\": \"{\\\"Bucket\\\": \\\"example-bucket-****\\\",\\\"Location\\\": \\\"cn-shanghai\\\"}\"\n                  },\n                  \"Type\": \"Start\"\n            },\n            \"Act-Report\": {\n                  \"Parameters\": {},\n                  \"Type\": \"Report\"\n            },\n            \"Act-Transcode-M3U8\": {\n                  \"Parameters\": {\n                        \"Outputs\": \"[{\\\"Object\\\":\\\"transcode/{ObjectPrefix}{FileName}\\\",\\\"TemplateId\\\": \\\"957d1719ee85ed6527b90cf62726****\\\"}]\",\n                        \"OutputBucket\": \"example-bucket-****\",\n                        \"OutputLocation\": \"cn-shanghai\"\n                  },\n                  \"Type\": \"Transcode\"\n            }\n      },\n      \"Dependencies\": {\n            \"Act-Start\": [\n                  \"Act-Transcode-M3U8\"\n            ],\n            \"Act-Report\": [],\n            \"Act-Transcode-M3U8\": [\n                  \"Act-Report\"\n            ]\n      }\n}"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"7D752035-97DA-54E5-88E2-E8405EEA****\\\",\\n  \\\"MediaWorkflow\\\": {\\n    \\\"CreationTime\\\": \\\"2016-04-01T05:29:38Z\\\",\\n    \\\"MediaWorkflowId\\\": \\\"6307eb0d3f85477882d205aa040f****\\\",\\n    \\\"State\\\": \\\"Active\\\",\\n    \\\"TriggerMode\\\": \\\"OssAutoTrigger\\\",\\n    \\\"Name\\\": \\\"examp-mediaworkflow-****\\\",\\n    \\\"Topology\\\": \\\"{\\\\n      \\\\\\\"Activities\\\\\\\": {\\\\n            \\\\\\\"Act-Start\\\\\\\": {\\\\n                  \\\\\\\"Parameters\\\\\\\": {\\\\n                        \\\\\\\"PipelineId\\\\\\\": \\\\\\\"130266f58161436a80bf07cb12c8****\\\\\\\",\\\\n                        \\\\\\\"InputFile\\\\\\\": \\\\\\\"{\\\\\\\\\\\\\\\"Bucket\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"example-bucket-****\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Location\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"cn-shanghai\\\\\\\\\\\\\\\"}\\\\\\\"\\\\n                  },\\\\n                  \\\\\\\"Type\\\\\\\": \\\\\\\"Start\\\\\\\"\\\\n            },\\\\n            \\\\\\\"Act-Report\\\\\\\": {\\\\n                  \\\\\\\"Parameters\\\\\\\": {},\\\\n                  \\\\\\\"Type\\\\\\\": \\\\\\\"Report\\\\\\\"\\\\n            },\\\\n            \\\\\\\"Act-Transcode-M3U8\\\\\\\": {\\\\n                  \\\\\\\"Parameters\\\\\\\": {\\\\n                        \\\\\\\"Outputs\\\\\\\": \\\\\\\"[{\\\\\\\\\\\\\\\"Object\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"transcode/{ObjectPrefix}{FileName}\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"TemplateId\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"957d1719ee85ed6527b90cf62726****\\\\\\\\\\\\\\\"}]\\\\\\\",\\\\n                        \\\\\\\"OutputBucket\\\\\\\": \\\\\\\"example-bucket-****\\\\\\\",\\\\n                        \\\\\\\"OutputLocation\\\\\\\": \\\\\\\"cn-shanghai\\\\\\\"\\\\n                  },\\\\n                  \\\\\\\"Type\\\\\\\": \\\\\\\"Transcode\\\\\\\"\\\\n            }\\\\n      },\\\\n      \\\\\\\"Dependencies\\\\\\\": {\\\\n            \\\\\\\"Act-Start\\\\\\\": [\\\\n                  \\\\\\\"Act-Transcode-M3U8\\\\\\\"\\\\n            ],\\\\n            \\\\\\\"Act-Report\\\\\\\": [],\\\\n            \\\\\\\"Act-Transcode-M3U8\\\\\\\": [\\\\n                  \\\\\\\"Act-Report\\\\\\\"\\\\n            ]\\\\n      }\\\\n}\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<UpdateMediaWorkflowResponse>\\n    <RequestId>7D752035-97DA-54E5-88E2-E8405EEA****</RequestId>\\n    <MediaWorkflow>\\n        <CreationTime>2016-04-01T05:29:38Z</CreationTime>\\n        <MediaWorkflowId>6307eb0d3f85477882d205aa040f****</MediaWorkflowId>\\n        <State>Active</State>\\n        <TriggerMode>OssAutoTrigger</TriggerMode>\\n        <Name>examp-mediaworkflow-****</Name>\\n        <Topology>{mediaworkflow\\\",\\\"State\\\":\\\"Active\\\",\\\"Topology\\\":\\\"{\\\\\\\"Activities\\\\\\\":{\\\\\\\"Act-Start\\\\\\\":{\\\\\\\"Parameters\\\\\\\":{\\\\\\\"PipelineId\\\\\\\":\\\\\\\"130266f58161436a80bf07cb12c8****\\\\\\\",\\\\\\\"InputFile\\\\\\\":\\\\\\\"{\\\\\\\\\\\\\\\"Bucket\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"example-bucket-****\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Location\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"cn-shanghai\\\\\\\\\\\\\\\"}\\\\\\\"},\\\\\\\"Type\\\\\\\":\\\\\\\"Start\\\\\\\"},\\\\\\\"Act-Report\\\\\\\":{\\\\\\\"Parameters\\\\\\\":{},\\\\\\\"Type\\\\\\\":\\\\\\\"Report\\\\\\\"},\\\\\\\"Act-Transcode-M3U8\\\\\\\":{\\\\\\\"Parameters\\\\\\\":{\\\\\\\"Outputs\\\\\\\":\\\\\\\"[{\\\\\\\\\\\\\\\"Object\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"transcode/{ObjectPrefix}{FileName}\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"TemplateId\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\"957d1719ee85ed6527b90cf62726****\\\\\\\\\\\\\\\"}]\\\\\\\",\\\\\\\"OutputBucket\\\\\\\":\\\\\\\"example-bucket-****\\\\\\\",\\\\\\\"OutputLocation\\\\\\\":\\\\\\\"cn-shanghai\\\\\\\"},\\\\\\\"Type\\\\\\\":\\\\\\\"Transcode\\\\\\\"}},\\\\\\\"Dependencies\\\\\\\":{\\\\\\\"Act-Start\\\\\\\":[\\\\\\\"Act-Transcode-M3U8\\\\\\\"],\\\\\\\"Act-Report\\\\\\\":[],\\\\\\\"Act-Transcode-M3U8\\\\\\\":[\\\\\\\"Act-Report\\\\\\\"]}}\\\",\\\"MediaWorkflowId\\\":\\\"93ab850b4f6f44eab54b6e91d24d****\\\"}]},\\\"RequestId\\\":\\\"16CD0CDD-457E-420D-9755-8385075A1234\\\"}</Topology>\\n    </MediaWorkflow>\\n</UpdateMediaWorkflowResponse>\",\"errorExample\":\"\"}]","title":"更新媒体工作流的拓扑结构","summary":"更新媒体工作流。","description":"- 本接口用于更新媒体工作流的拓扑结构。如需更新媒体工作流触发模式，请参见[更新媒体工作流触发模式](~~70372~~)。\n- 删除或停用工作流后，工作流将无法使用。此时，如果上传文件至工作流指定的Bucket路径中，也不会自动触发工作流执行。\n\n<props=\"china\">\n><notice>删除或停用工作流后，不会影响已经提交的任务。如果提交任务后删除或停用工作流，已经进入处理排队中的任务将无法取消，会正常执行并收取对应的费用。\n></notice></props>\n\n### QPS限制\n本接口的单用户QPS限制为100次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~342832~~)。","responseParamsDescription":" ","extraInfo":" "}