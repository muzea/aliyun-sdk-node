{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"Name","in":"query","schema":{"description":"媒体工作流名称。\n\n- 不能为空串。\n- 同一账号下的工作流名称不可重复。\n- 不超过64个字符。\n- UTF-8编码。","type":"string","required":true,"example":"mediaworkflow-example"}},{"name":"Topology","in":"query","schema":{"description":"媒体工作流拓扑结构。格式为JSON对象，包括活动列表及活动依赖。更多信息请参见下文**Topology示例**。 \n\n> OSS的地域需要与当前MPS所在地域保持一致。","type":"string","required":true,"example":"{\"Activities\": {\"mediaworkflow-example\": {\"Parameters\": {\"Outputs\": \"[{\\\"OutputObject\\\":\\\"examplebucket/output/{RunId}/TRANSCODE_165941222****/{FileName}\\\",\\\"TemplateId\\\":\\\"S00000001-200010\\\",\\\"TemplateName\\\":\\\"MP4-流畅\\\"}]\",\"OutputBucket\": \"examplebucket\",\"OutputLocation\": \"oss-cn-shanghai\"},\"Type\": \"Transcode\"},\"Act-Start\": {\"Parameters\": {\"PipelineId\": \"a7d481f07d8c45da88c71853ce7d****\",\"InputFile\": \"{\\\"Bucket\\\":\\\"example-input\\\",\\\"Location\\\":\\\"oss-cn-shanghai\\\",\\\"ObjectPrefix\\\":\\\"mps-test/input/\\\"}\"},\"Type\": \"Start\"},\"Act-Report\": {\"Parameters\": {\"PublishType\": \"Manual\"},\"Type\": \"Report\"}},\"Dependencies\": {\"mediaworkflow-example\": [\"Act-Report\"],\"Act-Start\": [\"mediaworkflow-example\"],\"Act-Report\": []}}"}},{"name":"TriggerMode","in":"query","schema":{"description":"触发模式。 取值：\n\n- **OssAutoTrigger**：自动触发。\n\n- **NotInAuto**：不自动触发。","type":"string","required":false,"example":"OssAutoTrigger"}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F1D21261-ADB9-406A-1234-491382139D59"},"MediaWorkflow":{"description":"媒体工作流详细信息。","type":"object","properties":{"CreationTime":{"description":"创建时间。","type":"string","example":"016-04-01T05:29:37Z"},"MediaWorkflowId":{"description":"媒体工作流ID。建议您保存此ID便于后续对此工作流进行其他操作。","type":"string","example":"e00732b977da427d9177a4deb1aa****"},"State":{"description":"媒体工作流状态。新建的工作流默认为**Active**（激活）状态。","type":"string","example":"Active"},"TriggerMode":{"description":"触发模式。取值：\n\n- **OssAutoTrigger**：自动触发。\n\n- **NotInAuto**：不自动触发。","type":"string","example":"OssAutoTrigger"},"Name":{"description":"媒体工作流名称。","type":"string","example":"mediaworkflow-example"},"Topology":{"description":"媒体工作流拓扑结构。格式为JSON对象，包括活动列表及活动依赖。","type":"string","example":"{\"Activities\": {\"mediaworkflow-example\": {\"Parameters\": {\"Outputs\": \"[{\\\"OutputObject\\\":\\\"examplebucket/output/{RunId}/TRANSCODE_165941222****/{FileName}\\\",\\\"TemplateId\\\":\\\"S00000001-200010\\\",\\\"TemplateName\\\":\\\"MP4-流畅\\\"}]\",\"OutputBucket\": \"examplebucket\",\"OutputLocation\": \"oss-cn-shanghai\"},\"Type\": \"Transcode\"},\"Act-Start\": {\"Parameters\": {\"PipelineId\": \"a7d481f07d8c45da88c71853ce7d****\",\"InputFile\": \"{\\\"Bucket\\\":\\\"example-input\\\",\\\"Location\\\":\\\"oss-cn-shanghai\\\",\\\"ObjectPrefix\\\":\\\"mps-test/input/\\\"}\"},\"Type\": \"Start\"},\"Act-Report\": {\"Parameters\": {\"PublishType\": \"Manual\"},\"Type\": \"Report\"}},\"Dependencies\": {\"mediaworkflow-example\": [\"Act-Report\"],\"Act-Start\": [\"mediaworkflow-example\"],\"Act-Report\": []}}"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F1D21261-ADB9-406A-1234-491382139D59\\\",\\n  \\\"MediaWorkflow\\\": {\\n    \\\"CreationTime\\\": \\\"016-04-01T05:29:37Z\\\",\\n    \\\"MediaWorkflowId\\\": \\\"e00732b977da427d9177a4deb1aa****\\\",\\n    \\\"State\\\": \\\"Active\\\",\\n    \\\"TriggerMode\\\": \\\"OssAutoTrigger\\\",\\n    \\\"Name\\\": \\\"mediaworkflow-example\\\",\\n    \\\"Topology\\\": \\\"{\\\\\\\"Activities\\\\\\\": {\\\\\\\"mediaworkflow-example\\\\\\\": {\\\\\\\"Parameters\\\\\\\": {\\\\\\\"Outputs\\\\\\\": \\\\\\\"[{\\\\\\\\\\\\\\\"OutputObject\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"examplebucket/output/{RunId}/TRANSCODE_165941222****/{FileName}\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"TemplateId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"S00000001-200010\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"TemplateName\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"MP4-流畅\\\\\\\\\\\\\\\"}]\\\\\\\",\\\\\\\"OutputBucket\\\\\\\": \\\\\\\"examplebucket\\\\\\\",\\\\\\\"OutputLocation\\\\\\\": \\\\\\\"oss-cn-shanghai\\\\\\\"},\\\\\\\"Type\\\\\\\": \\\\\\\"Transcode\\\\\\\"},\\\\\\\"Act-Start\\\\\\\": {\\\\\\\"Parameters\\\\\\\": {\\\\\\\"PipelineId\\\\\\\": \\\\\\\"a7d481f07d8c45da88c71853ce7d****\\\\\\\",\\\\\\\"InputFile\\\\\\\": \\\\\\\"{\\\\\\\\\\\\\\\"Bucket\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"example-input\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"Location\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"oss-cn-shanghai\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"ObjectPrefix\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"mps-test/input/\\\\\\\\\\\\\\\"}\\\\\\\"},\\\\\\\"Type\\\\\\\": \\\\\\\"Start\\\\\\\"},\\\\\\\"Act-Report\\\\\\\": {\\\\\\\"Parameters\\\\\\\": {\\\\\\\"PublishType\\\\\\\": \\\\\\\"Manual\\\\\\\"},\\\\\\\"Type\\\\\\\": \\\\\\\"Report\\\\\\\"}},\\\\\\\"Dependencies\\\\\\\": {\\\\\\\"mediaworkflow-example\\\\\\\": [\\\\\\\"Act-Report\\\\\\\"],\\\\\\\"Act-Start\\\\\\\": [\\\\\\\"mediaworkflow-example\\\\\\\"],\\\\\\\"Act-Report\\\\\\\": []}}\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<AddMediaWorkflowResponse>\\n    <RequestId>F1D21261-ADB9-406A-1234-491382139D59</RequestId>\\n    <MediaWorkflow>\\n        <CreationTime>016-04-01T05:29:37Z</CreationTime>\\n        <MediaWorkflowId>e00732b977da427d9177a4deb1aa****</MediaWorkflowId>\\n        <State>Active</State>\\n        <TriggerMode>OssAutoTrigger</TriggerMode>\\n        <Name>mediaworkflow-example</Name>\\n        <Topology>{\\\"Activities\\\": {\\\"mediaworkflow-example\\\": {\\\"Parameters\\\": {\\\"Outputs\\\": \\\"[{\\\\\\\"OutputObject\\\\\\\":\\\\\\\"examplebucket/output/{RunId}/TRANSCODE_165941222****/{FileName}\\\\\\\",\\\\\\\"TemplateId\\\\\\\":\\\\\\\"S00000001-200010\\\\\\\",\\\\\\\"TemplateName\\\\\\\":\\\\\\\"MP4-流畅\\\\\\\"}]\\\",\\\"OutputBucket\\\": \\\"examplebucket\\\",\\\"OutputLocation\\\": \\\"oss-cn-shanghai\\\"},\\\"Type\\\": \\\"Transcode\\\"},\\\"Act-Start\\\": {\\\"Parameters\\\": {\\\"PipelineId\\\": \\\"a7d481f07d8c45da88c71853ce7d****\\\",\\\"InputFile\\\": \\\"{\\\\\\\"Bucket\\\\\\\":\\\\\\\"example-input\\\\\\\",\\\\\\\"Location\\\\\\\":\\\\\\\"oss-cn-shanghai\\\\\\\",\\\\\\\"ObjectPrefix\\\\\\\":\\\\\\\"mps-test/input/\\\\\\\"}\\\"},\\\"Type\\\": \\\"Start\\\"},\\\"Act-Report\\\": {\\\"Parameters\\\": {\\\"PublishType\\\": \\\"Manual\\\"},\\\"Type\\\": \\\"Report\\\"}},\\\"Dependencies\\\": {\\\"mediaworkflow-example\\\": [\\\"Act-Report\\\"],\\\"Act-Start\\\": [\\\"mediaworkflow-example\\\"],\\\"Act-Report\\\": []}}</Topology>\\n    </MediaWorkflow>\\n</AddMediaWorkflowResponse>\",\"errorExample\":\"\"}]","title":"新增媒体工作流","summary":"新增媒体工作流。","description":"- 本接口可以定义媒体工作流的拓扑结构（DAG）、活动以及依赖关系。活动详情，请参见[媒体工作流活动介绍](~~68494~~)。使用本接口创建的工作流可以在媒体处理控制台查看并调用。\n- MPS媒体工作流仅支持通过前缀（文件路径）自动触发工作流，不支持通过后缀名触发工作流执行。详细触发规则，请参见[媒体工作流的文件触发匹配规则](~~68574~~)。\n\n### QPS限制\n本接口的单用户QPS限制为100次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~342832~~)。","requestParamsDescription":"**Topology示例**\n\n> OSS的地域需要与当前MPS所在地域保持一致。\n\n```\n{\n  \"Activities\": {\n    \"mediaworkflow-example\": {\n      \"Parameters\": {\n        \"Outputs\": \"[{\\\"OutputObject\\\":\\\"examplebucket/output/{RunId}/TRANSCODE_165941222****/{FileName}\\\",\\\"TemplateId\\\":\\\"S00000001-200010\\\",\\\"TemplateName\\\":\\\"MP4-流畅\\\"}]\",\n        \"OutputBucket\": \"examplebucket\",\n        \"OutputLocation\": \"oss-cn-shanghai\"\n      },\n      \"Type\": \"Transcode\"\n    },\n    \"Act-Start\": {\n      \"Parameters\": {\n        \"PipelineId\": \"a7d481f07d8c45da88c71853ce7d****\",\n        \"InputFile\": \"{\\\"Bucket\\\":\\\"example-input\\\",\\\"Location\\\":\\\"oss-cn-shanghai\\\",\\\"ObjectPrefix\\\":\\\"mps-test/input/\\\"}\"\n      },\n      \"Type\": \"Start\"\n    },\n    \"Act-Report\": {\n      \"Parameters\": {\n        \"PublishType\": \"Manual\"\n      },\n      \"Type\": \"Report\"\n    }\n  },\n  \"Dependencies\": {\n    \"mediaworkflow-example\": [\"Act-Report\"],\n    \"Act-Start\": [\"mediaworkflow-example\"],\n    \"Act-Report\": []\n  }\n}\n```","responseParamsDescription":" ","extraInfo":" "}