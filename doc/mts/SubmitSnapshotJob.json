{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create","abilityTreeCode":"23185","abilityTreeNodes":["FEATUREmtsU2L9V8"]},"parameters":[{"name":"Input","in":"query","schema":{"description":"作业输入。详细说明请参见[Input详情](~~29253#section-f3p-d24-y2b~~)。\n\n> - 在媒体处理API中，Object必须经过[URL Encoding](~~423796~~)（基于UTF-8编码）后使用。\n   - OSS的地域需要与当前MPS所在地域保持一致。","type":"string","required":true,"example":"{\"Bucket\":\"example-bucket\",\"Location\":\"example-location\",\"Object\":\"example%2Ftest.flv\"}"}},{"name":"SnapshotConfig","in":"query","schema":{"description":"截图配置。详细说明，请参见[SnapshotConfig参数详情](~~29253#section-zh2-324-y2b~~)。","type":"string","required":true,"example":"{\"OutputFile\":{\"Bucket\":\"example-001\",\"Location\":\"example-location\",\"Object\":\"{Count}.jpg\"},\"Time\":\"5\",\"Num\":\"10\",\"Interval\":\"20\"}"}},{"name":"UserData","in":"query","schema":{"description":"用户自定义数据。支持中英文、数字、短划线（-），不能以特殊字符开头，最大长度1024个字节。","type":"string","required":false,"example":"testid-001"}},{"name":"PipelineId","in":"query","schema":{"description":"管道ID，详细说明，请参见[基本概念](~~29197~~)。\n\n- 可选值：可以通过[MPS控制台](https://mps.console.aliyun.com/overview) > **全局设置** > **管道**查询和创建管道。\n- 如果需要异步通知，请为管道绑定MNS消息，具体请参见<props=\"china\">[接收消息通知](https://help.aliyun.com/document_detail/42618.html)</props><props=\"intl\">[接收消息通知](https://www.alibabacloud.com/help/zh/apsaravideo-for-media-processing/latest/receive-message-notifications)</props>。","type":"string","required":false,"example":"dd3dae411e704030b921e52698e5****"}}],"responses":{"200":{"schema":{"description":"返回参数。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"19B6D8C5-A5DD-467A-B435-29D393C71E2D"},"SnapshotJob":{"description":"截图作业。","type":"object","properties":{"CreationTime":{"description":"任务创建时间。","type":"string","example":"2021-05-19T03:11:48Z"},"SnapshotConfig":{"description":"截图配置。","type":"object","properties":{"Time":{"description":"截图开始时间。单位：毫秒。","type":"string","example":"5"},"TileOut":{"description":"拼图配置。","type":"object","properties":{"Padding":{"description":"图片间距。\n\n- 默认：**0**。\n\n- 单位：px。","type":"string","example":"0"},"Color":{"description":"背景颜色。\n- 默认：**black**。\n- 可取值范围：**颜色关键字**，**random**。\n\n> 其中颜色关键字支持三种格式，比如黑色，支持Black，black，#000000。\n\n\n","type":"string","example":"black"},"CellSelStep":{"description":"选取单图片步长。","type":"string","example":"3"},"CellHeight":{"description":"单图片高度。默认截图输出分辨率高度。","type":"string","example":"100"},"CellWidth":{"description":"单图片宽度。默认截图输出分辨率宽度。","type":"string","example":"100"},"Margin":{"description":"外框宽度。\n\n- 默认：**0**。\n\n- 单位：px。","type":"string","example":"5"},"Columns":{"description":"图片拼合列数。默认：**10**。","type":"string","example":"10"},"IsKeepCellPic":{"description":"是否保留单图片。可取值：\n\n- **true**：保留。\n\n- **false**：不保留。\n\n- 默认：**true**。\n","type":"string","example":"false"},"Lines":{"description":"图片拼合行数。默认：**10**。","type":"string","example":"10"}}},"Interval":{"description":"截图间隔时间。\n\n- 若指定则表示序列截图，且值大于0。\n- 单位：秒。\n- 默认值：**10**。","type":"string","example":"20"},"FrameType":{"description":"截图类型。默认值：**normal**。可取值：\n- **normal**：普通帧。\n- **intra**：I帧（关键帧）。\n\n> 如果请求参数中将FrameType参数设置为I帧（关键帧），将只截取关键帧。如果指定的时间节点为非关键帧，则就近选取关键帧。在同等截图规则下，关键帧截图比普通帧截图速度快。\n","type":"string","example":"intra"},"Width":{"description":"截图输出图片宽度。","type":"string","example":"8"},"Height":{"description":"截图输出图片高度。","type":"string","example":"8"},"OutputFile":{"description":"截图输出OSS配置。","type":"object","properties":{"RoleArn":{"description":"指定角色的ARN。格式：acs:ram::$accountID:role/$roleName。","type":"string","example":"acs:ram::1:role/testrole"},"Object":{"description":"截图输出文件（OSS Object）。","type":"string","example":"test.png"},"Location":{"description":"截图输出OSS Bucket所在数据中心（OSS Location）。","type":"string","example":"example-location"},"Bucket":{"description":"截图输出文件所在OSS Bucket。","type":"string","example":"example"}}},"Num":{"description":"截图数量。若指定则表示序列截图。","type":"string","example":"10"},"TileOutputFile":{"description":"拼图任务大图的输出OSS配置。","type":"object","properties":{"RoleArn":{"description":"指定角色的ARN。格式：acs:ram::$accountID:role/$roleName。","type":"string","example":"acs:ram::1:role/testrole"},"Object":{"description":"输出文件 （OSS Object）。","type":"string","example":"example.png"},"Location":{"description":"输出OSS Bucket所在数据中心（OSS Location）。","type":"string","example":"example-location"},"Bucket":{"description":"输出文件所在OSS Bucket。","type":"string","example":"example"}}},"TimeArray":{"type":"object","properties":{"TimePointList":{"description":"指定时间点数组。","type":"array","items":{"description":"指定时间点数组。单位毫秒，浮点数，保留2位小数，可重复，可无序提交，由MPS排序。最多100个时间点。指定该参数时，Num、Time、Interval均不指定。如指定则提示参数指定错误 InvalidParameter.Ambiguity。","type":"integer","format":"int64","example":"[10050, 50000, 110000, 1000500, 1100500]"}}}}}},"State":{"description":"截图状态。取值：\n- **Submitted**：已提交。\n- **Snapshoting**：截图中。\n\n- **Success**：截图成功。\n\n- **Fail**：截图失败。\n\n","type":"string","example":"Snapshoting"},"Message":{"description":"分析失败时错误信息。若成功则不返回此参数。","type":"string","example":"The resource operated InputFile is bad"},"MNSMessageResult":{"description":"MNS通知用户作业完成的结果。","type":"object","properties":{"MessageId":{"description":"成功时消息ID。若失败则不返回此参数。","type":"string","example":"799454621135656C7F815F198A76****"},"ErrorMessage":{"description":"失败时错误信息。若成功则不返回此参数。","type":"string","example":"The resource operated InputFile is bad"},"ErrorCode":{"description":"失败时错误码。若成功则不返回此参数。","type":"string","example":"InvalidParameter"}}},"Input":{"description":"作业输入。","type":"object","properties":{"RoleArn":{"description":"指定角色的ARN。格式：acs:ram::$accountID:role/$roleName。","type":"string","example":"acs:ram::1:role/testrole"},"Object":{"description":"输入文件（OSS Object）。","type":"string","example":"example.flv"},"Location":{"description":"输入OSS Bucket所在数据中心（OSS Location）。","type":"string","example":"example-location'"},"Bucket":{"description":"输入文件所在OSS Bucket。","type":"string","example":"example"}}},"Count":{"description":"截取图片的数量。","type":"string","example":"1"},"TileCount":{"description":"拼图图片数量。","type":"string","example":"5"},"UserData":{"description":"用户自定义数据。","type":"string","example":"testid-001"},"Code":{"description":"分析失败时错误码。若成功则不返回此参数。","type":"string","example":"ResourceContentBad"},"PipelineId":{"description":"管道ID。","type":"string","example":"dd3dae411e704030b921e52698e5****"},"Id":{"description":"截图作业ID。","type":"string","example":"f4e3b9ba9f3840c39d6e288056f0****"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"19B6D8C5-A5DD-467A-B435-29D393C71E2D\\\",\\n  \\\"SnapshotJob\\\": {\\n    \\\"CreationTime\\\": \\\"2021-05-19T03:11:48Z\\\",\\n    \\\"SnapshotConfig\\\": {\\n      \\\"Time\\\": \\\"5\\\",\\n      \\\"TileOut\\\": {\\n        \\\"Padding\\\": \\\"0\\\",\\n        \\\"Color\\\": \\\"black\\\",\\n        \\\"CellSelStep\\\": \\\"3\\\",\\n        \\\"CellHeight\\\": \\\"100\\\",\\n        \\\"CellWidth\\\": \\\"100\\\",\\n        \\\"Margin\\\": \\\"5\\\",\\n        \\\"Columns\\\": \\\"10\\\",\\n        \\\"IsKeepCellPic\\\": \\\"false\\\",\\n        \\\"Lines\\\": \\\"10\\\"\\n      },\\n      \\\"Interval\\\": \\\"20\\\",\\n      \\\"FrameType\\\": \\\"intra\\\",\\n      \\\"Width\\\": \\\"8\\\",\\n      \\\"Height\\\": \\\"8\\\",\\n      \\\"OutputFile\\\": {\\n        \\\"RoleArn\\\": \\\"acs:ram::1:role/testrole\\\",\\n        \\\"Object\\\": \\\"test.png\\\",\\n        \\\"Location\\\": \\\"example-location\\\",\\n        \\\"Bucket\\\": \\\"example\\\"\\n      },\\n      \\\"Num\\\": \\\"10\\\",\\n      \\\"TileOutputFile\\\": {\\n        \\\"RoleArn\\\": \\\"acs:ram::1:role/testrole\\\",\\n        \\\"Object\\\": \\\"example.png\\\",\\n        \\\"Location\\\": \\\"example-location\\\",\\n        \\\"Bucket\\\": \\\"example\\\"\\n      },\\n      \\\"TimeArray\\\": {\\n        \\\"TimePointList\\\": [\\n          0\\n        ]\\n      }\\n    },\\n    \\\"State\\\": \\\"Snapshoting\\\",\\n    \\\"Message\\\": \\\"The resource operated InputFile is bad\\\",\\n    \\\"MNSMessageResult\\\": {\\n      \\\"MessageId\\\": \\\"799454621135656C7F815F198A76****\\\",\\n      \\\"ErrorMessage\\\": \\\"The resource operated InputFile is bad\\\",\\n      \\\"ErrorCode\\\": \\\"InvalidParameter\\\"\\n    },\\n    \\\"Input\\\": {\\n      \\\"RoleArn\\\": \\\"acs:ram::1:role/testrole\\\",\\n      \\\"Object\\\": \\\"example.flv\\\",\\n      \\\"Location\\\": \\\"example-location'\\\",\\n      \\\"Bucket\\\": \\\"example\\\"\\n    },\\n    \\\"Count\\\": \\\"1\\\",\\n    \\\"TileCount\\\": \\\"5\\\",\\n    \\\"UserData\\\": \\\"testid-001\\\",\\n    \\\"Code\\\": \\\"ResourceContentBad\\\",\\n    \\\"PipelineId\\\": \\\"dd3dae411e704030b921e52698e5****\\\",\\n    \\\"Id\\\": \\\"f4e3b9ba9f3840c39d6e288056f0****\\\"\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SubmitSnapshotJobResponse>\\n    <RequestId>19B6D8C5-A5DD-467A-B435-29D393C71E2D</RequestId>\\n    <SnapshotJob>\\n        <CreationTime>2021-05-19T03:11:48Z</CreationTime>\\n        <SnapshotConfig>\\n            <Time>5</Time>\\n            <TileOut>\\n                <Padding>0</Padding>\\n                <Color>black</Color>\\n                <CellSelStep>3</CellSelStep>\\n                <CellHeight>100</CellHeight>\\n                <CellWidth>100</CellWidth>\\n                <Margin>5</Margin>\\n                <Columns>10</Columns>\\n                <IsKeepCellPic>false</IsKeepCellPic>\\n                <Lines>10</Lines>\\n            </TileOut>\\n            <Interval>20</Interval>\\n            <FrameType>intra</FrameType>\\n            <Width>8</Width>\\n            <Height>8</Height>\\n            <OutputFile>\\n                <RoleArn>acs:ram::1:role/testrole</RoleArn>\\n                <Object>test.png</Object>\\n                <Location>example-location</Location>\\n                <Bucket>example</Bucket>\\n            </OutputFile>\\n            <Num>10</Num>\\n            <TileOutputFile>\\n                <RoleArn>acs:ram::1:role/testrole</RoleArn>\\n                <Object>example.png</Object>\\n                <Location>example-location</Location>\\n                <Bucket>example</Bucket>\\n            </TileOutputFile>\\n        </SnapshotConfig>\\n        <State>Snapshoting</State>\\n        <Message>The resource operated InputFile is bad</Message>\\n        <MNSMessageResult>\\n            <MessageId>799454621135656C7F815F198A76****</MessageId>\\n            <ErrorMessage>The resource operated InputFile is bad</ErrorMessage>\\n            <ErrorCode>InvalidParameter</ErrorCode>\\n        </MNSMessageResult>\\n        <Input>\\n            <RoleArn>acs:ram::1:role/testrole</RoleArn>\\n            <Object>example.flv</Object>\\n            <Location>example-location'</Location>\\n            <Bucket>example</Bucket>\\n        </Input>\\n        <Count>1</Count>\\n        <TileCount>5</TileCount>\\n        <UserData>testid-001</UserData>\\n        <Code>ResourceContentBad</Code>\\n        <PipelineId>dd3dae411e704030b921e52698e5****</PipelineId>\\n        <Id>f4e3b9ba9f3840c39d6e288056f0****</Id>\\n    </SnapshotJob>\\n</SubmitSnapshotJobResponse>\",\"errorExample\":\"\"}]","title":"提交截图作业","summary":"提交截图作业。调用本接口之后媒体处理MPS会对输入文件进行截图和拼图。","description":"- 输入单个文件大小最大支持100 GB，超过可能导致执行失败。\n- 请确认文件已成功上传至OSS后再提交截图作业，否则会导致执行失败。您可通过配置OSS回调消息确认文件上传状态。\n- 截图作业分为同步和异步模式。\n    - 同步模式仅支持单张截图，会在接口返回时生成图片。\n    - 异步模式不保证时效性，在提交截图作业后，任务会添加到管道中排队，被调度执行。所以在接口返回时，不保证截图已经生成。执行完成后需要调用[查询截图作业结果](~~602858~~)接口轮询执行结果，或通过为管道绑定MNS消息接收执行结果，具体请参见<props=\"china\">[接收消息通知](https://help.aliyun.com/document_detail/42618.html)</props><props=\"intl\">[接收消息通知](https://www.alibabacloud.com/help/zh/apsaravideo-for-media-processing/latest/receive-message-notifications)</props>。\n    - 只要设置了**Interval**和**Num**中的任何一个参数，就表示使用异步模式。\n\n- 目前仅支持生成JPG格式图片。\n- 更多截图常见问题，请参见[截图常见问题](~~60805~~)。\n\n### QPS限制\n本接口的单用户QPS限制为50次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~342832~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}