{"summary":"更新check run记录信息，须当前身份与check run的写入人身份一致，才能进行更新。","path":"/api/v4/projects/check_runs/update_check_run","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"systemTags":{"operationType":"none"},"parameters":[{"name":"organizationId","in":"query","schema":{"title":"A short description of struct","description":"企业标识，也称企业id，字符串形式，可在云效访问链接中获取，如https://devops.aliyun.com/organization/【OrganizationId】","type":"string","required":true,"example":"60de7a6852743a5162b5f957"}},{"name":"accessToken","in":"query","schema":{"description":"个人访问令牌。\n使用阿里云AK+SK或使用STS临时授权方式不需要传该字段\n\n","type":"string","required":false,"example":"f0b1e61db5961df5975a93f9129d2513"}},{"name":"repositoryIdentity","in":"query","schema":{"description":"代码库ID或者全路径","type":"string","required":true,"example":"2835387 或 codeup/codeup-demo"}},{"name":"checkRunId","in":"query","schema":{"description":"检查运行ID","type":"integer","format":"int64","required":true,"example":"2"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求Body","type":"object","properties":{"name":{"description":"检查运行的名称","type":"string","required":false,"example":"my-check-ci\n"},"startedAt":{"description":"检查运行的开始时间\n\n\n\n> ISO 8601 格式：YYYY-MM-DDTHH:MM:SSZ，如 2023-03-15T08:00:00Z","type":"string","required":false,"example":"2023-03-15T08:00:00Z\n"},"completedAt":{"description":"检查运行的完结时间\n\n\n> 说明 ISO 8601 格式：YYYY-MM-DDTHH:MM:SSZ，如 2023-03-15T08:00:00Z","type":"string","required":false,"example":"2023-03-15T08:00:00Z\n"},"externalId":{"description":"外部系统的ID\n> 外部系统，指用户的检测系统；该字段由用户自行决定写入何种ID，平台仅使用字符串类型进行存储","type":"string","required":false,"example":"42"},"detailsUrl":{"description":"三方交互系统的详情地址，由用户自行决定，平台仅提供跳转能力","type":"string","required":false,"example":"xx"},"status":{"description":"状态\n- queued：队列中\n- in_progress：运行中\n- completed：已完结","type":"string","required":false,"example":"completed"},"conclusion":{"description":"结论\n\n- cancelled：已取消\n- failure：失败\n- neutral：中立状态，算作成功状态\n- success：成功\n- skipped：跳过，算作成功状态\n- timed_out：超时","type":"string","required":false,"example":"success"},"output":{"description":"页面展示信息","type":"object","properties":{"title":{"description":"UI模块的标题（非name）","type":"string","required":false,"example":"Mighty Readme report"},"summary":{"description":"检查运行的摘要信息\n\n\n> 支持markdown格式；最大字符长度为64KB，即65535个字符","type":"string","required":true,"example":"摘要信息内容\n"},"text":{"description":"详情信息\n\n\n> 支持markdown格式；最大字符长度为64KB，即65535个字符","type":"string","required":false,"example":"详情信息内容\n"},"images":{"description":"图片信息列表\n\n> check run支持在output的展示模块中，展示图片信息","type":"array","items":{"description":"图片信息","type":"object","properties":{"alt":{"description":"alt文本信息","type":"string","required":true,"example":"test-image-alt\n"},"imageUrl":{"description":"图片地址，须确保能够有效访问，否则页面无法展示","type":"string","required":true,"example":"xxx"},"caption":{"description":"图片信息的简要描述","type":"string","required":false,"example":"test"}},"required":false},"required":false}},"required":false},"annotations":{"description":"检查注释列表\n\n\n> - 对于某些三方系统，可能会获得代码质量检测结果，若希望进行展示，可通过API将信息通过annotation写入到check run中\n> - 在更新操作中，annotations信息只会新增，所以在使用时，尽量不要重复写入","type":"array","items":{"description":"检查注释","type":"object","properties":{"path":{"description":"文件路径","type":"string","required":true,"example":"demo/test.txt\n"},"startLine":{"description":"起始行\n\n\n> 从1开始；需要用户自行确保文件行数的有效性，否则无法展示","type":"integer","format":"int64","required":true,"example":"1"},"endLine":{"description":"结束行","type":"integer","format":"int64","required":true,"example":"2"},"startColumn":{"description":"起始列\n\n\n> 当且仅当startLine=endLine时，该字段值有效","type":"integer","format":"int64","required":false,"example":"3"},"endColumn":{"description":"结束列\n\n\n> 当且仅当startLine=endLine时，该字段值有效","type":"integer","format":"int64","required":false,"example":"5"},"annotationLevel":{"description":"检查注释的等级\n\n- notice：轻微\n- warning：警告\n- failure：严重","type":"string","required":true,"example":"failure"},"message":{"description":"简要描述信息","type":"string","required":true,"example":"回写检查注释的简要描述信息\n"},"title":{"description":"检查注释的标题","type":"string","required":false,"example":"检查注释的标题"},"rawDetails":{"description":"详情信息，限制64KB以内的大小","type":"string","required":false,"example":"详情信息内容\n"}},"required":false},"required":false}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"Id of the request","description":"请求ID","type":"string","example":"ASSDS-ASSASX-XSAXSA-XSAXSAXS"},"success":{"description":"调用是否成功","type":"boolean","example":"true"},"errorCode":{"description":"错误码","type":"string","example":"SYSTEM_UNKNOWN_ERROR"},"errorMessage":{"description":"错误信息","type":"string","example":"\"\""},"result":{"description":"返回结果","type":"object","properties":{"id":{"description":"唯一标识","type":"integer","format":"int64","example":"524836"},"createdAt":{"description":"创建时间","type":"string","example":"2022-01-14T21:08:26+08:00\n"},"updatedAt":{"description":"更新时间","type":"string","example":"2022-01-14T21:08:26+08:00\n"},"startedAt":{"description":"开始时间","type":"string","example":"2023-03-15T08:00:00Z\n"},"completedAt":{"description":"完结时间","type":"string","example":"2023-03-15T08:00:00Z\n"},"externalId":{"description":"外部系统ID","type":"string","example":"42"},"name":{"description":"名称","type":"string","example":"my-check-ci\n"},"headSha":{"description":"提交ID","type":"string","example":"40f4ccfe019cdd4a62d4acb0c57130106fc7e1be\n"},"status":{"description":"状态\n\n- queued：队列中\n- in_progress：运行中\n- completed：已完结","type":"string","example":"completed"},"conclusion":{"description":"结论\n\n- cancelled：已取消\n- failure：失败\n- neutral：中立状态，算作成功\n- success：成功\n- skipped：跳过，算作成功状态\n- timed_out：超时","type":"string","example":"success"},"detailsUrl":{"description":"三方交互系统的详情地址，由用户自行决定，平台仅提供跳转能力","type":"string","example":"xxx"},"checkSuite":{"description":"检查套件","type":"object","properties":{"id":{"description":"检查套件ID，唯一标识","type":"integer","format":"int64","example":"1"}}},"writer":{"description":"写入人简要信息","type":"object","properties":{"id":{"description":"用户阿里云账号ID","type":"string","example":"xxx\n"},"type":{"description":"写入人类型\n\n- User：用户类型","type":"string","example":"User"},"name":{"description":"写入人名称","type":"string","example":"test-codeup\n"},"slug":{"description":"别名","type":"string","example":"test-codeup\n"},"logoUrl":{"description":"写入人头像地址","type":"string","example":"xxx\n"}}},"output":{"description":"页面展示信息","type":"object","properties":{"title":{"description":"UI模块的标题（非name）","type":"string","example":"Mighty Readme report\n"},"summary":{"description":"检查运行的摘要信息\n\n\n> 支持markdown格式；最大字符长度为64KB，即65535个字符","type":"string","example":"摘要信息内容\n"},"text":{"description":"详情信息\n\n\n> 支持markdown格式；最大字符长度为64KB，即65535个字符","type":"string","example":"详情信息内容"},"images":{"description":"图片信息\n\n\n> check run支持在output的展示模块中，展示图片信息","type":"array","items":{"description":"图片信息","type":"object","properties":{"alt":{"description":"alt文本信息","type":"string","example":"test-image-alt\n"},"imageUrl":{"description":"图片地址，须确保能够有效访问，否则页面无法展示","type":"string","example":"xxx"},"caption":{"description":"图片信息的简要描述","type":"string","example":"test\n"}}}}}},"annotations":{"description":"检查注释列表\n\n\n> 对于某些三方系统，可能会获得代码质量检测结果，若希望进行展示，可通过API将信息通过annotation写入到check run中。","type":"array","items":{"description":"检查注释","type":"object","properties":{"id":{"description":"检查注释ID，唯一标识","type":"integer","format":"int64","example":"1"},"path":{"description":"文件路径","type":"string","example":"demo/test.txt\n"},"startLine":{"description":"起始行\n\n\n> 从1开始；需要用户自行确保文件行数的有效性，否则无法展示","type":"integer","format":"int64","example":"1"},"endLine":{"description":"结束行","type":"integer","format":"int64","example":"2"},"startColumn":{"description":"起始列\n\n\n> 当且仅当startLine=endLine时，该字段值有效","type":"integer","format":"int64","example":"3"},"endColumn":{"description":"结束列\n\n\n> 当且仅当startLine=endLine时，该字段值有效","type":"integer","format":"int64","example":"5"},"annotationLevel":{"description":"检查注释的等级\n\n- notice：轻微\n- warning：警告\n- failure：严重","type":"string","example":"warning"},"message":{"description":"简要描述信息","type":"string","example":"回写检查注释的简要描述信息\n"},"title":{"description":"检查注释的标题","type":"string","example":"检查注释的标题\n"},"rawDetails":{"description":"详情信息，限制64KB以内的大小","type":"string","example":"详情信息\n"}}}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"ASSDS-ASSASX-XSAXSA-XSAXSAXS\\\",\\n  \\\"success\\\": true,\\n  \\\"errorCode\\\": \\\"SYSTEM_UNKNOWN_ERROR\\\",\\n  \\\"errorMessage\\\": \\\"\\\\\\\"\\\\\\\"\\\",\\n  \\\"result\\\": {\\n    \\\"id\\\": 524836,\\n    \\\"createdAt\\\": \\\"2022-01-14T21:08:26+08:00\\\\n\\\",\\n    \\\"updatedAt\\\": \\\"2022-01-14T21:08:26+08:00\\\\n\\\",\\n    \\\"startedAt\\\": \\\"2023-03-15T08:00:00Z\\\\n\\\",\\n    \\\"completedAt\\\": \\\"2023-03-15T08:00:00Z\\\\n\\\",\\n    \\\"externalId\\\": \\\"42\\\",\\n    \\\"name\\\": \\\"my-check-ci\\\\n\\\",\\n    \\\"headSha\\\": \\\"40f4ccfe019cdd4a62d4acb0c57130106fc7e1be\\\\n\\\",\\n    \\\"status\\\": \\\"completed\\\",\\n    \\\"conclusion\\\": \\\"success\\\",\\n    \\\"detailsUrl\\\": \\\"xxx\\\",\\n    \\\"checkSuite\\\": {\\n      \\\"id\\\": 1\\n    },\\n    \\\"writer\\\": {\\n      \\\"id\\\": \\\"xxx\\\\n\\\",\\n      \\\"type\\\": \\\"User\\\",\\n      \\\"name\\\": \\\"test-codeup\\\\n\\\",\\n      \\\"slug\\\": \\\"test-codeup\\\\n\\\",\\n      \\\"logoUrl\\\": \\\"xxx\\\\n\\\"\\n    },\\n    \\\"output\\\": {\\n      \\\"title\\\": \\\"Mighty Readme report\\\\n\\\",\\n      \\\"summary\\\": \\\"摘要信息内容\\\\n\\\",\\n      \\\"text\\\": \\\"详情信息内容\\\",\\n      \\\"images\\\": [\\n        {\\n          \\\"alt\\\": \\\"test-image-alt\\\\n\\\",\\n          \\\"imageUrl\\\": \\\"xxx\\\",\\n          \\\"caption\\\": \\\"test\\\\n\\\"\\n        }\\n      ]\\n    },\\n    \\\"annotations\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"path\\\": \\\"demo/test.txt\\\\n\\\",\\n        \\\"startLine\\\": 1,\\n        \\\"endLine\\\": 2,\\n        \\\"startColumn\\\": 3,\\n        \\\"endColumn\\\": 5,\\n        \\\"annotationLevel\\\": \\\"warning\\\",\\n        \\\"message\\\": \\\"回写检查注释的简要描述信息\\\\n\\\",\\n        \\\"title\\\": \\\"检查注释的标题\\\\n\\\",\\n        \\\"rawDetails\\\": \\\"详情信息\\\\n\\\"\\n      }\\n    ]\\n  }\\n}\",\"type\":\"json\"}]","title":"更新检查运行"}