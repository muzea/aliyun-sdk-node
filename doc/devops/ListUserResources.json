{"summary":"获取指定用户名下的有权限的代码库和代码组信息，以及角色信息，支持分页，以用户维度进行分页。请注意，仅限企业管理员以上权限的用户可调用。","path":"/api/v4/user/vision/user_resources","methods":["get"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{"operationType":"none"},"parameters":[{"name":"organizationId","in":"query","schema":{"description":"企业标识，也称企业id，字符串形式，可在云效访问链接中获取，如https://devops.aliyun.com/organization/【OrganizationId】","type":"string","required":true,"example":"5ebbc0228123212b59xxxxx"}},{"name":"accessToken","in":"query","schema":{"description":"个人访问令牌。\n使用阿里云AK+SK或使用STS临时授权方式不需要传该字段","type":"string","required":false,"example":"f0b1e61db5961df5975a93f9129d2513\n"}},{"name":"userIds","in":"query","allowEmptyValue":false,"schema":{"description":"用户的阿里云账号ID列表，多个账号以逗号隔开","type":"string","required":false,"example":"1,2,3"}},{"name":"page","in":"query","schema":{"description":"页码，默认值为1，从第1页开始","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"pageSize","in":"query","schema":{"description":"每页大小，默认值为20，取值范围【1,100】","type":"integer","format":"int64","required":false,"example":"10"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"Id of the request","description":"请求ID","type":"string","example":"A35869D5-BB29-5F84-A4DD-B09985EA2AFA"},"success":{"description":"请求是否成功","type":"boolean","example":"true"},"errorMessage":{"description":"错误信息","type":"string","example":"”“"},"errorCode":{"description":"错误码","type":"string","example":"success"},"total":{"description":"总记录数","type":"integer","format":"int64","example":"2"},"result":{"description":"返回结果列表","type":"array","items":{"description":"返回结果","type":"object","properties":{"userInfo":{"description":"用户信息","type":"object","properties":{"id":{"description":"用户ID","type":"integer","format":"int64","example":"19230"},"name":{"description":"用户名称","type":"string","example":"test-codeup"},"username":{"description":"用户登录名","type":"string","example":"test-codeup"},"state":{"description":"用户状态，可选值：\n- active\n- blocked","type":"string","example":"active"},"avatarUrl":{"description":"头像地址","type":"string","example":"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100"},"email":{"description":"用户邮箱","type":"string","example":"username@example.com"}}},"groupInfos":{"description":"用户有权限的代码组列表","type":"array","items":{"description":"代码组与角色信息","type":"object","properties":{"groupInfo":{"description":"代码组信息","type":"object","properties":{"id":{"description":"代码组ID","type":"integer","format":"int64","example":"35268"},"name":{"description":"代码组名称","type":"string","example":"test-group"},"path":{"description":"代码组路径","type":"string","example":"test-group"},"nameWithNamespace":{"description":"代码组完整名称（含完整组名称）","type":"string","example":"test-org / test-group（斜杠两侧有空格）"},"pathWithNamespace":{"description":"代码组完整路径（含父路径）","type":"string","example":"test-org/test-group"},"parentId":{"description":"父路径ID","type":"integer","format":"int64","example":"1183319"},"ownerId":{"description":"代码组拥有者ID","type":"integer","format":"int64","example":"1234"},"createdAt":{"description":"创建时间","type":"string","example":"2022-01-14T21:08:26+08:00\n"},"updatedAt":{"description":"更新时间","type":"string","example":"2022-01-14T21:08:26+08:00\n"},"visibilityLevel":{"description":"代码组的可见性\n- 0：私有\n- 10：企业可见","type":"integer","format":"int32","example":"0"},"description":{"description":"代码组的描述信息","type":"string","example":"test-group"}}},"groupRole":{"description":"用户在代码组的角色信息","type":"object","properties":{"sourceId":{"description":"关联的ID，指代码库或代码组ID","type":"integer","format":"int64","example":"35268"},"sourceType":{"description":"关联的类型，可选值：\n- Project：指代码库\n- Namespace：指代码组","type":"string","example":"Namespace"},"accessLevel":{"description":"权限类型\n- 20：浏览者\n- 30：开发者\n- 40：管理员","type":"integer","format":"int32","example":"40"},"cnRoleName":{"description":"角色中文名\n- 浏览者\n- 开发者\n- 管理员","type":"string","example":"管理员"},"enRoleName":{"description":"角色英文名\n- Viewer - 浏览者\n- Developer - 开发者\n- Admin - 管理员","type":"string","example":"Admin"}}}}}},"repositoryInfos":{"description":"用户有权限的代码库列表","type":"array","items":{"description":"代码库与角色信息","type":"object","properties":{"repositoryInfo":{"description":"代码库信息","type":"object","properties":{"id":{"description":"代码库ID","type":"integer","format":"int64","example":"37229"},"name":{"description":"代码库名称","type":"string","example":"test-repo"},"path":{"description":"代码库路径","type":"string","example":"test-repo"},"description":{"description":"代码库描述","type":"string","example":"具体的描述内容"},"nameWithNamespace":{"description":"代码库完整名称（含完整组名称）","type":"string","example":"test-org / test-group / test-repo（斜杠两侧有空格）"},"pathWithNamespace":{"description":"代码库完整路径（含完整组路径）","type":"string","example":"test-org/test-group/test-repo"},"visibilityLevel":{"description":"可见性\n- 0：私有，仅代码库成员可见\n- 10：企业内公开，企业成员可见","type":"integer","format":"int32","example":"0"},"lastActivityAt":{"description":"最后活跃时间","type":"string","example":"2022-01-14T21:08:26+08:00\n"},"namespaceId":{"description":"上级路径的ID","type":"integer","format":"int64","example":"600002"},"accessLevel":{"description":"成员权限\n- 20：浏览者 \n- 30：开发者\n- 40：管理员","type":"integer","format":"int32","example":"40"},"createdAt":{"description":"创建时间","type":"string","example":"2022-01-14T21:08:26+08:00"},"updatedAt":{"description":"更新时间","type":"string","example":"2022-01-14T21:08:26+08:00"},"archived":{"description":"归档标识","type":"boolean","example":"false"},"creatorId":{"description":"创建者ID","type":"integer","format":"int64","example":"12679"},"encrypted":{"description":"加密标识","type":"boolean","example":"false"}}},"repositoryRole":{"description":"用户在代码库的角色信息","type":"object","properties":{"sourceId":{"description":"来源ID，指代码库或代码组ID","type":"integer","format":"int64","example":"37229"},"sourceType":{"description":"关联的类型，可选值：\n- Project：指代码库\n- Namespace：指代码组","type":"string","example":"Project"},"accessLevel":{"description":"权限类型\n- 20：浏览者 \n- 30：开发者\n- 40：管理员","type":"integer","format":"int32","example":"40"},"cnRoleName":{"description":"角色中文名\n\n- 浏览者\n- 开发者\n- 管理员","type":"string","example":"管理员"},"enRoleName":{"description":"角色英文名\n\n- Viewer - 浏览者\n- Developer - 开发者\n- Admin - 管理员","type":"string","example":"Admin"}}}}}}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"A35869D5-BB29-5F84-A4DD-B09985EA2AFA\\\",\\n  \\\"success\\\": true,\\n  \\\"errorMessage\\\": \\\"”“\\\",\\n  \\\"errorCode\\\": \\\"success\\\",\\n  \\\"total\\\": 2,\\n  \\\"result\\\": [\\n    {\\n      \\\"userInfo\\\": {\\n        \\\"id\\\": 19230,\\n        \\\"name\\\": \\\"test-codeup\\\",\\n        \\\"username\\\": \\\"test-codeup\\\",\\n        \\\"state\\\": \\\"active\\\",\\n        \\\"avatarUrl\\\": \\\"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100\\\",\\n        \\\"email\\\": \\\"username@example.com\\\"\\n      },\\n      \\\"groupInfos\\\": [\\n        {\\n          \\\"groupInfo\\\": {\\n            \\\"id\\\": 35268,\\n            \\\"name\\\": \\\"test-group\\\",\\n            \\\"path\\\": \\\"test-group\\\",\\n            \\\"nameWithNamespace\\\": \\\"test-org / test-group（斜杠两侧有空格）\\\",\\n            \\\"pathWithNamespace\\\": \\\"test-org/test-group\\\",\\n            \\\"parentId\\\": 1183319,\\n            \\\"ownerId\\\": 1234,\\n            \\\"createdAt\\\": \\\"2022-01-14T21:08:26+08:00\\\\n\\\",\\n            \\\"updatedAt\\\": \\\"2022-01-14T21:08:26+08:00\\\\n\\\",\\n            \\\"visibilityLevel\\\": 0,\\n            \\\"description\\\": \\\"test-group\\\"\\n          },\\n          \\\"groupRole\\\": {\\n            \\\"sourceId\\\": 35268,\\n            \\\"sourceType\\\": \\\"Namespace\\\",\\n            \\\"accessLevel\\\": 40,\\n            \\\"cnRoleName\\\": \\\"管理员\\\",\\n            \\\"enRoleName\\\": \\\"Admin\\\"\\n          }\\n        }\\n      ],\\n      \\\"repositoryInfos\\\": [\\n        {\\n          \\\"repositoryInfo\\\": {\\n            \\\"id\\\": 37229,\\n            \\\"name\\\": \\\"test-repo\\\",\\n            \\\"path\\\": \\\"test-repo\\\",\\n            \\\"description\\\": \\\"具体的描述内容\\\",\\n            \\\"nameWithNamespace\\\": \\\"test-org / test-group / test-repo（斜杠两侧有空格）\\\",\\n            \\\"pathWithNamespace\\\": \\\"test-org/test-group/test-repo\\\",\\n            \\\"visibilityLevel\\\": 0,\\n            \\\"lastActivityAt\\\": \\\"2022-01-14T21:08:26+08:00\\\\n\\\",\\n            \\\"namespaceId\\\": 600002,\\n            \\\"accessLevel\\\": 40,\\n            \\\"createdAt\\\": \\\"2022-01-14T21:08:26+08:00\\\",\\n            \\\"updatedAt\\\": \\\"2022-01-14T21:08:26+08:00\\\",\\n            \\\"archived\\\": false,\\n            \\\"creatorId\\\": 12679,\\n            \\\"encrypted\\\": false\\n          },\\n          \\\"repositoryRole\\\": {\\n            \\\"sourceId\\\": 37229,\\n            \\\"sourceType\\\": \\\"Project\\\",\\n            \\\"accessLevel\\\": 40,\\n            \\\"cnRoleName\\\": \\\"管理员\\\",\\n            \\\"enRoleName\\\": \\\"Admin\\\"\\n          }\\n        }\\n      ]\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"获取用户有权限的资源"}