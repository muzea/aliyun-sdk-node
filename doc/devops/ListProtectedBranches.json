{"summary":"查询代码库保护分支列表。","path":"/repository/{repositoryId}/protect_branches","methods":["get"],"schemes":["http","https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"operationType":"read","deprecated":false,"systemTags":{},"parameters":[{"name":"organizationId","in":"query","schema":{"title":"A short description of struct","description":"企业标识，也称企业id，字符串形式，可在云效访问链接中获取，如https://devops.aliyun.com/organization/【OrganizationId】","type":"string","required":true,"example":"60de7a6852743a5162b5f957"}},{"name":"accessToken","in":"query","schema":{"description":"个人访问令牌。\n使用阿里云AK+SK或使用STS临时授权方式不需要传该字段","type":"string","required":false,"example":"f0b1e61db5961df5975a93f9129d2513\n"}},{"name":"repositoryId","in":"path","schema":{"description":"代码库ID","type":"integer","format":"int64","required":true,"example":"2813489"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"requestId":{"title":"Id of the request","description":"请求ID","type":"string","example":"313A1BF6-63B7-52D4-A098-952221A65254"},"errorMessage":{"description":"错误信息","type":"string","example":"\"\""},"errorCode":{"description":"错误码","type":"string","example":"SYSTEM_UNKNOWN_ERROR"},"success":{"description":"调用是否成功","type":"boolean","example":"true"},"result":{"description":"返回结果列表","type":"array","items":{"description":"返回结果","type":"object","properties":{"id":{"description":"保护分支规则ID","type":"integer","format":"int64","example":"19285"},"branch":{"description":"保护分支名称","type":"string","example":"protectedBranch"},"createdAt":{"description":"创建时间","type":"string","example":"2022-03-18 14:24:54"},"updatedAt":{"description":"更新时间","type":"string","example":"2022-03-18 14:24:54"},"allowPushRoles":{"description":"允许推送角色列表","type":"array","items":{"description":"角色\n40：管理员\n30：开发者","type":"integer","format":"int32","example":"[40, 30]"}},"allowPushUserIds":{"description":"允许推送用户ID","type":"array","items":{"description":"Codeup的用户I'D","type":"integer","format":"int64","example":"19238"}},"allowPushUsers":{"description":"允许推送的用户列表","type":"array","items":{"description":"用户信息","type":"object","properties":{"id":{"description":"Codeup的用户ID","type":"integer","format":"int64","example":"19238"},"name":{"description":"用户名称","type":"string","example":"阿里云云效"},"username":{"description":"用户昵称","type":"string","example":"codeup-test"},"email":{"description":"用户邮箱","type":"string","example":"username@example.com"},"avatar":{"description":"头像地址","type":"string","example":"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100"}}}},"allowMergeRoles":{"description":"允许合并角色列表","type":"array","items":{"description":"40：管理者  \n30：开发者","type":"integer","format":"int32","example":"[40, 30]"}},"allowMergeUserIds":{"description":"允许合并用户ID","type":"array","items":{"description":"Codeup的用户ID","type":"integer","format":"int64","example":"19238"}},"allowMergeUsers":{"description":"允许合并的用户信息列表","type":"array","items":{"description":"用户信息","type":"object","properties":{"id":{"description":"Codeup的用户ID","type":"integer","format":"int64","example":"19238"},"name":{"description":"用户名称","type":"string","example":"阿里云云效"},"username":{"description":"用户昵称","type":"string","example":"codeup-test"},"email":{"description":"用户邮箱","type":"string","example":"username@example.com"},"avatar":{"description":"头像地址","type":"string","example":"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100"}}}},"mergeRequestSetting":{"description":"合并前的代码评审设置","type":"object","properties":{"isRequired":{"description":"是否开启","type":"boolean","example":"true"},"mrMode":{"description":"评审模式  \ngeneral：普通  \ncodeowner：CodeOwner模式","type":"string","example":"general"},"isAllowSelfApproval":{"description":"是否允许创建者通过代码评审","type":"boolean","example":"true"},"isRequireDiscussionProcessed":{"description":"是否要求评审全部已解决","type":"boolean","example":"true"},"isResetApprovalWhenNewPush":{"description":"是否在有新的提交时重置评审","type":"boolean","example":"false"},"minimumApproval":{"description":"评审通过的最少人数\n注：仅普通模式生效","type":"integer","format":"int32","example":"1"},"allowMergeRequestRoles":{"description":"允许合并请求的角色列表","type":"array","items":{"description":"40：管理员（默认）  \n30：开发者","type":"integer","format":"int32","example":"[40, 30]"}},"defaultAssignees":{"description":"默认评审人","type":"array","items":{"description":"评审人信息","type":"object","properties":{"id":{"description":"Codeup的用户ID","type":"integer","format":"int64","example":"19238"},"username":{"description":"用户昵称","type":"string","example":"codeup-test"},"name":{"description":"用户名称","type":"string","example":"阿里云云效"},"email":{"description":"用户邮箱","type":"string","example":"username@example.com"},"avatar":{"description":"头像地址","type":"string","example":"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100"}}}},"whiteList":{"description":"评审文件白名单\n注意：加入白名单的文件不受「评审通过的最少人数」限制，无需强制人工评审","type":"string","example":"**.java"}}},"testSettingDTO":{"description":"合并前的自动化状态检查设置","type":"object","properties":{"isRequired":{"description":"是否开启","type":"boolean","example":"false"},"codeGuidelinesDetection":{"description":"代码规约扫描","type":"object","properties":{"enabled":{"description":"是否开启","type":"boolean","example":"false"},"message":{"description":"描述信息","type":"string","example":"test_code_guide_lines"}}},"sensitiveInfoDetection":{"description":"敏感信息扫描","type":"object","properties":{"enabled":{"description":"是否开启","type":"boolean","example":"false"},"message":{"description":"描述信息","type":"string","example":"test_code_sensitive_info"}}},"checkTaskQualityConfig":{"description":"代码质量检测","type":"object","properties":{"enabled":{"description":"是否开启","type":"boolean","example":"false"},"bizNo":{"description":"任务流水号","type":"string","example":"123456"},"taskName":{"description":"任务名称","type":"string","example":"biz-task-quality"},"message":{"description":"描述信息","type":"string","example":"test_task_quality"}}},"checkConfig":{"description":"MR卡点流水线配置","type":"object","properties":{"checkItems":{"description":"配置项","type":"array","items":{"description":"配置项","type":"object","properties":{"name":{"description":"流水线名称","type":"string","example":"测试流水线"},"isRequired":{"description":"是否卡点","type":"boolean","example":"false"}}}}}}}},"matches":{"description":"保护分支匹配列表","type":"array","items":{"description":"匹配的分支名称","type":"string","example":"[\"pb\"]"}}}}}}}}},"errorCodes":{"403":[{"errorCode":"Forbidden.AccessDenied","errorMessage":"The user is not authorized to perform the operation."},{"errorCode":"Forbidden.UserNotInCurrentOrganization","errorMessage":"The user is not in the organization and is not authorized to perform the operation."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"requestId\\\": \\\"313A1BF6-63B7-52D4-A098-952221A65254\\\",\\n  \\\"errorMessage\\\": \\\"\\\\\\\"\\\\\\\"\\\",\\n  \\\"errorCode\\\": \\\"SYSTEM_UNKNOWN_ERROR\\\",\\n  \\\"success\\\": true,\\n  \\\"result\\\": [\\n    {\\n      \\\"id\\\": 19285,\\n      \\\"branch\\\": \\\"protectedBranch\\\",\\n      \\\"createdAt\\\": \\\"2022-03-18 14:24:54\\\",\\n      \\\"updatedAt\\\": \\\"2022-03-18 14:24:54\\\",\\n      \\\"allowPushRoles\\\": [\\n        0\\n      ],\\n      \\\"allowPushUserIds\\\": [\\n        19238\\n      ],\\n      \\\"allowPushUsers\\\": [\\n        {\\n          \\\"id\\\": 19238,\\n          \\\"name\\\": \\\"阿里云云效\\\",\\n          \\\"username\\\": \\\"codeup-test\\\",\\n          \\\"email\\\": \\\"username@example.com\\\",\\n          \\\"avatar\\\": \\\"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100\\\"\\n        }\\n      ],\\n      \\\"allowMergeRoles\\\": [\\n        0\\n      ],\\n      \\\"allowMergeUserIds\\\": [\\n        19238\\n      ],\\n      \\\"allowMergeUsers\\\": [\\n        {\\n          \\\"id\\\": 19238,\\n          \\\"name\\\": \\\"阿里云云效\\\",\\n          \\\"username\\\": \\\"codeup-test\\\",\\n          \\\"email\\\": \\\"username@example.com\\\",\\n          \\\"avatar\\\": \\\"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100\\\"\\n        }\\n      ],\\n      \\\"mergeRequestSetting\\\": {\\n        \\\"isRequired\\\": true,\\n        \\\"mrMode\\\": \\\"general\\\",\\n        \\\"isAllowSelfApproval\\\": true,\\n        \\\"isRequireDiscussionProcessed\\\": true,\\n        \\\"isResetApprovalWhenNewPush\\\": false,\\n        \\\"minimumApproval\\\": 1,\\n        \\\"allowMergeRequestRoles\\\": [\\n          0\\n        ],\\n        \\\"defaultAssignees\\\": [\\n          {\\n            \\\"id\\\": 19238,\\n            \\\"username\\\": \\\"codeup-test\\\",\\n            \\\"name\\\": \\\"阿里云云效\\\",\\n            \\\"email\\\": \\\"username@example.com\\\",\\n            \\\"avatar\\\": \\\"https://tcs-devops.aliyuncs.com/thumbnail/112afcb7a6a35c3f67f1bea827c4/w/100/h/100\\\"\\n          }\\n        ],\\n        \\\"whiteList\\\": \\\"**.java\\\"\\n      },\\n      \\\"testSettingDTO\\\": {\\n        \\\"isRequired\\\": false,\\n        \\\"codeGuidelinesDetection\\\": {\\n          \\\"enabled\\\": false,\\n          \\\"message\\\": \\\"test_code_guide_lines\\\"\\n        },\\n        \\\"sensitiveInfoDetection\\\": {\\n          \\\"enabled\\\": false,\\n          \\\"message\\\": \\\"test_code_sensitive_info\\\"\\n        },\\n        \\\"checkTaskQualityConfig\\\": {\\n          \\\"enabled\\\": false,\\n          \\\"bizNo\\\": \\\"123456\\\",\\n          \\\"taskName\\\": \\\"biz-task-quality\\\",\\n          \\\"message\\\": \\\"test_task_quality\\\"\\n        },\\n        \\\"checkConfig\\\": {\\n          \\\"checkItems\\\": [\\n            {\\n              \\\"name\\\": \\\"测试流水线\\\",\\n              \\\"isRequired\\\": false\\n            }\\n          ]\\n        }\\n      },\\n      \\\"matches\\\": [\\n        \\\"[\\\\\\\"pb\\\\\\\"]\\\"\\n      ]\\n    }\\n  ]\\n}\",\"type\":\"json\"}]","title":"查询保护分支列表"}