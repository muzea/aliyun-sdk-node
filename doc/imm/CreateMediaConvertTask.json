{"summary":"创建一个异步的媒体转码任务，提供媒体转码、媒体拼接、视频截帧、视频转动图等相关音视频媒体文件处理能力。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"132611","abilityTreeNodes":["FEATUREimmCUOMK0"]},"parameters":[{"name":"ProjectName","in":"query","schema":{"description":"项目名称，获取方式请参见[创建项目](~~478153~~)。","type":"string","required":true,"example":"test-project"}},{"name":"Sources","in":"query","style":"json","schema":{"description":"媒体文件列表。若列表元素大于1个则表示开启Concat（拼接）功能，Concat顺序为输入视频文件URI的顺序。","type":"array","items":{"description":"源媒体文件。","type":"object","properties":{"URI":{"description":"OSS地址规则为`oss://${Bucket}/${Object}`，其中`${Bucket}`为和当前项目处于同一区域(Region)的OSS Bucket名称，`${Object}`为包含文件扩展名的文件完整路径。","type":"string","required":false,"example":"oss://test-bucket/test-object"},"StartTime":{"description":"媒体转码开始时间，单位为秒。取值范围如下：\n- 0（默认）：从媒体起始时间开始转码。\n- n（大于0）：从媒体起始时间n秒后开始转码。","type":"number","format":"double","required":false,"example":"0"},"Duration":{"description":"媒体转码时长。单位为秒，默认值为0，表示到视频结束时间。","type":"number","format":"double","required":false,"example":"0"},"Subtitles":{"description":"添加字幕列表，默认为空。\n","type":"array","items":{"description":"字幕信息。","type":"object","properties":{"URI":{"description":"OSS地址规则为`oss://${Bucket}/${Object}`，其中`${Bucket}`为和当前项目处于同一区域(Region)的OSS Bucket名称，`${Object}`为包含文件扩展名的文件完整路径。\n支持的字幕格式为：srt，vtt，mov_text，ass，dvd_sub，pgs。","type":"string","required":false,"example":"oss://test-bucket/test-object\n"},"TimeOffset":{"description":"字幕延迟时间，单位为秒，默认为0。","type":"number","format":"double","required":false,"example":"10.5"},"Language":{"description":"字幕语言，参考标准为ISO 639-2，默认为空。","type":"string","required":false,"example":"eng"}},"required":false},"required":false}},"required":false},"required":true}},{"name":"Targets","in":"query","style":"json","schema":{"description":"媒体处理任务列表，支持配置多任务。","type":"array","items":{"description":"Targets数组元素的详细信息。","type":"object","properties":{"URI":{"description":"媒体转码输出文件的OSS地址。\n\nOSS地址规则为`oss://${Bucket}/${Object}`，其中`${Bucket}`为和当前项目处于同一区域(Region)的OSS Bucket名称，`${Object}`为包含文件扩展名的文件完整路径。\n- 当**URI**存在拓展名时转码输出的媒体文件OSS地址均为**URI**，若输出文件为多个会存在覆盖的情况。\n- 当**URI**不存在拓展名时转码输出的媒体文件OSS地址由**URI**、**Container**与**Segment**参数共同决定，例如**URI**为`oss://examplebucket/outputVideo`：\n   -  当**Container**为`mp4`，**Segment**为空时，生成媒体文件的OSS地址为`oss://examplebucket/outputVideo.mp4`。\n   -  当**Container**为`ts`，**Segment**中**Format**为`hls`时，将产生OSS地址为`oss://examplebucket/outputVideo.m3u8`的m3u8文件以及多个拥有`oss://examplebucket/outputVideo`前缀的ts文件。","type":"string","required":false,"example":"oss://test-bucket/test-target-object.mp4"},"Container":{"description":"媒体容器类型。可选容器类型如下：\n- 音视频容器：mp4、mkv、mov、asf、avi、mxf、ts、flv\n- 音频容器：mp3、aac、flac、oga、ac3、opus\n><notice>Container与URI参数需要同时设置。若只进行字幕提取，截帧，截雪碧图或媒体转动图，则需要将Container与URI同时设为空值，此时设置的Segment，Video，Audio和Speed等参数无意义。","type":"string","required":false,"example":"mp4"},"Speed":{"description":"媒体倍速播放设置，取值范围为\\[0.5,2]，默认为1.0。\n> 转码后媒体文件与源媒体文件默认播放速度的比值，非倍速转码。","type":"number","format":"float","required":false,"example":"1.0"},"Segment":{"description":"媒体切片设置，默认不进行切片。","type":"object","properties":{"Format":{"description":"媒体切片方式。取值范围如下：\n- hls\n- dash","type":"string","required":false,"example":"hls"},"Duration":{"description":"切片长度。单位为秒。","type":"number","format":"double","required":false,"example":"30"},"StartNumber":{"description":"起始序号，仅支持hls，默认为0。","type":"integer","format":"int32","required":false,"example":"5"}},"required":false},"Video":{"description":"视频处理参数配置。\n><notice>当Video为空值时，会将第一路视频流（若存在）直接拷贝到输出文件。","required":false,"$ref":"#/components/schemas/TargetVideo"},"Audio":{"description":"音频处理参数配置。\n><notice>当Audio为空值时，会将第一路音频流（若存在）直接拷贝到输出文件。","required":false,"$ref":"#/components/schemas/TargetAudio"},"Subtitle":{"description":"字幕处理参数配置。\n><notice>当Subtitle为空值时，会将第一路字幕流（若存在）直接拷贝到输出文件。","required":false,"$ref":"#/components/schemas/TargetSubtitle"},"Image":{"description":"截帧，截雪碧图，媒体转动图参数配置。","required":false,"$ref":"#/components/schemas/TargetImage"},"StripMetadata":{"description":"去除媒体文件metadata，如`title`、`album`等，默认为false。","type":"boolean","required":false}},"required":false},"required":true}},{"name":"UserData","in":"query","schema":{"description":"用户自定义信息，在异步消息通知中会为您返回，用于方便您系统内对消息通知进行关联处理。最大长度为2048字节。","type":"string","required":false,"example":"{\"ID\": \"testuid\",\"Name\": \"test-user\",\"Avatar\": \"http://test.com/testuid\"}"}},{"name":"Tags","in":"query","style":"json","schema":{"description":"自定义标签，用于对异步任务进行搜索、过滤。","type":"object","required":false,"example":"{\"test\":\"val1\"}"}},{"name":"CredentialConfig","in":"query","style":"json","schema":{"description":"链式授权配置。更多信息，请参见[使用链式授权访问其他实体资源](~~465340~~)。","required":false,"$ref":"#/components/schemas/CredentialConfig"}},{"name":"Notification","in":"query","style":"json","schema":{"description":"消息通知配置，详细内容请单击Notification查看，异步通知消息格式请参见[异步通知消息格式](~~471456~~)。","required":false,"$ref":"#/components/schemas/Notification"}},{"name":"AlignmentIndex","in":"query","schema":{"description":"在进行媒体拼接时，主媒体文件（提供`Video`、`Audio`中默认转码参数，包括分辨率、帧率等）在拼接列表中的序号，默认为0（对齐拼接列表中第一个媒体文件）。","type":"integer","format":"int32","required":false}}],"responses":{"200":{"schema":{"title":"响应结构体","description":"响应结构体","type":"object","properties":{"RequestId":{"title":"请求 ID","description":"请求ID。","type":"string","example":"CA995EFD-083D-4F40-BE8A-BDF75FFFE0B6"},"EventId":{"description":"事件ID。","type":"string","example":"0ED-1Bz8z71k5TtsUejT4UJ16Es****"},"TaskId":{"description":"任务ID。","type":"string","example":"MediaConvert-adb1ee28-c4c9-42a7-9f54-3b8eadcb****"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"CA995EFD-083D-4F40-BE8A-BDF75FFFE0B6\\\",\\n  \\\"EventId\\\": \\\"0ED-1Bz8z71k5TtsUejT4UJ16Es****\\\",\\n  \\\"TaskId\\\": \\\"MediaConvert-adb1ee28-c4c9-42a7-9f54-3b8eadcb****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"创建媒体转码任务","description":"- **请确保在使用该接口前，已充分了解智能媒体管理产品的收费方式和[价格](~~88317~~)。**\n- 调用该接口前，请确保当前Region已经存在可用的项目（Project），详见[项目管理](~~478152~~)。\n- 使用该接口进行媒体转码时，默认只处理一路视频/音频/字幕流，同时支持配置处理的视频/音频/字幕流数量。\n- 使用该接口进行媒体拼接时，最大支持的媒体数量为11个，此时配置的转码、截帧等参数将作用于拼接后媒体数据。\n- 该接口为异步接口，获取任务开始执行后，任务信息只保存7天，超过7天则无法再获取。调用[GetTask](~~478241~~)或[ListTasks](~~478242~~)接口获取返回的`TaskId`，查看任务信息。也可以通过设置[Notification](~~471456~~)消息通知参数，通过消息通知获取任务信息。"}