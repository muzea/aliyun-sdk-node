{"summary":"通过输入自然语言，对数据集内的元数据进行基于语义的查询搜索。","methods":["get","post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"list","abilityTreeCode":"103885","abilityTreeNodes":["FEATUREimmDN11M0"]},"parameters":[{"name":"NextToken","in":"query","allowEmptyValue":true,"schema":{"title":"标记当前开始读取的位置，置空表示从头开始","description":"目前不再提供该参数。","type":"string","required":false}},{"name":"MaxResults","in":"query","allowEmptyValue":true,"schema":{"title":"本次读取的最大数据记录数量","description":"本次读取的最大数据记录数量。范围(0,1000]。","type":"integer","format":"int32","required":false,"example":"20"}},{"name":"ProjectName","in":"query","schema":{"title":"项目名称","description":"项目名称。","type":"string","required":true,"example":"test-project"}},{"name":"DatasetName","in":"query","schema":{"title":"Dataset 名称","description":"数据集名称。","type":"string","required":true,"example":"test-dataset"}},{"name":"Query","in":"query","schema":{"title":"需要搜索的内容，使用自然语言描述","description":"需要进行语义搜索的内容。","type":"string","required":true,"example":"2021年4月杭州的风景"}},{"name":"WithFields","in":"query","style":"json","schema":{"description":"仅返回特定字段的值，而不是全部已有的元信息字段。可用于降低返回的结构体大小。\n\n不填或留空则返回所有字段。","type":"array","items":{"description":"仅返回特定字段的值，而不是全部已有的元信息字段。可用于降低返回的结构体大小。\n\n不填或留空则返回所有字段。","type":"string","required":false,"example":"[\"URI\", \"Filename\"]"},"required":false}},{"name":"MediaTypes","in":"query","style":"json","schema":{"description":"搜索的媒体类型。如留空则默认值为：\n\n[\"image\"]","type":"array","items":{"description":"枚举值，当前仅支持：\n\nimage","type":"string","required":false,"example":"[\"image\"]"},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"本次请求的唯一 Id","description":"当次请求的Request ID。","type":"string","example":"2C5C1E0F-D8B8-4DA0-8127-EC32C771****"},"Files":{"title":"文件列表","description":"文件列表。","type":"array","items":{"description":"文件信息。","$ref":"#/components/schemas/File"}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2C5C1E0F-D8B8-4DA0-8127-EC32C771****\\\",\\n  \\\"Files\\\": [\\n    {\\n      \\\"OwnerId\\\": \\\"\\\",\\n      \\\"ProjectName\\\": \\\"\\\",\\n      \\\"DatasetName\\\": \\\"\\\",\\n      \\\"ObjectType\\\": \\\"\\\",\\n      \\\"ObjectId\\\": \\\"\\\",\\n      \\\"UpdateTime\\\": \\\"\\\",\\n      \\\"CreateTime\\\": \\\"\\\",\\n      \\\"URI\\\": \\\"\\\",\\n      \\\"OSSURI\\\": \\\"\\\",\\n      \\\"Filename\\\": \\\"\\\",\\n      \\\"MediaType\\\": \\\"\\\",\\n      \\\"ContentType\\\": \\\"\\\",\\n      \\\"Size\\\": 0,\\n      \\\"FileHash\\\": \\\"\\\",\\n      \\\"FileModifiedTime\\\": \\\"\\\",\\n      \\\"FileCreateTime\\\": \\\"\\\",\\n      \\\"FileAccessTime\\\": \\\"\\\",\\n      \\\"ProduceTime\\\": \\\"\\\",\\n      \\\"LatLong\\\": \\\"\\\",\\n      \\\"Timezone\\\": \\\"\\\",\\n      \\\"Addresses\\\": [\\n        {\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"AddressLine\\\": \\\"\\\",\\n          \\\"Country\\\": \\\"\\\",\\n          \\\"Province\\\": \\\"\\\",\\n          \\\"City\\\": \\\"\\\",\\n          \\\"District\\\": \\\"\\\",\\n          \\\"Township\\\": \\\"\\\"\\n        }\\n      ],\\n      \\\"TravelClusterId\\\": \\\"\\\",\\n      \\\"Orientation\\\": 0,\\n      \\\"Figures\\\": [\\n        {\\n          \\\"FigureId\\\": \\\"\\\",\\n          \\\"FigureConfidence\\\": 0,\\n          \\\"FigureClusterId\\\": \\\"\\\",\\n          \\\"FigureClusterConfidence\\\": 0,\\n          \\\"FigureType\\\": \\\"\\\",\\n          \\\"Age\\\": 0,\\n          \\\"AgeSD\\\": 0,\\n          \\\"Gender\\\": \\\"\\\",\\n          \\\"GenderConfidence\\\": 0,\\n          \\\"Emotion\\\": \\\"\\\",\\n          \\\"EmotionConfidence\\\": 0,\\n          \\\"FaceQuality\\\": 0,\\n          \\\"Boundary\\\": {\\n            \\\"Width\\\": 0,\\n            \\\"Height\\\": 0,\\n            \\\"Left\\\": 0,\\n            \\\"Top\\\": 0,\\n            \\\"Polygon\\\": [\\n              {\\n                \\\"X\\\": 0,\\n                \\\"Y\\\": 0\\n              }\\n            ]\\n          },\\n          \\\"Mouth\\\": \\\"\\\",\\n          \\\"MouthConfidence\\\": 0,\\n          \\\"Beard\\\": \\\"\\\",\\n          \\\"BeardConfidence\\\": 0,\\n          \\\"Hat\\\": \\\"\\\",\\n          \\\"HatConfidence\\\": 0,\\n          \\\"Mask\\\": \\\"\\\",\\n          \\\"MaskConfidence\\\": 0,\\n          \\\"Glasses\\\": \\\"\\\",\\n          \\\"GlassesConfidence\\\": 0,\\n          \\\"Sharpness\\\": 0,\\n          \\\"Attractive\\\": 0,\\n          \\\"HeadPose\\\": {\\n            \\\"Pitch\\\": 0,\\n            \\\"Roll\\\": 0,\\n            \\\"Yaw\\\": 0\\n          }\\n        }\\n      ],\\n      \\\"FigureCount\\\": 0,\\n      \\\"Labels\\\": [\\n        {\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"LabelName\\\": \\\"\\\",\\n          \\\"LabelLevel\\\": 0,\\n          \\\"LabelConfidence\\\": 0,\\n          \\\"ParentLabelName\\\": \\\"\\\",\\n          \\\"CentricScore\\\": 0\\n        }\\n      ],\\n      \\\"Title\\\": \\\"\\\",\\n      \\\"ImageWidth\\\": 0,\\n      \\\"ImageHeight\\\": 0,\\n      \\\"EXIF\\\": \\\"\\\",\\n      \\\"ImageScore\\\": {\\n        \\\"OverallQualityScore\\\": 0\\n      },\\n      \\\"CroppingSuggestions\\\": [\\n        {\\n          \\\"AspectRatio\\\": \\\"\\\",\\n          \\\"Confidence\\\": 0,\\n          \\\"Boundary\\\": {\\n            \\\"Width\\\": 0,\\n            \\\"Height\\\": 0,\\n            \\\"Left\\\": 0,\\n            \\\"Top\\\": 0,\\n            \\\"Polygon\\\": [\\n              {\\n                \\\"X\\\": 0,\\n                \\\"Y\\\": 0\\n              }\\n            ]\\n          }\\n        }\\n      ],\\n      \\\"OCRContents\\\": [\\n        {\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"Contents\\\": \\\"\\\",\\n          \\\"Confidence\\\": 0,\\n          \\\"Boundary\\\": {\\n            \\\"Width\\\": 0,\\n            \\\"Height\\\": 0,\\n            \\\"Left\\\": 0,\\n            \\\"Top\\\": 0,\\n            \\\"Polygon\\\": [\\n              {\\n                \\\"X\\\": 0,\\n                \\\"Y\\\": 0\\n              }\\n            ]\\n          }\\n        }\\n      ],\\n      \\\"VideoWidth\\\": 0,\\n      \\\"VideoHeight\\\": 0,\\n      \\\"VideoStreams\\\": [\\n        {\\n          \\\"Index\\\": 0,\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"CodecName\\\": \\\"\\\",\\n          \\\"CodecLongName\\\": \\\"\\\",\\n          \\\"Profile\\\": \\\"\\\",\\n          \\\"CodecTimeBase\\\": \\\"\\\",\\n          \\\"CodecTagString\\\": \\\"\\\",\\n          \\\"CodecTag\\\": \\\"\\\",\\n          \\\"Width\\\": 0,\\n          \\\"Height\\\": 0,\\n          \\\"HasBFrames\\\": 0,\\n          \\\"SampleAspectRatio\\\": \\\"\\\",\\n          \\\"DisplayAspectRatio\\\": \\\"\\\",\\n          \\\"PixelFormat\\\": \\\"\\\",\\n          \\\"Level\\\": 0,\\n          \\\"FrameRate\\\": \\\"\\\",\\n          \\\"AverageFrameRate\\\": \\\"\\\",\\n          \\\"TimeBase\\\": \\\"\\\",\\n          \\\"StartTime\\\": 0,\\n          \\\"Duration\\\": 0,\\n          \\\"Bitrate\\\": 0,\\n          \\\"FrameCount\\\": 0,\\n          \\\"Rotate\\\": \\\"\\\",\\n          \\\"BitDepth\\\": 0,\\n          \\\"ColorSpace\\\": \\\"\\\",\\n          \\\"ColorRange\\\": \\\"\\\",\\n          \\\"ColorTransfer\\\": \\\"\\\",\\n          \\\"ColorPrimaries\\\": \\\"\\\"\\n        }\\n      ],\\n      \\\"Subtitles\\\": [\\n        {\\n          \\\"Index\\\": 0,\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"CodecName\\\": \\\"\\\",\\n          \\\"CodecLongName\\\": \\\"\\\",\\n          \\\"CodecTagString\\\": \\\"\\\",\\n          \\\"CodecTag\\\": \\\"\\\",\\n          \\\"StartTime\\\": 0,\\n          \\\"Duration\\\": 0,\\n          \\\"Bitrate\\\": 0,\\n          \\\"Content\\\": \\\"\\\",\\n          \\\"Width\\\": 0,\\n          \\\"Height\\\": 0\\n        }\\n      ],\\n      \\\"AudioStreams\\\": [\\n        {\\n          \\\"Index\\\": 0,\\n          \\\"Language\\\": \\\"\\\",\\n          \\\"CodecName\\\": \\\"\\\",\\n          \\\"CodecLongName\\\": \\\"\\\",\\n          \\\"CodecTimeBase\\\": \\\"\\\",\\n          \\\"CodecTagString\\\": \\\"\\\",\\n          \\\"CodecTag\\\": \\\"\\\",\\n          \\\"TimeBase\\\": \\\"\\\",\\n          \\\"StartTime\\\": 0,\\n          \\\"Duration\\\": 0,\\n          \\\"Bitrate\\\": 0,\\n          \\\"FrameCount\\\": 0,\\n          \\\"Lyric\\\": \\\"\\\",\\n          \\\"SampleFormat\\\": \\\"\\\",\\n          \\\"SampleRate\\\": 0,\\n          \\\"Channels\\\": 0,\\n          \\\"ChannelLayout\\\": \\\"\\\"\\n        }\\n      ],\\n      \\\"Artist\\\": \\\"\\\",\\n      \\\"AlbumArtist\\\": \\\"\\\",\\n      \\\"AudioCovers\\\": [\\n        {\\n          \\\"ImageWidth\\\": 0,\\n          \\\"ImageHeight\\\": 0,\\n          \\\"EXIF\\\": \\\"\\\",\\n          \\\"ImageScore\\\": {\\n            \\\"OverallQualityScore\\\": 0\\n          },\\n          \\\"CroppingSuggestions\\\": [\\n            {\\n              \\\"AspectRatio\\\": \\\"\\\",\\n              \\\"Confidence\\\": 0\\n            }\\n          ],\\n          \\\"OCRContents\\\": [\\n            {\\n              \\\"Language\\\": \\\"\\\",\\n              \\\"Contents\\\": \\\"\\\",\\n              \\\"Confidence\\\": 0\\n            }\\n          ]\\n        }\\n      ],\\n      \\\"Composer\\\": \\\"\\\",\\n      \\\"Performer\\\": \\\"\\\",\\n      \\\"Language\\\": \\\"\\\",\\n      \\\"Album\\\": \\\"\\\",\\n      \\\"PageCount\\\": 0,\\n      \\\"ETag\\\": \\\"\\\",\\n      \\\"CacheControl\\\": \\\"\\\",\\n      \\\"ContentDisposition\\\": \\\"\\\",\\n      \\\"ContentEncoding\\\": \\\"\\\",\\n      \\\"ContentLanguage\\\": \\\"\\\",\\n      \\\"AccessControlAllowOrigin\\\": \\\"\\\",\\n      \\\"AccessControlRequestMethod\\\": \\\"\\\",\\n      \\\"ServerSideEncryptionCustomerAlgorithm\\\": \\\"\\\",\\n      \\\"ServerSideEncryption\\\": \\\"\\\",\\n      \\\"ServerSideDataEncryption\\\": \\\"\\\",\\n      \\\"ServerSideEncryptionKeyId\\\": \\\"\\\",\\n      \\\"OSSStorageClass\\\": \\\"\\\",\\n      \\\"OSSCRC64\\\": \\\"\\\",\\n      \\\"ObjectACL\\\": \\\"\\\",\\n      \\\"ContentMd5\\\": \\\"\\\",\\n      \\\"OSSUserMeta\\\": {\\n        \\\"test\\\": \\\"test\\\",\\n        \\\"test2\\\": 1\\n      },\\n      \\\"OSSTaggingCount\\\": 0,\\n      \\\"OSSTagging\\\": {\\n        \\\"test\\\": \\\"test\\\",\\n        \\\"test2\\\": 1\\n      },\\n      \\\"OSSExpiration\\\": \\\"\\\",\\n      \\\"OSSVersionId\\\": \\\"\\\",\\n      \\\"OSSDeleteMarker\\\": \\\"\\\",\\n      \\\"OSSObjectType\\\": \\\"\\\",\\n      \\\"CustomId\\\": \\\"\\\",\\n      \\\"CustomLabels\\\": {\\n        \\\"test\\\": \\\"test\\\",\\n        \\\"test2\\\": 1\\n      },\\n      \\\"StreamCount\\\": 0,\\n      \\\"ProgramCount\\\": 0,\\n      \\\"FormatName\\\": \\\"\\\",\\n      \\\"FormatLongName\\\": \\\"\\\",\\n      \\\"StartTime\\\": 0,\\n      \\\"Bitrate\\\": 0,\\n      \\\"Duration\\\": 0,\\n      \\\"SemanticSimilarity\\\": 0,\\n      \\\"SemanticTypes\\\": [\\n        \\\"\\\"\\n      ],\\n      \\\"Elements\\\": [\\n        {\\n          \\\"ElementContents\\\": [\\n            {\\n              \\\"Type\\\": \\\"\\\",\\n              \\\"Content\\\": \\\"\\\",\\n              \\\"URL\\\": \\\"\\\",\\n              \\\"TimeRange\\\": [\\n                0\\n              ]\\n            }\\n          ]\\n        }\\n      ],\\n      \\\"SceneElements\\\": [\\n        {\\n          \\\"TimeRange\\\": [\\n            0\\n          ],\\n          \\\"FrameTimes\\\": [\\n            0\\n          ]\\n        }\\n      ],\\n      \\\"OCRTexts\\\": \\\"\\\",\\n      \\\"FileStatus\\\": \\\"\\\",\\n      \\\"Reason\\\": \\\"\\\"\\n    }\\n  ]\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"\",\"errorExample\":\"\"}]","title":"自然语言查询","description":"### 注意事项\n\n- **请确保在使用该接口前，已充分了解智能媒体管理产品的收费方式和[价格](~~477042~~)**。该接口每次请求，会产生语义理解费用和查询费用两种计费项各一次。\n\n- 调用该接口前，请确保您已通过绑定方式（[CreateBinding](~~478202~~)）或者主动索引（[IndexFileMeta](~~478166~~)或者[BatchIndexFileMeta](~~478167~~)）方式将文件索引到数据集（Dataset）中。\n\n- 返回结果仅为示例，根据[工作流模板配置](~~466304~~)不同，获取到的文件元数据信息的类别和包含的内容均有可能与示例不同。如果有疑问，请使用钉钉搜索钉钉群号21714099加入钉钉群进行反馈。\n\n### 使用限制\n\n- 每次查询最多返回1000个文件信息。\n\n- 不支持翻页查询。\n\n- 自然语言理解不保证完全准确。\n\n### 使用方式\n\n使用自然语言关键词对数据集内的文件进行搜索查询。目前支持理解的关键信息包括标签（Labels.LabelName）、时间（ProduceTime）和地点（Address.AddressLine）等。例如，以`2023年杭州的风景`为条件进行查询，会被智能拆分为如下三个条件，并查找出同时满足这些条件的文件：\n\n - ProduceTime：2023年1月1日零点起到2023年12月31日结束止\n\n- Address.AddressLine：包含`杭州`关键词\n\n- Labels.LabelName：包含`风景`标签\n\n配合[工作流模板配置](~~466304~~)，当模板中包含`ImageEmbeddingExtraction`算子时，该搜索请求会提供基于图片内容的搜索，即您输入的`Query`内容会同时被理解为图片内包含的内容，从而实现对图片的智能检索。"}