{"summary":"创建CPFS文件系统的协议服务，创建协议服务过程大约需要5～10分钟。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"FileSystemId","in":"query","schema":{"description":"文件系统ID。","type":"string","required":true,"docRequired":true,"example":"cpfs-099394bd928c****","enum":[]}},{"name":"ProtocolSpec","in":"query","schema":{"description":"协议服务的规格。\n\n取值： General（默认值）。","type":"string","required":true,"docRequired":true,"example":"General","enum":["CL2","General","CL1"]}},{"name":"Throughput","in":"query","schema":{"description":"协议服务的带宽。\n\n单位：MB/s。\n\n","type":"integer","format":"int32","required":false,"example":"8000"}},{"name":"ProtocolType","in":"query","schema":{"description":"协议服务的协议类型。\n\n取值：NFS（默认值），仅支持NFSv3协议访问。","type":"string","required":true,"docRequired":true,"example":"NFS"}},{"name":"Description","in":"query","schema":{"description":"协议服务的描述。控制台中显示为“协议服务名称”。\n\n限制：\n\n- 长度为2~128个英文或中文字符。\n- 必须以大小写字母或中文开头，不能以`http://`和`https://`开头。\n- 可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。","type":"string","required":false,"example":"此协议服务的描述。"}},{"name":"VpcId","in":"query","schema":{"description":"协议服务VpcId，需与文件系统VPC保持一致。","type":"string","required":true,"docRequired":true,"example":"vpc-2vct297b8157bth9z****"}},{"name":"VSwitchId","in":"query","schema":{"description":"协议服务VSwitchId。","type":"string","required":true,"docRequired":true,"example":"vsw-2vc3c2lybvdllxyq4****"}},{"name":"DryRun","in":"query","schema":{"description":"是否对此次创建请求执行预检。\n\n预检操作会帮助您检查参数有效性、依赖条件等，并不会实际创建实例，也不会产生费用。\n\n取值：\n- true：发送检查请求，不会创建协议服务。检查项包括是否填写了必需参数、请求格式、业务限制依赖条件。如果检查不通过，则返回对应错误。如果检查通过，则返回200 HttpCode，但ProtocolServiceId为空。\n- false（默认）：发送正常请求，通过检查后直接创建实例。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性，从您的客户端生成一个参数值，确保不同请求间该参数值唯一。\n\nClientToken只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。\n\n> 若用户未指定，则系统自动使用API请求的RequestId作为ClientToken标识。每次API请求的RequestId可能不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****","maxLength":64,"minLength":1}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"98696EF0-1607-4E9D-B01D-F20930B6****"},"ProtocolServiceId":{"description":"协议机集群ID。","type":"string","example":"ptc-197ed6a00f2b****"}}}}},"errorCodes":{"400":[{"errorCode":"MissingFileSystemId","errorMessage":"FileSystemId is mandatory for this action."},{"errorCode":"MissingVpcId","errorMessage":"VpcId is mandatory for this action."},{"errorCode":"MissingVSwitchId","errorMessage":"VSwitchId is mandatory for this action."}],"403":[{"errorCode":"InvalidProtocolSpec.NotSupported","errorMessage":"The specified protocol spec does not supported."},{"errorCode":"InvalidNetworkType.NotSupported","errorMessage":"The specified network type does not supported."},{"errorCode":"Instance.IncorrectStatus","errorMessage":"The specified instance is in an incorrect status."},{"errorCode":"OperationDenied.ProtocolServiceExceedLimit","errorMessage":"The protocol service amount exceed file system limit."},{"errorCode":"PermissionDenied.CapacityTooLow","errorMessage":"Capacity of file system too low to subscribe protocol service."},{"errorCode":"PermissionDenied.ThroughputInvalid","errorMessage":"Standard protocol service should not specified throughput."},{"errorCode":"PermissionDenied.ThroughputTooSmall","errorMessage":"Throughput of protocol service too small."},{"errorCode":"PermissionDenied.ThroughputExceed","errorMessage":"Throughput of protocol service must less than throughput of file system."},{"errorCode":"InvalidProtocolType.NotSupported","errorMessage":"The specified protocol type does not supported."},{"errorCode":"InvalidVSwitchId.IpShortage","errorMessage":"The specified vswitch ip shortage."},{"errorCode":"InvalidFset.InUse","errorMessage":"Fset already used by other export."},{"errorCode":"InvalidFileSystemPath.InvalidCharacters","errorMessage":"The specified filesystem path contains invalid characters."},{"errorCode":"MntPathConflict.InvalidParam","errorMessage":"FilesetId and Path must and can only be specified one."},{"errorCode":"OperationDenied.TooManyDepth","errorMessage":"The operation is denied due to Fsets path too deep."},{"errorCode":"OperationDenied.InvalidState","errorMessage":"The operation is denied due to invalid file system state."},{"errorCode":"OperationDenied.NoProtocolServiceQuota","errorMessage":"No protocol service quota."},{"errorCode":"OperationDenied.NotSupported","errorMessage":"The operation is denied due to not supported."},{"errorCode":"PermissionDenied.CLThroughputInvalid","errorMessage":"Throughput of caching protocol service is invalid."},{"errorCode":"InvalidVpcId.CrossVpcNotSupport.","errorMessage":"Cross VPC not support."}],"404":[{"errorCode":"InvalidParameter.VpcNotFound","errorMessage":"The specified VPC does not exist."},{"errorCode":"InvalidParameter.VswNotFound","errorMessage":"The specified VSwitch does not exist."},{"errorCode":"InvalidFileSystem.NotFound","errorMessage":"The specified file system does not exist."},{"errorCode":"InvalidDescription.InvalidFormat","errorMessage":"Description format is invalid."},{"errorCode":"InvalidVpcId.ConflictVpcCidr","errorMessage":"Vpc cidr conflict with file system"},{"errorCode":"InvalidAccessGroupName.NotFound","errorMessage":"The specified access group does not exist."},{"errorCode":"InvalidAccessGroupName.NotAccessRule","errorMessage":"There has no rule in access group."},{"errorCode":"OperationDenied.NoStock","errorMessage":"The operation is denied due to no stock."},{"errorCode":"PathNotExistInFileSystem.InvalidParam","errorMessage":"Given path does not exist in file system."},{"errorCode":"InvalidFsetId.NotFound","errorMessage":"The specified Fileset ID does not exist."},{"errorCode":"InvalidParameter.VpcVswitchMismatch","errorMessage":"Given vSwitch mismatch with given VPC."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"98696EF0-1607-4E9D-B01D-F20930B6****\\\",\\n  \\\"ProtocolServiceId\\\": \\\"ptc-197ed6a00f2b****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateProtocolServiceResponse>\\n    <RequestId>98696EF0-1607-4E9D-B01D-F20930B6****</RequestId>\\n    <ProtocolServiceId>ptc-123****</ProtocolServiceId>\\n</CreateProtocolServiceResponse>\",\"errorExample\":\"\"}]","title":"创建协议服务","description":"- 该接口仅适用于中国站CPFS文件系统。\n-  仅CPFS 2.3.0及以上版本支持协议服务。您可以通过调用[DescribeFileSystems](~~163314~~)接口查询目标文件系统的版本号。\n\n- 协议服务规格\n\n  协议服务包括两种协议类型：通用型和缓存型。缓存型相比通用型，提供热点数据缓存能力。在命中缓存的情况下，缓存型协议服务的带宽可超过CPFS文件系统的带宽，达到协议服务设定的最大带宽值。\n  \n    -   通用型：为CPFS提供NFS协议访问能力和[目录级挂载点](~~427175~~)，用户无需配置POSIX客户端管理集群。该功能免费。\n    -  缓存型：在通用型基础上提供基于LRU策略的服务端内存缓存。当数据缓存于内存中时，CPFS可提供更高的内网带宽。缓存型协议服务分为缓存1型和缓存2型两种协议服务规格，差异点为内网带宽大小和内存缓存大小。\n\n     >  缓存型协议服务为收费服务，正在邀测。有关缓存型协议服务的付费方式，请参见[计费项](~~111858~~)。如果您有任何反馈或疑问，欢迎加入钉钉用户群（钉钉群号：31045006299）与CPFS工程师进行交流讨论。\n\n- 协议类型\n\n  仅支持NFSv3协议。\n\n- 其它\n\n    - 一个CPFS文件系统只能创建一个协议服务。\n\n    - 创建协议服务会消耗指定vSwitch上的IP地址（最多消耗32个IP地址），请确保目标vSwitch IP资源充足。"}