{"summary":"查询数据流动任务。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"FileSystemId","in":"query","schema":{"description":"文件系统ID。\n\n- CPFS：必须以`cpfs-`开头，例如cpfs-125487\\*\\*\\*\\*。\n\n- CPFS智算版：必须以`bmcpfs-`开头，例如bmcpfs-0015\\*\\*\\*\\*。\n\n>仅中国站支持CPFS文件系统。","type":"string","required":true,"docRequired":true,"example":"cpfs-099394bd928c****"}},{"name":"Filters","in":"query","allowEmptyValue":false,"style":"repeatList","schema":{"description":"筛选键的信息合集。","type":"array","items":{"type":"object","properties":{"Key":{"description":"筛选键的名称。\n\n取值：\n\n- DataFlowIds: 根据DataFlow ID筛选。\n- TaskIds：根据数据流动任务的ID筛选。\n- Originator：根据数据流动任务的发起者筛选。\n- TaskActions：根据数据流动任务的类型筛选。\n- DataTypes：根据数据流动任务的数据类型筛选。\n- Status：根据数据流动状态筛选。\n- CreateTimeBegin：筛选指定时间后创建的数据流动任务。\n- CreateTimeEnd：筛选指定时间前创建的数据流动任务。\n- StartTimeBegin：筛选指定时间后启动的数据流动任务。\n- StartTimeEnd：筛选指定时间前启动的数据流动任务。\n- EndTimeBegin：筛选指定时间后结束的数据流动任务。\n- EndTimeEnd：筛选指定时间前结束的数据流动任务。","type":"string","required":false,"example":"DataFlowIds","enum":["DataFlowIds","TaskIds","Originator","TaskActions","DataTypes","Status","CreateTimeBegin","CreateTimeEnd","StartTimeBegin","StartTimeEnd","EndTimeBegin","EndTimeEnd"]},"Value":{"description":"筛选键的值。该参数不支持通配符。\n\n- Key取值为DataFlowIds时，Value取值为数据流动ID或数据流动ID的一部分。可以是一个或一组DataFlowId，数据流动ID最多可设置10个。例如，`dfid-12345678`或`dfid-12345678,dfid-12345679`。\n- 当Key取值为TaskId时，Value取值为数据流动任务ID或数据流动任务ID的部分。可以是一个或一组数据流动任务ID，数据流动任务ID最多可设置10个。例如，`task-12345678`或`task-12345678,task-12345679`。\n- 当Key取值为TaskActions时，Value取值为数据流动的任务类型，包括**Import**，**Export**、**Evict**和**Inventory**。支持组合查询。\n- 当Key取值为DataTypes时，Value取值为数据流动任务的数据类型，包括MetaAndData、Metadata和Data。支持组合查询。\n- 当Key取值为Originator时，Value取值为数据流动任务的发起者，包括User，System。\n- 当Key取值为Status时，Value取值为数据流动任务的状态，包括Pending、Executing、Failed、Completed、Canceling和Canceled。支持组合查询。\n- 当Key取值为CreateTimeBegin时，Value取值为数据流动任务创建时间最小值。格式为`yyyy-MM-ddThh:mmZ`。\n- 当Key取值为CreateTimeEnd时，Value取值为数据流动任务创建时间最大值。格式为`yyyy-MM-ddThh:mmZ`。\n- 当Key取值为StartTimeBegin时，Value取值为数据流动任务启动时间最小值。格式为`yyyy-MM-ddThh:mmZ`。\n- 当Key取值为StartTimeEnd时，Value取值为数据流动任务启动时间最大值。格式为`yyyy-MM-ddThh:mmZ`。\n- 当Key取值为EndTimeBegin时，Value取值为数据流动任务结束时间最小值。格式为`yyyy-MM-ddThh:mmZ`。\n- 当Key取值为EndTimeEnd时，Value取值为数据流动任务结束时间最大值。格式为`yyyy-MM-ddThh:mmZ`。","type":"string","required":false,"example":"dfid-12345678"}},"required":false},"required":false,"maxItems":12}},{"name":"NextToken","in":"query","schema":{"description":"当请求的返回结果被截断时，您可以使用NextToken再次发起请求，获取从当前截断位置之后的内容。","type":"string","required":false,"example":"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0="}},{"name":"MaxResults","in":"query","schema":{"description":"每次查询结果的个数。\n\n取值范围：10~100。\n\n默认值：20。","type":"integer","format":"int64","required":false,"maximum":"100","minimum":"10","example":"20","default":"20"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"2D69A58F-345C-4FDE-88E4-BF518948****"},"NextToken":{"description":"当请求的返回结果被截断时，您可以使用NextToken再次发起请求，获取从当前截断位置之后的内容。","type":"string","example":"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0="},"TaskInfo":{"type":"object","properties":{"Task":{"description":"数据流动任务的信息集合。","type":"array","items":{"type":"object","properties":{"FilesystemId":{"description":"文件系统ID。","type":"string","example":"cpfs-099394bd928c****"},"DataFlowId":{"description":"数据流动ID。","type":"string","example":"dfid-194433a5be3****"},"TaskId":{"description":"数据流动任务ID。","type":"string","example":"taskId-12345678"},"SourceStorage":{"description":"源端存储的访问路径。格式：`<storage type>://<path>`。\n\n其中：\n\n- storage type：目前只支持OSS。\n- path：OSS的bucket名称。\n    - 仅支持小写字母、数字和短划线（-）且必须以小写字母或者数字开头和结尾。\n    - 长度为8~128个英文字符。\n    - 使用UTF-8编码。\n    - 不能以http://和https://开头。\n\n> OSS Bucket必须为在该地域已存在的Bucket。","type":"string","example":"oss://bucket1"},"FileSystemPath":{"description":"Fileset在CPFS文件系统中的路径。\n\n限制：\n\n- 长度为2~1024个英文或中文字符。\n- 使用UTF-8编码。\n- 必须以/开头和结尾。\n- 该目录必须是CPFS上的Fileset目录。","type":"string","example":"/a/b/c/"},"Originator":{"description":"数据流动任务的发起者。\n包括：\n\n- User：用户是该任务的发起者。\n- System：该任务是自动更新任务，是CPFS根据自动更新间隔时间自动发起的任务。","type":"string","example":"User"},"TaskAction":{"description":"数据流动任务类型。包括：\n\n- Import：从源端存储将指定的数据导入至CPFS。\n- Export：将CPFS上指定的数据导出至源端存储。\n- Evict：释放CPFS上文件的数据块，释放后文件在CPFS上只保留元数据，您仍能查询该文件，但文件数据块已清除，不占用CPFS上的存储容量。当访问该文件数据时，将再从源端存储按需加载。\n- Inventory：获取CPFS上数据流动管理的文件清单，可提供文件在数据流动中的缓存状态。","type":"string","example":"Import"},"DataType":{"description":"数据流动任务操作的数据类型。包括：\n\n- Metadata：文件的元数据，包括文件的timestamp, ownership, permission等属性信息。选择Metadata，只会导入文件的元数据，用户只能看到该文件，但访问该文件数据时，数据从源端存储按需加载。\n- Data：文件的数据块。\n- MetaAndData：文件的元数据和数据块。\n> CPFS智算版仅支持 MetaAndData 类型。","type":"string","example":"MetaAndData "},"Progress":{"description":"数据流动任务的进度。当前数据流动任务已经执行的操作数量。","type":"integer","format":"int64","example":"240"},"Status":{"description":"数据流动任务的状态。包括：\n\n- Pending: 数据流动任务已创建，在排队中未开始执行。\n- Executing：数据流动任务在执行中。\n- Failed：数据流动任务执行失败，可以通过查看数据流动任务报告，查看失败原因。\n- Completed：数据流动任务执行结束，可以通过查看数据流动任务报告，查看所有文件已正确传输。\n- Canceled：数据流动任务被取消并且没有完成。\n- Canceling：数据流动任务正在被取消。","type":"string","example":"Executing"},"ReportPath":{"description":"数据流动任务报告在CPFS文件系统中保存的路径。\n\n- CPFS的任务报告会生成在该CPFS的`.dataflow_report`目录中。\n- CPFS智算版会返回一个oss下载链接，可以通过链接下载任务报告。","type":"string","example":"/path_in_cpfs/reportfile.cvs"},"CreateTime":{"description":"任务创建时间。","type":"string","example":"2021-08-04 18:27:35"},"StartTime":{"description":"任务开始执行时间。","type":"string","example":"2021-08-04 18:27:35"},"EndTime":{"description":"任务结束时间。","type":"string","example":"2021-08-04 18:27:35"},"FsPath":{"description":"智能目录路径。","type":"string","example":"/aa/"},"ConflictPolicy":{"title":"同名文件冲突策略","description":"同名文件冲突策略。","type":"string","example":"KEEP_LATEST","enum":["SKIP_THE_FILE","KEEP_LATEST","OVERWRITE_EXISTING"]},"Directory":{"title":"数据流动任务执行的目录","description":"数据流动任务执行的目录。","type":"string","example":"/path_in_cpfs/"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"IllegalCharacters","errorMessage":"The parameter contains illegal characters."},{"errorCode":"MissingFileSystemId","errorMessage":"FileSystemId is mandatory for this action."},{"errorCode":"InvalidFilesystemVersion.NotSupport","errorMessage":"This Api does not support this fileSystem version."}],"403":[{"errorCode":"OperationDenied.DataFlowNotSupported","errorMessage":"The operation is not supported."}],"404":[{"errorCode":"InvalidParameter.InvalidNextToken","errorMessage":"The specified NextToken is invaild."},{"errorCode":"InvalidFileSystem.NotFound","errorMessage":"The specified file system does not exist."},{"errorCode":"InvalidDataFlow.NotFound","errorMessage":"The specified data flow does not exist."},{"errorCode":"InvalidParameter.InvalidMaxResults","errorMessage":"The specified MaxResults is invalid."},{"errorCode":"InvalidFilterParam","errorMessage":"The specified Filter.N.Key is invalid."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2D69A58F-345C-4FDE-88E4-BF518948****\\\",\\n  \\\"NextToken\\\": \\\"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0=\\\",\\n  \\\"TaskInfo\\\": {\\n    \\\"Task\\\": [\\n      {\\n        \\\"FilesystemId\\\": \\\"cpfs-099394bd928c****\\\",\\n        \\\"DataFlowId\\\": \\\"dfid-194433a5be3****\\\",\\n        \\\"TaskId\\\": \\\"taskId-12345678\\\",\\n        \\\"SourceStorage\\\": \\\"oss://bucket1\\\",\\n        \\\"FileSystemPath\\\": \\\"/a/b/c/\\\",\\n        \\\"Originator\\\": \\\"User\\\",\\n        \\\"TaskAction\\\": \\\"Import\\\",\\n        \\\"DataType\\\": \\\"MetaAndData \\\",\\n        \\\"Progress\\\": 240,\\n        \\\"Status\\\": \\\"Executing\\\",\\n        \\\"ReportPath\\\": \\\"/path_in_cpfs/reportfile.cvs\\\",\\n        \\\"CreateTime\\\": \\\"2021-08-04 18:27:35\\\",\\n        \\\"StartTime\\\": \\\"2021-08-04 18:27:35\\\",\\n        \\\"EndTime\\\": \\\"2021-08-04 18:27:35\\\",\\n        \\\"FsPath\\\": \\\"/aa/\\\",\\n        \\\"ConflictPolicy\\\": \\\"KEEP_LATEST\\\",\\n        \\\"Directory\\\": \\\"/path_in_cpfs/\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeDataFlowTasksResponse>\\n    <RequestId>2D69A58F-345C-4FDE-88E4-BF518948****</RequestId>\\n    <NextToken>TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0=</NextToken>\\n    <TaskInfo>\\n        <FilesystemId>cpfs-099394bd928c****</FilesystemId>\\n        <DataFlowId>dfid-194433a5be3****</DataFlowId>\\n        <TaskId>taskId-12345678</TaskId>\\n        <SourceStorage>oss://bucket1</SourceStorage>\\n        <FileSystemPath>/a/b/c/</FileSystemPath>\\n        <Originator>User</Originator>\\n        <TaskAction>Import</TaskAction>\\n        <DataType>Metadata</DataType>\\n        <Progress>240</Progress>\\n        <Status>Executing</Status>\\n        <ReportPath>/path_in_cpfs/reportfile.cvs</ReportPath>\\n        <CreateTime>2021-08-04 18:27:35</CreateTime>\\n        <StartTime>2021-08-04 18:27:35</StartTime>\\n        <EndTime>2021-08-04 18:27:35</EndTime>\\n        <FsPath>/aa/</FsPath>\\n    </TaskInfo>\\n</DescribeDataFlowTasksResponse>\",\"errorExample\":\"\"}]","title":"查询数据流动任务列表","description":"仅CPFS 2.2.0及以上版本、智算CPFS 2.4.0及以上版本支持查询数据流动任务。您可以在控制台文件系统详情页面查看版本信息。"}