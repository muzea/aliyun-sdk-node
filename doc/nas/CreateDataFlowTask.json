{"summary":"创建一个数据流动任务。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"FileSystemId","in":"query","schema":{"description":"文件系统ID。\n\n- CPFS：必须以`cpfs-`开头，例如cpfs-125487\\*\\*\\*\\*。\n\n- CPFS智算版：必须以`bmcpfs-`开头，例如bmcpfs-0015\\*\\*\\*\\*。\n\n>仅中国站支持CPFS文件系统。","type":"string","required":true,"docRequired":true,"example":"cpfs-099394bd928c****"}},{"name":"DataFlowId","in":"query","schema":{"description":"数据流动ID。","type":"string","required":true,"docRequired":true,"example":"dfid-194433a5be31****"}},{"name":"SrcTaskId","in":"query","schema":{"description":"当指定SrcTaskId时，会从目标数据流动任务拷贝TaskAction、DataType和EntryList参数信息，您无需再单独指定。","type":"string","required":false,"example":"task-****"}},{"name":"TaskAction","in":"query","allowEmptyValue":true,"schema":{"description":"数据流动任务类型。\n\n取值：\n\n- Import：从源端存储将指定的数据导入至CPFS。\n- Export：将CPFS上指定的数据导出至源端存储。\n- Evict：释放CPFS上文件的数据块，释放后文件在CPFS上只保留元数据，您仍能查询该文件，但文件数据块已清除，不占用CPFS上的存储容量。当访问该文件数据时，将再从源端存储按需加载。\n- Inventory：获取CPFS上数据流动管理的文件清单，可提供文件在数据流动中的缓存状态。\n> 目前CPFS智算版只支持Import和Export。","type":"string","required":false,"docRequired":false,"example":"Import","enum":["Import","Export","Evict","Inventory"]}},{"name":"DataType","in":"query","allowEmptyValue":true,"schema":{"description":"数据流动任务操作的数据类型。\n\n取值：\n\n- Metadata：文件的元数据，包括文件的timestamp、 ownership、permission等属性信息。选择Metadata，只会导入文件的元数据，用户只能看到该文件，但访问该文件数据时，数据从源端存储按需加载。\n- Data：文件的数据块。\n- MetaAndData：文件的元数据和数据块。","type":"string","required":false,"docRequired":false,"example":"Metadata","enum":["Metadata","Data","MetaAndData",""]}},{"name":"Directory","in":"query","allowEmptyValue":false,"schema":{"description":"数据流动任务执行的目录。\n\n限制：\n- 长度为1~1023个字符。\n- 使用UTF-8编码。\n- 必须以正斜线（/）开头和结尾。\n- 一次只能列举一个目录。\n- 当TaskAction为Export时，该目录必须是FileSystemPath内的相对路径。\n- 当TaskAction为Import时，该目录必须是SourceStoragePath内的相对路径。","type":"string","required":false,"example":"/path_in_cpfs/","maxLength":1023}},{"name":"EntryList","in":"query","schema":{"description":"数据流动任务执行的文件列表。\n\n限制：\n\n- 使用UTF-8编码。\n- 文件列表总长度小于64KB。\n- 文件列表采用JSON格式。\n- 单个文件路径长度为 1~1023 个字符，且必须以正斜线（/）开头。\n- 当TaskAction为Import时，列表中每个元素代表一个OSS Object名称。\n- 当TaskAction为Export时，列表中每个元素代表一个CPFS文件路径。","type":"string","required":false,"docRequired":false,"example":"[\"/path_in_cpfs/file1\", \"/path_in_cpfs/file2\"]","maxItems":10}},{"name":"DryRun","in":"query","schema":{"description":"是否对此次创建请求执行预检。\n\n预检操作会帮助您检查参数有效性、校验库存等，并不会实际创建实例，也不会产生费用。\n\n取值：\n\n- true：发送检查请求，不会创建实例。检查项包括是否填写了必需参数、请求格式、业务限制和NAS库存。如果检查不通过，则返回对应错误。如果检查通过，则返回200 HttpCode，但FileSystemId为空。\n- false（默认值）：发送正常请求，通过检查后直接创建实例。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性，从您的客户端生成一个参数值，确保不同请求间该参数值唯一。\n\nClientToken只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。\n\n> 若您未指定，则系统自动使用API请求的RequestId作为ClientToken标识。每次API请求的RequestId可能不一样。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ConflictPolicy","in":"query","schema":{"title":"同名文件冲突策略。","description":"同名文件冲突策略。\n取值：\n\n- SKIP_THE_FILE：跳过同名文件。\n- KEEP_LATEST：比较更新时间，保留最新版本。\n- OVERWRITE_EXISTING：强制覆盖同名文件。\n> 当文件系统类型为cpfs时，该参数不生效。","type":"string","required":false,"example":"SKIP_THE_FILE","enum":["SKIP_THE_FILE","KEEP_LATEST","OVERWRITE_EXISTING"]}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"2D69A58F-345C-4FDE-88E4-BF518948****"},"TaskId":{"description":"数据流动任务ID。","type":"string","example":"taskId-1345768****"}}}}},"errorCodes":{"400":[{"errorCode":"IllegalCharacters","errorMessage":"The parameter contains illegal characters."},{"errorCode":"MissingFileSystemId","errorMessage":"FileSystemId is mandatory for this action."},{"errorCode":"MissingDataFlowId","errorMessage":"DataFlowId is mandatory for this action."},{"errorCode":"InvalidFilesystemVersion.NotSupport","errorMessage":"This Api does not support this fileSystem version."}],"403":[{"errorCode":"OperationDenied.InvalidState","errorMessage":"The operation is not permitted when the status is processing."},{"errorCode":"OperationDenied.DependencyViolation","errorMessage":"The operation is denied due to dependancy violation."},{"errorCode":"OperationDenied.DataFlowNotSupported","errorMessage":"The operation is not supported."}],"404":[{"errorCode":"InvalidParameter.InvalidFormat","errorMessage":"The EntryList format is invalid."},{"errorCode":"InvalidParameter.SizeTooLarge","errorMessage":"The specified EntryList size exceeds 64 KB."},{"errorCode":"InvalidDataFlow.NotFound","errorMessage":"The specified data flow does not exist."},{"errorCode":"InvalidTaskAction.NotSupported","errorMessage":"The task action is not supported."},{"errorCode":"InvalidTaskAction.PermissionDenied","errorMessage":"The task action is not allowed."},{"errorCode":"InvalidSrcTaskId.NotFound","errorMessage":"The SrcTaskId is not found."},{"errorCode":"InvalidDataType.NotSupported","errorMessage":"The data type is not supported."},{"errorCode":"InvalidSrcTaskId.TaskIdInvalid","errorMessage":"Source task ID is invalid."},{"errorCode":"InvalidSrcTaskId.TaskIdNotFound","errorMessage":"Source task ID is not found."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2D69A58F-345C-4FDE-88E4-BF518948****\\\",\\n  \\\"TaskId\\\": \\\"taskId-1345768****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateDataFlowTaskResponse>\\n    <RequestId>2D69A58F-345C-4FDE-88E4-BF518948****</RequestId>\\n    <TaskId>taskId-1345768****</TaskId>\\n</CreateDataFlowTaskResponse>\",\"errorExample\":\"\"}]","title":"创建数据流动任务","description":"- 仅CPFS 2.2.0及以上版本、智算CPFS 2.3.4及以上版本支持数据流动。您可以在控制台文件系统详情页面查看版本信息。\n- 仅支持在Running（正常）状态的数据流动上创建数据流动任务。\n- 数据流动任务是异步执行的，您可通过[DescribeDataFlowTasks](~~336914~~)查询任务执行状态。任务的耗时取决于需要导入、导出的数据量。如果是大量数据，建议拆分成多个任务执行。\n- 手动执行数据流动任务时，该数据流动的自动数据更新任务会被中断并等待。\n- 当创建导出任务时，需要确保CPFS和智算CPFS待导出的文件绝对路径总长度不能超过1023个字符。"}