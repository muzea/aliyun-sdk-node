{"summary":"查询一个CPFS文件系统的数据流动信息。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"FileSystemId","in":"query","schema":{"description":"文件系统ID。\n\n- CPFS：必须以`cpfs-`开头，例如cpfs-125487\\*\\*\\*\\*。\n\n- CPFS智算版：必须以`bmcpfs-`开头，例如bmcpfs-0015\\*\\*\\*\\*。\n\n>仅中国站支持CPFS文件系统。","type":"string","required":true,"docRequired":true,"example":"cpfs-099394bd928c****"}},{"name":"Filters","in":"query","allowEmptyValue":false,"style":"repeatList","schema":{"description":"查询数据流动的筛选键。","type":"array","items":{"type":"object","properties":{"Key":{"description":"筛选键的名称。取值：\n\n- DataFlowIds: 根据DataFlow ID筛选。\n- FsetIds：根据Fileset ID筛选。\n- FileSystemPath：根据Fileset在CPFS文件系统中的路径筛选。\n- SourceStorage：根据源端存储的访问路径筛选。\n- ThroughputList：根据数据流动的传输带宽筛选。\n- Description：根据Fileset的描述筛选。\n- Status：根据数据流动状态筛选。","type":"string","required":false,"example":"FsetIds","enum":["DataFlowIds","FsetIds","FileSystemPath","SourceStorage","ThroughputList","Description","Status","SourceStoragePath"]},"Value":{"description":"筛选键的值。该参数不支持通配符。\n\n- Key取值为DataFlowIds时，Value取值为数据流动ID或数据流动ID的一部分。可以是一个或一组DataFlowId，数据流动ID最多可设置10个。例如，`dfid-12345678`或`dfid-12345678,dfid-12345679`。\n\n- 当Key取值为FsetIds时，Value取值为Fileset Id或Fileset ID的部分。可以是一个或一组Fileset ID，Fileset ID最多可设置10个。例如，`fset-12345678`或`fset-12345678,fset-12345679`。\n- 当Key取值为FileSystemPath时，Value取值为CPFS文件系统中的路径或路径的一部分。长度为1~1024个字符。\n- 当Key取值为SourceStorage时，Value取值为源端存储的访问路径。最长为1024个字符。\n- 当Key取值为ThroughputList时，Value取值为数据流动的传输带宽且支持组合查询。\n- 当Key取值为Description时，Value取值为数据流动的描述或描述的一部分。\n- 当Key取值为Status时，Value取值为数据流动状态。\n- 当Key取值为SourceStoragePath时，Value取值为源端存储访问路径或访问路径的一部分。最长1024个字符。","type":"string","required":false,"example":"FsetIds"}},"required":false},"required":false,"docRequired":false,"maxItems":10}},{"name":"NextToken","in":"query","schema":{"description":"当请求的返回结果被截断时，您可以使用NextToken再次发起请求，获取从当前截断位置之后的内容。","type":"string","required":false,"example":"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0="}},{"name":"MaxResults","in":"query","schema":{"description":"每次查询结果的个数。\n\n取值范围：10~100。默认值：20。","type":"integer","format":"int64","required":false,"maximum":"100","minimum":"10","example":"20","default":"20"}}],"responses":{"200":{"headers":{},"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"2D69A58F-345C-4FDE-88E4-BF518948****"},"NextToken":{"description":"当请求的返回结果被截断时，您可以使用NextToken再次发起请求，获取从当前截断位置之后的内容。","type":"string","example":"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0="},"DataFlowInfo":{"type":"object","properties":{"DataFlow":{"description":"数据流动信息合集。","type":"array","items":{"type":"object","properties":{"FileSystemId":{"description":"文件系统ID。","type":"string","example":"cpfs-099394bd928c****"},"DataFlowId":{"description":"数据流动ID。","type":"string","example":"dfid-194433a5be31****"},"FsetId":{"description":"Fileset ID。","type":"string","example":"fset-1902718ea0ae****"},"Status":{"description":"数据流动状态。包括：\n\n- Starting：数据流动正在创建或启动中。\n- Running：数据流动已创建完成，正常运行中。 \n- Updating：数据流动正在发生修改，例如提升传输带宽、修改自动更新间隔时间。\n- Deleting：数据流动删除中。\n- Stopping：数据流动停止中。\n- Stopped：数据流动已停止。\n- Misconfigured：数据流动配置异常，例如源端存储无法访问，传输带宽过低无法完成自动更新。","type":"string","example":"Running"},"ErrorMessage":{"description":"错误信息。包括：\n\n- 无（默认值）：表示该数据流动状态正常。\n- SourceStorageUnreachable：未查询到源端存储的访问路径。\n- ThroughputTooLow：数据流动带宽过低。","type":"string","example":"无"},"SourceStorage":{"description":"源端存储的访问路径。格式：`<storage type>://<path>`。\n\n其中：\n\n- storage type：目前只支持OSS。\n- path：OSS的bucket名称。\n    - 仅支持小写字母、数字和短划线（-）且必须以小写字母或者数字开头和结尾。\n    - 长度为8~128个英文字符。\n    - 使用UTF-8编码。\n    - 不能以http://和https://开头。\n\n> OSS Bucket必须为在该地域已存在的Bucket。","type":"string","example":"oss://bucket1"},"SourceSecurityType":{"description":"源端存储的安全保护类型，如果源端存储必须通过安全保护访问，请指定源端存储的安全保护类型。取值：\n\n- 无（默认值）：表示源端存储不需要通过安全保护方式访问。\n- SSL：通过SSL证书保护访问。","type":"string","example":"SSL"},"Throughput":{"description":"数据流动的传输带宽上限，单位：MB/s 。取值： \n\n- 600\n- 1200\n- 1500\n\n> 数据流动的传输带宽必须小于文件系统的IO带宽。","type":"integer","format":"int64","example":"600"},"Description":{"description":"数据流动的描述。 \n\n限制：\n\n- 长度为2~128个英文或中文字符。\n- 必须以大小写字母或中文开头，不能以`http://`和`https://`开头。\n- 可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。","type":"string","example":"Bucket01数据流动"},"CreateTime":{"description":"Fileset的创建时间。\n\n执行ISO8601标准表示，返回格式：`yyyy-MM-ddTHH:mm:ssZ`。","type":"string","example":"2021-09-30T10:08:08Z"},"UpdateTime":{"description":"Fileset的最近一次更新时间。\n\n执行ISO8601标准表示，返回格式：`yyyy-MM-ddTHH:mm:ssZ`。","type":"string","example":"2021-09-30T10:08:08Z"},"AutoRefresh":{"type":"object","properties":{"AutoRefresh":{"description":"自动更新策略信息集合。\n\n>目前仅CPFS支持。","type":"array","items":{"type":"object","properties":{"RefreshPath":{"description":"自动更新目录，CPFS仅自动检查该目录下的源端数据是否发生更新并自动导入更新的数据。\n\n限制：\n\n- 长度为2~1024个字符。\n- 使用UTF-8编码。\n- 必须以/开头和结尾。\n\n> 该目录必须是CPFS上的已有目录，且必须位于开启了数据流动的Fileset中。","type":"string","example":"/prefix1/prefix2/"}}}}}},"FileSystemPath":{"description":"Fileset在CPFS文件系统中的路径。\n\n限制：\n\n- 长度为2~1024个英文或中文字符。\n- 使用UTF-8编码。\n- 必须以/开头和结尾。\n- 该目录必须是CPFS上的Fileset目录。\n>目前仅CPFS支持。","type":"string","example":"/a/b/c/"},"FsetDescription":{"description":"自动更新的描述。\n>目前仅CPFS支持。","type":"string","example":"自动更新01"},"AutoRefreshInterval":{"description":"自动更新间隔时间。每隔该时间间隔，CPFS会检查目录内是否存在数据更新，如果有数据更新，启动自动更新任务。单位：分钟。\n\n取值范围：5~526600。默认值：10。\n>目前仅CPFS支持。","type":"integer","format":"int64","example":"10"},"AutoRefreshPolicy":{"description":"自动更新策略，源端数据更新以后，数据更新导入到CPFS的策略。包括：\n\n- None：源端的数据更新不自动导入CPFS，用户可通过数据流动任务导入源端的数据更新。\n- ImportChanged：源端的数据更新自动导入CPFS。\n>目前仅CPFS支持。","type":"string","example":"None"},"SourceStoragePath":{"title":"源端存储内的访问路径。","description":"源端存储Bucket内的访问路径。\n\n> 仅支持CPFS智算版。","type":"string","deprecated":false,"required":false,"example":"/prefix/\n","maxLength":1024}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"IllegalCharacters","errorMessage":"The parameter contains illegal characters."},{"errorCode":"MissingFileSystemId","errorMessage":"FileSystemId is mandatory for this action."},{"errorCode":"InvalidFilesystemVersion.NotSupport","errorMessage":"This Api does not support this fileSystem version."}],"403":[{"errorCode":"OperationDenied.DataFlowNotSupported","errorMessage":"The operation is not supported."}],"404":[{"errorCode":"InvalidFilterValue","errorMessage":"The specified parameter Filter.1.Value is invalid."},{"errorCode":"InvalidFileSystem.NotFound","errorMessage":"The specified file system does not exist."},{"errorCode":"InvalidParameter.InvalidNextToken","errorMessage":"The specified NextToken is invaild."},{"errorCode":"InvalidFilterParam","errorMessage":"The specified Filter.N.Key is invalid."},{"errorCode":"InvalidParameter.InvalidMaxResults","errorMessage":"The specified MaxResults is invalid."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"2D69A58F-345C-4FDE-88E4-BF518948****\\\",\\n  \\\"NextToken\\\": \\\"TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0=\\\",\\n  \\\"DataFlowInfo\\\": {\\n    \\\"DataFlow\\\": [\\n      {\\n        \\\"FileSystemId\\\": \\\"cpfs-099394bd928c****\\\",\\n        \\\"DataFlowId\\\": \\\"dfid-194433a5be31****\\\",\\n        \\\"FsetId\\\": \\\"fset-1902718ea0ae****\\\",\\n        \\\"Status\\\": \\\"Running\\\",\\n        \\\"ErrorMessage\\\": \\\"无\\\",\\n        \\\"SourceStorage\\\": \\\"oss://bucket1\\\",\\n        \\\"SourceSecurityType\\\": \\\"SSL\\\",\\n        \\\"Throughput\\\": 600,\\n        \\\"Description\\\": \\\"Bucket01数据流动\\\",\\n        \\\"CreateTime\\\": \\\"2021-09-30T10:08:08Z\\\",\\n        \\\"UpdateTime\\\": \\\"2021-09-30T10:08:08Z\\\",\\n        \\\"AutoRefresh\\\": {\\n          \\\"AutoRefresh\\\": [\\n            {\\n              \\\"RefreshPath\\\": \\\"/prefix1/prefix2/\\\"\\n            }\\n          ]\\n        },\\n        \\\"FileSystemPath\\\": \\\"/a/b/c/\\\",\\n        \\\"FsetDescription\\\": \\\"自动更新01\\\",\\n        \\\"AutoRefreshInterval\\\": 10,\\n        \\\"AutoRefreshPolicy\\\": \\\"None\\\",\\n        \\\"SourceStoragePath\\\": \\\"/prefix/\\\\n\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeDataFlowsResponse>\\n    <RequestId>2D69A58F-345C-4FDE-88E4-BF518948****</RequestId>\\n    <NextToken>TGlzdFJlc291cmNlU****mVzJjE1MTI2NjY4NzY5MTAzOTEmMiZORnI4NDhVeEtrUT0=</NextToken>\\n    <DataFlowInfo>\\n        <FileSystemId>cpfs-099394bd928c****</FileSystemId>\\n        <DataFlowId>dfid-194433a5be31****</DataFlowId>\\n        <FsetId>fset-1902718ea0ae****</FsetId>\\n        <Status>Running</Status>\\n        <ErrorMessage>无</ErrorMessage>\\n        <SourceStorage>oss://bucket1</SourceStorage>\\n        <SourceSecurityType>SSL</SourceSecurityType>\\n        <Throughput>600</Throughput>\\n        <Description>Bucket01数据流动</Description>\\n        <CreateTime>2021-09-30T10:08:08Z</CreateTime>\\n        <UpdateTime>2021-09-30T10:08:08Z</UpdateTime>\\n        <AutoRefresh>\\n            <RefreshPath>/prefix1/prefix2/</RefreshPath>\\n        </AutoRefresh>\\n        <FileSystemPath>/a/b/c/</FileSystemPath>\\n        <FsetDescription>自动更新01</FsetDescription>\\n        <AutoRefreshInterval>10</AutoRefreshInterval>\\n        <AutoRefreshPolicy>None</AutoRefreshPolicy>\\n    </DataFlowInfo>\\n</DescribeDataFlowsResponse>\",\"errorExample\":\"\"}]","title":"查询数据流动列表","description":"- 仅CPFS 2.2.0及以上版本、智算CPFS 2.4.0及以上版本支持数据流动。您可以在控制台文件系统详情页面查看版本信息。\n- 筛选键（Filters）中，FsetIds、DataFlowlds、SourceStorage、ThroughputList、Status需要做全字匹配，FileSystemPath、Description、SourceStoragePath支持模糊匹配。\n- 支持组合查询。"}