{"summary":"调用CreateLiveMessageApp创建互动消息应用。","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","riskType":"none","chargeType":"free","abilityTreeCode":"198173","abilityTreeNodes":["FEATUREliveSL6Y07"]},"parameters":[{"name":"AppName","in":"query","schema":{"description":"应用名，长度2~16个字符。","type":"string","required":false,"example":"testApp"}},{"name":"AuditType","in":"query","schema":{"title":"安全审核方式：0为不开启安全审核，1为内置安全审核， 2为自定义安全审核","description":"安全审核方式，取值：\n- 0：默认值，不开启安全审核。\n- 1：内置安全审核。\n- 2：自定义安全审核。","type":"integer","format":"int32","required":false,"example":"2","enum":["0","1","2"]}},{"name":"AuditUrl","in":"query","schema":{"title":"如果是自定义安全审核，则需要提供安全审核的地址","description":"如果是自定义安全审核（AuditType=2），则需要提供安全审核的地址。安全审核地址以http://或https://开头，不包含私有IP，不允许带端口号。自定义安全审核内容格式见下文。","type":"string","required":false,"example":"http://demo.aliyundoc.com/exampleaudit"}},{"name":"EventCallbackUrl","in":"query","schema":{"title":"用户登录、登出，加入、离开群组等事件回调地址，若为空则不开启事件回调","description":"客户端登录、登出、加入、离开群组等事件回调地址，若为空则不开启事件回调。触发回调接口见[客户端接入](~~2672836~~)。事件回调地址以http://或https://开头，不包含私有IP，不允许带端口号。事件回调格式和回调鉴权逻辑见下文。","type":"string","required":false,"example":"http://demo.aliyundoc.com/examplecallback"}},{"name":"DataCenter","in":"query","schema":{"description":"数据中心，枚举值：\n- cn-shanghai：默认值，上海。\n- ap-southeast-1：新加坡。\n\n> 调用直播互动其他接口时，需要与当前创建直播互动应用的数据中心一致。\n","type":"string","required":false,"example":"cn-shanghai"}},{"name":"MsgLifeCycle","in":"query","schema":{"description":"App内群组消息的存储时效档位，取值：\n- 0：默认值，存储30天。\n- 1：存储90天。\n- 2：存储180天。","type":"integer","format":"int32","required":false,"example":"1"}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"返回参数。","type":"object","properties":{"RequestId":{"title":"Id of the request","description":"请求ID。","type":"string","example":"65EEDBEB-43FE-1E15-976F-3DDD753A****"},"AppId":{"description":"应用ID，用于后续加入群等流程。","type":"string","example":"demo"},"AppKey":{"description":"AppKey，用于生成与该AppId相关的各种操作鉴权。","type":"string","example":"**********************************"},"AppSign":{"description":"应用签名，互动消息服务SDK需要该信息。","type":"string","example":"**************************************************************************"},"DataCenter":{"description":"数据中心。","type":"string","example":"cn-shanghai"}}}}},"errorCodes":{"400":[{"errorCode":"InputInvalid","errorMessage":"%s."},{"errorCode":"ErrorInvalidAppName","errorMessage":"%s."},{"errorCode":"ErrorTooManyApps","errorMessage":"%s."},{"errorCode":"ErrorInvalidEventCallbackUrl","errorMessage":"%s."},{"errorCode":"ErrorInvalidAuditUrl","errorMessage":"%s."}],"403":[{"errorCode":"NoAuth","errorMessage":"%s."}],"404":[{"errorCode":"ResourceNotExist","errorMessage":"%s."}],"500":[{"errorCode":"ServerError","errorMessage":"%s."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"65EEDBEB-43FE-1E15-976F-3DDD753A****\\\",\\n  \\\"AppId\\\": \\\"demo\\\",\\n  \\\"AppKey\\\": \\\"**********************************\\\",\\n  \\\"AppSign\\\": \\\"**************************************************************************\\\",\\n  \\\"DataCenter\\\": \\\"cn-shanghai\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateLiveMessageAppResponse>\\n    <RequestId>65EEDBEB-43FE-1E15-976F-3DDD753A****</RequestId>\\n    <AppId>demo</AppId>\\n    <AppKey>**********************************</AppKey>\\n    <AppSign>**************************************************************************</AppSign>\\n</CreateLiveMessageAppResponse>\",\"errorExample\":\"\"}]","title":"创建互动消息应用","description":"## 使用说明\n- 调用互动消息其他接口时，需要与当前创建互动消息应用的数据中心一致。\n- 单个阿里云账号下最多可创建300个互动消息应用。\n\n## QPS限制\n本接口的单用户QPS限制为50次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。","requestParamsDescription":"### 自定义安全审核内容说明：\n- 请求协议：HTTP\n- 请求Method：POST\n- 请求示例：\n\n    ```{\n  \"content\": \"testaudit\"\n}```\n\n- 响应示例：\n\n    ```{\n  \"pass\": true,\"reason\":\"****\"    |pass为true表示通过，否则不通过。reason为不通过的原因\n}```\n\n> HTTP status code为200表示成功；非200时，认为服务不可用，降级为不再对该消息进行审核。\n\n### 事件回调\nhttp/https post， body为以下标例格式内容的\"json utf-8 string bytes\"。事件回调示例如下：\n```{\n \"transactionid\":\"A8C7B033-B339-1A58-B0E0-7B9197BA****\",\n \"appid\":\"demo\",\n \"eves\":[{\n \"uid\":\"uid1\",\n \"sid\":\"sessionid\",\n \"events\":[{\n     \"e\": 3, |事件类型，枚举。1：登录，2：登出，3：joingroup，4：leavegroup，5：客户端断网重连了\n     \"r\": 1, |登出原因，其他事件无该属性，枚举。1：正常调用，3：超时离开，4：在其他端登录\n     \"g\": \"testgroup\", |群组ID，入离群有该值；登录、登出等事件回调无该属性\n     \"gs\":[\"testgroupid\"] | 群组ID列表，客户端断网重连时，客户端加入的群组信息，其他事件无该属性\n }]\n }]\n}```\n\n> HTTP  status code为200表示成功；其他表示失败，会重试发送。\n\n### 回调鉴权说明\n服务发起请求时在HTTP(S)请求头中包含Ali-Live-Timestamp和Ali-Live-Signature字段，供回调消息接收服务端进行签名认证。Ali-Live-Signature值计算方式为：Ali-Live-Signature=sha256(CONTENT)。其中，CONTENT=回调域名+Ali-Live-Timestamp取值+鉴权Key；回调域名指配置回调URL的域名，鉴权Key指用户创建AppId时生成的AppKey。"}