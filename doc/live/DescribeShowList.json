{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","systemTags":{"operationType":"get","abilityTreeCode":"115259","abilityTreeNodes":["FEATUREliveY7SMJ1"]},"parameters":[{"name":"CasterId","in":"query","schema":{"description":"导播台ID。\n\n- 如果您通过[CreateCaster接口](~~69338~~)创建导播台，请查看CreateCaster接口调用返回的参数CasterId值。\n\n- 如果您通过直播控制台创建导播台，请通过**直播控制台** > **导播台** > **云导播台**路径查看导播台名称。\n\n> 直播控制台云导播台页面导播台列表中的导播台名称即导播台ID。","type":"string","required":true,"example":"LIVEPRODUCER_POST-cn-0pp1czt****"}}],"responses":{"200":{"schema":{"description":"查询节目单。","type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8"},"ShowList":{"description":"**ShowList**为播放列表的详细信息。\nShow为节目单中的节目详细信息，具体内容，请参见下表**Show**。","type":"string","example":"ShowList[Show1, Show2, Show3...]"},"ShowListInfo":{"description":"查询节目单。","type":"object","properties":{"CurrentShowId":{"description":"当前正在播放的节目ID。","type":"string","example":"a2b8e671-2fe5-4642-a2ec-bf93880e****"},"HighPriorityShowId":{"description":"最高优先级节目。\n\n> 此配置只能在节目单未开始启动前设置。\n","type":"string","example":"a2b8e671-2fe5-4642-a2ec-bf93880e****"},"HighPriorityShowStartTime":{"description":"最高优先级节目播放时间，格式为：yyyy-MM-dd'T'HH:mm:ss。\n\n> 此配置只能在节目单未开始启动前设置。配置完成，节目单会在最高优先级播放时间进行切播，开始播放最高优先级节目（从当前正在播放的节目切播到最高级优先节目）。\n\n\n","type":"string","example":"2021-11-23T12:30:00"},"ShowList":{"type":"object","properties":{"Show":{"description":"播放列表的详细信息。","type":"array","items":{"description":"播放列表的详细信息。","type":"object","properties":{"Duration":{"description":"单个节目播放时间长度。单位：秒。","type":"integer","format":"int64","example":"20"},"RepeatTimes":{"description":"单个节目播放的循环次数。\n\nRepeatTimes为重复次数，示例：0表示重复0次（实际播放1次），1表示重复1次（实际播放2次），以此类推。","type":"integer","format":"int32","example":"5"},"ResourceInfo":{"description":"资源信息。","type":"object","properties":{"LiveInputType":{"description":"自定义的类型标记。","type":"integer","format":"int32","example":"1"},"ResourceId":{"description":"点播文件ID。","type":"string","example":"a2b8e671-2fe5-4642-a2ec-bf93880e****"},"ResourceType":{"description":"资源素材类型。","type":"string","example":"vod"},"ResourceUrl":{"description":"资源URL。","type":"string","example":"http://**/atestObject**.m3u8"}}},"ShowId":{"description":"节目ID。","type":"string","example":"a2b8e671-2fe5-4642-a2ec-bf93880e****"},"ShowName":{"description":"播放节目名称。","type":"string","example":"liveShow****"}}}}}},"ShowListRepeatTimes":{"description":"播单默认循环次数。始终为0。","type":"integer","format":"int32","example":"0"},"TotalShowListRepeatTimes":{"description":"整个节目单播放的循环次数。","type":"integer","format":"int32","example":"1"}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidUserId.Malformed","errorMessage":"%s"},{"errorCode":"InvalidParameter.Malformed","errorMessage":"%s"},{"errorCode":"InvalidCasterId.Malformed","errorMessage":"%s"},{"errorCode":"MissingParameter","errorMessage":"%s"}],"401":[{"errorCode":"IllegalOperation","errorMessage":"%s"}],"404":[{"errorCode":"InvalidCaster.NotFound","errorMessage":"%s"},{"errorCode":"InvalidShowList.NotFound","errorMessage":"%s"},{"errorCode":"InvalidShow.NotFound","errorMessage":"%s"}],"500":[{"errorCode":"InternalError","errorMessage":"%s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8\\\",\\n  \\\"ShowList\\\": \\\"ShowList[Show1, Show2, Show3...]\\\",\\n  \\\"ShowListInfo\\\": {\\n    \\\"CurrentShowId\\\": \\\"a2b8e671-2fe5-4642-a2ec-bf93880e****\\\",\\n    \\\"HighPriorityShowId\\\": \\\"a2b8e671-2fe5-4642-a2ec-bf93880e****\\\",\\n    \\\"HighPriorityShowStartTime\\\": \\\"2021-11-23T12:30:00\\\",\\n    \\\"ShowList\\\": {\\n      \\\"Show\\\": [\\n        {\\n          \\\"Duration\\\": 20,\\n          \\\"RepeatTimes\\\": 5,\\n          \\\"ResourceInfo\\\": {\\n            \\\"LiveInputType\\\": 1,\\n            \\\"ResourceId\\\": \\\"a2b8e671-2fe5-4642-a2ec-bf93880e****\\\",\\n            \\\"ResourceType\\\": \\\"vod\\\",\\n            \\\"ResourceUrl\\\": \\\"http://**/atestObject**.m3u8\\\"\\n          },\\n          \\\"ShowId\\\": \\\"a2b8e671-2fe5-4642-a2ec-bf93880e****\\\",\\n          \\\"ShowName\\\": \\\"liveShow****\\\"\\n        }\\n      ]\\n    },\\n    \\\"ShowListRepeatTimes\\\": 0,\\n    \\\"TotalShowListRepeatTimes\\\": 1\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeShowListResponse>\\n    <ShowList>ShowList[Show1, Show2, Show3...]</ShowList>\\n    <RequestId>16A96B9A-F203-4EC5-8E43-CB92E68F4CD8</RequestId>\\n    <ShowListInfo>\\n        <HighPriorityShowStartTime>2021-11-23T12:30:00</HighPriorityShowStartTime>\\n        <TotalShowListRepeatTimes>1</TotalShowListRepeatTimes>\\n        <ShowListRepeatTimes>0</ShowListRepeatTimes>\\n        <CurrentShowId>a2b8e671-2fe5-4642-a2ec-bf93880e****</CurrentShowId>\\n        <HighPriorityShowId>a2b8e671-2fe5-4642-a2ec-bf93880e****</HighPriorityShowId>\\n        <ShowList>\\n            <ShowName>liveShow****</ShowName>\\n            <Duration>20</Duration>\\n            <RepeatTimes>5</RepeatTimes>\\n            <ShowId>a2b8e671-2fe5-4642-a2ec-bf93880e****</ShowId>\\n            <ResourceInfo>\\n                <LiveInputType>1</LiveInputType>\\n                <ResourceUrl>http://**/atestObject**.m3u8</ResourceUrl>\\n                <ResourceType>vod</ResourceType>\\n                <ResourceId>a2b8e671-2fe5-4642-a2ec-bf93880e****</ResourceId>\\n            </ResourceInfo>\\n        </ShowList>\\n    </ShowListInfo>\\n</DescribeShowListResponse>\",\"errorExample\":\"\"}]","title":"节目单查询","summary":"调用DescribeShowList查询节目单。","description":"## 使用说明\n请先添加节目后再调用本接口查询节目单。使用API添加节目，请参见[添加一个节目到节目单](~~370861~~)。\n\n## QPS限制\n本接口的单用户QPS限制为10次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。","requestParamsDescription":" ","extraInfo":"##  代码示例\n\n```\n public static DefaultAcsClient initClient(String accessKeyId, String accessKeySecret) throws ClientException {\n        String regionId = \"cn-shanghai\";  \n        DefaultProfile profile = DefaultProfile.getProfile(regionId, accessKeyId, accessKeySecret);\n        DefaultAcsClient client = new DefaultAcsClient(profile);\n        return client;\n    }\n\n\n\nprivate static CommonResponse describeShowList(DefaultAcsClient client, String casterId) throws ClientException {\n\n        CommonRequest describeShowListRequest = new CommonRequest();\n        describeShowListRequest.setSysDomain(\"live.aliyuncs.com\");\n        describeShowListRequest.setSysVersion(\"2016-11-01\");\n        describeShowListRequest.setSysAction(\"DescribeShowList\");\n        if (casterId != null) {\n            describeShowListRequest.putQueryParameter(\"CasterId\", casterId);\n        }\n        CommonResponse describeShowListRequestResponse = client.getCommonResponse(describeShowListRequest);\n        System.out.println(\"查询showList成功，返回值：\" + JSON.toJSONString(describeShowListRequestResponse));\n        return describeShowListRequestResponse;\n\n    }\n\npublic void describeShowList() throws ClientException {\n        DefaultAcsClient client = initClient(ACCESS_KEY_ID, ACCESS_KEY_SECRET);\n        CommonResponse describeShowListResponse = describeShowList(client, testCasterId);\n        String data = describeShowListResponse.getData();\n        JSONObject jsonObject = JSON.parseObject(data);\n        JSONObject showList = jsonObject.getJSONObject(\"ShowList\");\n        JSONArray shows = showList.getJSONArray(\"Shows\");\n    \n        //解析节目单信息\n        for (int i = 0; i < shows.size(); i++) {\n            JSONObject show = (JSONObject) shows.get(i);\n            String showId = show.getString(\"ShowId\");\n            String resourceType = show.getString(\"ResourceType\");\n            String resourceInfo = show.getString(\"ResourceInfo\");\n            Integer repeatTimes = show.getInteger(\"RepeatTimes\");\n            Long duration = show.getLong(\"Duration\");\n            String showInfo = String.format(\"show%d: showId: %s \\n resourceType: %s  \\n  resourceInfo: %s \\n RepeatTimes: %d \\n Duration: %d\",\n                    i + 1, showId, resourceType, resourceInfo, repeatTimes, duration);\n            System.out.println(showInfo);\n        }\n    }\n\n\n```"}