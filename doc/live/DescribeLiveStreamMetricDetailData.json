{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"none","riskType":"none","chargeType":"free"},"parameters":[{"name":"DomainName","in":"query","schema":{"description":"- 需要查询的加速域名。仅支持单个域名查询，传多个域名将报错。\n- 不指定AppName和StreamName时，按域名返回所有流粒度的数据。\n- 域名为空时，查询用户下的所有加速域名的聚合数据\n- DomainName不为空且AppName为all和StreamName为all时，返回指定加速域名下的聚合数据。","type":"string","required":false,"example":"example.com"}},{"name":"StartTime","in":"query","schema":{"description":"获取数据起始时间点，日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"example":"2015-12-10T20:00:00Z"}},{"name":"EndTime","in":"query","schema":{"description":"结束时间需大于起始时间，不能相差超过1天；日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ。","type":"string","required":true,"example":"2015-12-10T21:00:00Z"}},{"name":"AppName","in":"query","schema":{"description":"应用名称，查询指定应用流粒度的数据。\n\n>指定StreamName时，必须指定AppName。","type":"string","required":false,"example":"liveApp****"}},{"name":"StreamName","in":"query","schema":{"description":"流名称，按照设置的AppName指定StreamName，返回流粒度的数据。\n\n>指定StreamName时，必须指定AppName。","type":"string","required":false,"example":"liveStream****"}},{"name":"Protocol","in":"query","schema":{"description":"流协议名，目前支持：**flv**、**hls**、**rtmp**、**rts**和**p2p**。\n\n支持查询多个协议的数据，不同协议之间用英文逗号（,）分隔。但多个协议的数据不会聚合，按照流的粒度输出。","type":"string","required":false,"example":"flv"}},{"name":"NextPageToken","in":"query","schema":{"description":"分页查询token，每次查询最多返回5000行数据，当要查询的数据超过5000行时，响应数据会提供下次查询数据的起始索引。请求时传入该token，将从上一次查询结束的下一行继续查询未获取的数据。","type":"string","required":false,"example":"UjsM9x3aVcJi9a0-ArwJUTTC67CIBKLw*****"}}],"responses":{"200":{"schema":{"description":"查询数据。","type":"object","properties":{"DomainName":{"description":"查询的加速域名。","type":"string","example":"example.com"},"EndTime":{"description":"结束时间。","type":"string","example":"2015-12-10T21:00:00Z"},"NextPageToken":{"description":"下一次返回数据的起始索引，当查询的数据未获取完时返回该值。","type":"string","example":"UjsM9x3aVcJi9a0-ArwJUTTC67C***37C0="},"PageSize":{"description":"返回数据行数。","type":"integer","format":"int32","example":"5000"},"RequestId":{"description":"请求ID。","type":"string","example":"B955107D-E658-4E77-B913-E0AC3D31693E"},"StartTime":{"description":"开始时间。","type":"string","example":"2015-12-10T20:00:00Z"},"StreamDetailData":{"type":"object","properties":{"StreamData":{"description":"返回数据组。","type":"array","items":{"description":"返回数据组。","type":"object","properties":{"AppName":{"description":"应用名称。","type":"string","example":"app"},"Bps":{"description":"流每分钟平均带宽，单位：bps。","type":"number","format":"float","example":"423304182.66"},"Count":{"description":"流每分钟总在线人数。","type":"integer","format":"int64","example":"423304182"},"FlvBps":{"description":"FLV协议带宽，单位：bps。\n\n> 指定协议不满足时，不返回。","type":"number","format":"float","example":"454"},"FlvCount":{"description":"FLV协议在线人数。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"32"},"FlvTraffic":{"description":"FLV协议流量，单位：Byte。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"1254"},"HlsBps":{"description":"HLS协议带宽，单位：bps。\n\n> 指定协议不满足时，不返回。","type":"number","format":"float","example":"4456"},"HlsCount":{"description":"HLS协议在线人数。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"56"},"HlsTraffic":{"description":"HLS协议流量，单位：Byte。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"568"},"NewConns":{"description":"流每分钟新建连接数。","type":"string","example":"450"},"P2pBps":{"description":"P2P协议带宽，单位：bps。\n\n>指定协议不满足时，不返回.","type":"number","format":"float","example":"6845"},"P2pCount":{"description":"P2P协议在线人数。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"78"},"P2pTraffic":{"description":"P2P协议流量，单位：Byte。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"4102"},"RtmpBps":{"description":"RTMP协议带宽，单位：bps。\n\n>指定协议不满足时，不返回。","type":"number","format":"float","example":"3323"},"RtmpCount":{"description":"RTMP协议在线人数。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"63"},"RtmpTraffic":{"description":"RTMP协议流量，单位：Byte。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"5568"},"RtsBps":{"description":"RTS协议带宽，单位：bps。\n\n> 指定协议不满足时，不返回。","type":"number","format":"float","example":"2361"},"RtsCount":{"description":"RTS协议在线人数。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"89"},"RtsTraffic":{"description":"RTS协议流量，单位：Byte。\n\n> 指定协议不满足时，不返回。","type":"integer","format":"int64","example":"2322"},"StreamName":{"description":"流名称。","type":"string","example":"test.flv"},"TimeStamp":{"description":"时间片起始时刻。","type":"string","example":"2015-12-10T20:00:00Z"},"Traffic":{"description":"流每分钟总流量，单位：Byte。","type":"integer","format":"int64","example":"423304182"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidStartTime.Malformed","errorMessage":"Specified StartTime is malformed."},{"errorCode":"InvalidEndTime.Malformed","errorMessage":"Specified EndTime is malformed."},{"errorCode":"InvalidEndTime.Mismatch","errorMessage":"Specified end time does not math the specified start time."},{"errorCode":"InvalidTimeSpan","errorMessage":"The time span exceeds the limit."},{"errorCode":"InvalidPageToken","errorMessage":"The token of page is invalid."},{"errorCode":"InvalidAppName.Mismatch","errorMessage":"The AppName param must be passed."},{"errorCode":"InvalidStreamProtocol.NotSupport","errorMessage":"The specified stream protocol is not support."},{"errorCode":"InvalidStreamName.LengthTooLong","errorMessage":"The specified stream name is too long."},{"errorCode":"InvalidAppName.LengthTooLong","errorMessage":"The specified app name is too long."},{"errorCode":"InvalidTime.ValueNotSupported","errorMessage":"Specified Time is malformed."}]},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"DomainName\\\": \\\"example.com\\\",\\n  \\\"EndTime\\\": \\\"2015-12-10T21:00:00Z\\\",\\n  \\\"NextPageToken\\\": \\\"UjsM9x3aVcJi9a0-ArwJUTTC67C***37C0=\\\",\\n  \\\"PageSize\\\": 5000,\\n  \\\"RequestId\\\": \\\"B955107D-E658-4E77-B913-E0AC3D31693E\\\",\\n  \\\"StartTime\\\": \\\"2015-12-10T20:00:00Z\\\",\\n  \\\"StreamDetailData\\\": {\\n    \\\"StreamData\\\": [\\n      {\\n        \\\"AppName\\\": \\\"app\\\",\\n        \\\"Bps\\\": 423304182.66,\\n        \\\"Count\\\": 423304182,\\n        \\\"FlvBps\\\": 454,\\n        \\\"FlvCount\\\": 32,\\n        \\\"FlvTraffic\\\": 1254,\\n        \\\"HlsBps\\\": 4456,\\n        \\\"HlsCount\\\": 56,\\n        \\\"HlsTraffic\\\": 568,\\n        \\\"NewConns\\\": \\\"450\\\",\\n        \\\"P2pBps\\\": 6845,\\n        \\\"P2pCount\\\": 78,\\n        \\\"P2pTraffic\\\": 4102,\\n        \\\"RtmpBps\\\": 3323,\\n        \\\"RtmpCount\\\": 63,\\n        \\\"RtmpTraffic\\\": 5568,\\n        \\\"RtsBps\\\": 2361,\\n        \\\"RtsCount\\\": 89,\\n        \\\"RtsTraffic\\\": 2322,\\n        \\\"StreamName\\\": \\\"test.flv\\\",\\n        \\\"TimeStamp\\\": \\\"2015-12-10T20:00:00Z\\\",\\n        \\\"Traffic\\\": 423304182\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeLiveStreamMetricDetailDataResponse>\\n    <EndTime>2015-12-10T21:00:00Z</EndTime>\\n    <StartTime>2015-12-10T20:00:00Z</StartTime>\\n    <RequestId>B955107D-E658-4E77-B913-E0AC3D31693E</RequestId>\\n    <NextPageToken>UjsM9x3aVcJi9a0-ArwJUTTC67C***37C0=</NextPageToken>\\n    <PageSize>5000</PageSize>\\n    <DomainName>example.com</DomainName>\\n    <StreamDetailData>\\n        <P2pTraffic>4102</P2pTraffic>\\n        <RtmpBps>3323</RtmpBps>\\n        <HlsBps>4456</HlsBps>\\n        <P2pBps>6845</P2pBps>\\n        <StreamName>test.flv</StreamName>\\n        <P2pCount>78</P2pCount>\\n        <Traffic>423304182</Traffic>\\n        <RtmpCount>63</RtmpCount>\\n        <RtsCount>89</RtsCount>\\n        <RtsBps>2361</RtsBps>\\n        <Bps>423304192</Bps>\\n        <HlsTraffic>568</HlsTraffic>\\n        <FlvBps>454</FlvBps>\\n        <Count>423304182</Count>\\n        <RtsTraffic>2322</RtsTraffic>\\n        <RtmpTraffic>5568</RtmpTraffic>\\n        <HlsCount>56</HlsCount>\\n        <AppName>app</AppName>\\n        <FlvCount>32</FlvCount>\\n        <FlvTraffic>1254</FlvTraffic>\\n        <TimeStamp>2015-12-10T20:00:00Z</TimeStamp>\\n        <NewConns>450</NewConns>\\n    </StreamDetailData>\\n</DescribeLiveStreamMetricDetailDataResponse>\",\"errorExample\":\"\"}]","title":"查询指定域名流粒度批量数据","summary":"调用DescribeLiveStreamMetricDetailData查询指定域名流粒度批量数据，单次查询最多返回5000行数据。","description":"## 使用说明\n若指定域名第一次使用此接口进行流粒度数据的查询，需先<props=\"china\">[提交工单](https://workorder.console.aliyun.com/console.htm#/ticket/add?productCode=live&commonQuestionId=4545&isSmart=true&iatraceid=1608439120675-2a5c48de0b84805313c708&channel=selfservice)</props><props=\"intl\">[提交工单](https://workorder-intl.console.aliyun.com/?spm=5176.12818093.nav-right.dticket.6cb216d07otFWR#/ticket/createIndex)</props>进行后端配置后方可使用。\n请在工单中提供如下信息：\n- 需要查询的域名。\n- 对应域名下最高并发直播流数。\n- 每个直播流最高并发在线人数。\n\n\n>  提交工单申请后预计在一个工作日内完成审核。\n\n\n## 使用限制\n- 默认不支持HLS的在线人数统计。\n\n- 仅支持单个域名查询。\n\n- 数据最大查询跨度：24小时。\n\n- 数据最小查询粒度：1分钟。\n\n- 数据最大查询范围：31天。\n\n## QPS限制\n本接口的单用户QPS限制为10次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。\n\n"}