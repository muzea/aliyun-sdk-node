{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{},"parameters":[{"name":"DomainName","in":"query","schema":{"description":"主播流域名。","type":"string","required":true,"example":"example.com"}},{"name":"AppName","in":"query","schema":{"description":"播流所属应用名称。","type":"string","required":true,"example":"liveApp****"}},{"name":"OssEndpoint","in":"query","schema":{"description":"OSS存储的Endpoint名称。\n\n直播录制文件存储至OSS，需提前创建OSS Bucket，创建方法请参见[配置OSS](~~84932~~) 。","type":"string","required":true,"example":"learn.developer.aliyundoc.com"}},{"name":"StreamName","in":"query","schema":{"description":"播流名称。","type":"string","required":false,"example":"teststream"}},{"name":"StartTime","in":"query","schema":{"description":"录制开始时间。格式为：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n> 设置的时间必须是实际推流时间开始7天之内，只在流级别录制（StreamName不为空）有效。","type":"string","required":false,"example":"2018-04-10T09:57:21Z"}},{"name":"EndTime","in":"query","schema":{"description":"录制结束时间。格式为：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。\n\n> EndTime与StartTime相差不应超过7天，超过7天将按照7天计算。只在流级别录制（StreamName不为空）有效。","type":"string","required":false,"example":"2018-04-16T09:57:21Z"}},{"name":"OnDemand","in":"query","schema":{"description":"按需录制。取值：\n\n- **0**：关闭。\n- **1**：通过HTTP回调方式。\n- **2**：解析推流参数按需录制。\n- **7**：默认不录制，可以通过[RealTimeRecordCommand](~~85907~~)接口手动控制录制开启或停止。\n\n>当OnDemand取值为**1**时，需要先通过[AddLiveRecordNotifyConfig](~~51831~~)接口配置OnDemandUrl，否则默认不录制。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"DelayTime","in":"query","schema":{"description":"断流拼接时长。\n直播断流时长超过设定的拼接时长后，将会生成新文件，断流拼接时长支持15~21600秒。","type":"integer","format":"int32","required":false,"example":"180"}},{"name":"RecordFormat","in":"query","style":"repeatList","schema":{"description":"记录详情。","type":"array","items":{"type":"object","properties":{"CycleDuration":{"description":"周期录制时长。单位：秒。不填则默认为6小时。\n\n> - 如果在一个录制周期内，直播流发生了断流，但是在3分钟内，该直播流又正常推流，那么仍会在同一个录制文件中继续录制。\n>- 一条直播流必须断流超过3分钟，才会生成最后一个录制文件。如果您需要修改默认的3分钟断流时间，可以提交工单进行修改。关于如何提交工单，请参见[联系我们](~~464625~~)。","type":"integer","format":"int32","required":false,"example":"1"},"Format":{"description":"格式。目前支持M3U8、FLV、MP4。取值：\n\n><notice>RecordFormat和TranscodeRecordFormat两者至少需要设置一个。如果选择m3u8或cmaf格式，必须同时设置请求参数RecordFormat.N.SliceOssObjectPrefix和RecordFormat.N.SliceDuration。\n></notice>\n\n- m3u8。\n- flv。\n- mp4。\n- cmaf。","type":"string","required":false,"example":"m3u8"},"SliceDuration":{"description":"单个切片时长。单位：秒。\n\n><notice>当RecordFormat.N.Format（格式）设为m3u8或cmaf时，本参数才有效。\n></notice>\n\n不填则默认为30秒。取值范围：5s~30s。","type":"integer","format":"int32","required":false,"example":"30"}},"required":false},"required":false,"maxItems":3}},{"name":"TranscodeRecordFormat","in":"query","style":"repeatList","schema":{"description":"转码记录详情。","type":"array","items":{"type":"object","properties":{"CycleDuration":{"description":"转码流录制周期录制时长。单位：秒。不填则默认为6小时。\n","type":"integer","format":"int32","required":false,"example":"21600"},"Format":{"description":"转码流录制格式。目前支持M3U8、FLV、MP4。取值：\n><notice>这如果选择m3u8或cmaf格式，必须同时设置请求参数TranscodeRecordFormat.N.SliceOssObjectPrefix和TranscodeRecordFormat.N.SliceDuration。\n></notice>\n\n- m3u8。\n- flv。\n- mp4。\n- cmaf。","type":"string","required":false,"example":"m3u8"},"SliceDuration":{"description":"转码流录制单个切片时长，单位：秒。\n\n><notice>当TranscodeRecordFormat.N.Format（转码流录制格式）设为m3u8或cmaf时，本参数才生效。\n></notice>\n\n不填则默认为30秒。取值范围：5s~30s。","type":"integer","format":"int32","required":false,"example":"30"}},"required":false},"required":false,"maxItems":3}},{"name":"TranscodeTemplates","in":"query","style":"repeatList","schema":{"description":"转码流录制的转码模板组。","type":"array","items":{"description":"- 转码流录制的[转码模板](~~45039~~)，可进行多个设置，最多为10个。\n- 当设置TranscodeRecordFormat.N.xxx配置时，至少需要设置一个TranscodeTemplates。\n- 如需录制多个或全部的转码流，可设置TranscodeTemplates.1为*****即可。\n>TranscodeTemplates不允许传入`raw`，属于保留标识。<br>RepeatList表示为TranscodeTemplates.N中的N，可理解为递增进行多个设置，如：\nTranscodeTemplates.1=sd，\nTranscodeTemplates.2=hd。","type":"string","required":false,"example":"sd"},"required":false,"maxItems":10}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidOssEndpoint.Malformed","errorMessage":"%s"},{"errorCode":"InvalidOssBucket.Malformed","errorMessage":"Specified parameter OssBucket is not valid."},{"errorCode":"InvalidOssBucket.NotFound","errorMessage":"The parameter OssBucket does not exist."},{"errorCode":"InvalidFormat.Malformed","errorMessage":"Specified parameter Format is not valid."},{"errorCode":"InvalidCycleDuration.Malformed","errorMessage":"Specified CycleDuration Format is not valid."},{"errorCode":"InvalidSliceDuration.Malformed","errorMessage":"Specified SliceDuration Format is not valid."},{"errorCode":"InvalidTemplateLength.Malformed","errorMessage":"Specified record template length is not valid."},{"errorCode":"InvalidTemplate.ForbidRaw","errorMessage":"Template named raw is Forbidden."},{"errorCode":"MissingTemplate","errorMessage":"Template is mandatory for this action."},{"errorCode":"MissingOssObjectPrefix","errorMessage":"OssObjectPrefix is mandatory for this action."},{"errorCode":"MissingSliceOssObjectPrefix","errorMessage":"SliceOssObjectPrefix is mandatory for this action."},{"errorCode":"InvalidOssObjectPrefix.Malformed","errorMessage":"Specified parameter OssObjectPrefix is not valid."},{"errorCode":"InvalidSliceOssObjectPrefix.Malformed","errorMessage":"Specified parameter SliceOssObjectPrefix is not valid."},{"errorCode":"ConfigAlreadyExists","errorMessage":"Config has already exist."},{"errorCode":"InvalidFormat.IllegalOperation","errorMessage":"Specified parameter Format can not be multiple."},{"errorCode":"InvalidDelayTime","errorMessage":"Specified Delaytime is invalid."},{"errorCode":"Live2Vod.ConfigAlreadyExists","errorMessage":"Had live2vod record config already."},{"errorCode":"InvalidStartTime.Malformed","errorMessage":"Specified StartTime is malformed."},{"errorCode":"InvalidEndTime.Malformed","errorMessage":"Specified EndTime is malformed."},{"errorCode":"InvalidEndTime.Mismatch","errorMessage":"Specified EndTime does not math the specified StartTime or current time."},{"errorCode":"InvalidStartTime.Mismatch","errorMessage":"Specified StartTime does not math the  current time."},{"errorCode":"Forbidden","errorMessage":"Ram Permission is forbidden."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8\\\"\\n}\",\"type\":\"json\"}]","title":"更新直播录制","summary":"更新配置APP录制，输出内容保存到OSS中。","description":"## 使用说明\n先获取主播流域名，再调用本接口更新录制配置。\n## QPS限制\n本接口的单用户QPS限制为30次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。"}