{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get"},"parameters":[{"name":"ResourceIds","in":"query","schema":{"description":"播单中的点播媒资文件ID列表（目前仅支持点播视频文件）。\n最多支持三个节目，每个节目会按照列表顺序进行播放直到EndTime会自动结束。\n>- 您可以通过控制台或API接口返回参数获取视频文件ID。详情请参见[媒资管理](~~86057~~)或[获取音视频上传地址和凭证](~~55407~~)。- 在EndTime前节目如已经播完，默认会持续播放最后一个节目的最后一帧，直到播放结束。","type":"string","required":false,"example":"[\"89e02xxxxfb349axxxxa0c350d****  \",\"6ae0xxxxxb349axxxxa0c350a****\"]"}},{"name":"StartTime","in":"query","schema":{"description":"开始时间戳，单位：毫秒。","type":"integer","format":"int64","required":true,"example":"1645688994000"}},{"name":"EndTime","in":"query","schema":{"description":"结束时间戳，单位：毫秒。","type":"integer","format":"int64","required":true,"example":"1645688994000"}},{"name":"CasterConfig","in":"query","schema":{"description":"导播台配置。包含：\n\n- （必填）CasterTemplate：导播台输出分辨率。\n\n- （非必填）LiveTemplate：输出转码任务列表。\n\n>JSON格式字符串，结构体内部字段请按首字母大写，驼峰格式输入。","type":"string","required":true,"example":"{\"CasterTemplate\": \"lp_ld\",\"LiveTemplates\":[\"lhd\", \"lsd\",\"lud\"]}"}},{"name":"DomainName","in":"query","schema":{"description":"输出的播流域名。","type":"string","required":true,"example":"example.aliyundoc.com"}},{"name":"CallBackUrl","in":"query","schema":{"description":"用户回调地址。","type":"string","required":false,"example":"http://***.com/callback"}}],"responses":{"200":{"schema":{"type":"object","properties":{"CasterId":{"description":"导播台ID。\n>可作为查询导播台流地址、启动导播台、添加导播台视频资源、添加导播台布局、查询导播台布局列表、添加导播台组件和添加导播台节目单的请求参数。","type":"string","example":"b4810848-bcf9-4aef-bd4a-e6bba2d9****"},"RequestId":{"description":"请求ID。","type":"string","example":"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8"},"StreamList":{"description":"导播台输出地址列表。\n\n- videoFormat：播流地址格式。\n\n- outputStreamUrl：拉流地址。\n\n- transcodeConfig：拉流地址的转码分辨率说明。","type":"string","example":"[{\"videoFormat\":\"flv\",\"outputStreamUrl\":\"http://example.aliyundoc.com\",\"transcodeConfig\":\"original\"}]"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.PurchaseTime","errorMessage":"%s"},{"errorCode":"InvalidParameter.ExpireTime","errorMessage":"%s"},{"errorCode":"MissingParameter","errorMessage":"%s"},{"errorCode":"InvalidChargeType.Malformed","errorMessage":"%s"},{"errorCode":"InvalidChargeType.PostSupport","errorMessage":"%s"},{"errorCode":"InvalidCasterTemplate.Malformed","errorMessage":"%s"},{"errorCode":"InvalidParameter.Malformed","errorMessage":"%s"},{"errorCode":"InvalidParameter.ChargeType","errorMessage":"%s"},{"errorCode":"InvalidPeriod.Malformed","errorMessage":"%s"},{"errorCode":"InvalidClientToken.Malformed","errorMessage":"%s"},{"errorCode":"IncorrectCasterStatus","errorMessage":"%s"},{"errorCode":"InvalidCasterId.Malformed","errorMessage":"%s"},{"errorCode":"InvalidUserId.Malformed","errorMessage":"%s"},{"errorCode":"IncorrectCasterStatus.EnableChannel","errorMessage":"%s"},{"errorCode":"InvalidParameter.StartTime","errorMessage":"%s"}],"401":[{"errorCode":"CasterNumberExceed","errorMessage":"%s"},{"errorCode":"IllegalOperation","errorMessage":"%s"}],"404":[{"errorCode":"InvalidParameter.NormType","errorMessage":"%s"},{"errorCode":"InvalidConfiguration.NotFound","errorMessage":"%s"},{"errorCode":"InvalidCaster.NotFound","errorMessage":"%s"},{"errorCode":"InvalidDomainName.NotFound","errorMessage":"%s"}],"408":[{"errorCode":"CreateCaster.Timeout","errorMessage":"%s"}],"500":[{"errorCode":"InternalError","errorMessage":"%s"}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"CasterId\\\": \\\"b4810848-bcf9-4aef-bd4a-e6bba2d9****\\\",\\n  \\\"RequestId\\\": \\\"16A96B9A-F203-4EC5-8E43-CB92E68F4CD8\\\",\\n  \\\"StreamList\\\": \\\"[{\\\\\\\"videoFormat\\\\\\\":\\\\\\\"flv\\\\\\\",\\\\\\\"outputStreamUrl\\\\\\\":\\\\\\\"http://example.aliyundoc.com\\\\\\\",\\\\\\\"transcodeConfig\\\\\\\":\\\\\\\"original\\\\\\\"}]\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<InitializeAutoShowListTaskResponse>\\n<RequestId>9F6448C9-6F92-1BAC-AFDD-C308782A6573</RequestId>\\n<StreamList>\\n    <videoFormat>flv</videoFormat>\\n    <outputStreamUrl>http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****.flv</outputStreamUrl>\\n    <transcodeConfig>original</transcodeConfig>\\n</StreamList>\\n<CasterId>6277b6a3-1a40-4063-85f7-145666e3****</CasterId>\\n</InitializeAutoShowListTaskResponse>\",\"errorExample\":\"\"}]","title":"创建一个定时任务","summary":"调用InitializeAutoShowListTask创建一个定时任务。","description":"## 使用说明\n本接口支持配置定时启停一个播单定时任务，调用时请保证参数设置符合要求。\n## QPS限制\n本接口的单用户QPS限制为10次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"##  示例代码\n```\n    public void InitializeAutoShowListTask() throws ClientException {\n        CommonRequest initializeAutoShowListTaskRequest = new CommonRequest()\n        initializeAutoShowListTaskRequest.setAction(\"InitializeAutoShowListTask\");\n        initializeAutoShowListTaskRequest.setDomain(\"live.aliyuncs.com\");\n        initializeAutoShowListTaskRequest.setVersion(\"2016-11-01\");\n        JSONArray resourceIds = new JSONArray();\n        resourceIds.add(\"xxx1\");\n        initializeAutoShowListTaskRequest.putQueryParameter(\"ResourceIds\", resourceIds.toJSONString());\n        long currentTimeMillis = System.currentTimeMillis();\n        //播放一分钟时长，在30秒后启动\n        long startTime = currentTimeMillis + 30 * 1000;\n        long endTime = startTime + 1 * 60 * 1000;\n        SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n        // 时间戳转换成时间\n        String start = sdf.format(new Date(Long.parseLong(String.valueOf(startTime)))); \n        // 时间戳转换成时间\n        String end = sdf.format(new Date(Long.parseLong(String.valueOf(endTime)))); \n        System.out.printf(\"格式化结果：start %s end %s\\n\", start, end);\n        initializeAutoShowListTaskRequest.putQueryParameter(\"StartTime\", String.valueOf(startTime));\n        initializeAutoShowListTaskRequest.putQueryParameter(\"EndTime\", String.valueOf(endTime));\n        JSONObject casterConfig = new JSONObject();\n        casterConfig.put(\"CasterTemplate\", \"lp_hd\");\n        JSONArray liveTemplate = new JSONArray();\n        liveTemplate.add(\"lhd\");\n        liveTemplate.add(\"lsd\");\n        casterConfig.put(\"LiveTemplate\", liveTemplate);\n        initializeAutoShowListTaskRequest.putQueryParameter(\"CasterConfig\", casterConfig.toJSONString());\n        initializeAutoShowListTaskRequest.putQueryParameter(\"DomainName\", \"testdomainplay.alivecdn.com\");\n        DefaultAcsClient client = initClient(ACCESS_KEY_ID, ACCESS_KEY_SECRET);\n        CommonResponse commonResponse = client.getCommonResponse(initializeAutoShowListTaskRequest);\n        System.out.printf(\"Status is %s and Response is:\\n\", commonResponse.getHttpStatus());\n        JSONObject jsonObject = JSON.parseObject(commonResponse.getData());\n        System.out.println(JSON.toJSONString(jsonObject, true));\n    }\n```\n## JSON格式返回示例\n```\n{\n  \"RequestId\": \"9F6448C9-6F92-1BAC-AFDD-C308782A6573\",\n  \"StreamList\": [\n    {\n      \"videoFormat\": \"flv\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****.flv\",\n      \"transcodeConfig\": \"original\"\n    },\n    {\n      \"videoFormat\": \"rtmp\",\n      \"outputStreamUrl\": \"rtmp://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****\",\n      \"transcodeConfig\": \"original\"\n    },\n    {\n      \"videoFormat\": \"m3u8\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****.m3u8\",\n      \"transcodeConfig\": \"original\"\n    },\n    {\n      \"videoFormat\": \"flv\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lhd.flv\",\n      \"transcodeConfig\": \"lhd\"\n    },\n    {\n      \"videoFormat\": \"rtmp\",\n      \"outputStreamUrl\": \"rtmp://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lhd\",\n      \"transcodeConfig\": \"lhd\"\n    },\n    {\n      \"videoFormat\": \"m3u8\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lhd.m3u8\",\n      \"transcodeConfig\": \"lhd\"\n    },\n    {\n      \"videoFormat\": \"flv\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lsd.flv\",\n      \"transcodeConfig\": \"lsd\"\n    },\n    {\n      \"videoFormat\": \"rtmp\",\n      \"outputStreamUrl\": \"rtmp://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lsd\",\n      \"transcodeConfig\": \"lsd\"\n    },\n    {\n      \"videoFormat\": \"m3u8\",\n      \"outputStreamUrl\": \"http://example.aliyundoc.com/caster/2967b3b2b52242019c277de2a11a****_lsd.m3u8\",\n      \"transcodeConfig\": \"lsd\"\n    }\n  ],\n  \"CasterId\": \"6277b6a3-1a40-4063-85f7-145666e3****\"\n}\n```"}