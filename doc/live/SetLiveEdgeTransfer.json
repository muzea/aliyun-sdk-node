{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update"},"parameters":[{"name":"DomainName","in":"query","schema":{"description":"推流域名。直播转推流以推流的DomainName为粒度设置。一个域名只能有一个直播转推配置。","type":"string","required":true,"example":"demo.aliyundoc.com"}},{"name":"AppName","in":"query","schema":{"description":"直播流所属应用名称。支持正则表达式配置但有例外。详细信息，请参见下文中的**AppName与StreamName参数设置说明**。例如：liveApp****[1,2,3]，表示允许liveApp****1，liveApp****2，liveApp****3三个App转推。\n\n>- 此参数只对请求参数中的TargetDomainList生效。-  使用正则表达式配置`AppName`参数值时不能使用^或$字符，否则会导致转推失败。\n","type":"string","required":false,"example":"liveApp****"}},{"name":"StreamName","in":"query","schema":{"description":"推流名称。支持正则表达式配置但有例外。详细信息，请参见下文中的**AppName与StreamName参数设置说明**。例如：liveStream****[1,2,3]，表示允许liveStream****1，liveStream****2，liveStream****3三个流转推。\n\n>- 此参数只对请求参数中的TargetDomainList生效。- 使用正则表达式配置`StreamName`参数值时不能使用^或$字符，否则会导致转推失败。\n","type":"string","required":false,"example":"liveStream****"}},{"name":"TargetDomainList","in":"query","schema":{"description":"用户指定的转推目标域名列表。多个域名用英文逗号（,）分隔。请求中必须带有`TargetDomainList`和`HttpsDns`两个参数中的一个，且二者互斥。\n\n>- 当请求参数中设置了`TargetDomainList`，`AppName`和`StreamName`参数才生效。- 当请求参数中设置了`TargetDomainList`，则不能再设置`HttpsDns`参数。","type":"string","required":false,"example":"learn.aliyundoc.com,guide.aliyundoc.com"}},{"name":"HttpDns","in":"query","schema":{"description":"获取转推目标地址的HTTPDNS接口。请求中必须带有`TargetDomainList`和`HttpsDns`两个参数中的一个，且二者互斥。\n\n> 若请求参数中设置了`HttpsDns`，则不能再设置`TargetDomainList`参数，且`AppName`和`StreamName`限制不生效。\n\n直播转推对HTTPDNS接口返回的消息结构有要求，详细信息，请参见下文中的**HTTPDNS说明**。","type":"string","required":false,"example":"http://developer.aliyundoc.com"}},{"name":"TransferArgs","in":"query","schema":{"description":"推流参数是否透传。取值：\n- **yes**：推流参数透传。\n- **no**（默认值）：推流参数不透传。","type":"string","required":false,"example":"yes","default":"no","enum":["yes","no"]}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"16A96B9A-F203-4EC5-8E43-CB92E68F4CF8"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParam","errorMessage":"Parameter invalid."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to backend service exception."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"16A96B9A-F203-4EC5-8E43-CB92E68F4CF8\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<SetLiveEdgeTransferResponse>\\n    <RequestId>16A96B9A-F203-4EC5-8E43-CB92E68F4CF8</RequestId>\\n</SetLiveEdgeTransferResponse>\",\"errorExample\":\"\"}]","title":"设置直播转推配置","summary":"调用SetLiveEdgeTransfer设置直播转推配置。","description":"## 使用说明\n调用SetLiveEdgeTransfer进行的直播边缘转推配置仅对配置完成后开始的推流生效。以下为部分典型场景示例：\n\n| 场景         | 分析            | 结果   |\n| -------------- | -------------- | ------ |\n| 1. 用户在调用SetLiveEdgeTransfer之前已经开始推流。      |    此时直播边缘转推流配置不存在。     | 该推流不受SetLiveEdgeTransfer配置的影响，即直播边缘转推流不会启动。  |\n| 2. 用户中断调用SetLiveEdgeTransfer之前已经开始的推流，再重新推流。    | 此时直播边缘转推流配置已经存在。       | 重新开始的推流会按SetLiveEdgeTransfer的配置启动直播转推流。   |\n| 3. 用户在调用SetLiveEdgeTransfer之后开始推流。 | 此时直播边缘转推流配置已经存在。     |   此次推流会按SetLiveEdgeTransfer的配置启动直播转推流。 |\n\n## QPS限制\n本接口的单用户QPS限制为100次/秒。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~343507~~)。\n","requestParamsDescription":"### AppName与StreamName参数设置说明\nAppName与StreamName均不支持`^`、`$`匹配。二者之中任一取值出现`^`或`$`均会导致转推失败。\n### HTTPDNS说明\n如果SetLiveEdgeTransfer的请求参数中设置了`HttpDns`，直播转推时将访问通过`HttpDns`设置的HTTPDNS接口来获取转推目标地址。\n\n请求示例如下：\nhttp://developer.aliyundoc.com/?host={<host>}&app={<app>}&name={<name>}{<_ali_user_args>}  \n说明：在实际请求HTTPDNS接口时会把以下参数按推流URL中的信息进行替换：\n\n- {<host>}：推流域名。\n- {<app>}：直播流所属应用名称。\n- {<name>}：流名。\n- {<_ali_user_args>}：用户推流带的参数。\n\n直播转推对接口返回码和返回数据的要求如下：\n- 返回码为403表示访问失败，不需要转推。\n- 返回码为200表示访问成功，返回结果为JSON格式。结构和参数示例如下：\n\n```\n{\n    \"cdn_types\": [\n        {\n            \"name\": \"cdnA****\",\n            \"upstream_url\": \"rtmp://developer.aliyundoc.com/live/testedge****\"\n        },\n        {\n            \"name\": \"cdnB****\",\n            \"upstream_url\": \"rtmp://developer.aliyundoc.com/live/testedge****\"\n        }\n    ]\n}\n```\n| 参数         | 描述            | 示例  |\n| -------------- | -------------- | ------ |\n| name       | CDN名称，可自定义但不能重复。       | cdnA****  |\n| upstream_url       |要转推的推流地址。       |   rtmp://developer.aliyundoc.com/live/testedge****  |\n\n> - 转推域名从返回的JSON结果里面获取。如果返回多个转推域名，表示需要将原始流推到多路。\n- 返回数据结构不符合要求将导致转推失败。","responseParamsDescription":" ","extraInfo":" "}