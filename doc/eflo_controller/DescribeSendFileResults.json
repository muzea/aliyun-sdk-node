{"summary":"查询运维助手下发文件列表及状态。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"InvokeId","in":"formData","schema":{"description":"命令执行ID。","type":"string","required":true,"example":"t-bj038i0d6r8zoqo"}},{"name":"NodeId","in":"formData","schema":{"description":"节点ID","type":"string","required":false,"example":"e01-cn-zvp2tgykr08"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"title":"Id of the request","description":"Id of the request","type":"string","example":"4FD06DF0-9167-5C6F-A145-F30CA4A15D54"},"TotalCount":{"description":"命令总个数。","type":"string","example":"1"},"Invocations":{"description":"文件下发记录。","type":"object","properties":{"Invocation":{"description":"命令执行ID。","type":"array","items":{"type":"object","properties":{"FileMode":{"description":"文件的权限。","type":"string","example":"0644"},"Overwrite":{"description":"如果同名文件在目标目录已存在，是否覆盖文件。\n- true：覆盖。\n- false：不覆盖。\n\n默认值为false。","type":"boolean","example":"true"},"InvocationStatus":{"description":"文件的总下发状态。总状态取决于本次下发的全部实例的共同执行状态，可能值：\n\n- Pending：系统正在校验或下发文件。存在至少一台实例的文件下发状态为Pending，则总执行状态为Pending。\n- Running：正在实例上下发文件。存在至少一台实例的文件下发状态为Running，则总执行状态为Running。\n- Success：各个实例上的文件下发状态均为Success，则总执行状态为Success。\n- Failed：各个实例上的文件下发状态均为Failed，则总执行状态为Failed。实例上的文件下发状态一项或多项为以下状态时，返回值均为Failed状态：\n    - 指定文件参数有误，校验失败（Invalid）。\n    - 向实例下发文件失败（Aborted）。\n    - 文件在实例内创建失败（Failed）。\n    - 下发文件超时（Timeout）。\n    - 下发文件时发生异常无法继续（Error）。\n- PartialFailed：部分实例文件下发成功且部分实例下发失败。各个实例的文件下发状态均为Success或Failed，则总执行状态为PartialFailed。","type":"string","example":"Pending"},"Description":{"description":"命令描述。","type":"string","example":"描述信息。"},"ContentType":{"description":"文件内容类型。\n\nPlainText：普通文本。\nBase64：Base64编码。\n默认值为PlainText。","type":"string","example":"PlainText"},"NodeCount":{"description":"节点数量","type":"integer","format":"int32","example":"3"},"TargetDir":{"description":"目标路径。","type":"string","example":"\t/home/user"},"FileGroup":{"description":"文件的用户组。","type":"string","example":"root"},"FileOwner":{"description":"文件的用户。","type":"string","example":"root"},"Name":{"description":"文件下发名称","type":"string","example":"test"},"Content":{"description":"命令执行后的输出信息。\n\n若ContentEncoding指定PlainText，返回原始输出信息。\n若ContentEncoding指定Base64，返回Base64编码后的输出信息。","type":"string","example":"Base64"},"CreationTime":{"description":"下发创建时间","type":"string","example":"2023-04-10T10:53:46.156+08:00\n"},"InvokeNodes":{"description":"文件下发记录","type":"object","properties":{"InvokeNode":{"description":"节点文件下发记录","type":"array","items":{"type":"object","properties":{"InvocationStatus":{"description":"单台实例下发任务的状态，可能值：\n- Pending：系统正在校验或下发文件。\n- Invalid：指定文件参数有误，校验失败。\n- Running：正在实例上下发文件。\n- Aborted：向实例下发文件失败。\n- Success：文件下发完成。\n- Failed：文件在实例内创建失败。\n- Error：下发文件时发生异常无法继续。\n- Timeout：下发文件超时。","type":"string","example":"Success"},"FinishTime":{"description":"结束时间，格式：\"2020-05-22T17:04:18\"。","type":"string","example":"2023-04-10T10:53:46.156+08:00"},"NodeId":{"description":"节点id","type":"string","example":"e01-cn-9lb3c15m81j"},"ErrorInfo":{"description":"命令的下发失败或执行失败原因的详情，可能值：\n- 空：命令执行正常。\n- the specified instance does not exists：指定的实例不存在或已释放。\n- the node has released when create task：执行命令期间，该实例被释放。\n- the node is not running when create task：命令执行时，该实例不在运行中。\n- the command is not applicable：命令不适用于指定的实例。\n- the specified account does not exists：指定的账号不存在。\n- the specified directory does not exists：指定的目录不存在。\n- the cron job expression is invalid：指定的执行时间表达式不合法。\n- the aliyun service is not running on the instance：云助手Agent未运行。\n- the aliyun service in the instance does not response：云助手Agent无响应。\n- the aliyun service in the node is upgrading now：云助手Agent正在升级中。\n- the aliyun service in the node need upgrade：云助手Agent需要升级。\n- the command delivery has been timeout：发送命令超时。\n- the command execution has been timeout：命令执行超时。\n- the command execution got an exception：命令执行发生异常。\n- the command execution has been interrupted：命令执行被中断。\n- the command execution exit code is not zero：命令执行结束，退出码非0。\n- the specified instance has been released：下发文件期间，该实例被释放。","type":"string","example":"the specified instance does not exists"},"CreationTime":{"description":"文件下发任务的创建时间。","type":"string","example":"2023-02-06T07:12:50Z"},"StartTime":{"description":"开始时间","type":"string","example":"2023-03-30T16:00:00Z"},"UpdateTime":{"description":"更新时间","type":"string","example":"2023-03-30T16:00:00Z"},"ErrorCode":{"description":"文件下发的失败原因代码。可能值：\n\n空：文件下发正常。\nNodeNotExists：指定的实例不存在或已释放。\nNodeReleased：下发文件期间，该实例被释放。\nNodeNotRunning：创建下发文件任务时，该实例不在运行中。\nAccountNotExists：指定的账号不存在。\nClientNotRunning：云助手Agent未运行。\nClientNotResponse：云助手Agent无响应。\nClientIsUpgrading：云助手Agent正在升级中。\nClientNeedUpgrade：云助手Agent需要升级。\nDeliveryTimeout：发送文件超时。\nFileCreateFail：文件创建失败。\nFileAlreadyExists：相同路径下存在同名文件。\nFileContentInvalid：文件内容不合法。\nFileNameInvalid：文件名不合法。\nFilePathInvalid：文件路径不合法。\nFileAuthorityInvalid：文件权限不合法。\nUserGroupNotExists：发送文件时指定的用户组不存在。","type":"string","example":"AccountNotExists"}}}}}}}}}}}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"4FD06DF0-9167-5C6F-A145-F30CA4A15D54\\\",\\n  \\\"TotalCount\\\": \\\"1\\\",\\n  \\\"Invocations\\\": {\\n    \\\"Invocation\\\": [\\n      {\\n        \\\"FileMode\\\": \\\"0644\\\",\\n        \\\"Overwrite\\\": true,\\n        \\\"InvocationStatus\\\": \\\"Pending\\\",\\n        \\\"Description\\\": \\\"描述信息。\\\",\\n        \\\"ContentType\\\": \\\"PlainText\\\",\\n        \\\"NodeCount\\\": 3,\\n        \\\"TargetDir\\\": \\\"\\\\t/home/user\\\",\\n        \\\"FileGroup\\\": \\\"root\\\",\\n        \\\"FileOwner\\\": \\\"root\\\",\\n        \\\"Name\\\": \\\"test\\\",\\n        \\\"Content\\\": \\\"Base64\\\",\\n        \\\"CreationTime\\\": \\\"2023-04-10T10:53:46.156+08:00\\\\n\\\",\\n        \\\"InvokeNodes\\\": {\\n          \\\"InvokeNode\\\": [\\n            {\\n              \\\"InvocationStatus\\\": \\\"Success\\\",\\n              \\\"FinishTime\\\": \\\"2023-04-10T10:53:46.156+08:00\\\",\\n              \\\"NodeId\\\": \\\"e01-cn-9lb3c15m81j\\\",\\n              \\\"ErrorInfo\\\": \\\"the specified instance does not exists\\\",\\n              \\\"CreationTime\\\": \\\"2023-02-06T07:12:50Z\\\",\\n              \\\"StartTime\\\": \\\"2023-03-30T16:00:00Z\\\",\\n              \\\"UpdateTime\\\": \\\"2023-03-30T16:00:00Z\\\",\\n              \\\"ErrorCode\\\": \\\"AccountNotExists\\\"\\n            }\\n          ]\\n        }\\n      }\\n    ]\\n  }\\n}\",\"type\":\"json\"}]","title":"查询下发文件列表及状态"}