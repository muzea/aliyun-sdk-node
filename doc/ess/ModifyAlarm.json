{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"报警任务所属地域的ID。","type":"string","required":true,"example":"cn-qingdao"}},{"name":"AlarmTaskId","in":"query","schema":{"description":"报警任务ID。","type":"string","required":true,"example":"asg-bp1hvbnmkl10vll5****_f95ce797-dc2e-4bad-9618-14fee7d1****"}},{"name":"Name","in":"query","schema":{"description":"报警任务的名称。","type":"string","required":false,"example":"alarmtask****"}},{"name":"Description","in":"query","schema":{"description":"报警任务的描述。","type":"string","required":false,"example":"Test alarm task."}},{"name":"MetricName","in":"query","schema":{"description":"监控项名称。取值范围与报警任务的监控类型有关： \n\n- 当报警任务为自定义监控类型（即MetricType=custom）时，取值范围是您自有的监控项范围。\n\n- 当报警任务为系统监控类型（即MetricType=system）时，取值范围如下： \n\n    - CpuUtilization：（ECS）CPU使用率（%）。\n\n    - IntranetTx：（ECS）内网出流量（KByte/min）。\n\n    - IntranetRx：（ECS）内网入流量（KByte/min）。\n\n    - VpcInternetTx：（ECS）外网出流量（KByte/min）。\n\n    - VpcInternetRx：（ECS）外网入流量（KByte/min）。\n\n    - SystemDiskReadBps：（ECS）系统盘读BPS（Byte/s）。\n\n    - SystemDiskWriteBps：（ECS）系统盘写BPS（Byte/s）。\n\n    - SystemDiskReadOps：（ECS）系统盘读IOPS（次/s）。\n\n    - SystemDiskWriteOps：（ECS）系统盘写IOPS（次/s）。\n\n    - CpuUtilizationAgent：（Agent）CPU使用率（%）。\n\n    - GpuMemoryFreeUtilizationAgent：（Agent）GPU内存空闲率（%）。\n\n    - GpuMemoryUtilizationAgent：（Agent）GPU内存使用率（%）。\n\n    - MemoryUtilization：（Agent）内存（%）。\n\n    - LoadAverage：（Agent）系统平均负载。\n\n    - TcpConnection：（Agent）TCP总连接数（个）。\n\n    - TcpConnection：（Agent）TCP已建立连接数（个）。\n\n    - PackagesNetOut：（Agent）网卡发包数（个）。\n\n    - PackagesNetIn：（Agent）网卡收包数（个）。\n\n    - EciPodCpuUtilization：CPU使用率（%）。\n\n    - EciPodMemoryUtilization：内存（%）。\n\n更多信息，请参见[系统监控报警任务](~~74854~~)。","type":"string","required":false,"example":"MemoryUtilization"}},{"name":"MetricType","in":"query","schema":{"description":"监控项类型。取值范围：\n- system：使用云监控系统指标。\n- custom：使用上报到云监控的自定义指标。","type":"string","required":false,"example":"system","default":"system"}},{"name":"Period","in":"query","schema":{"description":"统计监控项数据的周期，单位为秒。取值范围：\n\n- 15。\n- 60。\n- 120。\n- 300。\n- 900。\n\n> 15秒的统计周期仅适合监控ECS类型伸缩组时，使用云监控（Agent开头的监控项）客户端采集的监控项指标，除此之外的其他监控项指标的统计周期可以设置为60秒、120秒、300秒和900秒。\n","type":"integer","format":"int32","required":false,"example":"300"}},{"name":"Statistics","in":"query","schema":{"description":"统计监控项数据的方法。取值范围：\n\n- Average：平均值。\n- Minimum：最小值。\n- Maximum：最大值。","type":"string","required":false,"example":"Average"}},{"name":"Threshold","in":"query","schema":{"description":"多指标报警规则中监控指标的阈值，满足阈值表达式达到指定次数即触发执行伸缩规则。","type":"number","format":"float","required":false,"example":"80"}},{"name":"ComparisonOperator","in":"query","schema":{"description":"监控项统计值与阈值的比较符，用于指定监控项统计值与阈值在什么关系下满足条件。取值范围：\n\n- 监控项统计值大于等于阈值。取值：`>=`。\n- 监控项统计值小于等于阈值。取值：`<=`。\n- 监控项统计值大于阈值。取值：`>`。\n- 监控项统计值小于阈值。取值：`<`。","type":"string","required":false,"example":">="}},{"name":"EvaluationCount","in":"query","schema":{"description":"触发执行伸缩规则需要满足阈值表达式的次数，例如，CPU使用率平均值3次的统计结果均大于等于80%。","type":"integer","format":"int32","required":false,"example":"3"}},{"name":"GroupId","in":"query","schema":{"description":"自定义监控项所属云监控应用分组的ID，仅在监控项类型为custom时需要指定该参数。","type":"integer","format":"int32","required":false,"example":"4055401"}},{"name":"Effective","in":"query","schema":{"description":"指定报警任务的生效时间段。\n\n该参数遵循Cron表达式，默认格式为`X X X X X ?`，含义如下：\n- X：一个域的占位符，依次表示秒、分钟、小时、日期和月。X可以是确定的取值，也可以是具有逻辑意义的特殊字符。X的取值范围，请参见[Cron表达式](~~25907~~)。\n\n- ？：表示不指定值。\n\n> 该参数指定值**默认为UTC+8时区**，支持在Cron表达式之前添加时区信息`TZ=+yy`来指定时区，其中y表示时区的数值。例如，`TZ=+00 * * 1-2 * * ?`表示报警任务在UTC+0时区每天01:00~02:59之间生效。\n\n取值示例及含义如下：\n\n-  `* * * * * ?  `：所有时间都生效。\n\n-  `* * 17-18 * * ? `：在UTC+8时区每天17:00~18:59之间生效。\n\n- `TZ=+00 * * 1-2 * * ?`：在UTC+0时区每天01:00~02:59之间生效。","type":"string","required":false,"example":"TZ=+00 * * 1-2 * * ?"}},{"name":"AlarmActions","in":"query","style":"repeatList","schema":{"description":"报警任务关联伸缩规则的唯一标识符的列表。","type":"array","items":{"description":"报警任务关联伸缩规则的唯一标识符的列表。","type":"string","required":false,"example":"ari:acs:ess:cn-hangzhou:140692647****:scalingrule/asr-bp163l21e07uhn****"},"required":false,"maxItems":5}},{"name":"Dimensions","in":"query","style":"repeatList","schema":{"description":"监控项关联的维度信息。","type":"array","items":{"description":"监控项关联的维度信息。","type":"object","properties":{"DimensionKey":{"description":"监控项关联的维度信息键。取值范围与报警任务的监控类型有关：\n\n- 当报警任务为自定义监控类型（即MetricType=custom）时，不限制取值范围，由您自行指定。\n\n\n- 当报警任务为系统监控类型（即MetricType=system）时，取值范围如下：\n\n    - user_id：您的账号ID。\n    - scaling_group：被监控的伸缩组。\n    - device：网卡设备的类型。\n    - state：TCP连接的状态。","type":"string","required":false,"example":"device"},"DimensionValue":{"description":"监控项关联的维度信息值，取值范围由Dimension.N.DimensionKey决定：\n\n- 当Dimension.N.DimensionKey的取值是自定义的，即报警任务是自定义监控类型（即MetricType=custom）时，该参数不限制取值范围，由您自行指定。\n\n- 当Dimension.N.DimensionKey的取值是系统指定的取值范围中的，即报警任务为系统监控类型（即MetricType=system）时，该参数取值范围如下：\n\n    - user_id：由系统自动填充。\n\n    - scaling_group：由系统自动填充。\n\n    - device：\n\n        - eth0：对于经典网络实例，eth0表示内网网卡。对于VPC实例，只存在eth0一张网卡。\n        - eth1：对于经典网络实例，eth1代表外网网卡。\n\n    - state：\n\n        - TCP_TOTAL：表示总的TCP连接数。\n        - ESTABLISHED：表示已建立的TCP连接数。","type":"string","required":false,"example":"eth0"}},"required":false},"required":false,"maxItems":5}},{"name":"Expressions","in":"query","style":"repeatList","schema":{"description":"多指标报警规则的监控指标。","type":"array","items":{"description":"多指标报警规则的监控指标。","type":"object","properties":{"MetricName":{"description":"多指标报警规则的监控指标名称。取值范围与报警任务的监控类型有关： \n\n- 当报警任务为自定义监控类型（即MetricType=custom）时，取值范围是您自有的监控项范围。\n\n- 当报警任务为系统监控类型（即MetricType=system）时，取值范围如下： \n\n    - CpuUtilization：（ECS）CPU使用率（%）。\n\n    - IntranetTx：（ECS）内网出流量（KByte/min）。\n\n    - IntranetRx：（ECS）内网入流量（KByte/min）。\n\n    - VpcInternetTx：（ECS）外网出流量（KByte/min）。\n\n    - VpcInternetRx：（ECS）外网入流量（KByte/min）。\n\n    - SystemDiskReadBps：（ECS）系统盘读BPS（Byte/s）。\n\n    - SystemDiskWriteBps：（ECS）系统盘写BPS（Byte/s）。\n\n    - SystemDiskReadOps：（ECS）系统盘读IOPS（次/s）。\n\n    - SystemDiskWriteOps：（ECS）系统盘写IOPS（次/s）。\n\n    - CpuUtilizationAgent：（Agent）CPU使用率（%）。\n\n    - GpuUtilizationAgent：（Agent）GPU使用率（%）。\n\n    - GpuMemoryFreeUtilizationAgent：（Agent）GPU内存空闲率（%）。\n\n    - GpuMemoryUtilizationAgent：（Agent）GPU内存使用率（%）。\n\n    - MemoryUtilization：（Agent）内存（%）。\n\n    - LoadAverage：（Agent）系统平均负载。\n\n    - TcpConnection：（Agent）TCP总连接数（个）。\n\n    - TcpConnection：（Agent）TCP已建立连接数（个）。\n\n    - PackagesNetOut：（Agent）网卡发包数（个）。\n\n    - PackagesNetIn：（Agent）网卡收包数（个）。\n\n    - EciPodCpuUtilization：CPU使用率（%）。\n\n    - EciPodMemoryUtilization：内存（%）。\n\n更多信息，请参见[系统监控报警任务](~~74854~~)。","type":"string","required":false,"example":"CpuUtilization"},"ComparisonOperator":{"description":"监控项统计值与阈值的比较符，用于指定监控项统计值与阈值在什么关系下满足条件。取值范围：\n\n- 监控项统计值大于等于阈值。取值：`>=`。\n- 监控项统计值小于等于阈值。取值：`<=`。\n- 监控项统计值大于阈值。取值：`>`。\n- 监控项统计值小于阈值。取值：`<`。\n\n默认值：>=。","type":"string","required":false,"example":">="},"Period":{"description":"多指标报警规则中统计监控项数据的周期，单位为秒。取值范围：\n\n- 15。\n- 60。\n- 120。\n- 300。\n- 900。\n\n>15秒的统计周期仅适合监控ECS类型伸缩组时，使用云监控（Agent开头的监控项）客户端采集的监控项指标，除此之外的其他监控项指标的统计周期可以设置为60秒、120秒、300秒和900秒。\n\n默认值：300。","type":"integer","format":"int32","required":false,"example":"300"},"Statistics":{"description":"多指标报警规则中统计监控项数据的方法。取值范围：\n\n- Average：平均值。\n- Minimum：最小值。\n- Maximum：最大值。","type":"string","required":false,"example":"Average"},"Threshold":{"description":"多指标报警规则中监控指标的阈值，满足阈值表达式达到指定次数即触发执行伸缩规则。","type":"number","format":"float","required":false,"example":"40.0"}},"required":false},"required":false,"maxItems":10}},{"name":"ExpressionsLogicOperator","in":"query","schema":{"description":"多指标报警条件之间的关系。取值范围：\n\n- `&&`：当所有监控指标都符合报警条件时，才能触发报警。即当多指标报警规则下的表达式均为`true`时，才能触发报警。\n- ``：如果其中一个指标符合报警条件，即可触发报警。\n\n默认值： `&&`。","type":"string","required":false,"example":"&&"}}],"responses":{"200":{"schema":{"type":"object","properties":{"AlarmTaskId":{"description":"报警任务ID。","type":"string","example":"asg-bp1hvbnmkl10vll5****_83948190-acdd-483f-98f7-b77f4778****"},"RequestId":{"description":"请求ID。","type":"string","example":"BACACF83-7070-4953-A8FD-D81F89F1****"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"AlarmTaskId\\\": \\\"asg-bp1hvbnmkl10vll5****_83948190-acdd-483f-98f7-b77f4778****\\\",\\n  \\\"RequestId\\\": \\\"BACACF83-7070-4953-A8FD-D81F89F1****\\\"\\n}\",\"type\":\"json\"}]","title":"修改报警任务","summary":"修改一个报警任务。","description":"- 如果您创建自定义监控类型的报警任务（MetricType=custom），您需要先将自定义监控项指标上报到云监控。具体操作，请参见[自定义监控报警任务](~~74861~~)。\n- 创建报警任务时，您需要指定监控项（MetricName），并配合维度信息（Dimension.N.DimensionKey和Dimension.N.DimensionValue），来确定伸缩组中该监控项数据的聚合范围。例如，指定user_id和scaling_group来确定聚合该用户、该伸缩组下所有ECS实例或ECI实例的监控项数据。\n    - 自定义监控报警任务（MetricType=custom）的监控项取决于您自有的监控指标。\n    - 系统监控报警任务（MetricType=system）支持的监控项的更多信息，请参见[系统监控报警任务](~~74854~~)。\n\n\n> 维度信息中，user_id和scaling_group由系统自动填充，device、state需要您手动指定。更多信息，请参见参数`Dimension.N.DimensionKey`和`Dimension.N.DimensionValue`。"}