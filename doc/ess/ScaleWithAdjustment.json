{"methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"125372","abilityTreeNodes":["FEATUREessSQIS9M"]},"parameters":[{"name":"ScalingGroupId","in":"query","schema":{"description":"伸缩组的ID。","type":"string","required":true,"docRequired":true,"example":"asg-j6c1o397427hyjdc****"}},{"name":"AdjustmentType","in":"query","schema":{"description":"伸缩活动调整方式，取值范围：\n\n- QuantityChangeInCapacity：增加或减少指定数量的ECS实例。\n- PercentChangeInCapacity：增加或减少指定比例的ECS实例。\n- TotalCapacity：将当前伸缩组的ECS实例数量调整到指定数量。","type":"string","required":true,"docRequired":true,"example":"QuantityChangeInCapacity"}},{"name":"AdjustmentValue","in":"query","schema":{"description":"伸缩活动调整值。任何情况下，单次调整的ECS实例台数都不能超过1000，否则会导致调整失败。不同调整方式对应的取值范围：\n- QuantityChangeInCapacity：-1000~1000。\n- PercentChangeInCapacity：-100~10000。\n- TotalCapacity：0~2000。","type":"integer","format":"int32","required":true,"docRequired":true,"maximum":"2147483647","minimum":"-2147483648","example":"100","isFileTransferUrl":false}},{"name":"MinAdjustmentMagnitude","in":"query","schema":{"description":"伸缩活动最小调整实例数，仅当`AdjustmentType`为`PercentChangeInCapacity`时生效。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"ClientToken","in":"query","schema":{"description":"用于保证请求的幂等性，防止重复提交请求。由客户端生成该参数值，要保证在不同请求间唯一，最大值不超过64个ASCII字符，且该参数值中不能包含非ASCII字符。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"SyncActivity","in":"query","schema":{"description":"伸缩活动同步执行开关，仅对具有期望实例数配置项的伸缩组有效。取值范围：\n\n- true：同步流程，即执行伸缩规则时会直接触发伸缩组的扩缩容活动。\n- false：异步流程，即修改伸缩组内的期望实例数时，不会立刻触发伸缩组的实际扩缩容活动，需等待期望实例数变化后，系统自动检测期望实例数与伸缩组内当前实例数不一致，才会触发扩缩容活动。\n\n> 关于期望实例数的更多信息，请参见[期望实例数](~~146231~~)。\n\n默认值：false。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"Overrides","in":"query","style":"json","schema":{"description":"ECI伸缩组扩容指定覆写参数。","type":"object","properties":{"Cpu":{"description":"实例级别vCPU大小。单位：核。","type":"number","format":"float","required":false,"example":"2"},"Memory":{"description":"实例级别内存大小。单位：GiB。","type":"number","format":"float","required":false,"example":"4"},"ContainerOverrides":{"description":"覆写容器列表参数。","type":"array","items":{"description":"覆写容器列表参数。","type":"object","properties":{"Name":{"description":"容器名称。当需要覆写容器参数时，必须指定容器名称，容器名称与伸缩配置容器名称相匹配时，方可覆写容器参数。","type":"string","required":false,"example":"container-1"},"Args":{"description":"容器启动命令对应的参数。最多10个。","type":"array","items":{"description":"容器启动命令对应的参数。最多10个。","type":"string","required":false,"example":"arg"},"required":false},"Commands":{"description":"容器启动命令。最多20个。每个命令最多包含256个字符。","type":"array","items":{"description":"容器启动命令。最多20个。每个命令最多包含256个字符。","type":"string","required":false,"example":"sleep"},"required":false},"EnvironmentVars":{"description":"环境变量的信息列表。","type":"array","items":{"description":"环境变量的信息列表。","type":"object","properties":{"Key":{"description":"环境变量名。长度为1~128个字符。格式要求：`[0-9a-zA-Z]`，以及下划线（_），不能以数字开头。","type":"string","required":false,"example":"PATH"},"Value":{"description":"环境变量值。长度为0~256位。","type":"string","required":false,"example":"/usr/local/tomcat"}},"required":false},"required":false},"Cpu":{"description":"容器vCPU核数。单位：核。","type":"number","format":"float","required":false,"example":"2"},"Memory":{"description":"容器内存大小。单位：GiB。","type":"number","format":"float","required":false,"example":"4"}},"required":false},"required":false}},"required":false}},{"name":"LifecycleHookContext","in":"query","style":"json","schema":{"description":"生命周期挂钩上下文信息。","type":"object","properties":{"DisableLifecycleHook":{"description":"伸缩活动禁用所有生命周期挂钩。取值范围：\n\n- true：禁用。\n- false：不禁用。","type":"boolean","required":false,"example":"false"},"IgnoredLifecycleHookIds":{"description":"伸缩活动禁用的生命周期挂钩ID列表。","type":"array","items":{"description":"伸缩活动禁用的生命周期挂钩ID列表。","type":"string","required":false,"example":"ash-bp14zolna43z266bq***"},"required":false}},"required":false}},{"name":"ActivityMetadata","in":"query","schema":{"description":"伸缩活动的元数据。","type":"string","required":false,"example":"{\"key\":\"value\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"ScalingActivityId":{"description":"伸缩活动的ID。","type":"string","example":"asa-bp175o6f6ego3r2j****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****"},"ActivityType":{"description":"伸缩活动的类型。\n\n当`ActivityType为CapacityChange`时，表示返回值`ScalingActivityId`对应伸缩活动仅修改伸缩组期望实例数，没有立刻执行扩缩。\n\n适用范围：期望实例数类型伸缩组。","type":"string","example":"CapacityChange"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"ScalingActivityId\\\": \\\"asa-bp175o6f6ego3r2j****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****\\\",\\n  \\\"ActivityType\\\": \\\"CapacityChange\\\"\\n}\",\"type\":\"json\"}]","title":"基于指定调整规则触发性扩缩容","summary":"区别于ExecuteScalingRule接口，您无需提前创建伸缩规则，直接调用API ScaleWithAdjustment接口快速基于指定调整规则触发弹性扩缩容。","description":"- 调用该接口前，请确保满足以下条件：\n    - 伸缩组处于Active状态。\n    - 伸缩组内没有执行中的伸缩活动。\n- 当伸缩组没有执行中的伸缩活动时，该接口可以绕过冷却时间（Cooldown）直接执行伸缩活动。\n- 如果伸缩规则需要增加的ECS实例数加上当前伸缩组的实例数（Total Capacity）大于最大实例数（MaxSize），则按Total Capacity=MaxSize执行伸缩活动。\n- 如果当前伸缩组内的实例数（Total Capacity）减去伸缩规则需要减少的ECS实例数小于最小实例数（MinSize），则按Total Capacity=MinSize执行伸缩活动。\n\n调用该接口返回成功，只是表示弹性伸缩服务接受了该接口的调用请求，可以执行伸缩活动，但不代表伸缩活动能够执行成功。您需要通过返回的`ScalingActivityId`查看该伸缩活动的执行状态。"}