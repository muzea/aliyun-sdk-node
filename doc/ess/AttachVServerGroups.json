{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"伸缩组所属地域的ID。如cn-hangzhou、cn-shanghai，更多信息，请参见[地域和可用区](~~40654~~)。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ScalingGroupId","in":"query","schema":{"description":"伸缩组的ID。","type":"string","required":true,"example":"asg-bp18p2yfxow2dloq****"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。\n\n从您的客户端生成一个参数值，确保不同请求间该参数值唯一。只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25965~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-42665544****"}},{"name":"ForceAttach","in":"query","schema":{"description":"是否将当前伸缩组内的ECS实例或ECI实例添加到新增的虚拟服务器组。取值范围：\n\n- true：添加。\n- false：不添加。\n\n默认值：false。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"VServerGroups","in":"query","style":"repeatList","schema":{"description":"伸缩组关联的虚拟服务器组的信息集合。","type":"array","items":{"description":"伸缩组关联的虚拟服务器组的信息集合。","type":"object","properties":{"VServerGroupAttributes":{"description":"虚拟服务器组属性。","type":"array","items":{"description":"虚拟服务器组属性。","type":"object","properties":{"VServerGroupId":{"description":"虚拟服务器组的ID。","type":"string","required":false,"example":"lb-bp1u7etiogg38yvwz****"},"Weight":{"description":"弹性伸缩将ECS实例或ECI实例添加到虚拟服务器组时设置的权重，取值范围：0~100。\n\n默认值：50。","type":"integer","format":"int32","required":false,"example":"100"},"Port":{"description":"弹性伸缩将ECS实例或ECI实例添加到虚拟服务器组时使用的端口号，取值范围：1~65535。","type":"integer","format":"int32","required":false,"example":"22"}},"required":false},"required":false,"maxItems":100},"LoadBalancerId":{"description":"虚拟服务器组所属负载均衡实例的ID。","type":"string","required":false,"example":"rsp-bp1jp1rge****\t\n"}},"required":false},"required":true,"maxItems":100}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****\\\"\\n}\",\"type\":\"json\"}]","title":"添加负载均衡实例下虚拟服务器组","summary":"伸缩组关联负载均衡实例（CLB）后，加入伸缩组的实例会自动添加为CLB实例的后端服务器，处理来自CLB实例转发的访问请求。当需要将不同的请求转发到不同的后端服务器上时，或需要通过域名和URL进行请求转发时，您可以调用API AttachVServerGroups来添加负载均衡实例下的一个或者多个虚拟服务器组，通过虚拟服务器组管理不同的后端服务器。","description":"- 向伸缩组添加虚拟服务器组时需要满足以下条件：\n\n    - 负载均衡实例与伸缩组必须属于同一账号。\n\n    - 负载均衡实例与伸缩组必须处于同一地域。\n\n    - 负载均衡实例必须处于运行中状态。\n\n    - 负载均衡实例至少配置有一个监听且必须开启健康检查。\n\n    - 如果负载均衡实例与伸缩组的网络类型均为VPC，必须处于同一VPC。\n\n    - 当伸缩组的网络类型为VPC，负载均衡实例的网络类型为经典网络时，如果虚拟服务器组包含VPC实例，该实例必须与伸缩组处于同一VPC。\n\n    - 待添加虚拟服务器组必须属于对应的负载均衡实例。\n\n    - 不超过伸缩组内虚拟服务器组的限额，具体限额，请参见[使用限制](~~25863~~)。\n\n- 添加伸缩组内虚拟服务器组时，需要同时指定以下属性：\n\n    - 负载均衡实例ID（LoadBalancerId）\n\n    - 虚拟服务器组ID（VServerGroupId）\n\n    - 虚拟服务器组端口号（Port）\n\n    >如果通过不同的端口号将同一虚拟服务器组添加至伸缩组，视为伸缩组内添加了多个虚拟服务器组。如果请求参数中的虚拟服务器组ID和端口号同时重复，默认使用最先配置的一组，忽略其余虚拟服务器组。"}