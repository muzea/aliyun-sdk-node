{"summary":"通过快照创建用户自定义镜像。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"write","deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"65793","abilityTreeNodes":["FEATUREswas5OS8L3"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。您可以调用[ListRegions](~~189315~~)查询可用地域。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"InstanceId","in":"query","schema":{"description":"指定的轻量应用服务器的实例ID。","type":"string","required":true,"example":"ace0706b2ac4454d984295a94213****"}},{"name":"ImageName","in":"query","schema":{"description":"自定义镜像名称。长度为2~128个英文或中文字符，必须以大小写字母或中文开头或数字开头，可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。\n默认值：空","type":"string","required":true,"example":"customImage-test"}},{"name":"SystemSnapshotId","in":"query","schema":{"description":"系统盘快照ID。","type":"string","required":false,"example":"s-acscasca****"}},{"name":"Description","in":"query","schema":{"description":"镜像描述信息。","type":"string","required":false,"example":"test"}},{"name":"DataSnapshotId","in":"query","schema":{"description":"数据盘快照ID。","type":"string","required":false,"example":"s-acscasca****"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表，最多包含20个子项。","type":"array","items":{"description":"标签。","type":"object","properties":{"Key":{"description":"为自定义镜像指定的标签键。N 的取值范围：1~20。\n\n一旦传入该值，则不允许为空字符串。最多支持 64 个字符，不能以 aliyun 和 acs:开头，不能包含 http://或者 https://。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"为自定义镜像指定的标签值。N 的取值范围：1~20。\n\n一旦传入该值，可以为空字符串。最多支持 64 个字符，不能包含 http://或者 https://。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":100}},{"name":"ResoureGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-aek2bti7cf7****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****"},"ImageId":{"description":"自定义镜像ID。","type":"string","example":"m-csaascsaccscs****"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParam.DataSnapshotIdNotFound","errorMessage":"The specified parameter  dataSnapshotId is not found."},{"errorCode":"InvalidParam.SystemSnapshotIdNotFound","errorMessage":"The specified parameter  systemSnapshotId is not found."},{"errorCode":"InvalidParam.IllegalImageName","errorMessage":"The specified parameter imageName is illegal."},{"errorCode":"ImageNameAlreadyExist","errorMessage":"The image name already exists."},{"errorCode":"CustomImageQuotaLimit","errorMessage":"The maximum number of custom image in this region is exceeded."},{"errorCode":"InvalidParam.SystemSnapshotIdNotSupport","errorMessage":"You cannot create custom images in the specified parameter system snapshotId."}],"403":[{"errorCode":"IncorrectInstanceStatus","errorMessage":"The state of the current instance does not support this operation."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"An error occurred while processing your request."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****\\\",\\n  \\\"ImageId\\\": \\\"m-csaascsaccscs****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateCustomImageResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3****</RequestId>\\n    <ImageId>m-csaascsaccscs****</ImageId>\\n</CreateCustomImageResponse>\",\"errorExample\":\"\"}]","title":"创建自定义镜像","description":"自定义镜像是您通过轻量应用服务器的快照创建的镜像。您可以通过已配置好的自定义镜像创建更多包含相同配置的轻量应用服务器，也可以将自定义镜像共享至云服务器ECS，进而通过共享镜像创建ECS实例或更换操作系统。\n关于自定义镜像的更多消息，请参见[自定义镜像概述](~~199375~~)。\n\n创建自定义镜像之前，您需要先创建轻量应用服务器的系统盘快照。具体操作，请参见[CreateSnapshot](~~190452~~)。\n\n> 如果您创建自定义镜像时需要服务器的数据盘数据，请先创建一份服务器的数据盘快照。\n\n创建自定义镜像时，您需要先阅读以下注意事项：\n\n- 创建的自定义镜像所属地域与对应的轻量应用服务器所属地域相同。\n\n- 创建的自定义镜像数量上限为已创建的服务器数量的3倍，但最多不超过15个。\n\n- 只有服务器的系统盘快照可以直接创建自定义镜像。如果您需要自定义镜像中包含服务器的数据盘数据，在创建自定义镜像的过程中，需要手动选择对应的数据盘快照。\n\n- 如果轻量应用服务器到期或者退款后释放，该服务器对应的自定义镜像也会随之释放。\n\n- 重置系统或更换镜像会清除服务器上的磁盘数据，请您根据需要做好数据备份。\n\n### QPS限制\n本接口的单用户QPS限制为10次/分钟。超过限制，API调用会被限流，这可能会影响您的业务，请合理调用。更多信息，请参见[QPS限制](~~347607~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}