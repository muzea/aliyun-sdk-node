{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"Filename","in":"formData","schema":{"description":"- 原始的文件名称。\n- 当以\"/\"结尾时，创建一个空文件夹，支持多级子文件夹。创建文件夹时，不返回文件签名，自动完成创建。","type":"string","required":true,"docRequired":true,"example":"wlop29.jpg"}},{"name":"Size","in":"formData","schema":{"description":"文件大小，单位字节。","type":"integer","format":"int64","required":true,"docRequired":true,"example":"41836"}},{"name":"SpaceId","in":"formData","schema":{"description":"服务空间ID。","type":"string","required":true,"docRequired":true,"example":"mp-0e16bb12-14af-****-b24c-5ac1a9a7bb9f"}},{"name":"ContentType","in":"formData","schema":{"description":"文件类型：.pdf .xls .xlsx .doc .docx .ppt .pptx .txt","type":"string","required":true,"docRequired":true,"example":"png"}},{"name":"FileId","in":"formData","schema":{"description":"自定义上传文件路径，支持多级目录，路径支持字母、数字、中文、横线、下横线、点符号，总长度不超过1024，必须以\"/\"开头，例如：\n`/abc/edf/hello.jpg`\n\n> - 当该文件路径已存在文件时会直接覆盖 \n> - 另外也支持传入fileId或者文件url覆盖已有文件","type":"string","required":false,"example":"/abc/edf/hello.jpg"}}],"responses":{"200":{"schema":{"type":"object","properties":{"SignUrl":{"description":"上传文件地址。","type":"string","example":"https://bsppub.oss-cn-shanghai.aliyuncs.com/FBPSBVMO-myspace/41552d60-52de-xxx-a713-43e879b0717a.JPG?OSSAccessKeyId=LTAIk****dtFueLA&Expires=1582152512&Signature=sek1B0Xm2r***tNvfX9tX%2BBJxA%3D"},"RequestId":{"description":"请求ID。","type":"string","example":"E9A50E1B-5ECE-42D4-B261-C07D1BBE68DE"},"Id":{"description":"文件唯一标识。","type":"string","example":"2fada31e-8fa5-****-b595-9698cd6b5f06"},"OssCallbackUrl":{"description":"上传结果回调地址。","type":"string","example":"https://api.next.bspapp.com/oss_upload_callback"},"Overwrite":{"description":"含义是该上传请求是否会覆盖文件。\n- true：覆盖。\n- false：不覆盖。","type":"boolean","example":"true"}}}}},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"SignUrl\\\": \\\"https://bsppub.oss-cn-shanghai.aliyuncs.com/FBPSBVMO-myspace/41552d60-52de-xxx-a713-43e879b0717a.JPG?OSSAccessKeyId=LTAIk****dtFueLA&Expires=1582152512&Signature=sek1B0Xm2r***tNvfX9tX%2BBJxA%3D\\\",\\n  \\\"RequestId\\\": \\\"E9A50E1B-5ECE-42D4-B261-C07D1BBE68DE\\\",\\n  \\\"Id\\\": \\\"2fada31e-8fa5-****-b595-9698cd6b5f06\\\",\\n  \\\"OssCallbackUrl\\\": \\\"https://api.next.bspapp.com/oss_upload_callback\\\",\\n  \\\"Overwrite\\\": true\\n}\",\"type\":\"json\"}]","title":"获取上传文件需要的签名","summary":"获取上传文件需要的签名。","responseParamsDescription":"在获取到上传文件地址 SignUrl 之后，需要使用 PUT 对该地址上传文件。 PUT请求必须在headers携带回调地址参数，该参数构造方法如下： \n- 第一步：构造字符串 ` {\"callbackUrl\":\"....\",\"callbackBody\":\"{\\\"fileId\\\":\\\"....\\\",\\\"spaceId\\\":\\\"....\\\"}\",\"callbackBodyType\":\"application/json\"}` 分别将参数 OssCallbackUrl、Id以及SpaceId替换到上面的空缺部分。\n- 第二步：对上述字符串进行 base64编码。\n- 第三步：在上传文件时添加header   `x-oss-callback`，值为第二步计算得到的字符串。\n\n><notice>请求参数ContentType也是签名计算的一部分，因此在上传文件时您需要添加header **Content-Type**，并确保值和入参一致。></notice>"}