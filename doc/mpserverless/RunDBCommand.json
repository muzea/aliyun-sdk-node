{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{},"parameters":[{"name":"SpaceId","in":"formData","schema":{"description":"服务空间ID。","type":"string","required":true,"docRequired":true,"example":"ach41172-adba-4af1-b2e5-63fc5f56a649"}},{"name":"Body","in":"formData","schema":{"description":"请求数据库时的命令，格式为 JSON String。\n\n包含两个必须字段：\n\n- command: 包含集合操作、索引操作、数据操作命令。\n\n集合操作命令：\n- collections： 获取集合列表；\n- createCollection： 创建集合，需要字段 name，待创建集合的名称；\n\n索引操作命令：\n- listIndexes： 获取索引列表，需要字段 collection；\n- createIndex： 创建索引，需要字段 collection，field，options；\n- dropIndex： 删除索引，需要 dropIndex 字段；\n\n数据操作命令：\n- 支持 find，insertOne，replaceOne等，需要collection字段、options字段，每个命令有不同的 options，具体内容参考开发指南；\n\n例如：\n- command 参数为 find 时，需要 query 字段\n- command 参数为 replaceOne 时，需要 filter 和 doc 字段","type":"string","required":true,"docRequired":true,"example":"{\"command\":\"findOne\",\"collection\":\"test_collection\",\"query\":{\"name\":\"tome\"}}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F75E60FA-7583-4E2E-AC14-6C608F89804"},"Result":{"description":"数据库返回结果，格式为 JSON String。","type":"string","example":"{\"_id\":\"5d107e5af957c439d505b95b\",\"age\":1,\"name\":\"aaaaa\",\"time\":1561362071732}"},"AffectedDocs":{"description":"此次操作影响的数据库文档数量。","type":"integer","format":"int32","example":"1"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F75E60FA-7583-4E2E-AC14-6C608F89804\\\",\\n  \\\"Result\\\": \\\"{\\\\\\\"_id\\\\\\\":\\\\\\\"5d107e5af957c439d505b95b\\\\\\\",\\\\\\\"age\\\\\\\":1,\\\\\\\"name\\\\\\\":\\\\\\\"aaaaa\\\\\\\",\\\\\\\"time\\\\\\\":1561362071732}\\\",\\n  \\\"AffectedDocs\\\": 1\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<Result>{\\\"_id\\\":\\\"5d107e5af957c439d505b95b\\\",\\\"age\\\":1,\\\"name\\\":\\\"aaaaa\\\",\\\"text\\\":\\\"Mon Jun 24 2019 15:41:11 GMT+0800 (CST)\\\",\\\"time\\\":1561362071732}</Result>\\n<HttpStatusCode>200</HttpStatusCode>\\n<RequestId>780A14D7-D478-4090-AF53-A324A60C0222</RequestId>\\n<AffectedDocs>1</AffectedDocs>\\n<Success>true</Success>\\n<Code>OK</Code>\",\"errorExample\":\"\"}]","title":"执行数据库命令","summary":"执行数据库命令。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"该接口功能较复杂，以下举例说明部分使用方法，供参考：\n\n### 获取集合列表\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"collections\\\"}\"\n}\n```\ndata结果：\n```\n{\n\t\"AffectedDocs\":5,\n\t\"RequestId\":\"4CFE11BE-536C-58DD-****\",\n\t\"Success\":true,\n\t\"Result\":\"[\\\"album\\\",\\\"photo\\\",\\\"test\\\",\\\"users\\\",\\\"wallpaper\\\"]\"\n}\n```\n\n### 创建集合\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"createCollection\\\", \\\"name\\\":\\\"mytable\\\"}\"\n}\n```\ndata结果：\n```\n{\n\t\"AffectedDocs\":1,\n\t\"RequestId\":\"042ED29A-3148-5133-ABEA-****\",\n\t\"Success\":true,\n\t\"Result\":\"[\\\"mytable\\\"]\"\n}\n```\n\n### 创建索引\n\n给集合mytable创建非唯一组合索引，按照userId升序、userName降序。\n\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"createIndex\\\", \\\"collection\\\":\\\"mytable\\\", \\\"field\\\":{\\\"userId\\\":1,\\\"userName\\\":-1}, \\\"options\\\":{\\\"name\\\":\\\"idx-userid-username\\\", \\\"unique\\\":false} }\"\n}\n```\ndata结果：\n```\n{\n\t\"AffectedDocs\":0,\n\t\"RequestId\":\"C67E7C63-EB30-506E-BF28-****\",\n\t\"Success\":true,\n\t\"Result\":\"idx-userid-username\"\n}\n```\n\n### 获取索引列表\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"listIndexes\\\", \\\"collection\\\":\\\"mytable\\\"}\"\n}\n```\ndata结果：\n```\n{\n    \"AffectedDocs\": 2,\n    \"RequestId\": \"8B8F315A-FBCA-560E-8C85-****\",\n    \"Success\": true,\n    \"Result\": \"[{\\\"v\\\":2,\\\"key\\\":{\\\"_id\\\":1},\\\"name\\\":\\\"_id_\\\",\\\"ns\\\":\\\"db_ALYEZT****_mp-c68e6766-2bda-4263-916d-****.mytable\\\"},{\\\"v\\\":2,\\\"key\\\":{\\\"userId\\\":1,\\\"userName\\\":-1},\\\"name\\\":\\\"idx-userid-username\\\",\\\"ns\\\":\\\"db_ALYEZT****_mp-c68e6766-2bda-4263-916d-****.mytable\\\"}]\"\n}\n```\n\n### 删除索引\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"dropIndex\\\", \\\"collection\\\":\\\"mytable\\\", \\\"indexName\\\":\\\"idx-userid-username\\\"}\"\n}\n```\ndata结果：\n```\n{\n    \"AffectedDocs\": 0,\n    \"RequestId\": \"1EE343F7-9DE8-534C-AE12-****\",\n    \"Success\": true\n}\n```\n\n### 插入一条数据\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"insertOne\\\", \\\"collection\\\":\\\"mytable\\\", \\\"doc\\\":{\\\"userId\\\":1, \\\"userName\\\":\\\"张三\\\"}}\"\n}\n```\ndata结果：\n```\n{\n    \"AffectedDocs\": 1,\n    \"RequestId\": \"B1032DBA-51CF-5E47-91C5-****\",\n    \"Success\": true,\n    \"Result\": \"{\\\"insertedId\\\":\\\"636496e2f43e60aba4939f5f\\\",\\\"ok\\\":1,\\\"n\\\":1}\"\n}\n```\n\n### 查询前十条数据\nparams入参：\n```\n{\n    \"SpaceId\": \"mp-c68e6766-2bda-4263-916d-****\",\n    \"Body\": \"{\\\"command\\\":\\\"find\\\", \\\"collection\\\":\\\"mytable\\\", \\\"query\\\":{}, \\\"options\\\":{\\\"skip\\\":0, \\\"limit\\\":10}}\"\n}\n```\ndata结果：\n```\n{\n    \"AffectedDocs\": 2,\n    \"RequestId\": \"AB1F4B1C-F6E6-5E49-AB4B-****\",\n    \"Success\": true,\n    \"Result\": \"[{\\\"_id\\\":\\\"636496e2f43e60aba4939f5f\\\",\\\"userName\\\":\\\"张三\\\",\\\"userId\\\":1},{\\\"_id\\\":\\\"636496ef819ce88b66f34b6d\\\",\\\"userName\\\":\\\"李四\\\",\\\"userId\\\":2}]\"\n}\n```"}