{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get","abilityTreeCode":"29292","abilityTreeNodes":["FEATUREecsPW0L5N"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"ECS实例所在的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"文件下发的资源组ID。传入该参数后，需要在下发文件时指定ResourceGroupId，支持筛选出对应的文件下发结果。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"RegionId","in":"query","schema":{"description":"ECS实例所在的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"InvokeId","in":"query","schema":{"description":"执行ID。","type":"string","required":false,"example":"f-hz0jdfwd9f****"}},{"name":"Name","in":"query","schema":{"description":"文件名称。传入该参数后，将查询该名称文件的所有的下发记录。","type":"string","required":false,"example":"test.txt"}},{"name":"InstanceId","in":"query","schema":{"description":"实例ID。传入该参数后，将查询该实例所有的文件下发记录。","type":"string","required":false,"example":"i-hz0jdfwd9f****"}},{"name":"PageNumber","in":"query","schema":{"description":"当前页码。\n\n起始值为1。\n\n默认值为1。","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"分页查询时设置的每页行数。\n\n最大值为50。\n\n默认值为10。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"MaxResults","in":"query","schema":{"description":"分页查询时每页的最大条目数。\n\n最大值为50。\n\n默认值为10。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"NextToken","in":"query","schema":{"description":"查询凭证（Token），取值为上一次API调用返回的NextToken参数值。","type":"string","required":false,"example":"AAAAAdDWBF2"}},{"name":"InvocationStatus","in":"query","schema":{"description":"文件的总下发状态。总状态取决于本次下发的全部实例的共同执行状态，取值范围：\n\n- Pending：系统正在校验或下发文件。存在至少一台实例的文件下发状态为Pending，则总执行状态为Pending。\n- Running：正在实例上下发文件。存在至少一台实例的文件下发状态为Running，则总执行状态为Running。\n- Success：下发成功。各个实例上的文件下发状态均为Success，则总执行状态为Success。\n- Failed：下发失败。各个实例上的文件下发状态均为Failed，则总执行状态为Failed。\n- PartialFailed：部分实例文件下发成功且部分实例下发失败。各个实例的文件下发状态均为Success或Failed，则总执行状态为PartialFailed。","type":"string","required":false,"example":"Success"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"description":"标签列表。","type":"object","properties":{"Key":{"description":"文件下发的标签键。N的取值范围为1~20。一旦传入该值，则不允许为空字符串。\n\n使用一个标签过滤资源，查询到该标签下的资源数量不能超过1000个。使用多个标签过滤资源，查询到同时绑定了多个标签的资源数量不能超过1000个。如果资源数量超过1000个，您需要使用[ListTagResources](~~110425~~)接口进行查询。\n\n最多支持64个字符，不能以`aliyun`或`acs:`开头，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"文件下发的标签值。N的取值范围为1~20。该值可以为空字符串。\n\n最多支持128个字符，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":21}}],"responses":{"200":{"schema":{"type":"object","properties":{"PageSize":{"description":"每页行数。","type":"integer","format":"int64","example":"10"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"PageNumber":{"description":"查询结果的当前页码。","type":"integer","format":"int64","example":"1"},"TotalCount":{"description":"脚本总个数。","type":"integer","format":"int64","example":"2"},"NextToken":{"description":"本次调用返回的查询凭证值。","type":"string","example":"AAAAAdDWBF2"},"Invocations":{"type":"object","properties":{"Invocation":{"description":"文件下发记录。","type":"array","items":{"type":"object","properties":{"CreationTime":{"description":"文件下发任务创建时间。","type":"string","example":"2019-12-20T06:15:54Z"},"InvocationStatus":{"description":"文件的总下发状态。总状态取决于本次下发的全部实例的共同执行状态，可能值：\n\n- Pending：系统正在校验或下发文件。存在至少一台实例的文件下发状态为Pending，则总执行状态为Pending。\n- Running：正在实例上下发文件。存在至少一台实例的文件下发状态为Running，则总执行状态为Running。\n- Success：各个实例上的文件下发状态均为Success，则总执行状态为Success。\n- Failed：各个实例上的文件下发状态均为Failed，则总执行状态为Failed。实例上的文件下发状态一项或多项为以下状态时，返回值均为Failed状态：\n    - 指定文件参数有误，校验失败（Invalid）。\n    - 向实例下发文件失败（Aborted）。\n    - 文件在实例内创建失败（Failed）。\n    - 下发文件超时（Timeout）。\n    - 下发文件时发生异常无法继续（Error）。\n- PartialFailed：部分实例文件下发成功且部分实例下发失败。各个实例的文件下发状态均为Success或Failed，则总执行状态为PartialFailed。","type":"string","example":"Success"},"ContentType":{"description":"文件内容类型。可能值：\n- PlainText：普通文本。\n- Base64：Base64编码。","type":"string","example":"PlainText"},"TargetDir":{"description":"目标路径。","type":"string","example":"/home/user"},"FileOwner":{"description":"文件的用户。","type":"string","example":"test"},"Description":{"description":"描述信息。","type":"string","example":"This is a test file."},"VmCount":{"description":"下发实例的数量。","type":"integer","format":"int32","example":"1"},"FileMode":{"description":"文件的权限。","type":"string","example":"777"},"FileGroup":{"description":"文件的用户组。","type":"string","example":"test"},"InvokeId":{"description":"执行ID。","type":"string","example":"f-hz0jdfwd9f****"},"Name":{"description":"文件名称。","type":"string","example":"test.txt"},"Content":{"description":"文件内容。","type":"string","example":"#!/bin/bash  echo \"Current User is :\"  echo $(ps | grep \"$$\" | awk '{print $2}')"},"Overwrite":{"description":"是否允许覆盖。","type":"string","example":"false"},"InvokeInstances":{"type":"object","properties":{"InvokeInstance":{"description":"下发文件目标实例集类型。","type":"array","items":{"type":"object","properties":{"CreationTime":{"description":"文件下发任务的创建时间。","type":"string","example":"2019-12-20T06:15:54Z"},"StartTime":{"description":"下发任务在实例中开始执行的时间。","type":"string","example":"2019-12-20T06:15:54Z"},"InvocationStatus":{"description":"单台实例下发任务的状态，可能值：\n- Pending：系统正在校验或下发文件。\n- Invalid：指定文件参数有误，校验失败。\n- Running：正在实例上下发文件。\n- Aborted：向实例下发文件失败。\n- Success：文件下发完成。\n- Failed：文件在实例内创建失败。\n- Error：下发文件时发生异常无法继续。\n- Timeout：下发文件超时。","type":"string","example":"Success"},"FinishTime":{"description":"下发任务的结束时间。","type":"string","example":"2019-12-20T06:15:54Z"},"UpdateTime":{"description":"任务状态的更新时间。","type":"string","example":"2019-12-20T06:15:54Z"},"ErrorInfo":{"description":"文件下发的失败或执行失败原因详情。可能值：\n\n- 空：文件下发正常。\n- the specified instance does not exists：指定的实例不存在或已释放。\n- the specified instance has been released.：下发文件期间，该实例被释放。\n- the instance is not running when create task：创建下发文件任务时，该实例不在运行中。\n- the specified account does not exists：指定的账号不存在。\n- the aliyun service is not running on the instance：云助手Agent未运行。\n- the aliyun service in the instance does not response：云助手Agent无响应。\n- the aliyun service in the instance is upgrading now：云助手Agent正在升级中。\n- the aliyun service in the instance need upgrade：云助手Agent需要升级。\n- the command delivery has been timeout：下发文件超时。\n- the file creation is failed due to unknown error：文件创建失败。\n- the authority of file is invalid：文件权限不合法。\n- File content is empty：文件内容为空。\n- the content of file is invalid：文件内容不合法。\n- File already exists：相同路径下存在同名文件。\n- File name is invalid：文件名不合法。\n- File path is invalid：文件路径不合法。\n- Owner not exists：用户不存在。\n- Group not exists：用户组不存在。\n- Mode is invalid：文件权限设置不合法。","type":"string","example":"the instance is not running when create task"},"ErrorCode":{"description":"文件下发的失败原因代码。可能值：\n\n- 空：文件下发正常。\n- InstanceNotExists：指定的实例不存在或已释放。\n- InstanceReleased：下发文件期间，该实例被释放。\n- InstanceNotRunning：创建下发文件任务时，该实例不在运行中。\n- AccountNotExists：指定的账号不存在。\n- ClientNotRunning：云助手Agent未运行。\n- ClientNotResponse：云助手Agent无响应。\n- ClientIsUpgrading：云助手Agent正在升级中。\n- ClientNeedUpgrade：云助手Agent需要升级。\n- DeliveryTimeout：发送文件超时。\n- FileCreateFail：文件创建失败。\n- FileAlreadyExists：相同路径下存在同名文件。\n- FileContentInvalid：文件内容不合法。\n- FileNameInvalid：文件名不合法。\n- FilePathInvalid：文件路径不合法。\n- FileAuthorityInvalid：文件权限不合法。\n- UserGroupNotExists：发送文件时指定的用户组不存在。","type":"string","example":"InstanceNotExists"},"InstanceId":{"description":"实例ID。","type":"string","example":"i-uf614fhehhz****"}}}}}},"Tags":{"type":"object","properties":{"Tag":{"description":"文件下发的标签信息。","type":"array","items":{"description":"文件下发的标签信息。","type":"object","properties":{"TagKey":{"description":"文件下发的标签键。","type":"string","example":"owner"},"TagValue":{"description":"文件下发的标签值。","type":"string","example":"zhangsan"}}}}}}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"RegionId.ApiNotSupported","errorMessage":"The api is not supported in this region."},{"errorCode":"NumberExceed.Tags","errorMessage":"The Tags parameter number is exceed."},{"errorCode":"MissingParameter.TagKey","errorMessage":"You must specify Tag.N.Key."},{"errorCode":"Duplicate.TagKey","errorMessage":"The Tag.N.Key contain duplicate key."},{"errorCode":"InvalidTagKey.Malformed","errorMessage":"The specified Tag.n.Key is not valid."},{"errorCode":"InvalidTagValue.Malformed","errorMessage":"The specified Tag.n.Value is not valid."},{"errorCode":"InvalidParam.PageNumber","errorMessage":"The specified parameter is invalid."},{"errorCode":"InvalidParam.PageSize","errorMessage":"The specified parameter is invalid."},{"errorCode":"InvalidParameter.NextToken","errorMessage":"The specified parameter NextToken is not valid."},{"errorCode":"InvalidParameter.MaxResults","errorMessage":"The specified parameter MaxResults is not valid."}],"403":[{"errorCode":"Operation.Forbidden","errorMessage":"The operation is not permitted."}],"404":[{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The RegionId provided does not exist in our records."}],"500":[{"errorCode":"InternalError.Dispatch","errorMessage":"An error occurred when you dispatched the request."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageSize\\\": 10,\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"TotalCount\\\": 2,\\n  \\\"NextToken\\\": \\\"AAAAAdDWBF2\\\",\\n  \\\"Invocations\\\": {\\n    \\\"Invocation\\\": [\\n      {\\n        \\\"CreationTime\\\": \\\"2019-12-20T06:15:54Z\\\",\\n        \\\"InvocationStatus\\\": \\\"Success\\\",\\n        \\\"ContentType\\\": \\\"PlainText\\\",\\n        \\\"TargetDir\\\": \\\"/home/user\\\",\\n        \\\"FileOwner\\\": \\\"test\\\",\\n        \\\"Description\\\": \\\"This is a test file.\\\",\\n        \\\"VmCount\\\": 1,\\n        \\\"FileMode\\\": \\\"777\\\",\\n        \\\"FileGroup\\\": \\\"test\\\",\\n        \\\"InvokeId\\\": \\\"f-hz0jdfwd9f****\\\",\\n        \\\"Name\\\": \\\"test.txt\\\",\\n        \\\"Content\\\": \\\"#!/bin/bash  echo \\\\\\\"Current User is :\\\\\\\"  echo $(ps | grep \\\\\\\"$$\\\\\\\" | awk '{print $2}')\\\",\\n        \\\"Overwrite\\\": \\\"false\\\",\\n        \\\"InvokeInstances\\\": {\\n          \\\"InvokeInstance\\\": [\\n            {\\n              \\\"CreationTime\\\": \\\"2019-12-20T06:15:54Z\\\",\\n              \\\"StartTime\\\": \\\"2019-12-20T06:15:54Z\\\",\\n              \\\"InvocationStatus\\\": \\\"Success\\\",\\n              \\\"FinishTime\\\": \\\"2019-12-20T06:15:54Z\\\",\\n              \\\"UpdateTime\\\": \\\"2019-12-20T06:15:54Z\\\",\\n              \\\"ErrorInfo\\\": \\\"the instance is not running when create task\\\",\\n              \\\"ErrorCode\\\": \\\"InstanceNotExists\\\",\\n              \\\"InstanceId\\\": \\\"i-uf614fhehhz****\\\"\\n            }\\n          ]\\n        },\\n        \\\"Tags\\\": {\\n          \\\"Tag\\\": [\\n            {\\n              \\\"TagKey\\\": \\\"owner\\\",\\n              \\\"TagValue\\\": \\\"zhangsan\\\"\\n            }\\n          ]\\n        }\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeSendFileResultsResponse>\\n    <TotalCount>1</TotalCount>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <PageSize>10</PageSize>\\n    <PageNumber>1</PageNumber>\\n    <Invocations>\\n        <Invocation>\\n            <FileMode>0644</FileMode>\\n            <Overwrite>false</Overwrite>\\n            <InvocationStatus>Success</InvocationStatus>\\n            <Description>This is a test file.</Description>\\n            <ContentType>PlainText</ContentType>\\n            <VmCount>1</VmCount>\\n            <TargetDir>/home/user</TargetDir>\\n            <FileGroup>test</FileGroup>\\n            <FileOwner>test</FileOwner>\\n            <InvokeInstances>\\n                <InvokeInstance>\\n                    <InvocationStatus>Success</InvocationStatus>\\n                    <FinishTime>2020-09-11T08:30:55Z</FinishTime>\\n                    <InstanceId>i-bp1hsglsw****</InstanceId>\\n                    <ErrorInfo/>\\n                    <CreationTime>2020-09-11T08:30:55Z</CreationTime>\\n                    <StartTime>2020-09-11T08:30:55Z</StartTime>\\n                    <UpdateTime>2020-09-11T08:30:55Z</UpdateTime>\\n                    <ErrorCode/>\\n                </InvokeInstance>\\n            </InvokeInstances>\\n            <Name>test.txt</Name>\\n            <Content>ZWNobyBoZWxsbw==</Content>\\n            <CreationTime>2020-09-11T08:30:55Z</CreationTime>\\n            <InvokeId>f-hz0vk9****</InvokeId>\\n        </Invocation>\\n    </Invocations>\\n</DescribeSendFileResultsResponse>\",\"errorExample\":\"\"}]","title":"查询云助手下发文件列表及状态","summary":"调用DescribeSendFileResults查询云助手下发文件列表及状态。","description":"## 接口说明：\n- 当您下发文件后，不代表文件一定成功下发。您需要通过接口返回值查看实际下发结果，并以实际输出结果为准。\n- 您可以查询最近6周的下发记录。\n- 支持以下两种方式查看返回数据：\n    - 方式一：分页查询首页时，仅需设置`MaxResults`以限制返回信息的条目数，返回结果中的`NextToken`将作为查询后续页的凭证。查询后续页时，将`NextToken`参数设置为上一次返回结果中获取到的`NextToken`作为查询凭证，并设置`MaxResults`限制返回条目数。\n    - 方式二：通过`PageSize`设置单页返回的条目数，再通过`PageNumber`设置页码。以上两种方式只能任选其中之一。如果设置了`MaxResults`或`NextToken`参数，则请求参数`PageSize`和`PageNumber`将失效，且返回数据中的`TotalCount`无效。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}