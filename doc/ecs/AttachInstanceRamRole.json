{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"28791","abilityTreeNodes":["FEATUREecsDXRH67"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"RamRoleName","in":"query","schema":{"description":"实例RAM角色名称。您可以使用RAM API [ListRoles](~~28713~~)查询您已创建的实例RAM角色。","type":"string","required":true,"example":"testRamRoleName"}},{"name":"InstanceIds","in":"query","schema":{"description":"实例ID。取值可以由多个实例ID组成一个JSON数组，最多支持100个ID，ID之间用半角逗号（,）隔开。","type":"string","required":true,"example":"[“i-bp14ss25xca5ex1u****”, “i-bp154z5o1qjalfse****”, “i-bp10ws62o04ubhvi****”…]"}},{"name":"Policy","in":"query","schema":{"description":"权限策略。长度为1~1024个字符。为一台或多台ECS实例授予实例RAM角色时，可以指定一个额外的权限策略，以进一步限制RAM角色的权限。更多信息，请参见[权限策略概览](~~93732~~)。\n","type":"string","required":false,"example":"{\"Statement\": [{\"Action\": [\"*\"],\"Effect\": \"Allow\",\"Resource\": [\"*\"]}],\"Version\":\"1\"}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RamRoleName":{"description":"实例RAM角色的名称。","type":"string","example":"testRamRoleName"},"RequestId":{"description":"请求ID。","type":"string","example":"D9553E4C-6C3A-4D66-AE79-9835AF705639"},"TotalCount":{"description":"授予的实例RAM角色总个数。","type":"integer","format":"int32","example":"1"},"FailCount":{"description":"授予实例RAM角色的失败个数。","type":"integer","format":"int32","example":"0"},"AttachInstanceRamRoleResults":{"type":"object","properties":{"AttachInstanceRamRoleResult":{"description":"由实例RAM角色类型（AttachInstanceRamRoleResult）组成的信息集。","type":"array","items":{"type":"object","properties":{"Code":{"description":"判断是否成功授予实例RAM角色。返回值为200表示成功授予，返回其他值表示授予失败，失败原因参见错误码。","type":"string","example":"200"},"Message":{"description":"判断是否成功授予实例RAM角色。返回值为Success表示成功授予，返回其他值表示授予失败，失败原因参见错误码。","type":"string","example":"success"},"InstanceId":{"description":"实例ID。","type":"string","example":"i-bp10ws62o04ubhvi****"},"Success":{"description":"是否成功授予实例RAM角色。","type":"boolean","example":"true"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidInstanceIds.Malformed","errorMessage":"The specified instanceIds are not valid."}],"403":[{"errorCode":"InvalidNetworkType.MismatchRamRole","errorMessage":"Ram role cannot be applied to instances of Classic network type."},{"errorCode":"InvalidUser.PassRoleForbidden","errorMessage":"The RAM user does not have the privilege to pass a RAM role."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified instanceId does not exist."},{"errorCode":"InvalidRamRole.NotFound","errorMessage":"The specified RAMRoleName does not exist."},{"errorCode":"InvalidRamRole.NotEcsRole","errorMessage":"The specified ram role is not authorized for ecs, please check your role policy."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RamRoleName\\\": \\\"testRamRoleName\\\",\\n  \\\"RequestId\\\": \\\"D9553E4C-6C3A-4D66-AE79-9835AF705639\\\",\\n  \\\"TotalCount\\\": 1,\\n  \\\"FailCount\\\": 0,\\n  \\\"AttachInstanceRamRoleResults\\\": {\\n    \\\"AttachInstanceRamRoleResult\\\": [\\n      {\\n        \\\"Code\\\": \\\"200\\\",\\n        \\\"Message\\\": \\\"success\\\",\\n        \\\"InstanceId\\\": \\\"i-bp10ws62o04ubhvi****\\\",\\n        \\\"Success\\\": true\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"D9553E4C-6C3A-4D66-AE79-9835AF705639\\\",\\n    \\\"AttachInstanceRamRoleResults\\\": {\\n        \\\"AttachInstanceRamRoleResult\\\": [\\n            {\\n                \\\"Message\\\": \\\"success\\\",\\n                \\\"InstanceId\\\": \\\"i-instance1\\\",\\n                \\\"Code\\\": \\\"200\\\"\\n            }\\n        ]\\n    },\\n    \\\"TotalCount\\\": 1,\\n    \\\"FailCount\\\": 0,\\n    \\\"RamRoleName\\\": \\\"RamRoleTest\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<AttachInstanceRamRoleResponse>\\n    <RequestId>E6352369-5C2B-41CD-AB50-471550C8F674</RequestId>\\n    <AttachInstanceRamRoleResults>\\n        <AttachInstanceRamRoleResult>\\n             <InstanceId>i-bp10ws62o04ubhvi****</InstanceId>\\n             <Code>200</Code>\\n             <Message>success</Message>\\n        </AttachInstanceRamRoleResult>\\n    </AttachInstanceRamRoleResults>\\n    <TotalCount>1</TotalCount>\\n    <FailCount>0</FailCount>\\n    <RamRoleName>testRamRoleName</RamRoleName>\\n</AttachInstanceRamRoleResponse>\",\"errorExample\":\"<AttachInstanceRamRoleResponse>\\n    <RequestId>E6352369-5C2B-41CD-AB50-471550C8F674</RequestId>\\n    <AttachInstanceRamRoleResults>\\n        <AttachInstanceRamRoleResult>\\n             <InstanceId>i-instance1</InstanceId>\\n             <Code>200</Code>\\n             <Message>success</Message>\\n        </AttachInstanceRamRoleResult>\\n    </AttachInstanceRamRoleResults>\\n    <TotalCount>1</TotalCount>\\n    <FailCount>0</FailCount>\\n    <RamRoleName>RamRoleTest</RamRoleName>\\n</AttachInstanceRamRoleResponse>\"}]","title":"为实例授予RAM角色","summary":"调用AttachInstanceRamRole为一台或多台ECS实例授予实例RAM角色。如果实例已有RAM角色，则报错提示您不能附加新的角色。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}