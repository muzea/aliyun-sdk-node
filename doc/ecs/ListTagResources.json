{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get","abilityTreeCode":"29301","abilityTreeNodes":["FEATUREecsDXRH67"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"资源所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"RegionId","in":"query","schema":{"description":"资源所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"NextToken","in":"query","schema":{"description":"下一个查询开始Token。","type":"string","required":false,"example":"caeba0bbb2be03f84eb48b699f0a4883"}},{"name":"ResourceType","in":"query","schema":{"description":"资源类型定义。取值范围：\n\n- instance：ECS实例。\n- disk：磁盘。\n- snapshot：快照。\n- image：镜像。\n- securitygroup：安全组。\n- volume：存储卷。\n- eni：弹性网卡。\n- ddh：专有宿主机。\n- ddhcluster：专有宿主机集群。\n- keypair：SSH密钥对。\n- launchtemplate：启动模板。\n- reservedinstance：预留实例券。\n- snapshotpolicy：自动快照策略。\n- elasticityassurance：弹性保障。\n- capacityreservation：容量预定。\n- command：云助手命令。\n- invocation：云助手命令执行或文件下发结果。\n- activation：云助手托管实例激活码。\n- managedinstance：云助手托管实例。","type":"string","required":true,"example":"instance"}},{"name":"ResourceId","in":"query","style":"repeatList","schema":{"description":"ECS资源ID。N的取值范围为1~50。","type":"array","items":{"description":"ECS资源ID。N的取值范围为1~50。","type":"string","required":false,"example":"i-bp1j6qtvdm8w0z1o****"},"required":false,"example":"i-bp1j6qtvdm8w0z1o****","maxItems":51}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"description":"标签列表。","type":"object","properties":{"Key":{"description":"精确查找ECS资源时使用的标签键。标签键长度的取值范围为1~128。N的取值范围为1~20。\n\n`Tag.N`参数使用说明：\n\n- 方式一：用于精确查找绑定了指定标签的ECS资源，由一个键值对组成。\n\n    - 仅指定`Tag.N.Key`时，则返回关联该标签键的所有资源。\n\n    - 仅指定`Tag.N.Value`，则报错`InvalidParameter.TagValue`。\n\n    - 同时指定多个标签键值对时，仅同时满足所有标签键值对的ECS资源会被查找到。\n\n- 方式二：用于查询非默认资源组内的资源信息。`Key`的取值固定为`acs:rm:rgId`，对应的`Value`取值为资源组ID。\n\n    - 如果`Key`取值为`acs:rm:rgId`，则`Value`的取值只能是非默认资源组ID。如果指定的资源组ID为默认资源组，则会返回错误信息。\n\n    - 如果`Key`取值为`acs:rm:rgId`，则不支持再指定其他标签键值对。如果通过多个`Tag.N`参数同时查询资源组和标签对应的资源，则会返回错误信息。\n\n \n","type":"string","required":false,"example":"TestKey"},"Value":{"description":"精确查找ECS资源时使用的标签值。标签值长度的取值范围为1~128。N的取值范围为1~20。\n\n> 当`Key=acs:rm:rgId`时，该参数只能传入资源组ID，且资源组ID不能为默认资源组。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":21}},{"name":"TagFilter","in":"query","style":"repeatList","schema":{"description":"Tag过滤规则。","type":"array","items":{"description":"Tag过滤规则。","type":"object","properties":{"TagValues":{"description":"模糊查找ECS资源时使用的标签值。标签值长度的取值范围为1~128。N的取值范围为1~5。具体的参数说明请参见`TagFilter.N.TagKey`参数描述。","type":"array","items":{"description":"模糊查找ECS资源时使用的标签值。标签值长度的取值范围为1~128。N的取值范围为1~5。具体的参数说明请参见`TagFilter.N.TagKey`参数描述。","type":"string","required":false,"example":"TestTagFilter"},"required":false,"example":"TestTagFilter","maxItems":5},"TagKey":{"description":"模糊查找ECS资源时使用的标签键。标签键长度的取值范围为1~128。N的取值范围为1~5。\n\n `TagFilter.N`用于模糊查找绑定了指定标签的ECS资源，由一个键和一个或多个值组成。模糊查询可能会有2秒延时，仅支持模糊过滤后资源数小于等于5000的情况。\n\n- 通过标签键（`TagFilter.N.TagKey`）模糊查找ECS资源时，标签值（`TagFilter.N.TagValues.N`）必须为空。例如，模糊搜索标签键为`environment`的ECS资源时，`TagFilter.1.TagKey`可以设置为`env*`（前缀匹配的模糊搜索方式）、`*env*`（两边匹配的模糊搜索方式）或者`env`（精确搜索方式），而`TagFilter.1.TagValues`必须为空。\n\n- 通过标签值（`TagFilter.N.TagValues.N`）模糊查找ECS资源时，标签键（`TagFilter.N.TagKey`）必须设置为精确值。例如，模糊搜索标签键为`env`，标签值为`product`的ECS资源时，`TagFilter.1.TagKey`必须精确设置为`env`，`TagFilter.1.TagValues.1`可以设置为`proc*`（前缀匹配的模糊搜索方式）、`*proc*`（两边匹配的模糊搜索方式）或者`proc`（精确搜索方式）。同一个`TagKey`下只能用同一种搜索方式，如果设置了多个不同的搜索方式，则以第一个方式为准。\n\n- 标签键之间为交集关系，即仅同时满足您指定的所有标签键的ECS资源才会被查找到。\n\n- 同一标签键下的标签值之间为并集关系，即满足您为该标签键指定的任一标签值的ECS资源均会被查找到。\n\n> `TagFilter.N`与`Tag.N`参数不能同时使用，否则会返回错误信息。","type":"string","required":false,"example":"env"}},"required":false},"required":false,"maxItems":5}}],"responses":{"200":{"schema":{"type":"object","properties":{"NextToken":{"description":"下一个查询开始Token。","type":"string","example":"caeba0bbb2be03f84eb48b699f0a4883"},"RequestId":{"description":"请求ID。","type":"string","example":"484256DA-D816-44D2-9D86-B6EE4D5BA78C"},"TagResources":{"type":"object","properties":{"TagResource":{"description":"由资源及其标签组成的集合，包含了资源ID、资源类型和标签键值等信息。","type":"array","items":{"type":"object","properties":{"TagValue":{"description":"标签值。","type":"string","example":"TestValue"},"ResourceType":{"description":"资源类型。可能值：\n\n- instance：ECS实例。\n- disk：磁盘。\n- snapshot：快照。\n- image：镜像。\n- securitygroup：安全组。\n- volume：存储卷。\n- eni：弹性网卡。\n- ddh：专有宿主机。\n- ddhcluster：专有宿主机集群。\n- keypair：SSH密钥对。\n- launchtemplate：启动模板。\n- reservedinstance：预留实例券。\n- snapshotpolicy：自动快照策略。\n- elasticityassurance：弹性保障。\n- capacityreservation：容量预定。\n- command：云助手命令。\n- invocation：云助手命令执行结果。\n- activation：云助手托管实例激活码。\n- managedinstance：云助手托管实例。","type":"string","example":"instance"},"ResourceId":{"description":"资源ID。","type":"string","example":"i-bp1j6qtvdm8w0z1o****"},"TagKey":{"description":"标签键。","type":"string","example":"TestKey"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidDefaultResourceGroup.NotSupported","errorMessage":"The specified parameter Tag is not support for default resource group."},{"errorCode":"InvalidTag.NotSupported","errorMessage":"You can only specify Tag for either resource tag or resource group."},{"errorCode":"NumberExceed.ResourceIds","errorMessage":"The ResourceIds parameter's number is exceed , Valid : 50."},{"errorCode":"NumberExceed.Tags","errorMessage":"The Tags parameter's number is exceed , Valid : 20."},{"errorCode":"Duplicate.TagKey","errorMessage":"The Tag.N.Key contain duplicate key."},{"errorCode":"InvalidTagKey.Malformed","errorMessage":"The specified Tag.n.Key is not valid."},{"errorCode":"InvalidTagValue.Malformed","errorMessage":"The specified Tag.n.Value is not valid."},{"errorCode":"OperationDenied.QuotaExceed","errorMessage":"The quota of tags on resource is beyond permitted range."},{"errorCode":"InvalidTag.Mismatch","errorMessage":"The specified Tag.n.Key and Tag.n.Value are not match."},{"errorCode":"InvalidTagCount","errorMessage":"The specified tags are beyond the permitted range."},{"errorCode":"Invalid.Scope","errorMessage":"The specified scope is invalid."},{"errorCode":"InvalidTags.MalFormed","errorMessage":"The tags must be empty, when the tagFilters is not empty."}],"403":[{"errorCode":"PermissionDenied.TagOwnerBid","errorMessage":"The specified operator not have permission to set TagOwnerBid value."},{"errorCode":"PermissionDenied.TagOwnerUid","errorMessage":"The specified operator not have permission to set TagOwnerUid value."},{"errorCode":"PermissionDenied.Scope","errorMessage":"The specified operator not have permission to set Scope value."},{"errorCode":"InvalidResourceId.NotSupported","errorMessage":"The specified ResourceId does not support tagging."},{"errorCode":"NoPermission.Tag","errorMessage":"The operator is not permission for the tag."},{"errorCode":"BothEmpty.TagsAndResources","errorMessage":"The specified Tags and ResourcesIds are not allow to both empty."},{"errorCode":"PermissionDenied.TagsFuzzyQuery","errorMessage":"The specified operator has not permission to query fuzzy tags."},{"errorCode":"NumberExceed.TagValues","errorMessage":"The number of the specified TagValues is beyond permitted range, the max is 5."},{"errorCode":"InvalidFilter.Malformed","errorMessage":"The specified Filter is not valid."},{"errorCode":"InvalidTagFilter.Malformed","errorMessage":"The specified TagFilter is not valid."},{"errorCode":"Invalid.NextToken","errorMessage":"The specified NextToken is not valid."}],"404":[{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The RegionId provided does not exist in our records."},{"errorCode":"MissingParameter.ResourceIds","errorMessage":"The parameter - ResourceIds.N should not be null."},{"errorCode":"MissingParameter.TagOwnerUid","errorMessage":"The parameter - TagOwnerUid should not be null."},{"errorCode":"MissingParameter.TagOwnerBid","errorMessage":"The parameter - TagOwnerBid should not be null."},{"errorCode":"MissingParameter.ResourceType","errorMessage":"The parameter - ResourceType should not be null."},{"errorCode":"MissingParameter.Tags","errorMessage":"The parameter - Tags should not be null."},{"errorCode":"MissingParameter.RegionId","errorMessage":"The parameter - RegionId should not be null."},{"errorCode":"InvalidResourceId.NotFound","errorMessage":"The specified ResourceIds are not found in our records."},{"errorCode":"InvalidResourceType.NotFound","errorMessage":"The ResourceType provided does not exist in our records."}],"500":[{"errorCode":"ServiceUnavailable","errorMessage":"The service is unavailable, please try again later."},{"errorCode":"InternalError","errorMessage":"The process of creating snapshot has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"NextToken\\\": \\\"caeba0bbb2be03f84eb48b699f0a4883\\\",\\n  \\\"RequestId\\\": \\\"484256DA-D816-44D2-9D86-B6EE4D5BA78C\\\",\\n  \\\"TagResources\\\": {\\n    \\\"TagResource\\\": [\\n      {\\n        \\\"TagValue\\\": \\\"TestValue\\\",\\n        \\\"ResourceType\\\": \\\"instance\\\",\\n        \\\"ResourceId\\\": \\\"i-bp1j6qtvdm8w0z1o****\\\",\\n        \\\"TagKey\\\": \\\"TestKey\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ListTagResourcesResponse>\\n    <TagResources>\\n        <TagResource>\\n            <ResourceType>instance</ResourceType>\\n            <TagValue>TestValue</TagValue>\\n            <ResourceId>i-bp1j6qtvdm8w0z1o****</ResourceId>\\n            <TagKey>TestKey</TagKey>\\n        </TagResource>\\n    </TagResources>\\n    <RequestId>DE65F6B7-7566-4802-9007-96F2494AC512</RequestId>\\n</ListTagResourcesResponse>\",\"errorExample\":\"\"}]","title":"查询资源已经绑定的标签列表","summary":"查询一个或多个ECS资源已经绑定的标签列表。","description":"## 接口说明\n\n请求中至少指定以下任一参数，以确定查询对象。\n\n- `ResourceId.N`\n- `Tag.N`（`Tag.N.Key`与`Tag.N.Value`）\n- `TagFilter.N`\n\n同时指定下列参数时，返回结果中仅包含同时满足这两个条件的ECS资源。\n\n- `Tag.N`和`ResourceId.N`\n- `TagFilter.N`和`ResourceId.N`","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}