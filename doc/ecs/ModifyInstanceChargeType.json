{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update","abilityTreeCode":"29072","abilityTreeNodes":["FEATUREecs7AL3YP"]},"parameters":[{"name":"InstanceIds","in":"query","schema":{"description":"实例ID。取值可以由多台实例ID组成一个JSON数组，最多支持20个ID，ID之间用半角逗号（,）隔开。","type":"string","required":true,"docRequired":true,"example":"[\"i-bp67acfmxazb4p****\",\"i-bp67acfmxazb4d****\"]"}},{"name":"RegionId","in":"query","schema":{"description":"实例所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"docRequired":true,"example":"cn-hangzhou"}},{"name":"Period","in":"query","schema":{"description":"包年包月续费时长。如果ECS实例的宿主机为专有宿主机DDH，则取值范围不能超过专有宿主机的订阅时长。取值范围：\n\n<props=\"china\">\n- `PeriodUnit=Week`时，`Period`取值：1、2、3、4。\n- `PeriodUnit=Month`时，`Period`取值：1、2、3、4、5、6、7、8、9、12、24、36、48、60。\n\n</props>\n<props=\"intl\">`PeriodUnit=Month`时，`Period`取值：1、2、3、4、5、6、7、8、9、12。</props>\n","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"PeriodUnit","in":"query","schema":{"description":"续费时长的时间单位，即参数`Period`的单位。取值范围：\n\n<props=\"china\">\n- Week：周。\n- Month：月。\n\n</props>\n<props=\"intl\">Month：月。</props>\n\n默认值为Month。","type":"string","required":false,"example":"Month"}},{"name":"IncludeDataDisks","in":"query","schema":{"description":"是否将实例挂载的所有按量付费数据盘一起转换为包年包月数据盘。\n\n默认值为false。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"DryRun","in":"query","schema":{"description":"是否只预检此次请求。取值范围：\n\n- true：发送检查请求，不会查询资源状况。检查项包括AccessKey是否有效、RAM用户的授权情况和是否填写了必需参数。如果检查不通过，则返回对应错误。如果检查通过，会返回错误码`DryRunOperation`。\n\n- false：发送正常请求，通过检查后返回2XX的HTTP状态码并直接查询资源状况。\n\n默认值为false。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"AutoPay","in":"query","schema":{"description":"是否自动支付。取值范围：\n\n- true：自动支付。您需要确保账户余额充足，如果账户余额不足会生成异常订单，只能作废订单。\n\n- false：只生成订单不扣费。\n\n默认值为true。\n\n> 如果您的支付方式余额不足，可以将参数AutoPay设置为false，此时会生成未支付订单，您可以登录ECS管理控制台自行支付。","type":"boolean","required":false,"example":"false","default":"true"}},{"name":"InstanceChargeType","in":"query","schema":{"description":"实例需要修改的目标计费方式。取值范围：\n\n- PrePaid：将按量付费实例转换为包年包月实例。\n\n- PostPaid：将包年包月实例转换为按量付费实例。\n\n默认值为PrePaid。","type":"string","required":false,"example":"PrePaid","default":"PrePaid"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"IsDetailFee","in":"query","schema":{"description":"包年包月转换为按量计费时，是否返回订单费用详情。\n\n默认值为false。","type":"boolean","required":false,"example":"false","default":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"OrderId":{"description":"生成的订单ID。","type":"string","example":"20413515388****"},"RequestId":{"description":"请求ID。","type":"string","example":"B61C08E5-403A-46A2-96C1-F7B1216DB10C"},"FeeOfInstances":{"type":"object","properties":{"FeeOfInstance":{"description":"订单费用详情。","type":"array","items":{"type":"object","properties":{"InstanceId":{"description":"实例ID。","type":"string","example":"i-bp67acfmxazb4p****"},"Currency":{"description":"账单费用货币单位。\n\n中国站：CNY。\n\n国际站：USD。","type":"string","example":"CNY"},"Fee":{"description":"费用数值。","type":"string","example":"0"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"InvalidInstance.UnpaidOrder","errorMessage":"%s"},{"errorCode":"Throttling","errorMessage":"Request was denied due to request throttling, try again later."},{"errorCode":"InstanceHasProcessingConvertOrder","errorMessage":"%s"},{"errorCode":"InvalidParameter.InstanceIds","errorMessage":"The specified InstanceIds are invalid."},{"errorCode":"InvalidParameter","errorMessage":"%s"},{"errorCode":"InvalidStatus.ValueNotSupported","errorMessage":"%s"},{"errorCode":"InvalidInstanceChargeType.ValueNotSupported","errorMessage":"%s"},{"errorCode":"InvalidSpotStrategy","errorMessage":"The specified spotStrategy is not valid."},{"errorCode":"ExpiredInstance","errorMessage":"The specified instance has expired."},{"errorCode":"InstancesIdQuotaExceed","errorMessage":"The maximum number of Instances is exceeded."},{"errorCode":"InvalidClientToken.ValueNotSupported","errorMessage":"The ClientToken provided is invalid."},{"errorCode":"InvalidInternetChargeType.ValueNotSupported","errorMessage":"%s"},{"errorCode":"ReleaseTimeHaveBeenSet","errorMessage":"The specified instance has been set released time."},{"errorCode":"QuotaExceed.AfterpayInstance","errorMessage":"The maximum number of Pay-As-You-Go instances is exceeded: %s."},{"errorCode":"InvalidParameter.Bandwidth","errorMessage":"%s"},{"errorCode":"QuotaExceed.RufundVcpu","errorMessage":"The maximum number of refund vcpu is exceeded: %s."},{"errorCode":"InvalidPeriod.UnitMismatch","errorMessage":"The specified Period must be correlated with the PeriodUnit."},{"errorCode":"InvalidImageType.NotSupported","errorMessage":"%s"},{"errorCode":"InvalidPeriod.ExceededDedicatedHost","errorMessage":"Instance expired date can't exceed dedicated host expired date."},{"errorCode":"InvalidMarketImageChargeType.NotSupport","errorMessage":"The specified chargeType of marketImage is unsupported."},{"errorCode":"InvalidSystemDiskCategory.ValueNotSupported","errorMessage":"%s"},{"errorCode":"InvalidAccountStatus.PayAmountLimitExceeded","errorMessage":"Your account is being restricted, due to no default payment method is set or you has not being authorized."},{"errorCode":"InvalidInstance.NotFoundSystemDisk","errorMessage":"The specified instance has no system disk."},{"errorCode":"AccountForbidden.ProductCreationLimited","errorMessage":"The commodity must be officially operated by Aliyun and in pay-as-you-go billing method."},{"errorCode":"Invalid.PrivatePoolOptions.MatchCriteria","errorMessage":"Target mode does not support this operation."},{"errorCode":"InvalidPeriod","errorMessage":"The specified period is not valid."},{"errorCode":"DISK_IN_DEDICATED_BLOCK_STORAGE_CLUSTER","errorMessage":"The disk in dedicated block storage cluster is not allowed to do this operation."},{"errorCode":"NoPermission.Price","errorMessage":"The operation requires price permission. Please either apply for permission from your main account, or set the parameter AutoPay as true."},{"errorCode":"NoPermission.Refund","errorMessage":"The operation requires refund permission. Please apply for permission from your main account."}],"403":[{"errorCode":"InvalidInstance.TempBandwidthUpgrade","errorMessage":"Cannot switch to Pay-As-You-Go during the period of temporary bandwidth upgrade."},{"errorCode":"InvalidInstanceType.ValueNotSupported","errorMessage":"The specified InstanceType does not exist or beyond the permitted range."},{"errorCode":"InstanceType.Offline","errorMessage":"%s"},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"Account.Arrearage","errorMessage":"Your account has an outstanding payment."},{"errorCode":"InvalidParameter.NotMatch","errorMessage":"%s"},{"errorCode":"InvalidAction","errorMessage":"%s"},{"errorCode":"QuotaExceed.PostPaidDisk","errorMessage":"Living postPaid disks quota exceeded."},{"errorCode":"ImageNotSupportInstanceType","errorMessage":"The specified instanceType is not supported by instance with marketplace image."},{"errorCode":"InvalidInstanceType.PhasedOut","errorMessage":"This instanceType is no longer offered."},{"errorCode":"InvalidPeriod.ExceededDedicatedHost","errorMessage":"Instance expired date can't exceed dedicated host expired date."},{"errorCode":"RealNameAuthenticationError","errorMessage":"Your account has not passed the real-name authentication yet."},{"errorCode":"InvalidOperation.NotSupport","errorMessage":"Instance on dedicated host not support modify charge type."},{"errorCode":"QuotaExceed.ElasticQuota","errorMessage":"No additional quota is available for the specified ECS instance type."},{"errorCode":"PeriodNotSupported.InstanceOnManagedPrivateSpace","errorMessage":"The instance on ManagedPrivateSpace is not supported to modify chargeType."},{"errorCode":"UnsupportedIspChargeType","errorMessage":"%s"}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified instanceId does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error, exception or failure."},{"errorCode":"InvalidInstanceType.ValueUnauthorized","errorMessage":"The specified InstanceType is not authorized."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"OrderId\\\": \\\"20413515388****\\\",\\n  \\\"RequestId\\\": \\\"B61C08E5-403A-46A2-96C1-F7B1216DB10C\\\",\\n  \\\"FeeOfInstances\\\": {\\n    \\\"FeeOfInstance\\\": [\\n      {\\n        \\\"InstanceId\\\": \\\"i-bp67acfmxazb4p****\\\",\\n        \\\"Currency\\\": \\\"CNY\\\",\\n        \\\"Fee\\\": \\\"0\\\"\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ModifyInstanceChargeTypeResponse>\\n    <OrderId>20413515388****</OrderId>\\n    <RequestId>B61C08E5-403A-46A2-96C1-F7B1216DB10C</RequestId>\\n    <FeeOfInstances>\\n        <InstanceId>i-bp67acfmxazb4p****</InstanceId>\\n        <Currency>CNY</Currency>\\n        <Fee>0</Fee>\\n    </FeeOfInstances>\\n</ModifyInstanceChargeTypeResponse>\",\"errorExample\":\"\"}]","title":"修改付费实例类型","summary":"调用ModifyInstanceChargeType更换一台或者多台ECS实例的计费方式。支持在按量付费实例和包年包月实例间相互转换，同时可以将实例挂载的所有按量付费云盘转换为包年包月云盘。","description":"请确保在使用该接口前，您已充分了解<props=\"china\">[云服务器ECS](https://www.aliyun.com/price/product#/ecs/detail)</props><props=\"intl\">[云服务器ECS](https://www.alibabacloud.com/product/ecs#pricing)</props>的计费方式和产品定价。</props>\n\n调用该接口时，您需要注意：\n\n- 目标实例的状态必须为**运行中**（`Running`）或者**已停止**（`Stopped`），并且无欠费的情况下才能修改计费方式。\n- 更换计费方式后，默认自动扣费。您需要确保账户余额充足，否则会生成异常订单，此时只能作废订单。如果您的账户余额不足，可以将参数`AutoPay`置为`false`，此时会生成正常的未支付订单，您可以登录[ECS管理控制台](https://ecs.console.aliyun.com/)支付。\n- **包年包月转按量付费**：\n    - 是否支持包年包月转按量付费功能，是根据您的云服务器使用情况而定的。\n<props=\"china\">\n    - 包年包月实例转按量实例的时候，新计费方式将覆盖实例的整个生命周期。您会收到修改前后的实例计费的价格差退款，退还到您的原付款渠道中，已使用的代金券将不退回。更多信息，请参见[退款规则](~~116043~~)。\n</props>\n<props=\"intl\">\n    - 包年包月实例转按量实例的时候，新计费方式将覆盖实例的整个生命周期。您会收到修改前后的实例计费的价格差退款，退还到您的原付款渠道中，已使用的代金券将不退回。\n</props>\n    - **退款规则**：您在一个月内能自由操作的退款额度有限且不累计，消耗完退款额度后，只能等待次月转换计费方式。一次转换计费消耗的退款额度公式为**vCPU数 \\*（退款天数*24±浮动小时数）**。\n- **按量付费转包年包月**：\n    - 支持将实例挂载的所有按量付费数据盘同时转换为包年包月数据盘。\n    - 如果按量付费实例已经设置了释放时间，则不能调用该接口。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}