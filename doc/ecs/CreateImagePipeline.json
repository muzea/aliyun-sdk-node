{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create","abilityTreeCode":"65905","abilityTreeNodes":["FEATUREecs4FTFEV"]},"parameters":[{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"description":"标签列表。","type":"object","properties":{"Key":{"description":"标签键。N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以`aliyun`和`acs:`开头，不能包含`http://`或者`https://`。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"标签值。N的取值范围：1~20。一旦传入该值，可以为空字符串。最多支持128个字符，不能以`acs:`开头，不能包含`http://`或者`https://`。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":20}},{"name":"RegionId","in":"query","schema":{"description":"所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"企业资源组ID。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"AddAccount","in":"query","style":"repeatList","schema":{"description":"目标镜像共享的阿里云账号ID。N的取值范围：1~20。","type":"array","items":{"description":"目标镜像共享的阿里云账号ID。N的取值范围：1~20。","type":"integer","format":"int64","required":false,"example":"1234567890"},"required":false,"example":"1234567890","maxItems":21}},{"name":"ToRegionId","in":"query","style":"repeatList","schema":{"description":"目标镜像待分发的地域列表。N的取值范围：1~20。\n\n不设置参数值时，默认只在当前地域创建镜像。","type":"array","items":{"description":"目标镜像待分发的地域列表。N的取值范围：1~20。\n\n不设置参数值时，默认只在当前地域创建镜像。","type":"string","required":false,"example":"cn-hangzhou"},"required":false,"example":"cn-hangzhou","maxItems":21}},{"name":"RegionId","in":"query","schema":{"description":"所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"企业资源组ID。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"BaseImageType","in":"query","schema":{"description":"源镜像类型。取值范围：\n\n- IMAGE：镜像。\n- IMAGE_FAMILY：镜像族系。","type":"string","required":true,"example":"IMAGE"}},{"name":"BaseImage","in":"query","schema":{"description":"源镜像。\n- 当`BaseImageType=IMAGE`时，该参数取值为镜像ID。\n- 当`BaseImageType=IMAGE_FAMILY`时，该参数取值为镜像族系名称。","type":"string","required":true,"example":"m-bp67acfmxazb4p****"}},{"name":"Name","in":"query","schema":{"description":"模板名称。长度为2~128个字符，必须以大小字母或中文开头，不能以`http://`和`https://`开头。可以包含中文、英文、数字、半角冒号（:）、下划线（_）、半角句号（.）或者短划线（-）。\n\n>不设置`Name`时，默认使用`ImagePipelineId`返回值。","type":"string","required":false,"example":"testImagePipeline"}},{"name":"Description","in":"query","schema":{"description":"描述信息。长度为2~256个英文或中文字符，不能以`http://`和`https://`开头。","type":"string","required":false,"example":"This is description."}},{"name":"ImageName","in":"query","schema":{"description":"目标镜像名称前缀。长度为2~64个字符，必须以大小字母或中文开头，不能以`http://`和`https://`开头。可以包含中文、英文、数字、半角冒号（:）、下划线（_）、半角句号（.）或者短划线（-）。\n\n最终完整的镜像名称由系统自动拼接名称前缀与构建任务ID（`ExecutionId`），格式为`{ImageName}_{ExecutionId}`。\n\n","type":"string","required":false,"example":"testImageName"}},{"name":"VSwitchId","in":"query","schema":{"description":"VPC的交换机ID。\n\n不设置参数值时，默认创建新的VPC与交换机，请确保您账号下VPC资源配额充足，更多信息，请参见[使用限制](~~27750~~)。","type":"string","required":false,"example":"vsw-bp67acfmxazb4p****"}},{"name":"InstanceType","in":"query","schema":{"description":"实例规格。您可以调用[DescribeInstanceTypes](~~25620~~)查询不同的实例规格。\n\n不设置参数值时，默认按vCPU和内存最小的原则，自动设置实例规格，并受实例规格的库存影响。例如，默认选择ecs.g6.large实例规格，如果库存不足，将选择ecs.g6.xlarge实例规格。","type":"string","required":false,"example":"ecs.g6.large"}},{"name":"SystemDiskSize","in":"query","schema":{"description":"中转实例的系统盘大小。单位：GiB。取值范围：20~500。\n\n默认值：40。","type":"integer","format":"int32","required":false,"example":"40"}},{"name":"InternetMaxBandwidthOut","in":"query","schema":{"description":"中转实例的公网出带宽大小。单位：Mbit/s。取值范围：0~100。\n\n默认值：0。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"DeleteInstanceOnFailure","in":"query","schema":{"description":"镜像构建失败后是否释放中转实例。取值范围：\n\n- true：释放。\n- false：不释放。\n\n默认值：true。\n\n> 中转实例如果没有成功启动，则实例默认不保留。\n\n","type":"boolean","required":false,"example":"true"}},{"name":"BuildContent","in":"query","schema":{"description":"镜像模板内容。内容大小不能超过16 KB，最大支持127个命令。具体支持的命令请参见接口说明。","type":"string","required":false,"example":"FROM IMAGE:m-bp67acfmxazb4p****"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}}],"responses":{"200":{"headers":{},"schema":{"type":"object","properties":{"ImagePipelineId":{"description":"镜像模板ID。","type":"string","example":"ip-2ze5tsl5bp6nf2b3****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidSourceInstance.NotFound","errorMessage":"The specified source instance is not found."},{"errorCode":"InvalidName.Malformed","errorMessage":"%s"},{"errorCode":"InvalidDescription.Malformed","errorMessage":"%s"},{"errorCode":"InvalidImageName.Malformed","errorMessage":"%s"},{"errorCode":"InvalidBaseImageType.NotSupportedValue","errorMessage":"%s"},{"errorCode":"InvalidSystemDiskSize.NotSupportedValue","errorMessage":"%s"},{"errorCode":"InvalidInternetMaxBandwidthOut.NotSupportedValue","errorMessage":"%s"},{"errorCode":"InvalidAddAccountSize.ExceededMaxNumber","errorMessage":"%s"},{"errorCode":"InvalidToRegionIdSize.ExceededMaxNumber","errorMessage":"%s"},{"errorCode":"InvalidBuildContent.LengthExceeded","errorMessage":"%s"},{"errorCode":"InvalidImageTemplateCommandSize.ExceededMaxNumber","errorMessage":"%s"},{"errorCode":"DuplicatedCommand.FROM","errorMessage":"%s"},{"errorCode":"InvalidCommandOrder.FROM","errorMessage":"%s"},{"errorCode":"InvalidImageTemplateCommand.NotSupported","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.RUN","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.ENV","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.WORKDIR","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.COPY","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.USER","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.FROM","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.CMD","errorMessage":"%s"},{"errorCode":"InvalidCommandContent.ENTRYPOINT","errorMessage":"%s"},{"errorCode":"QuotaExceed.ImagePipeline","errorMessage":"%s."},{"errorCode":"NoPermission","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.LABEL","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.ENV","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.ENTRYPOINT","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.CMD","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.COPY","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.WORKDIR","errorMessage":"%s."},{"errorCode":"NotEmptyCommandContent.RESTART","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.USER","errorMessage":"%s."},{"errorCode":"EmptyCommandContent.RUN","errorMessage":"%s."}],"403":[{"errorCode":"ImagePipeline.NotSupportWindowsInstance","errorMessage":"Image pipeline does not support windows instance at this time."}],"404":[{"errorCode":"InvalidImage.NotFound","errorMessage":"%s"},{"errorCode":"InvalidResourceGroup.NotFound","errorMessage":"The ResourceGroup provided does not exist in our records."},{"errorCode":"ImageComponent.NotFound","errorMessage":"%s."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"ImagePipelineId\\\": \\\"ip-2ze5tsl5bp6nf2b3****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateImagePipelineResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <ImagePipelineId>ip-2ze5tsl5bp6nf2b3****</ImagePipelineId>\\n</CreateImagePipelineResponse>\",\"errorExample\":\"\"}]","title":"创建镜像构建模板","summary":"调用CreateImagePipeline创建一个镜像模板。镜像模板可用于构建镜像。","description":"您可以通过镜像模版定制镜像内容，并支持跨地域跨账号构建镜像。创建镜像模板前，您需要注意：\n\n- 仅支持创建您自定义的镜像模版。\n- 仅支持设置Linux系统的公共镜像、自定义镜像、共享镜像或者镜像族系。\n- 通过镜像模版构建镜像时，需要创建中转实例辅助构建镜像，中转实例为按量计费的ECS实例，将收取一定的费用。更多信息，请参见[按量付费](~~40653~~)。\n\n关于构建模板内容`BuildContent`，您需要注意：\n- 如果参数`BuildContent`设置了`FROM`命令，则源镜像类型`BaseImageType`和源镜像`BaseImage`设置的值会被`FROM`命令覆盖。\n- 如果参数`BuildContent`没有设置`FROM`命令，则系统会自动将源镜像类型`BaseImageType`和源镜像`BaseImage`构成的`FROM`命令添加到模板内容的首行，格式为`<BaseImageType>:<BaseImage>`。\n- 一个镜像模板内容可以通过Dockerfile编辑，然后将内容传入`BuildContent`参数。内容大小不能超过16 KB，最大支持127个命令。支持的命令说明详情，请参见[镜像构建服务支持的命令说明](~~200206~~)。\n\n不支持通过API使用镜像组件快速完成镜像模板的创建，仅控制台操作支持该功能。更多信息，请参见[镜像构建概述](~~197410~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}