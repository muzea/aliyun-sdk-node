{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"28790","abilityTreeNodes":["FEATUREecs70JNQP"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"目标ECS实例的ID。","type":"string","required":true,"docRequired":true,"example":"i-bp1dq5lozx5f4pmd****"}},{"name":"DiskId","in":"query","schema":{"description":"待挂载的磁盘ID。磁盘（`DiskId`）和实例（`InstanceId`）必须在同一个可用区。\n\n> 支持挂载数据盘和系统盘，相关约束条件请参见上文接口说明章节。","type":"string","required":true,"docRequired":true,"example":"d-bp1j4l5axzdy6ftk****"}},{"name":"Device","in":"query","schema":{"description":"磁盘设备名称。\n\n> 该参数即将被弃用，为提高兼容性，建议您尽量使用其他参数。","type":"string","required":false,"example":"testDeviceName"}},{"name":"DeleteWithInstance","in":"query","schema":{"description":"释放实例时，该磁盘是否随实例一起释放。\n\n- true：释放。\n- false：不释放。磁盘会转换成按量付费数据盘而被保留下来。\n\n默认值：false。\n\n设置该参数时，您需要注意：\n\n- 将`DeleteWithInstance`置为`false`后，一旦ECS实例被安全控制，即`OperationLocks`中标记了`\"LockReason\" : \"security\"`，释放ECS实例时会忽略磁盘的该属性，被同时释放。\n\n- 若您需要挂载的目标磁盘为`弹性临时盘`，则必须将`DeleteWithInstance`参数设置为`true`。\n\n- 开启多重挂载特性的云盘，不支持设置该参数。","type":"boolean","required":false,"example":"false"}},{"name":"Bootable","in":"query","schema":{"description":"是否作为系统盘挂载。\n\n默认值：false。\n\n> 设置为`Bootable=true`时，目标ECS实例必须处于无系统盘状态。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"Password","in":"query","schema":{"description":"挂载系统盘时，设置实例的用户名密码，仅对administrator和root用户名生效，其他用户名不生效。长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号中的三类字符。特殊符号可以是：\n\n```\n()`~!@#$%^&*-_+=|{}[]:;'<>,.?/\n```\n其中，Windows实例不能以斜线号（/）为密码首字符。\n\n> 如果传入`Password`参数，建议您使用HTTPS协议发送请求，避免密码泄露。","type":"string","required":false,"example":"EcsV587!"}},{"name":"KeyPairName","in":"query","schema":{"description":"挂载系统盘时，为Linux系统ECS实例绑定的SSH密钥对的名称。\n\n- Windows Server系统：不支持SSH密钥对。即使填写了该参数，只执行`Password`的配置。\n\n- Linux系统：密码登录方式会被初始化成禁止。","type":"string","required":false,"example":"KeyPairTestName"}},{"name":"Force","in":"query","schema":{"description":"是否强制执行磁盘挂载操作。\n\n- true：强制。\n- false：不强制。\n\n默认值为false。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidDevice.Malformed","errorMessage":"The specified device is not valid."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InvalidParameter","errorMessage":"The input parameter is mandatory for processing this request is empty."},{"errorCode":"InvalidRegionId.MalFormed","errorMessage":"The specified RegionId is not valid."},{"errorCode":"InvalidOperation.InstanceTypeNotSupport","errorMessage":"The instance type of the specified instance does not support hot attach disk."},{"errorCode":"DiskCategory.OperationNotSupported","errorMessage":"The operation is not supported to the specified disk due to its disk category."},{"errorCode":"InvalidDisk.DiskNotBootable","errorMessage":"The specified disk is not a bootable disk, can not be attached as system disk."},{"errorCode":"InvalidInstance.NotOriginInstance","errorMessage":"The specified disk can not attached to other instance as system disk."},{"errorCode":"InvalidParameter.AllEmpty","errorMessage":"%s"},{"errorCode":"InvalidParameterForce.DiskCategoryNotSupported","errorMessage":"The specified disk category does not support force attach operation."},{"errorCode":"InvalidParameterForce.PrepaidDiskNotSupported","errorMessage":"The prepaid disk does not support force attach operation."},{"errorCode":"InvalidParameterForce.MultiAttachDiskNotSupported","errorMessage":"The multi attach disk does not support force attach operation."},{"errorCode":"InvalidParameterForce.RegionNotSupported","errorMessage":"The specified region does not support force attach operation."}],"403":[{"errorCode":"InstanceDiskLimitExceeded","errorMessage":"The amount of the disk on instance in question reach its limits."},{"errorCode":"InvalidDevice.InUse","errorMessage":"The specified device has been occupied."},{"errorCode":"IncorrectDiskStatus","errorMessage":"%s"},{"errorCode":"DiskNotPortable","errorMessage":"The specified disk is not a portable disk."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The instance is locked due to security."},{"errorCode":"ResourcesNotInSameZone","errorMessage":"The specified instance and disk are not in the same zone."},{"errorCode":"InstanceExpiredOrInArrears","errorMessage":"The specified operation is denied as your prepay instance is expired (prepay mode) or in arrears (afterpay mode)."},{"errorCode":"DiskInArrears","errorMessage":"The specified operation is denied as your disk owing fee."},{"errorCode":"DiskError","errorMessage":"IncorrectDiskStatus."},{"errorCode":"DiskId.ValueNotSupported","errorMessage":"The specified parameter diskid is not supported."},{"errorCode":"DiskId.StatusNotSupported","errorMessage":"The specified disk status is not supported."},{"errorCode":"IncorrectInstanceStatus.NotSupportESSD","errorMessage":"The operation is not supported in this status, please reboot the instance."},{"errorCode":"UserNotInTheWhiteList","errorMessage":"The user is not in disk white list."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KMSKeyId.CMKUnauthorized","errorMessage":"The CMK needs to be added ECS tag."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"DependencyViolation.WindowsInstance","errorMessage":"The instance image is windows, cannot use ssh key pair to login."},{"errorCode":"InvalidInstanceType.NotSupportDiskCategory","errorMessage":"The instanceType of the specified instance does not support this disk category."},{"errorCode":"InvalidInstanceType.NotSupportPL0","errorMessage":"The instanceType of the specified instance does not support PL0 of cloud_essd."},{"errorCode":"InvalidInstanceType.NvmeRequired","errorMessage":"The instanceType of the specified instance requires nvme protocol."},{"errorCode":"InvalidInstanceType.NvmeUnsupported","errorMessage":"The instanceType of the specified instance does not support nvme protocol."},{"errorCode":"InvalidInstanceType.NotSupportMultiAttachDisk","errorMessage":"The instanceType of the specified instance does not support multi attach disk."},{"errorCode":"DiskAttachedNumberExceeded","errorMessage":"The attaching times of the specified disk exceeded."},{"errorCode":"InvalidOperation.CanNotAttachMultiAttachDiskAsSystemDisk","errorMessage":"Multi attach disk can not be attached as system disk."},{"errorCode":"DeleteWithInstance.Conflict","errorMessage":"Multi attach disk cannot be set to DeleteWithInstance attribute."},{"errorCode":"InvalidParameter.DeleteWithInstance","errorMessage":"The DeleteWithInstance for the elastic ephemeral disk must be set to true."},{"errorCode":"InvalidOperation.OtherInstanceUnsupported","errorMessage":"The elastic ephemeral disk can only be attached to the instance it was last mounted on, please check the disk's system tag to get the last associated instance."},{"errorCode":"InvalidInstance.ZoneConflict","errorMessage":"The force attach operation is not supported when both the current and target instances are in the same zone."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified disk does not exist."},{"errorCode":"InvalidDisk.InUse","errorMessage":"The specified disk has been occupied."},{"errorCode":"DiskAttachedNumberExceeded","errorMessage":"The attaching times of the specified disk exceeded."},{"errorCode":"InvalidKMSKeyId.NotFound","errorMessage":"The KMS key used by the disk does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<AttachDiskResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n</AttachDiskResponse>\",\"errorExample\":\"<AttachDiskResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n</AttachDiskResponse>\"}]","title":"为实例挂载数据盘或系统盘","summary":"调用AttachDisk为一台ECS实例挂载一块按量付费数据盘，或者挂载一块系统盘。实例和磁盘必须在同一个可用区。","description":"## 接口说明\n\n调用该接口时，您需要注意：\n\n- 磁盘的状态必须为**待挂载**（`Available`）。 \n- 挂载数据盘时：\n\n    - 目标ECS实例必须处于**运行中**（`Running`）或者**已停止**（`Stopped`）状态。 \n    - 如果是您单独购买的磁盘，计费方式必须是按量付费。\n    - 从ECS实例上卸载的系统盘作为数据盘挂载时，不限制计费方式。 \n    - 弹性临时盘一旦卸载，只能重新挂载至其原始实例。\n\n- 挂载系统盘时：\n\n    - 目标ECS实例必须是卸载系统盘时的源实例。\n    - 目标ECS实例必须处于**已停止**（`Stopped`）状态。 \n    - 您必须设置实例登录凭证。\n    - 弹性临时盘不支持挂载为系统盘。\n\n- 查询ECS实例信息时，如果返回数据中包含`{\"OperationLocks\": {\"LockReason\" : \"security\"}}`，则禁止一切操作。\n\n<props=\"china\">\n- 开启多重挂载特性的云盘，只能挂载到支持NVMe协议的实例上。更多信息，请参见[ESSD云盘支持NVMe](~~256487~~)以及[使用多重挂载功能](~~262105~~)。\n</props>","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}