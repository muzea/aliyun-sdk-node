{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create"},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"容量预定服务所属地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"容量预定服务所在的企业资源组ID。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表","type":"array","items":{"type":"object","properties":{"Key":{"description":"容量预定服务的标签键。N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以`aliyun`和`acs:`开头，不能包含`http://`或者`https://`。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"容量预定服务的标签值。N的取值范围：1~20。一旦传入该值，允许为空字符串。最多支持128个字符，不能以`acs:`开头，不能包含`http://`或者`https://`。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":20}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。`ClientToken`只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"0c593ea1-3bea-11e9-b96b-88e9fe637760"}},{"name":"PrivatePoolOptions.Name","in":"query","schema":{"description":"容量预定服务的名称。长度为2~128个英文或中文字符。必须以大小写字母或中文开头，不能以`http://`和`https://`开头。可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。","type":"string","required":false,"example":"crpTestName"}},{"name":"Description","in":"query","schema":{"description":"容量预定服务的描述信息。长度为2~256个英文或中文字符，不能以`http://`和`https://`开头。\n\n默认值：空","type":"string","required":false,"example":"This is description."}},{"name":"PrivatePoolOptions.MatchCriteria","in":"query","schema":{"description":"容量预定服务生效后生成的私有资源池的类型。取值范围：\n\n- Open：开放模式。\n- Target：专用模式。\n\n默认值：Open","type":"string","required":false,"example":"Open","default":"Open"}},{"name":"InstanceAmount","in":"query","schema":{"description":"在一个实例规格内，需要预留的实例的总数量。","type":"integer","format":"int32","required":true,"minimum":"1","example":"2"}},{"name":"InstanceType","in":"query","schema":{"description":"实例规格。目前仅支持为一个实例规格设置容量预定服务。您可以调用[DescribeInstanceTypes](~~25620~~)查询云服务器ECS提供的实例规格信息。","type":"string","required":true,"example":"ecs.g6.xlarge"}},{"name":"StartTime","in":"query","schema":{"description":"容量预定服务的生效方式。目前调用API的方式仅支持设置为立即生效。\n\n> 该参数不传值即表示设置为立即生效。","type":"string","required":false,"example":"2021-10-30T05:32:00Z"}},{"name":"EndTime","in":"query","schema":{"description":"容量预定服务的失效时间。时间格式以ISO8601为标准，并需要使用UTC +0时间，格式为`yyyy-MM-ddTHH:mm:ssZ`。更多信息，请参见[ISO 8601](~~25696~~)。","type":"string","required":false,"example":"2021-10-30T06:32:00Z"}},{"name":"EndTimeType","in":"query","schema":{"description":"容量预定服务的失效方式。取值范围：\n\n- Limited：指定时间释放。必须同时指定`EndTime`参数。\n- Unlimited：手动释放。不限制时间。","type":"string","required":false,"example":"Unlimited"}},{"name":"Platform","in":"query","schema":{"description":"实例使用的镜像的操作系统类型。该参数与地域级预留实例券的`Platform`参数对应。如果容量预定服务和地域级预留实例券的操作系统类型相匹配，则可以使用地域级预留实例券来抵扣容量预定服务中的未使用容量的账单。取值范围：\n\n- Windows：Windows Server类型的操作系统。\n- Linux：Linux及类Unix类型的操作系统。\n\n默认值：Linux\n\n> 该参数暂未开放使用。","type":"string","required":false,"example":"Linux","default":"linux"}},{"name":"ZoneId","in":"query","style":"repeatList","schema":{"description":"容量预定服务所属地域下的可用区ID。目前仅支持在一个可用区下创建容量预定服务。","type":"array","items":{"description":"容量预定服务所属地域下的可用区ID。目前仅支持在一个可用区下创建容量预定服务。","type":"string","required":false,"example":"cn-hangzhou-h"},"required":true,"example":"cn-hangzhou-h","maxItems":100}}],"responses":{"200":{"schema":{"type":"object","properties":{"PrivatePoolOptionsId":{"description":"容量预定服务ID。","type":"string","example":"crp-bp67acfmxazb4****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"NoStock","errorMessage":"It has not enough stock in the iz."},{"errorCode":"MissingParameter","errorMessage":"The input parameter StartTime is missing."},{"errorCode":"OperationDenied","errorMessage":"The specified InstanceType or Zone is not available or not authorized."},{"errorCode":"MissingParameter.RegionId","errorMessage":"The specified RegionId should not be null."},{"errorCode":"InvalidStartTime.NotSupported","errorMessage":"The specified StartTime should be within 180 calendar days from the current date, and you must specify a precision to hour."},{"errorCode":"InvalidStartTime.MalFormed","errorMessage":"The specified StartTime is out of the permitted range."},{"errorCode":"Invalid.PrivatePoolOptionsName.MalFormed","errorMessage":"The specified PrivatePoolOptions.Name is not valid."},{"errorCode":"Invalid.ZoneId","errorMessage":"The specified ZoneId is not valid."},{"errorCode":"Invalid.InstanceType","errorMessage":"The specified InstanceType is not valid."},{"errorCode":"DedicatedHostNotSupported","errorMessage":"DedicatedHost is not supported for PrivatePool."},{"errorCode":"SpotNotSupported","errorMessage":"Spot is not supported for PrivatePool."},{"errorCode":"ClassicNetworkNotSupported","errorMessage":"Classic network is not supported for PrivatePool."},{"errorCode":"Invalid.InstanceId","errorMessage":"Instance does not exist."},{"errorCode":"Invalid.PrivatePoolOptions.MatchCriteria","errorMessage":"Target mode does not support this operation."},{"errorCode":"MissingParameter.PrivatePoolOptions.Id","errorMessage":"The specified PrivatePoolOptions.Id should not be null."},{"errorCode":"Invalid.PrivatePoolOptions.Id","errorMessage":"The PrivatePool does not exist."},{"errorCode":"Invalid.InstanceChargeType","errorMessage":"The InstanceChargeType does not match the PrivatePool."},{"errorCode":"Invalid.PrivatePoolOptions.status","errorMessage":"The PrivatePool has been used up."},{"errorCode":"InvalidPlatform.ValueNotSupported","errorMessage":"The Platform does not match the PrivatePool."},{"errorCode":"InvalidAliUid","errorMessage":"The PrivatePool does not belong to the user of the Instance."},{"errorCode":"MissingParameter.PackageType","errorMessage":"The specified parameter \"PackageType\" can not be empty."},{"errorCode":"MissingParameter.PrivatePoolOptions.Ids","errorMessage":"The specified parameter \"PrivatePoolOptions.Ids\" can not be empty."},{"errorCode":"MissingParameter.InstanceCpuCoreCount","errorMessage":"The specified parameter \"InstanceCpuCoreCount\" can not be empty."},{"errorCode":"MissingParameter.InstanceAmount","errorMessage":"The specified parameter \"InstanceAmount\" can not be empty."},{"errorCode":"MissingParameter.InstanceCpuCoreCountOrInstanceAmount","errorMessage":"The specified parameter \"InstanceCpuCoreCount\" and \"InstanceAmount\" must not be empty at the same time."},{"errorCode":"Invalid.TooManyPrivatePoolOptions.Ids","errorMessage":"Too many PrivatePoolOptions.Ids in this request."},{"errorCode":"Invalid.TooManyZoneIds","errorMessage":"Too many ZoneIds in the request."},{"errorCode":"Invalid.TooManyInstanceTypes","errorMessage":"Too many InstanceTypes in the request."},{"errorCode":"Invalid.TooManyUnpaidPrivatePool","errorMessage":"Too many PrivatePools create but still unpaid."},{"errorCode":"Invalid.InstanceCpuCoreCountOrInstanceAmount","errorMessage":"Both InstanceCpuCoreCount and InstanceAmount are provided."},{"errorCode":"Invalid.PrivatePoolOptions.Ids","errorMessage":"The specified parameter \"PrivatePoolOptions.Ids\" exist invalid element Id."},{"errorCode":"Invalid.PackageType","errorMessage":"The specified parameter \"PackageType\" is invalid."},{"errorCode":"Invalid.PrivatePool.Purchase","errorMessage":"The PrivatePool has already paid."},{"errorCode":"Invalid.AssuranceTimes.NotSupported","errorMessage":"The value of AssuranceTimes is not supported."},{"errorCode":"RepeatStartPrivatePool","errorMessage":"PrivatePool has already been started."},{"errorCode":"Invalid.TimeSlot","errorMessage":"The param time slot is invalid."},{"errorCode":"Invalid.EndTime","errorMessage":"The specified parameter \"EndTime\" is not valid."},{"errorCode":"StartTime.NotNeed","errorMessage":"The specified parameter \"StartTime\" should leave empty."},{"errorCode":"AccountForbidden.ProductCreationLimited","errorMessage":"The commodity must be officially operated by Aliyun and in pay-as-you-go billing method."},{"errorCode":"RegionUnauthorized","errorMessage":"There is no authority to create private pool in the specified region."},{"errorCode":"PriceNotFound","errorMessage":"The price of your queried resource is not available now, please try other resources."}],"403":[{"errorCode":"Zone.NotOpen","errorMessage":"The specified zone is not granted to you to buy resources yet."},{"errorCode":"InvalidResourceType.NotSupported","errorMessage":"%s"},{"errorCode":"OperationDenied.NoStock","errorMessage":"The resource is out of stock in the specified zone. Please try other types, or choose other regions and zones."},{"errorCode":"InvalidInstanceType.NotSupported","errorMessage":"The specified InstanceType is invalid."},{"errorCode":"Invalid.ZoneIds","errorMessage":"At least one of the specified ZoneIds are invalid."},{"errorCode":"Zone.NotOnSale","errorMessage":"The specified zone is not available for purchase."}],"404":[{"errorCode":"InvalidZoneId.NotFound","errorMessage":"The specified zoneId does not exist."},{"errorCode":"InvalidResourceGroup.NotFound","errorMessage":"The ResourceGroup provided does not exist in our records."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error, exception or failure."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PrivatePoolOptionsId\\\": \\\"crp-bp67acfmxazb4****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateCapacityReservationResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <PrivatePoolOptionsId>crp-bp67acfmxazb4****</PrivatePoolOptionsId>\\n</CreateCapacityReservationResponse>\",\"errorExample\":\"\"}]","title":"创建容量预定服务","summary":"调用CreateCapacityReservation创建容量预定服务。","description":"## 接口说明\n您可以通过容量预定服务，指定可用区、实例规格等属性，系统会以私有池的方式预留属性相匹配的资源。更多信息，请参见[立即生效容量预定概述](~~193633~~)。\n\n- 目前服务仅支持立即生效模式。购买立即生效容量预定服务后，实例规格即开始遵循按量付费标准计费，不论是否实际创建了按量付费实例，直至您自行手动释放或到期系统自动释放立即生效容量预订。\n    - 您可以通过[CreateInstance](~~25499~~)或[RunInstances](~~63440~~)创建实例时设置私有池容量选项，或者通过[ModifyInstanceAttachmentAttributes](~~190006~~)修改实例的私有池容量选项。实例成功匹配私有池容量后，将根据您的实例配置收取实例规格、云盘、公网带宽等相关资源费用。\n    - 未实际创建按量付费实例时，仅收取实例规格的费用。\n- 立即生效容量预定的匹配的实例和未使用的容量账单支持通过节省计划、地域级预留实例券抵扣小时账单，不支持通过可用区级预留实例券抵扣小时账单。推荐您先购买预留实例券或节省计划，在预留实例券或节省计划的覆盖下使用立即生效容量预定服务，可以免费获取资源的确定性保障。\n\n> 调用API方式仅支持创建立即生效容量预定。通过ECS控制台可以创建立即生效容量预定或指定时间生效容量预定，更多信息，请参见[资源预定服务](~~193626#section-oil-qh5-xvx~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}