{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create","abilityTreeCode":"28847","abilityTreeNodes":["FEATUREecsDXRH67"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"实例所属的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":false,"example":"i-j6ca469urv8ei629****"}},{"name":"InstantAccess","in":"query","schema":{"description":"是否开启快照极速可用。取值范围：\n\n- true：开启。\n- false：关闭。\n\n默认值：false。\n\n>该参数已弃用。ESSD云盘普通快照已升级为[默认极速可用](~~193667~~)，您无需额外配置，且不产生额外花销。","type":"boolean","required":false,"example":"false"}},{"name":"InstantAccessRetentionDays","in":"query","schema":{"description":"设置快照极速可用的使用时间。单位：天，取值范围：1~65535。\n\n仅当`InstantAccess=true`时，该参数生效。到期后自动关闭快照极速使用功能。\n\n默认值：空，表示和快照释放时间一致。\n\n>该参数已弃用。ESSD云盘普通快照已升级为[默认极速可用](~~193667~~)，您无需额外配置，且不产生额外花销。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"Name","in":"query","schema":{"description":"快照一致性组名称。长度为2~128个英文或中文字符。必须以大小写字母或中文开头，不能以`http://`或`https://`开头，可以包含数字、半角句号（.）、下划线（_）、短划线（-）或者半角冒号（:）。","type":"string","required":false,"example":"testName"}},{"name":"Description","in":"query","schema":{"description":"描述。长度为2～256个字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"This is description."}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。ClientToken只支持ASCII字符，且不能超过64个字符。更多详情，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"StorageLocationArn","in":"query","schema":{"description":">该参数暂未开发使用。","type":"string","required":false,"example":"null"}},{"name":"ExcludeDiskId","in":"query","style":"repeatList","schema":{"description":"实例中不需要创建快照的云盘ID。指定云盘ID后，创建的快照一致性组将不包含该云盘对应的快照。N的取值范围为1~16。\n\n默认值：空，表示为实例中的所有云盘创建快照。\n\n> 该参数不可与`DiskId.N`同时设置。","type":"array","items":{"description":"实例中不需要创建快照的云盘ID。指定云盘ID后，创建的快照一致性组将不包含该云盘对应的快照。N的取值范围为1~16。\n\n默认值：空，表示为实例中的所有云盘创建快照。\n\n> 该参数不可与`DiskId.N`同时设置。","type":"string","required":false,"example":"d-j6cf7l0ewidb78lq****"},"required":false,"example":"d-j6cf7l0ewidb78lq****","maxItems":16}},{"name":"DiskId","in":"query","style":"repeatList","schema":{"description":"指定创建快照一致性组的云盘ID。在同可用区内支持跨实例设置多个云盘ID。N的取值范围为1~16，即一个快照一致性组内最多支持设置16块总大小不超过32 TiB的云盘。\n\n您需要注意：\n\n- 该参数不可与`ExcludeDiskId.N`同时设置。\n- 如果您设置了`InstanceId`，则该参数只能设置指定实例内已挂载的云盘，不再支持设置多个跨实例的云盘ID。","type":"array","items":{"description":"指定创建快照一致性组的云盘ID。在同可用区内支持跨实例设置多个云盘ID。N的取值范围为1~16，即一个快照一致性组内最多支持设置16块总大小不超过32 TiB的云盘。\n\n您需要注意：\n\n- 该参数不可与`ExcludeDiskId.N`同时设置。\n- 如果您设置了`InstanceId`，则该参数只能设置指定实例内已挂载的云盘，不再支持设置多个跨实例的云盘ID。","type":"string","required":false,"example":"d-bp1bcpqxahucdrcn****"},"required":false,"maxItems":16}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"type":"object","properties":{"Key":{"description":"快照一致性组的标签键。N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以`aliyun`或`acs:`开头，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"快照一致性组的标签值。N的取值范围：1~20。一旦传入该值，可以为空字符串。最多支持128个字符，不能以`acs:`开头，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":20}},{"name":"ResourceGroupId","in":"query","schema":{"description":"快照一致性组所属的资源组ID。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"SnapshotGroupId":{"description":"快照一致性组ID。","type":"string","example":"ssg-j6ciyh3k52qp7ovm****"},"RequestId":{"description":"请求ID。","type":"string","example":"01ABBD93-1ABB-4D92-B496-1A3D20EC0697"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidDiskIds.NotInSameZone","errorMessage":"The specified disks are not in the same availability zone."},{"errorCode":"MissingParamter.InstanceId","errorMessage":"The specified InstanceId should not be null."},{"errorCode":"InvalidParam.ExcludeDiskIdsAndDiskIds.Conflict","errorMessage":"The use of parameter 'ExcludeDiskIds' and 'DiskIds' at the same time is not supported."},{"errorCode":"InvalidSnapshotName.Malformed","errorMessage":"The specified SnapshotName is wrongly formed."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"Duplicate.TagKey","errorMessage":"The Tag.N.Key contain duplicate key."},{"errorCode":"InvalidTagKey.Malformed","errorMessage":"The specified Tag.n.Key is not valid."},{"errorCode":"InvalidTagValue.Malformed","errorMessage":"The specified Tag.n.Value is not valid."},{"errorCode":"InvalidRetentionDays.Malformed","errorMessage":"The specified RetentionDays is not valid."},{"errorCode":"DiskCategory.OperationNotSupported","errorMessage":"The special disk is encrypted, not support this operate."},{"errorCode":"InvalidParameter.Name","errorMessage":"The specified Name is invalid."},{"errorCode":"InvalidParameter.Description","errorMessage":"The specified Description is invalid."}],"403":[{"errorCode":"IncorrectDiskStatus.CreatingSnapshot","errorMessage":"A previous snapshot creation is in process."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The disk attached instance is locked due to security."},{"errorCode":"IncorrectDiskStatus.NeverAttached","errorMessage":"The specified disk has never been attached to any instance."},{"errorCode":"QuotaExceed.Snapshot","errorMessage":"The snapshot quota exceeds."},{"errorCode":"IncorrectDiskStatus.NeverUsed","errorMessage":"The specified disk has never been used after creating."},{"errorCode":"CreateSnapshot.Failed","errorMessage":"The process of creating snapshot is failed."},{"errorCode":"DiskInArrears","errorMessage":"The specified operation is denied as your disk has expired."},{"errorCode":"DiskId.ValueNotSupported","errorMessage":"The specified parameter diskid is not supported."},{"errorCode":"IncorrectDiskStatus","errorMessage":"The current disk status does not support this operation."},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"InvalidAccountStatus.SnapshotServiceUnavailable","errorMessage":"Snapshot service has not been opened yet."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"IncorrectVolumeStatus","errorMessage":"The current volume status does not support this operation."},{"errorCode":"IdempotentParameterMismatch","errorMessage":"The specified clientToken is used."},{"errorCode":"IncorrectDiskStatus.Invalid","errorMessage":"The specified device status invalid, restart instance and try again."},{"errorCode":"IncorrectDiskType.NotSupport","errorMessage":"The specified device type is not supported."},{"errorCode":"IncorrectDiskStatus.Transferring","errorMessage":"The specified device is transferring, you can retry after the process is finished."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"IdempotentProcessing","errorMessage":"The previous idempotent request(s) is still processing."},{"errorCode":"QuotaExceed.Tags","errorMessage":"%s"},{"errorCode":"InvalidSnapshotCategory.Malformed","errorMessage":"The specified Category is not valid."},{"errorCode":"InvalidOperation.Unauthorized","errorMessage":"The specified operation is unauthorized."},{"errorCode":"InvalidRegion.NotSupportSnapshotInstantAccessRegion","errorMessage":"The snapshot InstantAccess is not supported for this region."},{"errorCode":"InvalidCategoryAndInstantAccess.Malformed","errorMessage":"The snapshot Category and InstantAccess can't be used together."},{"errorCode":"IncorrectDiskStatus.TooManyCreatingSnapshots","errorMessage":"The specified disk has too many unfinished snapshots."},{"errorCode":"InvalidRegion.NotSupport","errorMessage":"The specified region does not support creating snapshot group."},{"errorCode":"UserNotInTheWhiteList","errorMessage":"The user is not in the white list of creating snapshot group."},{"errorCode":"InvalidInstance.NoDisk","errorMessage":"There is no disk mounted on the instance."},{"errorCode":"NumberExceed.TooManyDisks","errorMessage":"The number of all disks in the request exceeds."},{"errorCode":"CapacityExceed.TooManyDisks","errorMessage":"The capacity of all disks in the request exceeds."},{"errorCode":"InvalidDisk.ShareVolume","errorMessage":"%s"},{"errorCode":"InvalidOperation.MultiAttachDisk","errorMessage":"Multi attach disk does not support this operation."},{"errorCode":"InvalidParameter.KMSKeyId.CMKUnauthorized","errorMessage":"The CMK needs to be added ECS tag."},{"errorCode":"InvalidDisk.DiskCategoryInconsistent","errorMessage":"If any specified disk is of a regional disk category, then all disks must also be of that regional disk category."}],"404":[{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified DiskId does not exist."},{"errorCode":"InvalidDescription.Malformed","errorMessage":"The specified description is wrongly formed."},{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidVolumeId.NotFound","errorMessage":"The specified volume does not exist."},{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The specified RegionId does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"SnapshotGroupId\\\": \\\"ssg-j6ciyh3k52qp7ovm****\\\",\\n  \\\"RequestId\\\": \\\"01ABBD93-1ABB-4D92-B496-1A3D20EC0697\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateSnapshotGroupResponse>\\n    <RequestId>01ABBD93-1ABB-4D92-B496-1A3D20EC0697</RequestId>\\n    <SnapshotGroupId>ssg-j6ciyh3k52qp7ovm****</SnapshotGroupId>\\n</CreateSnapshotGroupResponse>\",\"errorExample\":\"\"}]","title":"创建快照一致性组","summary":"为指定ECS实例中的云盘创建快照一致性组。快照一致性组包含一个或多个云盘对应的快照。","description":"## 接口说明\n\n您可以设置`InstanceId`为实例内的指定云盘创建快照一致性组；也可以只使用`DiskId.N`为同可用区内多台ECS实例挂载的多块云盘创建快照一致性组。\n\n> `DiskId.N`不可与`ExcludeDiskId.N`同时设置。此外，如果设置了`InstanceId`，则`DiskId.N`只能设置指定实例内已挂载的云盘，不再支持设置多个跨实例的云盘ID。\n\n创建快照一致性组时，请注意：\n\n- 待创建快照的云盘必须处于**使用中**（`In_use`）或**待挂载**（`Available`）的状态。\n\n    - 如果云盘处于**使用中**（`In_use`）的状态，则ECS实例状态为**运行中**（`Running`）或者**已停止**（`Stopped`）。\n    - 如果云盘处于**待挂载**（`Available`）的状态，则需要保证云盘有过挂载到ECS实例的历史操作。从未挂载过ECS实例的云盘不支持创建快照。\n\n- 目前快照一致性组只支持ESSD云盘。\n- 单个快照一致性组最多包括16块云盘（包括系统盘和数据盘），且总容量不超过32 TiB。\n- 您自行创建的快照会一直保留，请定期删除不再需要的快照，避免快照容量持续扣费。\n- 开启多重挂载特性的云盘不支持创建快照一致性组。如果实例挂载了开启多重挂载特性的云盘，您需要设置`ExcludeDiskId.N`参数排除该云盘。\n\n关于快照一致性组的功能、计费等信息，请参见[快照一致性组](~~199625~~)。"}