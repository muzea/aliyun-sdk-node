{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"29163","abilityTreeNodes":["FEATUREecsTKAXF8","FEATUREecs70JNQP"]},"parameters":[{"name":"DiskId","in":"query","schema":{"description":"待回滚数据的云盘ID。","type":"string","required":true,"example":"d-bp199lyny9b3****"}},{"name":"SnapshotId","in":"query","schema":{"description":"需要恢复到某一云盘阶段的历史快照ID。","type":"string","required":true,"example":"s-bp199lyny9b3****"}},{"name":"DryRun","in":"query","schema":{"description":"是否预检本次请求。取值范围：\n\n- true：发送检查请求，不会直接回滚云盘。检查项包括是否填写了必选参数、请求格式和资源状态限制。如果检查不通过，则返回对应错误信息。如果检查通过，则返回错误码`DryRunOperation`。\n- false：发送正常请求，通过检查后直接发起云盘回滚操作。\n\n默认值：false。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"F3CD6886-D8D0-4FEE-B93E-1B732396****"}}}}},"errorCodes":{"400":[{"errorCode":"DiskCategory.OperationNotSupported","errorMessage":"The operation is not supported to the specified disk due to its disk category."},{"errorCode":"InvalidRegionId.MalFormed","errorMessage":"The specified RegionId is not valid."},{"errorCode":"DryRunOperation","errorMessage":"Request validation has been passed with DryRun flag set."}],"403":[{"errorCode":"IncorrectDiskStatus","errorMessage":"The current disk status does not support this operation."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The instance is locked due to security."},{"errorCode":"InvalidParameter.Mismatch","errorMessage":"The specified snapshot is not created from the specified disk."},{"errorCode":"InvalidSnapshot.TooOld","errorMessage":"The snapshotId is created before 2013-07-15, it cannot be restored since the first time the disk detached."},{"errorCode":"InstanceExpiredOrInArrears","errorMessage":"The specified operation is denied as your prepay instance is expired (prepay mode) or in arrears (afterpay mode)."},{"errorCode":"OperationDenied","errorMessage":"The specified snapshot dees not support ResetDisk."},{"errorCode":"InvalidSnapshotId.NotReady","errorMessage":"The specified snapshot has not completed yet."},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"InvalidAccountStatus.SnapshotServiceUnavailable","errorMessage":"Snapshot service has not been opened yet."},{"errorCode":"Operation.Conflict","errorMessage":"The operation may conflicts with others."},{"errorCode":"UserNotInTheWhiteList","errorMessage":"The user is not in disk white list."},{"errorCode":"InvalidParameter.KMSKeyId.CMKUnauthorized","errorMessage":"The CMK needs to be added ECS tag."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"IncorrectDiskStatus.HasUnfinishedSnapshot","errorMessage":"The current disk has unfinished snapshot."}],"404":[{"errorCode":"InvalidParameter.KMSKeyId.NotFound","errorMessage":"The specified KMSKeyId does not exist."},{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified disk does not exist."},{"errorCode":"Disk.NotFound","errorMessage":"The specified disk does not exist."},{"errorCode":"InvalidSnapshotId.NotFound","errorMessage":"The specified SnapshotId does not exist."},{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"F3CD6886-D8D0-4FEE-B93E-1B732396****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ResetDiskResponse>\\n    <RequestId>F3CD6886-D8D0-4FEE-B93E-1B732396****</RequestId>\\n</ResetDiskResponse>\",\"errorExample\":\"\"}]","title":"重置磁盘","summary":"调用ResetDisk使用云盘的历史快照回滚至某一阶段的云盘状态。","description":"调用该接口时，您需要注意：\n\n- 云盘的状态必须为使用中（In_Use）或空闲（Available）的状态。  \n- 云盘挂载的实例的状态必须为已停止（Stopped）。您可以调用[StopInstances](~~155372~~)停止实例。  \n- 指定的参数SnapshotId必须是由DiskId创建的历史快照。  \n- 通过[DescribeInstances](~~25506~~)查询ECS实例信息时，如果返回数据中包含`{\"OperationLocks\": {\"LockReason\" : \"security\"}}`，则禁止一切操作。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}