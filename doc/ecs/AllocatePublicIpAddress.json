{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"28783","abilityTreeNodes":["FEATUREecsCHDP5I"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"需要分配IP地址的实例ID。","type":"string","required":true,"example":"i-bp1gtjxuuvwj17zr****"}},{"name":"IpAddress","in":"query","schema":{"description":"实例的公网IP地址。如果该参数值为空，则默认由系统随机分配IP地址。","type":"string","required":false,"example":"112.124.**.**"}},{"name":"VlanId","in":"query","schema":{"description":"实例的VLAN ID。\n> 该参数即将被弃用，为提高兼容性，请尽量使用其他参数。\n","type":"string","required":false,"example":"720"}}],"responses":{"200":{"schema":{"type":"object","properties":{"IpAddress":{"description":"实例的公网IP地址。","type":"string","example":"112.124.**.**"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidOperation.AllocateFailed","errorMessage":"The current instance failed to allocate public IP, please try again later."},{"errorCode":"InvalidIpAddress.Malformed","errorMessage":"The specified parameter \"IpAddress\" is not valid."},{"errorCode":"OperationDenied","errorMessage":"Specified operation is denied as your instance is in VPC."},{"errorCode":"InsufficientPublicIp","errorMessage":"Ip address not found."},{"errorCode":"AllocateIpInvalidInstanceBandwidth","errorMessage":"OperationDenied The InternetMaxBandwidthOut of the specified instance cannot be less than 0."},{"errorCode":"OperationDenied.CloudboxNotSupport","errorMessage":"This operation is denied, because the specified ECS instance which is in the Cloudbox dose not support PublicIp or Eip."},{"errorCode":"OperationDenied.DedicatedRegionNotSupported","errorMessage":"This operation is denied, because the specified ECS instance which is in the dedicated region dose not support PublicIp or Eip."}],"403":[{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The specified operation is denied as your instance is locked for security reasons."},{"errorCode":"InstanceExpiredOrInArrears","errorMessage":"The specified operation is denied as your prepay instance is expired (prepay mode) or in arrears (afterpay mode)."},{"errorCode":"IpInUse","errorMessage":"The specified IP is already in use."},{"errorCode":"AllocatedAlready","errorMessage":"There is an IpAddress allocated already for the specified instance."},{"errorCode":"AllocateIp.Fail","errorMessage":"The specified instance fails to allocate ip, please try again."},{"errorCode":"NAT_PUBLIC_IP_BINDING_FAILED","errorMessage":"Binding nat public ip failed."},{"errorCode":"NAT_PUBLIC_IP_ALLOCATE_FAILED","errorMessage":"Nat public ip binding failed."},{"errorCode":"InvalidIpAddress.NotPublic","errorMessage":"The specified IP is not public address."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidVlanId.NotFound","errorMessage":"The VlanId provided does not exist in our records."},{"errorCode":"InvalidIpAddress.NotFound","errorMessage":"The specified IP is not in the specified vlan."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"IpAddress\\\": \\\"112.124.**.**\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"F2EF6A3B-E345-46B9-931E-0EA094818567\\\",\\n    \\\"IpAddress\\\": \\\"10.1.149.159\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<AllocatePublicIpAddressResponse>\\n    <RequestId>F2EF6A3B-E345-46B9-931E-0EA094818567</RequestId>\\n    <IpAddress>112.124.**.**</IpAddress>\\n</AllocatePublicIpAddressResponse>\",\"errorExample\":\"<AllocatePublicIpAddressResponse>\\n    <RequestId>F2EF6A3B-E345-46B9-931E-0EA094818567</RequestId>\\n    <IpAddress>10.1.149.159</IpAddress>\\n</AllocatePublicIpAddressResponse>\"}]","title":"分配固定公网IP","summary":"调用AllocatePublicIpAddress为一台ECS实例分配一个固定公网IP地址。","description":"调用该接口时，您需要注意：\n\n-  分配公网IP地址之前，实例必须处于**运行中**（`Running`）或者**已停止**（`Stopped`）状态。  \n\n-  被[安全控制](~~25695~~)的实例的`OperationLocks`中标记了`\"LockReason\" : \"security\"`时，不能分配公网IP地址。 \n\n-  一台实例只能分配一个公网IP地址。如果实例已经拥有一个公网IP地址，将报错`AllocatedAlready`。 \n\n-  重启实例（[RebootInstance](~~25502~~)）或者启动实例（[StartInstance](~~25500~~)）后，新的公网IP地址生效。  \n\n除分配公网IP之外，您还可以给VPC类型ECS实例绑定弹性公网IP（EIP）。更多信息，请参见[AssociateEipAddress](~~2518064~~)。 \n\n>当VPC类型实例绑定了EIP后，则无法再分配公网IP。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}