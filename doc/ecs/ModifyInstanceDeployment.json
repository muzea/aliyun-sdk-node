{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update","abilityTreeCode":"29073","abilityTreeNodes":["FEATUREecs7AL3YP"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"实例所在的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"i-bp67acfmxazb4ph***"}},{"name":"DedicatedHostId","in":"query","schema":{"description":"专有宿主机ID。调用[DescribeDedicatedHosts](~~134242~~)查看可以使用的专有宿主机。\n\n修改ECS实例宿主机（即将ECS实例从共享宿主机迁移至专有宿主机，或在不同专有宿主机间迁移ECS实例）时：\n- 若将实例迁移至指定专有宿主机上，必须设置该参数。\n- 若将实例迁移至系统自动为您选择的专有宿主机上，必须将该参数设置为空，并将参数`Tenancy`设置为host。\n\n自动部署功能详情，请参见[专有宿主机功能特性](~~118938~~)。","type":"string","required":false,"example":"dh-bp67acfmxazb4ph****"}},{"name":"DeploymentSetId","in":"query","schema":{"description":"部署集ID。\n\n将ECS实例加入一个部署集，或调整ECS实例的部署集时，该参数为必填参数。\n\n> 修改专有宿主机的相关参数（`Tenancy`、`Affinity`和`DedicatedHostId`）时，不可同时修改部署集。","type":"string","required":false,"example":"ds-bp67acfmxazb4ph****"}},{"name":"DeploymentSetGroupNo","in":"query","schema":{"description":"当ECS实例要加入或调整的部署集策略为部署集组高可用策略（AvailabilityGroup）时，可以通过该参数指定实例在部署集中的分组号。取值范围：1~7。\n\n> 如果您为ECS实例调整部署集，且部署集策略为部署集组高可用策略（`AvailablilityGroup`），当不指定该参数时，系统会自动在各组之间均衡分配ECS实例。如果您为ECS实例指定的仍是当前实例所属的部署集，系统也会重新在各组之间均衡分配ECS实例。","type":"integer","format":"int32","required":false,"example":"3"}},{"name":"Force","in":"query","schema":{"description":"实例在调整部署集时，是否强制更换实例宿主机。取值范围：\n         \n- true：允许。允许重启运行中（Running）、已停止（Stopped）状态的ECS实例。已停止状态的实例不包括启用节省停机模式的按量付费ECS实例。\n    > 如果您指定的ECS实例搭载了本地盘，则本地盘也会允许强制更换，这可能导致在更换宿主机时本地盘数据丢失，请谨慎操作。\n\n- false：不允许。只在当前宿主机上加入部署集。这可能导致更换部署集失败。\n\n默认值：false。","type":"boolean","required":false,"example":"false"}},{"name":"Affinity","in":"query","schema":{"description":"实例是否与专有宿主机关联。取值范围：\n\n- host：关联。已启用节省停机模式的实例停机后再次启动时，仍部署在原专有宿主机上。\n\n- default：不关联。已启用节省停机模式的实例停机后再次启动时，若原专有宿主机资源不足，可迁移至自动部署资源池中的其它专有宿主机上。\n\n实例从共享宿主机迁移至专有宿主机时，默认值为default。","type":"string","required":false,"example":"host"}},{"name":"Tenancy","in":"query","schema":{"description":"实例是否在专有宿主机上部署。取值：host，仅支持实例在专有宿主机上部署。","type":"string","required":false,"example":"host"}},{"name":"MigrationType","in":"query","schema":{"description":"是否先停止实例，再迁移到目标专有宿主机。取值范围：\n\n- reboot：先停止实例再迁移。\n\n- live：不停止实例，直接迁移。此时，您必须指定参数DedicatedHostId。该取值不支持在迁移ECS实例的同时变更实例规格。\n\n默认值：reboot。","type":"string","required":false,"example":"live"}},{"name":"InstanceType","in":"query","schema":{"description":"ECS实例要变更的目标实例规格。调用[DescribeInstanceTypes](~~25620~~)接口可获取最新实例规格列表。\n\n修改ECS实例宿主机时，可同时变更ECS实例规格。目标实例规格必须与指定专有宿主机的规格相匹配，详情请参见[宿主机规格](~~68564~~)。\n- 变更实例规格时，必须指定专有宿主机ID，即设置参数`DedicatedHostId`的值。\n- 使用自动部署功能迁移ECS实例时，不能变更实例规格。\n\n\n\n","type":"string","required":false,"example":"ecs.c6.large"}},{"name":"DedicatedHostClusterId","in":"query","schema":{"description":"专有宿主机集群ID。","type":"string","required":false,"example":"dc-bp67acfmxazb4ph****"}},{"name":"RemoveFromDeploymentSet","in":"query","schema":{"description":"是否将所选实例移出所选部署集。取值范围：\n\n- true：是。\n\n- false：否。\n\n默认值：false。\n\n> 当该参数为true时，必须指定具有所属关系的InstanceId和DeploymentSetId。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"04F0F334-1335-436C-A1D7-6C044FE7****"}}}}},"errorCodes":{"400":[{"errorCode":"OperationDenied.UnstoppedInstance","errorMessage":"Operation denied due to unstopped instance."},{"errorCode":"InvalidDedicatedHostStatus.NotSupport","errorMessage":"Operation denied due to dedicated host status."},{"errorCode":"InvalidPeriod.ExceededDedicatedHost","errorMessage":"Instance expired date can't exceed dedicated host expired date."},{"errorCode":"NoAvaliableDedicatedHost","errorMessage":"There's no enough resource on the specified dedicated host."},{"errorCode":"OperationDenied.LocalDiskInstance","errorMessage":"Operation denied due to instance has local disk."},{"errorCode":"InvalidParameter.Param","errorMessage":"Requested param is invalid."},{"errorCode":"InvalidParam.Tenancy","errorMessage":"The specified Tenancy is invalid."},{"errorCode":"InvalidParam.DedicatedHostId","errorMessage":"The specified dedicated host id is the same with present host id!"},{"errorCode":"InvalidDedicatedHost.NotEnoughResource","errorMessage":"There's no available dedicated host to perform the operation."},{"errorCode":"OperationDenied.InvalidInstance","errorMessage":"The specified instance is not dedicated instance."},{"errorCode":"ChargeTypeViolation.PostPaidDedicatedHost","errorMessage":"Prepaid instance onto postpaid dedicated host is not allowed."},{"errorCode":"OperationDenied.NotSupport","errorMessage":"Ecs on dedicatedHost has been migrated."},{"errorCode":"InvalidDedicatedHostId.NotFound","errorMessage":"The specified DedicatedHostId does not exist."},{"errorCode":"OperationDenied.CannotPerform","errorMessage":"Live migration cannot be performed."},{"errorCode":"InvalidInstanceType.ValueNotSupported","errorMessage":"The specified InstanceType does not exist or beyond the permitted range."},{"errorCode":"InvalidParameter.Tenancy","errorMessage":"The specified Tenancy is invalid."},{"errorCode":"InvalidParameter.Affinity","errorMessage":"The specified Affinity is invalid."},{"errorCode":"InvalidInstanceType.NotSupport","errorMessage":"The parameter EcsMigrationType conflict with InstanceType, live migration do not support InstanceType alter on ddh."},{"errorCode":"InvalidParam.InstanceId","errorMessage":"The specified InstanceId should be on dedicatedHost."},{"errorCode":"InvalidDedicatedHostClusterId.NotFound","errorMessage":"The specified DedicatedHostClusterId does not exist."},{"errorCode":"InvalidDedicatedHostClusterId.Invalid","errorMessage":"The specified Dedicated Host Cluster is invalid."},{"errorCode":"InvalidDestinationZone.DeploymentSetMismatch","errorMessage":"Error happened, %s."}],"403":[{"errorCode":"IncorrectInstanceStatus","errorMessage":"%s"},{"errorCode":"OperationDenied.NoStock","errorMessage":"The resource is out of usage."},{"errorCode":"InvalidDeploymentSetId.NoAvailableResources","errorMessage":"There are no available resources for the specified deployment, you can set the parameter force to true to retry, or wait for additional resource to become available."}],"404":[{"errorCode":"InvalidDeploymentSetId.NotFound","errorMessage":"The specified deployment set does not exist."},{"errorCode":"InvalidDedicatedHostId.NotFound","errorMessage":"The specified DedicatedHostId does not exist."},{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"OperationDenied.UnstoppedInstance","errorMessage":"Operation denied due to unstopped instance."},{"errorCode":"InvalidInstanceNetworkType.NotSupport","errorMessage":"The specified Instance network type not support."},{"errorCode":"InvalidInstanceChargeType.NotSupport","errorMessage":"The Dedicated host not support the specified instance charge type."},{"errorCode":"InvalidInstanceType.NotSupport","errorMessage":"The Dedicated host not support the specified instance type."},{"errorCode":"InvalidParameter.DeploymentSetGroupNo","errorMessage":"Parameter DeploymentSetGroupNo is invalid."},{"errorCode":"InvalidDedicatedHostId.NotSupport","errorMessage":"Cannot choose instance present host as destination host."},{"errorCode":"InvalidDedicatedHost.NotFound","errorMessage":"No available host."},{"errorCode":"InvalidParam.DedicatedHostId","errorMessage":"Parameter dedicated host id must been provided in such operation."},{"errorCode":"InvalidDedicatedHost.ZoneNotMatch","errorMessage":"The specify dedicated host zone location not match the instance zone location."},{"errorCode":"InvalidOperation.NotSupport","errorMessage":"The specified DedicatedHost operation not supported on MPS."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"04F0F334-1335-436C-A1D7-6C044FE7****\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<ModifyInstanceDeploymentResponse>\\n    <RequestId>04F0F334-1335-436C-A1D7-6C044FE7****</RequestId>\\n</ModifyInstanceDeploymentResponse>\",\"errorExample\":\"\"}]","title":"修改实例部署集","summary":"调用ModifyInstanceDeployment修改ECS实例的部署集，或迁移ECS实例至专有宿主机。支持在迁移ECS实例的同时变更实例规格。","description":"迁移ECS实例至专有宿主机，或在迁移实例同时变更ECS实例规格时，必须满足以下条件：\n\n- ECS实例必须处于**已停止**（Stopped）状态，迁移后实例自动重启。\n- 只支持专有网络VPC类型的ECS实例。\n- ECS实例与专有宿主机必须属于同一账号、同一地域和可用区。\n- 按量付费ECS实例可以迁移到包年包月专有宿主机上。包年包月ECS实例只能在包年包月专有宿主机之间迁移，且实例到期时间不能超过目标专有宿主机的到期时间。\n- 将ECS实例从共享宿主机迁移至专有宿主机时，实例的计费方式只能是按量付费，不支持包年包月实例和抢占式实例。\n- ECS实例可以指定专有宿主机集群重新部署。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}