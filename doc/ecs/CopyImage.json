{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"28811","abilityTreeNodes":["FEATUREecsZ3BT05"]},"parameters":[{"name":"DestinationImageName","in":"query","schema":{"description":"复制后的镜像的名称。长度为2~128个字符。必须以大小写字母或中文开头，也不能以`aliyun`或`acs:`开头，不能包含`http://`或者`https://`。可以包含数字、半角句号（.）、半角冒号（:）、下划线（_）或者短划线（-）。","type":"string","required":false,"example":"YourImageName"}},{"name":"DestinationDescription","in":"query","schema":{"description":"复制后的镜像的描述信息。长度为2~256个英文或中文字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"This is a description example."}},{"name":"ImageId","in":"query","schema":{"description":"源自定义镜像的ID。","type":"string","required":true,"example":"m-bp1h46wfpjsjastc****"}},{"name":"RegionId","in":"query","schema":{"description":"源自定义镜像的地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。 ","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"DestinationRegionId","in":"query","schema":{"description":"复制到目标地域的ID。","type":"string","required":false,"example":"cn-shanghai"}},{"name":"Encrypted","in":"query","schema":{"description":"是否加密复制后的镜像。\n\n- true：加密。\n- false：不加密。\n\n默认值：false。","type":"boolean","required":false,"example":"false"}},{"name":"KMSKeyId","in":"query","schema":{"description":"加密镜像使用的密钥ID。","type":"string","required":false,"example":"e522b26d-abf6-4e0d-b5da-04b7******3c","maxLength":64}},{"name":"EncryptAlgorithm","in":"query","schema":{"description":">该参数暂未开放使用。","type":"string","required":false,"example":"hide"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"复制后的镜像的资源组ID。如果不设置该参数值，复制后的镜像属于默认资源组。\n\n> 如果您当前使用的是RAM用户调用该接口，且`ResourceGroupId`取值为空，您需要注意，当RAM用户没有默认资源组权限时，调用接口会返回报错信息`Forbidden: User not authorized to operate on the specified resource`。请您设置RAM用户支持的资源组ID或者通过相应阿里云账号为该RAM用户授予默认资源组权限后，再次调用该接口。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"description":"标签列表。","type":"object","properties":{"Key":{"description":"复制后的镜像的标签键。N的取值范围为1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以`aliyun`或`acs:`开头，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"复制后的镜像的标签值。N的取值范围为1~20。一旦传入该值，可以为空字符串。最多支持128个字符，不能以`acs:`开头，不能包含`http://`或`https://`。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":20}}],"responses":{"200":{"schema":{"type":"object","properties":{"ImageId":{"description":"复制后的镜像的ID。","type":"string","example":"m-bp1h46wfpjsjastd****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidDescription.Malformed","errorMessage":"The specified destination description is wrongly formed."},{"errorCode":"SourceRegion.NotFound","errorMessage":"The source region not found."},{"errorCode":"DestinationRegion.NotFound","errorMessage":"The destination region not found."},{"errorCode":"IncorrectImageStatus","errorMessage":"The image not available."},{"errorCode":"InvalidSnapshotId.NotFound","errorMessage":"The specified SnapshotId does not exist."},{"errorCode":"InvalidImageName.Duplicated","errorMessage":"The destination image is exist."},{"errorCode":"InvalidParameter.EncryptedIllegal","errorMessage":"The specified parameter Encrypted must be true when kmsKeyId is not empty."},{"errorCode":"InvalidEncrypted.NotMatchEncryptAlgorithm","errorMessage":"The specified parameter Encrypted must be true when EncryptAlgorithm is not empty."},{"errorCode":"InvalidEncryptAlgorithm","errorMessage":"The specified parameter EncryptAlgorithm is not valid."},{"errorCode":"InvalidEncrypted.NotMatchKmsKeyId","errorMessage":"The specified parameter Encrypted must be true when KmsKeyId is not empty."},{"errorCode":"OperationDenied.CommunityImage","errorMessage":"Community image does not support copy."},{"errorCode":"InvalidImageName.Malformed","errorMessage":"The specified destination image name is wrongly formed."},{"errorCode":"InvalidParameter.KmsNotEnabled","errorMessage":"The specified operation need enable KMS."}],"401":[{"errorCode":"InvalidAliUid.IsNull","errorMessage":"The aliUid must not be null."}],"403":[{"errorCode":"Forbbiden","errorMessage":"User not authorized to operate on the specified resource."},{"errorCode":"QuotaExceed.Image","errorMessage":"The Image Quota exceeds."},{"errorCode":"QuotaExceed.Snapshot","errorMessage":"The snapshot quota exceeds."},{"errorCode":"OperationDenied.ImageCopying","errorMessage":"The Image are coping."},{"errorCode":"RegionNotSupportCopy","errorMessage":"The region not support copy."},{"errorCode":"InvalidSnapshot.TooOld","errorMessage":"This operation is denied because the specified snapshot is created before 2013-07-15."},{"errorCode":"OperationDenied","errorMessage":"The specified snapshot is not allowed to create image."},{"errorCode":"IncorrectDestinationRegion","errorMessage":"The destination region is not equal the target region."},{"errorCode":"SizeExceed.Image","errorMessage":"The image exceeds the maximum size. Please open a ticket to add the account to the white list."},{"errorCode":"OperationDeined.EncryptedSnapshot","errorMessage":"The image contains encrypted snapshots, which do not support copying."},{"errorCode":"OperationDenied.SameRegionOnly","errorMessage":"The image shared from others can not be copied to another region directly."},{"errorCode":"OperationDenied.NotPublished","errorMessage":"The operation is denied because corresponding marketplace image is not published in destination region."},{"errorCode":"OperationDenied.NotAuthorized","errorMessage":"The operation is denied because corresponding marketplace image is not authorized to current user."},{"errorCode":"OperationDenied.EncryptSnapshotAcrossRegion","errorMessage":"The image do not contain encrypted snapshots, which do not support copying to encrypted ones."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"InvalidRegion.NotSupport","errorMessage":"The specified region does not support byok."},{"errorCode":"UserNotInTheWhiteList","errorMessage":"The user is not in byok white list."},{"errorCode":"InvalidRegionId.NotSupportEncryptAlgorithm","errorMessage":"The current region does not support creating encrypted disks with EncryptAlgorithm."},{"errorCode":"OperationDenied.KmsServiceUnauthorized","errorMessage":"The account is not authorized to kms service, please authorize it."},{"errorCode":"OperationDenied.NonCompliantDestinationRegion","errorMessage":"The copy operation to the destination region is not in compliance with regulations."}],"404":[{"errorCode":"InvalidImageId.NotFound","errorMessage":"The specified ImageId does not exist."},{"errorCode":"InvalidParameter.KMSKeyId.NotFound","errorMessage":"The specified KMSKeyId does not exist."},{"errorCode":"InvalidResourceGroup.NotFound","errorMessage":"The ResourceGroup provided does not exist in our records."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error, exception or failure."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"ImageId\\\": \\\"m-bp1h46wfpjsjastd****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"C8B26B44-0189-443E-9816-D951F59623A9\\\",\\n    \\\"ImageId\\\": \\\"Img-231234567\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<CopyImageResponse>\\n    <RequestId>C8B26B44-0189-443E-9816-D951F59623A9</RequestId>\\n    <ImageId>m-bp1h46wfpjsjastd****</ImageId>\\n</CopyImageResponse>\",\"errorExample\":\"<CopyImageResponse>\\n    <RequestId>C8B26B44-0189-443E-9816-D951F59623A9</RequestId>\\n    <ImageId>Img-231234567</ImageId>\\n</CopyImageResponse>\"}]","title":"复制一个地域下的自定义镜像到其他地域","summary":"调用CopyImage复制一个地域下的自定义镜像到其他地域。复制镜像可以实现跨地域部署ECS实例、跨地域复制ECS实例等目的。","description":"## 接口说明\n您可以在其他地域使用复制后的镜像创建ECS实例（RunInstances），或者更换实例的系统盘（ReplaceSystemDisk）。 \n\n调用该接口时，您需要注意：\n\n- 自定义镜像的状态必须为可用（`Available`）。  \n- 源自定义镜像可以是您账号下的自定义镜像或者其他人共享给您的镜像，不能跨账号复制。 \n- 复制镜像期间，您无法删除复制后的镜像（[DeleteImage](~~25537~~)），但是您可以取消复制任务（[CancelCopyImage](~~25539~~)）。  \n- 同一个地域下同时只能有一个镜像复制任务运行，其余任务需要排队等待上一个任务完成后再依次排队执行。\n- 您可以通过`ResourceGroupId`参数指定复制后的镜像所属的资源组。如果不设置`ResourceGroupId`参数值，复制后的镜像属于默认资源组。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}