{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update","abilityTreeCode":"29020","abilityTreeNodes":["FEATUREecsDXRH67"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"待卸载的ECS实例ID。","type":"string","required":true,"example":"i-bp67acfmxazb4p****"}},{"name":"DiskId","in":"query","schema":{"description":"待卸载的磁盘ID。","type":"string","required":true,"example":"d-bp67acfmxazb4p****"}},{"name":"DeleteWithInstance","in":"query","schema":{"description":"卸载系统盘或数据盘时，设置自动释放属性。表示释放ECS实例时，是否同时释放该系统盘或数据盘。\n\n- true：释放。\n- false：不释放。云盘被转换为按量付费数据盘被保留下来。\n\n默认值：true\n\n您需要注意：\n\n- 开启多重挂载特性的云盘，不支持设置该参数。\n- 如果卸载的是数据盘，默认值为`false`。\n- 若您需要卸载的目标磁盘为`弹性临时盘`，则必须将`DeleteWithInstance`参数设置为`true`。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter","errorMessage":"The input parameter is mandatory for processing this request is empty."},{"errorCode":"InvalidRegionId.MalFormed","errorMessage":"The specified RegionId is not valid."},{"errorCode":"InvalidOperation.InstanceTypeNotSupport","errorMessage":"The instance type of the specified instance does not support hot detach disk."},{"errorCode":"DisksDetachingOnEcsExceeded","errorMessage":"The number of disks detaching on the instance exceeds the limit."}],"403":[{"errorCode":"IncorrectDiskStatus","errorMessage":"The current disk status does not support this operation."},{"errorCode":"DiskNotPortable","errorMessage":"The specified disk is not a portable disk."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The instance is locked due to security."},{"errorCode":"DependencyViolation","errorMessage":"The specified disk has not been attached on the specified instance."},{"errorCode":"DiskTypeViolation","errorMessage":"The specified disk is a system disk and cannot support the operation."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"UserNotInTheWhiteList","errorMessage":"The user is not in disk white list."},{"errorCode":"InvalidInstance.ImageCategory","errorMessage":"The image category of the specified instance does not support detaching system disk."},{"errorCode":"DeleteWithInstance.Conflict","errorMessage":"Multi attach disk cannot be set to DeleteWithInstance attribute."},{"errorCode":"InvalidOperation.DiskCategoryUnsupported","errorMessage":"The DetachDisk operation is not supported for elastic ephemeral disk."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified disk does not exist."},{"errorCode":"InvalidDisk.AlreadyDetached","errorMessage":"The specified disk has been detached."},{"errorCode":"InvalidDiskId.OperationNotSupported","errorMessage":"The operation is not supported due to base image not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DetachDiskResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n</DetachDiskResponse>\",\"errorExample\":\"\"}]","title":"卸载按量付费数据盘或系统盘","summary":"调用DetachDisk从一台ECS实例上卸载一块按量付费数据盘，或者卸载一块系统盘。","description":"调用该接口时，请注意：\n\n- 磁盘必须已经挂载到实例上，状态为使用中（`In_use`)。 \n- 卸载数据盘时，所挂载的实例必须处于**运行中**（`Running`）或者**已停止**（`Stopped`）状态。 \n- 卸载系统盘时，所挂载的实例必须处于**已停止**（`Stopped`）状态。 \n- 所挂载的实例被安全控制后，`OperationLocks`中不能标记为`\"LockReason\" : \"security\"`的锁定状态。\n- DetachDisk是异步操作，调用接口成功后等待一分钟左右才能完成卸载。\n- 弹性临时盘一旦卸载，只能重新挂载至其原始实例。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}