{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"29141","abilityTreeNodes":["FEATUREecs0ILANB"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"处于运行中或者已停止状态的实例ID。","type":"string","required":true,"example":"i-bp1azkttqpldxgted****"}},{"name":"ForceStop","in":"query","schema":{"description":"是否强制停止运行中（Running）的实例。\n\n默认值：false\n\n> 强制停止等同于典型的服务器断电关机，实例操作系统中暂未写入存储设备的数据会丢失。建议您尽量对已停止实例做重新部署操作。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"TaskId":{"description":"重新部署的任务ID。\n\n您可以使用[DescribeTasks](~~25622~~)接口查询迁移结果。\n","type":"string","example":"t-bp10e8orkp8x****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"403":[{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The specified operation is denied as your instance is locked for security reasons."},{"errorCode":"DiskError","errorMessage":"IncorrectDiskStatus."},{"errorCode":"InstanceExpiredOrInArrears","errorMessage":"The specified operation is denied as your prepay instance is expired (prepay mode) or in arrears (afterpay mode)."},{"errorCode":"InvalidOperation.RedeployInstance","errorMessage":"%s"}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The InstanceId provided does not exist in our records."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"TaskId\\\": \\\"t-bp10e8orkp8x****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"1C488B66-B819-4D14-8711-C4EAAA13AC01\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<RedeployInstanceResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <TaskId>t-bp10e8orkp8x****</TaskId>\\n</RedeployInstanceResponse>\",\"errorExample\":\"<RedeployInstanceResponse>\\n    <RequestId>1C488B66-B819-4D14-8711-C4EAAA13AC01</RequestId>\\n</RedeployInstanceResponse>\"}]","title":"重新部署实例","summary":"当ECS实例收到系统事件通知时，调用RedeployInstance可以重新部署这台ECS实例。","description":"RedeployInstance为异步调用接口，会重启并迁移实例。重新部署成功后，实例进入运行中（`Running`）状态。重新部署失败时，实例返回原有的物理服务器，并恢复到重新部署前的状态。\n\n调用该接口时，您需要注意：\n\n- 目标实例必须处于运行中或者已停止状态，调用接口后的实例状态变化：\n    - 处于运行中（`Running`）的实例会进入停止中（`Stopping`）状态。\n    - 处于已停止（`Stopped`）的实例会进入启动中（`Starting`）状态。\n- 不支持重新部署专有宿主机上的实例。\n- 被安全控制的实例的`OperationLocks`中标记了`\"LockReason\": \"security\"`时，不支持重新部署。\n- 不支持响应通过CreateSimulatedSystemEvent创建的模拟事件。\n- 在隔离本地盘的系统事件流程中，受损本地盘已隔离但尚未发出**因系统维护计划重启并重新初始化坏盘**事件（SystemMaintenance.RebootAndReInitErrorDisk）时，也可以调用RedeployInstance。更多详情，请参见[本地盘实例系统事件概述](~~107693~~)。\n\nRedeployInstance能响应系统事件类型及事件状态请参见下表。\n\n| 事件名称及参数 | 事件状态 |\n| --- | --- |\n| 因系统维护实例重启（SystemMaintenance.Reboot）| Inquiring、Scheduled|\n| 因系统维护实例重新部署（SystemMaintenance.Redeploy）| Inquiring、Scheduled |\n| 因系统维护重启并更换坏盘（SystemMaintenance.RebootAndIsolateErrorDisk）| Inquiring |\n| 因系统维护重启并重新初始化坏盘（SystemMaintenance.RebootAndReInitErrorDisk）| Inquiring |\n| 因系统错误实例重新部署（SystemFailure.Redeploy）| Inquiring、Scheduled |\n| 仅限使用了本地盘的ECS实例：因系统错误实例重新启动（SystemFailure.Reboot）| Executing |\n| 因系统维护隔离坏盘（SystemMaintenance.IsolateErrorDisk） | Inquiring |\n| 因系统维护重新初始化坏盘（SystemMaintenance.ReInitErrorDisk） | Inquiring |\n\n> 重新部署本地盘实例会重新初始化本地盘，存储设备的数据被清空。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}