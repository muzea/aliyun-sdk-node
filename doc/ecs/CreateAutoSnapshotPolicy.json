{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"create","abilityTreeCode":"28815","abilityTreeNodes":["FEATUREecsTKAXF8","FEATUREecs70JNQP"]},"parameters":[{"name":"regionId","in":"query","schema":{"description":"自动快照策略所属的地域。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"autoSnapshotPolicyName","in":"query","schema":{"description":"自动快照策略的名称。长度为2~128个英文或中文字符。必须以大小写字母或中文开头，不能以http://或https://开头。可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。\n\n默认值：空","type":"string","required":false,"example":"TestName"}},{"name":"timePoints","in":"query","schema":{"description":"自动快照的创建时间点。使用UTC +8时间，单位为小时。取值范围：0~23，代表00:00至23:00共24个时间点，例如1表示01:00。格式说明：\n\n- 传入的参数需要保持JSON数组格式。例如，\\[\"1\"\\]表示01:00创建自动快照。\n- 当一天内需要创建多次自动快照时，可以传入多个时间点，时间点之间用半角逗号（,）隔开，最多传入24个时间点。例如，\\[\"1\",\"3\",\"5\"\\]表示01:00、03:00、05:00时创建自动快照。","type":"string","required":true,"example":"[\"0\", \"1\", … \"23\"]"}},{"name":"repeatWeekdays","in":"query","schema":{"description":"自动快照的重复日期，单位为天，周期为星期。取值范围：1~7，例如1表示周一。格式说明：\n\n- 传入的参数需要保持JSON数组格式。例如，\\[\"1\"\\]表示每周一重复创建自动快照。\n- 当一星期内需要创建多次自动快照时，可以传入多个时间点，时间点之间用半角逗号（,）隔开，最多传入7个时间点。例如，\\[\"1\",\"3\",\"5\"\\]表示每周一、周三、周五重复创建自动快照。","type":"string","required":true,"example":"[\"1\",\"2\"]"}},{"name":"retentionDays","in":"query","schema":{"description":"自动快照的保留时间，单位为天。取值范围：\n\n- -1：永久保存\n- 1~65535：指定保存天数\n\n默认值：-1。","type":"integer","format":"int32","required":true,"example":"30"}},{"name":"EnableCrossRegionCopy","in":"query","schema":{"description":"是否允许自动跨地域复制。\n\n- true：允许。\n- false：不允许。","type":"boolean","required":false,"example":"false"}},{"name":"TargetCopyRegions","in":"query","schema":{"description":"跨地域复制快照的目标地域。目前支持设置一个目标地域。","type":"string","required":false,"example":"[\"cn-hangzhou\"]"}},{"name":"StorageLocationArn","in":"query","schema":{"description":"> 该参数暂未开放使用。","type":"string","required":false,"example":"null"}},{"name":"CopiedSnapshotsRetentionDays","in":"query","schema":{"description":"跨地域复制快照的保留时间，单位为天。取值范围：\n\n- -1：永久保存\n- 1~65535：指定保存天数\n\n默认值：-1。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"type":"object","properties":{"Key":{"description":"快照的标签键。N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以aliyun或acs:开头，不能包含http://或https://。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"快照的标签值。N的取值范围：1~20。一旦传入该值，可以为空字符串。最多支持128个字符，不能以acs:开头，不能包含http://或https://。","type":"string","required":false,"example":"TestValue"}},"required":false},"required":false,"maxItems":20}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-aek2kkmhmhs****"}},{"name":"CopyEncryptionConfiguration","in":"query","style":"flat","schema":{"description":"快照异地备份加密参数对象","type":"object","properties":{"Encrypted":{"description":"是否开启快照异地加密备份。取值范围：\n\n- true：是。\n- false：否。\n\n默认值：false。","type":"boolean","required":false,"example":"false"},"KMSKeyId":{"description":"快照异地加密备份使用的 KMS 密钥 ID","type":"string","required":false,"example":"0e478b7a-4262-4802-b8cb-00d3fb40826X"},"Arn":{"description":"该参数暂未开放使用。","type":"array","items":{"type":"object","properties":{"RoleType":{"description":"该参数暂未开放使用。","type":"string","required":false,"example":"hide"},"Rolearn":{"description":"该参数暂未开放使用。","type":"string","required":false,"example":"hide"},"AssumeRoleFor":{"description":"该参数暂未开放使用。","type":"integer","format":"int64","required":false,"example":"1000000000"}},"required":false},"required":false,"maxItems":10}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"AutoSnapshotPolicyId":{"description":"自动快照策略ID。","type":"string","example":"sp-bp12m37ccmxvbmi5****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"DiskCategory.OperationNotSupported","errorMessage":"The type of the specified disk does not support creating a snapshot."},{"errorCode":"InvalidSnapshotPolicyName.Malformed","errorMessage":"The specified autoSnapshotPolicyName is wrongly formed."},{"errorCode":"Duplicate.TagKey","errorMessage":"The Tag.N.Key contain duplicate key."},{"errorCode":"InvalidTagKey.Malformed","errorMessage":"The specified Tag.n.Key is not valid."},{"errorCode":"InvalidTagValue.Malformed","errorMessage":"The specified Tag.n.Value is not valid."},{"errorCode":"InvalidParameter.EncryptedIllegal","errorMessage":"The specified parameter Encrypted must be true when kmsKeyId is not empty."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KmsNotEnabled","errorMessage":"Failed to perform this operation because KMS is not activated."},{"errorCode":"InvalidParameter.Encrypted.KmsNotEnable","errorMessage":"Failed to perform this operation because KMS is not activated."},{"errorCode":"InvalidParam.EncryptedMismatch","errorMessage":"Creating encrypted disks with shared encrypted image requires replacing encryption keys."}],"403":[{"errorCode":"ParameterInvalid","errorMessage":"The specified RegionId parameter is invalid."},{"errorCode":"AutoSnapshotPolicy.QuotaExceed","errorMessage":"The maximum number of automatic snapshot policy has been reached."},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"InvalidAccountStatus.SnapshotServiceUnavailable","errorMessage":"Snapshot service has not been opened yet."},{"errorCode":"InvalidParameter.TargetCopyRegions","errorMessage":"The specified TargetCopyRegions is invalid."},{"errorCode":"InvalidParameter.CopiedSnapshotsRetentionDays","errorMessage":"The specified CopiedSnapshotsRetentionDays is invalid."},{"errorCode":"InvalidParameter.KMSKeyId.CMKUnauthorized","errorMessage":"The CMK needs to be added ECS tag."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"InvalidOperation.KMSKeyIdNotFound","errorMessage":"The specified KMSKeyId not found, %s."},{"errorCode":"Abs.InvalidAction.RegionNotSupport","errorMessage":"This region does not support this action."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"AutoSnapshotPolicyId\\\": \\\"sp-bp12m37ccmxvbmi5****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\":\\\"F3CD6886-D8D0-4FEE-B93E-1B73239673DE\\\"\\n    \\\"AutoSnapshotPolicyId\\\":\\\"p-233e6ylv0\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<CreateAutoSnapshotPolicyResponse>\\n    <RequestId>F3CD6886-D8D0-4FEE-B93E-1B73239673DE</RequestId>\\n    <AutoSnapshotPolicyId>sp-bp12m37ccmxvbmi5****</AutoSnapshotPolicyId>\\n</CreateAutoSnapshotPolicyResponse>\",\"errorExample\":\"<CreateAutoSnapshotPolicyResponse>\\n    <RequestId>F3CD6886-D8D0-4FEE-B93E-1B73239673DE</RequestId>\\n    <AutoSnapshotPolicyId>p-233e6ylv0</AutoSnapshotPolicyId>\\n</CreateAutoSnapshotPolicyResponse>\"}]","title":"创建一条自动快照策略","summary":"调用CreateAutoSnapshotPolicy在指定地域下创建一条自动快照策略。自动快照策略可以周期性地为云盘创建快照备份数据，同时适用于系统盘和数据盘。已启用快照跨地域复制且在未配置加密参数场景下，加密快照默认使用目的端服务密钥进行加密拷贝。","description":"## 接口说明\n\n调用该接口创建自动快照策略时，您可以设置自动快照的重复周期、保留时间以及跨地域备份等策略。满足您多样化的数据备份要求。创建自动快照策略后，需要调用[ApplyAutoSnapshotPolicy](~~25531~~)将策略应用到目标云盘。如果您需要调整自动快照策略的内容，请调用[ModifyAutoSnapshotPolicyEx](~~25529~~)。\n\n调用该接口时，您需要注意：\n\n-  一个阿里云账户在一个地域最多能创建100条自动快照策略。 \n\n-  如果云盘数据较多，单次创建自动快照的时长超过两个时间点之间的间隔，则自动跳过下一时间点。示例：您设置了09:00、10:00、11:00和12:00为自动快照时间点。由于云盘数据较多，09:00开始创建快照，10:20完成创建快照，实际耗时80分钟。系统会跳过时间点10:00，等到11:00继续为您创建自动快照。\n\n- 跨地域复制快照的注意事项请参见[复制快照](~~159441~~)的背景信息章节。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}