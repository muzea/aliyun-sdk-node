{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"29077","abilityTreeNodes":["FEATUREecsGR65E9"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"指定的实例ID。","type":"string","required":true,"docRequired":true,"example":"i-bp67acfmxazb4p****"}},{"name":"InstanceType","in":"query","schema":{"description":"实例的目标规格。更多信息，请参见[实例规格族](~~25378~~)，也可以调用[DescribeInstanceTypes](~~25620~~)接口获得最新的规格表。","type":"string","required":false,"example":"ecs.g6.large"}},{"name":"InternetMaxBandwidthOut","in":"query","schema":{"description":"公网出带宽最大值，单位为Mbit/s（Megabit per second）。取值范围：0~100。\n\n> **按使用流量计费**模式下的出入带宽峰值都是带宽上限，不作为业务承诺指标。当出现资源争抢时，带宽峰值可能会受到限制。如果您的业务需要有带宽的保障，请使用**按固定带宽计费**模式。\n\n","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"InternetMaxBandwidthIn","in":"query","schema":{"description":"公网入带宽最大值，单位为Mbit/s（Megabit per second）。取值范围：\n\n- 当所购公网出带宽小于等于10 Mbit/s时：1~10，默认为10。\n- 当所购公网出带宽大于10 Mbit/s时：1~`InternetMaxBandwidthOut`的取值，默认为`InternetMaxBandwidthOut`的取值。\n\n> **按使用流量计费**模式下的出入带宽峰值都是带宽上限，不作为业务承诺指标。当出现资源争抢时，带宽峰值可能会受到限制。如果您的业务需要有带宽的保障，请使用**按固定带宽计费**模式。\n","type":"integer","format":"int32","required":false,"maximum":"200","minimum":"1","example":"10"}},{"name":"Temporary.StartTime","in":"query","schema":{"description":">该参数正在邀测中，暂未开放使用。","type":"string","required":false,"example":"null"}},{"name":"Temporary.EndTime","in":"query","schema":{"description":">该参数正在邀测中，暂未开放使用。","type":"string","required":false,"example":"null"}},{"name":"Temporary.InternetMaxBandwidthOut","in":"query","schema":{"description":">该参数正在邀测中，暂未开放使用。","type":"integer","format":"int32","required":false,"maximum":"100","minimum":"1","example":"null"}},{"name":"Async","in":"query","schema":{"description":"是否提交异步请求。取值范围：\n- true：是。\n- false：否。\n\n默认值：false。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"AllowMigrateAcrossZone","in":"query","schema":{"description":"是否支持跨集群升级实例规格。\n- true：是。\n- false：否。\n\n默认值：false。\n\n当参数`AllowMigrateAcrossZone`取值为true时，一旦您根据返回信息升级了云服务器，请留意以下注意事项：\n\n经典网络类型实例：\n    \n* 对于[已停售的实例规格](~~55263~~)，非I/O优化实例变配到I/O优化实例时，实例私网IP地址、磁盘设备名和软件授权码会发生变化。对于Linux实例，普通云盘（`cloud`）会被识别为**xvda**或者**xvdb**等，高效云盘（`cloud_efficiency`）和SSD云盘（`cloud_ssd`）会被识别为**vda**或者**vdb**等。\n    \n* 对于[正常售卖的实例规格族](~~25378~~)，实例的私网IP地址会发生变化。\n\n专有网络VPC类型实例：对于[已停售的实例规格](~~55263~~)，非I/O优化实例变配到I/O优化实例时，云服务器磁盘设备名和软件授权码会发生变化。Linux实例的普通云盘（`cloud`）会被识别为**xvda**或者**xvdb**等，高效云盘（`cloud_efficiency`）和SSD云盘（`cloud_ssd`）会被识别为**vda**或者**vdb**等。","type":"boolean","required":false,"example":"false","default":"false"}},{"name":"SystemDisk.Category","in":"query","schema":{"description":"更换系统盘类型。取值范围：\n\n- cloud_efficiency：高效云盘\n\n- cloud_ssd：SSD云盘\n\n>该参数只有在从[已停售的实例规格](~~55263~~)升级到[正常售卖的实例规格族](~~25378~~)，并将非I/O优化实例规格升级为I/O优化实例规格时有效。","type":"string","required":false,"example":"cloud_ssd"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。更多信息，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"0c593ea1-3bea-11e9-b96b-88e9fe637760"}},{"name":"ModifyMode","in":"query","schema":{"description":">该参数暂未开放使用。","type":"string","required":false,"example":"null","enum":["Online","Offline"]}},{"name":"Disk","in":"query","style":"repeatList","schema":{"description":">该参数暂未开放使用。","type":"array","items":{"description":">该参数暂未开放使用。","type":"object","properties":{"DiskId":{"description":">该参数暂未开放使用。","type":"string","required":false,"example":"null"},"Category":{"description":">该参数暂未开放使用。","type":"string","required":false,"example":"null"},"PerformanceLevel":{"description":">该参数暂未开放使用。","type":"string","required":false,"example":"null"}},"required":false},"required":false,"maxItems":128}},{"name":"DryRun","in":"query","schema":{"description":"是否只预检此次请求。取值范围：\n\n- true：发送检查请求，不会调整实例的实例规格和公网带宽大小。检查项包括是否填写了必需参数、请求格式、业务限制和 ECS 库存。如果检查不通过，则返回对应错误。如果检查通过，则返回错误码`DryRunOperation`。\n- false（默认）：发送正常请求，通过检查后直接调整实例的实例规格和公网带宽大小。","type":"boolean","required":false,"example":"false"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidInternetChargeType.ValueNotSupported","errorMessage":"The specified InternetChargeType is not valid."},{"errorCode":"InvalidInstanceType.ValueUnauthorized","errorMessage":"The specified InstanceType does not exist or beyond the permitted range."},{"errorCode":"InvalidInstanceType.ValueNotSupported","errorMessage":"The specified InstanceType does not exist or beyond the permitted range."},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter \"InternetMaxBandwidthOut\" is not valid."},{"errorCode":"InvalidParameter.Mismatch","errorMessage":"Too many parameters in one request."},{"errorCode":"BandwidthUpgradeDenied.EipBoundInstance","errorMessage":"The specified VPC instance has bound EIP, temporary bandwidth upgrade is denied."},{"errorCode":"InvalidTemporary.StartTime","errorMessage":"The specifed Temporary.StartTime is not valid."},{"errorCode":"InvalidTemporary.EndTime","errorMessage":"The specifed Temporary.EndTime is not valid."},{"errorCode":"Downgrade.NotSupported","errorMessage":"Downgrade operation is not supported."},{"errorCode":"DependencyViolation.InstanceType","errorMessage":"The current InstanceType cannot be changed to the specified InstanceType."},{"errorCode":"Account.Arrearage","errorMessage":"Your account has an outstanding payment."},{"errorCode":"InvalidParameter.Bandwidth","errorMessage":"The specified parameter Bandwidth is not valid."},{"errorCode":"InvalidParameter.Conflict","errorMessage":"The specified image does not support the specified instance type."},{"errorCode":"InvalidParameter.AllowMigrateAcrossZone","errorMessage":"The specified parameter CanMigrateAcrossZone is not valid."},{"errorCode":"InvalidParam.SystemDiskCategory","errorMessage":"The specified param SystemDisk.Category is not valid."},{"errorCode":"Throttling","errorMessage":"Request was denied due to request throttling, please try again after 5 minutes."},{"errorCode":"InvalidInstanceStatus.NotStopped","errorMessage":"The specified Instance status is not stopped."},{"errorCode":"InvalidAction","errorMessage":"Specified action is not valid."},{"errorCode":"IdempotenceParamNotMatch","errorMessage":"There is a idempotence signature mismatch between this and last request."},{"errorCode":"InvalidClientToken.ValueNotSupported","errorMessage":"The ClientToken provided is invalid."},{"errorCode":"Price.PricePlanResultNotFound","errorMessage":"The internetMaxBandwidthIn or internetMaxBandwidthOut provided is invalid."},{"errorCode":"InvalidAction.NotSupport","errorMessage":"The ecs on dedicatedHost not support modify instanceType."},{"errorCode":"InvalidMarketImageStatus.NotSupported","errorMessage":"The status of specified market image does not support this operation."},{"errorCode":"InvalidOperation.VpcHasEnabledAdvancedNetworkFeature","errorMessage":"The specified vpc has enabled advanced network feature."},{"errorCode":"Invalid.PrivatePoolOptions.MatchCriteria","errorMessage":"Target mode does not support this operation."},{"errorCode":"InstanceTypeNotSupported.TooManyDisksAttached","errorMessage":"%s"},{"errorCode":"InvalidDiskCategory.NotSupported","errorMessage":"The upgrade operation of instance does not support this category of disk."},{"errorCode":"InvalidParameter.CloudboxNotSupported","errorMessage":"%s"},{"errorCode":"QuotaExceed.DiskCapacity","errorMessage":"The used capacity of disk type has exceeded the quota in the zone,  %s."},{"errorCode":"InvalidParam.Async","errorMessage":"The specified parameter async is not valid."},{"errorCode":"MissingParameter.DiskCategory","errorMessage":"The specified parameter Disk.Category can not be null when Disk.DiskId is specified."},{"errorCode":"InvalidParameter.DiskCategory","errorMessage":"The specified parameter Disk.Category is not valid."},{"errorCode":"InvalidPerformanceLevel.Malformed","errorMessage":"The specified parameter Disk.n.PerformanceLevel is not valid."},{"errorCode":"NoPermission.Price","errorMessage":"The operation requires price permission. Please either apply for permission from your main account, or set the parameter AutoPay as true."},{"errorCode":"InvalidParameter.DedicatedRegionNotSupported","errorMessage":"The specified action is rejected  because the specified ECS instance in the dedicated region does not support public IP."},{"errorCode":"InvalidOperation.OnlineModificationUnsupported","errorMessage":"Online modification of instance type is not supported for the specified instance due to its CPU topology."}],"403":[{"errorCode":"CategoryViolation","errorMessage":"The specified instance does not support this operation because of its disk category."},{"errorCode":"InvalidStatus.ValueNotSupported","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The specified operation is denied as your instance is locked for security reasons."},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"ChargeTypeViolation","errorMessage":"The operation is not permitted due to charge type of the instance."},{"errorCode":"OperationDenied","errorMessage":"The specified instance is out of usage."},{"errorCode":"LastTokenProcessing","errorMessage":"The last token request is processing."},{"errorCode":"InvalidInstance.UnpaidOrder","errorMessage":"The specified instance has unpaid order."},{"errorCode":"InstanceSpecModification.NotEffective","errorMessage":"The specified instance has been reserved for making a spec modification and not taken effective in the current contract period."},{"errorCode":"InvalidInstanceType.ValueNotSupported","errorMessage":"The specified zone does not offer the specified instancetype."},{"errorCode":"ImageNotSupportInstanceType","errorMessage":"The specified image do not support the InstanceType instance."},{"errorCode":"InstanceType.Offline","errorMessage":"The specified InstanceType has been offline."},{"errorCode":"InvalidParameter.NotMatch","errorMessage":"%s"},{"errorCode":"InvalidInstance.EipNotSupport","errorMessage":"The specified instance with eip is not supported, please unassociate eip first."},{"errorCode":"InvalidInstance.NatPortMapNotSupport","errorMessage":"The special instance with nat port map not support operate, please remove nat port map first."},{"errorCode":"InvalidOperation.StarterPackage","errorMessage":"StarterPackage not support modification."},{"errorCode":"OperationDenied.NoStock","errorMessage":"The resource is out of usage."},{"errorCode":"OperationDenied.UnpaidOrder","errorMessage":"The specified instance has unpaid order."},{"errorCode":"InvalidOperation.EipNotSupport","errorMessage":"The special instance with eip not support operate, please unassociate eip first."},{"errorCode":"InvalidParameter.InternetMaxBandwidthOut","errorMessage":"The specified parameter InternetMaxBandwidthOut is invalid."},{"errorCode":"InvalidOperation.EniCountExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.Ipv4CountExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.Ipv6CountExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.Ipv6NotSupport","errorMessage":"%s"},{"errorCode":"InvalidOperation.Ipv4NotSupport","errorMessage":"%s"},{"errorCode":"InvalidOperation.InstanceWithEipNotSupport","errorMessage":"The special instance with eip not support operate, please unassociate eip first."},{"errorCode":"SecurityRisk.3DVerification","errorMessage":"We have detected a security risk with your default credit or debit card. Please proceed with verification via the link in your email."},{"errorCode":"InvalidInstance.NotFoundSystemDisk","errorMessage":"The specified instance has no system disk."},{"errorCode":"InvalidInstanceType.NotSupportDiskCategory","errorMessage":"The instanceType of the specified instance does not support this disk category."},{"errorCode":"QuotaExceed.ElasticQuota","errorMessage":"No additional quota is available for the specified ECS instance type."},{"errorCode":"InvalidResourceType.NotSupported","errorMessage":"%s"},{"errorCode":"InvalidOperation.NotAllowed","errorMessage":"The specified vpc %s has enabled senior network feature."},{"errorCode":"InvalidOperation.InstanceTypeNotSupportEniTrunking","errorMessage":"%s"},{"errorCode":"InvalidOperation.MaxEniQueueNumberExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.ExceedInstanceTypeQueueNumber","errorMessage":"%s"},{"errorCode":"InvalidParameter.InvalidEniQueueNumber","errorMessage":"%s"},{"errorCode":"HibernationConfigured.InstanceOperationForbidden","errorMessage":"The operation is not permitted due to limit of the hibernation configured instance."},{"errorCode":"InvalidOperation.InstanceTypeNotSupportHighPerformanceTrafficMode","errorMessage":"%s"},{"errorCode":"InvalidOperation.EniQueuePairNumberOverflow","errorMessage":"%s"},{"errorCode":"InvalidOperation.HighPerformanceEniPerInstanceLimitExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.MaxEniQueuePairNumberExceed","errorMessage":"%s"},{"errorCode":"InvalidOperation.MaxModifyOnlineNumberExceeded","errorMessage":"The specified instance has reached the maximum number of modify online attempts and needs to be rebooted."},{"errorCode":"InvalidOperation.RebootingRequired","errorMessage":"The specified instance needs to be rebooted."},{"errorCode":"InvalidOperation.OSTypeNotSupported","errorMessage":"The specified OS type is not supported."},{"errorCode":"InvalidSystemDiskCategory.ValueNotSupported","errorMessage":"The specified parameter  SystemDisk.Category is not valid."}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"MissingTemporary.StartTime","errorMessage":"Temporary.StartTime is not specified."},{"errorCode":"MissingTemporary.EndTime","errorMessage":"Temporary.EndTime is not specified."},{"errorCode":"InvalidInstanceChargeType.NotFound","errorMessage":"The InstanceChargeType does not exist in our records."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error, exception or failure."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"E69EF3CC-94CD-42E7-8926-F133B86387C0\\\",\\n    \\\"HostId\\\": \\\"ecs.aliyuncs.com\\\",\\n    \\\"Code\\\": \\\"InvalidInstance.UnpaidOrder\\\",\\n    \\\"Message\\\": \\\"The specified instance has unpaid order.\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<ModifyInstanceSpecResponse>\\n   <RequestId>04F0F334-1335-436C-A1D7-6C044FE73368</RequestId>\\n</ModifyInstanceSpecResponse>\",\"errorExample\":\"<Error>\\n    <RequestId>E69EF3CC-94CD-42E7-8926-F133B86387C0</RequestId>\\n    <HostId>ecs.aliyuncs.com</HostId>\\n    <Code>InvalidInstance.UnpaidOrder</Code>\\n    <Message>The specified instance has unpaid order.</Message>\\n</Error>\"}]","title":"调整实例的实例规格和公网带宽","summary":"调用ModifyInstanceSpec调整一台按量付费ECS实例的实例规格和公网带宽大小。","description":"## 接口说明\n\n<props=\"china\">请确保在使用该接口前，您已充分了解[云服务器ECS](https://www.aliyun.com/price/product#/ecs/detail)的计费方式和产品定价。</props>\n\n更多有关资源变配的Python SDK示例信息，请参见[查询可用的变配资源](~~109517~~)。\n\n调用该接口时，您需要注意：\n\n- 账号必须处于无欠费状态。\n- 实例状态必须为**运行中**（`Running`）或者**已停止**（`Stopped`）时才能调节公网带宽大小。\n- 升级或者降低按量付费实例规格前，您可以通过[DescribeResourcesModification](~~66187~~)查询当前实例支持变配的实例规格。\n- 实例状态必须为**已停止**（`Stopped`）时才能变更实例规格。\n- 单次只能升级单项配置，即单次只能修改实例规格，或者只能调整公网带宽大小。\n- 自2020年11月27日起，创建和变配ECS实例时带宽峰值受账户限速策略影响。如需更大带宽峰值，请提交工单。具体限速策略如下：\n    - 单个地域下，所有按使用流量计费ECS实例的实际运行带宽峰值总和不大于5 Gbit/s。\n    - 单个地域下，所有按固定带宽计费ECS实例的实际运行带宽峰值总和不大于50 Gbit/s。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}