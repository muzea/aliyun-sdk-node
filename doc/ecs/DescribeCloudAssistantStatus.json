{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"get","abilityTreeCode":"29272","abilityTreeNodes":["FEATUREecsPW0L5N"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"实例所在地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"RegionId","in":"query","schema":{"description":"实例所在地域ID。您可以调用[DescribeRegions](~~25609~~)查看最新的阿里云地域列表。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"OSType","in":"query","schema":{"description":"实例的操作系统类型。取值范围：\n\n- Windows。\n- Linux。\n- FreeBSD。","type":"string","required":false,"example":"Windows"}},{"name":"PageNumber","in":"query","schema":{"description":"当前页码。\n\n起始值为1。\n\n默认值为1。","type":"integer","format":"int64","required":false,"example":"1"}},{"name":"PageSize","in":"query","schema":{"description":"分页查询时设置的每页行数。若已设置**InstanceId**参数，则该参数无效。\n最大值为50。\n\n默认值为10。","type":"integer","format":"int64","required":false,"example":"10"}},{"name":"MaxResults","in":"query","schema":{"description":"分页查询时每页的最大条目数。若已设置**InstanceId**参数，则该参数无效。\n\n最大值为50。\n\n默认值为10。","type":"integer","format":"int32","required":false,"example":"10"}},{"name":"NextToken","in":"query","schema":{"description":"查询凭证（Token），取值为上一次API调用返回的NextToken参数值。","type":"string","required":false,"example":"AAAAAdDWBF2"}},{"name":"InstanceId","in":"query","style":"repeatList","schema":{"description":"实例ID列表。","type":"array","items":{"description":"实例ID列表，可包含ECS实例ID、托管实例ID。\n最多可指定100个实例ID。","type":"string","required":false,"example":"i-bp1iudwa5b1tqa****"},"required":false,"example":"i-bp1iudwa5b1tqa****","maxItems":100}}],"responses":{"200":{"schema":{"type":"object","properties":{"PageSize":{"description":"每页行数。","type":"integer","format":"int64","example":"1"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"},"PageNumber":{"description":"当前页码。","type":"integer","format":"int64","example":"1"},"TotalCount":{"description":"实例总个数。","type":"integer","format":"int64","example":"1"},"NextToken":{"description":"本次调用返回的查询凭证值。","type":"string","example":"AAAAAdDWBF2"},"InstanceCloudAssistantStatusSet":{"type":"object","properties":{"InstanceCloudAssistantStatus":{"description":"实例云助手安装状态结果集合。","type":"array","items":{"type":"object","properties":{"CloudAssistantStatus":{"description":"实例内的云助手是否在运行中。可能值：\n\n- true：2分钟内有心跳。\n\n- false：2分钟内无心跳。","type":"string","example":"true"},"LastInvokedTime":{"description":"最近一次命令执行的时间。","type":"string","example":"2021-03-15T08:00:00Z"},"CloudAssistantVersion":{"description":"云助手Agent版本号，若未安装或未运行云助手Agent，则该值为空。","type":"string","example":"2.2.0.106"},"ActiveTaskCount":{"description":"实例内的云助手运行中的任务数。","type":"integer","format":"int64","example":"0"},"InvocationCount":{"description":"实例内的云助手已完成的任务数。","type":"integer","format":"int64","example":"2"},"InstanceId":{"description":"实例ID。","type":"string","example":"i-bp1iudwa5b1tqa****"},"LastHeartbeatTime":{"description":"云助手最近一次心跳时间。该值平均每分钟（有上下5秒的随机浮动，最短55秒，最长65秒）更新一次。","type":"string","example":"2021-03-15T09:00:00Z"},"OSType":{"description":"实例操作系统类型。可能值：\n\n- Windows。\n- Linux。\n- FreeBSD。","type":"string","example":"Linux"},"SupportSessionManager":{"description":"实例内的云助手是否支持会话管理功能。若不支持，表示云助手版本较低，请将客户端更新至最新版本。\n\n云助手支持会话管理功能的最低版本如下：\n- Linux：2.2.3.189\n- Windows：2.1.3.189","type":"boolean","example":"true"}}}}}}}}}},"errorCodes":{"400":[{"errorCode":"RegionId.ApiNotSupported","errorMessage":"The api is not supported in this region."},{"errorCode":"MissingParam.InstanceId","errorMessage":"The parameter instanceId is missing or empty."},{"errorCode":"InvalidParam.PageSize","errorMessage":"The specified parameter is invalid."},{"errorCode":"InvalidParam.PageNumber","errorMessage":"The specified parameter is invalid."},{"errorCode":"InvalidParameter.NextToken","errorMessage":"The specified parameter NextToken is not valid."},{"errorCode":"InvalidParameter.MaxResults","errorMessage":"The specified parameter MaxResults is not valid."}],"403":[{"errorCode":"InstanceIds.ExceedLimit","errorMessage":"The number of instance IDs exceeds the upper limit."},{"errorCode":"Operation.Forbidden","errorMessage":"The operation is not permitted."}],"404":[{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The RegionId provided does not exist in our records."},{"errorCode":"InvalidInstance.NotFound","errorMessage":"The specified instance does not exist."}],"500":[{"errorCode":"InternalError.Dispatch","errorMessage":"An error occurred when you dispatched the request."},{"errorCode":"ServiceUnavailable","errorMessage":"The request has failed due to a temporary failure of the server."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"PageSize\\\": 1,\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\",\\n  \\\"PageNumber\\\": 1,\\n  \\\"TotalCount\\\": 1,\\n  \\\"NextToken\\\": \\\"AAAAAdDWBF2\\\",\\n  \\\"InstanceCloudAssistantStatusSet\\\": {\\n    \\\"InstanceCloudAssistantStatus\\\": [\\n      {\\n        \\\"CloudAssistantStatus\\\": \\\"true\\\",\\n        \\\"LastInvokedTime\\\": \\\"2021-03-15T08:00:00Z\\\",\\n        \\\"CloudAssistantVersion\\\": \\\"2.2.0.106\\\",\\n        \\\"ActiveTaskCount\\\": 0,\\n        \\\"InvocationCount\\\": 2,\\n        \\\"InstanceId\\\": \\\"i-bp1iudwa5b1tqa****\\\",\\n        \\\"LastHeartbeatTime\\\": \\\"2021-03-15T09:00:00Z\\\",\\n        \\\"OSType\\\": \\\"Linux\\\",\\n        \\\"SupportSessionManager\\\": true\\n      }\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DescribeCloudAssistantStatusResponse>\\n    <TotalCount>1</TotalCount>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n    <PageSize>1</PageSize>\\n    <PageNumber>1</PageNumber>\\n    <InstanceCloudAssistantStatusSet>\\n        <InstanceCloudAssistantStatus>\\n            <CloudAssistantVersion>2.2.0.106</CloudAssistantVersion>\\n            <SupportSessionManager>true</SupportSessionManager>\\n            <InstanceId>i-bp1iudwa5b1tqa****</InstanceId>\\n            <CloudAssistantStatus>true</CloudAssistantStatus>\\n            <OSType>Linux</OSType>\\n            <InvocationCount>2</InvocationCount>\\n            <ActiveTaskCount>0</ActiveTaskCount>\\n            <LastInvokedTime>2021-03-15T08:00:00Z</LastInvokedTime>\\n            <LastHeartbeatTime>2021-03-15T09:00:00Z</LastHeartbeatTime>\\n        </InstanceCloudAssistantStatus>\\n    </InstanceCloudAssistantStatusSet>\\n</DescribeCloudAssistantStatusResponse>\",\"errorExample\":\"\"}]","title":"查询一台或者多台实例是否安装了云助手Agent","summary":"调用DescribeCloudAssistantStatus查询一台或者多台实例是否安装了云助手Agent。如果已安装了云助手，还将查询云助手命令执行的总数量、正在执行的数量以及最近一次命令执行的时间。","description":"## 接口说明\n\n- 建议您先调用该接口查询实例的云助手状态，当CloudAssistantStatus为true时再执行命令或下发文件，尤其对于新购实例。\n- 支持以下两种方式查看返回数据：\n    - 方式一：分页查询首页时，仅需设置`MaxResults`以限制返回信息的条目数，返回结果中的`NextToken`将作为查询后续页的凭证。查询后续页时，将`NextToken`参数设置为上一次返回结果中获取到的`NextToken`作为查询凭证，并设置`MaxResults`限制返回条目数。\n    - 方式二：通过`PageSize`设置单页返回的条目数，再通过`PageNumber`设置页码。以上两种方式只能任选其中之一。如果设置了`MaxResults`或`NextToken`参数，则请求参数`PageSize`和`PageNumber`将失效，且返回数据中的`TotalCount`无效。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}