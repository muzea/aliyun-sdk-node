{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"29069","abilityTreeNodes":["FEATUREecs7AL3YP","FEATUREecs860TU5"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"docRequired":true,"example":"i-bp67acfmxazb4ph****"}},{"name":"Password","in":"query","schema":{"description":"实例的密码。支持长度为8~30个字符，必须同时包含大小写英文字母、数字和特殊符号中的三类字符。特殊符号可以是：\n\n```\n()`~!@#$%^&*-_+=|{}[]:;'<>,.?/\n```\n\n其中，Windows实例不能以斜线号（/）为密码首字符。\n\n> 如果传入`Password`参数，建议您使用HTTPS协议发送请求，避免密码泄露。","type":"string","required":false,"example":"Test123456"}},{"name":"HostName","in":"query","schema":{"description":"操作系统的主机名。您需要注意：\n\n- 修改主机名时，实例不能处于创建中（`Pending`）或启动中（`Starting`）的状态，否则可能出现主机名以及`/etc/hosts`配置失效等情况。您可以调用[DescribeInstances](~~25506~~)查询实例当前的状态信息。\n\n- 修改主机名后，请调用[RebootInstance](~~25502~~)重启实例，使修改生效。\n\n\n不同操作系统主机名存在以下限制：\n\n- Windows Server系统：长度为2-15个字符，允许使用大小写字母、数字或短划线（-）。不能以短划线（-）开头或结尾，不能连续使用短划线（-），也不能仅使用数字。\n\n- 其他类型实例（Linux等）：长度为2-64个字符，允许使用半角句号（.）分隔字符成多段，每段允许使用大小写字母、数字或连字符（-），但不能连续使用半角句号（.）或短划线（-）。不能以半角句号（.）或短划线（-）开头或结尾。","type":"string","required":false,"example":"testHostName"}},{"name":"InstanceName","in":"query","schema":{"description":"实例名称。长度为2~128个英文或中文字符。必须以大小写字母或中文开头，不能以`http://`或`https://`开头。可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。","type":"string","required":false,"example":"testInstanceName"}},{"name":"Description","in":"query","schema":{"description":"实例描述。长度为2~256个英文或中文字符，不能以`http://`或`https://`开头。","type":"string","required":false,"example":"testInstanceDescription"}},{"name":"UserData","in":"query","schema":{"description":"实例自定义数据，需要以Base64编码。\n\n编码前，原始数据不能超过32 KB。建议不要明文传入敏感信息，例如密码和私钥等。如果必须传入敏感信息，建议您加密后再以Base64编码传入，在实例内部以同样的方式解密。","type":"string","required":false,"example":"ZWNobyBoZWxsbyBlY3Mh"}},{"name":"Recyclable","in":"query","schema":{"description":">该参数正在邀测中，暂不开放使用。","type":"boolean","required":false,"example":"hide"}},{"name":"CreditSpecification","in":"query","schema":{"description":"修改突发性能实例的运行模式。取值范围：\n\n- Standard：标准模式。\n- Unlimited：无性能约束模式。\n\n关于突发性能实例运行模式的更多信息，请参见[什么是突发性能实例](~~59977~~)。","type":"string","required":false,"example":"Standard"}},{"name":"DeletionProtection","in":"query","schema":{"description":"实例释放保护属性。指定是否支持通过控制台或API（[DeleteInstance](~~25507~~)）释放实例。\n\n> 该属性仅适用于按量付费实例，且只能限制手动释放操作，对系统释放操作不生效。","type":"boolean","required":false,"example":"false"}},{"name":"NetworkInterfaceQueueNumber","in":"query","schema":{"description":"主网卡队列数。\n","type":"integer","format":"int32","required":false,"minimum":"-1","example":"8"}},{"name":"SecurityGroupIds","in":"query","style":"repeatList","schema":{"description":"实例重新加入的安全组列表。\n\n- 安全组ID不能重复。\n- 实例会离开当前的安全组，如需保留设置，您需要在列表中添加当前的安全组ID。\n- 支持切换安全组类型，但设置的安全组列表中不能同时包含普通安全组和企业安全组。\n- 安全组必须和实例属于同一个VPC。\n- N的取值范围与实例能够加入安全组配额有关。更多信息，请参见[使用限制](~~25412#SecurityGroupQuota1~~)。\n- 修改安全组后很快会生效于对应的实例，但可能有较小的延迟。","type":"array","items":{"description":"实例重新加入的安全组列表。\n\n- 安全组ID不能重复。\n- 实例会离开当前的安全组，如需保留设置，您需要在列表中添加当前的安全组ID。\n- 支持切换安全组类型，但设置的安全组列表中不能同时包含普通安全组和企业安全组。\n- 安全组必须和实例属于同一个VPC。\n- N的取值范围与实例能够加入安全组配额有关，更多信息，请参见[使用限制](~~25412#SecurityGroupQuota1~~)。\n- 修改安全组后很快会生效于对应的实例，但可能有较小的延迟。","type":"string","required":false,"example":"sg-bp15ed6xe1yxeycg7o****"},"required":false,"example":"sg-bp15ed6xe1yxeycg7o****","maxItems":51}},{"name":"RemoteConnectionOptions","in":"query","style":"flat","schema":{"description":">该参数正在邀测中，暂不开放使用。","type":"object","properties":{"Password":{"description":">该参数正在邀测中，暂不开放使用。","type":"string","required":false,"example":"hide"},"Type":{"description":">该参数正在邀测中，暂不开放使用。","type":"string","required":false,"example":"hide"}},"required":false}},{"name":"EnableJumboFrame","in":"query","schema":{"description":"实例MTU是否开启Jumbo frame通信模式，取值范围：\n\n-true：开启。\n\n-false：不开启。\n\n目前仅部分规格支持开启Jumbo frame。更多信息，请参见[ECS实例MTU](~~200512~~)。","type":"boolean","required":false,"example":"false"}},{"name":"CpuOptions.TopologyType","in":"query","schema":{"description":"实例的Cpu拓扑类型。取值范围：\n\n- ContinuousCoreToHTMapping：当选择`ContinuousCoreToHTMapping`时，实例的Cpu拓扑中，实例的同一个Core的HT是连续的。\n- DiscreteCoreToHTMapping：当选择`DiscreteCoreToHTMapping`时，实例的同一个Core的HT是离散的。\n\n默认值：无。\n\n>- 仅部分实例规格族支持使用本参数，具体支持实例规格族请参见[查看和修改CPU拓扑结构](~~2636059~~)。\n- 使用该参数时实例必须为已停止（`Stopped`）状态。","type":"string","required":false,"example":"DiscreteCoreToHTMapping"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidInstanceName.Malformed","errorMessage":"The specified parameter \"InstanceName\" is not valid."},{"errorCode":"InvalidDescription.Malformed","errorMessage":"The specified parameter \"Description\" is not valid."},{"errorCode":"InvalidRemoteConnectionOptions.Password","errorMessage":"The remote connection password is invalid."},{"errorCode":"InvalidRemoteConnectionOptions.Type","errorMessage":"The remote connection type is invalid."},{"errorCode":"InstanceType.ValueNotSupported","errorMessage":"The instance type not supported."},{"errorCode":"OSType.ValueNotSupported","errorMessage":"The OS type is not supported."},{"errorCode":"InvalidHostPassword.Malformed","errorMessage":"The specified parameter \"Password\" is not valid."},{"errorCode":"InvalidHostName.Malformed","errorMessage":"The specified parameter \"HostName\" is not valid."},{"errorCode":"InvalidPassword.Malformed","errorMessage":"The specified parameter \"Password\" is not valid."},{"errorCode":"InvalidUserData.SizeExceeded","errorMessage":"The specified parameter \"UserData\" exceeds the size."},{"errorCode":"InvalidUserData.NotSupported","errorMessage":"TThe specified parameter \"UserData\" only support the vpc and IoOptimized Instance."},{"errorCode":"ImageNotSupportCloudInit","errorMessage":"The specified image does not support cloud-init."},{"errorCode":"ChargeTypeViolation","errorMessage":"Pay-As-You-Go instances do not support this operation."},{"errorCode":"InvalidParameter.RecycleBin","errorMessage":"You do not have permission to set recyclable properties."},{"errorCode":"InvalidParameter.CreditSpecification","errorMessage":"The specified CreditSpecification is not supported in this region."},{"errorCode":"InvalidInstanceStatus.CreditSpecRestricted","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InvalidInstanceStatus.NotRunning","errorMessage":"The current status of the resource is invalid, you can only do this operation when instance is running."},{"errorCode":"InvalidNetworkType.NotSupported","errorMessage":"The classic networkType does not support to modify security group"},{"errorCode":"InvalidOperation.EniCountExceeded","errorMessage":"=The maximum number of eni in a enterprise security group is exceeded."},{"errorCode":"JoinedGroupLimitExceed","errorMessage":"%s"},{"errorCode":"InvalidParameter","errorMessage":"The specified parameter is not valid."},{"errorCode":"InvalidOperation.InvalidEcsState","errorMessage":"%s"},{"errorCode":"InvalidParam.NotSupportJumboFrame","errorMessage":"Not support jumbo frame."},{"errorCode":"InvalidOperation.InstanceStatusNotSupport","errorMessage":"The instance status is not support modify mtu config."},{"errorCode":"InvalidOperation.InstanceStatusUnsupported","errorMessage":"The specified instance status does not support modification of cpu topology type."},{"errorCode":"InvalidParameter.CpuOptionsTopologyType","errorMessage":"The specified parameter CpuOptions.TopologyType: %s is not valid."},{"errorCode":"InvalidInstanceType.NotSupportCpuOptionsTopologyType","errorMessage":"The specified instance type does not support CpuOptions.TopologyType: %s."},{"errorCode":"InvalidAdditionalInfoPvdConfig.SizeExceeded","errorMessage":"The specified parameter AdditionalInfo.PvdConfig exceeds the size."}],"403":[{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The specified operation is denied as your instance is locked for security reasons."},{"errorCode":"OperationDenied","errorMessage":"The instance amount in the specified SecurityGroup reach its limit."},{"errorCode":"InvalidUserData.Forbidden","errorMessage":"User not authorized to input the parameter \"UserData\"please apply for permission \"UserData\""},{"errorCode":"InvalidUserData.Base64FormatInvalid","errorMessage":"The specified UserData is not valid"},{"errorCode":"InvalidChargeType.ValueNotSupported","errorMessage":"Deletion protection is only valid for postPaid instance, not for prePaid or spot instance."},{"errorCode":"InvalidUser.Unauthorized","errorMessage":"The user is not authorized"},{"errorCode":"EnterpriseGroupLimited.MutliGroupType","errorMessage":"The specified instance can not join multi SecurityGroup types."},{"errorCode":"SecurityGroupInstanceLimitExceed","errorMessage":"%s"},{"errorCode":"InstanceNotInSecurityGroup","errorMessage":"The instance not in the group."},{"errorCode":"InvalidOperation.InvalidRegion","errorMessage":"%s"},{"errorCode":"InvalidOperation.ResourceManagedByCloudProduct","errorMessage":"%s"},{"errorCode":"InvalidParameter.InvalidEniQueueNumber","errorMessage":"%s"},{"errorCode":"InvalidOperation.MaxEniQueueNumberExceeded","errorMessage":"%s"},{"errorCode":"InvalidOperation.ExceedInstanceTypeQueueNumber","errorMessage":"%s"},{"errorCode":"InvalidOperation.InstanceTypeNotSupportHighPerformanceTrafficMode","errorMessage":"%s"},{"errorCode":"InvalidParameter.InvalidQueuePairNumber","errorMessage":"%s"},{"errorCode":"InvalidOperation.MaxEniQueuePairNumberExceed","errorMessage":"%s"},{"errorCode":"InvalidOperation.EniQueuePairNumberOverflow","errorMessage":"%s"},{"errorCode":"AclLimitExceed","errorMessage":"%s"}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidSecurityGroupId.NotFound","errorMessage":"The specified SecurityGroupId does not exist."},{"errorCode":"Credit.NotFound","errorMessage":"The specified credit information does not exist."},{"errorCode":"InvalidInstanceStatus.NeedRestart","errorMessage":"The current status of the resource is invalid, you can only do this operation after instance is restarted."},{"errorCode":"InvalidParameter.SecurityGroupIdRepeated","errorMessage":"The specified security group ids has repeated."},{"errorCode":"InvalidSecurityGroupType.NotSupportClassic","errorMessage":"The specified SecurityGroupIds have classic group type."},{"errorCode":"InvalidSecurityGroupVpc.NotBelongToOneVpc","errorMessage":"The specified SecurityGroupIds are belong to different vpc."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"E69EF3CC-94CD-42E7-8926-F133B86387C0\\\",\\n    \\\"HostId\\\": \\\"ecs.aliyuncs.com\\\",\\n    \\\"Code\\\": \\\"InvalidInstanceStatus.CreditSpecRestricted\\\",\\n    \\\"Message\\\": \\\"The current status of the resource does not support this operation.\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<ModifyInstanceAttributeResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n</ModifyInstanceAttributeResponse>\",\"errorExample\":\"<Error>\\n    <RequestId>E69EF3CC-94CD-42E7-8926-F133B86387C0</RequestId>\\n    <HostId>ecs.aliyuncs.com</HostId>\\n    <Code>InvalidInstanceStatus.CreditSpecRestricted</Code>\\n    <Message>The current status of the resource does not support this operation.</Message>\\n</Error>\"}]","title":"修改一台实例的部分信息","summary":"调用ModifyInstanceAttribute修改一台ECS实例的部分信息，包括密码、名称、描述、主机名、所属安全组、实例的MTU以及自定义数据等。如果是突发性能实例，还可以切换性能突发模式。","description":"## 接口说明\n查询ECS实例信息时，如果返回数据中包含`{\"OperationLocks\": {\"LockReason\" : \"security\"}}`，则禁止一切操作。\n\n调用该接口完成以下操作时，您需要注意：\n\n- 修改主机名（`HostName`）：重启实例后，修改生效，且必须是在ECS控制台重启（具体操作，请参见[重启实例](~~25440~~)）或者调用[RebootInstance](~~25502~~)重启，新主机名才能生效。在操作系统内部重启不保证能生效。\n- 重置密码（`Password`）：\n    - 实例状态不能为**启动中**（`Starting`）。\n    - 重启实例后，重置生效，且必须是在ECS控制台重启（具体操作，请参见[重启实例](~~25440~~)）或者调用[RebootInstance](~~25502~~)重启，新密码才能生效。在操作系统内部重启不能生效。\n- 修改自定义数据（`UserData`）：\n     实例必须满足自定义数据使用限制。更多信息，请参见[生成实例自定义数据](~~49121~~)。\n\n    > 重启实例后，实例上将展示新的用户数据，但不会运行用户数据脚本。\n\n- 更换实例安全组（`SecurityGroupIds.N`）：\n    - 支持切换安全组类型。\n      当ECS实例跨类型切换安全组时，您需要充分了解两种安全组规则的配置区别，避免影响实例网络。\n    - 不支持经典网络类型实例。\n      其他注意事项请参见`SecurityGroupIds.N`的参数说明。\n- 修改主网卡队列数（`NetworkInterfaceQueueNumber`）：\n    - 实例必须为已停止（`Stopped`）状态。\n    - 不能超过实例规格允许的单块网卡最大队列数。\n    - 实例的所有网卡累加队列数不能超过实例规格允许的队列数总配额。实例规格的单块网卡最大队列数和总配额可以通过[DescribeInstanceTypes](~~25620~~)查询`MaximumQueueNumberPerEni`、`TotalEniQueueQuantity`字段。\n    - 当取值为-1时，将重置主网卡队列数为对应实例规格的默认值。实例规格的弹性网卡默认队列数可以通过[DescribeInstanceTypes](~~25620~~)查询`PrimaryEniQueueNumber`字段。\n- 实例开启/关闭 Jumbo frame特性（`EnableJumboFrame`）。更多信息，请参见[ECS实例MTU](~~200512~~)。\n    - 实例必须为运行中（`Running`）或者已停止（`Stopped`）状态。\n    - 实例必须为虚拟专有网络（Virtual Private Cloud, VPC）下的ECS实例。\n    - 开启Jumbo Frame特性后，实例的MTU值将变为8500，关闭后则回退为1500 。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}