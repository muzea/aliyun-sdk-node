{"summary":"修改云助手服务配置。","methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"systemTags":{"operationType":"update","abilityTreeCode":"213696","abilityTreeNodes":["FEATUREecsXZ3H4M"]},"parameters":[{"name":"RegionId","in":"query","schema":{"description":"地域ID。","type":"string","required":true,"example":"cn-hangzhou"}},{"name":"SettingType","in":"query","schema":{"description":"服务配置类型。当前取值范围：\n- SessionManagerDelivery：会话操作记录投递。\n- InvocationDelivery：任务执行记录投递。\n- AgentUpgradeConfig：云助手Agent升级配置。","type":"string","required":true,"example":"SessionManagerDelivery"}},{"name":"OssDeliveryConfig","in":"query","style":"json","schema":{"description":"OSS投递配置信息。","type":"object","properties":{"Enabled":{"description":"是否开启投递到OSS功能。默认值：false。","type":"boolean","required":false,"example":"false"},"BucketName":{"description":"OSS存储空间名称。","type":"string","required":false,"example":"example-bucket"},"Prefix":{"description":"OSS存储空间目录前缀。约束如下：\n- 长度不得超过 254 个字符。\n- 不能以正斜线（/）或者反斜线（\\）开头。\n\n注：传入\"\"表示不需要目录前缀；若之前设置过，而当前不再需要目录前缀可传入\"\"清空。","type":"string","required":false,"example":"sessionmanager/audit"},"EncryptionType":{"description":"OSS加密方式，可选值：\n- Inherit：继承 Bucket；\n- OssManaged：OSS 完全托管；\n- KMS：KMS加密。","type":"string","required":false,"example":"Inherit"},"EncryptionAlgorithm":{"description":"OSS加密算法，可选值：\n- AES256\n- SM4","type":"string","required":false,"example":"AES256"},"EncryptionKeyId":{"description":"加密方式为KMS时，用户的主密钥CMK ID。","type":"string","required":false,"example":"a807****7a70e"}},"required":false}},{"name":"SlsDeliveryConfig","in":"query","style":"json","schema":{"description":"SLS投递配置信息。","type":"object","properties":{"Enabled":{"description":"是否开启投递到SLS功能。\n默认值：false","type":"boolean","required":false,"example":"false"},"ProjectName":{"description":"SLS项目名称。","type":"string","required":false,"example":"example-project"},"LogstoreName":{"description":"SLS日志库名称。","type":"string","required":false,"example":"example-logstore"}},"required":false}},{"name":"AgentUpgradeConfig","in":"query","style":"json","schema":{"description":"云助手Agent升级配置。","type":"object","properties":{"Enabled":{"description":"是否开启自定义Agent升级配置。如设置为false，默认保持每30分钟尝试升级一次。\n\n默认值：false。","type":"boolean","required":false,"example":"true"},"AllowedUpgradeWindow":{"description":"允许升级的时间段列表，可精确到分，默认为 UTC 时区。\n\n各时间段的间隔不能小于1小时。\n\n格式：开始时间(HH:mm)-结束时间(HH:mm)。\n\n如[\n\"02:00-03:00\",\n\"05:00-06:00\"\n]\n代表在 UTC 时区的每天2点-3点、5点-6点允许升级。","type":"array","items":{"description":"允许升级的时间段列表，可精确到分，默认为 UTC 时区。\n\n各时间段的间隔不能小于1小时。\n\n格式：开始时间(HH:mm)-结束时间(HH:mm)。\n\n如[\n\"02:00-03:00\",\n\"05:00-06:00\"\n]\n代表在 UTC 时区的每天2点-3点、5点-6点允许升级。","type":"string","required":false,"example":"[\n\"02:00-03:00\",\n\"05:00-06:00\"\n]"},"required":false,"maxItems":6},"TimeZone":{"description":"允许升级时间段的时区。默认为 UTC 时区。\n时区支持以下两种形式：\n- 时区全称： 如Asia/Shanghai（中国/上海时间）、America/Los_Angeles（美国/洛杉矶时间）等。\n- 时区相对于格林威治时间的偏移量： 如GMT+8:00（东八区）、GMT-7:00（西七区）等。小时位不支持添加前导零。","type":"string","required":false,"example":"Asia/Shanghai"}},"required":false}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.SettingType","errorMessage":"The specified parameter SettingType is not valid."},{"errorCode":"InvalidParameter.OssEncryptionType","errorMessage":"The specified parameter OssDeliveryConfig.EncryptionType is not valid."},{"errorCode":"InvalidParameter.OssEncryptionAlgorithm","errorMessage":"The specified parameter OssDeliveryConfig.EncryptionAlgorithm is not valid."},{"errorCode":"InvalidParameter.OssEncryptionKeyId","errorMessage":"The specified parameter OssDeliveryConfig.EncryptionKeyId is not valid."},{"errorCode":"InvalidParameter.OssBucketName","errorMessage":"The specified parameter OssDeliveryConfig.BucketName is not valid."},{"errorCode":"InvalidParameter.OssPrefix","errorMessage":"The specified parameter OssDeliveryConfig.Prefix is not valid."},{"errorCode":"InvalidOssBucketName.InOtherRegion","errorMessage":"The specified parameter OssDeliveryConfig.BucketName is in another region."},{"errorCode":"InvalidParameter.SlsProjectName","errorMessage":"The specified parameter SlsDeliveryConfig.ProjectName is not valid."},{"errorCode":"InvalidParameter.SlsLogstoreName","errorMessage":"The specified parameter SlsDeliveryConfig.LogstoreName is not valid."},{"errorCode":"InvalidParameter.AllowedUpgradeWindow","errorMessage":"The specified parameter AgentUpgradeConfig.AllowedUpgradeWindow is not valid."},{"errorCode":"InvalidAllowedUpgradeWindow.DurationTooShort","errorMessage":"The duration of the specified parameter AgentUpgradeConfig.AllowedUpgradeWindow cannot be less than one hour."},{"errorCode":"InvalidParameter.TimeZone","errorMessage":"The specified parameter AgentUpgradeConfig.TimeZone is not valid."},{"errorCode":"InvalidAllowedUpgradeWindow.Required","errorMessage":"The specified parameter AgentUpgradeConfig.AllowedUpgradeWindow is required."}],"403":[{"errorCode":"CreateServiceLinkedRole.NoPermission","errorMessage":"You do not have permission to create ServiceLinkedRole."},{"errorCode":"InvalidOperation.OssEncryptionUnsupported","errorMessage":"The configuration of OSS Encryption is not supported."},{"errorCode":"InvalidAllowedUpgradeWindow.CountLimitExceeded","errorMessage":"The count of the parameter AgentUpgradeConfig.AllowedUpgradeWindow exceeds the limit of 5."}],"404":[{"errorCode":"InvalidSlsProjectName.NotFound","errorMessage":"The specified parameter SlsDeliveryConfig.ProjectName does not exist."},{"errorCode":"InvalidSlsLogstoreName.NotFound","errorMessage":"The specified parameter SlsDeliveryConfig.LogstoreName does not exist."},{"errorCode":"InvalidOssBucketName.NotFound","errorMessage":"The specified parameter OssDeliveryConfig.BucketName does not exist."},{"errorCode":"InvalidRegionId.NotFound","errorMessage":"The specified parameter RegionId does not exist."}],"500":[{"errorCode":"InternalError","errorMessage":"An error occurred when you dispatched the request."}]},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3****\\\"\\n}\",\"type\":\"json\"}]","title":"修改云助手服务配置"}