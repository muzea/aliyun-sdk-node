{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"update","abilityTreeCode":"29079","abilityTreeNodes":["FEATUREecsZOHB3T"]},"parameters":[{"name":"InstanceId","in":"query","schema":{"description":"实例ID。","type":"string","required":true,"example":"i-bp1iudwa5b1tqag1****"}},{"name":"VSwitchId","in":"query","schema":{"description":"虚拟交换机ID。\n\n- 传入的ID为实例的当前虚拟交换机时，表明实例不变更虚拟交换机。\n- 传入的ID为一台新的虚拟交换机，并且参数`VpcId`为空时，新旧虚拟交换机必须属于同一个可用区、同一个专有网络VPC。\n- 当参数`VpcId`不为空时，该参数传入的虚拟交换机ID必须属于VpcId，并且和原虚拟交换机属于同一个可用区。","type":"string","required":true,"example":"vsw-bp1s5fnvk4gn3tw12****"}},{"name":"PrivateIpAddress","in":"query","schema":{"description":"新的私网IP地址。\n\n>`PrivateIpAddress`依赖于`VSwitchId`，指定的IP地址必须在虚拟交换机子网网段中。\n\n默认值：当不传该值时，从虚拟交换机子网网段中随机分配。","type":"string","required":false,"example":"172.17.**.**"}},{"name":"VpcId","in":"query","schema":{"description":"目标VPC ID。","type":"string","required":false,"example":"vpc-bp1vwnn14rqpyiczj****"}},{"name":"SecurityGroupId","in":"query","style":"repeatList","schema":{"description":"实例修改VPC后加入的安全组ID列表。当且仅当传入`VpcId`参数时，需要同时传入该参数。\n\n- 安全组类型必须一致。\n- 指定实例修改后加入的安全组列表，可以是一个或者多个。参数中N的取值范围与实例能够加入安全组的限制有关。更多信息，请参见[使用限制](~~25412~~)。\n- 专有网络类型ECS实例的安全组必须属于`VpcId`所在的VPC。","type":"array","items":{"description":"安全组ID。","type":"string","required":false,"example":"sg-o6w9l8bc8dgmkw87****"},"required":false,"example":"sg-o6w9l8bc8dgmkw87****","maxItems":51}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidTarget.TrafficMirrorSession","errorMessage":"Instance is target of traffic mirror session."},{"errorCode":"InvalidSource.TrafficMirrorSession","errorMessage":"Instance is source of traffic mirror session."},{"errorCode":"InvalidPrivateIpAddress.Malformed","errorMessage":"Specified private IP address is malformed."},{"errorCode":"InvalidPrivateIpAddress.Duplicated","errorMessage":"Specified private IP address is duplicated."},{"errorCode":"IncorrectVSwitchStatus","errorMessage":"The current status of virtual switch does not support this operation."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of instance does not support this operation."},{"errorCode":"OperationDenied","errorMessage":"Specified operation is denied as your instance is not in VPC."},{"errorCode":"InvalidVSwitchId.Mismatch","errorMessage":"Specified instance and virtual switch are not in the same zone."},{"errorCode":"InvalidPrivateIpAddress.Mismatch","errorMessage":"Specified private IP address is not in the CIDR block of virtual switch."},{"errorCode":"InvalidPrivateIp.Changing","errorMessage":"Previous action is not finished yet."},{"errorCode":"PrimaryEniHasSubIp","errorMessage":"Primary network interface of the specified instance has more than one private ip."},{"errorCode":"VSwitchIdNotMatch","errorMessage":"The subnet of private ip is different to the instance, please unbind ha vip."},{"errorCode":"InvalidOperation.EniCountExceeded","errorMessage":"The number of ENIs in an enterprise security group has reached the maximum limit."},{"errorCode":"InvalidParameter.SecurityGroupId","errorMessage":"Security group ids are invalid."}],"401":[{"errorCode":"InvalidOperation.SecurityGroupNotAuthorized","errorMessage":"The specified security group is not authorized to operate."}],"403":[{"errorCode":"OperationDenied","errorMessage":"The Specified operation is denied as your instance is locked for security reasons."},{"errorCode":"InvalidIp.Ipv6Assigned","errorMessage":"The specified instance has been assigned IPv6 address."},{"errorCode":"SecurityGroupInstanceLimitExceed","errorMessage":"%s"},{"errorCode":"InvalidInstance.HasTransitionRecord","errorMessage":"The operation is denied because the specified instance has a migration plan."},{"errorCode":"InvalidInstanceStatus.NotNormal","errorMessage":"The Specified operation is denied due to instance status."},{"errorCode":"InvalidVpcId.SharedVpc","errorMessage":"The Specified operation is denied as your targe vpc is SharedVpc."},{"errorCode":"InvalidOperation.NotAllowed","errorMessage":"The operation is denied because the specified VPC has advanced features enabled."},{"errorCode":"InvalidParameter.ToSecurityGroupId","errorMessage":"%s"},{"errorCode":"InvalidOperation.ResourceManagedByCloudProduct","errorMessage":"%s"},{"errorCode":"InvalidOperation.VswAndEcsAvailabilityZoneMismatch","errorMessage":"Specified instance and virtual switch are not in the same zone."},{"errorCode":"InvalidOperation.CloudBoxEcsNotSupport","errorMessage":"Cloud box ecs instance does not support modifying VPC."},{"errorCode":"AclLimitExceed","errorMessage":"%s"}],"404":[{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidVSwitchId.NotFound","errorMessage":"Specified virtual switch does not exist."},{"errorCode":"NoSuchResource","errorMessage":"The specified resource is not found."},{"errorCode":"InvalidParameter.InvalidInstanceId","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidParameter.VSwitchId","errorMessage":"The specified virtual vswitch does not exist."},{"errorCode":"InvalidRegion.ValueNotSupported","errorMessage":"The specified Region does not exist."},{"errorCode":"InvalidInstance.AttachedEni","errorMessage":"The Specified operation is denied due to elastic network interface."},{"errorCode":"InvalidIp.MultiPrimaryIp","errorMessage":"The Specified operation is denied due to multi private ip."},{"errorCode":"InvalidIp.Ipv6","errorMessage":"The Specified operation is denied due to ipv6."},{"errorCode":"InvalidVSwitch.NotBelongToVpc","errorMessage":"%s"},{"errorCode":"InvalidParameter.EniNo","errorMessage":"%s"},{"errorCode":"InvalidSecurityGroupId.NotFound","errorMessage":"%s"},{"errorCode":"InvalidParameter.SecurityGroupIdRepeated","errorMessage":"%s"},{"errorCode":"InvalidSecurityGroupType.NotSupportClassic","errorMessage":"The specified SecurityGroupIds have classic group type."},{"errorCode":"InvalidSecurityGroupVpc.NotBelongToOneVpc","errorMessage":"The specified SecurityGroupIds are belong to different vpc."},{"errorCode":"EnterpriseGroupLimited.MutliGroupType","errorMessage":"The specified instance can not join multi SecurityGroup types."},{"errorCode":"InvalidParameter.AlreadyInTargetVpc","errorMessage":"The specified instance is already in the destination VPC."},{"errorCode":"InvalidParameter.SecurityGroupId","errorMessage":"The specified SecurityGroupId.N is invalid or does not exist."},{"errorCode":"JoinedGroupLimitExceed","errorMessage":"The specified instance has exceed quota of SecurityGroup."},{"errorCode":"InvalidParameter.MustBeEmpty","errorMessage":"The specified parameter SecurityGroupId.N and VpcId need be empty."},{"errorCode":"InvalidParameter.NotEnoughIpInVSwitch","errorMessage":"The specified virtual switch has not enough available ip."},{"errorCode":"InvalidDependence.MutliDirectlyEip","errorMessage":"The Specified operation is denied due to multi directly Eips."},{"errorCode":"InvalidDependence.HaVip","errorMessage":"The Specified operation is denied due to  HaVip."},{"errorCode":"InvalidDependence.NextHopOfCustomRouter","errorMessage":"The Specified operation is denied due to next hop of Custom Router."},{"errorCode":"InvalidDependence.BeenUsedAsAppServer","errorMessage":"The Specified operation is denied due to AppServer."},{"errorCode":"InvalidDependence.GrantAccess","errorMessage":"The Specified operation is denied due to grant access."},{"errorCode":"InvalidDependence.BindGA","errorMessage":"The Specified operation is denied due to GA."},{"errorCode":"InvalidDependence.SLB","errorMessage":"The Specified operation is denied as your instance with alb or clb."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"{\\n    \\\"RequestId\\\": \\\"E69EF3CC-94CD-42E7-8926-F133B86387C0\\\",\\n    \\\"HostId\\\": \\\"ecs.aliyuncs.com\\\",\\n    \\\"Code\\\": \\\"InvalidPrivateIp.Changing\\\",\\n    \\\"Message\\\": \\\"Specified private IP address is not in the CIDR block of virtual switch.\\\"\\n}\"},{\"type\":\"xml\",\"example\":\"<ModifyInstanceAttributeResponse>\\n    <RequestId>473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E</RequestId>\\n</ModifyInstanceAttributeResponse>\",\"errorExample\":\"<Error>\\n    <RequestId>E69EF3CC-94CD-42E7-8926-F133B86387C0</RequestId>\\n    <HostId>ecs.aliyuncs.com</HostId>\\n    <Code>InvalidPrivateIp.Changing</Code>\\n    <Message>Specified private IP address is not in the CIDR block of virtual switch.</Message>\\n</Error>\"}]","title":"修改专有网络类型实例的VPC属性","summary":"调用ModifyInstanceVpcAttribute修改一台专有网络类型ECS实例的专有网络VPC、私网IP地址或虚拟交换机。","description":"## 接口说明\n\n调用接口时，ECS实例的状态必须是**已停止**（`Stopped`）。\n\n- 当您使用该接口修改实例的私网IP地址或虚拟交换机时，请注意：\n\n    - 新建的ECS实例必须经过重启才能调用该接口。\n    - 成功修改一次后，ECS实例必须经过重启才能继续调用该接口。\n\n- 当您使用该接口修改实例的专有网络VPC时，请注意：\n\n    - **实例：**\n        - 不支持已关联负载均衡实例的ECS实例。\n        - 实例的状态不能为已锁定、等待释放、已过期、过期回收中、欠费回收中。更多信息，请参见[实例生命周期介绍](~~25380~~)。\n        - 实例不能在其它云服务中被使用。例如，实例不能在迁移中、不能已在更换VPC或实例内部署的数据库不能被DTS服务管理等。\n    \n    - **网络：**\n        - 不支持配置了EIP网卡可见模式或多EIP网卡可见模式的实例。\n        - 不支持绑定高可用虚拟IP（HaVip）的实例。\n        - 不支持交换机绑定了自定义路由表的实例。\n        - 不支持开通了全球加速（GA）的实例。\n        - 不支持绑定辅助网卡的实例。\n        - 不支持已分配IPv6地址的实例。\n        - 不支持主网卡有多IP的实例。\n        - 传入的虚拟交换机必须属于目标VPC。\n        - 修改前后虚拟交换机可用区必须一致。\n        - 如果指定主网卡私网IP，则IP必须在虚拟交换机地址段内且可用。如果不指定则随机分配，且目标虚拟交换机的可用IP数充足。\n        - 目标VPC的所有者账号（资源所有者），不能将该目标VPC共享给其他账号（资源使用者）使用。\n    \n    - **安全组（SecurityGroupId.N）：**\n        - 安全组列表必须属于同一种类型。\n        - 安全组的配额与实例能够加入安全组的限制有关。更多信息，请参见[使用限制](~~25412~~)。\n        - 安全组所属的VPC必须与目标VPC一致。\n        - 支持切换安全组的类型。\n          当ECS实例跨类型切换安全组时，您需要充分了解两种安全组规则的配置区别，避免影响实例网络。更多信息，请参见[安全组概述](~~25387~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}