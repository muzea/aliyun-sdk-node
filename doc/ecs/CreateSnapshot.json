{"methods":["post","get"],"schemes":["http","https"],"security":[{"AK":[]}],"deprecated":false,"systemTags":{"operationType":"create","abilityTreeCode":"28846","abilityTreeNodes":["FEATUREecsDXRH67"]},"parameters":[{"name":"DiskId","in":"query","schema":{"description":"云盘ID。","type":"string","required":true,"example":"d-bp1s5fnvk4gn2tws0****"}},{"name":"SnapshotName","in":"query","schema":{"description":"快照的显示名称。长度为2~128个英文或中文字符。必须以大小写字母或中文开头，不能以`http://`或`https://`开头。可以包含数字、半角冒号（:）、下划线（_）或者短划线（-）。\n\n为防止和自动快照的名称冲突，不能以`auto`开头。","type":"string","required":false,"example":"testSnapshotName"}},{"name":"Description","in":"query","schema":{"description":"快照的描述。长度为2~256个英文或中文字符，不能以`http://`或`https://`开头。\n\n默认值：空。","type":"string","required":false,"example":"testDescription"}},{"name":"RetentionDays","in":"query","schema":{"description":"设置快照的保留时间，单位为天。保留时间到期后快照会被自动释放，取值范围：1~65536。\n\n默认值：空，表示快照不会被自动释放。","type":"integer","format":"int32","required":false,"example":"30"}},{"name":"Category","in":"query","schema":{"description":"快照类型。取值范围：\n\n- Standard：普通快照。\n- Flash：本地快照。\n\n>该参数即将被弃用。ESSD云盘普通快照已升级为[默认极速可用](~~193667~~)，您无需额外配置，且不产生额外花销。","type":"string","required":false,"example":"Standard"}},{"name":"ClientToken","in":"query","schema":{"description":"保证请求幂等性。从您的客户端生成一个参数值，确保不同请求间该参数值唯一。**ClientToken**只支持ASCII字符，且不能超过64个字符。更多详情，请参见[如何保证幂等性](~~25693~~)。","type":"string","required":false,"example":"123e4567-e89b-12d3-a456-426655440000"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"快照所在的企业资源组ID。","type":"string","required":false,"example":"rg-bp67acfmxazb4p****"}},{"name":"InstantAccess","in":"query","schema":{"description":"是否开启快照极速可用功能。取值范围：\n- true：开启。仅ESSD云盘支持开启该功能。\n- false：关闭。即创建普通快照。\n\n默认值：false。\n\n>该参数已弃用。ESSD云盘普通快照已升级为[默认极速可用](~~193667~~)，您无需额外配置，且不产生额外花销。","type":"boolean","required":false,"example":"false"}},{"name":"InstantAccessRetentionDays","in":"query","schema":{"description":"设置快照极速可用功能的保留时间，保留时间到期后快照将自动释放。该参数在`InstantAccess=true`时生效。单位：天。取值范围：1~65535。\n\n默认与参数`RetentionDays`的值一致。\n\n>该参数已弃用。ESSD云盘普通快照已升级为[默认极速可用](~~193667~~)，您无需额外配置，且不产生额外花销。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"Tag","in":"query","style":"repeatList","schema":{"description":"标签列表。","type":"array","items":{"description":"标签列表。","type":"object","properties":{"key":{"description":"快照的标签键。\n\n>  为提高兼容性，建议您尽量使用Tag.N.Key参数。","type":"string","required":false,"example":"null"},"Key":{"description":"快照的标签键。N的取值范围：1~20。一旦传入该值，则不允许为空字符串。最多支持128个字符，不能以aliyun和acs:开头，不能包含http://或者https://。","type":"string","required":false,"example":"TestKey"},"Value":{"description":"快照的标签值。N的取值范围：1~20。一旦传入该值，可以为空字符串。最多支持128个字符，不能包含http://或者https://。","type":"string","required":false,"example":"TestValue"},"value":{"description":"快照的标签值。\n\n>  为提高兼容性，建议您尽量使用Tag.N.Value参数。","type":"string","required":false,"example":"null"}},"required":false},"required":false,"maxItems":20}},{"name":"StorageLocationArn","in":"query","schema":{"description":"> 该参数暂未开放使用。","type":"string","required":false,"example":"null"}}],"responses":{"200":{"schema":{"type":"object","properties":{"SnapshotId":{"description":"快照ID。","type":"string","example":"s-bp17441ohwka0yuh****"},"RequestId":{"description":"请求ID。","type":"string","example":"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E"}}}}},"errorCodes":{"400":[{"errorCode":"InvalidParameter.KMSKeyId.NotFound","errorMessage":"The specified KMSKeyId does not exist."},{"errorCode":"InvalidSnapshotName.Malformed","errorMessage":"The specified SnapshotName is wrongly formed."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"DiskCategory.OperationNotSupported","errorMessage":"The type of the specified disk does not support creating a snapshot."},{"errorCode":"Duplicate.TagKey","errorMessage":"The Tag.N.Key contain duplicate key."},{"errorCode":"InvalidTagKey.Malformed","errorMessage":"The specified Tag.n.Key is not valid."},{"errorCode":"InvalidTagValue.Malformed","errorMessage":"The specified Tag.n.Value is not valid."},{"errorCode":"InvalidRetentionDays.Malformed","errorMessage":"The specified RetentionDays is not valid."},{"errorCode":"CreateSnapshot.Failed","errorMessage":"The process of creating snapshot is failed."}],"403":[{"errorCode":"Throttling","errorMessage":"Request was denied due to user flow control."},{"errorCode":"IncorrectDiskStatus.CreatingSnapshot","errorMessage":"A previous snapshot creation is in process."},{"errorCode":"InstanceLockedForSecurity","errorMessage":"The disk attached instance is locked due to security."},{"errorCode":"IncorrectDiskStatus.NeverAttached","errorMessage":"The specified disk has never been attached to any instance."},{"errorCode":"QuotaExceed.Snapshot","errorMessage":"The snapshot quota exceeds."},{"errorCode":"IncorrectDiskStatus.NeverUsed","errorMessage":"The specified disk has never been used after creating."},{"errorCode":"CreateSnapshot.Failed","errorMessage":"The process of creating snapshot is failed."},{"errorCode":"DiskInArrears","errorMessage":"The specified operation is denied as your disk has expired."},{"errorCode":"DiskId.ValueNotSupported","errorMessage":"The specified parameter diskid is not supported."},{"errorCode":"IncorrectDiskStatus","errorMessage":"The current disk status does not support this operation."},{"errorCode":"InvalidAccountStatus.NotEnoughBalance","errorMessage":"Your account does not have enough balance."},{"errorCode":"InvalidAccountStatus.SnapshotServiceUnavailable","errorMessage":"Snapshot service has not been opened yet."},{"errorCode":"IncorrectInstanceStatus","errorMessage":"The current status of the resource does not support this operation."},{"errorCode":"IncorrectVolumeStatus","errorMessage":"The current volume status does not support this operation."},{"errorCode":"IdempotentParameterMismatch","errorMessage":"The specified clientToken is used."},{"errorCode":"IncorrectDiskStatus.Invalid","errorMessage":"The specified disk status invalid, restart instance and try again."},{"errorCode":"IncorrectDiskType.NotSupport","errorMessage":"The specified device type is not supported."},{"errorCode":"IncorrectDiskStatus.Transferring","errorMessage":"The specified device is transferring, you can retry after the process is finished."},{"errorCode":"InvalidParameter.KMSKeyId.CMKUnauthorized","errorMessage":"ECS tags must be added to the CMK."},{"errorCode":"InvalidParameter.KMSKeyId.CMKNotEnabled","errorMessage":"The CMK needs to be enabled."},{"errorCode":"InvalidParameter.KMSKeyId.KMSUnauthorized","errorMessage":"ECS service have no right to access your KMS."},{"errorCode":"IdempotentProcessing","errorMessage":"The previous idempotent request(s) is still processing."},{"errorCode":"QuotaExceed.Tags","errorMessage":"%s"},{"errorCode":"InvalidSnapshotCategory.Malformed","errorMessage":"The specified Category is not valid."},{"errorCode":"InvalidAction.Unauthorized","errorMessage":"The specified action is not valid."},{"errorCode":"InvalidRegion.NotSupportSnapshotInstantAccessRegion","errorMessage":"The snapshot InstantAccess is not supported for this region."},{"errorCode":"InvalidCategoryAndInstantAccess.Malformed","errorMessage":"The snapshot Category and InstantAccess can't be used together."},{"errorCode":"DISK_HAS_CREATING_SNAPSHOT","errorMessage":"The operation cannot be performed while a snapshot is being created for the disk."},{"errorCode":"HibernationConfigured.InstanceOperationForbidden","errorMessage":"The operation is not permitted due to limit of the hibernation configured instance."},{"errorCode":"QuotaExceed.SnapshotQuota","errorMessage":"The quota is insufficient, please contact your channel partner to increase the quota."},{"errorCode":"InvalidInstantAccessRetentionDays.Malformed","errorMessage":"The specified InstantAccessRetentionDays is not valid."},{"errorCode":"CloudBoxNotSupportSnapshotWithInstantAccess","errorMessage":"The specified disk in CloudBox does not support to create a snapshot with InstantAccess."}],"404":[{"errorCode":"InvalidDiskId.NotFound","errorMessage":"The specified DiskId does not exist."},{"errorCode":"InvalidDescription.Malformed","errorMessage":"The specified description is wrongly formed."},{"errorCode":"InvalidInstanceId.NotFound","errorMessage":"The specified InstanceId does not exist."},{"errorCode":"InvalidVolumeId.NotFound","errorMessage":"The specified volume does not exist."},{"errorCode":"InvalidResourceGroup.NotFound","errorMessage":"The ResourceGroup provided does not exist in our records."}],"500":[{"errorCode":"InternalError","errorMessage":"The request processing has failed due to some unknown error."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"SnapshotId\\\": \\\"s-bp17441ohwka0yuh****\\\",\\n  \\\"RequestId\\\": \\\"473469C7-AA6F-4DC5-B3DB-A3DC0DE3C83E\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateSnapshotResponse>\\r\\n        <RequestId>C8B26B44-0189-443E-9816-D951F59623A9</RequestId>\\r\\n        <SnapshotId>s-bp17441ohwka0yuh****</SnapshotId>\\r\\n</CreateSnapshotResponse>\",\"errorExample\":\"\"}]","title":"创建一份快照","summary":"调用CreateSnapshot为一块云盘创建一份快照。","description":"## 接口说明\n\n原本地快照更替为快照极速可用能力。参数说明如下：\n- 如果您在 2020 年 12 月 14 日之前使用过本地快照，您可以正常使用参数Category。\n- 如果您在 2020 年 12 月 14 日之前未使用过本地快照，无需额外进行配置，ESSD PL0/1/2/3及 ESSD AutoPL系列云盘新建的快照将默认为创建后极速可用，且同时支持手动快照和自动快照。API接口中的“InstantAccess”、“InstantAccessRetentionDays”、“DisableInstantAccess”三个极速可用功能相关参数不再生效，“DescribeSnapshots”、“DescribeSnapshotGroups”这两个API接口将新增出参Available来描述快照可用的状态。\n\n以下场景中，您无法为指定的云盘创建快照：\n\n- 云盘保留的手动快照数达到了256份。\n\n- 上份快照还未完成创建。\n\n- 云盘挂载的实例从未启动过。\n\n- 云盘挂载的实例未处于**已停止**（`Stopped`）或者**运行中**（`Running`）状态。\n\n- 查询ECS实例信息时，如果返回数据中包含`{\"OperationLocks\": {\"LockReason\" : \"security\"}}`，则禁止一切操作。\n\n创建快照时，您需要注意：\n\n- 如果创建快照还未完成，这份快照无法用于创建自定义镜像（[CreateImage](~~25535~~)）。\n\n- 如果云盘已挂载到ECS实例上，创建快照期间请勿变更实例状态。\n\n- 支持对处于**已过期**（`Expired`）状态的云盘创建快照。若创建快照时云盘正好达到过期释放时间，云盘被释放的同时也会删除**创建中**（`Creating`）的快照。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}