{"summary":"生成报表嵌入需要使用的ticket。","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{"operationType":"create"},"parameters":[{"name":"WorksId","in":"query","schema":{"description":"开通嵌入的报表ID。\n目前仅支持仪表板，电子表格，自助取数和大屏。","type":"string","required":true,"docRequired":true,"example":"a206f5f3-****-e9b17c835b03"}},{"name":"CmptId","in":"query","schema":{"description":"组件ID。为以上仪表板中某个组件的ID，其他作品类型不支持。\n获取组件ID调用的接口请参见[QueryWorksBloodRelationship](https://next.api.aliyun.com/api/quickbi-public/2022-01-01/QueryWorksBloodRelationship?spm=a2c4g.11186623.0.0.15615d7aWVvWAl&params={}&lang=JAVA&tab=DOC&sdkStyle=old)。","type":"string","required":false,"docRequired":false,"example":"0fc6a275c7f64f17b1****a306ce0f31"}},{"name":"TicketNum","in":"query","schema":{"description":"Ticket的票据数量，每次使用票据访问后，Ticket的票据数量减1。\n- 默认值为1。\n- 建议值为1。\n- 最大值为99999。\n","type":"integer","format":"int32","required":false,"docRequired":false,"example":"1"}},{"name":"UserId","in":"query","schema":{"description":"Quick BI的UserId，非您的阿里云账号ID。\n您可以调用[QueryUserInfoByAccount](https://next.api.aliyun.com/api/quickbi-public/2022-01-01/QueryUserInfoByAccount?spm=a2c4g.11186623.0.0.15615d7aWVvWAl&params={}&tab=DOC&sdkStyle=old)接口，获取UserId。UserId样例为fe67f61a35a94b7da1a34ba174a7****。\n\n> UserId和AccountName只填一个即可，不填时默认绑定报表的Owner，访问报表时将以该用户身份访问。若您需要配置数据行级权限，请参见[行级权限](https://help.aliyun.com/document_detail/323482.htm?spm=a2c4g.11186623.0.0.3da12f1fUfqvPi#section-6jx-sa4-0vz)。","type":"string","required":false,"docRequired":false,"example":"46e537466****92704c8"}},{"name":"AccountName","in":"query","schema":{"description":"用户的账号名称。\n\n- 如果用户是阿里云主账号**wangwu**，格式为**[主账号]**，例如**wangwu**。\n- 如果用户是RAM账号**zhangsan**@aliyun.cn**，格式为**[主账号：子账号]**，例如**wangwu:zhangsan****。\n\n> UserId和AccountName只填一个即可，不填时默认绑定报表的Owner，访问报表时将以该用户身份访问。若您需要配置数据行级权限，请参见[行级权限](https://help.aliyun.com/document_detail/323482.htm?spm=a2c4g.11186623.0.0.3da12f1fUfqvPi#section-6jx-sa4-0vz)。","type":"string","required":false,"docRequired":false,"example":"测试用户"}},{"name":"AccountType","in":"query","schema":{"description":"用户的账号类型。\n- 1：阿里云账号\n- 3：Quick BI自建账号\n- 4：钉钉\n- 5：RAM子账号\n- 9：企业微信\n- 10：飞书\n> 若AccountName不为空时，则AccountType也不能为空。","type":"integer","format":"int32","required":false,"docRequired":false,"example":"1"}},{"name":"ExpireTime","in":"query","schema":{"description":"过期时间\n- 单位：分钟\n- 默认：240","type":"integer","format":"int32","required":false,"docRequired":false,"example":"200"}},{"name":"WatermarkParam","in":"query","schema":{"description":"报表的水印参数。\n- 不得超过50个字符。\n- 当报表类型为大屏时，不支持水印传参。","type":"string","required":false,"docRequired":false,"example":"三方嵌入"}},{"name":"GlobalParam","in":"query","schema":{"description":"报表过滤条件的全局参数。\n- JsonArray格式的字符串。\n\n> 若您需要使用全局参数能力，请联系[Quick BI运营负责人](https://h5-alimebot.dingtalk.com/intl/index.htm?spm=a2c4g.11186623.0.0.3da14f6chrDv9e&sourceType=ding_talk&from=DEFFB9G5KBByQkwq23wneFIOmaJ)。","type":"string","required":false,"docRequired":false,"example":"[{\"paramKey\":\"price\",\"joinType\":\"and\",\"conditionList\":[{\"operate\":\">\",\"value\":\"0\"}]}]"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"description":"请求ID。","type":"string","example":"D787E1A3-A93C-424A-B626-C2B05DF8D885"},"Result":{"description":"生成ticket的值。","type":"string","example":"ccd3428c-****-****-a608-26bae29dffee"},"Success":{"description":"是否请求成功。取值范围：\n- true：请求成功\n- false：请求失败","type":"boolean","example":"true"}}}}},"errorCodes":{"400":[{"errorCode":"Internal.System.Error","errorMessage":"An internal system error occurred."},{"errorCode":"Authorize3rdTicket.BindedWorks.Mismatch","errorMessage":"The report bound by the ticket mismatches the actual report."},{"errorCode":"Authorize3rdTicket.Expired","errorMessage":"Ticket [%s] has expired."},{"errorCode":"Authorize3rdTicket.HasNo.LoginToken","errorMessage":"The request [%s] has no token."},{"errorCode":"Authorize3rdTicket.NotExist","errorMessage":"Ticket %s does not exist."},{"errorCode":"Authorize3rdTicket.Num.Exceed","errorMessage":"The number of tickets %s  is invalid."},{"errorCode":"Authorize3rdTicket.Num.HasNoLeft","errorMessage":"There is no ticket number left, please generate new ticket."},{"errorCode":"Report.NotExist.Error","errorMessage":"This work does not exist. It may have been deleted. Work ID is %s."},{"errorCode":"Authorize3Rd.Report.Unauthorized","errorMessage":"The report is not enabled for third party embedding."},{"errorCode":"Cube.Not.Exist","errorMessage":"The Cube does not exist."},{"errorCode":"Datasource.NotFound.Error","errorMessage":"The specified data source does not exist: %s."},{"errorCode":"Report.NotExist","errorMessage":"The dashboard does not exist."},{"errorCode":"Organization.Workspace.Inconformity","errorMessage":"The workspace does not match the organization."},{"errorCode":"ApiUser.Not.Exists","errorMessage":"The specified user does not exist."},{"errorCode":"Parameter.Length.Exceed","errorMessage":"Parameter length exceeds maximum limit: [%s]."},{"errorCode":"Invalid.User.Organization","errorMessage":"The user is not in your organization."},{"errorCode":"GlobalParam.Restricted.Use","errorMessage":"The global parameter function is restricted in your version."},{"errorCode":"Authorize3rdTicket.Unsupport.ScreenWatermark","errorMessage":"Screen embed does not support watermark parameters."},{"errorCode":"Instance.Expired","errorMessage":"Your instance has expired."},{"errorCode":"Instance.Not.Exist","errorMessage":"The specified instance does not exist."},{"errorCode":"Invalid.Organization","errorMessage":"The specified organizational unit does not exist."},{"errorCode":"Invalid.Parameter","errorMessage":"An error occurred while verifying parameters."},{"errorCode":"Invalid.Parameter.Error","errorMessage":"The parameter is invalid:%s."},{"errorCode":"Invalid.Param.Error","errorMessage":"The parameter is invalid."},{"errorCode":"Invalid.User.Admin","errorMessage":"You are not an administrator of this organization."},{"errorCode":"System.Param.Empty","errorMessage":"You must specify the %s parameter."},{"errorCode":"Access.Forbidden","errorMessage":"Your instance version or access key is not allowed to call the API operation, only professional version supports calling."},{"errorCode":"UserInfo.Error","errorMessage":"The personal information is invalid."},{"errorCode":"User.Not.WorkspaceAdmin","errorMessage":"Only administrators of the group workspace can perform this operation."},{"errorCode":"Application.Object.NotExist","errorMessage":"The object you are operating does not exist or has been deleted."},{"errorCode":"Not.ApiCall.AuthUser","errorMessage":"You are not an administrator or API call auth user of this organization."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"D787E1A3-A93C-424A-B626-C2B05DF8D885\\\",\\n  \\\"Result\\\": \\\"ccd3428c-****-****-a608-26bae29dffee\\\",\\n  \\\"Success\\\": true\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<CreateTicketResponse>\\n    <RequestId>D787E1A3-A93C-424A-B626-C2B05DF8D885</RequestId>\\n    <Result>ccd3428c-****-****-a608-26bae29dffee</Result>\\n    <Success>true</Success>\\n</CreateTicketResponse>\",\"errorExample\":\"\"}]","title":"生成报表嵌入ticket","description":"具体使用方法详见[报表嵌入数据权限控制和传参的安全增强方案](https://help.aliyun.com/document_detail/391291.html)。"}