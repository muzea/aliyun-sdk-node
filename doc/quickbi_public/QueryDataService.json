{"methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"ApiId","in":"query","schema":{"description":"数据服务中的API ID，请参见：[数据服务](~~144980~~)。","type":"string","required":true,"docRequired":true,"example":"f4cc43bc3***"}},{"name":"Conditions","in":"query","schema":{"description":"数据服务的查询条件，以Key和Value的形式传入。map类型的字符串。其中，Key为请求参数的参数名，Value为请求参数的参数值。Key和Value必须成对出现。\n\n**说明：**\n\n-  请求参数的操作符设置为**枚举筛选**时支持value包含多个值，此时value值的格式是JSON形式的List。例如： `area=[\"华东\",\"华北\",\"华南\"] `     \n\n- 对于日期，根据类型不同，提供不同的入参格式：\n\n    - 年：2019\n\n    - 季：2019Q1\n\n    - 月：201901  （携带0）\n    \n    - 周：2019-52\n\n    - 日：20190101\n\n    - 时：14:00:00 （分、秒为00）\n    \n    - 分：14:12:00 （秒为00）\n\n    - 秒：14:34:34","type":"string","required":false,"example":"{ \"area\": [\"华东\", \"华北\"],  \"shopping_date\": \"2019Q1\",  }"}},{"name":"ReturnFields","in":"query","schema":{"description":"返回参数的参数名列表，List 类型字符串。","type":"string","required":false,"example":"[\"area\", \"city\", \"price\", \"date\"]"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Success":{"description":"是否请求成功。取值范围：\n\n- true：请求成功\n\n- false：请求失败","type":"boolean","example":"true"},"RequestId":{"description":"请求ID。","type":"string","example":"78C1AA2D-9201-599E-A0BA-6FC462E57A95"},"Result":{"description":"返回接口查询结果。","type":"object","properties":{"Sql":{"description":"请求查询的 SQL。","type":"string","example":"SELECT COMPANY_T_1_.`area` AS D_AREA_2_, COMPANY_T_1_.`city` AS D_CITY_3_, SUM(COMPANY_T_1_.`profit_amt`) AS D_PROFIT_4_ FROM `quickbi_test`.`company_sales_record_copy` AS COMPANY_T_1_ WHERE COMPANY_T_1_.`area` LIKE '%华东%' GROUP BY COMPANY_T_1_.`area`, COMPANY_T_1_.`city` HAVING SUM(COMPANY_T_1_.`order_amt`) > 1 LIMIT 0, 10"},"Headers":{"description":"列头。","type":"array","items":{"type":"object","properties":{"Type":{"description":"字段类型，用于区分是字段类型为维度或度量字段。","type":"string","example":"StandardDimension"},"DataType":{"description":"字段的数据类型。一般有\nnumber、string、date、datetime、time、geographic。","type":"string","example":"string"},"Granularity":{"description":"维度字段的粒度。\n当请求字段为日期维度或地理维度字段，才会返回该字段，取值范围：\n\n- 日期粒度：yearRegion（年）、 monthRegion（月）、weekRegion（周）、dayRegion（日）、hourRegion（时）、minRegion（分）、secRegion（秒）\n\n- 地理信息粒度：COUNTRY（国际级）、PROVINCE（省级）、CITY（市级）、XIAN（区县）、REGION（区域）","type":"string","example":"yearRegion"},"Label":{"description":"字段别名，结果参数values中map数据行的key。","type":"string","example":"area"},"Column":{"description":"字段名，对应物理表字段名。","type":"string","example":"具体的物理字段名"},"Aggregator":{"description":"聚合操作符。度量字段才会有，例如SUM、AVG和MAX。","type":"string","example":"SUM"}}}},"Values":{"description":"返回查询到的结果。","type":"array","items":{"description":"返回数据的行和列。\n\n此参数为List<Map>结构，每个Map即一行数据。其中Map中的Key对应 Headers#Label字段。","type":"object","example":"[{\"area\":\"华东\",\"city\":\"三明市\"},{\"area\":\"华东\",\"city\":\"上海市\"}]"}}}}}}}},"errorCodes":{"400":[{"errorCode":"API.No.Permission","errorMessage":"You are not authorized to call the data service API operation."},{"errorCode":"API.Not.Exist","errorMessage":"The data service API operation does not exist."},{"errorCode":"Cube.Not.Exist","errorMessage":"The Cube does not exist."},{"errorCode":"Invalid.Parameter.Conditions","errorMessage":"The specified Conditions is invalid. %s is not defined."},{"errorCode":"Invalid.Parameter.ReturnFields","errorMessage":"The specified returnFields is invalid. %s is not defined."},{"errorCode":"Missing.Conditions","errorMessage":"The specified Conditions is invalid. You must specify %s."},{"errorCode":"Missing.Dimension.Measure","errorMessage":"The dimension or measure %s does not exist in Cube."},{"errorCode":"Rowlevel.Permission.Forbbiden","errorMessage":"The request is denied by row level permission. The dataset is %s, %s %s."},{"errorCode":"Internal.System.Error","errorMessage":"An internal system error occurred."},{"errorCode":"Datasource.Sql.ExecuteFailed","errorMessage":"Failed to execute the SQL statement in the data source."},{"errorCode":"Instance.Expired","errorMessage":"Your instance has expired."},{"errorCode":"Instance.Not.Exist","errorMessage":"The specified instance does not exist."},{"errorCode":"Invalid.Organization","errorMessage":"The specified organizational unit does not exist."},{"errorCode":"User.Not.In.Organization","errorMessage":"The specified user is not in the organizational unit."},{"errorCode":"Invalid.Parameter","errorMessage":"An error occurred while verifying parameters."},{"errorCode":"Invalid.Parameter.Error","errorMessage":"The parameter is invalid:%s."},{"errorCode":"Invalid.Param.Error","errorMessage":"The parameter is invalid."},{"errorCode":"Invalid.User.Admin","errorMessage":"You are not an administrator of this organization."},{"errorCode":"System.Param.Empty","errorMessage":"You must specify the %s parameter."},{"errorCode":"Access.Forbidden","errorMessage":"Your instance version or access key is not allowed to call the API operation, only professional version supports calling."},{"errorCode":"UserInfo.Error","errorMessage":"The personal information is invalid."},{"errorCode":"ApiUser.Not.Exists","errorMessage":"The specified user does not exist."},{"errorCode":"User.Not.WorkspaceAdmin","errorMessage":"Only administrators of the group workspace can perform this operation."},{"errorCode":"Application.Object.NotExist","errorMessage":"The object you are operating does not exist or has been deleted."},{"errorCode":"Not.ApiCall.AuthUser","errorMessage":"You are not an administrator or API call auth user of this organization."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Success\\\": true,\\n  \\\"RequestId\\\": \\\"78C1AA2D-9201-599E-A0BA-6FC462E57A95\\\",\\n  \\\"Result\\\": {\\n    \\\"Sql\\\": \\\"SELECT COMPANY_T_1_.`area` AS D_AREA_2_, COMPANY_T_1_.`city` AS D_CITY_3_, SUM(COMPANY_T_1_.`profit_amt`) AS D_PROFIT_4_ FROM `quickbi_test`.`company_sales_record_copy` AS COMPANY_T_1_ WHERE COMPANY_T_1_.`area` LIKE '%华东%' GROUP BY COMPANY_T_1_.`area`, COMPANY_T_1_.`city` HAVING SUM(COMPANY_T_1_.`order_amt`) > 1 LIMIT 0, 10\\\",\\n    \\\"Headers\\\": [\\n      {\\n        \\\"Type\\\": \\\"StandardDimension\\\",\\n        \\\"DataType\\\": \\\"string\\\",\\n        \\\"Granularity\\\": \\\"yearRegion\\\",\\n        \\\"Label\\\": \\\"area\\\",\\n        \\\"Column\\\": \\\"具体的物理字段名\\\",\\n        \\\"Aggregator\\\": \\\"SUM\\\"\\n      }\\n    ],\\n    \\\"Values\\\": [\\n      [\\n        {\\n          \\\"area\\\": \\\"华东\\\",\\n          \\\"city\\\": \\\"三明市\\\"\\n        },\\n        {\\n          \\\"area\\\": \\\"华东\\\",\\n          \\\"city\\\": \\\"上海市\\\"\\n        }\\n      ]\\n    ]\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<QueryDataServiceResponse>\\n    <Success>true</Success>\\n    <RequestId>78C1AA2D-9201-599E-A0BA-6FC462E57A95</RequestId>\\n    <Result>\\n        <Sql>SELECT COMPANY_T_1_.`area` AS D_AREA_2_, COMPANY_T_1_.`city` AS D_CITY_3_, SUM(COMPANY_T_1_.`profit_amt`) AS D_PROFIT_4_ FROM `quickbi_test`.`company_sales_record_copy` AS COMPANY_T_1_ WHERE COMPANY_T_1_.`area` LIKE '%华东%' GROUP BY COMPANY_T_1_.`area`, COMPANY_T_1_.`city` HAVING SUM(COMPANY_T_1_.`order_amt`) &gt; 1 LIMIT 0, 10</Sql>\\n        <Headers>\\n            <Type>StandardDimension</Type>\\n            <DataType>string</DataType>\\n            <Granularity>yearRegion</Granularity>\\n            <Label>area</Label>\\n            <Column>具体的物理字段名</Column>\\n            <Aggregator>SUM</Aggregator>\\n        </Headers>\\n        <Values/>\\n    </Result>\\n</QueryDataServiceResponse>\",\"errorExample\":\"\"}]","title":"调用数据服务API","summary":"对数据服务中已创建的API进行调用。","description":"# 前提条件\n您通过Quick BI的数据服务，创建数据服务的API，具体请参见[数据服务](~~144980~~)。\n\n# 使用限制\n* 数据服务功能仅针对专业版客户开放。 \n* 数据服务API调用，接口超时时间为60s，单个API的QPS为10次/秒。\n* 数据服务API所引用数据集，如果开启了行级权限，API调用的时候可能会被行级权限策略拦截。"}