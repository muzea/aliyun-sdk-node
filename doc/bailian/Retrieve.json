{"summary":"此接口用于通过关键字检索知识库中的索引信息。它允许用户传递搜索配置，并获取匹配的索引数据列表。检索结果可帮助用户评估索引的质量和相关性。","path":"/{WorkspaceId}/index/retrieve","methods":["post"],"schemes":["https"],"security":[{"AK":[]}],"consumes":["application/json"],"produces":["application/json"],"deprecated":false,"systemTags":{"operationType":"none"},"parameters":[{"name":"Query","in":"query","schema":{"description":"测试文本","type":"string","required":false,"example":"百炼平台介绍"}},{"name":"DenseSimilarityTopK","in":"query","schema":{"description":"向量检索topK，默认 100","type":"integer","format":"int32","required":false,"example":"100","default":"100"}},{"name":"EnableReranking","in":"query","schema":{"description":"是否开启reranking，默认true","type":"boolean","required":false,"enumValueTitles":{"true":"开启","false":"不开启"},"example":"true"}},{"name":"EnableRewrite","in":"query","schema":{"description":"是否开启rewrite,默认值是false","type":"boolean","required":false,"enumValueTitles":{"true":"开启","false":"不开启"},"example":"false"}},{"name":"Rerank","in":"query","style":"json","schema":{"description":"Rank配置（目前支持Rank模型选择）","type":"array","items":{"description":"Rank配置","type":"object","properties":{"ModelName":{"description":"Rank模型名称","type":"string","required":false,"enumValueTitles":{"gte-rerank-hybrid":"官方推荐","gte-rerank":"Gte排序模型"},"example":"gte-rerank-hybrid"}},"required":false},"required":false}},{"name":"RerankMinScore","in":"query","schema":{"description":"rerank后的最小分过滤","type":"number","format":"float","required":false,"example":"0.20"}},{"name":"RerankTopN","in":"query","schema":{"description":"rerank后的top n 返回数据","type":"integer","format":"int32","required":false,"example":"5","default":"5"}},{"name":"Rewrite","in":"query","style":"json","schema":{"description":"对话改写配置","type":"array","items":{"description":"对话改写配置","type":"object","properties":{"ModelName":{"description":"对话改写模型名称","type":"string","required":false,"example":"conv-rewrite-qwen-1.8b（目前只支持该模型）"}},"required":false},"required":false}},{"name":"SparseSimilarityTopK","in":"query","schema":{"description":"稀疏相似度TopK","type":"integer","format":"int32","required":false,"example":"100","default":"100"}},{"name":"WorkspaceId","in":"path","schema":{"description":"业务空间id，请登录百炼后，在左上角业务空间详情中获取。","type":"string","required":true,"example":"ws_3Nt27MYcoK191ISp"}},{"name":"IndexId","in":"query","schema":{"description":"索引ID","type":"string","required":true,"example":"5pwe0m2g6t"}},{"name":"SaveRetrieverHistory","in":"query","schema":{"description":"是否保存历史文档召回测试数据","type":"boolean","required":false,"example":"false","default":"true"}}],"responses":{"200":{"schema":{"type":"object","properties":{"RequestId":{"title":"Id of the request","description":"Id of the request","type":"string","example":"17204B98-7734-4F9A-8464-2446A84821CA"},"Data":{"description":"返回数据","type":"object","properties":{"Nodes":{"description":"节点列表","type":"array","items":{"description":"节点列表","type":"object","properties":{"Score":{"description":"检索得分,取值范围：[0-1]","type":"number","format":"double","example":"0.3"},"Text":{"description":"检索文本","type":"string","example":"阿里云百炼是基于通义大模型、行业大模型以及三方大模型的一站式大模型开发平台。面向企业客户和个人开发者，提供完整的模型服务工具和全链路应用开发套件，预置丰富的能力插件，提供API及SDK等便捷的集成方式，高效完成大模型应用构建。"},"Metadata":{"description":"元数据Map。","type":"any","example":"{\n\t\"parent\": \"\",\n\t\"file_path\": \"https://bailian-datahub-data-pre.oss-cn-hangzhou.aliyuncs.com/multimodal/docJson/10021401/%E5%8C%97%E4%BA%AC%E5%B7%A5%E4%BD%9C%E5%B1%85%E4%BD%8F%E8%AF%81-%E5%AD%A6%E4%BD%8D%E8%AE%A4%E8%AF%81%E6%94%BB%E7%95%A54_1717583236162.json?Expires=1719482357&OSSAccessKeyId=LTAI5tKzNnKPFwCJSCpxx51h&Signature=yPgLl4gh9E0z9Ph%2F7RHSwTvsjf8%3D\",\n\t\"image_url\": [\n\t  \"http://docmind-api-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/publicDocStructure/docmind-20240605-d5d800a05442415197a929553826e3b4/0.png?Expires=1720085164&OSSAccessKeyId=LTAI5tFEK2uEApeeYzxNMEci&Signature=MvGxcxEzzD0X8CQLjmfMB8OHK40%3D\"\n\t],\n\t\"nid\": \"075997b3a310c7d10695cbd3dfb12d2b|c8a432ba45ac993a9cb0dd3fa465302e|975065407c4510c2941725c097660d27|28b992d76381bff8c15a890f802e6fa4|0459166c84e7f2ccd1604dfca6b0f265|9b6426cafd87ff85c4019f1ac7980f1b|89662f29a7fd1af5c55e0d0f2896c38d\",\n\t\t\"title\": \"阿里云百炼文档\",\n\t\"doc_id\": \"doc_062fccb18e23408a84b20ce3af1b0e8810021401\",\n\t\"content\": \"阿里云百炼是基于通义大模型、行业大模型以及三方大模型的一站式大模型开发平台。面向企业客户和个人开发者，提供完整的模型服务工具和全链路应用开发套件，预置丰富的能力插件，提供API及SDK等便捷的集成方式，高效完成大模型应用构建\",\n\t\"workspace_id\": \"ws_3Nt27MYcoK191ISp\",\n\t\"hier_title\": \"阿里云百炼文档\",\n\t\"doc_name\": \"阿里云百炼文档介绍.pdpf\",\n\t\"pipeline_id\": \"rhdc8n12s0\",\n\t\"_id\": \"ws_3Nt27MYcoK191ISp_rhdc8n12s0_doc_062fccb18e23408a84b20ce3af1b0e8810021401_0_0\"\n\t}"}}}}}},"Code":{"description":"错误状态码","type":"string","example":"Index.InvalidParameter"},"Message":{"description":"错误信息，有错误信息时返回该值","type":"string","example":"Required parameter(%s) missing or invalid, please check the request parameters."},"Success":{"description":"调用是否成功","type":"boolean","example":"true"},"Status":{"description":"接口返回的状态码","type":"string","example":"200"}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"RequestId\\\": \\\"17204B98-7734-4F9A-8464-2446A84821CA\\\",\\n  \\\"Data\\\": {\\n    \\\"Nodes\\\": [\\n      {\\n        \\\"Score\\\": 0.3,\\n        \\\"Text\\\": \\\"阿里云百炼是基于通义大模型、行业大模型以及三方大模型的一站式大模型开发平台。面向企业客户和个人开发者，提供完整的模型服务工具和全链路应用开发套件，预置丰富的能力插件，提供API及SDK等便捷的集成方式，高效完成大模型应用构建。\\\",\\n        \\\"Metadata\\\": \\\"{\\\\n\\\\t\\\\\\\"parent\\\\\\\": \\\\\\\"\\\\\\\",\\\\n\\\\t\\\\\\\"file_path\\\\\\\": \\\\\\\"https://bailian-datahub-data-pre.oss-cn-hangzhou.aliyuncs.com/multimodal/docJson/10021401/%E5%8C%97%E4%BA%AC%E5%B7%A5%E4%BD%9C%E5%B1%85%E4%BD%8F%E8%AF%81-%E5%AD%A6%E4%BD%8D%E8%AE%A4%E8%AF%81%E6%94%BB%E7%95%A54_1717583236162.json?Expires=1719482357&OSSAccessKeyId=LTAI5tKzNnKPFwCJSCpxx51h&Signature=yPgLl4gh9E0z9Ph%2F7RHSwTvsjf8%3D\\\\\\\",\\\\n\\\\t\\\\\\\"image_url\\\\\\\": [\\\\n\\\\t  \\\\\\\"http://docmind-api-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/publicDocStructure/docmind-20240605-d5d800a05442415197a929553826e3b4/0.png?Expires=1720085164&OSSAccessKeyId=LTAI5tFEK2uEApeeYzxNMEci&Signature=MvGxcxEzzD0X8CQLjmfMB8OHK40%3D\\\\\\\"\\\\n\\\\t],\\\\n\\\\t\\\\\\\"nid\\\\\\\": \\\\\\\"075997b3a310c7d10695cbd3dfb12d2b|c8a432ba45ac993a9cb0dd3fa465302e|975065407c4510c2941725c097660d27|28b992d76381bff8c15a890f802e6fa4|0459166c84e7f2ccd1604dfca6b0f265|9b6426cafd87ff85c4019f1ac7980f1b|89662f29a7fd1af5c55e0d0f2896c38d\\\\\\\",\\\\n\\\\t\\\\t\\\\\\\"title\\\\\\\": \\\\\\\"阿里云百炼文档\\\\\\\",\\\\n\\\\t\\\\\\\"doc_id\\\\\\\": \\\\\\\"doc_062fccb18e23408a84b20ce3af1b0e8810021401\\\\\\\",\\\\n\\\\t\\\\\\\"content\\\\\\\": \\\\\\\"阿里云百炼是基于通义大模型、行业大模型以及三方大模型的一站式大模型开发平台。面向企业客户和个人开发者，提供完整的模型服务工具和全链路应用开发套件，预置丰富的能力插件，提供API及SDK等便捷的集成方式，高效完成大模型应用构建\\\\\\\",\\\\n\\\\t\\\\\\\"workspace_id\\\\\\\": \\\\\\\"ws_3Nt27MYcoK191ISp\\\\\\\",\\\\n\\\\t\\\\\\\"hier_title\\\\\\\": \\\\\\\"阿里云百炼文档\\\\\\\",\\\\n\\\\t\\\\\\\"doc_name\\\\\\\": \\\\\\\"阿里云百炼文档介绍.pdpf\\\\\\\",\\\\n\\\\t\\\\\\\"pipeline_id\\\\\\\": \\\\\\\"rhdc8n12s0\\\\\\\",\\\\n\\\\t\\\\\\\"_id\\\\\\\": \\\\\\\"ws_3Nt27MYcoK191ISp_rhdc8n12s0_doc_062fccb18e23408a84b20ce3af1b0e8810021401_0_0\\\\\\\"\\\\n\\\\t}\\\"\\n      }\\n    ]\\n  },\\n  \\\"Code\\\": \\\"Index.InvalidParameter\\\",\\n  \\\"Message\\\": \\\"Required parameter(%s) missing or invalid, please check the request parameters.\\\",\\n  \\\"Success\\\": true,\\n  \\\"Status\\\": \\\"200\\\"\\n}\",\"type\":\"json\"}]","title":"检索知识索引","description":"- 在使用检索知识索引接口之前，应确保索引库已经成功构建并切调用\"查询索引创建任务状态（GetIndexJobStatus）\"获取了处理成功的状态。\n- 由于涉及到复杂的文本匹配和数据检索，我们建议用户针对每次查询合理设置超时和重试策略。\n- 返回的结果主要包含与搜索条件匹配的索引条目的关键信息，如标题、描述、链接、排序分数等，具体返回字段会因索引内容而异。请参照返回数据结构的描述，处理和使用这些数据。"}