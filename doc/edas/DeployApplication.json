{"path":"/pop/v5/changeorder/co_deploy","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{},"parameters":[{"name":"AppId","in":"query","schema":{"description":"应用ID。可通过查询ListApplication接口获取，请参见[ListApplication](~~423162~~)。","type":"string","required":true,"docRequired":true,"example":"3616cdca-********************"}},{"name":"PackageVersion","in":"query","schema":{"description":"部署的应用部署包版本，最长64个字符，建议使用时间戳。","type":"string","required":true,"docRequired":true,"example":"1.0"}},{"name":"Desc","in":"query","schema":{"description":"应用部署描述信息。","type":"string","required":false,"example":"Deploy by edas pop api"}},{"name":"DeployType","in":"query","schema":{"description":"部署类型。包含`URL`和`image`（废弃参数值），其中只有Swarm集群应用支持镜像（`image`）部署。","type":"string","required":true,"docRequired":true,"example":"URL"}},{"name":"WarUrl","in":"query","schema":{"description":"应用部署包（WAR或JAR）的URL地址。**DeployType**为`url`时必填，建议使用OSS存储的应用部署包路径。","type":"string","required":false,"example":"https://edas.oss-cn-hangzhou.aliyuncs.com/demo/hello-edas.war"}},{"name":"ImageUrl","in":"query","schema":{"description":"**（废弃参数）**Swarm集群应用部署时可指定的应用镜像URL，推荐使用阿里云镜像仓库地址。","type":"string","required":false,"example":"registry.cn-hangzhou.aliyuncs.com/mw/testapp:latest"}},{"name":"GroupId","in":"query","schema":{"description":"部署分组ID。可通过查询ListDeployGroup接口获取，请参见[ListDeployGroup](~~423184~~)。\n\n<note>如果要部署到所有分组，参数设置为`all`。</note>\n","type":"string","required":true,"docRequired":true,"example":"all"}},{"name":"Batch","in":"query","schema":{"description":"每组批次。\n\n- 当指定了应用分组的GroupId为具体的某个应用分组ID时，表示向指定应用分组部署。此时可指定的最小批次数为1，最大批次数为该应用分组下正常状态的ECS实例数最大值，实际分批数结果范围：\\[1，指定的分批数\\] （指定的分批数=指定的分组下面ECS总数）。\n- 当指定了应用分组的GroupId为all时，表示向所有应用分组部署，此时可指定的最小批次数为1，最大批次数为正常状态的ECS数量最多的分组下的ECS实例数。","type":"integer","format":"int32","required":false,"example":"1"}},{"name":"BatchWaitTime","in":"query","schema":{"description":"分批等待时间，单位：分钟。\n- 默认为0，表示不等待。\n- 最大为5。\n\n当实际批次数较多时，需要设置一个合理值，否则会导致本次应用部署的变更持续时间比较长。","type":"integer","format":"int32","required":false,"example":"0"}},{"name":"AppEnv","in":"query","schema":{"description":"部署环境变量，格式必须符合`{\"name\":\"x\",\"value\":\"y\"},{\"name\":\"x2\",\"value\":\"y2\"} `，`key`固定为`name`和`value`。","type":"string","required":false,"example":"[{\\\"name\\\":\\\"env_name_1\\\", \\\"value\\\":\\\"env_value_1\\\"}, {\\\"name\\\":\\\"env_name_2\\\",\\\"value\\\":\\\"env_value_2\\\"}]"}},{"name":"BuildPackId","in":"query","schema":{"description":"EDAS-Container构建包号。\n\n- 如果部署时不需要更改EDAS-Container版本，则该参数可不设置。\n- 如果需要在本次部署时，更新目标应用的EDAS-Container版本，则需要设置。\n\n有以下两种获取方式：\n\n- 可通过查询容器版本列表接口ListBuildPack获取，请参见[ListBuildPack](~~149391~~)。\n- 在[容器版本说明](~~92614~~)表格中的**构建包序号**列获取。例如`59`表示`EDAS-Container 3.5.8 版本`。","type":"integer","format":"int64","required":false,"example":"59"}},{"name":"ComponentIds","in":"query","schema":{"description":"应用组件ID，参数不适用于HSF应用。可通过查询组件列表接口ListComponents接口获取，请参见[ListComponents](~~423223~~)。\n\n- 当创建应用时已经设置，则本次部署不需要再设置。\n- 如果在本次部署时需要更新目标应用的应用组件版本则需要设置。\n\n常用的应用组件ID及含义如下：\n\n- 4：表示Apache Tomcat 7.0.91\n- 7：表示Apache Tomcat 8.5.42\n- 5：表示OpenJDK 1.8.x\n- 6：表示OpenJDK 1.7.x \n\n更多信息，请参见[InsertApplication](~~423185~~)接口的常见应用的主要参数说明。","type":"string","required":false,"example":"7"}},{"name":"ReleaseType","in":"query","schema":{"description":"分批方式。\n- 0为自动。\n- 1为各批次间需要手动确认。可在控制台目标应用的变更流程详情中单击**继续下一批**，也可通过调用ContinuePipeline继续下一批（由于使用API部署，建议使用自动分批），请参见[ContinuePipeline](~~126990~~)。","type":"integer","format":"int64","required":false,"example":"0"}},{"name":"Gray","in":"query","schema":{"description":"是否为金丝雀发布。\n\n- true：金丝雀发布。\n\n    - 灰度发布时，必须指定灰度发布的分组ID，即GroupId。\n\n    - 灰度发布作为一个批次发布。\n\n    - 灰度结束后，正常发布，分组批次由Batch控制。\n\n- false：非金丝雀发布（单批或分批发布）。\n\n","type":"boolean","required":false,"example":"true"}},{"name":"TrafficControlStrategy","in":"query","schema":{"description":"灰度发布策略内容，请参见[DeployK8sApplication](~~423212~~)。","type":"string","required":false,"example":"{\"http\":{\"rules\":[{\"conditionType\":\"percent\",\"percent\":10}]}}"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"接口请求的状态码。","type":"integer","format":"int32","example":"200"},"ChangeOrderId":{"description":"应用部署的变更流程ID。","type":"string","example":"adf86823-055b-48a4-a59f-fa5582******"},"Message":{"description":"接口请求返回的信息。","type":"string","example":"success"},"RequestId":{"description":"接口请求唯一标识符。","type":"string","example":"d6834ee9-5045-*************"}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"ChangeOrderId\\\": \\\"adf86823-055b-48a4-a59f-fa5582******\\\",\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"RequestId\\\": \\\"d6834ee9-5045-*************\\\"\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<DeployApplicationResponse>\\n    <Code>200</Code>\\n    <ChangeOrderId>adf86823-055b-48a4-a59f-fa5582******</ChangeOrderId>\\n    <Message>success</Message>\\n    <RequestId>d6834ee9-5045-*************</RequestId>\\n</DeployApplicationResponse>\",\"errorExample\":\"\"}]","title":"用于向 ECS 集群部署应用","summary":"调用DeployApplication接口在ECS集群中部署应用。","description":">  如果需要在导入EDAS的容器服务K8s集群部署应用，请使用EDAS提供的DeployK8sApplication接口，更多信息，请参见[DeployK8sApplication](~~149420~~)。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}