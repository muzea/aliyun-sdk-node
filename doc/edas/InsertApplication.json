{"path":"/pop/v5/changeorder/co_create_app","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"readAndWrite","deprecated":false,"systemTags":{},"parameters":[{"name":"ClusterId","in":"query","schema":{"description":"ECS集群ID。ECS集群ID不为空，则为指定的ECS集群创建应用，为空则为默认集群创建应用（推荐指定）。","type":"string","required":false,"example":"13136119-f384-4f50-b76e-xxxxxxxxxxx"}},{"name":"BuildPackId","in":"query","schema":{"description":"EDAS-Container构建包号，当创建HSF应用时，该参数必须指定。有以下两种获取方式：\n\n- 通过容器版本列表接口ListBuildPack获取，请参见[ListBuildPack](~~149391~~)。\n\n- 在参见[容器版本](~~92614~~)表格中的**构建包序号**列获取。","type":"integer","format":"int32","required":false,"docRequired":false,"example":"59"}},{"name":"Description","in":"query","schema":{"description":"应用描述信息。","type":"string","required":false,"example":"create by edas pop api"}},{"name":"ApplicationName","in":"query","schema":{"description":"应用名称。仅允许使用数字、英文字母、短划线（-）和下划线（_） ，而且必须以英文字母开头，最长36个字符。","type":"string","required":true,"docRequired":true,"example":"hello-edas-test-1"}},{"name":"ReservedPortStr","in":"query","schema":{"description":"**（废弃参数）**应用预留端口号。","type":"string","required":false,"example":"8090"}},{"name":"EcuInfo","in":"query","schema":{"description":"需要扩容的ECS实例的`ecu_id`（导入EDAS的ECS实例在EDAS中的唯一身份），多个`ecu_id`用英文逗号（,）分开。`ecu_id`可通过查询ListScaleOutEcu接口获取，请参见[ListScaleOutEcu](~~149371~~)。","type":"string","required":false,"example":"07bd417a-b863-477d-****-************"}},{"name":"Cpu","in":"query","schema":{"description":"**（废弃参数）**Swarm集群应用容器CPU核数。","type":"integer","format":"int32","required":false,"docRequired":false,"example":"2"}},{"name":"Mem","in":"query","schema":{"description":"**（废弃参数）**Swarm集群应用容器Memory大小。","type":"integer","format":"int32","required":false,"docRequired":false,"example":"2048"}},{"name":"HealthCheckURL","in":"query","schema":{"description":"应用健康检查URL。","type":"string","required":false,"example":"http://127.0.0.1:8080/_ehc.html"}},{"name":"LogicalRegionId","in":"query","schema":{"description":"微服务空间ID，您可在EDAS控制台左侧菜单栏选择**资源管理** > **微服务空间**，找到目标微服务空间对应的微服务空间ID，也可通过ListUserDefineRegion接口获取到微服务空间ID，请参见[ListUserDefineRegion](~~149377~~)。\n \n- 如果指定的集群不在默认微服务空间下，则需要指定该参数，否则会遇到`application regionId is different with cluster regionId!`的错误提示。\n- 如果在默认微服务空间下，则不需要指定。该参数需要与指定的集群ID所在的微服务空间保持一致。","type":"string","required":false,"example":"cn-beijing:prod"}},{"name":"Jdk","in":"query","schema":{"description":"**（废弃参数）**  用来指定应用使用的JDK版本。","type":"string","required":false,"docRequired":false,"example":"8"}},{"name":"WebContainer","in":"query","schema":{"description":"**（废弃参数）** 用于指定Apache Tomcat版本。","type":"string","required":false,"docRequired":false,"example":"4"}},{"name":"PackageType","in":"query","schema":{"description":"应用部署包格式，可设置为war或者jar。","type":"string","required":false,"example":"war"}},{"name":"ComponentIds","in":"query","schema":{"description":"应用组件ID。可通过查询组件列表接口ListComponents接口获取，请参见[ListComponents](~~97502~~)。\n\n当创建的应用运行环境使用Apache Tomcat（适用于WAR包部署的Dubbo应用）或者标准Java应用运行环境（适用于JAR包部署的Spring Boot或Spring Cloud应用）时需要指定。\n\n常用的应用组件ID及含义：\n\n- 4：Apache Tomcat 7.0.91\n- 7：Apache Tomcat 8.5.42\n- 5：表示OpenJDK 1.8.x\n- 6：表示 OpenJDK 1.7.x\n\n该参数需要更新Java或者Python SDK版本到2.57.3或以上版本才可以设置，未使用EDAS提供的SDK的（例如在使用aliyun-python-sdk-core、aliyun-java-sdk-core、aliyun cli等）用户可直接设置该参数。\n","type":"string","required":false,"example":"7"}},{"name":"Hooks","in":"query","schema":{"description":"挂载脚本配置，为一段JSON格式文本，如：\n`[{\"ignoreFail\":false,\"name\":\"postprepareInstanceEnvironmentOnScaleOut\",\"script\":\"ls\"},{\"ignoreFail\":true,\"name\":\"postdeleteInstanceDataOnScaleIn\",\"script\":\"\"},{\"ignoreFail\":true,\"name\":\"prestartInstance\",\"script\":\"\"},{\"ignoreFail\":true,\"name\":\"poststartInstance\",\"script\":\"\"},{\"ignoreFail\":true,\"name\":\"prestopInstance\",\"script\":\"\"},{\"ignoreFail\":true,\"name\":\"poststopInstance\",\"script\":\"\"}]`","type":"string","required":false,"example":"[{\"ignoreFail\":false,\"name\":\"postprepareInstanceEnvironmentOnScaleOut\",\"script\":\"ls\"}]"}},{"name":"JvmOptions","in":"query","schema":{"description":"自定义参数。","type":"string","required":false,"example":"-Dproperty=value"}},{"name":"MinHeapSize","in":"query","schema":{"description":"初始化堆内存大小，单位M。","type":"integer","format":"int32","required":false,"minimum":"0","example":"500"}},{"name":"MaxPermSize","in":"query","schema":{"description":"持久代内存大小，单位M。","type":"integer","format":"int32","required":false,"minimum":"0","example":"200"}},{"name":"MaxHeapSize","in":"query","schema":{"description":"最大堆内存大小，单位M。","type":"integer","format":"int32","required":false,"minimum":"0","example":"1000"}},{"name":"EnableUrlCheck","in":"query","schema":{"description":"是否启用健康检查URL，取值如下：\n\n- **true**：启用\n\n- **false**：不启用","type":"boolean","required":false,"example":"true"}},{"name":"EnablePortCheck","in":"query","schema":{"description":"是否启用端口健康检查，取值如下：\n\n- **true**：启用\n\n- **false**：不启用","type":"boolean","required":false,"example":"true"}},{"name":"HealthCheckUrl","in":"query","schema":{"description":"应用健康检查URL（等价于HealthCheckURL参数）。","type":"string","required":false,"example":"http://127.0.0.1:8080/_ehc.html"}},{"name":"ResourceGroupId","in":"query","schema":{"description":"资源组ID。","type":"string","required":false,"example":"rg-aek24j4s4b*****"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"状态码。","type":"integer","format":"int32","example":"200"},"Message":{"description":"返回信息。","type":"string","example":"The application name test-hsy-C5039-paas-6 had been created successfully."},"RequestId":{"description":"请求ID。","type":"string","example":"4264F69C-686C-4107-B493-0599C8xxxxxx"},"ApplicationInfo":{"description":"应用创建成功后返回的应用对象。","type":"object","properties":{"ChangeOrderId":{"description":"变更流程ID。","type":"string","example":"d0cf569e-dce3-4efb-****-08b70021****"},"AppName":{"description":"应用名称。","type":"string","example":"hello-edas-test-1"},"Owner":{"description":"该应用拥有者，即应用创建者。","type":"string","example":"249763358688********"},"Dockerize":{"description":"是否为Docker应用，取值如下：\n\n- **true**：是\n\n- **false**：否","type":"boolean","example":"false"},"RegionName":{"description":"地域名称。","type":"string","example":"cn-hangzhou"},"AppId":{"description":"应用ID，EDAS应用的唯一标识。","type":"string","example":"6c733bcd-6efb-47a1-8226-cf722c******"},"UserId":{"description":"应用拥有者的USER_ID。","type":"string","example":"tdy218@1362469756xxxxxx"},"Port":{"description":"创建成功的应用默认端口号8080。可以使用UpdateContainerConfiguration接口修改，请参见[UpdateContainerConfiguration](~~149403~~)。","type":"integer","format":"int32","example":"8080"}}}}}}},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"The application name test-hsy-C5039-paas-6 had been created successfully.\\\",\\n  \\\"RequestId\\\": \\\"4264F69C-686C-4107-B493-0599C8xxxxxx\\\",\\n  \\\"ApplicationInfo\\\": {\\n    \\\"ChangeOrderId\\\": \\\"d0cf569e-dce3-4efb-****-08b70021****\\\",\\n    \\\"AppName\\\": \\\"hello-edas-test-1\\\",\\n    \\\"Owner\\\": \\\"249763358688********\\\",\\n    \\\"Dockerize\\\": false,\\n    \\\"RegionName\\\": \\\"cn-hangzhou\\\",\\n    \\\"AppId\\\": \\\"6c733bcd-6efb-47a1-8226-cf722c******\\\",\\n    \\\"UserId\\\": \\\"tdy218@1362469756xxxxxx\\\",\\n    \\\"Port\\\": 8080\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<RequestId>4264F69C-686C-4107-B493-0599C8xxxxxx</RequestId>\\n<Message>The application name test-hsy-C5039-paas-6 had been created successfully.</Message>\\n<ApplicationInfo>\\n    <Dockerize>false</Dockerize>\\n    <Owner>249763358688********</Owner>\\n    <AppId>6c733bcd-6efb-47a1-8226-cf722c******</AppId>\\n    <RegionName>cn-hangzhou</RegionName>\\n    <UserId>tdy218@1362469756xxxxxx</UserId>\\n    <Port>8080</Port>\\n    <ChangeOrderId>d0cf569e-dce3-4efb-****-08b70021****</ChangeOrderId>\\n    <AppName>hello-edas-test-1</AppName>\\n</ApplicationInfo>\\n<Code>200</Code>\",\"errorExample\":\"\"}]","title":"创建 ECS 集群的应用","summary":"调用InsertApplication接口在ECS集群中创建应用。","description":">  如需要创建K8s集群应用，则需要使用EDAS提供的InsertK8sApplication接口。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":"## 常见应用的主要参数说明\n\n1. 使用EDAS Java SDK创建Apache Tomcat作为应用运行环境的原生Dubbo、 Java Web等类型应用主要参数：\n    ```\n    InsertApplicationRequest request = new InsertApplicationRequest();\n    request.setApplicationName(\"hello-edas-test-1\"); //应用名称。\n    request.setPackageType(\"war\"); // 应用包类型，也可以不指定。\n    request.setComponentIds(\"7\");  // 7或者4。7表示Apache Tomcat 8.5.42，4表示 Apache Tomcat 7.0.91。\n    request.setLogicalRegionId(\"cn-hangzhou:prod\");  // 命名空间ID，注意不是命名空间的名称，当指定的集群不在默认命名空间下时，该参数必填。\n    request.setClusterId(\"ebc364ca-1875-4266-ae1f-ad0e7c179417\"); // 在指定Cluster ID的ECS集群下创建应用。\n    ```\n\n\n2. 使用EDAS Java SDK创建标准Java应用运行时环境的原生Spring Boot/Spring Cloud等FatJar类型应用主要参数：\n    ```\n    InsertApplicationRequest request = new InsertApplicationRequest();\n    request.setApplicationName(\"hello-edas-test-2\"); //应用名称。\n    request.setPackageType(\"jar\"); // 应用包类型，也可以不指定。\n    request.setComponentIds(\"5\");  // 5或者6。5表示OpenJDK 1.8.0；6 表示OpenJDK 1.8.0；也可以不指定该参数，默认将使用OpenJDK 1.8.0。\n    request.setLogicalRegionId(\"cn-hangzhou:prod\");  // 命名空间ID，注意不是命名空间的名称，当指定的集群不在默认命名空间下时，该参数必填。\n   request.setClusterId(\"ebc364ca-1875-4266-ae1f-ad0e7c179417\"); // 在指定Cluster ID的ECS集群下创建应用。\n    ```\n\n\n3. 使用EDAS Java SDK创建EDAS-Container作为应用运行时环境的HSF应用主要参数：\n    ```\n    InsertApplicationRequest request = new InsertApplicationRequest();\n    request.setBuildPackId(59); // EDAS-Container构建包版本号，59表示使用 edas-container 3.5.8。\n    request.setApplicationName(\"hello-edas-test-3\"); //应用名称。\n    request.setPackageType(\"war\"); // 应用包类型，war或者jar，也可以不填写。\n    request.setLogicalRegionId(\"cn-hangzhou:prod\");  // 命名空间ID，注意不是命名空间的名称，当指定的集群不在默认命名空间下时，该参数必填。\n    request.setClusterId(\"ebc364ca-1875-4266-ae1f-ad0e7c179417\"); // 在指定Cluster ID的ECS集群下创建应用。\n    ```"}