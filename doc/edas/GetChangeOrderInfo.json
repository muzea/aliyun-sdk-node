{"path":"/pop/v5/changeorder/change_order_info","methods":["post"],"schemes":["http","https"],"security":[{"AK":[]}],"operationType":"read","deprecated":false,"systemTags":{"operationType":"get"},"parameters":[{"name":"ChangeOrderId","in":"query","schema":{"description":"变更流程ID","type":"string","required":true,"docRequired":true,"example":"1074f3e2-e974-4a0e-****-************"}}],"responses":{"200":{"schema":{"type":"object","properties":{"Code":{"description":"接口状态或POP错误码","type":"integer","format":"int32","example":"200"},"Message":{"description":"附加信息","type":"string","example":"success"},"RequestId":{"description":"请求ID","type":"string","example":"4JFR-FV9F***************"},"changeOrderInfo":{"description":"变更流程详情","type":"object","properties":{"Status":{"description":"变更状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止\n- 7：部分成功\n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"ChangeOrderId":{"description":"变更流程ID","type":"string","example":"1074f3e2-e974-4a0e-****-************"},"BatchType":{"description":"分批发布时，下一批变更的执行方式。\n- Automatic：自动\n- Manual：手动","type":"string","example":"Automatic"},"CoType":{"description":"变更流程分类","type":"string","example":"Application Scale Out"},"CreateTime":{"description":"创建时间","type":"string","example":"2019-11-13 14:23:46"},"ChangeOrderDescription":{"description":"变更流程描述","type":"string","example":"应用扩容"},"BatchCount":{"description":"变更分批数","type":"integer","format":"int32","example":"1"},"CreateUserId":{"description":"变更流程的负责人","type":"string","example":"edas_com***_****@******-*****.***"},"SupportRollback":{"description":"是否支持回滚。\n- true：支持回滚\n- false：不支持回滚","type":"boolean","example":"false"},"Desc":{"description":"变更流程描述","type":"string","example":"IP of Scale-Out Instance: 47.107.XX.XX"},"PipelineInfoList":{"type":"object","properties":{"PipelineInfo":{"description":"分批变更任务列表","type":"array","items":{"type":"object","properties":{"PipelineName":{"description":"批次名称","type":"string","example":" Batch: 1"},"StartTime":{"description":"开始时间的时间戳","type":"string","example":"1583911702158"},"UpdateTime":{"description":"更新时间的时间戳","type":"string","example":"1583911743633"},"PipelineStatus":{"description":"任务状态：\n\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"PipelineId":{"description":"分批变更时各批次流程的ID","type":"string","example":"4c4ee320-5e47-4a48-****-************"},"StageList":{"type":"object","properties":{"StageInfoDTO":{"description":"变更流程的任务阶段列表","type":"array","items":{"type":"object","properties":{"StageId":{"description":"阶段ID","type":"string","example":"358a143f-09a0-45e0-****-************@**_*******_*****"},"Status":{"description":"阶段状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"StageName":{"description":"阶段名称","type":"string","example":"Scale Out"},"StageResultDTO":{"description":"阶段任务的执行结果","type":"object","properties":{"InstanceDTOList":{"type":"object","properties":{"InstanceDTO":{"description":"运行在每台ECS实例上阶段执行结果","type":"array","items":{"type":"object","properties":{"Status":{"description":"运行状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"InstanceIp":{"description":"实例IP","type":"string","example":"47.XX.XX.12 (Public)<br>***.**.*.*** (*******)"},"PodName":{"description":"节点名称","type":"string","example":"canary-test"},"InstanceName":{"description":"实例名称","type":"string","example":"EDAS-scaled"},"PodStatus":{"description":"Pod状态","type":"string","example":"执行中"},"InstanceStageDTOList":{"type":"object","properties":{"InstanceStageDTO":{"description":"每个实例上阶段执行的结果列表","type":"array","items":{"type":"object","properties":{"StageId":{"description":"阶段ID","type":"string","example":"5dd4c0f2-d81a-406f-****-************"},"Status":{"description":"阶段状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"StartTime":{"description":"开始时间","type":"string","example":"2020-03-11T07:28:49Z"},"StageMessage":{"description":"阶段信息","type":"string","example":"Pulling image \\\"registry-vpc.cn-hangzhou.aliyuncs.com****-user/1172745****_shared_repo:428084d6-265f-****-911a-7eb0d2c3****_15839117****\\"},"FinishTime":{"description":"结束时间","type":"string","example":"2020-03-11T07:28:52Z"},"StageName":{"description":"阶段名称","type":"string","example":" scale out "}}}}}}}}}}},"ServiceStage":{"description":"服务型阶段执行结果","type":"object","properties":{"StageId":{"description":"阶段ID","type":"string","example":"358a143f-09a0-45e0-****-************"},"Status":{"description":"运行状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"Message":{"description":"执行结果信息","type":"string","example":"Success"},"StageName":{"description":"阶段名称","type":"string","example":"Enable Tengine"}}}}}}}}}},"StageDetailList":{"type":"object","properties":{"StageDetailDTO":{"description":"阶段执行结果列表","type":"array","items":{"type":"object","properties":{"StageId":{"description":"阶段ID","type":"string","example":"d7561440-10a6-452f-8a90-62f6e7ec****"},"StageStatus":{"description":"阶段状态：\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"integer","format":"int32","example":"2"},"StageName":{"description":"阶段名称","type":"string","example":"Process Start"},"TaskList":{"type":"object","properties":{"TaskInfoDTO":{"description":"任务列表","type":"array","items":{"type":"object","properties":{"TaskErrorIgnorance":{"description":"表示任务本身是否能容忍错误，如果容忍，则发生错误时，变更流程将忽略错误来继续下一个任务。\n- 0：不容忍错误\n- 1：容忍错误","type":"integer","format":"int32","example":"0"},"ShowManualIgnorance":{"description":"是否显示`忽略错误按钮`。\n- true：忽略变更流程中出现的错误。目前只有执行URL健康检查时，该参数的取值可为true。\n- false：不忽略变更流程中出现的错误。","type":"boolean","example":"false"},"TaskStatus":{"description":"任务状态\n- 0：准备 \n- 1：执行中 \n- 2：执行成功 \n- 3：执行失败 \n- 6：终止 \n- 8：手动分批发布模式下，等待手工确认执行下一批\n- 9：自动分批发布模式下，等待下一批执行中\n- 10：系统异常执行失败","type":"string","example":"2"},"TaskMessage":{"description":"任务信息","type":"string","example":"[CALLBACK] 2020-03-11 15:28:44.781  requestId: c952ab99-8c5b-4ff1-9412-ae3bf9b1****, message: success"},"TaskName":{"description":"任务名称","type":"string","example":"Build Image"},"TaskErrorCode":{"description":"错误码","type":"string","example":"400"},"RetryType":{"description":"重试类型，0 表示不重试，1表示自动重试，2表示手动重试","type":"integer","format":"int32","example":"0"},"TaskId":{"description":"任务ID","type":"string","example":"d6d3b934-90a1-4ae8-8cbd-2446003d****"},"TaskErrorMessage":{"description":"任务错误信息","type":"string","example":"400"}}}}}}}}}}}}}}}},"Targets":{"type":"object","properties":{"Items":{"type":"array","items":{"description":"关联ECS的IP地址列表","type":"string","example":"[\"123.250.XX.XX\",\"234.123.XX.XX\"]"}}}},"TrafficControl":{"description":"流控规则","type":"object","properties":{"Routes":{"description":"路由转发策略","type":"string","example":"[{\"app\":\"9c8247da-91b6-42bb-8f99-92a0b9c6f****\",\"type\":\"GROUP\"}]"},"Rules":{"description":"流量的路由规则","type":"string","example":"[{\"conditionType\":\"content\",\"conditions\":[{\"key\":\"name\",\"operator\":\"EQ\",\"strategy\":\"PARAM\",\"values\":[\"jim\"]},{\"key\":\"name\",\"operator\":\"EQ\",\"strategy\":\"COOKIE\",\"values\":[\"jim\"]}],\"percent\":100,\"protocol\":\"SPRINGCLOUD\",\"triggerPolicy\":\"AND\"}]"},"Tips":{"description":"流量规则的提示说明文案","type":"string","example":"灰度批次发布完毕，已确认继续下一批。"}}}}}}}}},"errorCodes":{"400":[{"errorCode":"Edas.errorcode.PermissionDenied.message","errorMessage":"No permissions"},{"errorCode":"Edas.errorcode.ParameterMissing.ChangeOrderId.message","errorMessage":"Change process ID is missing."}]},"responseDemo":"[{\"type\":\"json\",\"example\":\"{\\n  \\\"Code\\\": 200,\\n  \\\"Message\\\": \\\"success\\\",\\n  \\\"RequestId\\\": \\\"4JFR-FV9F***************\\\",\\n  \\\"changeOrderInfo\\\": {\\n    \\\"Status\\\": 2,\\n    \\\"ChangeOrderId\\\": \\\"1074f3e2-e974-4a0e-****-************\\\",\\n    \\\"BatchType\\\": \\\"Automatic\\\",\\n    \\\"CoType\\\": \\\"Application Scale Out\\\",\\n    \\\"CreateTime\\\": \\\"2019-11-13 14:23:46\\\",\\n    \\\"ChangeOrderDescription\\\": \\\"应用扩容\\\",\\n    \\\"BatchCount\\\": 1,\\n    \\\"CreateUserId\\\": \\\"edas_com***_****@******-*****.***\\\",\\n    \\\"SupportRollback\\\": false,\\n    \\\"Desc\\\": \\\"IP of Scale-Out Instance: 47.107.XX.XX\\\",\\n    \\\"PipelineInfoList\\\": {\\n      \\\"PipelineInfo\\\": [\\n        {\\n          \\\"PipelineName\\\": \\\" Batch: 1\\\",\\n          \\\"StartTime\\\": \\\"1583911702158\\\",\\n          \\\"UpdateTime\\\": \\\"1583911743633\\\",\\n          \\\"PipelineStatus\\\": 2,\\n          \\\"PipelineId\\\": \\\"4c4ee320-5e47-4a48-****-************\\\",\\n          \\\"StageList\\\": {\\n            \\\"StageInfoDTO\\\": [\\n              {\\n                \\\"StageId\\\": \\\"358a143f-09a0-45e0-****-************@**_*******_*****\\\",\\n                \\\"Status\\\": 2,\\n                \\\"StageName\\\": \\\"Scale Out\\\",\\n                \\\"StageResultDTO\\\": {\\n                  \\\"InstanceDTOList\\\": {\\n                    \\\"InstanceDTO\\\": [\\n                      {\\n                        \\\"Status\\\": 2,\\n                        \\\"InstanceIp\\\": \\\"47.XX.XX.12 (Public)<br>***.**.*.*** (*******)\\\",\\n                        \\\"PodName\\\": \\\"canary-test\\\",\\n                        \\\"InstanceName\\\": \\\"EDAS-scaled\\\",\\n                        \\\"PodStatus\\\": \\\"执行中\\\",\\n                        \\\"InstanceStageDTOList\\\": {\\n                          \\\"InstanceStageDTO\\\": [\\n                            {\\n                              \\\"StageId\\\": \\\"5dd4c0f2-d81a-406f-****-************\\\",\\n                              \\\"Status\\\": 2,\\n                              \\\"StartTime\\\": \\\"2020-03-11T07:28:49Z\\\",\\n                              \\\"StageMessage\\\": \\\"Pulling image \\\\\\\\\\\\\\\"registry-vpc.cn-hangzhou.aliyuncs.com****-user/1172745****_shared_repo:428084d6-265f-****-911a-7eb0d2c3****_15839117****\\\\\\\\\\\",\\n                              \\\"FinishTime\\\": \\\"2020-03-11T07:28:52Z\\\",\\n                              \\\"StageName\\\": \\\" scale out \\\"\\n                            }\\n                          ]\\n                        }\\n                      }\\n                    ]\\n                  },\\n                  \\\"ServiceStage\\\": {\\n                    \\\"StageId\\\": \\\"358a143f-09a0-45e0-****-************\\\",\\n                    \\\"Status\\\": 2,\\n                    \\\"Message\\\": \\\"Success\\\",\\n                    \\\"StageName\\\": \\\"Enable Tengine\\\"\\n                  }\\n                }\\n              }\\n            ]\\n          },\\n          \\\"StageDetailList\\\": {\\n            \\\"StageDetailDTO\\\": [\\n              {\\n                \\\"StageId\\\": \\\"d7561440-10a6-452f-8a90-62f6e7ec****\\\",\\n                \\\"StageStatus\\\": 2,\\n                \\\"StageName\\\": \\\"Process Start\\\",\\n                \\\"TaskList\\\": {\\n                  \\\"TaskInfoDTO\\\": [\\n                    {\\n                      \\\"TaskErrorIgnorance\\\": 0,\\n                      \\\"ShowManualIgnorance\\\": false,\\n                      \\\"TaskStatus\\\": \\\"2\\\",\\n                      \\\"TaskMessage\\\": \\\"[CALLBACK] 2020-03-11 15:28:44.781  requestId: c952ab99-8c5b-4ff1-9412-ae3bf9b1****, message: success\\\",\\n                      \\\"TaskName\\\": \\\"Build Image\\\",\\n                      \\\"TaskErrorCode\\\": \\\"400\\\",\\n                      \\\"RetryType\\\": 0,\\n                      \\\"TaskId\\\": \\\"d6d3b934-90a1-4ae8-8cbd-2446003d****\\\",\\n                      \\\"TaskErrorMessage\\\": \\\"400\\\"\\n                    }\\n                  ]\\n                }\\n              }\\n            ]\\n          }\\n        }\\n      ]\\n    },\\n    \\\"Targets\\\": {\\n      \\\"Items\\\": [\\n        \\\"[\\\\\\\"123.250.XX.XX\\\\\\\",\\\\\\\"234.123.XX.XX\\\\\\\"]\\\"\\n      ]\\n    },\\n    \\\"TrafficControl\\\": {\\n      \\\"Routes\\\": \\\"[{\\\\\\\"app\\\\\\\":\\\\\\\"9c8247da-91b6-42bb-8f99-92a0b9c6f****\\\\\\\",\\\\\\\"type\\\\\\\":\\\\\\\"GROUP\\\\\\\"}]\\\",\\n      \\\"Rules\\\": \\\"[{\\\\\\\"conditionType\\\\\\\":\\\\\\\"content\\\\\\\",\\\\\\\"conditions\\\\\\\":[{\\\\\\\"key\\\\\\\":\\\\\\\"name\\\\\\\",\\\\\\\"operator\\\\\\\":\\\\\\\"EQ\\\\\\\",\\\\\\\"strategy\\\\\\\":\\\\\\\"PARAM\\\\\\\",\\\\\\\"values\\\\\\\":[\\\\\\\"jim\\\\\\\"]},{\\\\\\\"key\\\\\\\":\\\\\\\"name\\\\\\\",\\\\\\\"operator\\\\\\\":\\\\\\\"EQ\\\\\\\",\\\\\\\"strategy\\\\\\\":\\\\\\\"COOKIE\\\\\\\",\\\\\\\"values\\\\\\\":[\\\\\\\"jim\\\\\\\"]}],\\\\\\\"percent\\\\\\\":100,\\\\\\\"protocol\\\\\\\":\\\\\\\"SPRINGCLOUD\\\\\\\",\\\\\\\"triggerPolicy\\\\\\\":\\\\\\\"AND\\\\\\\"}]\\\",\\n      \\\"Tips\\\": \\\"灰度批次发布完毕，已确认继续下一批。\\\"\\n    }\\n  }\\n}\",\"errorExample\":\"\"},{\"type\":\"xml\",\"example\":\"<GetChangeOrderInfoResponse>\\n    <Code>200</Code>\\n    <Message>success</Message>\\n    <RequestId>4JFR-FV9F***************</RequestId>\\n    <changeOrderInfo>\\n        <Status>2</Status>\\n        <ChangeOrderId>1074f3e2-e974-4a0e-****-************</ChangeOrderId>\\n        <BatchType>Automatic</BatchType>\\n        <CoType>Application Scale Out</CoType>\\n        <CreateTime>2019-11-13 14:23:46</CreateTime>\\n        <ChangeOrderDescription>应用扩容</ChangeOrderDescription>\\n        <BatchCount>1</BatchCount>\\n        <CreateUserId>edas_com***_****@******-*****.***</CreateUserId>\\n        <SupportRollback>false</SupportRollback>\\n        <Desc>IP of Scale-Out Instance: 47.107.XX.XX</Desc>\\n        <PipelineInfoList>\\n            <PipelineName> Batch: 1</PipelineName>\\n            <StartTime>1583911702158</StartTime>\\n            <UpdateTime>1583911743633</UpdateTime>\\n            <PipelineStatus>2</PipelineStatus>\\n            <PipelineId>4c4ee320-5e47-4a48-****-************</PipelineId>\\n            <StageList>\\n                <StageId>358a143f-09a0-45e0-****-************@**_*******_*****</StageId>\\n                <Status>2</Status>\\n                <StageName>Scale Out</StageName>\\n                <StageResultDTO>\\n                    <InstanceDTOList>\\n                        <Status>2</Status>\\n                        <InstanceIp>47.XX.XX.12 (Public)&lt;br&gt;***.**.*.*** (*******)</InstanceIp>\\n                        <PodName>canary-test</PodName>\\n                        <InstanceName>EDAS-scaled</InstanceName>\\n                        <PodStatus>执行中</PodStatus>\\n                        <InstanceStageDTOList>\\n                            <StageId>5dd4c0f2-d81a-406f-****-************</StageId>\\n                            <Status>2</Status>\\n                            <StartTime>2020-03-11T07:28:49Z</StartTime>\\n                            <StageMessage>Pulling image \\\\\\\"registry-vpc.cn-hangzhou.aliyuncs.com****-user/1172745****_shared_repo:428084d6-265f-****-911a-7eb0d2c3****_15839117****\\\\</StageMessage>\\n                            <FinishTime>2020-03-11T07:28:52Z</FinishTime>\\n                            <StageName> scale out </StageName>\\n                        </InstanceStageDTOList>\\n                    </InstanceDTOList>\\n                    <ServiceStage>\\n                        <StageId>358a143f-09a0-45e0-****-************</StageId>\\n                        <Status>2</Status>\\n                        <Message>Success</Message>\\n                        <StageName>Enable Tengine</StageName>\\n                    </ServiceStage>\\n                </StageResultDTO>\\n            </StageList>\\n            <StageDetailList>\\n                <StageId>d7561440-10a6-452f-8a90-62f6e7ec****</StageId>\\n                <StageStatus>2</StageStatus>\\n                <StageName>Process Start</StageName>\\n                <TaskList>\\n                    <TaskErrorIgnorance>0</TaskErrorIgnorance>\\n                    <ShowManualIgnorance>false</ShowManualIgnorance>\\n                    <TaskStatus>2</TaskStatus>\\n                    <TaskMessage>[CALLBACK] 2020-03-11 15:28:44.781  requestId: c952ab99-8c5b-4ff1-9412-ae3bf9b1****, message: success</TaskMessage>\\n                    <TaskName>Build Image</TaskName>\\n                    <TaskErrorCode>400</TaskErrorCode>\\n                    <TaskId>d6d3b934-90a1-4ae8-8cbd-2446003d****</TaskId>\\n                    <TaskErrorMessage>400</TaskErrorMessage>\\n                </TaskList>\\n            </StageDetailList>\\n        </PipelineInfoList>\\n        <TrafficControl>\\n            <Routes>[{\\\"app\\\":\\\"9c8247da-91b6-42bb-8f99-92a0b9c6f****\\\",\\\"type\\\":\\\"GROUP\\\"}]</Routes>\\n            <Rules>[{\\\"conditionType\\\":\\\"content\\\",\\\"conditions\\\":[{\\\"key\\\":\\\"name\\\",\\\"operator\\\":\\\"EQ\\\",\\\"strategy\\\":\\\"PARAM\\\",\\\"values\\\":[\\\"jim\\\"]},{\\\"key\\\":\\\"name\\\",\\\"operator\\\":\\\"EQ\\\",\\\"strategy\\\":\\\"COOKIE\\\",\\\"values\\\":[\\\"jim\\\"]}],\\\"percent\\\":100,\\\"protocol\\\":\\\"SPRINGCLOUD\\\",\\\"triggerPolicy\\\":\\\"AND\\\"}]</Rules>\\n            <Tips>灰度批次发布完毕，已确认继续下一批。</Tips>\\n        </TrafficControl>\\n    </changeOrderInfo>\\n</GetChangeOrderInfoResponse>\",\"errorExample\":\"\"}]","title":"查看变更流程详情","summary":"调用GetChangeOrderInfo接口查看变更流程详情。","requestParamsDescription":" ","responseParamsDescription":" ","extraInfo":" "}